(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function getLens(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=o.indexOf("=");e===-1&&(e=r);var t=e===r?0:4-e%4;return[e,t]}function byteLength(o){var r=getLens(o),e=r[0],t=r[1];return 3*(e+t)/4-t}function _byteLength(o,r,e){return 3*(r+e)/4-e}function toByteArray(o){for(var r,e=getLens(o),t=e[0],n=e[1],u=new Arr(_byteLength(o,t,n)),p=0,a=n>0?t-4:t,h=0;h<a;h+=4)r=revLookup[o.charCodeAt(h)]<<18|revLookup[o.charCodeAt(h+1)]<<12|revLookup[o.charCodeAt(h+2)]<<6|revLookup[o.charCodeAt(h+3)],u[p++]=r>>16&255,u[p++]=r>>8&255,u[p++]=255&r;return 2===n&&(r=revLookup[o.charCodeAt(h)]<<2|revLookup[o.charCodeAt(h+1)]>>4,u[p++]=255&r),1===n&&(r=revLookup[o.charCodeAt(h)]<<10|revLookup[o.charCodeAt(h+1)]<<4|revLookup[o.charCodeAt(h+2)]>>2,u[p++]=r>>8&255,u[p++]=255&r),u}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]}function encodeChunk(o,r,e){for(var t,n=[],u=r;u<e;u+=3)t=(o[u]<<16&16711680)+(o[u+1]<<8&65280)+(255&o[u+2]),n.push(tripletToBase64(t));return n.join("")}function fromByteArray(o){for(var r,e=o.length,t=e%3,n=[],u=16383,p=0,a=e-t;p<a;p+=u)n.push(encodeChunk(o,p,p+u>a?a:p+u));return 1===t?(r=o[e-1],n.push(lookup[r>>2]+lookup[r<<4&63]+"==")):2===t&&(r=(o[e-2]<<8)+o[e-1],n.push(lookup[r>>10]+lookup[r>>4&63]+lookup[r<<2&63]+"=")),n.join("")}exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;
},{}],2:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Buffer.prototype):(null===t&&(t=new Buffer(e)),t.length=e),t}function Buffer(t,e,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,e,r)}function from(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?fromArrayBuffer(t,e,r,n):"string"==typeof e?fromString(t,e,r):fromObject(t,e)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc(t,e,r,n){return assertSize(e),e<=0?createBuffer(t,e):void 0!==r?"string"==typeof n?createBuffer(t,e).fill(r,n):createBuffer(t,e).fill(r):createBuffer(t,e)}function allocUnsafe(t,e){if(assertSize(e),t=createBuffer(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function fromString(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(e,r);t=createBuffer(t,n);var f=t.write(e,r);return f!==n&&(t=t.slice(0,f)),t}function fromArrayLike(t,e){var r=e.length<0?0:0|checked(e.length);t=createBuffer(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),Buffer.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Buffer.prototype):t=fromArrayLike(t,e),t}function fromObject(t,e){if(Buffer.isBuffer(e)){var r=0|checked(e.length);return t=createBuffer(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&isArray(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t){return+t!=t&&(t=0),Buffer.alloc(+t)}function byteLength(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"latin1":case"binary":return latin1Slice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function swap(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function bidirectionalIndexOf(t,e,r,n,f){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=f?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(f)return-1;r=t.length-1}else if(r<0){if(!f)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:arrayIndexOf(t,e,r,n,f);if("number"==typeof e)return e=255&e,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):arrayIndexOf(t,[e],r,n,f);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,r,n,f){function i(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,u=t.length,s=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,s/=2,r/=2}var a;if(f){var h=-1;for(a=r;a<u;a++)if(i(t,a)===i(e,h===-1?0:a-h)){if(h===-1&&(h=a),a-h+1===s)return h*o}else h!==-1&&(a-=a-h),h=-1}else for(r+s>u&&(r=u-s),a=r;a>=0;a--){for(var c=!0,l=0;l<s;l++)if(i(t,a+l)!==i(e,l)){c=!1;break}if(c)return a}return-1}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n),n>f&&(n=f)):n=f;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))return o;t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function latin1Write(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128===(192&s)&&(c=(31&i)<<6|63&s,c>127&&(o=c));break;case 3:s=t[f+1],a=t[f+2],128===(192&s)&&128===(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128===(192&s)&&128===(192&a)&&128===(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(127&t[f]);return n}function latin1Slice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;++i)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>f||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;++f)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;++f)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=(f-55296<<10|r-56320)+65536}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);++f)e[f+r]=t[f];return f}function isnan(t){return t!==t}var base64=require(1),ieee754=require(3),isArray=require(5);exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,r){return from(null,t,e,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,r){return alloc(null,t,e,r)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i;++f)if(t[f]!==e[f]){r=t[f],n=e[f];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Buffer.allocUnsafe(e),f=0;for(r=0;r<t.length;++r){var i=t[r];if(!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)swap(this,e,e+1);return this},Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)swap(this,e,e+3),swap(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)swap(this,e,e+7),swap(this,e+1,e+6),swap(this,e+2,e+5),swap(this,e+3,e+4);return this},Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t,e,r,n,f){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===f&&(f=this.length),e<0||r>t.length||n<0||f>this.length)throw new RangeError("out of range index");if(n>=f&&e>=r)return 0;if(n>=f)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,f>>>=0,this===t)return 0;for(var i=f-n,o=r-e,u=Math.min(i,o),s=this.slice(n,f),a=t.slice(e,r),h=0;h<u;++h)if(s[h]!==a[h]){i=s[h],o=a[h];break}return i<o?-1:o<i?1:0},Buffer.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},Buffer.prototype.indexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!1)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0)}var f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"latin1":case"binary":return latin1Write(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=Buffer.prototype;else{var f=e-t;n=new Buffer(f,(void 0));for(var i=0;i<f;++i)n[i]=this[i+t]}return n},Buffer.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e=0|e,r=0|r,!n){var f=Math.pow(2,8*r)-1;checkInt(this,t,e,r,f,0)}var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e=0|e,r=0|r,!n){var f=Math.pow(2,8*r)-1;checkInt(this,t,e,r,f,0)}var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;--f)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;++f)t[f+e]=this[f+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var f=t.charCodeAt(0);f<256&&(t=f)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var i;if("number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,n).toString()),u=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%u]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"1":1,"3":3,"5":5}],3:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],4:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],5:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};
},{}],6:[function(require,module,exports){
jQuery.fn.vectorMap("addMap","france_fr",{width:520,height:550,paths:{"fr-01":{path:"M 383.28125,262.59375 L 381.125,262.8125 L 379.75,265.34375 L 376.0625,279.78125 L 375.53125,280.96875 L 375.15625,285.53125 L 374.09375,287 L 374.09375,293.59375 L 373.46875,295.09375 L 377.28125,297.40625 L 378.78125,297.625 L 381.125,299.75 L 381.53125,303.15625 L 384.09375,302.3125 L 388.0625,303.46875 L 388.125,302.71875 L 390.03125,302.71875 L 392.78125,305.28125 L 395.34375,304 L 396.625,300.1875 L 397.90625,298.6875 L 399.59375,298.90625 L 401.28125,300.40625 L 402.15625,303.15625 L 410,312.71875 L 412.34375,311.03125 L 412.75,307.40625 L 415.3125,306.96875 L 415.3125,300.59375 L 416.59375,299.53125 L 417,293.8125 L 417.5,294.21875 L 417.4375,292.125 L 416.375,290.1875 L 416.8125,284.6875 L 418.71875,285.75 L 419.78125,283.8125 L 421.6875,283.1875 L 423.65625,281.625 L 421.53125,281.625 L 421.53125,277.90625 L 423.875,276.53125 L 427.375,276.15625 L 427.59375,274.1875 L 426.40625,273.40625 L 429.34375,269.6875 L 428.9375,268.53125 L 425.59375,266.75 L 417.46875,275.6875 L 411.8125,275.6875 L 411.8125,273.34375 L 408.6875,271.78125 L 404.96875,275.875 L 402.03125,276.28125 L 402.03125,273.53125 L 399.5,272.375 L 395.59375,266.90625 L 392.0625,265.53125 L 390.90625,263 L 388.9375,262.59375 L 387,263.96875 L 385.4375,264.375 L 383.28125,262.59375 z ",name:"Ain"},"fr-02":{path:"M 328.40625,62.21875 L 325.28125,64.375 L 323.71875,63 L 322.34375,63 L 319.21875,65.15625 L 316.875,63.78125 L 314.53125,65.15625 L 313.75,65.34375 L 313.15625,64.15625 L 311,64.15625 L 309.4375,65.15625 L 309.375,65.15625 L 309.84375,67.90625 L 307.28125,70.6875 L 307.28125,73.25 L 305.5,75.25 L 305.90625,77.625 L 306.875,81.59375 L 308.0625,88.34375 L 307.6875,94.28125 L 306.875,96.0625 L 309.25,97.84375 L 307.46875,98.65625 L 306.28125,103.40625 L 302.90625,104.1875 L 301.71875,106.1875 L 304.09375,106.59375 L 304.5,109.34375 L 302.71875,109.75 L 302.90625,112.71875 L 303.5,112.53125 L 304.5,110.9375 L 306.875,112.53125 L 308.28125,114.125 L 307.875,116.78125 L 309.65625,118.0625 L 310.25,122.375 L 315.5,127.4375 L 317.25,128.03125 L 318.25,130.375 L 321.53125,131.0625 L 321.9375,130.5625 L 322.9375,128.4375 L 325.875,127.0625 L 327.4375,122.96875 L 329.1875,121.78125 L 328.1875,120.40625 L 325.65625,120.40625 L 325.28125,119.0625 L 327.03125,118.28125 L 327.8125,117.09375 L 326.0625,115.9375 L 326.625,114.15625 L 331.125,113.78125 L 330.34375,112.03125 L 327.625,110.25 L 327.625,105 L 331.3125,102.25 L 335.4375,102.25 L 335.03125,100.3125 L 337.375,99.3125 L 340.6875,101.46875 L 342.0625,101.09375 L 341.875,94.4375 L 342.46875,92.09375 L 343.25,89.375 L 340.6875,88 L 341.28125,86.4375 L 345,85.65625 L 345,83.125 L 347.9375,81.5625 L 348.71875,79.21875 L 347.75,77.65625 L 347.9375,74.71875 L 349.6875,73.15625 L 347.9375,69.84375 L 348.46875,66.375 L 344.5,66.375 L 343.4375,67.09375 L 339.71875,66.125 L 338.9375,63.59375 L 337.78125,63.59375 L 335.625,65.53125 L 335.25,63.78125 L 330.9375,63.375 L 329.75,62.40625 L 328.40625,62.21875 z ",name:"Aisne"},"fr-03":{path:"M 301.625,247.96875 L 298.90625,251.46875 L 297.34375,251.65625 L 295.59375,253.4375 L 293.625,251.28125 L 288.375,256.5625 L 288.375,259.6875 L 289.34375,260.46875 L 289.53125,262.03125 L 286.8125,264.15625 L 284.25,263.375 L 279.375,264.375 L 276.84375,267.28125 L 275.90625,269.28125 L 276.0625,269.25 L 278.40625,272.5625 L 278.40625,274.90625 L 279.75,276.65625 L 281.125,274.90625 L 282.6875,277.65625 L 284.84375,278.4375 L 287,283.5 L 287.09375,284.96875 L 290.0625,287.28125 L 291.65625,286.5625 L 292.90625,283.5625 L 294.125,283.21875 L 294.125,281.625 L 296.25,281.4375 L 296.4375,282.5 L 299.09375,279.5 L 302.09375,279.5 L 302.625,280.5625 L 301.21875,282.5 L 303.3125,284.8125 L 303.6875,286.21875 L 308.625,289.0625 L 314.625,289.9375 L 316.40625,289.75 L 319.0625,290.28125 L 321.34375,288.875 L 323.125,289.75 L 323.46875,292.21875 L 325.78125,292.75 L 328.78125,292.59375 L 329.65625,294.71875 L 332.40625,295.8125 L 332.5,294.84375 L 337.1875,294.625 L 336.8125,283.5 L 335.4375,280.78125 L 336,278.625 L 339.25,278.0625 L 339.34375,277.84375 L 343.4375,274.71875 L 343.625,267.09375 L 342.25,265.15625 L 339.125,265.15625 L 337.96875,263.59375 L 334.65625,263.59375 L 333.6875,262.40625 L 333.6875,259.46875 L 329.75,252.0625 L 327.8125,250.6875 L 324.09375,255.78125 L 322.53125,256.15625 L 321.9375,253.625 L 320.1875,252.84375 L 319.40625,254.40625 L 316.5,254.40625 L 316.09375,252.65625 L 314.125,253.8125 L 312,255 L 309.65625,252.4375 L 306.3125,250.875 L 306.125,248.34375 L 301.625,247.96875 z ",name:"Allier"},"fr-04":{path:"M 463.84375,364.34375 L 461.71875,367.53125 L 458.71875,369.3125 L 457.65625,371.4375 L 455,371.59375 L 455,373.53125 L 454.28125,374.59375 L 453.21875,377.25 L 446.875,377.09375 L 443.875,375.5 L 441.90625,376.90625 L 438.21875,376.71875 L 437.3125,377.96875 L 438.21875,377.96875 L 438.75,381.3125 L 437.84375,381.6875 L 434.5,379.5625 L 434.5,378.3125 L 432.5625,376.71875 L 431.5,376.71875 L 431.5,378.5 L 429.90625,378.84375 L 426.53125,380.78125 L 424.40625,384.34375 L 423.875,386.09375 L 425.125,386.4375 L 425.3125,389.28125 L 424.0625,389.28125 L 422.125,387.5 L 421.0625,387.6875 L 421.59375,389.28125 L 424.59375,392.625 L 422.65625,393.34375 L 421.25,392.46875 L 417.6875,392.46875 L 414.6875,395.28125 L 414.65625,395.25 L 414.53125,396.40625 L 413.375,395.03125 L 411.8125,393.65625 L 410.8125,396.59375 L 409.0625,398.15625 L 408.3125,398.09375 L 408.34375,398.28125 L 408.5,400.9375 L 410.625,401.3125 L 410.625,403.78125 L 408.6875,404.65625 L 409.03125,407.5 L 412.5625,409.25 L 412.5625,411.1875 L 410.96875,412.96875 L 410.96875,414.5625 L 415.40625,414.5625 L 419.46875,419.15625 L 419.4375,419.25 L 424.59375,417.5625 L 430.96875,421.8125 L 434.5,419.15625 L 435.375,417.375 L 440.34375,415.78125 L 443.5,417.90625 L 448.09375,414.5625 L 453.40625,414.75 L 454.8125,413.3125 L 457.78125,413.1875 L 457.84375,413.15625 L 457.125,411.375 L 458,410.3125 L 457.65625,408.90625 L 460.46875,408.90625 L 461.1875,408.03125 L 463.84375,406.59375 L 465.96875,408.03125 L 467.375,407.125 L 464.03125,404.125 L 460.46875,400.78125 L 459.25,400.40625 L 459.0625,397.75 L 456.9375,394.59375 L 457.65625,390 L 458.71875,387.5 L 460.65625,385.90625 L 460.84375,383.4375 L 463.5,382.03125 L 463.90625,381.875 L 463.90625,378.09375 L 466.65625,377.71875 L 465.09375,376.34375 L 463.125,375.75 L 462.15625,373.21875 L 462.9375,371.46875 L 466.4375,367.75 L 465.875,365 L 466.375,364.46875 L 463.84375,364.34375 z ",name:"Alpes de Haute Provence"},"fr-05":{path:"M 447.34375,339.15625 L 445.59375,339.9375 L 445.1875,342.875 L 441.6875,343.28125 L 441.09375,340.53125 L 439.9375,339.375 L 436.40625,339.75 L 435.03125,340.9375 L 434.25,345.03125 L 434.84375,346 L 438.9375,346.40625 L 439.71875,348.9375 L 441.28125,349.71875 L 441.28125,354 L 437.5625,353.8125 L 436,355.5625 L 431.53125,354.78125 L 429,356.9375 L 427.21875,356.15625 L 424.6875,358.125 L 425.65625,359.875 L 424.09375,361.4375 L 419.21875,361.4375 L 419.21875,363.78125 L 420.78125,364.5625 L 420.1875,365.9375 L 416.875,367.28125 L 412.78125,367.6875 L 411.59375,371.40625 L 411.40625,373.75 L 413.5625,375.5 L 411.40625,378.03125 L 408.6875,376.65625 L 405.5625,376.46875 L 405.15625,378.21875 L 407.125,379.59375 L 404.75,381.15625 L 405.5625,384.46875 L 412.1875,386.25 L 413.375,388.78125 L 415.3125,389.15625 L 414.65625,395.25 L 414.6875,395.28125 L 417.6875,392.46875 L 421.25,392.46875 L 422.65625,393.34375 L 424.59375,392.625 L 421.59375,389.28125 L 421.0625,387.6875 L 422.125,387.5 L 424.0625,389.28125 L 425.3125,389.28125 L 425.125,386.4375 L 423.875,386.09375 L 424.40625,384.34375 L 426.53125,380.78125 L 429.90625,378.84375 L 431.5,378.5 L 431.5,376.71875 L 432.5625,376.71875 L 434.5,378.3125 L 434.5,379.5625 L 437.84375,381.6875 L 438.75,381.3125 L 438.21875,377.96875 L 437.3125,377.96875 L 438.21875,376.71875 L 441.90625,376.90625 L 443.875,375.5 L 446.875,377.09375 L 453.21875,377.25 L 454.28125,374.59375 L 455,373.53125 L 455,371.59375 L 457.65625,371.4375 L 458.71875,369.3125 L 461.71875,367.53125 L 463.84375,364.34375 L 466.375,364.46875 L 468.21875,362.46875 L 470.34375,362.65625 L 470.34375,360.90625 L 467.625,359.53125 L 467.03125,353.875 L 464.875,353.09375 L 462.15625,353.5 L 457.0625,350.9375 L 456.28125,345.09375 L 453.375,344.125 L 452.375,342.15625 L 451.09375,339.34375 L 447.34375,339.15625 z ",name:"Hautes Alpes"},"fr-06":{path:"M 463.90625,381.875 L 463.5,382.03125 L 460.84375,383.4375 L 460.65625,385.90625 L 458.71875,387.5 L 457.65625,390 L 456.9375,394.59375 L 459.0625,397.75 L 459.25,400.40625 L 460.46875,400.78125 L 464.03125,404.125 L 467.375,407.125 L 465.96875,408.03125 L 463.84375,406.59375 L 461.1875,408.03125 L 460.46875,408.90625 L 457.65625,408.90625 L 458,410.3125 L 457.125,411.375 L 457.84375,413.15625 L 455.53125,414.5625 L 456.40625,416.6875 L 458.71875,416.84375 L 461,417.90625 L 461.375,421.625 L 463.5,423.75 L 464.71875,423.75 L 467.03125,424.625 L 467.375,426.59375 L 465.96875,427.8125 L 467.03125,428.875 L 467.03125,430.125 L 469.21875,432.375 L 469.375,432.1875 L 469.5625,427.71875 L 473.46875,428.5 L 474.84375,426.71875 L 476.8125,427.125 L 477,421.0625 L 481.5,420.6875 L 485.40625,417.15625 L 488.90625,417.15625 L 489.09375,415 L 492.625,412.875 L 490.65625,408.375 L 493.59375,405.84375 L 493,402.90625 L 497.3125,401.53125 L 498.46875,397.25 L 497.90625,394.3125 L 496.90625,392.5625 L 496.125,390 L 493.21875,390.21875 L 484.03125,393.53125 L 481.09375,393.53125 L 476.03125,389.4375 L 470.9375,388.0625 L 468,388.0625 L 468,384.53125 L 463.90625,382 L 463.90625,381.875 z ",name:"Alpes Maritimes"},"fr-07":{path:"M 375.25,328.5 L 370.71875,331.1875 L 369.84375,335.03125 L 366.46875,335.65625 L 364.65625,336.15625 L 364.71875,336.25 L 363.5625,340.9375 L 360.8125,342.09375 L 359.65625,344.0625 L 360.4375,346.59375 L 361,347.96875 L 358.09375,347.96875 L 357.875,351.65625 L 354.75,351.875 L 353.1875,356.75 L 348.5,356.75 L 343.4375,360.46875 L 340.625,364.9375 L 341.09375,365.53125 L 342.46875,372.71875 L 345.78125,376.3125 L 345.21875,380.4375 L 349.375,382.9375 L 349.375,388.46875 L 351.59375,387.34375 L 356.28125,390.40625 L 358.5,391.21875 L 359.03125,387.34375 L 361.8125,386.8125 L 362.625,389.84375 L 365.40625,389.5625 L 365.9375,386.53125 L 372.28125,390.09375 L 373.3125,388 L 376,387.59375 L 376.21875,383.46875 L 375.59375,382.59375 L 374.75,382.40625 L 374.75,380.90625 L 375.375,379.40625 L 374.3125,377.71875 L 374.9375,373.90625 L 377.5,370.90625 L 377.5,366.6875 L 376.4375,361.78125 L 378.34375,361.375 L 378.78125,359.25 L 380.6875,355.625 L 381.75,352.875 L 380.0625,348.625 L 379,345.21875 L 377.5,339.28125 L 377.5,331.3125 L 376.4375,330.96875 L 375.25,328.5 z ",name:"Ardèche"},"fr-08":{path:"M 367.625,55.84375 L 365.65625,58.75 L 363.90625,60.53125 L 363.90625,62.28125 L 363.90625,64.625 L 361.5625,66.1875 L 357.28125,67.5625 L 354.9375,68.53125 L 352.1875,66.375 L 348.46875,66.375 L 347.9375,69.84375 L 349.6875,73.15625 L 347.9375,74.71875 L 347.75,77.65625 L 348.71875,79.21875 L 347.9375,81.5625 L 345,83.125 L 345,85.65625 L 341.28125,86.4375 L 340.6875,88 L 343.25,89.375 L 342.46875,92.09375 L 341.875,94.4375 L 342,99.3125 L 346.75,99.4375 L 350.90625,102.03125 L 351.6875,103.21875 L 353.875,103.8125 L 357.0625,106.1875 L 359.625,106.375 L 360.21875,105.78125 L 362.8125,105.78125 L 364,108.375 L 365.375,108.375 L 366.1875,107.1875 L 370.9375,107.375 L 371.71875,108.375 L 372.3125,108.375 L 374.3125,106.375 L 376.09375,107.96875 C 376.09375,107.96875 376.33461,107.94351 376.375,107.9375 L 376.25,107.125 L 378.59375,105.96875 L 379.75,104.78125 L 379,102.84375 L 378.78125,101.46875 L 380.9375,99.71875 L 381.71875,95.8125 L 379.375,92.875 L 380.15625,91.5 L 382.125,87.8125 L 382.6875,88.59375 L 385.625,88.59375 L 387,89.9375 L 388.75,88.78125 L 390.125,86.53125 L 388.71875,86.3125 L 387.9375,82.40625 L 386.375,81.21875 L 380.90625,80.625 L 379.9375,78.09375 L 378.15625,76.9375 L 371.90625,76.15625 L 371.53125,71.65625 L 372.3125,70.875 L 372.3125,69.125 L 369.1875,67.15625 L 369.78125,65 L 370.5625,63.0625 L 369.1875,61.875 L 371.34375,59.9375 L 371.34375,56.40625 L 370.5625,55.84375 L 367.625,55.84375 z ",name:"Ardennes"},"fr-09":{path:"M 237.21875,446.375 L 235.96875,447.25 L 235.4375,448.3125 L 237.90625,450.09375 L 238.625,451.34375 L 238.09375,452.375 L 233.84375,452.75 L 232.625,454.5 L 232.78125,455.03125 L 234.375,455.5625 L 235.28125,456.8125 L 234.21875,458.5625 L 232.96875,458.40625 L 231.03125,456.625 L 228.71875,455.9375 L 226.4375,456.09375 L 222.375,458.5625 L 222.53125,461.9375 L 223.59375,462.65625 L 222.90625,465.28125 L 218.28125,466.53125 L 216.53125,468.65625 L 216.53125,472.1875 L 217.25,473.25 L 215.59375,474.78125 L 216.65625,475.375 L 222.6875,476.53125 L 225.25,476.53125 L 228.5625,480.84375 L 236.96875,480.4375 L 240.28125,485.71875 L 243.21875,484.53125 L 251.8125,485.71875 L 252.4375,489.3125 L 258.5,487.90625 L 260.71875,485.96875 L 264.03125,485.125 L 264.84375,483.46875 L 272.03125,482.9375 L 267.625,477.6875 L 264.03125,479.625 L 257.6875,474.375 L 259.0625,472.4375 L 264.03125,472.4375 L 263.46875,467.75 L 263.46875,464.15625 L 262.65625,457.5 L 252.96875,452.8125 L 253.53125,451.15625 L 251.6875,449.09375 L 250.125,449.75 L 248,450.09375 L 244.09375,448.3125 L 243.03125,447.96875 L 244.625,449.90625 L 243.9375,451.5 L 240.5625,451.15625 L 240.40625,449.375 L 238.4375,446.71875 L 237.21875,446.375 z ",name:"Ariège"},"fr-10":{path:"M 349.3125,138.6875 L 345.34375,140.875 L 341.96875,143.25 L 338.625,143.25 L 333.0625,147.03125 L 328.3125,147.8125 L 324.9375,144.25 L 324.09375,144.4375 L 324.09375,145.03125 L 321.375,146.1875 L 321.1875,148.53125 L 319.8125,150.3125 L 319.03125,154.21875 L 318.59375,157.5 L 319.8125,158.5 L 322.15625,158.5 L 327.21875,163.78125 L 326.625,169.0625 L 330.15625,171.78125 L 332.125,170.40625 L 335.25,174.125 L 335.625,177.65625 L 337.78125,180.5625 L 338.75,182.71875 L 346.5625,183.125 L 350.46875,181.15625 L 351.625,183.3125 L 353,183.5 L 354,181.34375 L 360.4375,181.15625 L 362.96875,179.78125 L 363.375,177.25 L 369.03125,177.25 L 369.8125,177.6875 L 369.15625,175.1875 L 367.5625,174.1875 L 369.75,172.21875 L 373.125,172 L 374.3125,170.21875 L 374.09375,163.09375 L 373.3125,158.9375 L 369.9375,157.75 L 366.375,152.78125 L 366.5625,149.8125 L 367.59375,147.65625 L 365.78125,147.03125 L 360.21875,148.21875 L 356.25,148.21875 L 352.6875,142.875 L 352.28125,138.90625 L 349.3125,138.6875 z ",name:"Aube"},"fr-11":{path:"M 274.25,438.46875 L 273.96875,442.0625 L 270.375,440.9375 L 266.5,440.9375 L 266.78125,439.5625 L 264.84375,439.84375 L 260.71875,441.21875 L 259.34375,438.71875 L 256.5625,441.21875 L 257.40625,443.15625 L 254.34375,444.53125 L 253.8125,447.5625 L 251.3125,448.6875 L 253.53125,451.15625 L 252.96875,452.8125 L 262.65625,457.5 L 263.46875,464.15625 L 263.46875,467.75 L 264.03125,472.4375 L 259.0625,472.4375 L 257.6875,474.375 L 264.03125,479.625 L 267.625,477.6875 L 272.03125,482.9375 L 271.375,483 L 272.21875,483.5 L 280.15625,479.625 L 278.21875,476.78125 L 278.0625,473.4375 L 296.59375,473.4375 L 296.25,470.9375 L 300.5,468.65625 L 305.4375,472.53125 L 308,473.71875 L 307.84375,468.125 L 308.0625,461.6875 L 305.71875,461.875 L 303.75,458.96875 L 305.3125,456.40625 L 308.625,459.53125 L 311.5625,457.1875 L 313.53125,455.25 L 313.78125,453.1875 L 311.28125,453.09375 L 310.40625,450.28125 L 307.9375,450.09375 L 305.625,446.71875 L 303.84375,446.90625 L 301.75,445.65625 L 301.375,442.65625 L 300.3125,443.1875 L 300.84375,445.3125 L 298.375,445.3125 L 298.1875,448.84375 L 294.5,450.09375 L 292.71875,446.375 L 290.25,447.96875 L 288.125,446.375 L 287.0625,443.90625 L 288.84375,441.78125 L 288,439.5 L 287.78125,439.5625 L 281.96875,439.5625 L 275.90625,438.46875 L 274.25,438.46875 z ",name:"Aude"},"fr-12":{path:"M 294.6875,353.375 L 289.15625,358.09375 L 289.15625,362.78125 L 287.78125,362.78125 L 287.21875,367.1875 L 285.84375,367.75 L 284.75,370.21875 L 278.65625,370.21875 L 278.125,369.40625 L 275.34375,369.40625 L 273.6875,372.15625 L 273.09375,372.09375 L 272.75,373.1875 L 271.5,374.59375 L 267.96875,374.59375 L 267.25,375.5 L 265.5,375.3125 L 262.3125,378.84375 L 261.25,378.5 L 258.96875,380.4375 L 259.65625,383.96875 L 261.4375,386.625 L 260.0625,388.0625 L 260.375,392.09375 L 263.1875,392.28125 L 261.59375,395.46875 L 262.84375,398.65625 L 264.4375,397.75 L 265.15625,399.34375 L 267.4375,397.0625 L 270.8125,396.875 L 274.15625,399.34375 L 280,400.40625 L 282.125,404.125 L 285.125,405.53125 L 286.71875,409.59375 L 286.53125,411.1875 L 288.46875,414.75 L 288.46875,416.6875 L 292,421.28125 L 295.375,423.03125 L 297.5,422.5 L 298.5625,421.09375 L 300.15625,421.46875 L 303.8125,423.8125 L 303.84375,423.8125 L 305.46875,423.8125 L 308.78125,423.8125 L 308.5,418.03125 L 308.5,416.09375 L 310.15625,416.09375 L 313.1875,417.75 L 316.21875,417.75 L 315.6875,414.4375 L 317.34375,413.03125 L 320.65625,412.5 L 320.65625,409.71875 L 324.25,408.0625 L 323.40625,404.21875 L 320.375,404.21875 L 317.625,403.65625 L 317.0625,401.4375 L 319.28125,400.90625 L 319.28125,398.125 L 321.46875,396.1875 L 319.8125,395.375 L 315.125,396.1875 L 315.40625,394 L 312.09375,392.59375 L 311.25,385.96875 L 311.25,381.28125 L 308.5,379.34375 L 308.78125,375.46875 L 302.96875,368.3125 L 302.40625,362.78125 L 300.5,362.78125 L 299.65625,357.25 L 295.78125,357.8125 L 295.25,354.21875 L 294.6875,353.375 z ",name:"Aveyron"},"fr-13":{path:"M 379.71875,409.90625 L 374.25,413.03125 L 372.84375,423.53125 L 367.0625,422.71875 L 365.40625,427.125 L 366.78125,429.0625 L 360.4375,432.9375 L 358.6875,437 L 364.875,437.28125 L 373.09375,437.875 L 374.65625,439.4375 L 371.71875,439.4375 L 369.78125,442.75 L 378.15625,444.5 L 384.8125,443.34375 L 381.28125,440 L 383.625,438.0625 L 387.34375,439.625 L 389.09375,443.34375 L 400.25,443.53125 L 403.15625,442.34375 L 403.75,444.125 L 400.625,446.84375 L 404.9375,447.03125 L 404.15625,449 L 402.96875,450.375 L 412.53125,450.375 L 417.21875,451.9375 L 417.6875,452.5625 L 417.875,448.6875 L 419.28125,447.09375 L 421.0625,446.03125 L 420.875,444.96875 L 419.46875,443.5625 L 418.0625,443.5625 L 417.15625,442.5 L 418.75,441.0625 L 418.75,440.53125 L 417,439.65625 L 417,438.25 L 420.875,438.4375 L 421.78125,437.71875 L 418.40625,434.53125 L 418.59375,430.8125 L 416.46875,429.0625 L 418.21875,425.53125 L 422.46875,422.6875 L 419.28125,420.5625 L 417,422.34375 L 411.6875,423.5625 L 407.4375,423.03125 L 399.84375,419.875 L 395.25,420.03125 L 391.375,418.28125 L 389.9375,416.3125 L 386.9375,412.96875 L 379.875,409.96875 L 379.71875,409.90625 z ",name:"Bouches du Rhône"},"fr-14":{path:"M 202.65625,97.78125 L 198.09375,98.59375 L 190.65625,102.90625 L 182.28125,106.21875 L 175.625,102.5 L 159.625,100.15625 L 155.90625,98.21875 L 150.125,99.6875 L 150.46875,101.84375 L 149.34375,102.96875 L 149.5,104.5625 L 153.21875,108.28125 L 155.46875,109.5625 L 157.09375,107.46875 L 158.375,109.09375 L 156.75,111.1875 L 158.21875,113.59375 L 157.5625,114.40625 L 158.6875,116.6875 L 158.0625,119.25 L 156.4375,121.84375 L 153.84375,123.4375 L 152.40625,122.3125 L 150.96875,123.59375 L 152.5625,125.0625 L 151.28125,127.46875 L 148.21875,128.59375 L 151.9375,133.28125 L 155.625,133.59375 L 158.46875,135.4375 L 162.40625,134.25 L 165.3125,130.875 L 169.34375,132 L 172.875,129.5625 L 175,128.78125 L 177.25,131.03125 L 180.96875,130.375 L 184.1875,132.15625 L 188.21875,130.875 L 191.90625,128.125 L 194.34375,125.375 L 195.96875,125.0625 L 196.4375,127.15625 L 197.71875,126.84375 L 197.875,125.375 L 201.59375,124.75 L 202.875,125.53125 L 206.84375,124.65625 L 207.5,122.75 L 207.3125,121 L 205.34375,120.21875 L 205.15625,118.84375 L 206.90625,117.6875 L 207.125,115.71875 L 205.9375,111.03125 L 203.59375,107.71875 L 205.5625,106.5625 L 205.5625,105.78125 L 203.59375,105.1875 L 202.65625,97.78125 z ",name:"Calvados"},"fr-15":{path:"M 285.84375,323.71875 L 285.25,325.875 L 286.21875,328.21875 L 285.03125,329.59375 L 283.09375,329.59375 L 281.125,327.4375 L 279.375,326.46875 L 279.1875,331.9375 L 275.65625,334.09375 L 273.125,337.59375 L 273.71875,341.125 L 272.9375,342.6875 L 271.9375,345.8125 L 270.375,345.8125 L 268.8125,347.75 L 270,348.9375 L 270.78125,350.875 L 268.25,352.65625 L 269.28125,359.1875 L 272.59375,361.65625 L 270.09375,367.46875 L 272.59375,368.5625 L 271.5,371.875 L 273.6875,372.15625 L 275.34375,369.40625 L 278.125,369.40625 L 278.65625,370.21875 L 284.75,370.21875 L 285.84375,367.75 L 287.21875,367.1875 L 287.78125,362.78125 L 289.15625,362.78125 L 289.15625,358.09375 L 294.6875,353.375 L 295.25,354.21875 L 295.78125,357.8125 L 299.65625,357.25 L 300.5,362.78125 L 302.40625,362.78125 L 302.96875,368.3125 L 304.6875,370.4375 L 307.5,363.96875 L 310.25,355.375 L 313.75,357.71875 L 315.3125,354.21875 L 320.3125,352.40625 L 320.3125,350.75 L 319.25,349.15625 L 317.125,347.90625 L 318.1875,346.3125 L 317.28125,345.4375 L 318.34375,345.09375 L 319.59375,344.03125 L 317.46875,343.84375 L 316.40625,342.4375 L 316.0625,338.71875 L 314.8125,337.46875 L 313.9375,334.3125 L 309.5,334.3125 L 308.625,331.8125 L 307.21875,331.65625 L 306.5,333.0625 L 303.6875,332.875 L 301.03125,328.8125 L 299.96875,328.65625 L 297.84375,327.59375 L 296.59375,328.8125 L 293.4375,328.8125 L 291.84375,325.46875 L 285.84375,323.71875 z ",name:"Cantal"},"fr-16":{path:"M 206.28125,284.875 L 204.59375,286.15625 L 204.8125,288.9375 L 203.75,289.78125 L 200.75,288.0625 L 197.78125,289.125 L 194.375,289.34375 L 191.8125,286.21875 L 191,286.375 L 187.59375,288.0625 L 185.03125,288.71875 L 185.03125,290.1875 L 183.5625,291.90625 L 183.96875,292.96875 L 182.0625,294.03125 L 180.375,300.1875 L 179.9375,304.21875 L 178.46875,304.84375 L 176.34375,304.65625 L 175.90625,303.59375 L 173.5625,303.59375 L 172.3125,304.65625 L 169.53125,304.65625 L 167.1875,305.90625 L 168.90625,306.5625 L 169.125,311.03125 L 169.96875,311.21875 L 168.46875,312.9375 L 170.1875,314 L 172.5,316.125 L 173.78125,318.25 L 175.28125,319.71875 L 174.84375,321.84375 L 174,322.6875 L 175.28125,323.96875 L 175.28125,325.46875 L 172.71875,327.59375 L 173.78125,328.4375 L 175.28125,328.875 L 175.28125,329.28125 L 173.15625,330.125 L 173.34375,331.1875 L 174.625,331.84375 L 178.65625,331.1875 L 180.375,333.09375 L 181.65625,334.8125 L 185.8125,337.625 L 186.40625,336.625 L 190.3125,337.03125 L 192.25,335.25 L 195.78125,331.75 L 195.96875,324.90625 L 205.15625,318.65625 L 205.34375,313.96875 L 208.09375,313.59375 L 209.84375,310.46875 L 210.9375,310.5 L 211.59375,307.53125 L 213.15625,307.34375 L 214.125,304.59375 L 216.09375,304 L 218.4375,302.4375 L 218.0625,297.5625 L 219.8125,296.96875 L 223.3125,296.1875 L 223.125,294.4375 L 222.53125,291.71875 L 219.8125,291.5 L 218.25,289.75 L 219.21875,288 L 219.28125,286.40625 L 217.53125,285.53125 L 214.15625,285.53125 L 212.65625,287.21875 L 209.03125,288.71875 L 207.78125,287.4375 L 206.28125,284.875 z ",name:"Charente"},"fr-17":{path:"M 149.3125,270.625 L 146.5625,270.8125 L 140.59375,274.4375 L 142.03125,275.75 L 138.90625,278.28125 L 138.53125,280.25 L 135.59375,280.625 L 134.03125,278.875 L 130.125,278.5 L 129.71875,276.53125 L 127.375,274.96875 L 124.0625,276.15625 L 126.21875,279.28125 L 128.9375,279.28125 L 131.6875,281.03125 L 133.84375,282.78125 L 137.9375,282.59375 L 138.71875,284.34375 L 141.4375,284.9375 L 142.4375,287.65625 L 144.1875,288.4375 L 144,290.59375 L 141.65625,290.21875 L 140.875,291.375 L 142.625,293.90625 L 141.65625,298.21875 L 139.3125,298.03125 L 139.5,300.75 L 140.09375,301.71875 L 137.34375,301.71875 L 136.96875,300.15625 L 138.71875,297.8125 L 138.125,296.46875 L 137.15625,295.6875 L 136.75,291 L 133.4375,290.59375 L 130.71875,287.28125 L 130.3125,294.125 L 134.8125,297.4375 L 135.1875,301.15625 L 135.96875,305.4375 L 136.375,309.75 L 138.71875,309.53125 L 142.8125,312.875 L 145.5625,314.4375 L 145.75,316.375 L 147.90625,316.78125 L 154.15625,323.03125 L 155.625,329.78125 L 161.40625,329.78125 L 162.375,328.8125 L 162.5625,331.75 L 167.65625,332.34375 L 168.4375,338.59375 L 171.1875,338.78125 L 175.65625,343.28125 L 178,343.65625 L 180.75,342.28125 L 182.6875,343.65625 L 184.25,340.34375 L 185.8125,337.625 L 181.65625,334.8125 L 180.375,333.09375 L 178.65625,331.1875 L 174.625,331.84375 L 173.34375,331.1875 L 173.15625,330.125 L 175.28125,329.28125 L 175.28125,328.875 L 173.78125,328.4375 L 172.71875,327.59375 L 175.28125,325.46875 L 175.28125,323.96875 L 174,322.6875 L 174.84375,321.84375 L 175.28125,319.71875 L 173.78125,318.25 L 172.5,316.125 L 170.1875,314 L 168.46875,312.9375 L 169.96875,311.21875 L 169.125,311.03125 L 168.90625,306.5625 L 167.1875,305.90625 L 169.53125,304.65625 L 172.3125,304.65625 L 173.5625,303.59375 L 175.90625,303.59375 L 176.34375,304.65625 L 178.46875,304.84375 L 179.9375,304.21875 L 180.375,300.1875 L 182.0625,294.03125 L 182.125,294 L 180.59375,292.53125 L 180.15625,290.40625 L 177.40625,289.125 L 173.78125,286.59375 L 169.3125,287 L 166.5625,283.40625 L 162.53125,283.1875 L 159.34375,280.84375 L 159.34375,279.5625 L 157.21875,277.25 L 157.125,274.375 L 154.1875,272.1875 L 150.46875,273.75 L 149.3125,270.625 z ",name:"Charente Maritime"},"fr-18":{path:"M 275.53125,200.84375 L 272.6875,202.25 L 270.15625,204.34375 L 270.28125,205.1875 L 272.8125,205.875 L 273.8125,208 L 275.34375,208.5625 L 274.78125,209.8125 L 274.78125,211.90625 L 272.40625,212.90625 L 270.5625,216.25 L 270.4375,218.09375 L 271.125,218.9375 L 271.40625,219.90625 L 268.90625,221.3125 L 264.96875,221.71875 L 264,220.625 L 262.875,220.75 L 261.75,222 L 261.875,224.53125 L 259.375,224.6875 L 259.21875,226.90625 L 256.96875,228.75 L 257.25,229.59375 L 258.65625,230.71875 L 261.46875,231.125 L 263.5625,230.28125 L 266.21875,230.15625 L 267.5,231.125 L 267.0625,233.78125 L 269.3125,236.75 L 269.3125,238 L 268.34375,239.6875 L 268.34375,240.375 L 269.46875,241.65625 L 271.28125,241.65625 L 271.40625,242.46875 L 269.1875,244.3125 L 269.3125,245.5625 L 267.90625,246.28125 L 268.46875,247.25 L 270.28125,248.78125 L 270.28125,249.90625 L 268.34375,251.03125 L 268.34375,252.71875 L 271,254.125 L 271.5625,256.09375 L 273.25,257.625 L 273.09375,258.1875 L 272.40625,259.03125 L 272.25,261.5625 L 271.84375,262.40625 L 272.96875,264.625 L 273.375,266.3125 L 271.40625,268.28125 L 271.3125,269.84375 L 275.90625,269.28125 L 276.84375,267.28125 L 279.375,264.375 L 284.25,263.375 L 286.8125,264.15625 L 289.53125,262.03125 L 289.34375,260.46875 L 288.375,259.6875 L 288.375,256.5625 L 293.625,251.28125 L 295.59375,253.4375 L 297.34375,251.65625 L 298.90625,251.46875 L 301.625,247.96875 L 306.125,248.34375 L 306.1875,249.40625 L 307.6875,244.625 L 306.71875,242.875 L 306.90625,240.34375 L 307.5,235.25 L 305.34375,233.125 L 305.75,228.4375 L 303.78125,224.3125 L 303.59375,221.59375 L 300.0625,218.84375 L 299.5,216.5 L 301.25,213.96875 L 301.25,210.25 L 299.21875,207.875 L 297.21875,208.6875 L 296.25,208.28125 L 294.84375,206.4375 L 294,206.3125 L 293.4375,206.59375 L 293.28125,209.40625 L 292.03125,209.53125 L 291.0625,208.6875 L 288.8125,205.59375 L 287.96875,204.5 L 284.75,204.34375 L 283.1875,202.375 L 281.9375,202.375 L 281.375,203.09375 L 279.28125,203.375 L 277.59375,201.8125 L 275.625,200.96875 L 275.53125,200.84375 z ",name:"Cher"},"fr-19":{path:"M 265.75,307.625 L 264.90625,309.75 L 261.71875,310.375 L 260.46875,312.5 L 258.96875,312.5 L 256.84375,311.875 L 255.34375,314.40625 L 253.03125,314.625 L 251.53125,317.375 L 249.625,317.375 L 248.125,318.875 L 244.3125,318.4375 L 243.03125,320.5625 L 241.5625,320.375 L 239,323.5625 L 236.65625,322.6875 L 235.5625,324.90625 L 236.40625,327.0625 L 238.5625,328.8125 L 234.65625,332.34375 L 234.65625,335.0625 L 236.21875,335.84375 L 234.65625,337.8125 L 236.8125,339.5625 L 235.25,341.5 L 237,342.6875 L 241.28125,342.5 L 241.09375,346.78125 L 242.71875,349.34375 L 243.3125,349.25 L 247.46875,347.3125 L 252.4375,349.53125 L 256.28125,355.03125 L 258.5,354.75 L 261.8125,351.4375 L 262.90625,353.375 L 265.125,351.1875 L 268.15625,352 L 268.25,352.65625 L 270.78125,350.875 L 270,348.9375 L 268.8125,347.75 L 270.375,345.8125 L 271.9375,345.8125 L 272.9375,342.6875 L 273.71875,341.125 L 273.125,337.59375 L 275.65625,334.09375 L 279.1875,331.9375 L 279.375,326.46875 L 281.125,327.4375 L 283.09375,329.59375 L 285.03125,329.59375 L 286.21875,328.21875 L 285.25,325.875 L 286.21875,322.375 L 285.625,319.0625 L 284.4375,317.6875 L 284.4375,314.9375 L 286.21875,312.03125 L 285.8125,309.28125 L 285.375,308.84375 L 283.40625,310.375 L 279.5625,310.375 L 278.3125,312.28125 L 275.96875,312.28125 L 274.0625,310.375 L 273.1875,309.09375 L 268.3125,309.09375 L 267.25,307.625 L 265.75,307.625 z ",name:"Corrèze"},"fr-2a":{path:"M 445.33847,488.9562 L 445.33847,491.11245 L 447.30722,492.48745 L 450.61972,494.42495 L 450.83847,495.98745 L 448.86972,496.5812 L 445.74472,497.17495 L 445.74472,498.5187 L 446.90097,499.7062 L 447.11972,503.61245 L 451.40097,504.98745 L 452.96347,505.36245 L 454.33847,507.5187 L 453.36972,508.8937 L 451.80722,509.4562 L 450.61972,511.61245 L 449.46347,512.98745 L 450.02597,516.48745 L 452.96347,516.29995 L 453.74472,516.8937 L 456.49472,515.5187 L 457.27597,516.29995 L 455.90097,519.23745 L 457.27597,520.61245 L 454.93222,522.36245 L 453.36972,525.86245 L 457.65097,526.86245 L 463.71347,527.42495 L 461.18222,530.36245 C 461.18222,530.36245 459.99289,529.90364 459.46347,530.1437 C 459.44782,530.15141 459.41536,530.16589 459.40097,530.17495 C 459.39647,530.17828 459.37406,530.20271 459.36972,530.2062 C 459.36553,530.20986 459.34249,530.23363 459.33847,530.23745 C 459.33478,530.24161 459.31073,530.26437 459.30722,530.2687 C 459.30054,530.27771 459.28192,530.29022 459.27597,530.29995 C 459.27319,530.30499 459.27856,530.32597 459.27597,530.3312 C 459.27118,530.34203 459.24871,530.38211 459.24472,530.3937 C 459.24293,530.39969 459.2463,530.41876 459.24472,530.42495 C 459.24199,530.43772 459.21532,530.47387 459.21347,530.48745 C 459.21207,530.50144 459.21394,530.53512 459.21347,530.54995 C 459.21348,531.52651 457.86972,533.8937 457.86972,533.8937 L 459.80722,536.0187 L 463.33847,538.17495 L 469.96347,539.92495 L 471.90097,540.7062 L 473.68222,541.48745 L 472.49472,543.6437 L 475.61972,543.4562 L 476.21347,544.8312 L 479.33847,544.8312 L 480.11972,541.11245 L 478.15097,540.7062 L 480.90097,537.79995 L 479.93222,536.79995 L 480.11972,535.04995 L 483.65097,533.11245 L 483.83847,530.9562 L 481.49472,530.7687 L 479.93222,532.11245 L 479.93222,530.17495 L 483.05722,529.98745 L 484.02597,527.6437 L 484.80722,520.79995 L 484.21347,517.86245 L 484.15097,515.04995 L 480.74472,517.29995 L 476.68222,517.4562 L 476.33847,514.6437 L 476.86972,513.92495 L 475.61972,513.04995 L 475.27597,508.2687 L 474.74472,507.3937 L 472.61972,507.3937 L 471.55722,506.5187 L 471.55722,503.1437 L 470.15097,502.2687 L 469.08847,501.73745 L 466.96347,499.0812 L 467.11972,497.48745 L 464.49472,497.48745 L 463.58847,494.8312 L 459.86972,494.8312 L 457.93222,492.17495 L 458.46347,491.29995 L 457.24472,490.5812 L 454.40097,491.11245 L 453.33847,490.42495 L 449.46347,490.42495 L 449.08847,489.36245 L 446.90097,488.9562 L 445.33847,488.9562 z ",name:"Corse du Sud"},"fr-2b":{path:"M 477.96347,449.8937 L 475.02597,451.86245 L 475.43222,453.79995 L 476.99472,455.7687 L 475.24472,457.11245 L 476.02597,458.67495 L 474.83847,460.04995 L 474.83847,461.79995 L 476.80722,463.5812 L 476.80722,466.29995 L 475.61972,468.8312 L 474.27597,469.42495 L 472.71347,467.2687 L 469.96347,467.48745 L 469.36972,467.0812 L 467.02597,467.0812 L 464.90097,469.04995 L 464.08847,472.36245 L 459.02597,473.3312 L 455.11972,476.6437 L 454.33847,478.79995 L 452.40097,478.61245 L 451.40097,477.42495 L 450.83847,480.7687 L 449.46347,481.3312 L 449.05722,484.4562 L 449.65097,485.8312 L 447.49472,487.3937 L 446.90097,488.9562 L 449.08847,489.36245 L 449.46347,490.42495 L 453.33847,490.42495 L 454.40097,491.11245 L 457.24472,490.5812 L 458.46347,491.29995 L 457.93222,492.17495 L 459.86972,494.8312 L 463.58847,494.8312 L 464.49472,497.48745 L 467.11972,497.48745 L 466.96347,499.0812 L 469.08847,501.73745 L 470.15097,502.2687 L 471.55722,503.1437 L 471.55722,506.5187 L 472.61972,507.3937 L 474.74472,507.3937 L 475.27597,508.2687 L 475.61972,513.04995 L 476.86972,513.92495 L 476.33847,514.6437 L 476.68222,517.4562 L 480.74472,517.29995 L 484.15097,515.04995 L 484.02597,509.2687 L 488.71347,502.6437 L 488.71347,491.7062 L 486.77597,487.98745 L 486.18222,476.2687 L 484.80722,474.11245 L 482.27597,472.17495 L 481.86972,464.92495 L 483.05722,461.61245 L 481.49472,456.3312 L 480.52597,452.04995 L 479.71347,450.86245 L 477.96347,449.8937 z ",
name:"Haute-Corse"},"fr-21":{path:"M 363.375,177.25 L 362.96875,179.78125 L 360.4375,181.15625 L 354,181.34375 L 354.28125,182.75 L 354.4375,184.15625 L 352.46875,185.5625 L 352.46875,187.9375 L 352.875,188.375 L 354.4375,188.375 L 355.40625,190.03125 L 354.84375,192.84375 L 352.59375,194.53125 L 352.59375,196.21875 L 353.3125,196.78125 L 353.15625,197.1875 L 351.75,197.75 L 351.34375,199.84375 L 349.09375,204.625 L 347.5625,206.875 L 347.5625,209.125 L 348.125,210.09375 L 347.28125,211.21875 L 345.3125,212.1875 L 345.4375,214.15625 L 347.28125,215.28125 L 347.96875,216.8125 L 347.6875,218.9375 L 347.28125,220.46875 L 348.25,222.15625 L 351.0625,222.71875 L 352.3125,224.6875 L 352.3125,225.53125 L 351.46875,225.8125 L 351.46875,227.84375 L 351.625,227.90625 L 355.40625,231.8125 L 359.34375,231.6875 L 362.84375,234.34375 L 365.375,236.1875 L 365.5,238.5625 L 368.15625,239.125 L 370.40625,240.9375 L 376.3125,238.84375 L 380.375,237.5625 L 382.1875,237.28125 L 382.75,236.46875 L 384.71875,236.59375 L 386.25,237.5625 L 388.5,237 L 390.75,235.46875 L 392.4375,235.65625 L 392.46875,235.46875 L 393.8125,234.6875 L 393.625,233.6875 L 393.25,232.53125 L 394.21875,230.96875 L 397.53125,229.40625 L 397.53125,227.84375 L 398.71875,226.28125 L 399.875,224.71875 L 399.5,223.34375 L 400.0625,221.1875 L 400.46875,218.0625 L 401.25,218.0625 L 401.0625,216.90625 L 400.28125,216.125 L 400.0625,212.21875 L 398.3125,212.03125 L 397.9375,208.90625 L 395.78125,207.90625 L 396.5625,206.9375 L 397.75,206.5625 L 400.28125,203.625 L 400.0625,202.0625 L 398.5,198.9375 L 396.1875,198.53125 L 395.375,200.5 L 391.09375,201.46875 L 390.6875,200.5 L 387.5625,196.59375 L 385.8125,197.5625 L 383.46875,197.375 L 382.6875,195.8125 L 379.5625,196 L 379.375,192.6875 L 377.625,191.5 L 380.15625,188.78125 L 375.65625,182.71875 L 372.15625,179 L 369.03125,177.25 L 363.375,177.25 z ",name:"Côte d'Or"},"fr-22":{path:"M 69.78125,123.21875 L 68,124.59375 L 63.53125,125.15625 L 62.53125,126.53125 L 59.40625,124.1875 L 55.3125,126.9375 L 56.875,129.0625 L 54.15625,132.78125 L 54.03125,132.71875 L 52.90625,137.96875 L 55.3125,138.125 L 55.15625,140.21875 L 56.9375,141.34375 L 55.3125,142.96875 L 54.1875,143.78125 L 54.34375,145.6875 L 56.78125,146.5 L 54.5,147.15625 L 54.5,149.5625 L 55.96875,151.5 L 56.28125,157.15625 L 55.3125,158.125 L 56.125,161.03125 L 59.1875,161.84375 L 59.5,163.4375 L 61.4375,163.59375 L 63.0625,162.46875 L 64.03125,163.4375 L 67.75,165.0625 L 70.8125,163.4375 L 71.59375,161.84375 L 74.1875,161.65625 L 77.09375,164.25 L 79.84375,163.59375 L 82.25,166.03125 L 83.375,166.03125 L 84.5,167.46875 L 86.78125,167.46875 L 87.5625,166.34375 L 88.53125,168.4375 L 90.96875,169.40625 L 94.03125,167.46875 L 94.03125,165.375 L 96.28125,164.5625 L 97.71875,164.5625 L 99.5,167.8125 L 103.375,168.125 L 105.3125,165.6875 L 107.40625,161.1875 L 110.15625,160.21875 L 111.59375,158.125 L 113.0625,159.5625 L 116.125,158.9375 L 117.09375,150.0625 L 118.0625,146.5 L 117.09375,144.5625 L 115.46875,143.9375 L 114.375,138.03125 L 113.125,139.4375 L 109.40625,139.03125 L 109.03125,141.1875 L 106.6875,141.375 L 106.5,138.65625 L 104.53125,138.0625 L 103.15625,139.625 L 103.15625,135.71875 L 100.8125,137.46875 L 97.3125,136.875 L 96.125,139.21875 L 88.90625,143.125 L 88.90625,145.09375 L 87.34375,145.09375 L 87.34375,141.5625 L 83.25,139.625 L 83.625,136.09375 L 79.9375,133.375 L 79.9375,130.0625 L 77.1875,129.46875 L 77.375,126.34375 L 75.25,126.15625 L 75.4375,124 L 71.53125,124 L 70.9375,125.9375 L 69.78125,123.21875 z ",name:"Côtes d'Armor"},"fr-23":{path:"M 256.125,267.875 L 254.96875,271 L 251.4375,270.8125 L 250.65625,270.40625 L 248.3125,270.625 L 246.5625,269.4375 L 243.1875,273.3125 L 243.25,276.1875 L 240.90625,280.84375 L 241.34375,283.1875 L 243.875,283.8125 L 245.59375,288.0625 L 247.28125,289.78125 L 246.65625,297.84375 L 250.25,296.78125 L 251.75,298.6875 L 249.40625,300.59375 L 249.40625,302.53125 L 251.3125,302.71875 L 254.71875,302.53125 L 255.78125,301.03125 L 256.625,301.03125 L 256.21875,303.59375 L 258.96875,304.84375 L 261.53125,306.5625 L 261.53125,307.625 L 260.03125,307.625 L 260.46875,310.15625 L 261.46875,310.78125 L 261.71875,310.375 L 264.90625,309.75 L 265.75,307.625 L 267.25,307.625 L 268.3125,309.09375 L 273.1875,309.09375 L 274.0625,310.375 L 275.96875,312.28125 L 278.3125,312.28125 L 279.5625,310.375 L 283.40625,310.375 L 285.375,308.84375 L 281.3125,304.78125 L 280.9375,303.03125 L 284.65625,300.875 L 286.8125,299.71875 L 287.375,296.96875 L 289.71875,295.21875 L 288.9375,291.5 L 287.375,289.5625 L 287,283.5 L 284.84375,278.4375 L 282.6875,277.65625 L 281.125,274.90625 L 279.75,276.65625 L 278.40625,274.90625 L 278.40625,272.5625 L 276.0625,269.25 L 269.625,270.03125 L 265.90625,269.0625 L 256.125,267.875 z ",name:"Creuse"},"fr-24":{path:"M 209.84375,310.46875 L 208.09375,313.59375 L 205.34375,313.96875 L 205.15625,318.65625 L 195.96875,324.90625 L 195.78125,331.75 L 192.25,335.25 L 190.3125,337.03125 L 186.40625,336.625 L 184.25,340.34375 L 183.6875,341.5625 L 184.71875,342.78125 L 186.65625,342.78125 L 187.71875,344.375 L 186.65625,347.21875 L 186.125,350.375 L 184.34375,351.4375 L 184.34375,352.5 L 185.0625,353.5625 L 185.0625,355.5 L 183.65625,357.28125 L 185.40625,358.15625 L 185.9375,359.59375 L 191.96875,359.40625 L 194.4375,356.40625 L 196.90625,358 L 194.96875,359.40625 L 195.125,363.28125 L 197.96875,365.25 L 198.3125,368.9375 L 201.3125,370 L 203.09375,368.40625 L 206.96875,368.40625 L 209.09375,366.65625 L 210.34375,366.84375 L 210.6875,368.25 L 214.59375,368.25 L 215.46875,367.1875 L 216.875,367.375 L 218.46875,369.125 L 218.46875,370.375 L 217.0625,371.25 L 217.59375,372.5 L 219.53125,372.65625 L 222,370.375 L 224.125,370.375 L 225.53125,371.96875 L 228.59375,373.25 L 228.78125,372.75 L 230.5625,371 L 230.75,368.0625 L 235.03125,367.6875 L 237.78125,363.78125 L 236.59375,363.375 L 236.40625,361.25 L 239.71875,360.84375 L 239.9375,358.90625 L 241.5,357.90625 L 243.25,354.78125 L 241.5,352.84375 L 241.5,350.6875 L 242.84375,349.53125 L 241.09375,346.78125 L 241.28125,342.5 L 237,342.6875 L 235.25,341.5 L 236.8125,339.5625 L 234.65625,337.8125 L 236.21875,335.84375 L 234.65625,335.0625 L 234.65625,332.34375 L 238.5625,328.8125 L 236.40625,327.0625 L 235.25,324.125 L 231.125,323.53125 L 229.75,322.5625 L 232.6875,321.1875 L 231.71875,319.84375 L 227.4375,319.25 L 226.4375,315.34375 L 220.1875,314.75 L 218.8125,316.71875 L 217.46875,317.09375 L 215.6875,314.75 L 216.5,312.59375 L 215.5,310.65625 L 209.84375,310.46875 z ",name:"Dordogne"},"fr-25":{path:"M 447.40625,199.71875 L 447.21875,199.9375 L 444.96875,199.9375 L 443.8125,201.53125 L 442.34375,202.375 L 442.34375,204.34375 L 438.6875,204.78125 L 436.71875,203.375 L 434.0625,203.78125 L 431.53125,205.75 L 429.71875,208.84375 L 427.90625,209.40625 L 427.0625,211.5 L 424.8125,211.90625 L 421.71875,214.4375 L 417.65625,214.3125 L 416.40625,215.28125 L 415.28125,215.28125 L 411.34375,218.5 L 409.5625,218.4375 L 409.53125,219.625 L 409.8125,221.71875 L 412.34375,223.40625 L 413.75,225.25 L 413.3125,227.1875 L 412.0625,230.15625 L 411.21875,232.09375 L 416.6875,233.9375 L 420.1875,233.65625 L 420.46875,236.59375 L 420.46875,240.53125 L 424.8125,241.9375 L 426.78125,242.46875 L 429.59375,245.15625 L 429.3125,247.40625 L 428.03125,249.21875 L 424.53125,250.34375 L 425.375,252.3125 L 425.78125,253.84375 L 424.25,255.375 L 424.40625,256.78125 L 426.78125,257 L 426.8125,256.8125 L 438.90625,245.46875 L 438.53125,236.09375 L 442.8125,233.96875 L 445.75,232.59375 L 448.46875,230.0625 L 448.6875,226.34375 L 451.40625,224.96875 L 457.65625,217.75 L 456.6875,215.40625 L 458.84375,214.4375 L 461.375,211.3125 L 460,209.9375 L 455.3125,210.90625 L 455.125,210.125 L 459.4375,205.15625 L 447.40625,199.71875 z ",name:"Doubs"},"fr-26":{path:"M 384.9375,329.28125 L 382.1875,331.1875 L 379.84375,332.03125 L 377.5,331.3125 L 377.5,339.28125 L 379,345.21875 L 380.0625,348.625 L 381.75,352.875 L 380.6875,355.625 L 378.78125,359.25 L 378.34375,361.375 L 376.4375,361.78125 L 377.5,366.6875 L 377.5,370.90625 L 374.9375,373.90625 L 374.3125,377.71875 L 375.375,379.40625 L 374.75,380.90625 L 374.75,382.40625 L 375.59375,382.59375 L 376.21875,383.46875 L 376,387.59375 L 378.59375,387.21875 L 379.75,388.59375 L 379.1875,392.5 L 379.96875,393.46875 L 382.875,390.53125 L 385.4375,390.34375 L 386,388.78125 L 382.6875,388.375 L 382.125,384.875 L 384.25,381.5625 L 387,381.34375 L 389.71875,383.90625 L 387,387.59375 L 387.78125,388.96875 L 391.6875,389.375 L 394.21875,387.21875 L 392.84375,390.15625 L 393.25,392.5 L 397.34375,392.875 L 402.8125,393.28125 L 403.59375,395.8125 L 406.53125,397.96875 L 409.0625,398.15625 L 410.8125,396.59375 L 411.8125,393.65625 L 413.375,395.03125 L 414.53125,396.40625 L 415.3125,389.15625 L 413.375,388.78125 L 412.1875,386.25 L 405.5625,384.46875 L 404.75,381.15625 L 407.125,379.59375 L 405.15625,378.21875 L 405.5625,376.46875 L 408.6875,376.65625 L 411.40625,378.03125 L 413.5625,375.5 L 411.40625,373.75 L 411.59375,371.40625 L 412.78125,367.6875 L 416.875,367.28125 L 420.1875,365.9375 L 420.53125,365.15625 L 417,364.75 L 415.75,363.6875 L 413.8125,363.5 L 411.90625,362 L 409.375,360.5 L 406.59375,360.5 L 405.53125,359.4375 L 405.34375,343.53125 L 404.6875,343.53125 L 403.84375,345 L 401.9375,346.28125 L 397.46875,345 L 394.0625,343.9375 L 392.59375,344.375 L 392.15625,343.3125 L 393.21875,340.34375 L 392.78125,337.34375 L 393.65625,335.21875 L 391.53125,332.25 L 388.5625,332.25 L 384.9375,329.28125 z ",name:"Drôme"},"fr-27":{path:"M 211,94.5625 L 209.3125,94.96875 L 207.0625,97.375 L 202.6875,97.9375 L 203.59375,105.1875 L 205.5625,105.78125 L 205.5625,106.5625 L 203.59375,107.71875 L 205.9375,111.03125 L 207.125,115.71875 L 206.90625,117.6875 L 205.15625,118.84375 L 205.34375,120.21875 L 207.3125,121 L 207.5,122.75 L 205.9375,127.25 L 207.5,129.21875 L 212.96875,129.40625 L 214.125,132.125 L 216.09375,134.09375 L 218.8125,135.0625 L 219.625,138 L 218.25,139.9375 L 221.09375,141.84375 L 223.90625,139.15625 L 226.625,139.15625 L 233.6875,135.46875 L 236,136.4375 L 240.90625,136.4375 L 242.0625,135.0625 L 242.0625,132.125 L 245.96875,130.1875 L 245.96875,127.0625 L 247.03125,126.1875 L 246.9375,125.3125 L 247.9375,124.3125 L 246.1875,123.9375 L 246.1875,122.375 L 245.1875,120.8125 L 245.96875,119.84375 L 251.4375,118.28125 L 252.8125,115.9375 L 254,111.625 L 255.4375,109.84375 L 255.75,107.53125 L 257.5,108.5 L 258.875,108.125 L 257.875,106.5625 L 257.3125,102.0625 L 255.5625,100.5 L 255.59375,100.375 L 252.5,100.03125 L 247.3125,97.375 L 242.8125,97.5 L 240.4375,99.59375 L 239.15625,103.25 L 234.125,103.8125 L 229.34375,105.21875 L 231.03125,106.34375 L 230.34375,108.03125 L 228.09375,108.03125 L 226.84375,105.34375 L 225.4375,105.34375 L 223.1875,103.65625 L 226.28125,102.6875 L 221.5,99.3125 L 216.75,99.59375 L 215.625,97.65625 L 212.9375,97.9375 L 211,94.5625 z ",name:"Eure"},"fr-28":{path:"M 247.15625,126.09375 L 245.96875,127.0625 L 245.96875,130.1875 L 242.0625,132.125 L 242.0625,135.0625 L 240.90625,136.4375 L 236,136.4375 L 233.6875,135.46875 L 226.625,139.15625 L 223.90625,139.15625 L 221.09375,141.84375 L 221.75,142.28125 L 221.9375,145.625 L 226.0625,149.125 L 226.4375,156.34375 L 224.5,158.6875 L 221.5625,159.28125 L 218.625,161.03125 L 219.03125,162.59375 L 220.375,164.375 L 220.375,169 L 220.78125,169.0625 L 223.5,171 L 222.5,172.25 L 224.4375,173.21875 L 227.53125,172.65625 L 229.34375,172.65625 L 229.21875,173.5 L 227.53125,174.46875 L 228.65625,175.3125 L 231.46875,175.3125 L 232.4375,177.5625 L 234.125,178.53125 L 235.375,181.34375 L 239.71875,182.46875 L 242.40625,182.1875 L 244.78125,179.9375 L 246.90625,180.53125 L 247.4375,179.375 L 247.3125,178.125 L 248.4375,177.28125 L 250.25,178.40625 L 251.375,177.5625 L 251.375,176.03125 L 252.90625,175.03125 L 254.3125,175.59375 L 255.5625,177 L 257.8125,175.75 L 260.1875,175.75 L 261.875,173.90625 L 262.875,170.28125 L 264.40625,170 L 264,166.34375 L 265.8125,164.8125 L 265.25,163.6875 L 265.46875,163.3125 L 264.9375,163.375 L 264.53125,158.125 L 264.125,157.53125 L 263.75,155 L 259.65625,154.21875 L 257.875,152.0625 L 257.3125,147.75 L 254.96875,147.375 L 254.5625,145.21875 L 251.84375,143.28125 L 250.46875,139.9375 L 251.84375,137.59375 L 250.46875,136.03125 L 250.46875,134.09375 L 251.25,131.9375 L 249.6875,130.375 L 249.09375,128.03125 L 247.15625,126.09375 z ",name:"Eure et Loir"},"fr-29":{path:"M 40.65625,129.0625 L 38.53125,131.40625 L 36.1875,130.4375 L 31.875,130.84375 L 31.09375,132.78125 L 28.5625,133.375 L 28.15625,131.21875 L 23.6875,131.8125 L 23.6875,133.1875 L 20.5625,133.375 L 19.1875,132.40625 L 17.625,133.1875 L 17.21875,135.53125 L 11.96875,135.71875 L 9.21875,139.03125 L 11.5625,140.78125 L 8.4375,143.34375 L 9.40625,145.09375 L 8.625,149.375 L 11.75,149.78125 L 12.9375,148.59375 L 13.53125,149.375 L 20.9375,148.40625 L 25.8125,144.90625 L 21.53125,149 L 21.90625,150.9375 L 25.8125,149.1875 L 25.03125,151.9375 L 29.34375,152.125 L 29.15625,153.28125 L 24.46875,153.09375 L 20.75,152.125 L 16.25,149.96875 L 13.53125,153.09375 L 17.03125,154.28125 L 16.84375,159.53125 L 17.8125,158.75 L 19.96875,155.4375 L 24.0625,157.78125 L 26.03125,158.1875 L 26.8125,161.3125 L 25.625,163.4375 L 23.09375,163.25 L 20.75,163.25 L 16.84375,163.84375 L 10.1875,164.21875 L 8.84375,166 L 10.78125,167.15625 L 12.9375,166.96875 L 14.6875,168.53125 L 17.21875,168.34375 L 21.34375,173.03125 L 22.3125,178.09375 L 20.9375,180.84375 L 25.03125,181.625 L 29.53125,181.40625 L 30.5,179.65625 L 28.75,177.3125 L 30.5,178.09375 L 32.28125,177.90625 L 35.40625,179.65625 L 37.34375,179.28125 L 37.34375,175.9375 L 38.125,179.28125 L 40.65625,183.375 L 46.125,183.75 L 46.34375,182.59375 L 47.6875,184.53125 L 51.03125,185.125 L 53.5625,185.125 L 53.71875,185.34375 L 54.65625,181.5 L 56.9375,181.5 L 58.0625,179.71875 L 59.5,179.71875 L 59.65625,176.84375 L 60.46875,175.875 L 58.875,173.75 L 57.90625,174.90625 L 55.46875,172.96875 L 50.46875,172.15625 L 49.65625,169.25 L 48.21875,165.53125 L 48.0625,164.09375 L 50.46875,162.15625 L 52.75,162.15625 L 56,160.59375 L 55.3125,158.125 L 56.28125,157.15625 L 55.96875,151.5 L 54.5,149.5625 L 54.5,147.15625 L 56.78125,146.5 L 54.34375,145.6875 L 54.1875,143.78125 L 55.3125,142.96875 L 56.9375,141.34375 L 55.15625,140.21875 L 55.3125,138.125 L 52.90625,137.96875 L 54.03125,132.71875 L 50.8125,130.84375 L 45.34375,131.03125 L 45.34375,134.9375 L 43.78125,134.9375 L 43.40625,133.1875 L 41.0625,133.5625 L 40.65625,129.0625 z ",name:"Finistère"},"fr-30":{path:"M 346.1875,381.03125 L 345.21875,382.90625 L 344,383.96875 L 341.6875,384.34375 L 344.5,387.34375 L 344.5,391.40625 L 345.75,391.75 L 344.34375,393.34375 L 344.34375,396.34375 L 342.03125,399.875 L 336.90625,399.34375 L 333.90625,396.53125 L 331.78125,397.0625 L 332.5,398.8125 L 331.625,400.0625 L 326.46875,401.125 L 320.4375,397.09375 L 319.28125,398.125 L 319.28125,400.90625 L 317.0625,401.4375 L 317.625,403.65625 L 320.375,404.21875 L 323.40625,404.21875 L 324.25,408.0625 L 320.65625,409.71875 L 320.65625,411.46875 L 323.46875,412.4375 L 323.46875,414.03125 L 324.71875,414.75 L 325.78125,413.84375 L 327.1875,413.84375 L 327.90625,415.4375 L 330.03125,415.4375 L 331.09375,411.71875 L 332.84375,411.71875 L 335.5,408.375 L 338.6875,408.71875 L 339.21875,413.3125 L 340.4375,414.75 L 342.40625,413.6875 L 345.75,415.4375 L 347,417.5625 L 352.8125,421.09375 L 354.9375,426.0625 L 354.9375,428.6875 L 351.21875,430.8125 L 348.8125,432.96875 L 351.8125,433.1875 L 351.8125,437.09375 L 356.28125,436.875 L 358.6875,437 L 360.4375,432.9375 L 366.78125,429.0625 L 365.40625,427.125 L 367.0625,422.71875 L 372.84375,423.53125 L 374.25,413.03125 L 381.96875,408.625 L 381.96875,406.125 L 376.15625,400.34375 L 376.15625,395.90625 L 372.84375,390.40625 L 365.9375,386.53125 L 365.40625,389.5625 L 362.625,389.84375 L 361.8125,386.8125 L 359.03125,387.34375 L 358.5,391.21875 L 356.28125,390.40625 L 351.59375,387.34375 L 349.375,388.46875 L 349.375,382.9375 L 346.1875,381.03125 z ",name:"Gard"},"fr-31":{path:"M 245,412.4375 L 242.15625,413.5 L 241.28125,414.90625 L 240.21875,413.6875 L 238.28125,413.5 L 237.90625,415.28125 L 236.6875,415.78125 L 238.4375,416.6875 L 237.21875,418.625 L 232.78125,419.875 L 230.84375,417.5625 L 229.09375,417.5625 L 227.65625,418.4375 L 222.53125,418.4375 L 222,418.65625 L 222.53125,420.5625 L 225.53125,423.5625 L 225.375,425.15625 L 227.65625,427.46875 L 229.09375,427.46875 L 229.78125,429.21875 L 231.5625,429.40625 L 232.09375,431 L 230.3125,431.71875 L 226.59375,433.3125 L 224.84375,437.375 L 223.4375,441.59375 L 222.53125,442.84375 L 219.71875,440.90625 L 213.15625,440.375 L 209.625,444.96875 L 207.6875,446.03125 L 206.4375,447.78125 L 205.03125,449.90625 L 205.03125,451.15625 L 202.75,452.03125 L 200.96875,455.03125 L 200.78125,456.625 L 203.96875,458.9375 L 204.5,461.21875 L 203.4375,463 L 205.5625,462.28125 L 206.625,463.1875 L 207.5,466.875 L 205.03125,468.3125 L 205.21875,470.25 L 203.96875,471.46875 L 202.21875,470.59375 L 200.25,470.59375 L 200.5,481.09375 L 208.4375,481.625 L 208.84375,472.03125 L 211.5625,472.4375 L 215.59375,474.78125 L 217.25,473.25 L 216.53125,472.1875 L 216.53125,468.65625 L 218.28125,466.53125 L 222.90625,465.28125 L 223.59375,462.65625 L 222.53125,461.9375 L 222.375,458.5625 L 226.4375,456.09375 L 228.71875,455.9375 L 231.03125,456.625 L 232.96875,458.40625 L 234.21875,458.5625 L 235.28125,456.8125 L 234.375,455.5625 L 232.78125,455.03125 L 232.625,454.5 L 233.84375,452.75 L 238.09375,452.375 L 238.625,451.34375 L 237.90625,450.09375 L 235.4375,448.3125 L 235.96875,447.25 L 237.21875,446.375 L 238.4375,446.71875 L 240.40625,449.375 L 240.5625,451.15625 L 243.9375,451.5 L 244.625,449.90625 L 243.03125,447.96875 L 244.09375,448.3125 L 248,450.09375 L 250.125,449.75 L 251.6875,449.09375 L 251.3125,448.6875 L 253.8125,447.5625 L 254.34375,444.53125 L 257.40625,443.15625 L 256.5625,441.21875 L 259.34375,438.71875 L 260.71875,441.21875 L 264.84375,439.84375 L 265.625,439.71875 L 265.6875,438.4375 L 265.6875,435.9375 L 263.5625,436.3125 L 260.90625,435.59375 L 258.59375,432.78125 L 257.71875,431.53125 L 253.125,429.59375 L 252.0625,428 L 253.46875,427.46875 L 253.46875,425.53125 L 252.0625,423.9375 L 250.28125,421.09375 L 250.125,418.625 L 249.59375,418.28125 L 247.46875,415.78125 L 246.59375,413.15625 L 245,412.4375 z ",name:"Haute Garonne"},"fr-32":{path:"M 207.875,401.875 L 202.03125,402.4375 L 200.46875,405.1875 L 196.9375,405.5625 L 193.625,406.15625 L 192.25,404.21875 L 189.125,407.34375 L 186.8125,405.375 L 185.4375,408.3125 L 185.625,410.84375 L 183.46875,411.4375 L 182.5,410.0625 L 181.53125,407.125 L 178.78125,409.46875 L 176.84375,408.6875 L 174.6875,409.09375 L 172.75,411.4375 L 175.0625,415.34375 L 173.5,416.90625 L 174.09375,420.21875 L 172.15625,422.75 L 170.78125,426.46875 L 172.34375,429.21875 L 177.28125,429.5625 L 179.21875,428.53125 L 182.21875,428.53125 L 182.0625,431.875 L 184.34375,433.125 L 186.65625,433.46875 L 187.71875,436.3125 L 188.25,436.84375 L 187.90625,438.59375 L 187.1875,439.3125 L 189.3125,440.71875 L 189.46875,442.3125 L 192.125,442.3125 L 192.84375,441.59375 L 195.125,441.59375 L 195.84375,443.1875 L 198.3125,443.1875 L 199.03125,444.625 L 203.8125,444.625 L 207.375,446.46875 L 207.6875,446.03125 L 209.625,444.96875 L 213.15625,440.375 L 219.71875,440.90625 L 222.53125,442.84375 L 223.4375,441.59375 L 224.84375,437.375 L 226.59375,433.3125 L 230.3125,431.71875 L 232.09375,431 L 231.5625,429.40625 L 229.78125,429.21875 L 229.09375,427.46875 L 227.65625,427.46875 L 225.375,425.15625 L 225.53125,423.5625 L 222.53125,420.5625 L 222,418.65625 L 220.0625,419.5 L 219.53125,418.4375 L 220.78125,416.5 L 219.34375,415.09375 L 219.34375,412.625 L 218.125,411.375 L 214.21875,411.1875 L 214.21875,408.90625 L 216.34375,407.3125 L 216.34375,405.53125 L 218.65625,404.46875 L 217.40625,403.78125 L 216,404.46875 L 213.15625,404.46875 L 212.28125,403.65625 L 211.8125,403.8125 L 210.8125,404.78125 L 207.875,401.875 z ",name:"Gers"},"fr-33":{path:"M 141.25,315.21875 L 138.125,319.90625 L 137.15625,336.3125 L 134.625,352.90625 L 132.84375,365.78125 L 132.65625,369.125 L 134.03125,364.625 L 136.75,361.09375 L 140.65625,364.625 L 141.0625,365.78125 L 142.21875,367.34375 L 137.34375,367.5625 L 136.5625,366.375 L 134.625,367.15625 L 134.21875,370.09375 L 132.0625,373.03125 L 132.0625,377.5 L 132.03125,377.6875 L 133.625,377.625 L 139.8125,374.4375 L 143.15625,375.65625 L 143,377.96875 L 141.5625,379.71875 L 143.15625,380.78125 L 146.53125,379.375 L 148.8125,380.96875 L 150.25,380.78125 L 152.34375,379.03125 L 155.90625,378.5 L 157.125,379.5625 L 158.1875,380.4375 L 158.1875,381.5 L 157.3125,382.5625 L 160.5,383.4375 L 162.4375,384.6875 L 162.625,386.28125 L 164.375,386.4375 L 166.84375,389.09375 L 167.5625,393.53125 L 171.09375,394.75 L 174.46875,394.59375 L 174.46875,393.53125 L 174.09375,390 L 175.15625,390.34375 L 177.15625,392.78125 L 180.28125,392.28125 L 181.71875,390.875 L 181.53125,388.9375 L 180.28125,387.875 L 180.65625,385.90625 L 182.59375,385.90625 L 184.53125,384.6875 L 183.65625,382.90625 L 183.125,380.25 L 184.53125,377.78125 L 187.53125,373.1875 L 189.3125,371.0625 L 190.90625,370.53125 L 191.25,368.78125 L 189.125,368.59375 L 188.25,366.65625 L 188.9375,364.71875 L 191.4375,364.1875 L 193.1875,363.65625 L 195.25,363.375 L 195.125,363.28125 L 194.96875,359.40625 L 196.90625,358 L 194.4375,356.40625 L 191.96875,359.40625 L 185.9375,359.59375 L 185.40625,358.15625 L 183.65625,357.28125 L 185.0625,355.5 L 185.0625,353.5625 L 184.34375,352.5 L 184.34375,351.4375 L 186.125,350.375 L 186.65625,347.21875 L 187.71875,344.375 L 186.65625,342.78125 L 184.71875,342.78125 L 183.6875,341.5625 L 182.6875,343.65625 L 180.75,342.28125 L 178,343.65625 L 175.65625,343.28125 L 171.1875,338.78125 L 168.4375,338.59375 L 167.65625,332.34375 L 162.5625,331.75 L 162.375,328.8125 L 161.40625,329.78125 L 155.625,329.78125 L 155.90625,331.03125 L 157.28125,336.6875 L 157.65625,342.34375 L 156.6875,343.90625 L 155.71875,339.21875 L 152.96875,328.5 L 143,319.5 L 143.21875,315.40625 L 141.25,315.21875 z ",name:"Gironde"},"fr-34":{path:"M 335.5,408.375 L 332.84375,411.71875 L 331.09375,411.71875 L 330.03125,415.4375 L 327.90625,415.4375 L 327.1875,413.84375 L 325.78125,413.84375 L 324.71875,414.75 L 323.46875,414.03125 L 323.46875,412.4375 L 320.65625,411.46875 L 320.65625,412.5 L 317.34375,413.03125 L 315.6875,414.4375 L 316.21875,417.75 L 313.1875,417.75 L 310.15625,416.09375 L 308.5,416.09375 L 308.5,418.03125 L 308.78125,423.8125 L 305.46875,423.8125 L 303.8125,423.8125 L 302.6875,426.03125 L 295.5,428.5 L 292.75,426.59375 L 291.09375,429.0625 L 290.28125,431.8125 L 293.3125,434.59375 L 292.1875,438.1875 L 288,439.5 L 288.84375,441.78125 L 287.0625,443.90625 L 288.125,446.375 L 290.25,447.96875 L 292.71875,446.375 L 294.5,450.09375 L 298.1875,448.84375 L 298.375,445.3125 L 300.84375,445.3125 L 300.3125,443.1875 L 301.375,442.65625 L 301.75,445.65625 L 303.84375,446.90625 L 305.625,446.71875 L 307.9375,450.09375 L 310.40625,450.28125 L 311.28125,453.09375 L 313.78125,453.1875 L 313.90625,452.125 L 320.9375,449.96875 L 321.71875,448.21875 L 327.1875,448.03125 L 328.9375,445.875 L 339.5,437.46875 L 346.125,432.78125 L 348.8125,432.96875 L 351.21875,430.8125 L 354.9375,428.6875 L 354.9375,426.0625 L 352.8125,421.09375 L 347,417.5625 L 345.75,415.4375 L 342.40625,413.6875 L 340.4375,414.75 L 339.21875,413.3125 L 338.6875,408.71875 L 335.5,408.375 z ",name:"Hérault"},"fr-35":{path:"M 116.25,135.90625 L 114.375,138.03125 L 115.46875,143.9375 L 117.09375,144.5625 L 118.0625,146.5 L 117.09375,150.0625 L 116.125,158.9375 L 113.0625,159.5625 L 111.59375,158.125 L 110.15625,160.21875 L 107.40625,161.1875 L 105.3125,165.6875 L 104.03125,167.3125 L 104.5,169.40625 L 103.6875,172.625 L 102.25,173.9375 L 102.25,175.21875 L 103.21875,175.53125 L 105.96875,175.53125 L 108.375,177 L 110,179.90625 L 108.53125,181.84375 L 109.03125,183.75 L 111.125,183.75 L 111.28125,185.6875 L 109.65625,187.625 L 107.90625,188.4375 L 109.03125,189.09375 L 109.34375,190.0625 L 107.5625,191.5 L 109.625,195.375 L 113.5625,193.28125 L 125.65625,192.6875 L 126.4375,190.53125 L 128.40625,188.59375 L 132.6875,188 L 132.875,185.84375 L 135.8125,186.25 L 137.5625,188.59375 L 141.5,189.5625 L 142.25,188 L 143.25,184.46875 L 145.78125,178.21875 L 147.15625,177.4375 L 150.46875,177.84375 L 150.46875,172.5625 L 149.09375,171.1875 L 149.09375,165.53125 L 148.5,163.59375 L 148.5,160.46875 L 150.46875,158.5 L 150.46875,154.59375 L 149.5,153.8125 L 149.6875,148.34375 L 148.125,147.5625 L 145.78125,147.5625 L 143.8125,146 L 141.6875,148.53125 L 139.9375,148.75 L 138.375,150.875 L 136.8125,150.5 L 133.46875,147.5625 L 132.3125,143.84375 L 131.71875,141.375 L 122.125,141.375 L 118.59375,139.21875 L 120.9375,136.09375 L 116.25,135.90625 z ",name:"Ille et Vilaine"},"fr-36":{path:"M 254.71875,221.4375 L 253.46875,221.875 L 250.9375,221.71875 L 248,222.71875 L 247.3125,224.25 L 247.03125,223.6875 L 243.65625,223.84375 L 241.96875,225.25 L 240,225.53125 L 239.71875,226.5 L 241.28125,228.59375 L 240.84375,230.4375 L 239.03125,230.5625 L 239.03125,232.09375 L 237.625,233.375 L 236.09375,235.90625 L 234.6875,234.625 L 232.59375,234.21875 L 229.5,235.34375 L 228.78125,238.84375 L 227.8125,241.65625 L 226.28125,249.625 L 224.15625,251.59375 L 222.4375,251.75 L 222.9375,252.25 L 222.9375,255.96875 L 222.15625,258.3125 L 225.875,261.25 L 227.8125,263.1875 L 230.9375,263.59375 L 232.125,267.6875 L 234.25,268.84375 L 233.875,271.78125 L 232.3125,272.0625 L 232.875,272.1875 L 237.78125,272.5625 L 239.53125,270.8125 L 242.65625,273.9375 L 246.5625,269.4375 L 248.3125,270.625 L 250.65625,270.40625 L 251.4375,270.8125 L 254.96875,271 L 256.125,267.875 L 265.90625,269.0625 L 269.625,270.03125 L 271.3125,269.84375 L 271.40625,268.28125 L 273.375,266.3125 L 272.96875,264.625 L 271.84375,262.40625 L 272.25,261.5625 L 272.40625,259.03125 L 273.09375,258.1875 L 273.25,257.625 L 271.5625,256.09375 L 271,254.125 L 268.34375,252.71875 L 268.34375,251.03125 L 270.28125,249.90625 L 270.28125,248.78125 L 268.46875,247.25 L 267.90625,246.28125 L 269.3125,245.5625 L 269.1875,244.3125 L 271.40625,242.46875 L 271.28125,241.65625 L 269.46875,241.65625 L 268.34375,240.375 L 268.34375,239.6875 L 269.3125,238 L 269.3125,236.75 L 267.0625,233.78125 L 267.5,231.125 L 266.21875,230.15625 L 263.5625,230.28125 L 261.46875,231.125 L 258.65625,230.71875 L 257.25,229.59375 L 256.96875,228.75 L 259.21875,226.90625 L 259.375,224.6875 L 256.40625,223 L 254.71875,221.4375 z ",name:"Indre"},"fr-37":{path:"M 212.1875,196.875 L 212.5625,197.75 L 206.90625,199.3125 L 205.5625,201.28125 L 203.1875,199.71875 L 204.375,203.625 L 202.21875,203.625 L 198.3125,200.875 L 196.375,204.78125 L 197.34375,205.96875 L 197.34375,207.125 L 195.375,209.6875 L 195.59375,213.96875 L 192.46875,217.6875 L 190.25,225.6875 L 190.5,225.6875 L 191.28125,228.8125 L 195,229.59375 L 195,231.9375 L 199.6875,233.3125 L 199.6875,237.03125 L 199.5,239.375 L 205.34375,239.375 L 210.4375,238.1875 L 210.03125,236.03125 L 211.59375,235.0625 L 213.15625,237.21875 L 214.53125,237.8125 L 215.6875,242.5 L 219.03125,246 L 219.40625,248.75 L 222.4375,251.75 L 224.15625,251.59375 L 226.28125,249.625 L 227.8125,241.65625 L 228.78125,238.84375 L 229.5,235.34375 L 232.59375,234.21875 L 234.6875,234.625 L 236.09375,235.90625 L 237.625,233.375 L 239.03125,232.09375 L 239.03125,230.5625 L 240.84375,230.4375 L 241.28125,228.59375 L 239.71875,226.5 L 239.96875,225.625 L 238.875,224.6875 L 235.9375,220.34375 L 232.15625,220.34375 L 231.03125,218.65625 L 231.03125,211.625 L 229.5,207.5625 L 229.21875,202.53125 L 227.25,202.375 L 225,200.6875 L 224.4375,200.6875 L 222.46875,202.09375 L 221.21875,201.25 L 220.9375,199.3125 L 222.34375,198.59375 L 222.46875,197.90625 L 221.65625,197.1875 L 212.1875,196.875 z ",name:"Indre et Loire"},"fr-38":{path:"M 397.90625,298.6875 L 396.625,300.1875 L 395.34375,304 L 392.78125,305.28125 L 390.03125,302.71875 L 388.125,302.71875 L 387.90625,305.5 L 390.6875,307.84375 L 386.4375,313.34375 L 380.90625,314.625 L 376.65625,316.125 L 379.40625,318.875 L 380.0625,320.15625 L 375.8125,322.28125 L 375.375,328.4375 L 375.25,328.5 L 376.4375,330.96875 L 379.84375,332.03125 L 382.1875,331.1875 L 384.9375,329.28125 L 388.5625,332.25 L 391.53125,332.25 L 393.65625,335.21875 L 392.78125,337.34375 L 393.21875,340.34375 L 392.15625,343.3125 L 392.59375,344.375 L 394.0625,343.9375 L 397.46875,345 L 401.9375,346.28125 L 403.84375,345 L 404.6875,343.53125 L 405.34375,343.53125 L 405.53125,359.4375 L 406.59375,360.5 L 409.375,360.5 L 411.90625,362 L 413.8125,363.5 L 415.75,363.6875 L 417,364.75 L 420.53125,365.15625 L 420.78125,364.5625 L 419.21875,363.78125 L 419.21875,361.4375 L 424.09375,361.4375 L 425.65625,359.875 L 424.6875,358.125 L 427.21875,356.15625 L 429,356.9375 L 431.53125,354.78125 L 436,355.5625 L 437.5625,353.8125 L 441.28125,354 L 441.28125,349.71875 L 439.71875,348.9375 L 438.9375,346.40625 L 434.84375,346 L 434.25,345.03125 L 435.03125,340.9375 L 436.40625,339.75 L 435.28125,338.21875 L 433.15625,336.9375 L 431.875,338.21875 L 432.3125,336.5 L 432.3125,334.8125 L 430.59375,333.09375 L 431.46875,329.0625 L 433.375,328 L 433.15625,325.25 L 429.125,321.21875 L 427.625,321.21875 L 426.5625,322.6875 L 424.03125,319.3125 L 422.53125,319.5 L 421.25,322.28125 L 422.125,323.96875 L 421.46875,324.625 L 419.78125,323.34375 L 414.875,322.28125 L 412.5625,318.03125 L 412.5625,316.3125 L 410.21875,313.78125 L 409.96875,312.6875 L 402.15625,303.15625 L 401.28125,300.40625 L 399.59375,298.90625 L 397.90625,298.6875 z ",name:"Isère"},"fr-39":{path:"M 401.15625,217.53125 L 401.25,218.0625 L 400.46875,218.0625 L 400.0625,221.1875 L 399.5,223.34375 L 399.875,224.71875 L 398.71875,226.28125 L 397.53125,227.84375 L 397.53125,229.40625 L 394.21875,230.96875 L 393.25,232.53125 L 393.625,233.6875 L 393.8125,234.6875 L 392.46875,235.46875 L 392.25,238 L 393.8125,238.1875 L 395.59375,241.125 L 397.75,241.125 L 398.90625,242.5 L 400.28125,242.5 L 399.875,244.0625 L 395.375,244.625 L 395.78125,246.1875 L 397.34375,247.1875 L 397.34375,249.125 L 396.75,249.71875 L 397.9375,251.28125 L 399.6875,254.40625 L 398.90625,257.71875 L 396.9375,259.09375 L 397.15625,261.8125 L 399.5,262.59375 L 400.28125,263.78125 L 398.3125,265.34375 L 393.1875,265.96875 L 395.59375,266.90625 L 399.5,272.375 L 402.03125,273.53125 L 402.03125,276.28125 L 404.96875,275.875 L 408.6875,271.78125 L 411.8125,273.34375 L 411.8125,275.6875 L 417.46875,275.6875 L 425.59375,266.75 L 425.25,266.5625 L 425.625,262.46875 L 428.5625,258.96875 L 426.59375,258.1875 L 426.78125,257 L 424.40625,256.78125 L 424.25,255.375 L 425.78125,253.84375 L 425.375,252.3125 L 424.53125,250.34375 L 428.03125,249.21875 L 429.3125,247.40625 L 429.59375,245.15625 L 426.78125,242.46875 L 424.8125,241.9375 L 420.46875,240.53125 L 420.46875,236.59375 L 420.1875,233.65625 L 416.6875,233.9375 L 411.21875,232.09375 L 412.0625,230.15625 L 413.3125,227.1875 L 413.75,225.25 L 412.34375,223.40625 L 409.8125,221.71875 L 409.53125,219.625 L 409.5625,218.4375 L 407.84375,218.375 L 406.875,219.34375 L 404.34375,219.34375 L 402.65625,217.9375 L 401.15625,217.53125 z ",name:"Jura"},"fr-40":{path:"M 139.8125,374.4375 L 133.625,377.625 L 132.03125,377.6875 L 128.5625,396.25 L 124.0625,413.4375 L 122.6875,420.09375 L 121.53125,424.78125 L 118.625,429.78125 L 124.25,432.59375 L 129.375,432.25 L 132.375,429.59375 L 134.84375,431.53125 L 133.4375,432.9375 L 134.5,433.3125 L 135.375,432.0625 L 139.8125,432.40625 L 142.28125,430.46875 L 146.875,430.65625 L 148.65625,429.75 L 151.46875,429.75 L 152.1875,430.65625 L 154.46875,429.9375 L 156.59375,431.53125 L 159.4375,430.65625 L 163.15625,429.40625 L 163.6875,430.28125 L 169.34375,430.46875 L 172.15625,428.875 L 170.78125,426.46875 L 172.15625,422.75 L 174.09375,420.21875 L 173.5,416.90625 L 175.0625,415.34375 L 172.75,411.4375 L 174.6875,409.09375 L 176.84375,408.6875 L 178.78125,409.46875 L 181.53125,407.125 L 182.5,410.0625 L 183.46875,411.4375 L 185.625,410.84375 L 185.4375,408.3125 L 186.0625,406.9375 L 185.59375,405.71875 L 186.125,401.84375 L 188.25,399.71875 L 187.1875,398.46875 L 184.875,398.28125 L 182.21875,397.25 L 178.34375,397.59375 L 177.625,393.34375 L 175.15625,390.34375 L 174.09375,390 L 174.46875,393.53125 L 174.46875,394.59375 L 171.09375,394.75 L 167.5625,393.53125 L 166.84375,389.09375 L 164.375,386.4375 L 162.625,386.28125 L 162.4375,384.6875 L 160.5,383.4375 L 157.3125,382.5625 L 158.1875,381.5 L 158.1875,380.4375 L 157.125,379.5625 L 155.90625,378.5 L 152.34375,379.03125 L 150.25,380.78125 L 148.8125,380.96875 L 146.53125,379.375 L 143.15625,380.78125 L 141.5625,379.71875 L 143,377.96875 L 143.15625,375.65625 L 139.8125,374.4375 z ",
name:"Landes"},"fr-41":{path:"M 222.5,172.25 L 221.1875,173.9375 L 219.625,176.65625 L 221.5625,178.4375 L 221.375,182.53125 L 220.59375,185.25 L 218.625,185.25 L 218.625,188.96875 L 215.90625,192.5 L 212.96875,193.65625 L 211.59375,195.40625 L 212.1875,196.875 L 221.65625,197.1875 L 222.46875,197.90625 L 222.34375,198.59375 L 220.9375,199.3125 L 221.21875,201.25 L 222.46875,202.09375 L 224.4375,200.6875 L 225,200.6875 L 227.25,202.375 L 229.21875,202.53125 L 229.5,207.5625 L 231.03125,211.625 L 231.03125,218.65625 L 232.15625,220.34375 L 235.9375,220.34375 L 238.875,224.6875 L 239.96875,225.625 L 240,225.53125 L 241.96875,225.25 L 243.65625,223.84375 L 247.03125,223.6875 L 247.3125,224.25 L 248,222.71875 L 250.9375,221.71875 L 253.46875,221.875 L 254.71875,221.4375 L 256.40625,223 L 259.375,224.6875 L 261.875,224.53125 L 261.75,222 L 262.875,220.75 L 264,220.625 L 264.96875,221.71875 L 268.90625,221.3125 L 271.40625,219.90625 L 271.125,218.9375 L 270.4375,218.09375 L 270.5625,216.25 L 272.40625,212.90625 L 274.78125,211.90625 L 274.78125,209.8125 L 275.34375,208.5625 L 273.8125,208 L 272.8125,205.875 L 270.28125,205.1875 L 270.15625,204.34375 L 272.6875,202.25 L 275.53125,200.84375 L 273.9375,198.46875 L 266.78125,198.1875 L 265.8125,199.3125 L 263.84375,199.3125 L 263.15625,198.59375 L 260.0625,198.1875 L 259.21875,200 L 257.25,200.5625 L 255.4375,198.46875 L 255,196.0625 L 253.34375,194.65625 L 250.8125,194.375 L 248.96875,193.125 L 248.96875,191.875 L 247.875,189.1875 L 250.09375,186.96875 L 249.8125,185.84375 L 248.84375,184.71875 L 247.71875,184.71875 L 247.71875,183.71875 L 248.84375,181.78125 L 248.96875,180.65625 L 247.3125,180.65625 L 244.78125,179.9375 L 242.40625,182.1875 L 239.71875,182.46875 L 235.375,181.34375 L 234.125,178.53125 L 232.4375,177.5625 L 231.46875,175.3125 L 228.65625,175.3125 L 227.53125,174.46875 L 229.21875,173.5 L 229.34375,172.65625 L 227.53125,172.65625 L 224.4375,173.21875 L 222.5,172.25 z ",name:"Loir et Cher"},"fr-42":{path:"M 339.53125,278.03125 L 336,278.625 L 335.4375,280.78125 L 336.8125,283.5 L 337.1875,294.625 L 332.5,294.84375 L 332.3125,296.59375 L 335.4375,299.125 L 333.6875,300.875 L 333.09375,305.1875 L 335.4375,308.3125 L 337.5625,313.375 L 342.65625,316.71875 L 344.40625,323.15625 L 340.6875,326.65625 L 341.28125,329 L 346.75,330.78125 L 351.0625,327.25 L 353.1875,327.0625 L 359.4375,329.78125 L 359.0625,333.5 L 362.1875,333.3125 L 364.65625,336.15625 L 366.46875,335.65625 L 369.84375,335.03125 L 370.71875,331.1875 L 375.375,328.4375 L 375.8125,322.28125 L 375.96875,322.1875 L 373.6875,321.84375 L 371.5625,322.6875 L 369.84375,321.625 L 371.96875,319.09375 L 371.34375,317.1875 L 364.75,316.125 L 359.21875,311.03125 L 359.21875,309.3125 L 360.5,308.25 L 360.5,306.78125 L 359.03125,305.90625 L 360.28125,304 L 360.28125,301.25 L 357.75,298.90625 L 357.75,296.5625 L 356.03125,294.875 L 356.03125,292.96875 L 355.1875,289.78125 L 356.46875,288.5 L 356.6875,284.6875 L 360.71875,284.6875 L 361.78125,283.40625 L 360.5,281.28125 L 360.5,279.375 L 359.4375,278.53125 L 358.6875,282.53125 L 356.53125,282.53125 L 354.96875,284.09375 L 353.78125,282.90625 L 347.53125,281.9375 L 345.1875,283.3125 L 343.625,283.3125 L 343.25,281.9375 L 340.3125,281.34375 L 340.125,278.21875 L 339.53125,278.03125 z ",name:"Loire"},"fr-43":{path:"M 317.8125,326.34375 L 316.40625,327.0625 L 316.40625,328.28125 L 314.28125,328.46875 L 312.34375,330.0625 L 308.8125,330.59375 L 308,331.75 L 308.625,331.8125 L 309.5,334.3125 L 313.9375,334.3125 L 314.8125,337.46875 L 316.0625,338.71875 L 316.40625,342.4375 L 317.46875,343.84375 L 319.59375,344.03125 L 318.34375,345.09375 L 317.28125,345.4375 L 318.1875,346.3125 L 317.125,347.90625 L 319.25,349.15625 L 320.3125,350.75 L 320.3125,352.40625 L 320.78125,352.25 L 324.3125,361.25 L 329.375,359.6875 L 329.75,357.34375 L 331.71875,357.34375 L 332.5,360.0625 L 336.125,359.1875 L 340.625,364.9375 L 343.4375,360.46875 L 348.5,356.75 L 353.1875,356.75 L 354.75,351.875 L 357.875,351.65625 L 358.09375,347.96875 L 361,347.96875 L 360.4375,346.59375 L 359.65625,344.0625 L 360.8125,342.09375 L 363.5625,340.9375 L 364.71875,336.25 L 362.1875,333.3125 L 359.0625,333.5 L 359.4375,329.78125 L 353.1875,327.0625 L 351.0625,327.25 L 346.75,330.78125 L 342.8125,329.5 L 342.03125,330.25 L 339.5625,329.53125 L 337.8125,327.75 L 336.75,329.875 L 333.71875,329.71875 L 332.3125,328.46875 L 331.25,330.9375 L 329.3125,330.0625 L 328.0625,327.75 L 326.46875,327.75 L 325.0625,326.53125 L 322.9375,327.40625 L 320.46875,327.59375 L 319.0625,326.6875 L 318.1875,327.21875 L 317.8125,326.34375 z ",name:"Haute Loire"},"fr-44":{path:"M 132.875,185.84375 L 132.6875,188 L 128.40625,188.59375 L 126.4375,190.53125 L 125.65625,192.6875 L 113.5625,193.28125 L 108.46875,196 L 108.28125,201.46875 L 102.8125,203.625 L 99.09375,205.5625 L 95.96875,205.5625 L 94.8125,204.21875 L 93.0625,205.96875 L 92.21875,206.125 L 93.21875,206.8125 L 89.5,210.125 L 90.28125,210.90625 L 91.0625,212.46875 L 89.09375,215.21875 L 91.25,216.375 L 94.96875,217.15625 L 95.34375,215.59375 L 97.5,218.34375 L 101.03125,218.34375 L 103.5625,215.59375 L 106.875,215.59375 L 103.375,217.34375 L 103.5625,219.3125 L 104.34375,221.0625 L 102.1875,223.21875 L 99.84375,223.21875 L 100.25,226.15625 L 104.53125,225.375 L 109.625,230.0625 L 109.375,230.375 L 113.0625,232.78125 L 113.875,234.71875 L 117.25,236.1875 L 119.84375,236.5 L 120.96875,239.5625 L 125,240.53125 L 127.71875,241.03125 L 129.1875,239.40625 L 127.71875,237.3125 L 127.09375,232.78125 L 128.375,231.34375 L 130.15625,231.34375 L 130.96875,233.125 L 130.46875,236.34375 L 131.59375,237.15625 L 134.5,236.1875 L 135.46875,232.96875 L 134.1875,231.65625 L 137.40625,231.65625 L 138.53125,229.5625 L 139.65625,229.71875 L 142.25,232.15625 L 144.125,232.40625 L 144.1875,230.375 L 142.5625,228.28125 L 141.125,228.28125 L 140.625,228.4375 L 139.65625,227.96875 L 140.46875,227.15625 L 140.46875,225.6875 L 142.09375,225.21875 L 143.0625,222.96875 L 142.25,222.15625 L 142.09375,219.40625 L 140,219.40625 L 137.90625,216.8125 L 137.90625,214.90625 L 140.15625,213.75 L 144.1875,212.96875 L 150.46875,213.125 L 152.40625,211.8125 L 151.75,207.78125 L 148.84375,205.0625 L 145.3125,205.53125 L 144.34375,204.71875 L 144.1875,201.84375 L 146.75,199.5625 L 144.8125,197.15625 L 143.53125,193.75 L 141.4375,192.46875 L 141.4375,190.21875 L 141.21875,189.5 L 137.5625,188.59375 L 135.8125,186.25 L 132.875,185.84375 z ",name:"Loire Atlantique"},"fr-45":{path:"M 273.71875,160.46875 L 271.1875,162.8125 L 265.46875,163.3125 L 265.25,163.6875 L 265.8125,164.8125 L 264,166.34375 L 264.40625,170 L 262.875,170.28125 L 261.875,173.90625 L 260.1875,175.75 L 257.8125,175.75 L 255.5625,177 L 254.3125,175.59375 L 252.90625,175.03125 L 251.375,176.03125 L 251.375,177.5625 L 250.25,178.40625 L 248.4375,177.28125 L 247.3125,178.125 L 247.4375,179.375 L 246.90625,180.53125 L 247.3125,180.65625 L 248.96875,180.65625 L 248.84375,181.78125 L 247.71875,183.71875 L 247.71875,184.71875 L 248.84375,184.71875 L 249.8125,185.84375 L 250.09375,186.96875 L 247.875,189.1875 L 248.96875,191.875 L 248.96875,193.125 L 250.8125,194.375 L 253.34375,194.65625 L 255,196.0625 L 255.4375,198.46875 L 257.25,200.5625 L 259.21875,200 L 260.0625,198.1875 L 263.15625,198.59375 L 263.84375,199.3125 L 265.8125,199.3125 L 266.78125,198.1875 L 273.9375,198.46875 L 275.625,200.96875 L 277.59375,201.8125 L 279.28125,203.375 L 281.375,203.09375 L 281.9375,202.375 L 283.1875,202.375 L 284.75,204.34375 L 287.96875,204.5 L 288.8125,205.59375 L 291.0625,208.6875 L 292.03125,209.53125 L 293.28125,209.40625 L 293.4375,206.59375 L 294,206.3125 L 294.84375,206.4375 L 296.25,208.28125 L 297.21875,208.6875 L 299.21875,207.875 L 298.90625,207.53125 L 298.71875,205.5625 L 302.625,204.40625 L 302.03125,202.25 L 301.4375,199.125 L 298.90625,195.625 L 298.3125,193.46875 L 302.21875,193.46875 L 304.96875,191.5 L 305.34375,188.59375 L 303.59375,186.625 L 308.6875,182.34375 L 308.6875,178.8125 L 306.125,176.09375 L 305.15625,172.96875 L 301.625,169.625 L 296.75,172.375 L 296.375,170.8125 L 294.21875,170.625 L 293.625,172.1875 L 291.6875,172.5625 L 286.40625,172.375 L 284.25,173.75 L 282.5,172.1875 L 285.625,170.03125 L 285.4375,166.71875 L 283.09375,165.53125 L 281.125,162.59375 L 275.875,162.21875 L 273.71875,160.46875 z ",name:"Loiret"},"fr-46":{path:"M 247.46875,347.3125 L 243.3125,349.25 L 242.71875,349.34375 L 242.84375,349.53125 L 241.5,350.6875 L 241.5,352.84375 L 243.25,354.78125 L 241.5,357.90625 L 239.9375,358.90625 L 239.71875,360.84375 L 236.40625,361.25 L 236.59375,363.375 L 237.78125,363.78125 L 235.03125,367.6875 L 230.75,368.0625 L 230.5625,371 L 228.78125,372.75 L 227.8125,375.3125 L 223.90625,375.5 L 225.46875,381.34375 L 227.125,384.96875 L 229.625,384.875 L 229.78125,385.90625 L 228.375,387.5 L 229.4375,389.625 L 231.03125,389.625 L 232.78125,391.5625 L 234.375,391.5625 L 235.625,390.15625 L 235.96875,390.53125 L 235.96875,392.28125 L 236.5,394.59375 L 240.21875,394.75 L 243.21875,391.5625 L 244.8125,391.40625 L 245.34375,392.28125 L 246.21875,394.21875 L 247.65625,394.21875 L 248.1875,390.6875 L 251.1875,391.0625 L 252.9375,388.9375 L 255.78125,389.625 L 260.03125,387.6875 L 260.0625,388.0625 L 261.4375,386.625 L 259.65625,383.96875 L 258.96875,380.4375 L 261.25,378.5 L 262.3125,378.84375 L 265.5,375.3125 L 267.25,375.5 L 267.96875,374.59375 L 271.5,374.59375 L 272.75,373.1875 L 273.09375,372.09375 L 271.5,371.875 L 272.59375,368.5625 L 270.09375,367.46875 L 272.59375,361.65625 L 269.28125,359.1875 L 268.15625,352 L 265.125,351.1875 L 262.90625,353.375 L 261.8125,351.4375 L 258.5,354.75 L 256.28125,355.03125 L 252.4375,349.53125 L 247.46875,347.3125 z ",name:"Lot"},"fr-47":{path:"M 195.25,363.375 L 193.1875,363.65625 L 191.4375,364.1875 L 188.9375,364.71875 L 188.25,366.65625 L 189.125,368.59375 L 191.25,368.78125 L 190.90625,370.53125 L 189.3125,371.0625 L 187.53125,373.1875 L 184.53125,377.78125 L 183.125,380.25 L 183.65625,382.90625 L 184.53125,384.6875 L 182.59375,385.90625 L 180.65625,385.90625 L 180.28125,387.875 L 181.53125,388.9375 L 181.71875,390.875 L 180.28125,392.28125 L 177.15625,392.78125 L 177.625,393.34375 L 178.34375,397.59375 L 182.21875,397.25 L 184.875,398.28125 L 187.1875,398.46875 L 188.25,399.71875 L 186.125,401.84375 L 185.59375,405.71875 L 186.0625,406.9375 L 186.8125,405.375 L 189.125,407.34375 L 192.25,404.21875 L 193.625,406.15625 L 196.9375,405.5625 L 200.46875,405.1875 L 202.03125,402.4375 L 207.875,401.875 L 210.8125,404.78125 L 211.8125,403.8125 L 213.75,403.21875 L 212.96875,400.5 L 215.90625,399.71875 L 219.625,398.9375 L 218.8125,396.59375 L 220,395.21875 L 220.96875,391.5 L 218.8125,389.15625 L 220.1875,384.6875 L 223.125,386.4375 L 227.4375,385.65625 L 225.46875,381.34375 L 223.90625,375.5 L 227.8125,375.3125 L 228.59375,373.25 L 225.53125,371.96875 L 224.125,370.375 L 222,370.375 L 219.53125,372.65625 L 217.59375,372.5 L 217.0625,371.25 L 218.46875,370.375 L 218.46875,369.125 L 216.875,367.375 L 215.46875,367.1875 L 214.59375,368.25 L 210.6875,368.25 L 210.34375,366.84375 L 209.09375,366.65625 L 206.96875,368.40625 L 203.09375,368.40625 L 201.3125,370 L 198.3125,368.9375 L 197.96875,365.25 L 195.25,363.375 z ",name:"Lot et Garonne"},"fr-48":{path:"M 320.78125,352.25 L 315.3125,354.21875 L 313.75,357.71875 L 310.25,355.375 L 307.5,363.96875 L 304.6875,370.4375 L 308.78125,375.46875 L 308.5,379.34375 L 311.25,381.28125 L 311.25,385.96875 L 312.09375,392.59375 L 315.40625,394 L 315.125,396.1875 L 319.8125,395.375 L 321.46875,396.1875 L 320.4375,397.09375 L 326.46875,401.125 L 331.625,400.0625 L 332.5,398.8125 L 331.78125,397.0625 L 333.90625,396.53125 L 336.90625,399.34375 L 342.03125,399.875 L 344.34375,396.34375 L 344.34375,393.34375 L 345.75,391.75 L 344.5,391.40625 L 344.5,387.34375 L 341.6875,384.34375 L 344,383.96875 L 345.21875,382.90625 L 346.1875,381.03125 L 345.21875,380.4375 L 345.78125,376.3125 L 342.46875,372.71875 L 341.09375,365.53125 L 336.125,359.1875 L 332.5,360.0625 L 331.71875,357.34375 L 329.75,357.34375 L 329.375,359.6875 L 324.3125,361.25 L 320.78125,352.25 z ",name:"Lozère"},"fr-49":{path:"M 141.9375,188.6875 L 141.5,189.5625 L 141.21875,189.5 L 141.4375,190.21875 L 141.4375,192.46875 L 143.53125,193.75 L 144.8125,197.15625 L 146.75,199.5625 L 144.1875,201.84375 L 144.34375,204.71875 L 145.3125,205.53125 L 148.84375,205.0625 L 151.75,207.78125 L 152.40625,211.8125 L 150.46875,213.125 L 144.1875,212.96875 L 140.15625,213.75 L 137.90625,214.90625 L 137.90625,216.8125 L 140,219.40625 L 142.09375,219.40625 L 142.25,222.15625 L 143.0625,222.96875 L 142.09375,225.21875 L 140.46875,225.6875 L 140.46875,227.15625 L 139.65625,227.96875 L 140.625,228.4375 L 141.125,228.28125 L 142.5625,228.28125 L 144.1875,230.375 L 144.125,232.40625 L 144.5,232.46875 L 146.125,233.4375 L 151.125,233.4375 L 153.78125,235.6875 L 157.5,234.09375 L 163.5625,235.46875 L 166.28125,233.6875 L 166.28125,230.96875 L 171.5625,230.5625 L 176.4375,229.59375 L 181.71875,229.40625 L 182.3125,230.78125 L 183.6875,231.9375 L 185.03125,229.59375 L 188.75,225.6875 L 190.25,225.6875 L 192.46875,217.6875 L 195.59375,213.96875 L 195.375,209.6875 L 197.34375,207.125 L 197.34375,205.96875 L 196.375,204.78125 L 197,203.5 L 194.34375,202.46875 L 186.125,197.46875 L 178.53125,195.21875 L 175.625,195.0625 L 175.625,193.125 L 173.84375,191.65625 L 171.9375,191.65625 L 168.375,190.53125 L 166.125,192.78125 L 160.96875,192.96875 L 158.6875,191.65625 L 152.90625,189.90625 L 151.59375,191.5 L 148.375,189.40625 L 145.46875,189.40625 L 141.9375,188.6875 z ",name:"Maine et Loire"},"fr-50":{path:"M 119.5625,77.5 L 118.78125,79.46875 L 122.90625,82.78125 L 122.90625,87.09375 L 121.34375,89.03125 L 122.3125,90 L 122.90625,90.40625 L 122.5,94.125 L 123.875,97.25 L 128.375,102.3125 L 129.34375,106.8125 L 130.3125,108.1875 L 130.3125,115.21875 L 132.65625,119.90625 L 132.65625,125.375 L 130.125,130.4375 L 132.84375,137.46875 L 137.15625,138.4375 L 137.53125,140.40625 L 135.40625,141.375 L 131.71875,141.375 L 132.3125,143.84375 L 133.46875,147.5625 L 136.8125,150.5 L 138.375,150.875 L 139.9375,148.75 L 141.6875,148.53125 L 143.8125,146 L 145.78125,147.5625 L 148.125,147.5625 L 149.6875,148.34375 L 149.6875,148.71875 L 153,149.125 L 154.96875,147.5625 L 157.875,148.75 L 157.9375,148.875 L 161.28125,146.03125 L 162.40625,142.3125 L 162.09375,140.6875 L 162.5625,138.78125 L 160.625,136.84375 L 155.625,133.59375 L 151.9375,133.28125 L 148.21875,128.59375 L 151.28125,127.46875 L 152.5625,125.0625 L 150.96875,123.59375 L 152.40625,122.3125 L 153.84375,123.4375 L 156.4375,121.84375 L 158.0625,119.25 L 158.6875,116.6875 L 157.5625,114.40625 L 158.21875,113.59375 L 156.75,111.1875 L 158.375,109.09375 L 157.09375,107.46875 L 155.46875,109.5625 L 153.21875,108.28125 L 149.5,104.5625 L 149.34375,102.96875 L 150.46875,101.84375 L 150.125,99.6875 L 148.28125,100.15625 L 148.09375,95.46875 L 143,89.4375 L 144.5625,85.53125 L 146.71875,85.53125 L 144.78125,80.25 L 136.375,79.84375 L 131.875,82.96875 L 126.8125,79.65625 L 119.5625,77.5 z ",name:"Manche"},"fr-51":{path:"M 337.375,99.3125 L 335.03125,100.3125 L 335.4375,102.25 L 331.3125,102.25 L 327.625,105 L 327.625,110.25 L 330.34375,112.03125 L 331.125,113.78125 L 326.625,114.15625 L 326.0625,115.9375 L 327.8125,117.09375 L 327.03125,118.28125 L 325.28125,119.0625 L 325.65625,120.40625 L 328.1875,120.40625 L 329.1875,121.78125 L 327.4375,122.96875 L 325.875,127.0625 L 322.9375,128.4375 L 321.9375,130.5625 L 320.96875,131.75 L 321.1875,132.90625 L 319.625,133.90625 L 319.21875,136.625 L 320.78125,137.59375 L 321.5625,140.53125 L 320.59375,142.28125 L 321.1875,143.65625 L 324.09375,143.46875 L 324.09375,144.4375 L 324.9375,144.25 L 328.3125,147.8125 L 333.0625,147.03125 L 338.625,143.25 L 341.96875,143.25 L 345.34375,140.875 L 349.3125,138.6875 L 352.28125,138.90625 L 352.6875,142.875 L 356.25,148.21875 L 360.21875,148.21875 L 365.78125,147.03125 L 369.75,148.40625 L 373.90625,145.4375 L 374.5,140.5 L 379.09375,139.71875 L 379,136.625 L 375.28125,133.6875 L 374.875,132.125 L 376.25,129.78125 L 375.0625,128.8125 L 376.25,125.875 L 378.40625,124.90625 L 379.96875,120.03125 L 376.84375,120.21875 L 378.59375,118.28125 L 377.21875,113.96875 L 375.875,111.03125 L 377.625,109.46875 L 376.625,109.28125 L 376.375,107.9375 C 376.33461,107.94351 376.09375,107.96875 376.09375,107.96875 L 374.3125,106.375 L 372.3125,108.375 L 371.71875,108.375 L 370.9375,107.375 L 366.1875,107.1875 L 365.375,108.375 L 364,108.375 L 362.8125,105.78125 L 360.21875,105.78125 L 359.625,106.375 L 357.0625,106.1875 L 353.875,103.8125 L 351.6875,103.21875 L 350.90625,102.03125 L 346.75,99.4375 L 342,99.3125 L 342.0625,101.09375 L 340.6875,101.46875 L 337.375,99.3125 z ",name:"Marne"},"fr-52":{path:"M 379.09375,139.71875 L 374.5,140.5 L 373.90625,145.4375 L 369.75,148.40625 L 367.59375,147.65625 L 366.5625,149.8125 L 366.375,152.78125 L 369.9375,157.75 L 373.3125,158.9375 L 374.09375,163.09375 L 374.3125,170.21875 L 373.125,172 L 369.75,172.21875 L 367.5625,174.1875 L 369.15625,175.1875 L 369.8125,177.6875 L 372.15625,179 L 375.65625,182.71875 L 380.15625,188.78125 L 377.625,191.5 L 379.375,192.6875 L 379.5625,196 L 382.6875,195.8125 L 383.46875,197.375 L 385.8125,197.5625 L 387.5625,196.59375 L 390.6875,200.5 L 391.09375,201.46875 L 395.375,200.5 L 396.1875,198.53125 L 396.375,198.5625 L 396.375,196.59375 L 399.09375,195.40625 L 402.21875,196.59375 L 405.15625,195.40625 L 406.90625,195.40625 L 407.5,191.5 L 408.46875,190.34375 L 406.71875,190.15625 L 406.53125,187.8125 L 409.25,187.21875 L 409.4375,185.65625 L 412.1875,185.65625 L 412.1875,183.125 L 414.34375,182.34375 L 413.75,180.78125 L 414.34375,180.40625 L 412.5625,179 L 410.4375,179.78125 L 410.4375,175.6875 L 404.96875,172.96875 L 406.125,167.6875 L 407.875,166.5 L 407.3125,164.75 L 404.75,164.375 L 404.1875,161.8125 L 401.84375,161.8125 L 399.09375,158.125 L 395.96875,157.90625 L 394.625,155.96875 L 396.375,154.21875 L 392.25,149.71875 L 390.5,149.125 L 385.8125,146.78125 L 383.28125,144.0625 L 379.1875,143.46875 L 379.09375,139.71875 z ",name:"Haute Marne"},"fr-53":{path:"M 182.5,146.40625 L 180.5625,146.59375 L 179.75,148.53125 L 176.84375,149.71875 L 171.5625,148.9375 L 166.28125,152.0625 L 164.34375,150.6875 L 161.40625,152.65625 L 159.25,151.09375 L 157.875,148.75 L 154.96875,147.5625 L 153,149.125 L 149.6875,148.71875 L 149.5,153.8125 L 150.46875,154.59375 L 150.46875,158.5 L 148.5,160.46875 L 148.5,163.59375 L 149.09375,165.53125 L 149.09375,171.1875 L 150.46875,172.5625 L 150.46875,177.84375 L 147.15625,177.4375 L 145.78125,178.21875 L 143.25,184.46875 L 142.25,188 L 141.9375,188.6875 L 145.46875,189.40625 L 148.375,189.40625 L 151.59375,191.5 L 152.90625,189.90625 L 158.6875,191.65625 L 160.96875,192.96875 L 166.125,192.78125 L 168.375,190.53125 L 171.9375,191.65625 L 173.84375,191.65625 L 173.875,191.6875 L 174.5,190.21875 L 174.5,184.40625 L 173.84375,183.4375 L 174.1875,182.46875 L 176.9375,182.3125 L 178.21875,181.1875 L 178.375,180.21875 L 176.9375,176.65625 L 177.40625,175.21875 L 180.625,174.90625 L 180.3125,174.09375 L 181.125,172.15625 L 180.46875,170.6875 L 181.28125,169.09375 L 184.1875,166.65625 L 183.84375,164.09375 L 184.34375,159.90625 L 185.46875,157.96875 L 189.125,156.78125 L 188.5625,156.75 L 187.5625,153.21875 L 185.03125,152.25 L 184.25,147.96875 L 182.5,146.40625 z ",name:"Mayenne"},"fr-54":{path:"M 401.59375,88.4375 L 399.25,90.59375 L 395.9375,90.78125 L 394.78125,91.96875 L 394.53125,91.96875 L 394.40625,94.3125 L 395.5625,96.21875 L 395.15625,97.375 L 394.78125,98.71875 L 394.96875,99.46875 L 395.9375,98.71875 L 396.875,97 L 398.8125,96.8125 L 402.0625,95.84375 L 403.78125,97.1875 L 404.53125,98.71875 L 405.125,100.4375 L 405.125,102.15625 L 406.0625,102.9375 L 406.0625,104.25 L 405.125,105.40625 L 404.9375,107.90625 L 405.6875,109.0625 L 405.875,110.59375 L 406.0625,113.0625 L 407.21875,114.03125 L 408.9375,114.78125 L 408.1875,116.3125 L 410.28125,118.25 L 408.375,120.34375 L 408.75,121.6875 L 410.65625,122.625 L 410.65625,123.59375 L 408.375,123.59375 L 407.40625,124.9375 L 407.59375,125.90625 L 409.125,127.4375 L 407.8125,131.0625 L 406.28125,134.5 L 407.03125,136.625 L 407.03125,140.0625 L 407.8125,141.78125 L 408.9375,141.78125 L 409.53125,142.75 L 407.8125,142.75 L 406.28125,143.5 L 406.28125,144.65625 L 408.1875,146.375 L 408.1875,149.0625 L 410.09375,148.46875 L 412.96875,148.65625 L 413.15625,151.71875 L 414.3125,152.125 L 412.96875,153.0625 L 412.78125,154.03125 L 414.875,154.40625 L 416.21875,156.125 L 422.53125,155.75 L 423.875,153.25 L 426.75,153.25 L 427.90625,152.3125 L 429.8125,153.46875 L 431.53125,152.875 L 434.03125,153.0625 L 436.125,152.3125 L 438.21875,150.78125 L 439.375,151.9375 L 439.5625,149.25 L 441.09375,148.65625 L 441.875,151.15625 L 444.15625,151.34375 L 446.46875,151.9375 L 447.40625,152.125 L 450.6875,150.59375 L 452.40625,149.4375 L 453.9375,147.53125 L 457,146.375 L 459,145.9375 L 457.875,144.84375 L 460.03125,145.03125 L 460.4375,144.625 L 458.125,143.875 L 454.875,141.59375 L 452,139.46875 L 448.5625,139.46875 L 444.9375,137.375 L 442.0625,137.1875 L 442.0625,136.40625 L 437.65625,133.75 L 432.6875,131.625 L 430.1875,131.625 L 429.25,128.96875 L 425.40625,124.15625 L 421.59375,124.15625 L 420.0625,122.0625 L 417,122.0625 L 417.1875,119 L 413.15625,116.5 L 413.34375,114.03125 L 415.46875,114.03125 L 415.46875,111.90625 L 416.21875,110.375 L 414.5,108.65625 L 416.03125,106 L 414.875,102.9375 L 413.9375,102.15625 L 411.4375,96.8125 L 412.40625,95.28125 C 412.40625,95.28125 412.32712,94.02401 412.25,92.34375 L 409.625,92.34375 L 406.09375,88.4375 L 401.59375,88.4375 z ",name:"Meurthe et Moselle"},"fr-55":{path:"M 390.125,86.53125 L 388.75,88.78125 L 387,89.9375 L 385.625,88.59375 L 382.6875,88.59375 L 382.125,87.8125 L 380.15625,91.5 L 379.375,92.875 L 381.71875,95.8125 L 380.9375,99.71875 L 378.78125,101.46875 L 379,102.84375 L 379.75,104.78125 L 378.59375,105.96875 L 376.25,107.125 L 376.625,109.28125 L 377.625,109.46875 L 375.875,111.03125 L 377.21875,113.96875 L 378.59375,118.28125 L 376.84375,120.21875 L 379.96875,120.03125 L 378.40625,124.90625 L 376.25,125.875 L 375.0625,128.8125 L 376.25,129.78125 L 374.875,132.125 L 375.28125,133.6875 L 379,136.625 L 379.1875,143.46875 L 383.28125,144.0625 L 385.8125,146.78125 L 390.5,149.125 L 392.25,149.71875 L 396.375,154.21875 L 395.9375,154.65625 L 399.375,154.21875 L 399.375,152.5 L 403.21875,151.71875 L 403.21875,150.40625 L 404.15625,150.40625 L 404.15625,151.53125 L 407.21875,150.59375 L 408.40625,149 L 408.1875,149.0625 L 408.1875,146.375 L 406.28125,144.65625 L 406.28125,143.5 L 407.8125,142.75 L 409.53125,142.75 L 408.9375,141.78125 L 407.8125,141.78125 L 407.03125,140.0625 L 407.03125,136.625 L 406.28125,134.5 L 407.8125,131.0625 L 409.125,127.4375 L 407.59375,125.90625 L 407.40625,124.9375 L 408.375,123.59375 L 410.65625,123.59375 L 410.65625,122.625 L 408.75,121.6875 L 408.375,120.34375 L 410.28125,118.25 L 408.1875,116.3125 L 408.9375,114.78125 L 407.21875,114.03125 L 406.0625,113.0625 L 405.875,110.59375 L 405.6875,109.0625 L 404.9375,107.90625 L 405.125,105.40625 L 406.0625,104.25 L 406.0625,102.9375 L 405.125,102.15625 L 405.125,100.4375 L 404.53125,98.71875 L 403.78125,97.1875 L 402.0625,95.84375 L 398.8125,96.8125 L 396.875,97 L 395.9375,98.71875 L 394.96875,99.46875 L 394.78125,98.71875 L 395.15625,97.375 L 395.5625,96.21875 L 394.40625,94.3125 L 394.53125,91.96875 L 393.59375,91.96875 L 392.8125,88.25 L 391.25,86.6875 L 390.125,86.53125 z ",name:"Meuse"},"fr-56":{path:"M 56,160.59375 L 52.75,162.15625 L 50.46875,162.15625 L 48.0625,164.09375 L 48.21875,165.53125 L 49.65625,169.25 L 50.46875,172.15625 L 55.46875,172.96875 L 57.90625,174.90625 L 58.875,173.75 L 60.46875,175.875 L 59.65625,176.84375 L 59.5,179.71875 L 58.0625,179.71875 L 56.9375,181.5 L 54.65625,181.5 L 53.71875,185.34375 L 55.90625,188.84375 L 59.03125,189.625 L 60.1875,187.875 L 59.625,190 L 62.34375,191.1875 L 65.875,194.6875 L 67.03125,196.84375 L 66.65625,199.375 L 66.25,201.9375 L 68.59375,203.6875 L 69.78125,202.3125 L 68.59375,200.75 L 68.59375,197.25 L 70.9375,197.8125 L 71.71875,195.46875 L 72.3125,196.84375 L 74.84375,199 L 76.03125,197.03125 L 74.84375,194.3125 L 77,197.25 L 79.71875,196.84375 L 79.15625,195.46875 L 81.6875,196.0625 L 83.625,198.40625 L 82.65625,199.96875 L 80.125,199.1875 L 77.1875,197.8125 L 75.625,199.78125 L 77.96875,200.5625 L 79.71875,203.28125 L 90.28125,202.3125 L 93,202.90625 L 91.65625,204.0625 L 91.84375,205.84375 L 92.21875,206.125 L 93.0625,205.96875 L 94.8125,204.21875 L 95.96875,205.5625 L 99.09375,205.5625 L 102.8125,203.625 L 108.28125,201.46875 L 108.46875,196 L 109.625,195.375 L 107.5625,191.5 L 109.34375,190.0625 L 109.03125,189.09375 L 107.90625,188.4375 L 109.65625,187.625 L 111.28125,185.6875 L 111.125,183.75 L 109.03125,183.75 L 108.53125,181.84375 L 110,179.90625 L 108.375,177 L 105.96875,175.53125 L 103.21875,175.53125 L 102.25,175.21875 L 102.25,173.9375 L 103.6875,172.625 L 104.5,169.40625 L 104.03125,167.3125 L 103.375,168.125 L 99.5,167.8125 L 97.71875,164.5625 L 96.28125,164.5625 L 94.03125,165.375 L 94.03125,167.46875 L 90.96875,169.40625 L 88.53125,168.4375 L 87.5625,166.34375 L 86.78125,167.46875 L 84.5,167.46875 L 83.375,166.03125 L 82.25,166.03125 L 79.84375,163.59375 L 77.09375,164.25 L 74.1875,161.65625 L 71.59375,161.84375 L 70.8125,163.4375 L 67.75,165.0625 L 64.03125,163.4375 L 63.0625,162.46875 L 61.4375,163.59375 L 59.5,163.4375 L 59.1875,161.84375 L 56.125,161.03125 L 56,160.59375 z ",name:"Morbihan"},"fr-57":{path:"M 423.09375,90.40625 L 420.15625,90.59375 L 417.8125,92.5625 L 417.21875,93.53125 L 413.90625,93.53125 L 412.75,92.34375 L 412.25,92.34375 C 412.32712,94.02401 412.40625,95.28125 412.40625,95.28125 L 411.4375,96.8125 L 413.9375,102.15625 L 414.875,102.9375 L 416.03125,106 L 414.5,108.65625 L 416.21875,110.375 L 415.46875,111.90625 L 415.46875,114.03125 L 413.34375,114.03125 L 413.15625,116.5 L 417.1875,119 L 417,122.0625 L 420.0625,122.0625 L 421.59375,124.15625 L 425.40625,124.15625 L 429.25,128.96875 L 430.1875,131.625 L 432.6875,131.625 L 437.65625,133.75 L 442.0625,136.40625 L 442.0625,137.1875 L 444.9375,137.375 L 448.5625,139.46875 L 452,139.46875 L 454.875,141.59375 L 458.125,143.875 L 460.4375,144.625 L 463.9375,141.125 L 465.125,137.03125 L 463.5625,135.46875 L 463.375,134.09375 L 465.6875,129.78125 L 460.25,126.65625 L 457.125,129 L 455.34375,127.84375 L 456.125,126.09375 L 454.1875,124.71875 L 451.625,123.53125 L 451.625,121 L 454.1875,120.21875 L 455.15625,115.71875 L 456.90625,113.78125 L 457.6875,116.71875 L 459.84375,117.6875 L 463.5625,118.28125 L 465.5,120.21875 L 467.84375,120.21875 L 469.8125,118.84375 L 472.34375,120.625 L 473.71875,120.625 L 475.28125,119.25 L 475.28125,116.3125 L 477,113.3125 L 476.59375,113.4375 L 475.25,111.5 L 471.34375,109.15625 L 469.96875,107 L 465.28125,107.40625 L 462.53125,109.9375 L 455.90625,110.125 L 453.9375,108.75 C 453.80551,108.51057 452.84437,106.81438 452,106.34375 C 451.96729,106.32639 451.91355,106.29802 451.875,106.28125 C 451.84646,106.26959 451.80512,106.25698 451.78125,106.25 C 451.77058,106.24458 451.73002,106.22452 451.71875,106.21875 C 451.71591,106.21876 451.69093,106.21861 451.6875,106.21875 C 451.66248,106.21745 451.61378,106.21875 451.59375,106.21875 C 450.67823,106.21876 448.90565,105.19125 448.6875,105.0625 L 445.9375,106.21875 L 445.75,108.5625 L 442.4375,108.96875 L 440.46875,105.25 L 439.3125,104.84375 L 439.3125,102.125 L 436.5625,100.9375 L 436.375,96.25 L 434.40625,94.3125 L 430.3125,92.34375 L 428.375,92.34375 L 427.78125,92.75 L 425.8125,92.75 L 423.09375,90.40625 z ",name:"Moselle"},"fr-58":{path:"M 306.75,203.78125 L 305.78125,205.3125 L 303.9375,205.3125 L 301.46875,204.75 L 298.71875,205.5625 L 298.90625,207.53125 L 301.25,210.25 L 301.25,213.96875 L 299.5,216.5 L 300.0625,218.84375 L 303.59375,221.59375 L 303.78125,224.3125 L 305.75,228.4375 L 305.34375,233.125 L 307.5,235.25 L 306.90625,240.34375 L 306.71875,242.875 L 307.6875,244.625 L 306.1875,249.40625 L 306.3125,250.875 L 309.65625,252.4375 L 312,255 L 314.125,253.8125 L 316.09375,252.65625 L 316.5,254.40625 L 319.40625,254.40625 L 320.1875,252.84375 L 321.9375,253.625 L 322.53125,256.15625 L 324.09375,255.78125 L 327.8125,250.6875 L 329.75,252.0625 L 330.0625,252.65625 L 333.125,250.75 L 334.375,250.90625 L 335.34375,253.28125 L 337.1875,253 L 338.59375,251.59375 L 340.40625,251.59375 L 341.8125,249.78125 L 343.21875,249.5 L 343.5,248.5 L 346.5625,248.65625 L 346.71875,247.9375 L 345.3125,246.6875 L 345.3125,245.4375 L 347.28125,244.3125 L 347.28125,243.46875 L 345.4375,242.34375 L 345.15625,240.25 L 345.3125,238.28125 L 344.0625,237.4375 L 345.15625,235.90625 L 346.15625,235.34375 L 346.84375,233.65625 L 345.875,233.09375 L 344.75,231.40625 L 346.15625,229.4375 L 348.53125,228.03125 L 351.46875,228.03125 L 351.46875,225.8125 L 352.3125,225.53125 L 352.3125,224.6875 L 351.0625,222.71875 L 348.25,222.15625 L 347.28125,220.46875 L 347.6875,218.9375 L 347.96875,216.8125 L 347.46875,215.6875 L 344.34375,217.8125 L 343.0625,218.375 L 341.375,217.25 L 341.53125,214.4375 L 339.6875,214.4375 L 338.15625,215.4375 L 337.75,214.15625 L 338.59375,212.75 L 337.59375,211.5 L 336.46875,213.1875 L 336.625,214.4375 L 333.96875,214.3125 L 329.75,210.375 L 326.53125,210.25 L 326.53125,208.125 L 324.28125,206.71875 L 323.84375,204.90625 L 323.15625,204.78125 L 323.15625,208.28125 L 321.90625,208.5625 L 320.0625,208 L 318.125,209.25 L 317,209.53125 L 315.875,208.5625 L 314.75,209.125 L 312.21875,207.4375 L 310.40625,207.4375 L 309.125,206.59375 L 309.40625,205.03125 L 308,203.78125 L 306.75,203.78125 z ",name:"Nièvre"},"fr-59":{path:"M 285.78125,4.0625 L 279.53125,7 L 269.78125,8.5625 L 269.25,8.65625 L 272.96875,14.5625 L 275.5625,21.125 L 279.90625,21.3125 L 281.6875,22.6875 L 279.53125,23.6875 L 279.53125,26.0625 L 282.28125,29.03125 L 287.25,30.25 L 293.40625,30.625 L 294.78125,28.4375 L 296.78125,28.4375 L 297.75,30.4375 L 295.1875,32.03125 L 295.59375,36 L 299.15625,36.96875 L 302.71875,37.375 L 303.71875,39.9375 L 305.5,40.75 L 305.09375,42.125 L 302.53125,43.3125 L 302.3125,44.5 L 304.3125,46.90625 L 305.6875,47.875 L 305.3125,49.0625 L 303.71875,50.25 L 304.3125,50.65625 L 306.875,50.84375 L 309.0625,52.25 L 308.875,54.03125 L 307.6875,54.8125 L 307.46875,58 L 305.6875,58.1875 L 303.90625,58 L 301.9375,59.1875 L 303.125,59.59375 L 305.09375,59.59375 L 306.875,59.96875 L 307.46875,60.96875 L 306.3125,63.1875 L 307.875,64.75 L 309.4375,65.15625 L 311,64.15625 L 313.15625,64.15625 L 313.75,65.34375 L 314.53125,65.15625 L 316.875,63.78125 L 319.21875,65.15625 L 322.34375,63 L 323.71875,63 L 325.28125,64.375 L 328.40625,62.21875 L 329.75,62.40625 L 330.9375,63.375 L 335.25,63.78125 L 335.625,65.53125 L 337.78125,63.59375 L 338.9375,63.59375 L 339.71875,66.125 L 343.4375,67.09375 L 344.5,66.375 L 344.1875,66.375 L 344,64.4375 L 347.90625,62.09375 L 347.3125,58.375 L 343.59375,57.40625 L 344.5625,56.40625 L 344.5625,53.6875 L 347.5,51.53125 L 346.71875,49.96875 L 340.46875,45.09375 L 329.53125,45.6875 L 328.375,47.625 L 327,47.625 L 327.1875,40.78125 L 324.0625,37.09375 L 321.71875,37.46875 L 320.34375,35.90625 L 316.4375,37.65625 L 315.09375,36.3125 L 312.34375,35.90625 L 311.5625,33.375 L 311.375,25.5625 L 309.625,24.78125 L 309.40625,23.59375 L 308.25,23.59375 L 307.84375,21.25 L 305.3125,21.46875 L 300.4375,23.03125 L 298.09375,25.9375 L 295.75,25.9375 L 294.1875,24 L 293.59375,21.84375 L 291.65625,19.6875 L 288.90625,19.6875 L 287.75,17.5625 L 287.75,14.21875 L 289.09375,12.09375 L 288.3125,9.15625 L 285.78125,4.0625 z ",name:"Nord"},"fr-60":{path:"M 257.21875,80.21875 L 255.9375,81.75 L 255.15625,83.6875 L 256.71875,83.6875 L 255.9375,85.65625 L 255.15625,89.5625 L 256.3125,91.5 L 256.3125,94.84375 L 258.28125,94.84375 L 257.5,96.1875 L 256.125,98.75 L 255.5625,100.5 L 257.3125,102.0625 L 257.875,106.5625 L 258.875,108.125 L 257.5,108.5 L 255.75,107.53125 L 255.4375,109.84375 L 255.5625,109.6875 L 256.3125,111.4375 L 257.5,113.375 L 262.78125,113.78125 L 266.5,113.375 L 269.03125,111.4375 L 272.15625,113.375 L 273.71875,114.5625 L 276.0625,113.96875 L 278.1875,113 L 282.3125,115.15625 L 286.59375,117.6875 L 287.96875,119.0625 L 290.3125,117.5 L 292.25,118.65625 L 293.4375,119.625 L 295.1875,119.4375 L 296.375,117.875 L 299.09375,119.4375 L 302.4375,118.0625 L 304.375,118.65625 L 306.3125,117.09375 L 307.5,116.5 L 307.875,116.78125 L 308.28125,114.125 L 306.875,112.53125 L 304.5,110.9375 L 303.5,112.53125 L 302.90625,112.71875 L 302.71875,109.75 L 304.5,109.34375 L 304.09375,106.59375 L 301.71875,106.1875 L 302.90625,104.1875 L 306.28125,103.40625 L 307.46875,98.65625 L 309.25,97.84375 L 306.875,96.0625 L 307.6875,94.28125 L 308.0625,88.34375 L 307.25,83.75 L 303.125,84.15625 L 300.34375,83.78125 L 295.1875,85.15625 L 290.8125,89.3125 L 287.25,88.125 L 283.6875,87.75 L 280.90625,84.96875 L 275.9375,83.5625 L 269.21875,84.15625 L 267.4375,82.78125 L 263.84375,82.78125 L 261.28125,83.78125 L 260.09375,82.96875 L 260.09375,80.8125 L 259.6875,80.21875 L 257.21875,80.21875 z ",
name:"Oise"},"fr-61":{path:"M 206.84375,124.65625 L 202.875,125.53125 L 201.59375,124.75 L 197.875,125.375 L 197.71875,126.84375 L 196.4375,127.15625 L 195.96875,125.0625 L 194.34375,125.375 L 191.90625,128.125 L 188.21875,130.875 L 184.1875,132.15625 L 180.96875,130.375 L 177.25,131.03125 L 175,128.78125 L 172.875,129.5625 L 169.34375,132 L 165.3125,130.875 L 162.40625,134.25 L 158.46875,135.4375 L 160.625,136.84375 L 162.5625,138.78125 L 162.09375,140.6875 L 162.40625,142.3125 L 161.28125,146.03125 L 157.9375,148.875 L 159.25,151.09375 L 161.40625,152.65625 L 164.34375,150.6875 L 166.28125,152.0625 L 171.5625,148.9375 L 176.84375,149.71875 L 179.75,148.53125 L 180.5625,146.59375 L 182.5,146.40625 L 184.25,147.96875 L 185.03125,152.25 L 187.5625,153.21875 L 188.5625,156.75 L 191.875,156.9375 L 197.15625,152.0625 L 202.4375,151.875 L 204,154 L 204.96875,161.03125 L 208.28125,162.21875 L 210.25,165.15625 L 214.34375,165.15625 L 214.53125,166.5 L 214.71875,164.5625 L 215.5,164.5625 L 218.25,168.65625 L 220.375,169 L 220.375,164.375 L 219.03125,162.59375 L 218.625,161.03125 L 221.5625,159.28125 L 224.5,158.6875 L 226.4375,156.34375 L 226.0625,149.125 L 221.9375,145.625 L 221.75,142.28125 L 218.25,139.9375 L 219.625,138 L 218.8125,135.0625 L 216.09375,134.09375 L 214.125,132.125 L 212.96875,129.40625 L 207.5,129.21875 L 205.9375,127.25 L 206.84375,124.65625 z ",name:"Orne"},"fr-62":{path:"M 269.25,8.65625 L 258.4375,10.71875 L 249.84375,17.34375 L 249.84375,43.71875 L 249.78125,44.5 L 252.8125,45.21875 L 253.78125,47.375 L 256.125,46.78125 L 257.5,45.03125 L 259.25,45.625 L 262.96875,48.53125 L 264.34375,47.96875 L 265.3125,50.3125 L 268.8125,51.875 L 268.8125,53.8125 L 271.375,54.78125 L 273.90625,53.8125 L 278.78125,53.21875 L 279.96875,54.21875 L 282.3125,53.21875 L 283.46875,55.1875 L 280.5625,57.125 L 280.5625,59.875 L 281.53125,60.84375 L 282.3125,60.65625 L 282.875,59.09375 L 284.65625,57.90625 L 286.40625,59.28125 L 290.5,60.65625 L 292.25,60.65625 L 292.25,58.6875 L 294.8125,60.46875 L 295,62.03125 L 293.8125,63.78125 L 295.96875,62.59375 L 297.75,61.8125 L 298.5,63.1875 L 298.5,64.5625 L 301.4375,63 L 306.125,63 L 306.3125,63.1875 L 307.46875,60.96875 L 306.875,59.96875 L 305.09375,59.59375 L 303.125,59.59375 L 301.9375,59.1875 L 303.90625,58 L 305.6875,58.1875 L 307.46875,58 L 307.6875,54.8125 L 308.875,54.03125 L 309.0625,52.25 L 306.875,50.84375 L 304.3125,50.65625 L 303.71875,50.25 L 305.3125,49.0625 L 305.6875,47.875 L 304.3125,46.90625 L 302.3125,44.5 L 302.53125,43.3125 L 305.09375,42.125 L 305.5,40.75 L 303.71875,39.9375 L 302.71875,37.375 L 299.15625,36.96875 L 295.59375,36 L 295.1875,32.03125 L 297.75,30.4375 L 296.78125,28.4375 L 294.78125,28.4375 L 293.40625,30.625 L 287.25,30.25 L 282.28125,29.03125 L 279.53125,26.0625 L 279.53125,23.6875 L 281.6875,22.6875 L 279.90625,21.3125 L 275.5625,21.125 L 272.96875,14.5625 L 269.25,8.65625 z ",name:"Pas de Calais"},"fr-63":{path:"M 299.09375,279.5 L 296.4375,282.5 L 296.25,281.4375 L 294.125,281.625 L 294.125,283.21875 L 292.90625,283.5625 L 291.65625,286.5625 L 290.0625,287.28125 L 287.09375,284.96875 L 287.375,289.5625 L 288.9375,291.5 L 289.71875,295.21875 L 287.375,296.96875 L 286.8125,299.71875 L 284.65625,300.875 L 280.9375,303.03125 L 281.3125,304.78125 L 285.8125,309.28125 L 286.21875,312.03125 L 284.4375,314.9375 L 284.4375,317.6875 L 285.625,319.0625 L 286.21875,322.375 L 285.84375,323.71875 L 291.84375,325.46875 L 293.4375,328.8125 L 296.59375,328.8125 L 297.84375,327.59375 L 299.96875,328.65625 L 301.03125,328.8125 L 303.6875,332.875 L 306.5,333.0625 L 307.21875,331.65625 L 308,331.75 L 308.8125,330.59375 L 312.34375,330.0625 L 314.28125,328.46875 L 316.40625,328.28125 L 316.40625,327.0625 L 317.8125,326.34375 L 318.1875,327.21875 L 319.0625,326.6875 L 320.46875,327.59375 L 322.9375,327.40625 L 325.0625,326.53125 L 326.46875,327.75 L 328.0625,327.75 L 329.3125,330.0625 L 331.25,330.9375 L 332.3125,328.46875 L 333.71875,329.71875 L 336.75,329.875 L 337.8125,327.75 L 339.5625,329.53125 L 342.03125,330.25 L 342.8125,329.5 L 341.28125,329 L 340.6875,326.65625 L 344.40625,323.15625 L 342.65625,316.71875 L 337.5625,313.375 L 335.4375,308.3125 L 333.09375,305.1875 L 333.6875,300.875 L 335.4375,299.125 L 332.3125,296.59375 L 332.40625,295.8125 L 329.65625,294.71875 L 328.78125,292.59375 L 325.78125,292.75 L 323.46875,292.21875 L 323.125,289.75 L 321.34375,288.875 L 319.0625,290.28125 L 316.40625,289.75 L 314.625,289.9375 L 308.625,289.0625 L 303.6875,286.21875 L 303.3125,284.8125 L 301.21875,282.5 L 302.625,280.5625 L 302.09375,279.5 L 299.09375,279.5 z ",name:"Puy de Dôme"},"fr-64":{path:"M 172.15625,428.875 L 169.34375,430.46875 L 163.6875,430.28125 L 163.15625,429.40625 L 159.4375,430.65625 L 156.59375,431.53125 L 154.46875,429.9375 L 152.1875,430.65625 L 151.46875,429.75 L 148.65625,429.75 L 146.875,430.65625 L 142.28125,430.46875 L 139.8125,432.40625 L 135.375,432.0625 L 134.5,433.3125 L 133.4375,432.9375 L 134.84375,431.53125 L 132.375,429.59375 L 129.375,432.25 L 124.25,432.59375 L 118.625,429.78125 L 117.8125,431.21875 L 113.3125,436.6875 L 109.8125,438.0625 L 107.28125,438.4375 L 107.28125,440.59375 L 109.625,442.75 L 113.125,442.9375 L 113.3125,445.46875 L 116.0625,445.6875 L 116.84375,443.90625 L 120.5625,445.46875 L 122.90625,446.0625 L 123.46875,448.40625 L 122.125,449.59375 L 122.125,453.28125 L 119.375,454.65625 L 119.1875,456.40625 L 120.9375,458.375 L 124.0625,459.34375 L 124.65625,456.40625 L 126.40625,454.46875 L 126.21875,457 L 127.59375,458.96875 L 131.09375,458.96875 L 132.65625,461.09375 L 137.34375,461.875 L 141.84375,464.625 L 149.25,464.625 L 149.65625,468.71875 L 154.71875,472.625 L 156.6875,474.96875 L 158.84375,473.8125 L 160.78125,473.40625 L 161.75,474.375 L 163.53125,473.40625 L 166.9375,471.53125 L 167.25,467.5 L 168.8125,466.3125 L 169.625,459.875 L 172.53125,460.46875 L 173.71875,459.6875 L 172.34375,456.9375 L 177.625,452.4375 L 180.75,445.40625 L 182.6875,442.875 L 180.34375,439.375 L 178.78125,437.03125 L 180.9375,435.0625 L 177.625,429.59375 L 172.34375,429.21875 L 172.15625,428.875 z ",name:"Pyrénées Atlantiques"},"fr-65":{path:"M 179.21875,428.53125 L 177.28125,429.5625 L 177.625,429.59375 L 180.9375,435.0625 L 178.78125,437.03125 L 180.34375,439.375 L 182.6875,442.875 L 180.75,445.40625 L 177.625,452.4375 L 172.34375,456.9375 L 173.71875,459.6875 L 172.53125,460.46875 L 169.625,459.875 L 168.8125,466.3125 L 167.25,467.5 L 166.9375,471.53125 L 167.4375,471.25 L 170.75,473.21875 L 174.65625,476.15625 L 175.03125,478.5 L 178.15625,481.03125 L 180.71875,481.03125 L 187.15625,478.28125 L 189.875,481.40625 L 193.59375,482.40625 L 194.96875,480.0625 L 196.71875,480.84375 L 200.5,481.09375 L 200.25,470.59375 L 202.21875,470.59375 L 203.96875,471.46875 L 205.21875,470.25 L 205.03125,468.3125 L 207.5,466.875 L 206.625,463.1875 L 205.5625,462.28125 L 203.4375,463 L 204.5,461.21875 L 203.96875,458.9375 L 200.78125,456.625 L 200.96875,455.03125 L 202.75,452.03125 L 205.03125,451.15625 L 205.03125,449.90625 L 206.4375,447.78125 L 207.375,446.46875 L 203.8125,444.625 L 199.03125,444.625 L 198.3125,443.1875 L 195.84375,443.1875 L 195.125,441.59375 L 192.84375,441.59375 L 192.125,442.3125 L 189.46875,442.3125 L 189.3125,440.71875 L 187.1875,439.3125 L 187.90625,438.59375 L 188.25,436.84375 L 187.71875,436.3125 L 186.65625,433.46875 L 184.34375,433.125 L 182.0625,431.875 L 182.21875,428.53125 L 179.21875,428.53125 z ",name:"Hautes Pyrénées"},"fr-66":{path:"M 300.5,468.65625 L 296.25,470.9375 L 296.59375,473.4375 L 278.0625,473.4375 L 278.21875,476.78125 L 280.15625,479.625 L 272.21875,483.5 L 271.375,483 L 264.84375,483.46875 L 264.03125,485.125 L 260.71875,485.96875 L 258.5,487.90625 L 252.4375,489.3125 L 252.78125,491.375 L 255.71875,494.125 L 261.5625,495.6875 L 261.75,499.1875 L 264.875,501.9375 L 267.21875,501.53125 L 270.5625,497.4375 L 274.65625,496.65625 L 281.09375,498.8125 L 286.5625,503.5 L 288.125,501.53125 L 289.5,501.53125 L 290.875,502.5 L 292.03125,501.9375 L 292.21875,499.1875 L 298.09375,497.8125 L 300.03125,495.28125 L 302.96875,494.3125 L 307.0625,494.3125 L 309.625,497.03125 L 312.75,497.25 L 312.75,494.125 L 311.1875,491.96875 L 308.4375,490.78125 L 308,473.71875 L 305.4375,472.53125 L 300.5,468.65625 z ",name:"Pyrénées Orientales"},"fr-67":{path:"M 480.71875,112.28125 L 477,113.3125 L 475.28125,116.3125 L 475.28125,119.25 L 473.71875,120.625 L 472.34375,120.625 L 469.8125,118.84375 L 467.84375,120.21875 L 465.5,120.21875 L 463.5625,118.28125 L 459.84375,117.6875 L 457.6875,116.71875 L 456.90625,113.78125 L 455.15625,115.71875 L 454.1875,120.21875 L 451.625,121 L 451.625,123.53125 L 454.1875,124.71875 L 456.125,126.09375 L 455.34375,127.84375 L 457.125,129 L 460.25,126.65625 L 465.6875,129.78125 L 463.375,134.09375 L 463.5625,135.46875 L 465.125,137.03125 L 463.9375,141.125 L 460.03125,145.03125 L 457.875,144.84375 L 459.25,146.1875 L 458.46875,149.71875 L 459.25,155 L 462.96875,155.96875 L 462.65625,156.6875 L 465.59375,156.53125 L 467.3125,158.625 L 468.84375,160.53125 L 472.6875,160.34375 L 474.40625,165.3125 L 477.40625,166.625 L 477.375,166 L 482.46875,156.03125 L 481.875,150.375 L 484.21875,142.75 L 484.8125,136.09375 L 489.875,132.40625 L 489.875,130.0625 L 491.84375,127.5 L 493.40625,127.5 L 495.15625,125.75 L 494.78125,122.4375 L 496.53125,117.75 L 499.25,117.15625 L 496.53125,115 L 491.65625,114.4375 L 487.34375,112.28125 L 484.40625,114.03125 L 482.84375,112.28125 L 480.71875,112.28125 z ",name:"Bas-Rhin"},"fr-68":{path:"M 465.59375,156.53125 L 462.65625,156.6875 L 460.8125,160.84375 L 458.46875,165.53125 L 459.0625,168.46875 L 457.125,172.96875 L 453.78125,175.875 L 453.59375,183.5 L 451.15625,185.59375 L 451.25,185.65625 L 452.03125,187.21875 L 455.15625,187.40625 L 458.6875,190.15625 L 459.25,191.5 L 459.0625,193.84375 L 458.09375,195.625 L 458.46875,197.96875 L 461.21875,197.5625 L 461.8125,199.71875 L 462.78125,203.875 L 465.09375,203.5 L 464.6875,205.625 L 466.0625,206.8125 L 473.28125,206.625 L 477,203.6875 L 477.1875,199.375 L 479.15625,196.84375 L 476.59375,193.90625 L 475.25,190.78125 L 476.8125,188.65625 L 476.8125,183.75 L 477.78125,181.40625 L 477.78125,177.5 L 479.53125,174.96875 L 477.59375,172.25 L 477.40625,166.625 L 474.40625,165.3125 L 472.6875,160.34375 L 468.84375,160.53125 L 467.3125,158.625 L 465.59375,156.53125 z ",name:"Haut Rhin"},"fr-69":{path:"M 371.75,275.3125 L 369.625,275.5 L 367.84375,277.25 L 366.6875,275.6875 L 364.9375,277.25 L 362.5625,275.6875 L 360.625,275.6875 L 359.84375,276.28125 L 359.4375,278.53125 L 360.5,279.375 L 360.5,281.28125 L 361.78125,283.40625 L 360.71875,284.6875 L 356.6875,284.6875 L 356.46875,288.5 L 355.1875,289.78125 L 356.03125,292.96875 L 356.03125,294.875 L 357.75,296.5625 L 357.75,298.90625 L 360.28125,301.25 L 360.28125,304 L 359.03125,305.90625 L 360.5,306.78125 L 360.5,308.25 L 359.21875,309.3125 L 359.21875,311.03125 L 364.75,316.125 L 371.34375,317.1875 L 371.96875,319.09375 L 369.84375,321.625 L 371.5625,322.6875 L 373.6875,321.84375 L 375.96875,322.1875 L 380.0625,320.15625 L 379.40625,318.875 L 376.65625,316.125 L 380.90625,314.625 L 386.4375,313.34375 L 390.6875,307.84375 L 387.90625,305.5 L 388.0625,303.46875 L 384.09375,302.3125 L 381.53125,303.15625 L 381.125,299.75 L 378.78125,297.625 L 377.28125,297.40625 L 373.46875,295.09375 L 374.09375,293.59375 L 374.09375,287 L 375.15625,285.53125 L 375.53125,280.96875 L 374.875,282.53125 L 373.5,282.34375 L 372.75,278.4375 L 371.75,275.3125 z ",name:"Rhône"},"fr-70":{path:"M 423.5,175.5 L 419.8125,176.09375 L 419.21875,178.03125 L 417.25,179.40625 L 415.90625,177.84375 L 414.9375,178.4375 L 415.6875,179.59375 L 413.75,180.78125 L 414.34375,182.34375 L 412.1875,183.125 L 412.1875,185.65625 L 409.4375,185.65625 L 409.25,187.21875 L 406.53125,187.8125 L 406.71875,190.15625 L 408.46875,190.34375 L 407.5,191.5 L 406.90625,195.40625 L 405.15625,195.40625 L 402.21875,196.59375 L 399.09375,195.40625 L 396.375,196.59375 L 396.375,198.5625 L 398.5,198.9375 L 400.0625,202.0625 L 400.28125,203.625 L 397.75,206.5625 L 396.5625,206.9375 L 395.78125,207.90625 L 397.9375,208.90625 L 398.3125,212.03125 L 400.0625,212.21875 L 400.28125,216.125 L 401.0625,216.90625 L 401.15625,217.53125 L 402.65625,217.9375 L 404.34375,219.34375 L 406.875,219.34375 L 407.84375,218.375 L 409.5625,218.4375 L 411.34375,218.5 L 415.28125,215.28125 L 416.40625,215.28125 L 417.65625,214.3125 L 421.71875,214.4375 L 424.8125,211.90625 L 427.0625,211.5 L 427.90625,209.40625 L 429.71875,208.84375 L 431.53125,205.75 L 434.0625,203.78125 L 436.71875,203.375 L 438.6875,204.78125 L 442.34375,204.34375 L 442.34375,202.375 L 443.8125,201.53125 L 444.96875,199.9375 L 447.21875,199.9375 L 448.46875,198.625 L 448.9375,195.5 L 448.9375,193.5625 L 448.09375,190.59375 L 448.09375,188.09375 L 449.625,186.96875 L 451.4375,186.03125 L 451.25,185.65625 L 445,182.34375 L 443.25,180.375 L 441.5,179.21875 L 439.9375,180 L 439.71875,181.15625 L 438.15625,182.125 L 437.1875,182.125 L 434.25,178.8125 L 430.15625,178.8125 L 428.40625,180.1875 L 426.84375,180.375 L 424.3125,178.4375 L 424.5,176.28125 L 423.5,175.5 z ",name:"Haute Saône"},"fr-71":{path:"M 351.46875,227.84375 L 351.46875,228.03125 L 348.53125,228.03125 L 346.15625,229.4375 L 344.75,231.40625 L 345.875,233.09375 L 346.84375,233.65625 L 346.15625,235.34375 L 345.15625,235.90625 L 344.0625,237.4375 L 345.3125,238.28125 L 345.15625,240.25 L 345.4375,242.34375 L 347.28125,243.46875 L 347.28125,244.3125 L 345.3125,245.4375 L 345.3125,246.6875 L 346.71875,247.9375 L 346.5625,248.65625 L 343.5,248.5 L 343.21875,249.5 L 341.8125,249.78125 L 340.40625,251.59375 L 338.59375,251.59375 L 337.1875,253 L 335.34375,253.28125 L 334.375,250.90625 L 333.125,250.75 L 330.0625,252.65625 L 333.6875,259.46875 L 333.6875,262.40625 L 334.65625,263.59375 L 337.96875,263.59375 L 339.125,265.15625 L 342.25,265.15625 L 343.625,267.09375 L 343.4375,274.71875 L 339.34375,277.84375 L 339.25,278.0625 L 339.53125,278.03125 L 340.125,278.21875 L 340.3125,281.34375 L 343.25,281.9375 L 343.625,283.3125 L 345.1875,283.3125 L 347.53125,281.9375 L 353.78125,282.90625 L 354.96875,284.09375 L 356.53125,282.53125 L 358.6875,282.53125 L 359.84375,276.28125 L 360.625,275.6875 L 362.5625,275.6875 L 364.9375,277.25 L 366.6875,275.6875 L 367.84375,277.25 L 369.625,275.5 L 371.75,275.3125 L 372.75,278.4375 L 373.5,282.34375 L 374.875,282.53125 L 376.0625,279.78125 L 379.75,265.34375 L 381.125,262.8125 L 383.28125,262.59375 L 385.4375,264.375 L 387,263.96875 L 388.9375,262.59375 L 390.90625,263 L 392.0625,265.53125 L 393.1875,265.96875 L 398.3125,265.34375 L 400.28125,263.78125 L 399.5,262.59375 L 397.15625,261.8125 L 396.9375,259.09375 L 398.90625,257.71875 L 399.6875,254.40625 L 397.9375,251.28125 L 396.75,249.71875 L 397.34375,249.125 L 397.34375,247.1875 L 395.78125,246.1875 L 395.375,244.625 L 399.875,244.0625 L 400.28125,242.5 L 398.90625,242.5 L 397.75,241.125 L 395.59375,241.125 L 393.8125,238.1875 L 392.25,238 L 392.4375,235.65625 L 390.75,235.46875 L 388.5,237 L 386.25,237.5625 L 384.71875,236.59375 L 382.75,236.46875 L 382.1875,237.28125 L 380.375,237.5625 L 376.3125,238.84375 L 370.40625,240.9375 L 368.15625,239.125 L 365.5,238.5625 L 365.375,236.1875 L 362.84375,234.34375 L 359.34375,231.6875 L 355.40625,231.8125 L 351.625,227.90625 L 351.46875,227.84375 z ",name:"Saône et Loire"},"fr-72":{path:"M 202.4375,151.875 L 197.15625,152.0625 L 191.875,156.9375 L 189.125,156.78125 L 185.46875,157.96875 L 184.34375,159.90625 L 183.84375,164.09375 L 184.1875,166.65625 L 181.28125,169.09375 L 180.46875,170.6875 L 181.125,172.15625 L 180.3125,174.09375 L 180.625,174.90625 L 177.40625,175.21875 L 176.9375,176.65625 L 178.375,180.21875 L 178.21875,181.1875 L 176.9375,182.3125 L 174.1875,182.46875 L 173.84375,183.4375 L 174.5,184.40625 L 174.5,190.21875 L 173.875,191.6875 L 175.625,193.125 L 175.625,195.0625 L 178.53125,195.21875 L 186.125,197.46875 L 194.34375,202.46875 L 197,203.5 L 198.3125,200.875 L 202.21875,203.625 L 204.375,203.625 L 203.1875,199.71875 L 205.5625,201.28125 L 206.90625,199.3125 L 212.5625,197.75 L 211.59375,195.40625 L 212.96875,193.65625 L 215.90625,192.5 L 218.625,188.96875 L 218.625,185.25 L 220.59375,185.25 L 221.375,182.53125 L 221.5625,178.4375 L 219.625,176.65625 L 221.1875,173.9375 L 223.5,171 L 220.78125,169.0625 L 218.25,168.65625 L 215.5,164.5625 L 214.71875,164.5625 L 214.53125,166.5 L 214.34375,165.15625 L 210.25,165.15625 L 208.28125,162.21875 L 204.96875,161.03125 L 204,154 L 202.4375,151.875 z ",name:"Sarthe"},"fr-73":{path:"M 417,293.8125 L 416.59375,299.53125 L 415.3125,300.59375 L 415.3125,306.96875 L 412.75,307.40625 L 412.34375,311.03125 L 410,312.71875 L 409.96875,312.6875 L 410.21875,313.78125 L 412.5625,316.3125 L 412.5625,318.03125 L 414.875,322.28125 L 419.78125,323.34375 L 421.46875,324.625 L 422.125,323.96875 L 421.25,322.28125 L 422.53125,319.5 L 424.03125,319.3125 L 426.5625,322.6875 L 427.625,321.21875 L 429.125,321.21875 L 433.15625,325.25 L 433.375,328 L 431.46875,329.0625 L 430.59375,333.09375 L 432.3125,334.8125 L 432.3125,336.5 L 431.875,338.21875 L 433.15625,336.9375 L 435.28125,338.21875 L 436.40625,339.75 L 439.9375,339.375 L 441.09375,340.53125 L 441.6875,343.28125 L 445.1875,342.875 L 445.59375,339.9375 L 447.34375,339.15625 L 451.09375,339.34375 L 451.03125,339.21875 L 456.875,336.875 L 459.03125,338.25 L 461.1875,338.25 L 461.375,335.90625 L 463.90625,334.53125 L 464.875,333.375 L 469.96875,331.40625 L 470.5625,328.09375 L 469.5625,326.53125 L 472.3125,321.84375 L 469.78125,320.875 L 469,318.125 L 463.71875,315 C 463.71875,315 464.03377,309.01275 463.53125,307.9375 C 463.51544,307.91055 463.48155,307.86019 463.46875,307.84375 C 463.46374,307.8383 463.44264,307.81713 463.4375,307.8125 C 463.43393,307.81272 463.4091,307.81243 463.40625,307.8125 C 463.4062,307.80552 463.40608,307.78312 463.40625,307.78125 C 463.40269,307.78137 463.37784,307.78121 463.375,307.78125 C 463.37209,307.7811 463.3467,307.78118 463.34375,307.78125 C 463.34022,307.78117 463.31534,307.78126 463.3125,307.78125 C 462.53125,307.97657 459.625,308.1875 459.625,308.1875 L 456.6875,304.84375 L 456.78125,301.625 L 455.46875,301.46875 L 453.96875,303.15625 L 452.0625,304.4375 L 452.5,303.375 L 450.5625,300.1875 L 447.375,300.1875 L 445.46875,297.84375 L 446.53125,296.5625 L 446.125,295.28125 L 444.625,294.875 L 442.71875,296.15625 L 441.21875,300.59375 L 439.3125,302.09375 L 438.46875,305.5 L 437.625,307.1875 L 434.21875,307.84375 L 433.15625,306.78125 L 430.1875,303.59375 L 428.46875,303.59375 L 427.84375,304.84375 L 424.4375,304.4375 L 422.96875,301.65625 L 419.125,301.03125 L 419.125,295.5 L 417,293.8125 z ",name:"Savoie"},"fr-74":{path:"M 446.125,266.1875 L 441.65625,266.96875 L 437.34375,270.46875 L 436.1875,268.71875 L 434.03125,268.90625 L 432.0625,273.21875 L 432.28125,274.96875 L 434.40625,276.71875 L 430.5,279.28125 L 427.96875,281.625 L 423.65625,281.625 L 421.6875,283.1875 L 419.78125,283.8125 L 418.71875,285.75 L 416.8125,284.6875 L 416.375,290.1875 L 417.4375,292.125 L 417.5,294.21875 L 419.125,295.5 L 419.125,301.03125 L 422.96875,301.65625 L 424.4375,304.4375 L 427.84375,304.84375 L 428.46875,303.59375 L 430.1875,303.59375 L 433.15625,306.78125 L 434.21875,307.84375 L 437.625,307.1875 L 438.46875,305.5 L 439.3125,302.09375 L 441.21875,300.59375 L 442.71875,296.15625 L 444.625,294.875 L 446.125,295.28125 L 446.53125,296.5625 L 445.46875,297.84375 L 447.375,300.1875 L 450.5625,300.1875 L 452.5,303.375 L 452.0625,304.4375 L 453.96875,303.15625 L 455.46875,301.46875 L 456.78125,301.625 L 456.875,298.21875 L 463.53125,295.46875 L 464.3125,293.53125 L 463.90625,289.21875 L 459.625,284.75 L 458.25,285.53125 L 458.25,283.75 L 458.25,280.84375 L 454.53125,279.0625 L 454.34375,277.5 L 456.5,275.15625 L 456.5,272.4375 L 452.96875,268.71875 L 452.78125,266.1875 L 446.125,266.1875 z ",name:"Haute Savoie"},"fr-75":{path:"M 280.28125,129.0625 L 277.75,129.09375 L 276.625,129.59375 L 276.15625,130.21875 L 275.125,130.28125 L 274.1875,131.34375 L 274.21875,131.9375 L 274.4375,132.625 L 276,133.0625 L 277.90625,134.03125 L 279.125,134.09375 L 279.9375,133.875 L 280.78125,133.28125 L 281.0625,133.53125 L 282.875,133.78125 L 283.1875,133.125 L 283.1875,132.46875 L 282.875,132.34375 L 281.625,132.40625 L 281.71875,132.71875 L 281.5,132.90625 L 281.09375,132.90625 L 281.25,132.5 L 281.3125,132.0625 L 281.25,132.0625 L 281.09375,130.3125 L 280.28125,129.0625 z ",name:"Paris"},"fr-76":{path:"M 241.9375,61.5 L 240.65625,63.0625 L 232.28125,69.5 L 217.4375,73.21875 L 207.65625,76.71875 L 199.65625,81.03125 L 194.96875,88.0625 L 194,93.53125 L 197.90625,96.46875 L 203.5625,97.625 L 202.65625,97.78125 L 202.6875,97.9375 L 207.0625,97.375 L 209.3125,94.96875 L 211,94.5625 L 212.9375,97.9375 L 215.625,97.65625 L 216.75,99.59375 L 221.5,99.3125 L 226.28125,102.6875 L 223.1875,103.65625 L 225.4375,105.34375 L 226.84375,105.34375 L 228.09375,108.03125 L 230.34375,108.03125 L 231.03125,106.34375 L 229.34375,105.21875 L 234.125,103.8125 L 239.15625,103.25 L 240.4375,99.59375 L 242.8125,97.5 L 247.3125,97.375 L 252.5,100.03125 L 255.59375,100.375 L 256.125,98.75 L 257.5,96.1875 L 258.28125,94.84375 L 256.3125,94.84375 L 256.3125,91.5 L 255.15625,89.5625 L 255.9375,85.65625 L 256.71875,83.6875 L 255.15625,83.6875 L 255.9375,81.75 L 257.875,79.40625 L 255.9375,75.875 L 255.34375,72.375 L 246.75,63.96875 L 245.78125,62.03125 L 243.625,62.21875 L 241.9375,61.5 z ",name:"Seine Maritime"},"fr-77":{path:"M 307.5,116.5 L 306.3125,117.09375 L 304.375,118.65625 L 302.4375,118.0625 L 299.09375,119.4375 L 296.375,117.875 L 295.1875,119.4375 L 293.4375,119.625 L 292.25,118.65625 L 290.3125,117.5 L 287.96875,119.0625 L 287.875,118.96875 L 287.03125,124.375 L 288.1875,131.25 L 288.1875,135.84375 L 286.65625,139.6875 L 287.03125,142.34375 L 285.3125,143.6875 L 286.25,148.875 L 285.5,150 L 284.9375,155.1875 L 286.25,156.90625 L 281.875,159.78125 L 281.875,163.71875 L 283.09375,165.53125 L 285.4375,166.71875 L 285.625,170.03125 L 282.5,172.1875 L 284.25,173.75 L 286.40625,172.375 L 291.6875,172.5625 L 293.625,172.1875 L 294.21875,170.625 L 296.375,170.8125 L 296.75,172.375 L 301.625,169.625 L 303.40625,167.5 L 305.75,164.75 L 304.1875,163 L 305.5625,160.0625 L 309.0625,158.3125 L 316.6875,158.6875 L 318.4375,157.34375 L 318.59375,157.5 L 319.03125,154.21875 L 319.8125,150.3125 L 321.1875,148.53125 L 321.375,146.1875 L 324.09375,145.03125 L 324.09375,143.46875 L 321.1875,143.65625 L 320.59375,142.28125 L 321.5625,140.53125 L 320.78125,137.59375 L 319.21875,136.625 L 319.625,133.90625 L 321.1875,132.90625 L 320.96875,131.75 L 321.53125,131.0625 L 318.25,130.375 L 317.25,128.03125 L 315.5,127.4375 L 310.25,122.375 L 309.65625,118.0625 L 307.5,116.5 z ",name:"Seine et Marne"},"fr-78":{path:"M 251.5,118.15625 L 251.4375,118.28125 L 245.96875,119.84375 L 245.1875,120.8125 L 246.1875,122.375 L 246.1875,123.9375 L 247.9375,124.3125 L 246.9375,125.3125 L 247.03125,126.1875 L 247.15625,126.09375 L 249.09375,128.03125 L 249.6875,130.375 L 251.25,131.9375 L 250.46875,134.09375 L 250.46875,136.03125 L 251.84375,137.59375 L 250.46875,139.9375 L 251.84375,143.28125 L 254.5625,145.21875 L 254.96875,147.375 L 257.3125,147.75 L 257.875,152.0625 L 259.65625,154.21875 L 262.8125,154.8125 L 263.28125,151.71875 L 264.625,150.1875 L 263.5,148.46875 L 266.34375,148.46875 L 268.28125,145.8125 L 266.9375,143.5 L 267.3125,141.40625 L 270.1875,140.0625 L 270.5625,137.9375 L 272.46875,137.1875 L 274.21875,136.40625 L 274.5625,136.625 L 274.5625,136.40625 L 272.8125,134.4375 L 271.71875,131.46875 L 273.46875,127.65625 L 272.59375,124.78125 L 269.1875,122.71875 L 264.375,122.5 L 259.875,119.625 L 256.25,120.28125 L 251.5,118.15625 z ",name:"Yvelines"},"fr-79":{path:"M 181.71875,229.40625 L 176.4375,229.59375 L 171.5625,230.5625 L 166.28125,230.96875 L 166.28125,233.6875 L 163.5625,235.46875 L 157.5,234.09375 L 153.40625,235.84375 L 155.34375,238.59375 L 155.34375,240.9375 L 160.03125,244.84375 L 158.875,247.375 L 162,250.875 L 160.625,252.65625 L 162.5625,255.5625 L 163.15625,261.03125 L 162,262.59375 L 163.375,264.9375 L 162,267.5 L 162.1875,269.0625 L 163.75,267.875 L 165.6875,269.84375 L 162.96875,271.59375 L 162,272.75 L 159.84375,273.34375 L 157.3125,274.53125 L 157.125,274.375 L 157.21875,277.25 L 159.34375,279.5625 L 159.34375,280.84375 L 162.53125,283.1875 L 166.5625,283.40625 L 169.3125,287 L 173.78125,286.59375 L 177.40625,289.125 L 180.15625,290.40625 L 180.59375,292.53125 L 182.125,294 L 183.96875,292.96875 L 183.5625,291.90625 L 185.03125,290.1875 L 185.03125,288.71875 L 187.59375,288.0625 L 191,286.375 L 194.59375,285.75 L 195.25,283.8125 L 192.25,282.96875 L 190.78125,280.625 L 191.84375,278.09375 L 193.125,276.59375 L 193.125,273.40625 L 191.84375,272.5625 L 190.15625,273.40625 L 190.15625,274.46875 L 189.28125,275.75 L 187.59375,273.84375 L 187.375,272.5625 L 188.03125,271.09375 L 186.53125,270.03125 L 186.53125,265.5625 L 185.6875,265.34375 L 185.6875,263.84375 L 186.96875,261.71875 L 187.15625,260.65625 L 188.03125,258.34375 L 187.375,256.84375 L 185.25,256 L 187.375,252.8125 L 188.03125,251.125 L 188.03125,250.0625 L 186.53125,248.34375 L 186.53125,247.71875 L 187.375,246.21875 L 186.75,245.15625 L 188.03125,243.6875 L 186.96875,241.34375 L 186.3125,237.9375 L 186.09375,235.8125 L 184.40625,236.03125 L 184.09375,231.21875 L 183.6875,231.9375 L 182.3125,230.78125 L 181.71875,229.40625 z ",name:"Deux Sèvres"},"fr-80":{path:"M 249.78125,44.5 L 249.25,50.9375 L 253.5625,54.84375 L 253.5625,56.8125 L 248.28125,53.6875 L 241.9375,61.5 L 243.625,62.21875 L 245.78125,62.03125 L 246.75,63.96875 L 255.34375,72.375 L 255.9375,75.875 L 257.875,79.40625 L 257.21875,80.21875 L 259.6875,80.21875 L 260.09375,80.8125 L 260.09375,82.96875 L 261.28125,83.78125 L 263.84375,82.78125 L 267.4375,82.78125 L 269.21875,84.15625 L 275.9375,83.5625 L 280.90625,84.96875 L 283.6875,87.75 L 287.25,88.125 L 290.8125,89.3125 L 295.1875,85.15625 L 300.34375,83.78125 L 303.125,84.15625 L 307.25,83.75 L 306.875,81.59375 L 305.90625,77.625 L 305.5,75.25 L 307.28125,73.25 L 307.28125,70.6875 L 309.84375,67.90625 L 309.375,65.15625 L 307.875,64.75 L 306.125,63 L 301.4375,63 L 298.5,64.5625 L 298.5,63.1875 L 297.75,61.8125 L 295.96875,62.59375 L 293.8125,63.78125 L 295,62.03125 L 294.8125,60.46875 L 292.25,58.6875 L 292.25,60.65625 L 290.5,60.65625 L 286.40625,59.28125 L 284.65625,57.90625 L 282.875,59.09375 L 282.3125,60.65625 L 281.53125,60.84375 L 280.5625,59.875 L 280.5625,57.125 L 283.46875,55.1875 L 282.3125,53.21875 L 279.96875,54.21875 L 278.78125,53.21875 L 273.90625,53.8125 L 271.375,54.78125 L 268.8125,53.8125 L 268.8125,51.875 L 265.3125,50.3125 L 264.34375,47.96875 L 262.96875,48.53125 L 259.25,45.625 L 257.5,45.03125 L 256.125,46.78125 L 253.78125,47.375 L 252.8125,45.21875 L 249.78125,44.5 z ",name:"Somme"},"fr-81":{path:"M 270.8125,396.875 L 267.4375,397.0625 L 265.15625,399.34375 L 264.4375,397.75 L 262.84375,398.65625 L 262.6875,398.28125 L 261.78125,399.1875 L 258.96875,400.25 L 256.65625,401.65625 L 250.65625,402.375 L 249.9375,405.375 L 252.25,405.375 L 249.9375,407.5 L 248.875,409.4375 L 245.53125,409.4375 L 247.28125,411.375 L 246.28125,413.03125 L 246.59375,413.15625 L 247.46875,415.78125 L 249.59375,418.28125 L 250.125,418.625 L 250.28125,421.09375 L 252.0625,423.9375 L 253.46875,425.53125 L 253.46875,427.46875 L 252.0625,428 L 253.125,429.59375 L 257.71875,431.53125 L 258.59375,432.78125 L 260.90625,435.59375 L 263.5625,436.3125 L 265.6875,435.9375 L 265.6875,438.4375 L 265.625,439.71875 L 266.78125,439.5625 L 266.5,440.9375 L 270.375,440.9375 L 273.96875,442.0625 L 274.25,438.46875 L 275.90625,438.46875 L 281.96875,439.5625 L 287.78125,439.5625 L 292.1875,438.1875 L 293.3125,434.59375 L 290.28125,431.8125 L 291.09375,429.0625 L 292.75,426.59375 L 295.5,428.5 L 302.6875,426.03125 L 303.8125,423.8125 L 300.15625,421.46875 L 298.5625,421.09375 L 297.5,422.5 L 295.375,423.03125 L 292,421.28125 L 288.46875,416.6875 L 288.46875,414.75 L 286.53125,411.1875 L 286.71875,409.59375 L 285.125,405.53125 L 282.125,404.125 L 280,400.40625 L 274.15625,399.34375 L 270.8125,396.875 z ",name:"Tarn"},"fr-82":{path:"M 220.1875,384.6875 L 218.8125,389.15625 L 220.96875,391.5 L 220,395.21875 L 218.8125,396.59375 L 219.625,398.9375 L 215.90625,399.71875 L 212.96875,400.5 L 213.75,403.21875 L 212.28125,403.65625 L 213.15625,404.46875 L 216,404.46875 L 217.40625,403.78125 L 218.65625,404.46875 L 216.34375,405.53125 L 216.34375,407.3125 L 214.21875,408.90625 L 214.21875,411.1875 L 218.125,411.375 L 219.34375,412.625 L 219.34375,415.09375 L 220.78125,416.5 L 219.53125,418.4375 L 220.0625,419.5 L 222.53125,418.4375 L 227.65625,418.4375 L 229.09375,417.5625 L 230.84375,417.5625 L 232.78125,419.875 L 237.21875,418.625 L 238.4375,416.6875 L 236.6875,415.78125 L 237.90625,415.28125 L 238.28125,413.5 L 240.21875,413.6875 L 241.28125,414.90625 L 242.15625,413.5 L 245,412.4375 L 246.28125,413.03125 L 247.28125,411.375 L 245.53125,409.4375 L 248.875,409.4375 L 249.9375,407.5 L 252.25,405.375 L 249.9375,405.375 L 250.65625,402.375 L 256.65625,401.65625 L 258.96875,400.25 L 261.78125,399.1875 L 262.6875,398.28125 L 261.59375,395.46875 L 263.1875,392.28125 L 260.375,392.09375 L 260.03125,387.6875 L 255.78125,389.625 L 252.9375,388.9375 L 251.1875,391.0625 L 248.1875,390.6875 L 247.65625,394.21875 L 246.21875,394.21875 L 245.34375,392.28125 L 244.8125,391.40625 L 243.21875,391.5625 L 240.21875,394.75 L 236.5,394.59375 L 235.96875,392.28125 L 235.96875,390.53125 L 235.625,390.15625 L 234.375,391.5625 L 232.78125,391.5625 L 231.03125,389.625 L 229.4375,389.625 L 228.375,387.5 L 229.78125,385.90625 L 229.625,384.875 L 227.125,384.96875 L 227.4375,385.65625 L 223.125,386.4375 L 220.1875,384.6875 z ",name:"Tarn et Garonne"},"fr-83":{path:"M 457.78125,413.1875 L 454.8125,413.3125 L 453.40625,414.75 L 448.09375,414.5625 L 443.5,417.90625 L 440.34375,415.78125 L 435.375,417.375 L 434.5,419.15625 L 430.96875,421.8125 L 424.59375,417.5625 L 419.4375,419.25 L 419.1875,420.625 L 419.28125,420.5625 L 422.46875,422.6875 L 418.21875,425.53125 L 416.46875,429.0625 L 418.59375,430.8125 L 418.40625,434.53125 L 421.78125,437.71875 L 420.875,438.4375 L 417,438.25 L 417,439.65625 L 418.75,440.53125 L 418.75,441.0625 L 417.15625,442.5 L 418.0625,443.5625 L 419.46875,443.5625 L 420.875,444.96875 L 421.0625,446.03125 L 419.28125,447.09375 L 417.875,448.6875 L 417.6875,452.5625 L 418.21875,453.28125 L 421.71875,454.84375 L 422.6875,458.75 L 424.84375,459.15625 L 426.8125,457.78125 L 430.3125,455.625 L 436.375,456.21875 L 436.1875,457.78125 L 434.21875,458.75 L 438.90625,458.96875 L 437.75,457.78125 L 437.34375,455.25 L 439.875,453.5 L 442.8125,454.46875 L 444,454.84375 L 444.96875,456.03125 L 446.34375,455.0625 L 446.71875,452.5 L 448.28125,451.15625 L 452.375,451.15625 L 453.5625,449.375 L 456.28125,450.15625 L 459.40625,448.8125 L 459.40625,443.71875 L 455.3125,443.90625 L 458.4375,441.96875 L 460,439.8125 L 460.40625,436.6875 L 466.0625,435.90625 L 469.21875,432.375 L 467.03125,430.125 L 467.03125,428.875 L 465.96875,427.8125 L 467.375,426.59375 L 467.03125,424.625 L 464.71875,423.75 L 463.5,423.75 L 461.375,421.625 L 461,417.90625 L 458.71875,416.84375 L 456.40625,416.6875 L 455.53125,414.5625 L 457.78125,413.1875 z ",name:"Var"},"fr-84":{path:"M 387,381.34375 L 384.25,381.5625 L 382.125,384.875 L 382.6875,388.375 L 386,388.78125 L 385.4375,390.34375 L 382.875,390.53125 L 379.96875,393.46875 L 379.1875,392.5 L 379.75,388.59375 L 378.59375,387.21875 L 373.3125,388 L 372.28125,390.09375 L 372.84375,390.40625 L 376.15625,395.90625 L 376.15625,400.34375 L 381.96875,406.125 L 381.96875,408.625 L 379.71875,409.90625 L 379.875,409.96875 L 386.9375,412.96875 L 389.9375,416.3125 L 391.375,418.28125 L 395.25,420.03125 L 399.84375,419.875 L 407.4375,423.03125 L 411.6875,423.5625 L 417,422.34375 L 419.1875,420.625 L 419.46875,419.15625 L 415.40625,414.5625 L 410.96875,414.5625 L 410.96875,412.96875 L 412.5625,411.1875 L 412.5625,409.25 L 409.03125,407.5 L 408.6875,404.65625 L 410.625,403.78125 L 410.625,401.3125 L 408.5,400.9375 L 408.34375,398.28125 L 408.3125,398.09375 L 406.53125,397.96875 L 403.59375,395.8125 L 402.8125,393.28125 L 397.34375,392.875 L 393.25,392.5 L 392.84375,390.15625 L 394.21875,387.21875 L 391.6875,389.375 L 387.78125,388.96875 L 387,387.59375 L 389.71875,383.90625 L 387,381.34375 z ",
name:"Vaucluse"},"fr-85":{path:"M 138.53125,229.5625 L 137.40625,231.65625 L 134.1875,231.65625 L 135.46875,232.96875 L 134.5,236.1875 L 131.59375,237.15625 L 130.46875,236.34375 L 130.96875,233.125 L 130.15625,231.34375 L 128.375,231.34375 L 127.09375,232.78125 L 127.71875,237.3125 L 129.1875,239.40625 L 127.71875,241.03125 L 125,240.53125 L 120.96875,239.5625 L 119.84375,236.5 L 117.25,236.1875 L 113.875,234.71875 L 113.0625,232.78125 L 109.375,230.375 L 103.5625,237.875 L 103.375,242.5625 L 109.40625,248.40625 L 109.21875,250.15625 L 110.96875,250.15625 L 114.6875,261.3125 L 118.59375,263.25 L 122.5,267.15625 L 127,267.15625 L 128.75,271.0625 L 133.0625,271.0625 L 135,274 L 139.3125,276.15625 L 139.5,273.40625 L 140.59375,274.4375 L 146.5625,270.8125 L 149.3125,270.625 L 150.46875,273.75 L 154.1875,272.1875 L 157.3125,274.53125 L 159.84375,273.34375 L 162,272.75 L 162.96875,271.59375 L 165.6875,269.84375 L 163.75,267.875 L 162.1875,269.0625 L 162,267.5 L 163.375,264.9375 L 162,262.59375 L 163.15625,261.03125 L 162.5625,255.5625 L 160.625,252.65625 L 162,250.875 L 158.875,247.375 L 160.03125,244.84375 L 155.34375,240.9375 L 155.34375,238.59375 L 153.40625,235.84375 L 153.78125,235.6875 L 151.125,233.4375 L 146.125,233.4375 L 144.5,232.46875 L 142.25,232.15625 L 139.65625,229.71875 L 138.53125,229.5625 z ",name:"Vendée"},"fr-86":{path:"M 188.75,225.6875 L 185.03125,229.59375 L 184.09375,231.21875 L 184.40625,236.03125 L 186.09375,235.8125 L 186.3125,237.9375 L 186.96875,241.34375 L 188.03125,243.6875 L 186.75,245.15625 L 187.375,246.21875 L 186.53125,247.71875 L 186.53125,248.34375 L 188.03125,250.0625 L 188.03125,251.125 L 187.375,252.8125 L 185.25,256 L 187.375,256.84375 L 188.03125,258.34375 L 187.15625,260.65625 L 186.96875,261.71875 L 185.6875,263.84375 L 185.6875,265.34375 L 186.53125,265.5625 L 186.53125,270.03125 L 188.03125,271.09375 L 187.375,272.5625 L 187.59375,273.84375 L 189.28125,275.75 L 190.15625,274.46875 L 190.15625,273.40625 L 191.84375,272.5625 L 193.125,273.40625 L 193.125,276.59375 L 191.84375,278.09375 L 190.78125,280.625 L 192.25,282.96875 L 195.25,283.8125 L 194.59375,285.75 L 191.8125,286.21875 L 194.375,289.34375 L 197.78125,289.125 L 200.75,288.0625 L 203.75,289.78125 L 204.8125,288.9375 L 204.59375,286.15625 L 206.28125,284.875 L 207.78125,287.4375 L 209.03125,288.71875 L 212.65625,287.21875 L 214.15625,285.53125 L 217.53125,285.53125 L 219.28125,286.40625 L 219.40625,282.71875 L 218.0625,281.15625 L 219.625,280 L 222.15625,277.0625 L 226.4375,276.875 L 226.4375,274.53125 L 228.59375,272.75 L 233.875,271.78125 L 234.25,268.84375 L 232.125,267.6875 L 230.9375,263.59375 L 227.8125,263.1875 L 225.875,261.25 L 222.15625,258.3125 L 222.9375,255.96875 L 222.9375,252.25 L 219.40625,248.75 L 219.03125,246 L 215.6875,242.5 L 214.53125,237.8125 L 213.15625,237.21875 L 211.59375,235.0625 L 210.03125,236.03125 L 210.4375,238.1875 L 205.34375,239.375 L 199.5,239.375 L 199.6875,237.03125 L 199.6875,233.3125 L 195,231.9375 L 195,229.59375 L 191.28125,228.8125 L 190.5,225.6875 L 188.75,225.6875 z ",name:"Vienne"},"fr-87":{path:"M 239.53125,270.8125 L 237.78125,272.5625 L 232.875,272.1875 L 232.3125,272.0625 L 228.59375,272.75 L 226.4375,274.53125 L 226.4375,276.875 L 222.15625,277.0625 L 219.625,280 L 218.0625,281.15625 L 219.40625,282.71875 L 219.21875,288 L 218.25,289.75 L 219.8125,291.5 L 222.53125,291.71875 L 223.125,294.4375 L 223.3125,296.1875 L 219.8125,296.96875 L 218.0625,297.5625 L 218.4375,302.4375 L 216.09375,304 L 214.125,304.59375 L 213.15625,307.34375 L 211.59375,307.53125 L 210.9375,310.5 L 215.5,310.65625 L 216.5,312.59375 L 215.6875,314.75 L 217.46875,317.09375 L 218.8125,316.71875 L 220.1875,314.75 L 226.4375,315.34375 L 227.4375,319.25 L 231.71875,319.84375 L 232.6875,321.1875 L 229.75,322.5625 L 231.125,323.53125 L 235.25,324.125 L 235.5625,324.90625 L 236.65625,322.6875 L 239,323.5625 L 241.5625,320.375 L 243.03125,320.5625 L 244.3125,318.4375 L 248.125,318.875 L 249.625,317.375 L 251.53125,317.375 L 253.03125,314.625 L 255.34375,314.40625 L 256.84375,311.875 L 258.96875,312.5 L 260.46875,312.5 L 261.46875,310.78125 L 260.46875,310.15625 L 260.03125,307.625 L 261.53125,307.625 L 261.53125,306.5625 L 258.96875,304.84375 L 256.21875,303.59375 L 256.625,301.03125 L 255.78125,301.03125 L 254.71875,302.53125 L 251.3125,302.71875 L 249.40625,302.53125 L 249.40625,300.59375 L 251.75,298.6875 L 250.25,296.78125 L 246.65625,297.84375 L 247.28125,289.78125 L 245.59375,288.0625 L 243.875,283.8125 L 241.34375,283.1875 L 240.90625,280.84375 L 243.25,276.1875 L 243.1875,273.3125 L 242.65625,273.9375 L 239.53125,270.8125 z ",name:"Haute Vienne"},"fr-88":{path:"M 459,145.9375 L 457,146.375 L 453.9375,147.53125 L 452.40625,149.4375 L 450.6875,150.59375 L 447.40625,152.125 L 446.46875,151.9375 L 444.15625,151.34375 L 441.875,151.15625 L 441.09375,148.65625 L 439.5625,149.25 L 439.375,151.9375 L 438.21875,150.78125 L 436.125,152.3125 L 434.03125,153.0625 L 431.53125,152.875 L 429.8125,153.46875 L 427.90625,152.3125 L 426.75,153.25 L 423.875,153.25 L 422.53125,155.75 L 416.21875,156.125 L 414.875,154.40625 L 412.78125,154.03125 L 412.96875,153.0625 L 414.3125,152.125 L 413.15625,151.71875 L 412.96875,148.65625 L 410.09375,148.46875 L 408.40625,149 L 407.21875,150.59375 L 404.15625,151.53125 L 404.15625,150.40625 L 403.21875,150.40625 L 403.21875,151.71875 L 399.375,152.5 L 399.375,154.21875 L 395.9375,154.65625 L 394.625,155.96875 L 395.96875,157.90625 L 399.09375,158.125 L 401.84375,161.8125 L 404.1875,161.8125 L 404.75,164.375 L 407.3125,164.75 L 407.875,166.5 L 406.125,167.6875 L 404.96875,172.96875 L 410.4375,175.6875 L 410.4375,179.78125 L 412.5625,179 L 414.34375,180.40625 L 415.6875,179.59375 L 414.9375,178.4375 L 415.90625,177.84375 L 417.25,179.40625 L 419.21875,178.03125 L 419.8125,176.09375 L 423.5,175.5 L 424.5,176.28125 L 424.3125,178.4375 L 426.84375,180.375 L 428.40625,180.1875 L 430.15625,178.8125 L 434.25,178.8125 L 437.1875,182.125 L 438.15625,182.125 L 439.71875,181.15625 L 439.9375,180 L 441.5,179.21875 L 443.25,180.375 L 445,182.34375 L 451.15625,185.59375 L 453.59375,183.5 L 453.78125,175.875 L 457.125,172.96875 L 459.0625,168.46875 L 458.46875,165.53125 L 460.8125,160.84375 L 462.96875,155.96875 L 459.25,155 L 458.46875,149.71875 L 459.25,146.1875 L 459,145.9375 z ",name:"Vosges"},"fr-89":{path:"M 318.4375,157.34375 L 316.6875,158.6875 L 309.0625,158.3125 L 305.5625,160.0625 L 304.1875,163 L 305.75,164.75 L 303.40625,167.5 L 301.625,169.625 L 305.15625,172.96875 L 306.125,176.09375 L 308.6875,178.8125 L 308.6875,182.34375 L 303.59375,186.625 L 305.34375,188.59375 L 304.96875,191.5 L 302.21875,193.46875 L 298.3125,193.46875 L 298.90625,195.625 L 301.4375,199.125 L 302.03125,202.25 L 302.625,204.40625 L 301.46875,204.75 L 303.9375,205.3125 L 305.78125,205.3125 L 306.75,203.78125 L 308,203.78125 L 309.40625,205.03125 L 309.125,206.59375 L 310.40625,207.4375 L 312.21875,207.4375 L 314.75,209.125 L 315.875,208.5625 L 317,209.53125 L 318.125,209.25 L 320.0625,208 L 321.90625,208.5625 L 323.15625,208.28125 L 323.15625,204.78125 L 323.84375,204.90625 L 324.28125,206.71875 L 326.53125,208.125 L 326.53125,210.25 L 329.75,210.375 L 333.96875,214.3125 L 336.625,214.4375 L 336.46875,213.1875 L 337.59375,211.5 L 338.59375,212.75 L 337.75,214.15625 L 338.15625,215.4375 L 339.6875,214.4375 L 341.53125,214.4375 L 341.375,217.25 L 343.0625,218.375 L 344.34375,217.8125 L 347.46875,215.6875 L 347.28125,215.28125 L 345.4375,214.15625 L 345.3125,212.1875 L 347.28125,211.21875 L 348.125,210.09375 L 347.5625,209.125 L 347.5625,206.875 L 349.09375,204.625 L 351.34375,199.84375 L 351.75,197.75 L 353.15625,197.1875 L 353.3125,196.78125 L 352.59375,196.21875 L 352.59375,194.53125 L 354.84375,192.84375 L 355.40625,190.03125 L 354.4375,188.375 L 352.875,188.375 L 352.46875,187.9375 L 352.46875,185.5625 L 354.4375,184.15625 L 354.28125,182.75 L 354,181.34375 L 353,183.5 L 351.625,183.3125 L 350.46875,181.15625 L 346.5625,183.125 L 338.75,182.71875 L 337.78125,180.5625 L 335.625,177.65625 L 335.25,174.125 L 332.125,170.40625 L 330.15625,171.78125 L 326.625,169.0625 L 327.21875,163.78125 L 322.15625,158.5 L 319.8125,158.5 L 318.4375,157.34375 z ",name:"Yonne"},"fr-90":{path:"M 451.4375,186.03125 L 449.625,186.96875 L 448.09375,188.09375 L 448.09375,190.59375 L 448.9375,193.5625 L 448.9375,195.5 L 448.46875,198.625 L 447.40625,199.71875 L 459.4375,205.15625 L 460.1875,204.28125 L 462.78125,203.875 L 461.8125,199.71875 L 461.21875,197.5625 L 458.46875,197.96875 L 458.09375,195.625 L 459.0625,193.84375 L 459.25,191.5 L 458.6875,190.15625 L 455.15625,187.40625 L 452.03125,187.21875 L 451.4375,186.03125 z ",name:"Territoire de Belfort"},"fr-91":{path:"M 274.21875,136.40625 L 272.46875,137.1875 L 270.5625,137.9375 L 270.1875,140.0625 L 267.3125,141.40625 L 266.9375,143.5 L 268.28125,145.8125 L 266.34375,148.46875 L 263.5,148.46875 L 264.625,150.1875 L 263.28125,151.71875 L 262.8125,154.8125 L 263.75,155 L 264.125,157.53125 L 264.53125,158.125 L 264.9375,163.375 L 271.1875,162.8125 L 273.71875,160.46875 L 275.875,162.21875 L 281.125,162.59375 L 281.875,163.71875 L 281.875,159.78125 L 286.25,156.90625 L 284.9375,155.1875 L 285.5,150 L 286.25,148.875 L 285.3125,143.6875 L 287.03125,142.34375 L 286.6875,139.90625 L 284.53125,138.90625 L 280.90625,138.90625 L 278.8125,137.75 L 277.28125,138.53125 L 274.21875,136.40625 z ",name:"Essonne"},"fr-92":{path:"M 277.3125,125.78125 L 273.8125,127.65625 L 273.4375,127.71875 L 271.71875,131.46875 L 272.8125,134.4375 L 274.5625,136.40625 L 274.5625,136.625 L 277.28125,138.53125 L 277.9375,138.1875 L 277.4375,137.25 L 277.9375,135.78125 L 277.625,135.25 L 277.96875,134.03125 L 277.90625,134.03125 L 276,133.0625 L 274.4375,132.625 L 274.21875,131.9375 L 274.1875,131.34375 L 275.125,130.28125 L 276.15625,130.21875 L 276.625,129.59375 L 277.75,129.09375 L 277.375,128.1875 L 277.90625,128.09375 L 278.3125,127.21875 L 277.90625,126.59375 L 277.46875,126.5 L 277.3125,125.78125 z ",name:"Hauts de Seine"},"fr-93":{path:"M 287.28125,122.8125 L 285.4375,124.125 L 282.5625,125.4375 L 277.3125,125.78125 L 277.46875,126.5 L 277.90625,126.59375 L 278.3125,127.21875 L 277.90625,128.09375 L 277.375,128.1875 L 277.75,129.09375 L 280.28125,129.0625 L 281.09375,130.3125 L 281.25,132.0625 L 282.125,131.9375 L 282.9375,131.28125 L 284.15625,131.34375 L 285.6875,132.21875 L 286.5625,133.1875 L 286.96875,133.375 L 287.21875,133.84375 L 288.1875,134.09375 L 288.1875,131.25 L 287.03125,124.375 L 287.28125,122.8125 z ",name:"Seine Saint-Denis"},"fr-94":{path:"M 282.9375,131.28125 L 282.125,131.9375 L 281.3125,132.0625 L 281.25,132.5 L 281.09375,132.90625 L 281.5,132.90625 L 281.71875,132.71875 L 281.625,132.40625 L 282.875,132.34375 L 283.1875,132.46875 L 283.1875,133.125 L 282.875,133.78125 L 281.0625,133.53125 L 280.78125,133.28125 L 279.9375,133.875 L 279.125,134.09375 L 277.96875,134.03125 L 277.625,135.25 L 277.9375,135.78125 L 277.4375,137.25 L 277.9375,138.1875 L 278.8125,137.75 L 280.90625,138.90625 L 284.53125,138.90625 L 286.6875,139.90625 L 286.65625,139.6875 L 288.1875,135.84375 L 288.1875,134.09375 L 287.21875,133.84375 L 286.96875,133.375 L 286.5625,133.1875 L 285.6875,132.21875 L 284.15625,131.34375 L 282.9375,131.28125 z ",name:"Val de Marne"},"fr-95":{path:"M 255.5625,109.6875 L 254,111.625 L 252.8125,115.9375 L 251.5,118.15625 L 256.25,120.28125 L 259.875,119.625 L 264.375,122.5 L 269.1875,122.71875 L 272.59375,124.78125 L 273.46875,127.65625 L 273.4375,127.71875 L 273.8125,127.65625 L 277.3125,125.78125 L 282.5625,125.4375 L 285.4375,124.125 L 287.28125,122.8125 L 287.875,118.96875 L 286.59375,117.6875 L 282.3125,115.15625 L 278.1875,113 L 276.0625,113.96875 L 273.71875,114.5625 L 272.15625,113.375 L 269.03125,111.4375 L 266.5,113.375 L 262.78125,113.78125 L 257.5,113.375 L 256.3125,111.4375 L 255.5625,109.6875 z ",name:"Val d'Oise"}}});
},{}],7:[function(require,module,exports){
jQuery.fn.vectorMap("addMap","world_en",{width:950,height:550,paths:{id:{path:"M781.68,324.4l-2.31,8.68l-12.53,4.23l-3.75-4.4l-1.82,0.5l3.4,13.12l5.09,0.57l6.79,2.57v2.57l3.11-0.57l4.53-6.27v-5.13l2.55-5.13l2.83,0.57l-3.4-7.13l-0.52-4.59L781.68,324.4L781.68,324.4M722.48,317.57l-0.28,2.28l6.79,11.41h1.98l14.15,23.67l5.66,0.57l2.83-8.27l-4.53-2.85l-0.85-4.56L722.48,317.57L722.48,317.57M789.53,349.11l2.26,2.77l-1.47,4.16v0.79h3.34l1.18-10.4l1.08,0.3l1.96,9.5l1.87,0.5l1.77-4.06l-1.77-6.14l-1.47-2.67l4.62-3.37l-1.08-1.49l-4.42,2.87h-1.18l-2.16-3.17l0.69-1.39l3.64-1.78l5.5,1.68l1.67-0.1l4.13-3.86l-1.67-1.68l-3.83,2.97h-2.46l-3.73-1.78l-2.65,0.1l-2.95,4.75l-1.87,8.22L789.53,349.11L789.53,349.11M814.19,330.5l-1.87,4.55l2.95,3.86h0.98l1.28-2.57l0.69-0.89l-1.28-1.39l-1.87-0.69L814.19,330.5L814.19,330.5M819.99,345.45l-4.03,0.89l-1.18,1.29l0.98,1.68l2.65-0.99l1.67-0.99l2.46,1.98l1.08-0.89l-1.96-2.38L819.99,345.45L819.99,345.45M753.17,358.32l-2.75,1.88l0.59,1.58l8.75,1.98l4.42,0.79l1.87,1.98l5.01,0.4l2.36,1.98l2.16-0.5l1.97-1.78l-3.64-1.68l-3.14-2.67l-8.16-1.98L753.17,358.32L753.17,358.32M781.77,366.93l-2.16,1.19l1.28,1.39l3.14-1.19L781.77,366.93L781.77,366.93M785.5,366.04l0.39,1.88l2.26,0.59l0.88-1.09l-0.98-1.49L785.5,366.04L785.5,366.04M790.91,370.99l-2.75,0.4l2.46,2.08h1.96L790.91,370.99L790.91,370.99M791.69,367.72l-0.59,1.19l4.42,0.69l3.44-1.98l-1.96-0.59l-3.14,0.89l-1.18-0.99L791.69,367.72L791.69,367.72M831.93,339.34l-4.17,0.47l-2.68,1.96l1.11,2.24l4.54,0.84v0.84l-2.87,2.33l1.39,4.85l1.39,0.09l1.2-4.76h2.22l0.93,4.66l10.83,8.96l0.28,7l3.7,4.01l1.67-0.09l0.37-24.72l-6.29-4.38l-5.93,4.01l-2.13,1.31l-3.52-2.24l-0.09-7.09L831.93,339.34L831.93,339.34z",name:"Indonesia"},pg:{path:"M852.76,348.29l-0.37,24.44l3.52-0.19l4.63-5.41l3.89,0.19l2.5,2.24l0.83,6.9l7.96,4.2l2.04-0.75v-2.52l-6.39-5.32l-3.15-7.28l2.5-1.21l-1.85-4.01l-3.7-0.09l-0.93-4.29l-9.81-6.62L852.76,348.29L852.76,348.29M880.48,349l-0.88,1.25l4.81,4.26l0.66,2.5l1.31-0.15l0.15-2.57l-1.46-1.32L880.48,349L880.48,349M882.89,355.03l-0.95,0.22l-0.58,2.57l-1.82,1.18l-5.47,0.96l0.22,2.06l5.76-0.29l3.65-2.28l-0.22-3.97L882.89,355.03L882.89,355.03M889.38,359.51l1.24,3.45l2.19,2.13l0.66-0.59l-0.22-2.28l-2.48-3.01L889.38,359.51L889.38,359.51z",name:"Papua New Guinea"},mx:{path:"M137.49,225.43l4.83,15.21l-2.25,1.26l0.25,3.02l4.25,3.27v6.05l5.25,5.04l-2.25-14.86l-3-9.83l0.75-6.8l2.5,0.25l1,2.27l-1,5.79l13,25.44v9.07l10.5,12.34l11.5,5.29l4.75-2.77l6.75,5.54l4-4.03l-1.75-4.54l5.75-1.76l1.75,1.01l1.75-1.76h2.75l5-8.82l-2.5-2.27l-9.75,2.27l-2.25,6.55l-5.75,1.01l-6.75-2.77l-3-9.57l2.27-12.07l-4.64-2.89l-2.21-11.59l-1.85-0.79l-3.38,3.43l-3.88-2.07l-1.52-7.73l-15.37-1.61l-7.94-5.97L137.49,225.43L137.49,225.43z",name:"Mexico"},ee:{path:"M517.77,143.66l-5.6-0.2l-3.55,2.17l-0.05,1.61l2.3,2.17l7.15,1.21L517.77,143.66L517.77,143.66M506.76,147.64l-1.55-0.05l-0.9,0.91l0.65,0.96l1.55,0.1l0.8-1.16L506.76,147.64L506.76,147.64z",name:"Estonia"},dz:{path:"M473.88,227.49l-4.08-1.37l-16.98,3.19l-3.7,2.81l2.26,11.67l-6.75,0.27l-4.06,6.53l-9.67,2.32l0.03,4.75l31.85,24.35l5.43,0.46l18.11-14.15l-1.81-2.28l-3.4-0.46l-2.04-3.42v-14.15l-1.36-1.37l0.23-3.65l-3.62-3.65l-0.45-3.88l1.58-1.14l-0.68-4.11L473.88,227.49L473.88,227.49z",name:"Algeria"},ma:{path:"M448.29,232.28h-11.55l-2.26,5.02l-5.21,2.51l-4.3,11.64l-8.38,5.02l-11.77,19.39l11.55-0.23l0.45-5.7h2.94v-7.76h10.19l0.23-10.04l9.74-2.28l4.08-6.62l6.34-0.23L448.29,232.28L448.29,232.28z",name:"Morocco"},mr:{path:"M404.9,276.66l2.18,2.85l-0.45,12.32l3.17-2.28l2.26-0.46l3.17,1.14l3.62,5.02l3.4-2.28l16.53-0.23l-4.08-27.61l4.38-0.02l-8.16-6.25l0.01,4.06l-10.33,0.01l-0.05,7.75l-2.97-0.01l-0.38,5.72L404.9,276.66L404.9,276.66z",name:"Mauritania"},sn:{path:"M412.03,289.84L410.12,290.31L406.18,293.18L405.28,294.78L405,296.37L406.43,297.40L411.28,297.34L414.40,296.5L414.75,298.03L414.46,300.06L414.53,300.09L406.78,300.21L408.03,303.21L408.71,301.37L418,302.15L418.06,302.21L419.03,302.25L422,302.37L422.12,300.62L418.53,296.31L414.53,290.87L412.03,289.84z",name:"Senegal"},gm:{path:"M406.89,298.34l-0.13,1.11l6.92-0.1l0.35-1.03l-0.15-1.04l-1.99,0.81L406.89,298.34L406.89,298.34z",name:"Gambia"},gw:{path:"M408.6,304.53l1.4,2.77l3.93-3.38l0.04-1.04l-4.63-0.67L408.6,304.53L408.6,304.53z",name:"Guinea-Bissau"},gn:{path:"M410.42,307.94l3.04,4.68l3.96-3.44l4.06-0.18l3.38,4.49l2.87,1.89l1.08-2.1l0.96-0.54l-0.07-4.62l-1.91-5.48l-5.86,0.65l-7.25-0.58l-0.04,1.86L410.42,307.94L410.42,307.94z",name:"Guinea"},sl:{path:"M413.93,313.13l5.65,5.46l4.03-4.89l-2.52-3.95l-3.47,0.35L413.93,313.13L413.93,313.13z",name:"Sierra Leone"},lr:{path:"M420.17,319.19l10.98,7.34l-0.26-5.56l-3.32-3.91l-3.24-2.87L420.17,319.19L420.17,319.19z",name:"Liberia"},ci:{path:"M432.07,326.75l4.28-3.03l5.32-0.93l5.43,1.17l-2.77-4.19l-0.81-2.56l0.81-7.57l-4.85,0.23l-2.2-2.1l-4.62,0.12l-2.2,0.35l0.23,5.12l-1.16,0.47l-1.39,2.56l3.58,4.19L432.07,326.75L432.07,326.75z",name:"Cote d'Ivoire"},ml:{path:"M419.46,295.84l3.08-2.11l17.12-0.1l-3.96-27.54l4.52-0.13l21.87,16.69l2.94,0.42l-1.11,9.28l-13.75,1.25l-10.61,7.92l-1.93,5.42l-7.37,0.31l-1.88-5.41l-5.65,0.4l0.22-1.77L419.46,295.84L419.46,295.84z",name:"Mali"},bf:{path:"M450.59,294.28l3.64-0.29l5.97,8.44l-5.54,4.18l-4.01-1.03l-5.39,0.07l-0.87,3.16l-4.52,0.22l-1.24-1.69l1.6-5.14L450.59,294.28L450.59,294.28z",name:"Burkina Faso"},ne:{path:"M460.89,302l2.55-0.06l2.3-3.45l3.86-0.69l4.11,2.51l8.77,0.25l6.78-2.76l2.55-2.19l0.19-2.88l4.73-4.77l1.25-10.53l-3.11-6.52l-7.96-1.94l-18.42,14.36l-2.61-0.25l-1.12,9.97l-9.4,0.94L460.89,302L460.89,302z",name:"Niger"},gh:{path:"M444.34,317.05l1.12,2.63l2.92,4.58l1.62-0.06l4.42-2.51l-0.31-14.29l-3.42-1l-4.79,0.13L444.34,317.05L444.34,317.05z",name:"Ghana"},tg:{path:"M455.22,321.25l2.68-1.57l-0.06-10.35l-1.74-2.82l-1.12,0.94L455.22,321.25L455.22,321.25z",name:"Togo"},bj:{path:"M458.71,319.49h2.12l0.12-6.02l2.68-3.89l-0.12-6.77l-2.43-0.06l-4.17,3.26l1.74,3.32L458.71,319.49L458.71,319.49z",name:"Benin"},ng:{path:"M461.57,319.37l3.92,0.19l4.73,5.27l2.3,0.63l1.8-0.88l2.74-0.38l0.93-3.82l3.73-2.45l4.04-0.19l7.4-13.61l-0.12-3.07l-3.42-2.63l-6.84,3.01l-9.15-0.13l-4.36-2.76l-3.11,0.69l-1.62,2.82l-0.12,7.96l-2.61,3.7L461.57,319.37L461.57,319.37z",name:"Nigeria"},tn:{path:"M474.91,227.33l5.53-2.23l1.82,1.18l0.07,1.44l-0.85,1.11l0.13,1.97l0.85,0.46v3.54l-0.98,1.64l0.13,1.05l3.71,1.31l-2.99,4.65l-1.17-0.07l-0.2,3.74l-1.3,0.2l-1.11-0.98l0.26-3.8l-3.64-3.54l-0.46-3.08l1.76-1.38L474.91,227.33L474.91,227.33z",name:"Tunisia"},ly:{path:"M480.05,248.03l1.56-0.26l0.46-3.6h0.78l3.19-5.24l7.87,2.29l2.15,3.34l7.74,3.54l4.03-1.7l-0.39-1.7l-1.76-1.7l0.2-1.18l2.86-2.42h5.66l2.15,2.88l4.55,0.66l0.59,36.89l-3.38-0.13l-20.42-10.62l-2.21,1.25l-8.39-2.1l-2.28-3.01l-3.32-0.46l-1.69-3.01L480.05,248.03L480.05,248.03z",name:"Libya"},eg:{path:"M521.93,243.06l2.67,0.07l5.2,1.44l2.47,0.07l3.06-2.56h1.43l2.6,1.44h3.29l0.59-0.04l2.08,5.98l0.59,1.93l0.55,2.89l-0.98,0.72l-1.69-0.85l-1.95-6.36l-1.76-0.13l-0.13,2.16l1.17,3.74l9.37,11.6l0.2,4.98l-2.73,3.15L522.32,273L521.93,243.06L521.93,243.06z",name:"Egypt"},td:{path:"M492.79,296l0.13-2.95l4.74-4.61l1.27-11.32l-3.16-6.04l2.21-1.13l21.4,11.15l-0.13,10.94l-3.77,3.21v5.64l2.47,4.78h-4.36l-7.22,7.14l-0.19,2.16l-5.33-0.07l-0.07,0.98l-3.04-0.4l-2.08-3.93l-1.56-0.77l0.2-1.2l1.96-1.5v-7.02l-2.71-0.42l-3.27-2.43L492.79,296L492.79,296L492.79,296z",name:"Chad"},sd:{path:"M520.15,292.43l0.18-11.83l2.46,0.07l-0.28-6.57l25.8,0.23l3.69-3.72l7.96,12.73l-4.36,5.14v7.85l-6.86,14.75l-2.36,1.04l0.75,4.11h2.94l3.99,5.79l-3.2,0.41l-0.82,1.49l-0.08,2.15l-9.6-0.17l-0.98-1.49l-6.71-0.38l-12.32-12.68l1.23-0.74l0.33-2.98l-2.95-1.74l-2.69-5.31l0.15-4.94L520.15,292.43L520.15,292.43z",name:"Sudan"},cm:{path:"M477.82,324.28l3.22,2.96l-0.23,4.58l17.66-0.41l1.44-1.62l-5.06-5.45l-0.75-1.97l3.22-6.03l-2.19-4l-1.84-0.99v-2.03l2.13-1.39l0.12-6.32l-1.69-0.19l-0.03,3.32l-7.42,13.85l-4.54,0.23l-3.11,2.14L477.82,324.28L477.82,324.28z",name:"Cameroon"},er:{path:"M556.71,294.7l-0.25-5.89l3.96-4.62l1.07,0.82l1.95,6.52l9.36,6.97l-1.7,2.09l-6.85-5.89H556.71L556.71,294.7z",name:"Eritrea"},dj:{path:"M571.48,301.54l-0.57,3.36l3.96-0.06l0.06-4.94l-1.45-0.89L571.48,301.54L571.48,301.54z",name:"Djibouti"},et:{path:"M549.49,311.76l7.28-16.2l7.23,0.04l6.41,5.57l-0.45,4.59h4.97l0.51,2.76l8.04,4.81l4.96,0.25l-9.43,10.13l-12.95,3.99h-3.21l-5.72-4.88l-2.26-0.95l-4.38-6.45l-2.89,0.04l-0.34-2.96L549.49,311.76L549.49,311.76z",name:"Ethiopia"},so:{path:"M575.74,305.04l4.08,2.78l1.21-0.06l10.13-3.48l1.15,3.71l-0.81,3.13l-2.19,1.74l-5.47-0.35l-7.83-4.81L575.74,305.04L575.74,305.04M591.97,304.05l4.37-1.68l1.55,0.93l-0.17,3.88l-4.03,11.48l-21.81,23.36l-2.53-1.74l-0.17-9.86l3.28-3.77l6.96-2.15l10.21-10.78l2.67-2.38l0.75-3.48L591.97,304.05L591.97,304.05z",name:"Somalia"},ye:{path:"M599.62,299.65l2.13,2.38l2.88-1.74l1.04-0.35l-1.32-1.28l-2.53,0.75L599.62,299.65L599.62,299.65M571.99,289.23l1.44,4.28v4.18l3.46,3.14l24.38-9.93l0.23-2.73l-3.91-7.02l-9.81,3.13l-5.63,5.54l-6.53-3.86L571.99,289.23L571.99,289.23z",name:"Yemen"},cf:{path:"M495.66,324.05l4.66,5.04l1.84-2.38l2.93,0.12l0.63-2.32l2.88-1.8l5.98,4.12l3.45-3.42l13.39,0.59L519,311.18l1.67-1.04l0.23-2.26l-2.82-1.33h-4.14l-6.67,6.61l-0.23,2.72l-5.29-0.17l-0.17,1.16l-3.45-0.35l-3.11,5.91L495.66,324.05L495.66,324.05z",name:"Central African Republic"},st:{path:"M470.74,337.15l1.15-0.58l0.86,0.7l-0.86,1.33l-1.04-0.41L470.74,337.15L470.74,337.15M473.05,333.5l1.73-0.29l0.58,1.1l-0.86,0.93l-0.86-0.12L473.05,333.5L473.05,333.5z",name:"Sao Tome and Principe"},gq:{path:"M476.84,327.41l-0.46,1.97l1.38,0.75l1.32-0.99l-0.46-2.03L476.84,327.41L476.84,327.41M480.99,332.69l-0.06,1.39l4.54,0.23l-0.06-1.57L480.99,332.69L480.99,332.69z",name:"Equatorial Guinea"},ga:{path:"M486.39,332.63l-0.12,2.49l-5.64-0.12l-3.45,6.67l8.11,8.87l2.01-1.68l-0.06-1.74l-1.38-0.64v-1.22l3.11-1.97l2.76,2.09l3.05,0.06l-0.06-10.49l-4.83-0.23l-0.06-2.2L486.39,332.63L486.39,332.63z",name:"Gabon"},cg:{path:"M491,332.52l-0.06,1.45l4.78,0.12l0.17,12.41l-4.37-0.12l-2.53-1.97l-1.96,1.1l-0.09,0.55l1.01,0.49l0.29,2.55l-2.7,2.32l0.58,1.22l2.99-2.32h1.44l0.46,1.39l1.9,0.81l6.1-5.16l-0.12-3.77l1.27-3.07l3.91-2.9l1.05-9.81l-2.78,0.01l-3.22,4.41L491,332.52L491,332.52z",name:"Congo"},ao:{path:"M486.55,353.23l1.74,2.26l2.25-2.13l-0.66-2.21l-0.56-0.04L486.55,353.23L486.55,353.23M488.62,356.71l3.41,12.73l-0.08,4.02l-4.99,5.36l-0.75,8.71l19.2,0.17l6.24,2.26l5.15-0.67l-3-3.76l0.01-10.74l5.9-0.25v-4.19l-4.79-0.2l-0.96-9.92l-2.02,0.03l-1.09-0.98l-1.19,0.06l-1.58,3.06H502l-1.41-1.42l0.42-2.01l-1.66-2.43L488.62,356.71L488.62,356.71z",name:"Angola"},cd:{path:"M489.38,355.71l10.31-0.18l2.09,2.97l-0.08,2.19l0.77,0.7h5.12l1.47-2.89h2.09l0.85,0.86l2.87-0.08l0.85,10.08l4.96,0.16v0.78l13.33,6.01l0.62,1.17h2.79l-0.31-4.22l-5.04-2.42l0.31-3.2l2.17-5.08l4.96-0.16l-4.26-14.14l0.08-6.01l6.74-10.54l0.08-1.48l-1.01-0.55l0.04-2.86l-1.23-0.11l-1.24-1.58l-20.35-0.92l-3.73,3.63l-6.11-4.02l-2.15,1.32l-1.56,13.13l-3.86,2.98l-1.16,2.64l0.21,3.91l-6.96,5.69l-1.85-0.84l0.25,1.09L489.38,355.71L489.38,355.71z",name:"Congo"},rw:{path:"M537.82,339.9l2.81,2.59l-0.12,2.77l-4.36,0.09v-3.06L537.82,339.9L537.82,339.9z",name:"Rwanda"},bi:{path:"M536.21,346.21l4.27-0.09l-1.11,3.74l-1.08,0.94h-1.32l-0.94-2.53L536.21,346.21L536.21,346.21z",name:"Burundi"},ug:{path:"M538.3,339.09l3.03,2.84l1.9-1.21l5.14-0.84l0.88,0.09l0.33-1.95l2.9-6.1l-2.44-5.08l-7.91,0.05l-0.05,2.09l1.06,1.02l-0.16,2.09L538.3,339.09L538.3,339.09z",name:"Uganda"},ke:{path:"M550.83,326.52l2.66,5.19l-3.19,6.69l-0.42,2.03l15.93,9.85l4.94-7.76l-2.5-2.03l-0.05-10.22l3.13-3.42l-4.99,1.66l-3.77,0.05l-5.9-4.98l-1.86-0.8l-3.45,0.32l-0.61,1.02L550.83,326.52L550.83,326.52z",name:"Kenya"},tz:{path:"M550.57,371.42l17.47-2.14l-3.93-7.6l-0.21-7.28l1.27-3.48l-16.62-10.44l-5.21,0.86l-1.81,1.34l-0.16,3.05l-1.17,4.23l-1.22,1.45l-1.75,0.16l3.35,11.61l5.47,2.57l3.77,0.11L550.57,371.42L550.57,371.42z",name:"Tanzania"},zm:{path:"M514.55,384.7l3.17,4.4l4.91,0.3l1.74,0.96l5.14,0.06l4.43-6.21l12.38-5.54l1.08-4.88l-1.44-6.99l-6.46-3.68l-4.31,0.3l-2.15,4.76l0.06,2.17l5.08,2.47l0.3,5.37l-4.37,0.24l-1.08-1.81l-12.14-5.18l-0.36,3.98l-5.74,0.18L514.55,384.7L514.55,384.7z",name:"Zambia"},mw:{path:"M547.16,379.4l3.11,3.25l-0.06,4.16l0.6,1.75l4.13-4.46l-0.48-5.67l-2.21-1.69l-1.97-9.95l-3.41-0.12l1.55,7.17L547.16,379.4L547.16,379.4z",name:"Malawi"},mz:{path:"M541.17,413.28l2.69,2.23l6.34-3.86l1.02-5.73v-9.46l10.17-8.32l1.74,0.06l6.16-5.91l-0.96-12.18L552,372.17l0.48,3.68l2.81,2.17l0.66,6.63l-5.5,5.37l-1.32-3.01l0.24-3.98l-3.17-3.44l-7.78,3.62l7.24,3.68l0.24,10.73l-4.79,7.11L541.17,413.28L541.17,413.28z",name:"Mozambique"},zw:{path:"M524.66,392.3l8.97,10.13l6.88,1.75l4.61-7.23l-0.36-9.58l-7.48-3.86l-2.81,1.27l-4.19,6.39l-5.8-0.06L524.66,392.3L524.66,392.3z",name:"Zimbabwe"},na:{path:"M496.55,421.96l3.35,0.24l1.97,1.99l4.67,0.06l1.14-13.26v-8.68l2.99-0.6l1.14-9.1l7.6-0.24l2.69-2.23l-4.55-0.18l-6.16,0.84l-6.64-2.41h-18.66l0.48,5.3l6.22,9.16l-1.08,4.7l0.06,2.47L496.55,421.96L496.55,421.96z",name:"Namibia"},bw:{path:"M508.51,411.23l2.15,0.66l-0.3,6.15l2.21,0.3l5.08-4.58l6.1,0.66l1.62-4.1l7.72-7.05l-9.27-10.67l-0.12-1.75l-1.02-0.3l-2.81,2.59l-7.3,0.18l-1.02,9.1l-2.87,0.66L508.51,411.23L508.51,411.23z",name:"Botswana"},sz:{path:"M540.87,414l-2.51,0.42l-1.08,2.95l1.92,1.75h2.33l1.97-2.83L540.87,414L540.87,414z",name:"Swaziland"},ls:{path:"M527.41,425.39l3.05-2.35l1.44,0.06l1.74,2.17l-0.18,2.17l-2.93,1.08v0.84l-3.23-0.18l-0.78-2.35L527.41,425.39L527.41,425.39z",name:"Lesotho"},za:{path:"M534.16,403.63l-7.9,7.3l-1.88,4.51l-6.26-0.78l-5.21,4.63l-3.46-0.34l0.28-6.4l-1.23-0.43l-0.86,13.09l-6.14-0.06l-1.85-2.18l-2.71-0.03l2.47,7.09l4.41,4.17l-3.15,3.67l2.04,4.6l4.72,1.8l3.76-3.2l10.77,0.06l0.77-0.96l4.78-0.84l16.17-16.1l-0.06-5.07l-1.73,2.24h-2.59l-3.15-2.64l1.6-3.98l2.75-0.56l-0.25-8.18L534.16,403.63L534.16,403.63z M530.37,422.13l1.51-0.06l2.45,2.66l-0.07,3.08l-2.87,1.45l-0.18,1.02l-4.38,0.05l-1.37-3.3l1.25-2.42L530.37,422.13L530.37,422.13z",name:"South Africa"},gl:{path:"M321.13,50.07l-1.36,2.17l2.45,2.45l-1.09,2.45l3.54,4.62l4.35-1.36l5.71-0.54l6.53,7.07l4.35,11.69l-3.53,7.34l4.89-0.82l2.72,1.63l0.27,3.54l-5.98,0.27l3.26,3.26l4.08,0.82l-8.97,11.96l-1.09,7.34l1.9,5.98l-1.36,3.54l2.45,7.61l4.62,5.17l1.36-0.27l2.99-0.82l0.27,4.35l1.9,2.72l3.53-0.27l2.72-10.06l8.16-10.06l12.24-4.89l7.61-9.52l3.53,1.63h7.34l5.98-5.98l7.34-2.99l0.82-4.62l-4.62-4.08l-4.08-1.36l-2.18-5.71l5.17-2.99l8.16,4.35l2.72-2.99l-4.35-2.45l9.25-12.51l-1.63-5.44l-4.35-0.27l1.63-4.89l5.44-2.45l11.15-9.79l-3.26-3.53l-12.51,1.09l-6.53,6.53l3.81-8.43l-4.35-1.09l-2.45,4.35l-3.53-2.99l-9.79,1.09l2.72-4.35l16.04-0.54l-4.08-5.44l-17.4-3.26l-7.07,1.09l0.27,3.54l-7.34-2.45l0.27-2.45l-5.17,1.09l-1.09,2.72l5.44,1.9l-5.71,4.08l-4.08-4.62l-5.71-1.63l-0.82,4.35h-5.71l-2.18-4.62l-8.97-1.36l-4.89,2.45l-0.27,3.26l-6.25-0.82l-3.81,1.63l0.27,3.81v1.9l-7.07,1.36l-3.26-2.17l-2.18,3.53l3.26,3.54l6.8-0.82l0.54,2.18l-5.17,2.45L321.13,50.07L321.13,50.07M342.89,92.49l1.63,2.45l-0.82,2.99h-1.63l-2.18-2.45l0.54-1.9L342.89,92.49L342.89,92.49M410.87,85.69l4.62,1.36l-0.27,3.81l-4.89-2.45l-1.09-1.36L410.87,85.69L410.87,85.69z",name:"Greenland"},au:{path:"M761.17,427.98l-0.35,25.38l-3.9,2.86l-0.35,2.5l5.32,3.57l13.13-2.5h6.74l2.48-3.58l14.9-2.86l10.64,3.22l-0.71,4.29l1.42,4.29l8.16-1.43l0.35,2.14l-5.32,3.93l1.77,1.43l3.9-1.43l-1.06,11.8l7.45,5.72l4.26-1.43l2.13,2.14l12.42-1.79l11.71-18.95l4.26-1.07l8.51-15.73l2.13-13.58l-5.32-6.79l2.13-1.43l-4.26-13.23l-4.61-3.22l0.71-17.87l-4.26-3.22l-1.06-10.01h-2.13l-7.1,23.59l-3.9,0.36l-8.87-8.94l4.97-13.23l-9.22-1.79l-10.29,2.86l-2.84,8.22l-4.61,1.07l-0.35-5.72l-18.8,11.44l0.35,4.29l-2.84,3.93h-7.1l-15.26,6.43L761.17,427.98L761.17,427.98M825.74,496.26l-1.77,7.15l0.35,5l5.32-0.36l6.03-9.29L825.74,496.26L825.74,496.26z",name:"Australia"},nz:{path:"M913.02,481.96l1.06,11.8l-1.42,5.36l-5.32,3.93l0.35,4.65v5l1.42,1.79l14.55-12.51v-2.86h-3.55l-4.97-16.8L913.02,481.96L913.02,481.96M902.38,507.7l2.84,5.36l-7.81,7.51l-0.71,3.93l-5.32,0.71l-8.87,8.22l-8.16-3.93l-0.71-2.86l14.9-6.43L902.38,507.7L902.38,507.7z",name:"New Zealand"},nc:{path:"M906.64,420.47l-0.35,1.79l4.61,6.43l2.48,1.07l0.35-2.5L906.64,420.47L906.64,420.47z",name:"New Caledonia"},my:{path:"M764.14,332.92l3.02,3.49l11.58-4.01l2.29-8.84l5.16-0.37l4.72-3.42l-6.12-4.46l-1.4-2.45l-3.02,5.57l1.11,3.2l-1.84,2.67l-3.47-0.89l-8.41,6.17l0.22,3.57L764.14,332.92L764.14,332.92M732.71,315.45l2.01,4.51l0.45,5.86l2.69,4.17l6.49,3.94l2.46,0.23l-0.45-4.06l-2.13-5.18l-3.12-6.63l-0.26,1.16l-3.76-0.17l-2.7-3.88L732.71,315.45L732.71,315.45z",name:"Malaysia"},bn:{path:"M779.77,319.25l-2.88,3.49l2.36,0.74l1.33-1.86L779.77,319.25L779.77,319.25z",name:"Brunei Darussalam"},tl:{path:"M806.14,368.42l-5.11,4.26l0.49,1.09l2.16-0.4l2.55-2.38l5.01-0.69l-0.98-1.68L806.14,368.42L806.14,368.42z",name:"Timor-Leste"},sb:{path:"M895.43,364.65l0.15,2.28l1.39,1.32l1.31-0.81l-1.17-2.43L895.43,364.65L895.43,364.65M897.18,370.31l-1.17,1.25l1.24,2.28l1.46,0.44l-0.07-1.54L897.18,370.31L897.18,370.31M900.03,368.99l1.02,2.5l1.97,2.35l1.09-1.76l-1.46-2.5L900.03,368.99L900.03,368.99M905.14,372.74l0.58,3.09l1.39,1.91l1.17-2.42L905.14,372.74L905.14,372.74M906.74,379.65l-0.51,0.88l1.68,2.21l1.17,0.07l-0.73-2.87L906.74,379.65L906.74,379.65M903.02,384.05l-1.75,0.81l1.53,2.13l1.31-0.74L903.02,384.05L903.02,384.05z",name:"Solomon Islands"},vu:{path:"M920.87,397.22l-1.24,1.66l0.52,1.87l0.62,0.42l1.13-1.46L920.87,397.22L920.87,397.22M921.49,402.31l0.1,1.35l1.34,0.42l0.93-0.52l-0.93-1.46L921.49,402.31L921.49,402.31M923.45,414.37l-0.62,0.94l0.93,1.04l1.55-0.52L923.45,414.37L923.45,414.37z",name:"Vanuatu"},fj:{path:"M948.62,412.29l-1.24,1.66l-0.1,1.87l1.44,1.46L948.62,412.29L948.62,412.29z",name:"Fiji"},ph:{path:"M789.37,297.53l-0.86,1.64l-0.48,2.02l-4.78,6.07l0.29,1.25l2.01-0.29l6.21-6.94L789.37,297.53L789.37,297.53M797.11,295.22l-0.1,5.01l1.82,1.83l0.67,3.56l1.82,0.39l0.86-2.22l-1.43-1.06l-0.38-6.26L797.11,295.22L797.11,295.22M802.28,297.15l-0.1,4.43l1.05,1.73l1.82-2.12l-0.48-3.85L802.28,297.15L802.28,297.15M803.42,293.29l1.82,2.41l0.86,2.31h1.63l-0.29-3.95l-1.82-1.25L803.42,293.29L803.42,293.29M806.96,302.35l0.38,2.89l-3.35,2.7l-2.77,0.29l-2.96,3.18l0.1,1.45l2.77-0.87l1.91-1.25l1.63,4.14l2.87,2.02l1.15-0.39l1.05-1.25l-2.29-2.31l1.34-1.06l1.53,1.25l1.05-1.73l-1.05-2.12l-0.19-4.72L806.96,302.35L806.96,302.35M791.38,272.97l-2.58,1.83l-0.29,5.78l4.02,7.8l1.34,1.06l1.72-1.16l2.96,0.48l0.57,2.6l2.2,0.19l1.05-1.44l-1.34-1.83l-1.63-1.54l-3.44-0.38l-1.82-2.99l2.1-3.18l0.19-2.79l-1.43-3.56L791.38,272.97L791.38,272.97M792.72,290.21l0.76,2.7l1.34,0.87l0.96-1.25l-1.53-2.12L792.72,290.21L792.72,290.21z",name:"Philippines"},cn:{path:"M759.83,270.17l-2.39,0.67l-1.72,2.12l1.43,2.79l2.1,0.19l2.39-2.12l0.57-2.79L759.83,270.17L759.83,270.17M670.4,170.07l-3.46,8.7l-4.77-0.25l-5.03,11.01l4.27,5.44l-8.8,12.15l-4.52-0.76l-3.02,3.8l0.75,2.28l3.52,0.25l1.76,4.05l3.52,0.76l10.81,13.93v7.09l5.28,3.29l5.78-1.01l7.29,4.3l8.8,2.53l4.27-0.51l4.78-0.51l10.05-6.58l3.27,0.51l1.25,2.97l2.77,0.83l3.77,5.57l-2.51,5.57l1.51,3.8l4.27,1.52l0.75,4.56l5.03,0.51l0.75-2.28l7.29-3.8l4.52,0.25l5.28,5.82l3.52-1.52l2.26,0.25l1.01,2.79l1.76,0.25l2.51-3.54l10.05-3.8l9.05-10.89l3.02-10.38l-0.25-6.84l-3.77-0.76l2.26-2.53l-0.5-4.05l-9.55-9.62v-4.81l2.76-3.54l2.76-1.27l0.25-2.79h-7.04l-1.26,3.8l-3.27-0.76l-4.02-4.3l2.51-6.58l3.52-3.8l3.27,0.25l-0.5,5.82l1.76,1.52l4.27-4.3l1.51-0.25l-0.5-3.29l4.02-4.81l3.02,0.25l1.76-5.57l2.06-1.09l0.21-3.47l-2-2.1l-0.17-5.48l3.85-0.25l-0.25-14.13l-2.7,1.62l-1.01,3.62l-4.51-0.01l-13.07-7.35l-9.44-11.38l-9.58-0.1l-2.44,2.12l3.1,7.1l-1.08,6.66l-3.86,1.6l-2.17-0.17l-0.16,6.59l2.26,0.51l4.02-1.77l5.28,2.53v2.53l-3.77,0.25l-3.02,6.58l-2.76,0.25l-9.8,12.91l-10.3,4.56l-7.04,0.51l-4.77-3.29l-6.79,3.55l-7.29-2.28l-1.76-4.81l-12.31-0.76l-6.53-10.63h-2.76l-2.22-4.93L670.4,170.07z",name:"China"},tw:{path:"M787.46,248.31l-3.54,2.7l-0.19,5.2l3.06,3.56l0.76-0.67L787.46,248.31L787.46,248.31z",name:"Taiwan"},jp:{path:"M803.23,216.42l-1.63,1.64l0.67,2.31l1.43,0.1l0.96,5.01l1.15,1.25l2.01-1.83l0.86-3.28l-2.49-3.56L803.23,216.42L803.23,216.42M812.03,213.15l-2.77,2.6l-0.1,2.99l0.67,0.87l3.73-3.18l-0.29-3.18L812.03,213.15L812.03,213.15M808.2,206.98l-4.88,5.59l0.86,1.35l2.39,0.29l4.49-3.47l3.16-0.58l2.87,3.37l2.2-0.77l0.86-3.28l4.11-0.1l4.02-4.82l-2.1-8l-0.96-4.24l2.1-1.73l-4.78-7.22l-1.24,0.1l-2.58,2.89v2.41l1.15,1.35l0.38,6.36l-2.96,3.66l-1.72-1.06l-1.34,2.99l-0.29,2.79l1.05,1.64l-0.67,1.25l-2.2-1.83h-1.53l-1.34,0.77L808.2,206.98L808.2,206.98M816.43,163.44l-1.53,1.35l0.77,2.89l1.34,1.35l-0.1,4.43l-1.72,0.67l-1.34,2.99l3.92,5.39l2.58-0.87l0.48-1.35l-2.77-2.5l1.72-2.22l1.82,0.29l1.43,1.54l0.1-3.18l3.92-3.18l2.2-0.58l-1.82-3.08l-0.86-1.35l-1.43,0.96l-1.24,1.54l-2.68-0.58l-2.77-1.83L816.43,163.44L816.43,163.44z",name:"Japan"},ru:{path:"M506.61,151.72l-1.5-0.15l-2.7,3.23v1.51l0.9,0.35l1.75,0.05l2.9-2.37l0.4-0.81L506.61,151.72L506.61,151.72M830.86,160.45l-2.68,3.76l0.19,1.83l1.34-0.58l3.15-3.95L830.86,160.45L830.86,160.45M834.4,154.96l-0.96,2.6l0.1,1.73l1.63-1.06l1.53-3.08V154L834.4,154.96L834.4,154.96M840.04,132.03l-1.24,1.54l0.1,2.41l1.15-0.1l1.91-3.37L840.04,132.03L840.04,132.03M837.75,137.91v4.24l1.34,0.48l0.96-1.54v-3.27L837.75,137.91L837.75,137.91M798.64,122.59l-0.09,6.17l7.74,11.95l2.77,10.4l4.88,9.25l1.91,0.67l1.63-1.35l0.76-2.22l-6.98-7.61l0.19-3.95l1.53-0.67l0.38-2.31l-13.67-19.36L798.64,122.59L798.64,122.59M852.57,103.42l-1.91,0.19l1.15,1.64l2.39,1.64l0.67-0.77L852.57,103.42L852.57,103.42M856.29,104.58l0.29,1.64l2.96,0.87l0.29-1.16L856.29,104.58L856.29,104.58M547.82,38.79l1.72,0.69l-1.21,2.08v2.95l-2.58,1.56H543l-1.55-1.91l0.17-2.08l1.21-1.56h2.41L547.82,38.79L547.82,38.79M554.36,36.88v2.08l1.72,1.39l2.41-0.17l2.07-1.91v-1.39h-1.89l-1.55,0.52l-1.21-1.39L554.36,36.88L554.36,36.88M564.18,37.06l1.21,2.6l2.41,0.17l1.72-0.69l-0.86-2.43l-2.24-0.52L564.18,37.06L564.18,37.06M573.99,33.59l-1.89-0.35l-1.72,1.74l0.86,1.56l0.52,2.43l2.24-1.73l0.52-1.91L573.99,33.59L573.99,33.59M584.49,51.98l-0.52,2.43l-3.96,3.47l-8.44,1.91l-6.89,11.45l-1.21,3.3l6.89,1.74l1.03-4.16l2.07-6.42l5.34-2.78l4.48-3.47l3.27-1.39h1.72v-4.68L584.49,51.98L584.49,51.98M562.28,77.31l4.65,0.52l1.55,5.38l3.96,4.16l-1.38,2.78h-2.41l-2.24-2.6l-4.99-0.17l-2.07-2.78v-1.91l3.1-0.87L562.28,77.31L562.28,77.31M634.95,18.15l-2.24-1.39h-2.58l-0.52,1.56l-2.75,1.56l-2.07,0.69l-0.34,2.08l4.82,0.35L634.95,18.15L634.95,18.15M640.28,18.67l-1.21,2.6l-2.41-0.17l-3.79,2.78l-1.03,3.47h2.41l1.38-2.26l3.27,2.43l3.1-1.39l2.24-1.91l-0.86-2.95l-1.21-2.08L640.28,18.67L640.28,18.67M645.28,20.58l1.21,4.86l1.89,4.51l2.07-3.64l3.96-0.87v-2.6l-2.58-1.91L645.28,20.58L645.28,20.58M739.76,12.8l2.69,2.26l1.91-0.79l0.56-3.17L741,8.39l-2.58,1.7l-6.28,0.57v2.83l-6.62,0.11v4.63l7.74,5.76l2.02-1.47l-0.45-4.07l4.94-1.24l-1.01-1.92l-1.79-1.81L739.76,12.8L739.76,12.8M746.94,10.09l1.79,3.39l6.96-0.79l1.91-2.49l-0.45-2.15l-1.91-0.79l-1.79,1.36l-5.16,1.13L746.94,10.09L746.94,10.09M746.49,23.31l-3.48-0.9L741,24.56l-0.9,2.94l4.71-0.45l3.59-1.81L746.49,23.31L746.49,23.31M836.68,3.76l-2.92-0.9L830.4,4.1l-1.68,2.49l2.13,2.83l5.61-2.49l1.12-1.24L836.68,3.76L836.68,3.76M817.97,72.93l1.76,6.08l3.52,1.01l3.52-5.57l-2.01-3.8l0.75-3.29h5.28l-1.26,2.53l0.5,9.12l-7.54,18.74l0.75,4.05l-0.25,6.84l14.07,20.51l2.76,0.76l0.25-16.71l2.76-2.53l-3.02-6.58l2.51-2.79l-5.53-7.34l-3.02,0.25l-1-12.15l7.79-2.03l0.5-3.55l4.02-1.01l2.26,2.03l2.76-11.14l4.77-8.1l3.77-2.03l3.27,0.25v-3.8l-5.28-1.01l-7.29-6.08l3.52-4.05l-3.02-6.84l2.51-2.53l3.02,4.05l7.54,2.79l8.29,0.76l1.01-3.54l-4.27-4.3l4.77-6.58l-10.81-3.8l-2.76,5.57l-3.52-4.56l-19.85-6.84l-18.85,3.29l-2.76,1.52v1.52l4.02,2.03l-0.5,4.81l-7.29-3.04l-16.08,6.33l-2.76-5.82h-11.06l-5.03,5.32l-17.84-4.05l-16.33,3.29l-2.01,5.06l2.51,0.76l-0.25,3.8l-15.83,1.77l1.01,5.06l-14.58-2.53l3.52-6.58l-14.83-0.76l1.26,6.84l-4.77,2.28l-4.02-3.8l-16.33,2.79l-6.28,5.82l-0.25,3.54l-4.02,0.25l-0.5-4.05l12.82-11.14v-7.6l-8.29-2.28l-10.81,3.54l-4.52-4.56h-2.01l-2.51,5.06l2.01,2.28l-14.33,7.85l-12.31,9.37l-7.54,10.38v4.3l8.04,3.29l-4.02,3.04l-8.54-3.04l-3.52,3.04l-5.28-6.08l-1.01,2.28l5.78,18.23l1.51,0.51l4.02-2.03l2.01,1.52v3.29l-3.77-1.52l-2.26,1.77l1.51,3.29l-1.26,8.61l-7.79,0.76l-0.5-2.79l4.52-2.79l1.01-7.6l-5.03-6.58l-1.76-11.39l-8.04-1.27l-0.75,4.05l1.51,2.03l-3.27,2.79l1.26,7.6l4.77,2.03l1.01,5.57l-4.78-3.04l-12.31-2.28l-1.51,4.05l-9.8,3.54l-1.51-2.53l-12.82,7.09l-0.25,4.81l-5.03,0.76l1.51-3.54v-3.54l-5.03-1.77l-3.27,1.27l2.76,5.32l2.01,3.54v2.79l-3.77-0.76l-0.75-0.76l-3.77,4.05l2.01,3.54l-8.54-0.25l2.76,3.55l-0.75,1.52h-4.52l-3.27-2.28l-0.75-6.33l-5.28-2.03v-2.53l11.06,2.28l6.03,0.51l2.51-3.8l-2.26-4.05l-16.08-6.33l-5.55,1.38l-1.9,1.63l0.59,3.75l2.36,0.41l-0.55,5.9l7.28,17.1l-5.26,8.34l-0.36,1.88l2.67,1.88l-2.41,1.59l-1.6,0.03l0.3,7.35l2.21,3.13l0.03,3.04l2.83,0.26l4.33,1.65l4.58,6.3l0.05,1.66l-1.49,2.55l3.42-0.19l3.33,0.96l4.5,6.37l11.08,1.01l-0.48,7.58l-3.82,3.27l0.79,1.28l-3.77,4.05l-1,3.8l2.26,3.29l7.29,2.53l3.02-1.77l19.35,7.34l0.75-2.03l-4.02-3.8v-4.81l-2.51-0.76l0.5-4.05l4.02-4.81l-7.21-5.4l0.5-7.51l7.71-5.07l9.05,0.51l1.51,2.79l9.3,0.51l6.79-3.8l-3.52-3.8l0.75-7.09l17.59-8.61l13.53,6.1l4.52-4.05l13.32,12.66l10.05-1.01l3.52,3.54l9.55,1.01l6.28-8.61l8.04,3.55l4.27,0.76l4.27-3.8l-3.77-2.53l3.27-5.06l9.3,3.04l2.01,4.05l4.02,0.25l2.51-1.77l6.79-0.25l0.75,1.77l7.79,0.51l5.28-5.57l10.81,1.27l3.27-1.27l1-6.08l-3.27-7.34l3.27-2.79h10.3l9.8,11.65l12.56,7.09h3.77l0.5-3.04l4.52-2.79l0.5,16.46l-4.02,0.25v4.05l2.26,2.79l-0.42,3.62l1.67,0.69l1.01-2.53l1.51,0.51l1,1.01l4.52-1.01l4.52-13.17l0.5-16.46l-5.78-13.17l-7.29-8.86l-3.52,0.51v2.79l-8.54-3.29l3.27-7.09l2.76-18.74l11.56-3.54l5.53-3.54h6.03L805.86,96l1.51,2.53l5.28-5.57l3.02,0.25l-0.5-3.29l-4.78-1.01l3.27-11.9L817.97,72.93L817.97,72.93z",name:"Russian Federation"},us:{path:"M69.17,53.35l3.46,6.47l2.22-0.5v-2.24L69.17,53.35L69.17,53.35M49.66,110.26l-0.17,3.01l2.16-0.5v-1.34L49.66,110.26L49.66,110.26M46.34,111.6l-4.32,2.18l0.67,2.34l1.66-1.34l3.32-1.51L46.34,111.6L46.34,111.6M28.39,114.44l-2.99-0.67l-0.5,1.34l0.33,2.51L28.39,114.44L28.39,114.44M22.07,114.28l-2.83-1.17l-1,1.84l1.83,1.84L22.07,114.28L22.07,114.28M12.27,111.6l-1.33-1.84l-1.33,0.5v2.51l1.5,1L12.27,111.6L12.27,111.6M1.47,99.71l1.66,1.17l-0.5,1.34H1.47V99.71L1.47,99.71M10,248.7l-0.14,2.33l2.04,1.37l1.22-1.09L10,248.7L10,248.7M15.29,252.13l-1.9,1.37l1.63,2.05l1.9-1.64L15.29,252.13L15.29,252.13M19.1,255.41l-1.63,2.19l0.54,1.37l2.31-1.09L19.1,255.41L19.1,255.41M21.81,259.65l-0.95,5.47l0.95,2.05l3.12-0.96l1.63-2.74l-3.4-3.15L21.81,259.65L21.81,259.65M271.05,281.06l-2.64-0.89l-2.12,1.33l1.06,1.24l3.61,0.53L271.05,281.06L271.05,281.06M93.11,44.89l-8.39,1.99l1.73,9.45l9.13,2.49l0.49,1.99L82.5,65.04l-7.65,12.68l2.71,13.43L82,94.13l3.46-3.23l0.99,1.99l-4.2,4.97l-16.29,7.46l-10.37,2.49l-0.25,3.73l23.94-6.96l9.87-2.74l9.13-11.19l10.12-6.71l-5.18,8.7l5.68,0.75l9.63-4.23l1.73,6.96l6.66,1.49l6.91,6.71l0.49,4.97l-0.99,1.24l1.23,4.72h1.73l0.25-7.96h1.97l0.49,19.64l4.94-4.23l-3.46-20.39h-5.18l-5.68-7.21l27.89-47.25l-27.64-21.63l-30.85,5.97l-1.23,9.45l6.66,3.98l-2.47,6.47L93.11,44.89L93.11,44.89M148.76,158.34l-1,4.02l-3.49-2.26h-1.74l-1,4.27l-12.21,27.36l3.24,23.84l3.99,2.01l0.75,6.53h8.22l7.97,6.02l15.69,1.51l1.74,8.03l2.49,1.76l3.49-3.51l2.74,1.25l2.49,11.54l4.23,2.76l3.49-6.53l10.71-7.78l6.97,3.26l5.98,0.5l0.25-3.76l12.45,0.25l2.49,2.76l0.5,6.27l-1.49,3.51l1.74,6.02h3.74l3.74-5.77l-1.49-2.76l-1.49-6.02l2.24-6.78l10.21-8.78l7.72-2.26l-1-7.28l10.71-11.55l10.71-1.76L272.8,199l10.46-6.02v-8.03l-1-0.5l-3.74,1.25l-0.5,4.92l-12.43,0.15l-9.74,6.47l-15.29,5l-2.44-2.99l6.94-10.5l-3.43-3.27l-2.33-4.44l-4.83-3.88l-5.25-0.44l-9.92-6.77L148.76,158.34L148.76,158.34z",name:"United States of America"},mu:{path:"M613.01,398.99l-1.52,1.99l0.3,2.15l3.2-2.61L613.01,398.99L613.01,398.99z",name:"Mauritius"},re:{path:"M607.38,402.37l-2.28,0.15l-0.15,1.99l1.52,0.31l2.28-1.07L607.38,402.37L607.38,402.37z",name:"Reunion"},mg:{path:"M592.3,372.92l-2.13,5.06l-3.65,6.44l-6.39,0.46l-2.74,3.22l0.46,9.82l-3.96,4.6l0.46,7.82l3.35,3.83l3.96-0.46l3.96-2.92l-0.91-4.6l9.13-15.8l-1.83-1.99l1.83-3.83l1.98,0.61l0.61-1.53l-1.83-7.82l-1.07-3.22L592.3,372.92L592.3,372.92z",name:"Madagascar"},km:{path:"M577.69,371.23l0.46,1.53l1.98,0.31l0.76-1.99L577.69,371.23L577.69,371.23M580.58,374.3l0.76,1.69h1.22l0.61-2.15L580.58,374.3L580.58,374.3z",name:"Comoros"},sc:{path:"M602.35,358.34l-0.61,1.23l1.67,1.38l1.22-1.38L602.35,358.34L602.35,358.34M610.88,349.14l-1.83,1.23l1.37,2.15h1.83L610.88,349.14L610.88,349.14M611.64,354.51l-1.22,1.38l0.91,1.38l1.67,0.31l0.15-2.92L611.64,354.51L611.64,354.51z",name:"Seychelles"},mv:{path:"M656.4,320.76l0.3,2.61l1.67,0.61l0.3-2.3L656.4,320.76L656.4,320.76M658.53,326.28l-0.15,3.22l1.22,0.61l1.07-2.15L658.53,326.28L658.53,326.28M658.84,332.57l-1.07,1.07l1.22,1.07l1.52-1.07L658.84,332.57L658.84,332.57z",name:"Maldives"},pt:{path:"M372.64,217.02l-1.36,1.37l2.44,1.37l0.27-1.91L372.64,217.02L372.64,217.02M379.97,216.2l-1.63,1.09l1.36,1.09l2.17-0.55L379.97,216.2L379.97,216.2M381.05,220.03l-0.81,2.19l1.08,1.37l1.36-1.09L381.05,220.03L381.05,220.03M387.56,224.4l-0.54,1.37l0.81,0.82l2.17-1.37L387.56,224.4L387.56,224.4M408.18,236.42l-1.08,1.37l1.08,1.37l1.63-0.82L408.18,236.42L408.18,236.42M430.93,211.24l-0.62,8.65l-1.77,1.6l0.18,0.98l1.24,2.05l-0.8,2.5l1.33,0.45l3.1-0.36l-0.18-2.5l2.03-11.59l-0.44-1.6L430.93,211.24L430.93,211.24z",name:"Portugal"},es:{path:"M415.62,253.73l-1.75,1.01l0.81,0.82L415.62,253.73L415.62,253.73M409.54,253.92l-2.17,0.55l1.08,1.64h1.63L409.54,253.92L409.54,253.92M404.38,252.28l-1.36,1.37l1.9,1.64l1.08-2.46L404.38,252.28L404.38,252.28M448.36,205h-12.74l-2.57-1.16l-1.24,0.09l-1.5,3.12l0.53,3.21l4.87,0.45l0.62,2.05l-2.12,11.95l0.09,2.14l3.45,1.87l3.98,0.27l7.96-1.96l3.89-4.9l0.09-4.99l6.9-6.24l0.35-2.76l-6.28-0.09L448.36,205L448.36,205M461.1,217.21l-1.59,0.54l0.35,1.43h2.3l0.97-1.07L461.1,217.21L461.1,217.21z",name:"Spain"},cv:{path:"M387.56,290.54l-1.9,1.09l1.36,1.09l1.63-0.82L387.56,290.54L387.56,290.54M392.23,292.74l-1.24,1.1l0.88,1.63l2.12-0.95L392.23,292.74L392.23,292.74M389.52,295.83l-1.59,0.95l1.71,2.29l1.35-0.71L389.52,295.83L389.52,295.83z",name:"Cape Verde"},pf:{path:"M27.25,402.68l-1.9-0.14l-0.14,1.78l1.49,0.96l1.77-1.09L27.25,402.68L27.25,402.68M33.77,404.6l-2.72,1.78l2.04,2.46l1.77-0.41l0.95-1.23L33.77,404.6L33.77,404.6z",name:"French Polynesia"},kn:{path:"M276.6,283.37l-1.5,0.62l0.53,1.33l1.76-1.15l-0.35-0.36L276.6,283.37L276.6,283.37z",name:"Saint Kitts and Nevis"},ag:{path:"M279.07,284.88l-0.88,1.87l1.06,1.42l1.32-1.15L279.07,284.88L279.07,284.88z",name:"Antigua and Barbuda"},dm:{path:"M282.07,290.03l-1.06,0.98l0.79,1.6l1.5-0.44L282.07,290.03L282.07,290.03z",name:"Dominica"},lc:{path:"M281.98,294.03l-0.71,1.51l1.15,1.24l1.5-0.8L281.98,294.03L281.98,294.03z",name:"Saint Lucia"},bb:{path:"M282.07,297.85l-1.23,0.89l0.97,1.78l1.59-0.89L282.07,297.85L282.07,297.85z",name:"Barbados"},gd:{path:"M280.57,301.31l-1.15,1.15l0.44,0.71h1.41l0.44-1.16L280.57,301.31L280.57,301.31z",name:"Grenada"},tt:{path:"M282.24,304.78l-1.06,0.98l-1.15,0.18v1.42l2.12,1.95l0.88-1.42l0.53-1.6l-0.18-1.33L282.24,304.78L282.24,304.78z",name:"Trinidad and Tobago"},"do":{path:"M263.11,280.44l-5.29-3.46l-2.5-0.85l-0.84,6l0.88,1.69l1.15-1.33l3.35-0.89l2.91,0.62L263.11,280.44L263.11,280.44z",name:"Dominican Republic"},ht:{path:"M250.86,275.38l3.44,0.36l-0.41,4.22l-0.34,2.22l-4.01-0.22l-0.71,1.07l-1.23-0.09l-0.44-2.31l4.23-0.35l-0.26-2.4l-1.94-0.8L250.86,275.38L250.86,275.38z",name:"Haiti"},fk:{path:"M307.95,508.18l-2.63-0.29l-2.62,1.76l1.9,2.06L307.95,508.18L307.95,508.18M310.57,506.86l-0.87,2.79l-2.48,2.2l0.15,0.73l4.23-1.62l1.75-2.2L310.57,506.86L310.57,506.86z",name:"Falkland Islands"},is:{path:"M406.36,117.31l-1.96-1.11l-2.64,1.67l-2.27,2.1l0.06,1.17l2.94,0.37l-0.18,2.1l-1.04,1.05l0.25,0.68l2.94,0.19v3.4l4.23,0.74l2.51,1.42l2.82,0.12l4.84-2.41l3.74-4.94l0.06-3.34l-2.27-1.92l-1.9-1.61l-0.86,0.62l-1.29,1.67l-1.47-0.19l-1.47-1.61l-1.9,0.18l-2.76,2.29l-1.66,1.79l-0.92-0.8l-0.06-1.98l0.92-0.62L406.36,117.31L406.36,117.31z",name:"Iceland"},no:{path:"M488.26,53.96l-1.65-1.66l-3.66,1.78h-6.72L475.17,58l3.77,3.33l1.65-0.24l2.36-4.04l2,1.43l-1.42,2.85l-0.71,4.16l1.65,2.61l3.54-5.94l4.6-5.59l-1.77-1.54L488.26,53.96L488.26,53.96M490.26,46.83l-2.95,2.73l1.77,2.73h3.18l1.3,1.78l3.89,2.02l4.48-2.61l3.07-2.61l-1.06-2.14l-3.07-1.78l-2.24,2.02l-1.53-1.9l-1.18,0.12l-1.53,3.33l-2.24-2.26l-0.24-1.54L490.26,46.83L490.26,46.83M496.98,59.07l-2.36,2.14l-2,1.54l0.94,1.66l1.89,0.59l3.07-1.43l1.42-1.78l-1.3-2.14L496.98,59.07L496.98,59.07M515.46,102.14l2.02-1.48L517.3,99l-1.28-0.74l0.18-2.03h1.1v-1.11l-4.77-1.29l-7.15,0.74l-0.73,3.14L503,97.16l-1.1-1.85l-3.49,0.18L498.04,99l-1.65,0.74l-0.92-1.85l-7.34,5.91l1.47,1.66l-2.75,1.29l-6.24,12.38l-2.2,1.48l0.18,1.11l2.2,1.11l-0.55,2.4l-3.67-0.19l-1.1-1.29l-2.38,2.77l-1.47,1.11l-0.37,2.59l-1.28,0.74l-3.3,0.74l-1.65,5.18l1.1,8.5l1.28,3.88l1.47,1.48l3.3-0.18l4.77-4.62l1.83-3.14l0.55,4.62l3.12-5.54l0.18-15.53l2.54-1.6l0.76-8.57l7.7-11.09l3.67-1.29l1.65-2.03l5.5,1.29l2.75,1.66l0.92-4.62l4.59-2.77L515.46,102.14L515.46,102.14z",
name:"Norway"},lk:{path:"M680.54,308.05l0.25,2.72l0.25,1.98l-1.47,0.25l0.74,4.45l2.21,1.24l3.43-1.98l-0.98-4.69l0.25-1.73l-3.19-2.96L680.54,308.05L680.54,308.05z",name:"Sri Lanka"},cu:{path:"M220.85,266.92v1.27l5.32,0.1l2.51-1.46l0.39,1.07l5.22,1.27l4.64,4.19l-1.06,1.46l0.19,1.66l3.87,0.97l3.87-1.75l1.74-1.75l-2.51-1.27l-12.95-7.6l-4.54-0.49L220.85,266.92L220.85,266.92z",name:"Cuba"},bs:{path:"M239.61,259.13l-1.26-0.39l-0.1,2.43l1.55,1.56l1.06-1.56L239.61,259.13L239.61,259.13M242.12,262.93l-1.74,0.97l1.64,2.34l0.87-1.17L242.12,262.93L242.12,262.93M247.73,264.68l-1.84-0.1l0.19,1.17l1.35,1.95l1.16-1.27L247.73,264.68L247.73,264.68M246.86,262.35l-3-1.27l-0.58-3.02l1.16-0.49l1.16,2.34l1.16,0.88L246.86,262.35L246.86,262.35M243.96,256.21l-1.55-0.39l-0.29-1.95l-1.64-0.58l1.06-1.07l1.93,0.68l1.45,0.88L243.96,256.21L243.96,256.21z",name:"Bahamas"},jm:{path:"M238.93,279.59l-3.48,0.88v0.97l2.03,1.17h2.13l1.35-1.56L238.93,279.59L238.93,279.59z",name:"Jamaica"},ec:{path:"M230.2,335.85l-4.73,2.94l-0.34,4.36l-0.95,1.43l2.98,2.86l-1.29,1.41l0.3,3.6l5.33,1.27l8.07-9.55l-0.02-3.33l-3.87-0.25L230.2,335.85L230.2,335.85z",name:"Ecuador"},ca:{path:"M203.73,35.89l0.22,4.02l-7.98,8.27l2,6.7l5.76-1.56l3.33-4.92l8.42-3.13l6.87-0.45l-5.32-5.81l-2.66,2.01l-2-0.67l-1.11-2.46l-2.44-2.46L203.73,35.89L203.73,35.89M214.15,24.05l-1.77,3.13l8.65,3.13l3.1-4.69l1.33,3.13h2.22l4.21-4.69l-5.1-1.34l-2-1.56l-2.66,2.68L214.15,24.05L214.15,24.05M229.23,30.31l-6.87,2.9v2.23l8.87,3.35l-2,2.23l1.33,2.9l5.54-2.46h4.66l2.22,3.57l3.77-3.8l-0.89-3.58l-3.1,1.12l-0.44-4.47l1.55-2.68h-1.55l-2.44,1.56l-1.11,0.89l0.67,3.13l-1.77,1.34l-2.66-0.22l-0.67-4.02L229.23,30.31L229.23,30.31M238.32,23.38l-0.67,2.23l4.21,2.01l3.1-1.79l-0.22-1.34L238.32,23.38L238.32,23.38M241.64,19.58l-3.1,1.12l0.22,1.56l6.87-0.45l-0.22-1.56L241.64,19.58L241.64,19.58M256.5,23.38l-0.44,1.56l-1.11,1.56v2.23l4.21-0.67l4.43,3.8h1.55v-3.8l-4.43-4.92L256.5,23.38L256.5,23.38M267.81,27.85l1.77,2.01l-1.55,2.68l1.11,2.9l4.88-2.68v-2.01l-2.88-3.35L267.81,27.85L267.81,27.85M274.24,22.71l0.22,3.57h5.99l1.55,1.34l-0.22,1.56l-5.32,0.67l3.77,5.14l5.1,0.89l7.09-3.13l-10.2-15.42l-3.1,2.01l0.22,2.68l-3.55-1.34L274.24,22.71L274.24,22.71M222.58,47.96l-8.42,2.23l-4.88,4.25l0.44,4.69l8.87,2.68l-2,4.47l-6.43-4.02l-1.77,3.35l4.21,2.9l-0.22,4.69l6.43,1.79l7.76-0.45l1.33-2.46l5.76,6.48l3.99-1.34l0.67-4.47l2.88,2.01l0.44-4.47l-3.55-2.23l0.22-14.07l-3.1-2.46L231.89,56L222.58,47.96L222.58,47.96M249.63,57.79l-2.88-1.34l-1.55,2.01l3.1,4.92l0.22,4.69l6.65-4.02v-5.81l2.44-2.46l-2.44-1.79h-3.99L249.63,57.79L249.63,57.79M263.82,55.78l-4.66,3.8l1.11,4.69h2.88l1.33-2.46l2,2.01l2-0.22l5.32-4.47L263.82,55.78L263.82,55.78M263.37,48.4l-1.11,2.23l4.88,1.79l1.33-2.01L263.37,48.4L263.37,48.4M260.49,39.91l-4.88,0.67l-2.88,2.68l5.32,0.22l-1.55,4.02l1.11,1.79l1.55-0.22l3.77-6.03L260.49,39.91L260.49,39.91M268.92,38.35l-2.66,0.89l0.44,3.57l4.43,2.9l0.22,2.23l-1.33,1.34l0.67,4.47l17.07,5.58l4.66,1.56l4.66-4.02l-5.54-4.47l-5.1,1.34l-7.09-0.67l-2.66-2.68l-0.67-7.37l-4.43-2.23L268.92,38.35L268.92,38.35M282.88,61.59L278,61.14l-5.76,2.23l-3.1,4.24l0.89,11.62l9.53,0.45l9.09,4.47l6.43,7.37l4.88-0.22l-1.33,6.92l-4.43,7.37l-4.88,2.23l-3.55-0.67l-1.77-1.56l-2.66,3.57l1.11,3.57l3.77,0.22l4.66-2.23l3.99,10.28l9.98,6.48l6.87-8.71l-5.76-9.38l3.33-3.8l4.66,7.82l8.42-7.37l-1.55-3.35l-5.76,1.79l-3.99-10.95l3.77-6.25l-7.54-8.04l-4.21,2.9l-3.99-8.71l-8.42,1.12l-2.22-10.5l-6.87,4.69l-0.67,5.81h-3.77l0.44-5.14L282.88,61.59L282.88,61.59M292.86,65.61l-1.77,1.79l1.55,2.46l7.32,0.89l-4.66-4.92L292.86,65.61L292.86,65.61M285.77,40.36v2.01l-4.88,1.12l1.33,2.23l5.54,2.23l6.21,0.67l4.43,3.13l4.43-2.46l-3.1-3.13h3.99l2.44-2.68l5.99-0.89v-1.34l-3.33-2.23l0.44-2.46l9.31,1.56l13.75-5.36l-5.1-1.56l1.33-1.79h10.64l1.77-1.79l-21.51-7.6l-5.1-1.79l-5.54,4.02l-6.21-5.14l-3.33-0.22l-0.67,4.25l-4.21-3.8l-4.88,1.56l0.89,2.46l7.32,1.56l-0.44,3.57l3.99,2.46l9.76-2.46l0.22,3.35l-7.98,3.8l-4.88-3.8l-4.43,0.45l4.43,6.26l-2.22,1.12l-3.33-2.9l-2.44,1.56l2.22,4.24h3.77l-0.89,4.02l-3.1-0.45l-3.99-4.25L285.77,40.36L285.77,40.36M266.01,101.85l-4.23,5.32l-0.26,5.86l3.7-2.13h4.49l3.17,2.93l2.91-2.4L266.01,101.85L266.01,101.85M317.52,171.05l-10.57,10.12l1.06,2.4l12.94,4.79l1.85-3.19l-1.06-5.32l-4.23,0.53l-2.38-2.66l3.96-3.99L317.52,171.05L317.52,171.05M158.22,48.66l1.99,3.01l1,4.02l4.98,1.25l3.49-3.76l2.99,1.51l8.47,0.75l5.98-2.51l1,8.28h3.49V57.7l3.49,0.25l8.72,10.29l5.73,3.51l-2.99,4.77l1.25,1.25L219,80.03l0.25,5.02l2.99,0.5l0.75-7.53l4.73-1.25l3.49,5.27l7.47,3.51l3.74,0.75l2.49-3.01l0.25-4.77l4.48-2.76l1.49,4.02l-3.99,7.03l0.5,3.51l2.24-3.51l4.48-4.02l0.25-5.27l-2.49-4.02l0.75-3.26l5.98-3.01l2.74,2.01l0.5,17.57l4.23-3.76l2.49,1.51l-3.49,6.02l4.48,1l6.48-10.04l5.48,5.77l-2.24,10.29l-5.48,3.01l-5.23-2.51l-9.46,2.01l1,3.26l-2.49,4.02l-7.72,1.76l-8.72,6.78l-7.72,10.29l-1,3.26l5.23,2.01l1.99,5.02l7.22,7.28l11.46,5.02l-2.49,11.54l-0.25,3.26l2.99,2.01l3.99-5.27l0.5-10.04l6.23-0.25l2.99-5.77l0.5-8.78l7.97-15.56l9.96,3.51l5.23,7.28l-2.24,7.28l3.99,2.26l9.71-6.53l2.74,17.82l8.97,10.79l0.25,5.52l-9.96,2.51l-4.73,5.02l-9.96-2.26l-4.98-0.25l-8.72,6.78l5.23-1.25l6.48-1.25l1.25,1.51l-1.74,5.52l0.25,5.02l2.99,2.01l2.99-0.75l1.5-2.26h1.99l-3.24,6.02l-6.23,0.25l-2.74,4.02h-3.49l-1-3.01l4.98-5.02l-5.98,2.01l-0.27-8.53l-1.72-1l-5.23,2.26l-0.5,4.27h-11.96l-10.21,7.03l-13.7,4.52l-1.49-2.01l6.9-10.3l-3.92-3.77l-2.49-4.78l-5.07-3.87l-5.44-0.45l-9.75-6.83l-70.71-11.62l-1.17-4.79l-6.48-6.02v-5.02l1-4.52l-0.5-2.51l-2.49-2.51l-0.5-4.02l6.48-4.52l-3.99-21.58l-5.48-0.25l-4.98-6.53L158.22,48.66L158.22,48.66M133.83,128.41l-1.7,3.26l0.59,2.31l1.11,0.69l-0.26,0.94l-1.19,0.34l0.34,3.43l1.28,1.29l1.02-1.11l-1.28-3.34l0.76-2.66l1.87-2.49l-1.36-2.31L133.83,128.41L133.83,128.41M139.45,147.95l-1.53,0.6l2.81,3.26l0.68,3.86l2.81,3l2.38-0.43v-3.94l-2.89-1.8L139.45,147.95L139.45,147.95z",name:"Canada"},gt:{path:"M194.88,291.52l5.93,4.34l5.98-7.43l-1.02-1.54l-2.04-0.07v-4.35l-1.53-0.93l-4.63,1.38l1.77,4.08L194.88,291.52L194.88,291.52z",name:"Guatemala"},hn:{path:"M207.55,288.78l9.24-0.35l2.74,3.26l-1.71-0.39l-3.29,0.14l-4.3,4.04l-1.84,4.09l-1.21-0.64l-0.01-4.48l-2.66-1.78L207.55,288.78L207.55,288.78z",name:"Honduras"},sv:{path:"M201.65,296.27l4.7,2.34l-0.07-3.71l-2.41-1.47L201.65,296.27L201.65,296.27z",name:"El Salvador"},ni:{path:"M217.74,292.11l2.19,0.44l0.07,4.49l-2.55,7.28l-6.87-0.68l-1.53-3.51l2.04-4.26l3.87-3.6L217.74,292.11L217.74,292.11z",name:"Nicaragua"},cr:{path:"M217.38,304.98l1.39,2.72l1.13,1.5l-1.52,4.51l-2.9-2.04l-4.74-4.34v-2.87L217.38,304.98L217.38,304.98z",name:"Costa Rica"},pa:{path:"M220.59,309.61l-1.46,4.56l4.82,1.25l2.99,0.59l0.51-3.53l3.21-1.62l2.85,1.47l1.12,1.79l1.36-0.16l1.07-3.25l-3.56-1.47l-2.7-1.47l-2.7,1.84l-3.21,1.62l-3.28-1.32L220.59,309.61L220.59,309.61z",name:"Panama"},co:{path:"M253.73,299.78l-2.06-0.21l-13.62,11.23l-1.44,3.95l-1.86,0.21l0.83,8.73l-4.75,11.65l5.16,4.37l6.61,0.42l4.54,6.66l6.6,0.21l-0.21,4.99H256l2.68-9.15l-2.48-3.12l0.62-5.82l5.16-0.42l-0.62-13.52l-11.56-3.74l-2.68-7.28L253.73,299.78L253.73,299.78z",name:"Colombia"},ve:{path:"M250.46,305.92l0.44,2.59l3.25,1.03l0.74-4.77l3.43-3.55l3.43,4.02l7.89,2.15l6.68-1.4l4.55,5.61l3.43,2.15l-3.76,5.73l1.26,4.34l-2.15,2.66l-2.23,1.87l-4.83-2.43l-1.11,1.12v3.46l3.53,1.68l-2.6,2.81l-2.6,2.81l-3.43-0.28l-3.45-3.79l-0.73-14.26l-11.78-4.02l-2.14-6.27L250.46,305.92L250.46,305.92z",name:"Venezuela"},gy:{path:"M285.05,314.13l7.22,6.54l-2.87,3.32l-0.23,1.97l3.77,3.89l-0.09,3.74l-6.56,2.5l-3.93-5.31l0.84-6.38l-1.68-4.75L285.05,314.13L285.05,314.13z",name:"Guyana"},sr:{path:"M293.13,321.14l2.04,1.87l3.16-1.96l2.88,0.09l-0.37,1.12l-1.21,2.52l-0.19,6.27l-5.75,2.34l0.28-4.02l-3.71-3.46l0.19-1.78L293.13,321.14L293.13,321.14z",name:"Suriname"},gf:{path:"M302.13,321.8l5.85,3.65l-3.06,6.08l-1.11,1.4l-3.25-1.87l0.09-6.55L302.13,321.8L302.13,321.8z",name:"French Guiana"},pe:{path:"M225.03,349.52l-1.94,1.96l0.13,3.13l16.94,30.88l17.59,11.34l2.72-4.56l0.65-10.03l-1.42-6.25l-4.79-8.08l-2.85,0.91l-1.29,1.43l-5.69-6.52l1.42-7.69l6.6-4.3l-0.52-4.04l-6.72-0.26l-3.49-5.86l-1.94-0.65l0.13,3.52l-8.66,10.29l-6.47-1.56L225.03,349.52L225.03,349.52z",name:"Peru"},bo:{path:"M258.71,372.79l8.23-3.59l2.72,0.26l1.81,7.56l12.54,4.17l2.07,6.39l5.17,0.65l2.2,5.47l-1.55,4.95l-8.41,0.65l-3.1,7.95l-6.6-0.13l-2.07-0.39l-3.81,3.7l-1.88-0.18l-6.47-14.99l1.79-2.68l0.63-10.6l-1.6-6.31L258.71,372.79L258.71,372.79z",name:"Bolivia"},py:{path:"M291.76,399.51l2.2,2.4l-0.26,5.08l6.34-0.39l4.79,6.13l-0.39,5.47l-3.1,4.69l-6.34,0.26l-0.26-2.61l1.81-4.3l-6.21-3.91h-5.17l-3.88-4.17l2.82-8.06L291.76,399.51L291.76,399.51z",name:"Paraguay"},uy:{path:"M300.36,431.93l-2.05,2.19l0.85,11.78l6.44,1.87l8.19-8.21L300.36,431.93L300.36,431.93z",name:"Uruguay"},ar:{path:"M305.47,418.2l1.94,1.82l-7.37,10.95l-2.59,2.87l0.9,12.51l5.69,6.91l-4.78,8.34l-3.62,1.56h-4.14l1.16,6.51l-6.47,2.22l1.55,5.47l-3.88,12.38l4.79,3.91l-2.59,6.38l-4.4,6.91l2.33,4.82l-5.69,0.91l-4.66-5.73l-0.78-17.85l-7.24-30.32l2.19-10.6l-4.66-13.55l3.1-17.59l2.85-3.39l-0.7-2.57l3.66-3.34l8.16,0.56l4.56,4.87l5.27,0.09l5.4,3.3l-1.59,3.72l0.38,3.76l7.65-0.36L305.47,418.2L305.47,418.2M288.92,518.79l0.26,5.73l4.4-0.39l3.75-2.48l-6.34-1.3L288.92,518.79L288.92,518.79z",name:"Argentina"},cl:{path:"M285.04,514.1l-4.27,9.38l7.37,0.78l0.13-6.25L285.04,514.1L285.04,514.1M283.59,512.63l-3.21,3.55l-0.39,4.17l-6.21-3.52l-6.6-9.51l-1.94-3.39l2.72-3.52l-0.26-4.43l-3.1-1.3l-2.46-1.82l0.52-2.48l3.23-0.91l0.65-14.33l-5.04-2.87l-3.29-74.59l0.85-1.48l6.44,14.85l2.06,0.04l0.67,2.37l-2.74,3.32l-3.15,17.87l4.48,13.76l-2.07,10.42l7.3,30.64l0.77,17.92l5.23,6.05L283.59,512.63L283.59,512.63M262.28,475.14l-1.29,1.95l0.65,3.39l1.29,0.13l0.65-4.3L262.28,475.14L262.28,475.14z",name:"Chile"},br:{path:"M314.24,438.85l6.25-12.02l0.23-10.1l11.66-7.52h6.53l5.13-8.69l0.93-16.68l-2.1-4.46l12.36-11.28l0.47-12.45l-16.79-8.22l-20.28-6.34l-9.56-0.94l2.57-5.4l-0.7-8.22l-2.09-0.69l-3.09,6.14l-1.62,2.03l-4.16-1.84l-13.99,4.93l-4.66-5.87l0.75-6.13l-4.4,4.48l-4.86-2.62l-0.49,0.69l0.01,2.13l4.19,2.25l-6.29,6.63l-3.97-0.04l-4.02-4.09l-4.55,0.14l-0.56,4.86l2.61,3.17l-3.08,9.87l-3.6,0.28l-5.73,3.62l-1.4,7.11l4.97,5.32l0.91-1.03l3.49-0.94l2.98,5.02l8.53-3.66l3.31,0.19l2.28,8.07l12.17,3.86l2.1,6.44l5.18,0.62l2.47,6.15l-1.67,5.47l2.18,2.86l-0.32,4.26l5.84-0.55l5.35,6.76l-0.42,4.75l3.17,2.68l-7.6,11.51L314.24,438.85L314.24,438.85z",name:"Brazil"},bz:{path:"M204.56,282.4l-0.05,3.65h0.84l2.86-5.34h-1.94L204.56,282.4L204.56,282.4z",name:"Belize"},mn:{path:"M673.8,170.17l5.82-7.72l6.99,3.23l4.75,1.27l5.82-5.34l-3.95-2.91l2.6-3.67l7.76,2.74l2.69,4.41l4.86,0.13l2.54-1.89l5.23-0.21l1.14,1.94l8.69,0.44l5.5-5.61l7.61,0.8l-0.44,7.64l3.33,0.76l4.09-1.86l4.33,2.14l-0.1,1.08l-3.14,0.09l-3.27,6.86l-2.54,0.25l-9.88,12.91l-10.09,4.45l-6.31,0.49l-5.24-3.38l-6.7,3.58l-6.6-2.05l-1.87-4.79l-12.5-0.88l-6.4-10.85l-3.11-0.2L673.8,170.17L673.8,170.17z",name:"Mongolia"},kp:{path:"M778.28,194.27l1.84,0.77l0.56,6.44l3.65,0.21l3.44-4.03l-1.19-1.06l0.14-4.32l3.16-3.82l-1.61-2.9l1.05-1.2l0.58-3l-1.83-0.83l-1.56,0.79l-1.93,5.86l-3.12-0.27l-3.61,4.26L778.28,194.27L778.28,194.27z",name:"North Korea"},kr:{path:"M788.34,198.2l6.18,5.04l1.05,4.88l-0.21,2.62l-3.02,3.4l-2.6,0.14l-2.95-6.37l-1.12-3.04l1.19-0.92l-0.28-1.27l-1.47-0.66L788.34,198.2L788.34,198.2z",name:"South Korea"},kz:{path:"M576.69,188.62l4.1-1.75l4.58-0.16l0.32,7h-2.68l-2.05,3.34l2.68,4.45l3.95,2.23l0.36,2.55l1.45-0.48l1.34-1.59l2.21,0.48l1.11,2.23h2.84v-2.86l-1.74-5.09l-0.79-4.13l5.05-2.23l6.79,1.11l4.26,4.29l9.63-0.95l5.37,7.63l6.31,0.32l1.74-2.86l2.21-0.48l0.32-3.18l3.31-0.16l1.74,2.07l1.74-4.13l14.99,2.07l2.52-3.34l-4.26-5.25l5.68-12.4l4.58,0.32l3.16-7.63l-6.31-0.64l-3.63-3.5l-10,1.16l-12.88-12.45l-4.54,4.03l-13.77-6.25l-16.89,8.27l-0.47,5.88l3.95,4.61l-7.7,4.35l-9.99-0.22l-2.09-3.07l-7.83-0.43l-7.42,4.77l-0.16,6.52L576.69,188.62L576.69,188.62z",name:"Kazakhstan"},tm:{path:"M593.85,207.59l-0.62,2.63h-4.15v3.56l4.46,2.94l-1.38,4.03v1.86l1.85,0.31l2.46-3.25l5.54-1.24l11.84,4.49l0.15,3.25l6.61,0.62l7.38-7.75l-0.92-2.48l-4.92-1.08l-13.84-8.99l-0.62-3.25h-5.23l-2.31,4.34h-2.31L593.85,207.59L593.85,207.59z",name:"Turkmenistan"},uz:{path:"M628.92,219.06l3.08,0.16v-5.27l-2.92-1.7l4.92-6.2h2l2,2.33l5.23-2.01l-7.23-2.48l-0.28-1.5l-1.72,0.42l-1.69,2.94l-7.29-0.24l-5.35-7.57l-9.4,0.93l-4.48-4.44l-6.2-1.05l-4.5,1.83l2.61,8.68l0.03,2.92l1.9,0.04l2.33-4.44l6.2,0.08l0.92,3.41l13.29,8.82l5.14,1.18L628.92,219.06L628.92,219.06z",name:"Uzbekistan"},tj:{path:"M630.19,211.84l4.11-5.1h1.55l0.54,1.14l-1.9,1.38v1.14l1.25,0.9l6.01,0.36l1.96-0.84l0.89,0.18l0.6,1.92l3.57,0.36l1.79,3.78l-0.54,1.14l-0.71,0.06l-0.71-1.44l-1.55-0.12l-2.68,0.36l-0.18,2.52l-2.68-0.18l0.12-3.18l-1.96-1.92l-2.98,2.46l0.06,1.62l-2.62,0.9h-1.55l0.12-5.58L630.19,211.84L630.19,211.84z",name:"Tajikistan"},kg:{path:"M636.81,199.21l-0.31,2.53l0.25,1.56l8.7,2.92l-7.64,3.08l-0.87-0.72l-1.65,1.06l0.08,0.58l0.88,0.4l5.36,0.14l2.72-0.82l3.49-4.4l4.37,0.76l5.27-7.3l-14.1-1.92l-1.95,4.73l-2.46-2.64L636.81,199.21L636.81,199.21z",name:"Kyrgyz Republic"},af:{path:"M614.12,227.05l1.59,12.46l3.96,0.87l0.37,2.24l-2.84,2.37l5.29,4.27l10.28-3.7l0.82-4.38l6.47-4.04l2.48-9.36l1.85-1.99l-1.92-3.34l6.26-3.87l-0.8-1.12l-2.89,0.18l-0.26,2.66l-3.88-0.04l-0.07-3.55l-1.25-1.49l-2.1,1.91l0.06,1.75l-3.17,1.2l-5.85-0.37l-7.6,7.96L614.12,227.05L614.12,227.05z",name:"Afghanistan"},pk:{path:"M623.13,249.84l2.6,3.86l-0.25,1.99l-3.46,1.37l-0.25,3.24h3.96l1.36-1.12h7.54l6.8,5.98l0.87-2.87h5.07l0.12-3.61l-5.19-4.98l1.11-2.74l5.32-0.37l7.17-14.95l-3.96-3.11l-1.48-5.23l9.64-0.87l-5.69-8.1l-3.03-0.82l-1.24,1.5l-0.93,0.07l-5.69,3.61l1.86,3.12l-2.1,2.24l-2.6,9.59l-6.43,4.11l-0.87,4.49L623.13,249.84L623.13,249.84z",name:"Pakistan"},"in":{path:"M670.98,313.01l4.58-2.24l2.72-9.84l-0.12-12.08l15.58-16.82v-3.99l3.21-1.25l-0.12-4.61l-3.46-6.73l1.98-3.61l4.33,3.99l5.56,0.25v2.24l-1.73,1.87l0.37,1l2.97,0.12l0.62,3.36h0.87l2.23-3.99l1.11-10.46l3.71-2.62l0.12-3.61l-1.48-2.87l-2.35-0.12l-9.2,6.08l0.58,3.91l-6.46-0.02l-2.28-2.79l-1.24,0.16l0.42,3.88l-13.97-1l-8.66-3.86l-0.46-4.75l-5.77-3.58l-0.07-7.37l-3.96-4.53l-9.1,0.87l0.99,3.96l4.46,3.61l-7.71,15.78l-5.16,0.39l-0.85,1.9l5.08,4.7l-0.25,4.75l-5.19-0.08l-0.56,2.36l4.31-0.19l0.12,1.87l-3.09,1.62l1.98,3.74l3.83,1.25l2.35-1.74l1.11-3.11l1.36-0.62l1.61,1.62l-0.49,3.99l-1.11,1.87l0.25,3.24L670.98,313.01L670.98,313.01z",name:"India"},np:{path:"M671.19,242.56l0.46,4.27l8.08,3.66l12.95,0.96l-0.49-3.13l-8.65-2.38l-7.34-4.37L671.19,242.56L671.19,242.56z",name:"Nepal"},bt:{path:"M695.4,248.08l1.55,2.12l5.24,0.04l-0.53-2.9L695.4,248.08L695.4,248.08z",name:"Bhutan"},bd:{path:"M695.57,253.11l-1.31,2.37l3.4,6.46l0.1,5.04l0.62,1.35l3.99,0.07l2.26-2.17l1.64,0.99l0.33,3.07l1.31-0.82l0.08-3.92l-1.1-0.13l-0.69-3.33l-2.78-0.1l-0.69-1.85l1.7-2.27l0.03-1.12h-4.94L695.57,253.11L695.57,253.11z",name:"Bangladesh"},mm:{path:"M729.44,303.65l-2.77-4.44l2.01-2.82l-1.9-3.49l-1.79-0.34l-0.34-5.86l-2.68-5.19l-0.78,1.24l-1.79,3.04l-2.24,0.34l-1.12-1.47l-0.56-3.95l-1.68-3.16l-6.84-6.45l1.68-1.11l0.31-4.67l2.5-4.2l1.08-10.45l3.62-2.47l0.12-3.81l2.17,0.72l3.42,4.95l-2.54,5.44l1.71,4.27l4.23,1.66l0.77,4.65l5.68,0.88l-1.57,2.71l-7.16,2.82l-0.78,4.62l5.26,6.76l0.22,3.61l-1.23,1.24l0.11,1.13l3.92,5.75l0.11,5.97L729.44,303.65L729.44,303.65z",name:"Myanmar"},th:{path:"M730.03,270.47l3.24,4.17v5.07l1.12,0.56l5.15-2.48l1.01,0.34l6.15,7.1l-0.22,4.85l-2.01-0.34l-1.79-1.13l-1.34,0.11l-2.35,3.94l0.45,2.14l1.9,1.01l-0.11,2.37l-1.34,0.68l-4.59-3.16v-2.82l-1.9-0.11l-0.78,1.24l-0.4,12.62l2.97,5.42l5.26,5.07l-0.22,1.47l-2.8-0.11l-2.57-3.83h-2.69l-3.36-2.71l-1.01-2.82l1.45-2.37l0.5-2.14l1.58-2.8l-0.07-6.44l-3.86-5.58l-0.16-0.68l1.25-1.26l-0.29-4.43l-5.14-6.51l0.6-3.75L730.03,270.47L730.03,270.47z",name:"Thailand"},kh:{path:"M740.48,299.47l4.09,4.37l7.61-5.64l0.67-8.9l-3.93,2.71l-2.04-1.14l-2.77-0.37l-1.55-1.09l-0.75,0.04l-2.03,3.33l0.33,1.54l2.06,1.15l-0.25,3.13L740.48,299.47L740.48,299.47z",name:"Cambodia"},la:{path:"M735.47,262.93l-2.42,1.23l-2.01,5.86l3.36,4.28l-0.56,4.73l0.56,0.23l5.59-2.71l7.5,8.38l-0.18,5.28l1.63,0.88l4.03-3.27l-0.33-2.59l-11.63-11.05l0.11-1.69l1.45-1.01l-1.01-2.82l-4.81-0.79L735.47,262.93L735.47,262.93z",name:"Lao People's Democratic Republic"},vn:{path:"M745.06,304.45l1.19,1.87l0.22,2.14l3.13,0.34l3.8-5.07l3.58-1.01l1.9-5.18l-0.89-8.34l-3.69-5.07l-3.89-3.11l-4.95-8.5l3.55-5.94l-5.08-5.83l-4.07-0.18l-3.66,1.97l1.09,4.71l4.88,0.86l1.31,3.63l-1.72,1.12l0.11,0.9l11.45,11.2l0.45,3.29l-0.69,10.4L745.06,304.45L745.06,304.45z",name:"Vietnam"},ge:{path:"M555.46,204.16l3.27,4.27l4.08,1.88l2.51-0.01l4.31-1.17l1.08-1.69l-12.75-4.77L555.46,204.16L555.46,204.16z",name:"Georgia"},am:{path:"M569.72,209.89l4.8,6.26l-1.41,1.65l-3.4-0.59l-4.22-3.78l0.23-2.48L569.72,209.89L569.72,209.89z",name:"Armenia"},az:{path:"M571.41,207.72l-1.01,1.72l4.71,6.18l1.64-0.53l2.7,2.83l1.17-4.96l2.93,0.47l-0.12-1.42l-4.82-4.22l-0.92,2.48L571.41,207.72L571.41,207.72z",name:"Azerbaijan"},ir:{path:"M569.65,217.95l-1.22,1.27l0.12,2.01l1.52,2.13l5.39,5.9l-0.82,2.36h-0.94l-0.47,2.36l3.05,3.9l2.81,0.24l5.63,7.79l3.16,0.24l2.46,1.77l0.12,3.54l9.73,5.67h3.63l2.23-1.89l2.81-0.12l1.64,3.78l10.51,1.46l0.31-3.86l3.48-1.26l0.16-1.38l-2.77-3.78l-6.17-4.96l3.24-2.95l-0.23-1.3l-4.06-0.63l-1.72-13.7l-0.2-3.15l-11.01-4.21l-4.88,1.1l-2.73,3.35l-2.42-0.16l-0.7,0.59l-5.39-0.35l-6.8-4.96l-2.53-2.77l-1.16,0.28l-2.09,2.39L569.65,217.95L569.65,217.95z",name:"Iran"},tr:{path:"M558.7,209.19l-2.23,2.36l-8.2-0.24l-4.92-2.95l-4.8-0.12l-5.51,3.9l-5.16,0.24l-0.47,2.95h-5.86l-2.34,2.13v1.18l1.41,1.18v1.3l-0.59,1.54l0.59,1.3l1.88-0.94l1.88,2.01l-0.47,1.42l-0.7,0.95l1.05,1.18l5.16,1.06l3.63-1.54v-2.24l1.76,0.35l4.22,2.48l4.57-0.71l1.99-1.89l1.29,0.47v2.13h1.76l1.52-2.95l13.36-1.42l5.83-0.71l-1.54-2.02l-0.03-2.73l1.17-1.4l-4.26-3.42l0.23-2.95h-2.34L558.7,209.19L558.7,209.19M523.02,209.7l-0.16,3.55l3.1-0.95l1.42-0.95l-0.42-1.54l-1.47-1.17L523.02,209.7L523.02,209.7z",name:"Turkey"},om:{path:"M598.38,280.84l7.39-4.26l1.31-6.25l-1.62-0.93l0.67-6.7l1.41-0.82l1.51,2.37l8.99,4.7v2.61l-10.89,16.03l-5.01,0.17L598.38,280.84L598.38,280.84z",name:"Oman"},ae:{path:"M594.01,264.94l0.87,3.48l9.86,0.87l0.69-7.14l1.9-1.04l0.52-2.61l-3.11,0.87l-3.46,5.23L594.01,264.94L594.01,264.94z",name:"United Arab Emirates"},qa:{path:"M592.63,259.02l-0.52,4.01l1.54,1.17l1.4-0.13l0.52-5.05l-1.21-0.87L592.63,259.02L592.63,259.02z",name:"Qatar"},kw:{path:"M583.29,247.17l-2.25-1.22l-1.56,1.57l0.17,3.14l3.63,1.39L583.29,247.17L583.29,247.17z",name:"Kuwait"},sa:{path:"M584,253.24l7.01,9.77l2.26,1.8l1.01,4.38l10.79,0.85l1.22,0.64l-1.21,5.4l-7.09,4.18l-10.37,3.14l-5.53,5.4l-6.57-3.83l-3.98,3.48L566,279.4l-3.8-1.74l-1.38-2.09v-4.53l-13.83-16.72l-0.52-2.96h3.98l4.84-4.18l0.17-2.09l-1.38-1.39l2.77-2.26l5.88,0.35l10.03,8.36l5.92-0.27l0.38,1.46L584,253.24L584,253.24z",name:"Saudi Arabia"},sy:{path:"M546.67,229.13l-0.35,2.54l2.82,1.18l-0.12,7.04l2.82-0.06l2.82-2.13l1.06-0.18l6.4-5.09l1.29-7.39l-12.79,1.3l-1.35,2.96L546.67,229.13L546.67,229.13z",name:"Syrian Arab Republic"},iq:{path:"M564.31,225.03l-1.56,7.71l-6.46,5.38l0.41,2.54l6.31,0.43l10.05,8.18l5.62-0.16l0.15-1.89l2.06-2.21l2.88,1.63l0.38-0.36l-5.57-7.41l-2.64-0.16l-3.51-4.51l0.7-3.32l1.07-0.14l0.37-1.47l-4.78-5.03L564.31,225.03L564.31,225.03z",name:"Iraq"},jo:{path:"M548.9,240.78l-2.46,8.58l-0.11,1.31h3.87l4.33-3.82l0.11-1.45l-1.77-1.81l3.17-2.63l-0.46-2.44l-0.87,0.2l-2.64,1.89L548.9,240.78L548.9,240.78z",name:"Jordan"},lb:{path:"M546.2,232.44l0.06,1.95l-0.82,2.96l2.82,0.24l0.18-4.2L546.2,232.44L546.2,232.44z",name:"Lebanon"},il:{path:"M545.32,238.06l-1.58,5.03l2.05,6.03l2.35-8.81v-1.89L545.32,238.06L545.32,238.06z",name:"Israel"},cy:{path:"M543.21,229.84l1.23,0.89l-3.81,3.61l-1.82-0.06l-1.35-0.95l0.18-1.77l2.76-0.18L543.21,229.84L543.21,229.84z",name:"Cyprus"},gb:{path:"M446.12,149.08l-1.83,2.77l0.73,1.11h4.22v1.85l-1.1,1.48l0.73,3.88l2.38,4.62l1.83,4.25l2.93,1.11l1.28,2.22l-0.18,2.03l-1.83,1.11l-0.18,0.92l1.28,0.74l-1.1,1.48l-2.57,1.11l-4.95-0.55l-7.71,3.51l-2.57-1.29l7.34-4.25l-0.92-0.55l-3.85-0.37l2.38-3.51l0.37-2.96l3.12-0.37l-0.55-5.73l-3.67-0.18l-1.1-1.29l0.18-4.25l-2.2,0.18l2.2-7.39l4.04-2.96L446.12,149.08L446.12,149.08M438.42,161.47l-3.3,0.37l-0.18,2.96l2.2,1.48l2.38-0.55l0.92-1.66L438.42,161.47L438.42,161.47z",name:"United Kingdom"},ie:{path:"M439.51,166.55l-0.91,6l-8.07,2.96h-2.57l-1.83-1.29v-1.11l4.04-2.59l-1.1-2.22l0.18-3.14l3.49,0.18l1.6-3.76l-0.21,3.34l2.71,2.15L439.51,166.55L439.51,166.55z",name:"Ireland"},se:{path:"M497.72,104.58l1.96,1.81h3.67l2.02,3.88l0.55,6.65l-4.95,3.51v3.51l-3.49,4.81l-2.02,0.18l-2.75,4.62l0.18,4.44l4.77,3.51l-0.37,2.03l-1.83,2.77l-2.75,2.4l0.18,7.95l-4.22,1.48l-1.47,3.14h-2.02l-1.1-5.54l-4.59-7.04l3.77-6.31l0.26-15.59l2.6-1.43l0.63-8.92l7.41-10.61L497.72,104.58L497.72,104.58M498.49,150.17l-2.11,1.67l1.06,2.45l1.87-1.82L498.49,150.17L498.49,150.17z",name:"Sweden"},fi:{path:"M506.79,116.94l2.07,0.91l1.28,2.4l-1.28,1.66l-6.42,7.02l-1.1,3.7l1.47,5.36l4.95,3.7l6.6-3.14l5.32-0.74l4.95-7.95l-3.67-8.69l-3.49-8.32l0.55-5.36l-2.2-0.37l-0.57-3.91l-2.96-4.83l-3.28,2.27l-1.29,5.27l-3.48-2.09l-4.84-1.18l-1.08,1.26l1.86,1.68l3.39-0.06l2.73,4.41L506.79,116.94L506.79,116.94z",name:"Finland"},lv:{path:"M518.07,151.37l-6.85-1.11l0.15,3.83l6.35,3.88l2.6-0.76l-0.15-2.92L518.07,151.37L518.07,151.37z",name:"Latvia"},lt:{path:"M510.81,154.7l-2.15-0.05l-2.95,2.82h-2.5l0.15,3.53l-1.5,2.77l5.4,0.05l1.55-0.2l1.55,1.87l3.55-0.15l3.4-4.33l-0.2-2.57L510.81,154.7L510.81,154.7z",name:"Lithuania"},by:{path:"M510.66,166.29l1.5,2.47l-0.6,1.97l0.1,1.56l0.55,1.87l3.1-1.76l3.85,0.1l2.7,1.11h6.85l2-4.79l1.2-1.81v-1.21l-4.3-6.05l-3.8-1.51l-3.1-0.35l-2.7,0.86l0.1,2.72l-3.75,4.74L510.66,166.29L510.66,166.29z",name:"Belarus"},pl:{path:"M511.46,174.76l0.85,1.56l0.2,1.66l-0.7,1.61l-1.6,3.08l-1.35,0.61l-1.75-0.76l-1.05,0.05l-2.55,0.96l-2.9-0.86l-4.7-3.33l-4.6-2.47l-1.85-2.82l-0.35-6.65l3.6-3.13l4.7-1.56l1.75-0.2l-0.7,1.41l0.45,0.55l7.91,0.15l1.7-0.05l2.8,4.29l-0.7,1.76l0.3,2.07L511.46,174.76L511.46,174.76z",name:"Poland"},it:{path:"M477.56,213.38l-2.65,1.34l0.35,5.17l2.12,0.36l1.59-1.52v-4.9L477.56,213.38L477.56,213.38M472.27,196.98l-0.62,1.57l0.17,1.71l2.39,2.79l3.76-0.13l8.3,9.64l5.18,1.5l3.06,2.89l0.73,6.59l1.64-0.96l1.42-3.59l-0.35-2.58l2.43-0.22l0.35-1.46l-6.85-3.28l-6.5-6.39l-2.59-3.82l-0.63-3.63l3.31-0.79l-0.85-2.39l-2.03-1.71l-1.75-0.08l-2.44,0.67l-2.3,3.22l-1.39,0.92l-2.15-1.32L472.27,196.98L472.27,196.98M492.44,223.02l-1.45-0.78l-4.95,0.78l0.17,1.34l4.45,2.24l0.67,0.73l1.17,0.17L492.44,223.02L492.44,223.02z",name:"Italy"},fr:{path:"M477.83,206.96l-1.95,1.96l-0.18,1.78l1.59,0.98l0.62-0.09l0.35-2.59L477.83,206.96L477.83,206.96M460.4,178.7l-2.21,0.54l-4.42,4.81l-1.33,0.09l-1.77-1.25l-1.15,0.27l-0.88,2.76l-6.46,0.18l0.18,1.43l4.42,2.94l5.13,4.1l-0.09,4.9l-2.74,4.81l5.93,2.85l6.02,0.18l1.86-2.14l3.8,0.09l1.06,0.98l3.8-0.27l1.95-2.5l-2.48-2.94l-0.18-1.87l0.53-2.05l-1.24-1.78l-2.12,0.62l-0.27-1.6l4.69-5.17v-3.12l-3.1-1.78l-1.59-0.27L460.4,178.7L460.4,178.7z",name:"France"},nl:{path:"M470.09,168.27l-4.53,2.23l0.96,0.87l0.1,2.23l-0.96-0.19l-1.06-1.65l-2.53,4.01l3.89,0.81l1.45,1.53l0.77,0.02l0.51-3.46l2.45-1.03L470.09,168.27L470.09,168.27z",name:"Netherlands"},be:{path:"M461.61,176.52l-0.64,1.6l6.88,4.54l1.98,0.47l0.07-2.15l-1.73-1.94h-1.06l-1.45-1.65L461.61,176.52L461.61,176.52z",name:"Belgium"},de:{path:"M471.14,167.88l3.57-0.58v-2.52l2.99-0.49l1.64,1.65l1.73,0.19l2.7-1.17l2.41,0.68l2.12,1.84l0.29,6.89l2.12,2.82l-2.79,0.39l-4.63,2.91l0.39,0.97l4.14,3.88l-0.29,1.94l-3.85,1.94l-3.57,0.1l-0.87,1.84h-1.83l-0.87-1.94l-3.18-0.78l-0.1-3.2l-2.7-1.84l0.29-2.33l-1.83-2.52l0.48-3.3l2.5-1.17L471.14,167.88L471.14,167.88z",name:"Germany"},dk:{path:"M476.77,151.5l-4.15,4.59l-0.15,2.99l1.89,4.93l2.96-0.56l-0.37-4.03l2.04-2.28l-0.04-1.79l-1.44-3.73L476.77,151.5L476.77,151.5M481.44,159.64l-0.93-0.04l-1.22,1.12l0.15,1.75l2.89,0.08l0.15-1.98L481.44,159.64L481.44,159.64z",name:"Denmark"},ch:{path:"M472.91,189.38l-4.36,4.64l0.09,0.47l1.79-0.56l1.61,2.24l2.72-0.96l1.88,1.46l0.77-0.44l2.32-3.64l-0.59-0.56l-2.29-0.06l-1.11-2.27L472.91,189.38L472.91,189.38z",name:"Switzerland"},cz:{path:"M488.43,184.87h2.97h1.46l2.37,1.69l4.39-3.65l-4.26-3.04l-4.22-2.04l-2.89,0.52l-3.92,2.52L488.43,184.87L488.43,184.87z",name:"Czech Republic"},sk:{path:"M495.84,187.13l0.69,0.61l0.09,1.04l7.63-0.17l5.64-2.43l-0.09-2.47l-1.08,0.48l-1.55-0.83l-0.95-0.04l-2.5,1l-3.4-0.82L495.84,187.13L495.84,187.13z",name:"Slovakia"},at:{path:"M480.63,190.12l-0.65,1.35l0.56,0.96l2.33-0.48h1.98l2.15,1.82l4.57-0.83l3.36-2l0.86-1.35l-0.13-1.74l-3.02-2.26l-4.05,0.04l-0.34,2.3l-4.26,2.08L480.63,190.12L480.63,190.12z",name:"Austria"},hu:{path:"M496.74,189.6l-1.16,1.82l0.09,2.78l1.85,0.95l5.69,0.17l7.93-6.68l0.04-1.48l-0.86-0.43l-5.73,2.6L496.74,189.6L496.74,189.6z",name:"Hungary"},si:{path:"M494.8,191.99l-2.54,1.52l-4.74,1.04l0.95,2.74l3.32,0.04l3.06-2.56L494.8,191.99L494.8,191.99z",name:"Slovenia"},hr:{path:"M495.62,195.16l-3.53,2.91h-3.58l-0.43,2.52l1.64,0.43l0.82-1.22l1.29,1.13l1.03,3.6l7.07,3.3l0.7-0.8l-7.17-7.4l0.73-1.35l6.81-0.26l0.69-2.17l-4.44,0.13L495.62,195.16L495.62,195.16z",name:"Croatia"},ba:{path:"M494.8,198.94l-0.37,0.61l6.71,6.92l2.46-3.62l-0.09-1.43l-2.15-2.61L494.8,198.94L494.8,198.94z",name:"Bosnia and Herzegovina"},mt:{path:"M492.61,230.47l-1.67,0.34l0.06,1.85l1.5,0.5l0.67-0.56L492.61,230.47L492.61,230.47z",name:"Malta"},ua:{path:"M515.57,173.15l-2.9,1.63l0.72,3.08l-2.68,5.65l0.02,2.49l1.26,0.8l8.08,0.4l2.26-1.87l2.42,0.81l3.47,4.63l-2.54,4.56l3.02,0.88l3.95-4.55l2.26,0.41l2.1,1.46l-1.85,2.44l2.5,3.9h2.66l1.37-2.6l2.82-0.57l0.08-2.11l-5.24-0.81l0.16-2.27h5.08l5.48-4.39l2.42-2.11l0.4-6.66l-10.8-0.97l-4.43-6.25l-3.06-1.05l-3.71,0.16l-1.67,4.13l-7.6,0.1l-2.47-1.14L515.57,173.15L515.57,173.15z",name:"Ukraine"},md:{path:"M520.75,187.71l3.1,4.77l-0.26,2.7l1.11,0.05l2.63-4.45l-3.16-3.92l-1.79-0.74L520.75,187.71L520.75,187.71z",name:"Moldova"},ro:{path:"M512.18,187.6l-0.26,1.48l-5.79,4.82l4.84,7.1l3.1,2.17h5.58l1.84-1.54l2.47-0.32l1.84,1.11l3.26-3.71l-0.63-1.86l-3.31-0.85l-2.26-0.11l0.11-3.18l-3-4.72L512.18,187.6L512.18,187.6z",name:"Romania"},rs:{path:"M505.55,194.54l-2.05,1.54h-1l-0.68,2.12l2.42,2.81l0.16,2.23l-3,4.24l0.42,1.27l1.74,0.32l1.37-1.86l0.74-0.05l1.26,1.22l3.84-1.17l-0.32-5.46L505.55,194.54L505.55,194.54z",name:"Serbia"},bg:{path:"M511.44,202.39l0.16,4.98l1.68,3.5l6.31,0.11l2.84-2.01l2.79-1.11l-0.68-3.18l0.63-1.7l-1.42-0.74l-1.95,0.16l-1.53,1.54l-6.42,0.05L511.44,202.39L511.44,202.39z",name:"Bulgaria"},al:{path:"M504.02,209.76v4.61l1.32,2.49l0.95-0.11l1.63-2.97l-0.95-1.33l-0.37-3.29l-1.26-1.17L504.02,209.76L504.02,209.76z",name:"Albania"},mk:{path:"M510.92,208.01l-3.37,1.11l0.16,2.86l0.79,1.01l4-1.86L510.92,208.01L510.92,208.01z",name:"Macedonia"},gr:{path:"M506.71,217.6l-0.11,1.33l4.63,2.33l2.21,0.85l-1.16,1.22l-2.58,0.26l-0.37,1.17l0.89,2.01l2.89,1.54l1.26,0.11l0.16-3.45l1.89-2.28l-5.16-6.1l0.68-2.07l1.21-0.05l1.84,1.48l1.16-0.58l0.37-2.07l5.42,0.05l0.21-3.18l-2.26,1.59l-6.63-0.16l-4.31,2.23L506.71,217.6L506.71,217.6M516.76,230.59l1.63,0.05l0.68,1.01h2.37l1.58-0.58l0.53,0.64l-1.05,1.38l-4.63,0.16l-0.84-1.11l-0.89-0.53L516.76,230.59L516.76,230.59z",name:"Greece"}}});
},{}],8:[function(require,module,exports){
function copyProps(f,r){for(var e in f)r[e]=f[e]}function SafeBuffer(f,r,e){return Buffer(f,r,e)}var buffer=require(2),Buffer=buffer.Buffer;Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(f,r,e){if("number"==typeof f)throw new TypeError("Argument must not be a number");return Buffer(f,r,e)},SafeBuffer.alloc=function(f,r,e){if("number"!=typeof f)throw new TypeError("Argument must be a number");var u=Buffer(f);return void 0!==r?"string"==typeof e?u.fill(r,e):u.fill(r):u.fill(0),u},SafeBuffer.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Buffer(f)},SafeBuffer.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(f)};
},{"2":2}],9:[function(require,module,exports){
function Hash(t,i){this._block=Buffer.alloc(t),this._finalSize=i,this._blockSize=t,this._len=0}var Buffer=require(8).Buffer;Hash.prototype.update=function(t,i){"string"==typeof t&&(i=i||"utf8",t=Buffer.from(t,i));for(var e=this._block,s=this._blockSize,h=t.length,o=this._len,l=0;l<h;){for(var r=o%s,_=Math.min(h-l,s-r),n=0;n<_;n++)e[r+n]=t[l+n];o+=_,l+=_,o%s===0&&this._update(e)}return this._len+=h,this},Hash.prototype.digest=function(t){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var e=8*this._len;if(e<=4294967295)this._block.writeUInt32BE(e,this._blockSize-4);else{var s=(4294967295&e)>>>0,h=(e-s)/4294967296;this._block.writeUInt32BE(h,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=Hash;
},{"8":8}],10:[function(require,module,exports){
var exports=module.exports=function(e){e=e.toLowerCase();var r=exports[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};exports.sha=require(11),exports.sha1=require(12),exports.sha224=require(13),exports.sha256=require(14),exports.sha384=require(15),exports.sha512=require(16);
},{"11":11,"12":12,"13":13,"14":14,"15":15,"16":16}],11:[function(require,module,exports){
function Sha(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,i,r,h){return 0===t?i&r|~i&h:2===t?i&r|i&h|r&h:i^r^h}var inherits=require(4),Hash=require(9),Buffer=require(8).Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);inherits(Sha,Hash),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(t){for(var i=this._w,r=0|this._a,h=0|this._b,s=0|this._c,e=0|this._d,n=0|this._e,_=0;_<16;++_)i[_]=t.readInt32BE(4*_);for(;_<80;++_)i[_]=i[_-3]^i[_-8]^i[_-14]^i[_-16];for(var a=0;a<80;++a){var o=~~(a/20),f=rotl5(r)+ft(o,h,s,e)+n+i[a]+K[o]|0;n=e,e=s,s=rotl30(h),h=r,r=f}this._a=r+this._a|0,this._b=h+this._b|0,this._c=s+this._c|0,this._d=e+this._d|0,this._e=n+this._e|0},Sha.prototype._hash=function(){var t=Buffer.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=Sha;
},{"4":4,"8":8,"9":9}],12:[function(require,module,exports){
function Sha1(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl1(t){return t<<1|t>>>31}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,i,r,h){return 0===t?i&r|~i&h:2===t?i&r|i&h|r&h:i^r^h}var inherits=require(4),Hash=require(9),Buffer=require(8).Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);inherits(Sha1,Hash),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(t){for(var i=this._w,r=0|this._a,h=0|this._b,s=0|this._c,e=0|this._d,n=0|this._e,_=0;_<16;++_)i[_]=t.readInt32BE(4*_);for(;_<80;++_)i[_]=rotl1(i[_-3]^i[_-8]^i[_-14]^i[_-16]);for(var a=0;a<80;++a){var o=~~(a/20),f=rotl5(r)+ft(o,h,s,e)+n+i[a]+K[o]|0;n=e,e=s,s=rotl30(h),h=r,r=f}this._a=r+this._a|0,this._b=h+this._b|0,this._c=s+this._c|0,this._d=e+this._d|0,this._e=n+this._e|0},Sha1.prototype._hash=function(){var t=Buffer.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=Sha1;
},{"4":4,"8":8,"9":9}],13:[function(require,module,exports){
function Sha224(){this.init(),this._w=W,Hash.call(this,64,56)}var inherits=require(4),Sha256=require(14),Hash=require(9),Buffer=require(8).Buffer,W=new Array(64);inherits(Sha224,Sha256),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var t=Buffer.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},module.exports=Sha224;
},{"14":14,"4":4,"8":8,"9":9}],14:[function(require,module,exports){
function Sha256(){this.init(),this._w=W,Hash.call(this,64,56)}function ch(t,i,h){return h^t&(i^h)}function maj(t,i,h){return t&i|h&(t|i)}function sigma0(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function sigma1(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function gamma0(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function gamma1(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}var inherits=require(4),Hash=require(9),Buffer=require(8).Buffer,K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W=new Array(64);inherits(Sha256,Hash),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(t){for(var i=this._w,h=0|this._a,s=0|this._b,r=0|this._c,e=0|this._d,n=0|this._e,_=0|this._f,a=0|this._g,f=0|this._h,u=0;u<16;++u)i[u]=t.readInt32BE(4*u);for(;u<64;++u)i[u]=gamma1(i[u-2])+i[u-7]+gamma0(i[u-15])+i[u-16]|0;for(var o=0;o<64;++o){var c=f+sigma1(n)+ch(n,_,a)+K[o]+i[o]|0,m=sigma0(h)+maj(h,s,r)|0;f=a,a=_,_=n,n=e+c|0,e=r,r=s,s=h,h=c+m|0}this._a=h+this._a|0,this._b=s+this._b|0,this._c=r+this._c|0,this._d=e+this._d|0,this._e=n+this._e|0,this._f=_+this._f|0,this._g=a+this._g|0,this._h=f+this._h|0},Sha256.prototype._hash=function(){var t=Buffer.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},module.exports=Sha256;
},{"4":4,"8":8,"9":9}],15:[function(require,module,exports){
function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}var inherits=require(4),SHA512=require(16),Hash=require(9),Buffer=require(8).Buffer,W=new Array(160);inherits(Sha384,SHA512),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){function h(h,t,s){i.writeInt32BE(h,s),i.writeInt32BE(t,s+4)}var i=Buffer.allocUnsafe(48);return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),i},module.exports=Sha384;
},{"16":16,"4":4,"8":8,"9":9}],16:[function(require,module,exports){
function Sha512(){this.init(),this._w=W,Hash.call(this,128,112)}function Ch(h,t,i){return i^h&(t^i)}function maj(h,t,i){return h&t|i&(h|t)}function sigma0(h,t){return(h>>>28|t<<4)^(t>>>2|h<<30)^(t>>>7|h<<25)}function sigma1(h,t){return(h>>>14|t<<18)^(h>>>18|t<<14)^(t>>>9|h<<23)}function Gamma0(h,t){return(h>>>1|t<<31)^(h>>>8|t<<24)^h>>>7}function Gamma0l(h,t){return(h>>>1|t<<31)^(h>>>8|t<<24)^(h>>>7|t<<25)}function Gamma1(h,t){return(h>>>19|t<<13)^(t>>>29|h<<3)^h>>>6}function Gamma1l(h,t){return(h>>>19|t<<13)^(t>>>29|h<<3)^(h>>>6|t<<26)}function getCarry(h,t){return h>>>0<t>>>0?1:0}var inherits=require(4),Hash=require(9),Buffer=require(8).Buffer,K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W=new Array(160);inherits(Sha512,Hash),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(h){for(var t=this._w,i=0|this._ah,s=0|this._bh,r=0|this._ch,_=0|this._dh,a=0|this._eh,e=0|this._fh,l=0|this._gh,n=0|this._hh,f=0|this._al,g=0|this._bl,u=0|this._cl,c=0|this._dl,m=0|this._el,o=0|this._fl,y=0|this._gl,C=0|this._hl,d=0;d<32;d+=2)t[d]=h.readInt32BE(4*d),t[d+1]=h.readInt32BE(4*d+4);for(;d<160;d+=2){var b=t[d-30],p=t[d-30+1],v=Gamma0(b,p),G=Gamma0l(p,b);b=t[d-4],p=t[d-4+1];var B=Gamma1(b,p),S=Gamma1l(p,b),w=t[d-14],E=t[d-14+1],I=t[d-32],j=t[d-32+1],q=G+E|0,H=v+w+getCarry(q,G)|0;q=q+S|0,H=H+B+getCarry(q,S)|0,q=q+j|0,H=H+I+getCarry(q,j)|0,t[d]=H,t[d+1]=q}for(var W=0;W<160;W+=2){H=t[W],q=t[W+1];var x=maj(i,s,r),A=maj(f,g,u),U=sigma0(i,f),k=sigma0(f,i),z=sigma1(a,m),D=sigma1(m,a),F=K[W],J=K[W+1],L=Ch(a,e,l),M=Ch(m,o,y),N=C+D|0,O=n+z+getCarry(N,C)|0;N=N+M|0,O=O+L+getCarry(N,M)|0,N=N+J|0,O=O+F+getCarry(N,J)|0,N=N+q|0,O=O+H+getCarry(N,q)|0;var P=k+A|0,Q=U+x+getCarry(P,k)|0;n=l,C=y,l=e,y=o,e=a,o=m,m=c+N|0,a=_+O+getCarry(m,c)|0,_=r,c=u,r=s,u=g,s=i,g=f,f=N+P|0,i=O+Q+getCarry(f,N)|0}this._al=this._al+f|0,this._bl=this._bl+g|0,this._cl=this._cl+u|0,this._dl=this._dl+c|0,this._el=this._el+m|0,this._fl=this._fl+o|0,this._gl=this._gl+y|0,this._hl=this._hl+C|0,this._ah=this._ah+i+getCarry(this._al,f)|0,this._bh=this._bh+s+getCarry(this._bl,g)|0,this._ch=this._ch+r+getCarry(this._cl,u)|0,this._dh=this._dh+_+getCarry(this._dl,c)|0,this._eh=this._eh+a+getCarry(this._el,m)|0,this._fh=this._fh+e+getCarry(this._fl,o)|0,this._gh=this._gh+l+getCarry(this._gl,y)|0,this._hh=this._hh+n+getCarry(this._hl,C)|0},Sha512.prototype._hash=function(){function h(h,i,s){t.writeInt32BE(h,s),t.writeInt32BE(i,s+4)}var t=Buffer.allocUnsafe(64);return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),h(this._gh,this._gl,48),h(this._hh,this._hl,56),t},module.exports=Sha512;
},{"4":4,"8":8,"9":9}],17:[function(require,module,exports){
(function (global){
global.jQuery=require("jquery"),require("bootstrap"),global.__=require(613).translate;var Cfg=require(33),ServiceProvider=require(610),SP=new ServiceProvider;SP.registerConfig(Cfg);var User=require(51),Session=require(46),keypressContainer=require("keypress.js"),keyListener=new keypressContainer.keypress.Listener;SP.registerKeyListener(keyListener);var NotificationCenter=require(609);Cfg.get("notificationSocket")&&SP.registerNotificationCenter(new NotificationCenter(Cfg.get("notificationSocket")));var KiubiApp=require(604),S=new Session({user:new User}),App=new KiubiApp({session:S,serviceProvider:SP}),loader=require(439);new loader,S.start().done(function(){console.log("Already authenticate")}).fail(function(){"/login"!=document.location.pathname&&history.pushState({},document.title,"/login")}).always(function(){App.start({})});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"33":33,"439":439,"46":46,"51":51,"604":604,"609":609,"610":610,"613":613,"undefined":undefined}],18:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),navigationChannel=Backbone.Radio.channel("navigation");module.exports=Marionette.Behavior.extend({options:{maxDepth:3},initialize:function(n){this.listenTo(navigationChannel,"change:url",function(n){this.activateLink(n.path)})},activateLink:function(n){var i=Backbone.$("li a",this.view.el);i.parent().removeClass("active");for(var t=n.split("?")[0].split(/\/|\?/,this.getOption("maxDepth")+1),e=[document.location.origin+n];t.length>1;)e.push(document.location.origin+t.join("/")),t.pop();for(var a,o=0;o<e.length;o++)if(a=i.filter(function(n){return this.href==e[o]}),a.length)return void a.parent().addClass("active")},onRender:function(){this.activateLink(window.location.pathname+window.location.search)}});
},{"undefined":undefined}],19:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({ui:{inputs:"[data-behavior='countable'] input,[data-behavior='countable'] textarea"},events:{"keyup @ui.inputs":"charUpdate"},onRender:function(){this.getUI("inputs").each(function(e,t){this.charCounts(t)}.bind(this))},charCounts:function(e){e&&e.parentElement&&Backbone.$(".letter-counter",e.parentElement).text(Backbone.$(e).val().length)},charUpdate:function(e){this.charCounts(e.target)}});
},{"undefined":undefined}],20:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CodeMirror=require("codemirror"),_=require("underscore");module.exports=Marionette.Behavior.extend({options:{selector:'textarea[data-role="codemirror"]'},editorList:null,errorLines:null,initialize:function(e){this.mergeOptions(e),this.editorList=[],this.errorLines=[]},onDomRefresh:function(){this.clearAll(),Backbone.$(this.options.selector,this.view.$el).each(function(e,i){this.editorList.push(CodeMirror.fromTextArea(i,{lineNumbers:!0}))}.bind(this))},clearAll:function(){_.each(this.editorList,function(e){e.toTextArea()}),this.editorList=[]},onBeforeDestroy:function(){this.clearAll()},onBeforeSave:function(){_.each(this.editorList,function(e){e.save()})},onCodemirrorHighligth:function(e){e=e||[],_.each(this.errorLines,function(e){this.editorList[0].removeLineClass(e,"text")}.bind(this)),this.errorLines=e,_.each(e,function(e){this.editorList[0].addLineClass(e,"text","line-error")}.bind(this))}});
},{"undefined":undefined}],21:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");require("pc-bootstrap4-datetimepicker"),module.exports=Marionette.Behavior.extend({ui:{inputsDate:"input[data-role='datepicker']",inputsDateTime:"input[data-role='datetimepicker']"},events:{"dp.change @ui.inputsDate":"onChange","dp.change @ui.inputsDateTime":"onChange"},loaded:!1,onRender:function(){var e={showTodayButton:!0,widgetPositioning:{horizontal:"auto",vertical:"bottom"},icons:{time:"md-icon md-time",date:"md-icon md-date",up:"md-icon md-up",down:"md-icon md-down",previous:"md-icon md-previous",next:"md-icon md-next",today:"md-icon md-fixed",clear:"md-icon md-delete",close:"md-icon md-close"},tooltips:{today:"Aujourd'hui",clear:"Recommencer",close:"Fermer",selectMonth:"Choisir un mois",prevMonth:"Mois précédent",nextMonth:"Mois suivant",selectYear:"Choisir une année",prevYear:"Année précédente",nextYear:"Année suivante",selectDecade:"Choisir une décennie",prevDecade:"Décennie précédente",nextDecade:"Décennie suivante",prevCentury:"Siècle précédent",nextCentury:"Siècle suivant",incrementHour:"Heure suivante",pickHour:"Choisir une heure",decrementHour:"Heure précédente",incrementMinute:"Minute suivante",pickMinute:"Choisir une minute",decrementMinute:"Minute précédente",incrementSecond:"Seconde précédente",pickSecond:"Choisir une seconde",decrementSecond:"Seconde suivante",togglePeriod:"Changer de période",selectTime:"Choisir l'heure"}},t=this.getUI("inputsDate").datetimepicker(_.extend({format:"DD/MM/YYYY"},e)),n=this.getUI("inputsDateTime").datetimepicker(_.extend({format:"DD/MM/YYYY HH:mm:ss"},e));this.view.triggerMethod("load:datepicker",t.add(n)),this.loaded=!0},onChange:function(e){if(this.loaded){var t=Backbone.$(e.currentTarget);this.view.triggerMethod("field:change",{name:t.attr("name"),value:t.val(),date:e.date})}},onBeforeDestroy:function(){this.getUI("inputsDate").length&&this.getUI("inputsDate").data("DateTimePicker").destroy(),this.getUI("inputsDateTime").length&&this.getUI("inputsDateTime").data("DateTimePicker").destroy()}});
},{"undefined":undefined}],22:[function(require,module,exports){
function contentHeight(t){return Backbone.$(t+" > div").toArray().reduce(function(t,o){return Backbone.$(o).outerHeight(!0)+t},0)}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.Behavior.extend({options:{renderThreshold:50,scrollThreshold:250,contentEl:"#content"},callback:null,$scroll:null,initialize:function(){void 0!=this.view.getOption("scrollThreshold")&&(this.options.scrollThreshold=this.view.getOption("scrollThreshold")),this.view.getOption("scrollContentEl")&&(this.options.contentEl=this.view.getOption("scrollContentEl")),this.callback=_.debounce(this.scrollHandler,150).bind(this)},onAttach:function(){this.$scroll=Backbone.$(this.options.contentEl),this.$scroll.bind("scroll",this,this.callback)},onDestroy:function(){this.$scroll.unbind("scroll",this.callback)},collectionFetchNextPage:function(){var t=this,o=this.view.collection;if(o.meta&&o.meta.link&&o&&!o.isSyncing)return o.isSyncing=!0,o.meta.link.next_page?void o.fetch({url:o.meta.link.next_page,remove:!1}).always(function(){o.isSyncing=!1,t.onDomRefresh()}):void(o.isSyncing=!1)},scrollHandler:function(t){var o=this.$scroll.scrollTop()+this.$scroll.height(),e=contentHeight(this.options.contentEl)-this.options.scrollThreshold;o<e||this.collectionFetchNextPage()},onDomRefresh:function(){this.$scroll&&contentHeight(this.options.contentEl)-this.options.renderThreshold<this.$scroll.height()&&this.collectionFetchNextPage()}});
},{"undefined":undefined}],23:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({onRender:function(){Backbone.$('[data-toggle="popover"]',this.view.el).popover()}});
},{"undefined":undefined}],24:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ControllerChannel=Backbone.Radio.channel("controller");module.exports=Marionette.Behavior.extend({ui:{form:"form",radioInputs:'input[type="radio"]'},events:{"input @ui.form":"onFieldChange"},onFieldChange:function(){ControllerChannel.trigger("modified:content")}});
},{"undefined":undefined}],25:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({options:{contentEl:"#content"},level:0,offset:null,initialize:function(e){this.listenTo(this.view,"freeze:scroll",this.onFreezeScroll),this.listenTo(this.view,"unfreeze:scroll",this.onUnFreezeScroll)},onFreezeScroll:function(){this.level++,1==this.level&&(this.offset=Backbone.$(this.options.contentEl).scrollTop())},onUnFreezeScroll:function(){this.level--,this.level<=0&&(this.level=0,null!=this.offset&&Backbone.$(this.options.contentEl).scrollTop(this.offset),this.offset=null)}});
},{"undefined":undefined}],26:[function(require,module,exports){
function selectify(e,t){var a=Backbone.$,n=a.extend({btnSize:"",btnStyle:"",direction:"down"},t);return e.each(function(e){var t=a(this);if(!t.data("style-loaded")){t.data("style-loaded",!0);var d=void 0==t.attr("id")?"fake-select-"+e:t.attr("id");n=a.extend({},n,t.data()),t.before('<div class="fake-select '+("down"==n.direction?"dropdown":"dropup")+'" id="'+d+'-mask"><button type="button" class="btn btn-secondary '+n.btnStyle+" "+n.btnSize+' dropdown-toggle" data-toggle="dropdown"><span class="fake-selected">'+getLabel(a("option:selected",t))+'</span></button><ul class="dropdown-menu dropdown-control"></ul></div>');var i=t.prev(".fake-select"),o=t.prop("selectedIndex"),s=i.find(".dropdown-menu"),l=0;t.find("option, optgroup").each(function(){var e,t=Backbone.$(this).data("indent"),a=void 0!=t&&null!=t&&""!=t?"page-level-"+t:"";"OPTGROUP"==this.tagName?e='<li class="'+a+'"><span class="dropdown-item disabled">'+_.escape(this.label)+"</span></li>":(e='<li class="'+a+(l==o?" active":"")+'"><a class="dropdown-item" data-index="'+this.index+'" href="#">'+this.innerHTML+"</a></li>",l++),s.append(e)}),i.attr("title",t.attr("title")||""),i.find(".dropdown-menu li a").each(function(){a(this).click(function(e){a(".dropdown-menu li",i).removeClass("active"),a(this).parent().addClass("active"),t.prop("selectedIndex",a(this).data("index")).change(),e.preventDefault()})}),t.hide(),t.on("change",function(){a(this).parents("form").trigger("input"),i.find(".fake-selected").html(getLabel(a("option:selected",t)));var e=t.prop("selectedIndex");a(".dropdown-menu li",i).removeClass("active"),a('.dropdown-menu li a[data-index="'+e+'"]',i).parent().addClass("active")})}})}function getLabel(e){return(e.data("tags")?'<span class="md-icon md-item-type '+e.data("tags")+'"></span>':"")+_.escape(e.text())}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.Behavior.extend({onRender:function(){selectify(Backbone.$('select[data-style="selectify"]',this.view.el),{})}});
},{"undefined":undefined}],27:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Forms=require(608),LoaderTpl=require(92),ControllerChannel=Backbone.Radio.channel("controller"),SelectifyBehavior=require(26),ScrollFixBehavior=require(25),SaveBehavior=require(24);module.exports=Marionette.Behavior.extend({ui:{save:"button[data-role='save']",cancel:"button[data-role='cancel']","delete":"button[data-role='delete']",errors:"div[data-role='errors']"},events:{"click @ui.save":"onSave","click @ui.cancel":"onCancel","click @ui.delete":"onDelete"},behaviors:[SelectifyBehavior,ScrollFixBehavior,SaveBehavior],initialize:function(e){this.mergeOptions(e),this.lockSave=!1,this.lockDelete=!1,this.listenTo(ControllerChannel,"meta:s:shortcut",this.onSave.bind(this))},onSimpleFormSave:function(e){e?e.promise=this.onSave():this.onSave()},onSave:function(e){if(this.view.trigger("freeze:scroll"),!this.view.onSave)return void this.view.trigger("unfreeze:scroll");if(e&&e.preventDefault(),!this.lockSave){this.lockSave=!0,Forms.clearErrors(this.getUI("errors"),this.view.el),this.view.triggerMethod("before:save"),_.each(this.view.getRegions(),function(e){e.currentView&&e.currentView.triggerMethod("before:save")});var t=this.view.onSave();if(!t)return ControllerChannel.trigger("saved:content"),this.lockSave=!1,void this.view.trigger("unfreeze:scroll");var i=this.getUI("save");i.addClass("btn-load");var r=i.text();return i.html(LoaderTpl()),t.done(function(){ControllerChannel.trigger("saved:content")}).fail(function(e){Backbone.$("#content").animate({scrollTop:0},"slow"),Forms.displayErrors(e,this.getUI("errors"),this.view.el)}.bind(this)).always(function(){this.lockSave=!1,i.removeClass("btn-load"),i.html('C\'est fait <span class="md-icon md-done"></span>'),setTimeout(function(){i&&i.text(r)},2e3),this.view.trigger("unfreeze:scroll")}.bind(this))}},onCancel:function(e){if(!this.view.onCancel)return void Backbone.history.history.back();e&&e.preventDefault(),this.view.triggerMethod("before:cancel"),_.each(this.view.getRegions(),function(e){e.currentView&&e.currentView.triggerMethod("before:cancel")});var t=this.view.onCancel();if(t){var i=this.getUI("cancel");i.addClass("btn-load");i.text();return i.html(LoaderTpl()),t.fail(function(e){Backbone.$("#content").animate({scrollTop:0},"slow"),Forms.displayErrors(e,this.getUI("errors"),this.view.el)}.bind(this)).always(function(){Backbone.history.history.back()}.bind(this))}},onDelete:function(e){if(this.view.onDelete){e&&e.preventDefault();var t=this.getUI("delete");if(!t.hasClass("confirm-warning"))return t.addClass("confirm-warning"),t.data("label",t.text()),void t.text("Confirmer");if(!this.lockDelete){this.lockDelete=!0;var i=this.view.onDelete();if(!i)return this.lockDelete=!1,t.removeClass("confirm-warning"),void t.text(t.data("label"));t.removeClass("confirm-warning"),t.addClass("btn-load"),t.html(LoaderTpl()),i.always(function(){this.lockDelete=!1,t.removeClass("btn-load"),t.text(t.data("label"))}.bind(this))}}},onChildviewSave:function(){this.view.triggerMethod("save")}});
},{"24":24,"25":25,"26":26,"608":608,"92":92,"undefined":undefined}],28:[function(require,module,exports){
function addSign(e,t){var i=t.match(/(^|\/)([0-9]+)(\?|$|\/|\.)/);if(i){var n=Session.hashMedia(parseInt(i[2])),a=t.indexOf("?");return a>=0&&(t=t.substring(0,a)),'src="https://'+Session.site.get("backoffice")+"/media/"+t+"?sign="+n+'"'}return e}function addSignInSrc(e,t){var i=t.match(/(^|\/)([0-9]+)(\?|$|\/|\.)/);if(i){var n=Session.hashMedia(parseInt(i[2])),a=t.indexOf("?");return a>=0&&(t=t.substring(0,a)),"https://"+Session.site.get("backoffice")+"/media/"+t+"?sign="+n}}function removeSign(e,t){return'src="'+removeSignInSrc(e,t)+'"'}function removeSignInSrc(e,t){return"/media/"+t.replace(/(\?|\&)sign=[-a-zA-Z0-9]+/,"")}function settingToHTML(e,t){var i="";if("image"==e.get("type")&&t.integration_type&&"inline"==t.integration_type){var n="";switch(t.image_variant){case"g_vignette":n="/g_vignette";break;case"vignette":n="/vignette";break;case"g_miniature":n="/g_miniature";break;case"miniature":n="/miniature"}var a="";switch(t.image_align){case"left":case"right":case"middle":a=t.image_align}i='<img src="/media'+n+"/"+e.get("media_id")+'" '+(""!=a?' align="'+a+'" ':"")+(""==t.image_height||isNaN(parseFloat(t.image_height))?"":' height="'+parseFloat(t.image_height)+'px" ')+(""==t.image_width||isNaN(parseFloat(t.image_width))?"":' width="'+parseFloat(t.image_width)+'px" ')+(""!=t["class"]?' class="'+_.escape(t["class"])+'" ':"")+' style="'+(""==t.margin_top||isNaN(parseFloat(t.margin_top))?"":" margin-top:"+parseFloat(t.margin_top)+"px;")+(""==t.margin_right||isNaN(parseFloat(t.margin_right))?"":" margin-right:"+parseFloat(t.margin_right)+"px;")+(""==t.margin_left||isNaN(parseFloat(t.margin_left))?"":" margin-left:"+parseFloat(t.margin_left)+"px;")+(""==t.margin_bottom||isNaN(parseFloat(t.margin_bottom))?"":" margin-bottom:"+parseFloat(t.margin_bottom)+"px;")+'"'+(""!=t.alt?' alt="'+_.escape(t.alt)+'" ':"")+" "+(""!=t.title?' title="'+_.escape(t.title)+'" ':"")+"  />"}else i="<a",i+=' href="/media/'+e.get("media_id")+'" target="_blank"',t["class"]&&(i+=' class="'+_.escape(t["class"])+'"'),t.title&&(i+=' title="'+_.escape(t.title)+'"'),i+=">Télécharger le fichier</a>";var r=[];return t.xtra_author,t.xtra_file&&r.push(e.get("original_name")),t.xtra_name&&r.push(e.get("name")),t.xtra_modification&&r.push(format.formatDateTime(this.model.get("modification_date"))),t.xtra_weight&&r.push(format.formatBytes(e.get("weight"),2)),t.xtra_size&&"image"==e.get("type")&&r.push(""+e.get("width")+" x "+e.get("height")),r.length>0&&(i+=" ("+r.join(" ")+")"),i}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),PublishModalView=require(463),SelectModalView=require(461),WysiwygModalView=require(462),Files=require(440),Folders=require(441),Page=require(346),WysiwygChannel=Backbone.Radio.channel("wysiwyg"),ControllerChannel=Backbone.Radio.channel("controller"),Session=Backbone.Radio.channel("app").request("ctx:session");require("tinymce");var tinyMCE=window.tinyMCE;require(144),require("tinymce/themes/modern/theme.js"),require("tinymce/plugins/lists/plugin.js"),require("tinymce/plugins/paste/plugin.js"),require("kiubi/vendor/tinymce/plugins/link/plugin.js"),require("tinymce/plugins/charmap/plugin.js"),require("tinymce/plugins/code/plugin.js"),require("tinymce/plugins/anchor/plugin.js"),require("tinymce/plugins/table/plugin.js"),require("tinymce/plugins/textcolor/plugin.js"),require("tinymce/plugins/colorpicker/plugin.js"),require("tinymce/plugins/fullscreen/plugin.js"),require("tinymce/plugins/image/plugin.js"),require("tinymce/plugins/contextmenu/plugin.js"),require("tinymce/plugins/media/plugin.js"),tinyMCE.PluginManager.add("wordpaste",function(e,t){var i=function(e){var t=/( class=(")?Mso[a-zA-Z]+(")?)/g,i=e.replace(t," "),n=new RegExp("<!--(.*?)-->","g");i=i.replace(n,"");var a=new RegExp("<(/)*(title|meta|link|span|\\?xml:|st1:|o:|font)(.*?)>","gi");i=i.replace(a,"");for(var r=["style","script","applet","embed","noframes","noscript"],o=0;o<r.length;o++){var a=new RegExp("<"+r[o]+".*?"+r[o]+"(.*?)>","gi");i=i.replace(a,"")}for(var l=["start","class","width","height","data-[^=]+"],o=0;o<l.length;o++){var s=new RegExp(" "+l[o]+'="(.*?)"',"gi");i=i.replace(s,"")}return i=i.replace(t,"\r\n")};e.on("PastePreProcess",function(e){e.content=i(e.content)})}),tinyMCE.PluginManager.add("kiubi",function(e,t){function i(e){function t(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var a=t.concat(i);return e.apply(null,a)}}var i=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},n={getImageSize:function(e,t){function n(e,i){a.parentNode&&a.parentNode.removeChild(a),t({width:e,height:i})}var a=document.createElement("img");a.onload=function(){var e=i(a.width,a.clientWidth),t=i(a.height,a.clientHeight);n(e,t)},a.onerror=function(){n(0,0)};var r=a.style;r.visibility="hidden",r.position="fixed",r.bottom=r.left="0px",r.width=r.height="auto",document.body.appendChild(a),a.src=e},removePixelSuffix:function(e){return e&&(e=e.replace(/px$/,"")),e},addPixelSuffix:function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},mergeMargins:function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},waitLoadImage:function(e,t,i){function n(){i.onload=i.onerror=null,e.selection&&(e.selection.select(i),e.nodeChanged())}i.onload=function(){n()},i.onerror=n}},a=function(){return{src:"",alt:"",title:"",width:"",height:"","class":"",style:"",hspace:"",vspace:""}},r=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},o=function(e,t){var i=e.find("#width")[0],n=e.find("#height")[0],a=e.find("#constrain")[0];i&&n&&a&&t(i,n,a.checked())},l=function(e,t,i){var n=e.state.get("oldVal"),a=t.state.get("oldVal"),o=e.value(),l=t.value();i&&n&&a&&o&&l&&(o!==n?(l=Math.round(o/n*l),isNaN(l)||t.value(l)):(o=Math.round(l/a*o),isNaN(o)||e.value(o))),r(e,t)},s={createUi:function(){var e=function(e){s.updateSize(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},syncSize:function(e){o(e,r)},updateSize:function(e){o(e,l)}},c=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},u=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?n.removePixelSuffix(e.style.marginLeft):""},g=function(e,t){var i=n.addPixelSuffix(t);e.style.marginLeft=i,e.style.marginRight=i},m=function(e,t){var i=n.addPixelSuffix(t);e.style.marginTop=i,e.style.marginBottom=i},d=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?n.removePixelSuffix(e.style.marginTop):""},p=function(e,t){var i=document.createElement("img");return P(e,I(t,{caption:!1}),i),i},f=function(e,t){var i=new RegExp("^https://"+Session.site.get("backoffice")+'/media/([^"]+)',"i"),n=c(t,"src").replace(i,removeSignInSrc);return{src:n,alt:c(t,"alt"),title:c(t,"title"),width:v(t,"width"),height:v(t,"height"),"class":c(t,"class"),style:e(c(t,"style")),hspace:u(t),vspace:d(t)}},h=function(e,t){return function(e,i,a){e.style[i]?(e.style[i]=n.addPixelSuffix(a),b(e,t)):F(e,i,a)}},v=function(e,t){return e.style[t]?n.removePixelSuffix(e.style[t]):c(e,t)},y=function(e){var t=e.selection.getNode(),i=e.dom.getParent(t,"figure.image");return i?e.dom.select("img",i)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},b=function(e,t){var i=e.getAttribute("style"),n=t(null!==i?i:"");n.length>0?(e.setAttribute("style",n),e.setAttribute("data-mce-style",n)):e.removeAttribute("style")},x=function(e,t){return function(i,n,a){e(i,a),b(i,t)}},w=function(e,t){var i=e.dom.styles.parse(t),a=n.mergeMargins(i),r=e.dom.styles.parse(e.dom.styles.serialize(a));return e.dom.styles.serialize(r)},k=function(e){var t=y(e);return t?f(function(t){return w(e,t)},t):a()},S=function(e,t){if(t){var i=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(i),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}},M=function(e,t){var i=p(function(t){return w(e,t)},t);e.dom.setAttrib(i,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(i.outerHTML);var n=e.dom.select('*[data-mce-id="__mcenew"]')[0];e.dom.setAttrib(n,"data-mce-id",null),e.selection.select(n)},C=function(e,t){var i=y(e);i?t.src?T(e,t):S(e,i):t.src&&M(e,t)},q=function(e,t,i,n,a){i[n]!==t[n]&&a(e,n,i[n])},P=function(e,t,i){var n=f(e,i);t.src&&(t.src=t.src.replace(/^\/media\/(.+)/i,addSignInSrc)),q(i,n,t,"src",F),q(i,n,t,"alt",F),q(i,n,t,"title",F),q(i,n,t,"width",h("width",e)),q(i,n,t,"height",h("height",e)),q(i,n,t,"class",F),q(i,n,t,"style",x(function(e,t){return F(e,"style",t)},e)),q(i,n,t,"hspace",x(g,e)),q(i,n,t,"vspace",x(m,e))},T=function(e,t){var i=y(e);P(function(t){return w(e,t)},t,i),e.dom.setAttrib(i,"src",i.getAttribute("src")),e.selection.select(i),n.waitLoadImage(e,t,i)},N=function(e){return function(t){var i=e.dom,a=t.control.rootControl,r=a.toJSON(),o=i.parseStyle(r.style);a.find("#vspace").value(""),a.find("#hspace").value(""),o=n.mergeMargins(o),(o["margin-top"]&&o["margin-bottom"]||o["margin-right"]&&o["margin-left"])&&(o["margin-top"]===o["margin-bottom"]?a.find("#vspace").value(n.removePixelSuffix(o["margin-top"])):a.find("#vspace").value(""),o["margin-right"]===o["margin-left"]?a.find("#hspace").value(n.removePixelSuffix(o["margin-right"])):a.find("#hspace").value("")),a.find("#style").value(i.serializeStyle(i.parseStyle(i.serializeStyle(o))))}},I=function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var i={},n=0;n<e.length;n++){var a=e[n];for(var r in a)hasOwnProperty.call(a,r)&&(i[r]=a[r])}return i},F=function(e,t,i){e.setAttribute(t,i)},L=function(e,t){var i=t.control.getRoot();s.updateSize(i),e.undoManager.transact(function(){var t=I(k(e),i.toJSON());C(e,t)}),e.editorUpload.uploadImagesAuto()},j=function(e,t){var i=document.createElement("img");return F(i,"style",t.style),(u(i)||""!==t.hspace)&&g(i,t.hspace),(d(i)||""!==t.vspace)&&m(i,t.vspace),e(i.getAttribute("style"))},A=function(e,t){t.find("#style").each(function(i){var n=j(function(t){return w(e,t)},I(a(),t.toJSON()));i.value(n)})},z=function(e,t){var i=e.meta||{},n=e.control,a=n.rootControl;_.each(i,function(e,t){a.find("#"+t).value(e)})},B=function(e){return[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(t){z(t,e)},onbeforecall:function(e){e.meta=e.control.rootControl.toJSON()}},{name:"alt",type:"textbox",label:"Texte alternatif"},{label:"Style",name:"style",type:"textbox",onchange:N(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){A(e,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"}]},s.createUi(),{name:"title",type:"textbox",label:"Titre"},{name:"class",type:"textbox",label:"Class"}]};return{open:function(){var i=e.windowManager.open({title:"Insert/edit image",data:k(e),body:B(e),onSubmit:t(L,e)});s.syncSize(i)}}}e.addButton("kiubi_media",{tooltip:"Médiathèque",icon:"image",onclick:function(){WysiwygChannel.trigger("open:media",e)}}),e.on("BeforeSetContent",function(e){e.content=e.content.replace(/src="\/media\/([^"]+)"/gi,addSign)}),e.on("GetContent",function(e){var t=new RegExp('src="https://'+Session.site.get("backoffice")+'/media/([^"]+)"',"gi");e.content=e.content.replace(t,removeSign)}),e.addShortcut("Meta+S","",function(){return ControllerChannel.trigger("meta:s:shortcut"),!1}),e.addMenuItem("kimage",{icon:"image",text:"Image",onclick:i(e).open,context:"insert",prependToContext:!0})}),module.exports=Marionette.Behavior.extend({options:{selector:'textarea[data-role="wysiwyg"]'},editorList:[],initialize:function(e){this.mergeOptions(e),this.listenTo(WysiwygChannel,"open:media",this.openMedia)},onDomRefresh:function(){this.clearAllWysiwyg();var e=this;Backbone.$(this.options.selector,this.view.$el).each(function(t,i){e.createWysiwyg(i).then(function(t){t.length>0&&e.editorList.push(t[0])})})},createWysiwyg:function(e){var t,i,n=Backbone.$(e),a=n.height();switch(n.data("wysiwyg-toolbar")){case"micro":t=["contextmenu","kiubi","lists","paste","link","charmap","code","wordpaste","fullscreen"],i="bold italic underline strikethrough | numlist bullist | link unlink | kiubi_media | removeformat undo redo | pastetext code fullscreen",a-=68;break;default:t=["contextmenu","kiubi","media","lists","paste","textcolor","colorpicker","link","anchor","table","charmap","code","wordpaste","fullscreen"],i=["formatselect fontsizeselect | bold italic underline strikethrough superscript | alignleft aligncenter alignright alignjustify | forecolor backcolor | numlist bullist | outdent indent | link unlink | kiubi_media media table | removeformat undo redo | pastetext code fullscreen"],a-=102}var r=this;return tinyMCE.init({target:e,height:a,skin_url:"/vendor/tinymce/skins/lightgray",language:"fr_FR",language_url:!1,convert_urls:!1,entity_encoding:"named+numeric",menu:{},custom_undo_redo_levels:20,forced_root_block:!1,block_formats:"Paragraphe=p;Titre 1=h1;Titre 2=h2;Titre 3=h3;Titre 4=h4;Titre 5=h5;Titre 6=h6;Preformatted=pre;DIV=div",plugins:t,toolbar:i,image_advtab:!0,contextmenu:"link kimage",fontsize_formats:"8px 10px 12px 14px 18px 24px 36px",branding:!1,link_list:{types:this.link_types.bind(this),pages:this.link_pages.bind(this)},extended_valid_elements:"style[type],script[language|type|src],span[*],i[*]",valid_children:"+body[style], +div[style], +span[*]",init_instance_callback:function(e){e.on("Change",function(e){r.view.triggerMethod("field:change")})}})},link_types:function(e){var t=new Page;t.getInternalLinkTypes().done(function(t){e(t.map(function(e){return{value:e.get("value"),title:e.get("label")}}))})},link_pages:function(e,t){var i=new Page;i.getInternalLinkTargets(e).done(function(e){t(_.map(e,function(e){var t="";if(e.depth&&e.depth>0)for(var i=0;i<e.depth;i++)t="  "+t;return{value:e.url,text:t+_.escape(e.name),disabled:null==e.url}}))})},clearAllWysiwyg:function(){_.each(this.editorList,function(e){tinymce.remove(e)}),this.editorList=[]},onBeforeDestroy:function(){this.clearAllWysiwyg()},onWysiwygSave:function(){_.each(this.editorList,function(e){e.save()})},onBeforeSave:function(){this.onWysiwygSave()},openMedia:function(e){var t=_.find(this.editorList,function(t){return t==e});if(t===e){var i=new Files;i.folder_id=2;var n=new((new Files).model),a=new SelectModalView({collection:i,model:n,type:"file",folders:new Folders});this.listenTo(a,"close:modal",function(){this.setupMedia(e,a.model)}),this.listenTo(a,"action:modal",function(t){this.switchToPublish(e,t.currentFolder)});var r=Backbone.Radio.channel("app").request("ctx:navigationController");r.showInModal(a,{title:"Médiathèque",modalClass:"mediatheque modal-right has-filters",action:{title:"Publier"}})}},setupMedia:function(e,t){var i=new WysiwygModalView({model:t});this.listenTo(i,"insert:file",function(i){e.insertContent(settingToHTML(t,i))});var n=Backbone.Radio.channel("app").request("ctx:navigationController");n.showInModal(i,{title:t.get("name"),modalClass:"mediatheque modal-right",modalDialogClass:"modal-lg",action:{title:"Insérer"}})},switchToPublish:function(e,t){var i=new Files;i.folder_id=t;var n=new PublishModalView({isMultiFiles:!1,collection:i});this.listenTo(n,"uploaded:files",function(t){this.onUploadedFiles(e,t)});var a=Backbone.Radio.channel("app").request("ctx:navigationController");a.showInModal(n,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier un fichier"}})},onUploadedFiles:function(e,t){var i=t.find(function(e){return"done"==e.uploadProgression.status}),n=Backbone.Radio.channel("app").request("ctx:navigationController");return i?void i.fetch().done(function(){this.setupMedia(e,i)}.bind(this)).fail(function(){n.hideModal()}):void n.hideModal()}});
},{"144":144,"346":346,"440":440,"441":441,"461":461,"462":462,"463":463,"607":607,"undefined":undefined}],29:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({cache:null,initialize:function(){this.cache=null},onBeforeRender:function(){this.cache&&this.cache.tooltip("dispose")},onRender:function(){this.cache=Backbone.$('[data-toggle="tooltip"]',this.view.el).tooltip({delay:{show:0,hide:0},trigger:"hover",offset:"0, 4px"})}});
},{"undefined":undefined}],30:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_string=require("underscore.string");module.exports=Marionette.Behavior.extend({options:{defaultCategoty:"Event"},events:{"click [data-tracking]":function(t){Backbone.Radio.channel("tracker").trigger("event",{name:"click",category:t.currentTarget.getAttribute("data-tracking-categ")?"Event - "+t.currentTarget.getAttribute("data-tracking-categ"):"Event - "+this.options.defaultCategoty,label:t.currentTarget.getAttribute("data-tracking")?t.currentTarget.getAttribute("data-tracking"):_string.stripTags(t.currentTarget.innerHTML),value:null})}}});
},{"undefined":undefined}],31:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Forms=require(608);module.exports=Marionette.Behavior.extend({isSelected:!1,lock:!1,ui:{selection:"input[name='selection']"},events:{"click [data-role='action']":"action","hidden.bs.dropdown .btn-group":"onHiddenDropDown","change @ui.selection":"onSelect"},action:function(e){var t=Backbone.$(e.currentTarget),i=t.data("action");if(i){var n="onAction"+i.charAt(0).toUpperCase()+i.slice(1),o=t.data("confirm");if(o&&!t.parent().hasClass("confirm-"+o))return e.preventDefault(),t.data("title",t.text()),t.parent().addClass("confirm-"+o),t.text("Êtes-vous sûr ?"),!1;if(!this.lock){if(this.lock=!0,this[n]&&this[n](),!this.view[n])return void(this.lock=!1);var s=this.view[n]();if(!s)return void(this.lock=!1);var r=this,a=t.text();t.addClass("disabled"),t.text("Chargement..."),s.always(function(){t.removeClass("disabled"),t.text(a),r.lock=!1})}}},onActionShow:function(){this.view.isEditing=!0,this.view.getUI("form").show(),Backbone.$('input[type="text"]',this.el).val(""),Backbone.$("input:not([type])",this.el).val("")},onActionEdit:function(){this.view.isEditing=!0,this.view.getUI("list")&&this.view.getUI("list").hide(),this.view.getUI("form").show()},onActionCancel:function(){this.view.isEditing=!1,this.view.getUI("form").hide(),Forms.clearErrors(this.view.getUI("errors"),this.el),this.view.getUI("list")&&this.view.getUI("list").show()},onActionSave:function(){this.view.triggerMethod("before:save"),Forms.clearErrors(this.view.getUI("errors"),this.el)},onHiddenDropDown:function(e){Backbone.$(".dropdown-menu a",e.currentTarget).each(function(e,t){t=Backbone.$(t),t.data("confirm")&&t.parent().hasClass("confirm-"+t.data("confirm"))&&(t.text(t.data("title")),t.parent().removeClass("confirm-"+t.data("confirm")))})},initialize:function(e){this.view.getOption("model")&&this.view.listenTo(this.view.getOption("model"),"sync",this.view.render),this.view.isEditing=!1},onRender:function(){this.view.isEditing=!1,this.getUI("selection").prop("checked",this.isSelected)},onSelect:function(e){this.isSelected=e.currentTarget.checked}});
},{"608":608,"undefined":undefined}],32:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607);module.exports=Marionette.Behavior.extend({ui:{price_vat:'input[data-role="vat"]'},events:{"keyup @ui.price_vat":"onPriceChange"},options:{proxy:null},rate:null,initialize:function(){this.rate=null},onRender:function(){this.getOption("proxy")?this.listenTo(this.view.getOption(this.getOption("proxy")),"tax:change",this.onVATChange):this.listenTo(this.view.getChildView("taxes"),"change",this.taxesViewChange)},taxesViewChange:function(){var t=this.getCurrentTax();null!=t&&this.onVATChange(t)},getCurrentTax:function(){var t;return this.getOption("proxy")?this.view.getOption(this.getOption("proxy")).taxRate():this.view.getChildView("taxes")?(t=this.view.taxes.get(this.view.getChildView("taxes").selected),t?1+t.get("vat_rate")/100:1):1},onVATChange:function(t){if(null!=t){null==this.rate&&(this.rate=t),this.rate=t;var e=this.view;this.getUI("price_vat").each(function(){if(null!=this.name.match(/ex_vat(\[\])?$/)){var i=Backbone.$('input[name="'+Backbone.$(this).data("linked")+'"]',e.el);if(i){var a=format.unformatFloat(this.value);if(null==a)return void i.val("");a*=t,i.val(format.formatFloat(a,4))}}})}},onPriceChange:function(t){null==this.rate&&(this.rate=this.getCurrentTax());var e=Backbone.$('input[name="'+Backbone.$(t.currentTarget).data("linked")+'"]',this.view.el);if(e){var i=format.unformatFloat(t.currentTarget.value);if(null==i)return void e.val("");null!=t.currentTarget.name.match(/ex_vat(\[\])?$/)?i*=this.rate:i/=this.rate,e.val(format.formatFloat(i,4))}}});
},{"607":607,"undefined":undefined}],33:[function(require,module,exports){
var Config=require(37),Cfg=new Config;Cfg.set("api","https://api.srv1.kiubi-devadmin.com"),Cfg.set("account","https://www.srv1.kiubi-devadmin.com"),module.exports=Cfg;
},{"37":37}],34:[function(require,module,exports){
function setHeaderTabs(e,t){e&&_(e).each(function(e){e.is_active=e.url==document.location.pathname}),t.navigationController.setHeaderTabs(e)}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.Object.extend({sidebarMenuService:null,sidebarMenu:null,sidebarMenuEvents:{},sidebarMenuOptions:{},sidebarMenuBuffer:[],baseBreadcrum:[],context:null,initialize:function(e){this.navigationController=Backbone.Radio.channel("app").request("ctx:navigationController"),this.context={}},addContext:function(e,t){this.context[e]=t},getContext:function(e){return this.context[e]},showSidebarMenu:function(){if(this.sidebarMenu&&(null==this.navigationController.getSidebarMenuDetail()||this.navigationController.getSidebarMenuService()!=this.sidebarMenuService)){var e=new this.sidebarMenu(this.sidebarMenuOptions);_.each(this.sidebarMenuEvents,function(t,n){this.listenTo(e,n,this[t])},this),_.each(this.sidebarMenuBuffer,function(t){e.triggerMethod(t.event,t.params)},this),this.sidebarMenuBuffer=[],this.navigationController.showSidebarMenuDetail(e)}},triggerSidebarMenu:function(e,t){var n=this.navigationController.getSidebarMenuDetail();return n&&this.sidebarMenuService==n.service?void n.triggerMethod(e,t):void this.sidebarMenuBuffer.push({event:e,params:t})},notFound:function(e){this.navigationController.notFound(e)},setHeader:function(e,t,n,i){this.setBreadCrum(e),this.setHeaderActions(t),setHeaderTabs(n,this),this.setHeaderNavigation(i),this.navigationController.refreshHeader()},setBreadCrum:function(e,t){for(var n=[],i=this.baseBreadcrum.length;i--;)n[i]=this.baseBreadcrum[i];_.isArray(e)?n=n.concat(e):n.push(e),this.navigationController.setBreadCrum(n),t&&this.navigationController.refreshHeader()},setHeaderActions:function(e,t){e&&e.length&&_(e).each(function(e){e.callback&&!_.isFunction(e.callback)&&(_.isArray(e.callback)?e.callback=this[e.callback[0]].bind(this,e.callback[1]):e.callback=this[e.callback].bind(this))}.bind(this)),this.navigationController.setHeaderActions(e),t&&this.navigationController.refreshHeader()},setHeaderNavigation:function(e,t){this.navigationController.setHeaderNavigation(e),t&&this.navigationController.refreshHeader()},failHandler:function(e,t){return function(){this.notFound(t),this.setHeader({title:e})}.bind(this)},actionSave:function(){var e=this.navigationController.getContent();if(!e||!e.onSave)return null;var t={};return e.triggerMethod("simpleForm:save",t),t.promise?t.promise:void 0},actionOpenURL:function(e){window.open(e)},parseQueryString:function(e,t){if(!_.isString(e))return t;e=e.substring(e.indexOf("?")+1);var n=decodeURI(e).split(/&/g);return _.each(n,function(e){var n=e.split("=");n.length>=1&&t.hasOwnProperty(n[0])&&(t[n[0]]=2==n.length?n[1]:null)}),t}});
},{"undefined":undefined}],35:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(606),moment=require("moment"),Activity=CollectionUtils.KiubiModel.extend({idAttribute:"activity_id",defaults:{activity_id:"integer",text:"string",urn:"",type:"string",ip:"string",user_name:"string",user_profil:"string",customer_id:"integer",avatar_url:"",avatar_thumb_url:"",creation_date:"string"},mapUrnToUrl:function(){if(""===this.get("urn"))return null;var e=this.get("urn").split("/");if(e.length<2)return null;switch(e[1]){default:return null;case"blog":case"cms":case"customers":case"themes":return this.get("urn");case"forms":return"/forms/inbox?id="+e[2];case"backups":return"/modules/backups";case"catalog":return"tier_prices"==e[2]?"/modules/tier_prices"+(4==e.length?"/"+e[3]:""):this.get("urn");case"checkout":return"vouchers"==e[2]?"/modules/vouchers"+(4==e.length?"/"+e[3]:""):this.get("urn");case"domains":return"/prefs/domains";case"l10n":return"/prefs/l10n";case"prefs":return"ads"==e[2]||"fidelity"==e[2]||"merchantcenter"==e[2]?"/modules/"+e[2]:"blog"==e[2]||"catalog"==e[2]||"checkout"==e[2]||"customers"==e[2]?"/"+e[2]+"/settings":"newsletter"==e[2]?"/modules/subscribers/settings":"theme"==e[2]?"/prefs":this.get("urn");case"seo":return"meta"==e[2]?"/prefs/meta":"/modules/redirections";case"subscribers":return"/modules/subscribers"}}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/logs",model:Activity,countActivitiesSince:function(e){var t=new Date(1e3*e);return Backbone.ajax({url:this.url,data:{since:moment(t).format("DD/MM/YYYY HH:mm:ss"),type:"comment,checkout,form",limit:1}}).then(function(e,t){return t.items_count}.bind(this))}});
},{"606":606,"undefined":undefined}],36:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"cobranding",isNew:function(){return!1},defaults:{login:{}}});
},{"606":606}],37:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({defaults:{api:"https://api.kiubi.com",api_version:1,account:"https://www.kiubi-admin.com",client_version:1,ga_tracker:null,notificationSocket:null}});
},{"undefined":undefined}],38:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"account/contact",isNew:function(){return!1},defaults:{firstname:"",lastname:"",civility:"","function":"",phone:"",email:"",company_name:"",company_address:"",company_zipcode:"",company_city:"",company_country_id:null,company_country:"",company_forme:"",company_siret:"",company_capital:"",company_rcs:"",company_naf:"",company_tva:""}});
},{"606":606}],39:[function(require,module,exports){
var CollectionUtils=require(606),_=require("underscore"),Country=CollectionUtils.KiubiModel.extend({urlRoot:"geo/countries",idAttribute:"country_id",defaults:{country_id:0,name:"",code:"",group_id:0,group_name:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"geo/countries",model:Country,selectPayload:function(){return _.map(this.toJSON(),function(e){return{value:e.country_id,label:e.name}})}});
},{"606":606,"undefined":undefined}],40:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/dashboard",isNew:function(){return!1},defaults:{widgets:[],messages:[]},hasWidget:function(e){return!(!this.get("widgets")||0==this.get("widgets").length)&&this.get("widgets").indexOf(e)>=0}});
},{"606":606}],41:[function(require,module,exports){
var CollectionUtils=require(606),_=require("underscore"),Departement=CollectionUtils.KiubiModel.extend({urlRoot:"/geo/countries/fr/departments",idAttribute:"id",defaults:{id:null,name:"",code:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"/geo/countries/fr/departments",model:Departement,promisedSelect:function(e){var t=this;return this.fetch().then(function(){var l=new CollectionUtils.SelectCollection,o=[];return t.each(function(t){o.push({value:t.get("code"),label:t.get("code")+" - "+t.get("name"),selected:e&&t.get("code")==e})}),l.add(o),l})}});
},{"606":606,"undefined":undefined}],42:[function(require,module,exports){
var CollectionUtils=require(606),_=require("underscore"),Domain=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/domains",idAttribute:"domain_id",defaults:{domain_id:null,is_main:!1,is_provided:!1,is_https_certified:!1,name:"",https_status:null}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/domains",model:Domain});
},{"606":606,"undefined":undefined}],43:[function(require,module,exports){
var CollectionUtils=require(606),_=require("underscore"),Result=CollectionUtils.KiubiModel.extend({defaults:{cities:"",distance:0,postal_code:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"geo/search",model:Result});
},{"606":606,"undefined":undefined}],44:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(606),moment=require("moment");module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/stats/graphs",isNew:function(){return!1},defaults:{top:{},summary:{},days:[]},compare:function(e,t,a,o){var r=moment().add(-1,"days"),s=e.clone().add(a,"days"),i=t.clone().add(a,"days");return s=r.diff(s,"days")>=0?s:r,i=r.diff(i,"days")>=0?i:r,o=o||{},o.start_date=e.format("DD/MM/YYYY"),o.end_date=s.format("DD/MM/YYYY"),o.compare_date=t.format("DD/MM/YYYY"),Backbone.ajax({url:this.url,data:o}).then(function(e,t){return this.set(e),e}.bind(this))}});
},{"606":606,"undefined":undefined}],45:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/stats/live",isNew:function(){return!1},defaults:{visitors:null}});
},{"606":606}],46:[function(require,module,exports){
function storageFactory(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),new LocalStorage}catch(i){return new CookieStorage}}function isTokenValid(e){return api.get("auth/token/"+e,{},{access_token:e,disableErrorHandling:!0})}function allowedSite(e){var t=Backbone.$.Deferred();return api.get("sites/"+e,{extra_fields:"scopes,features,account"}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e.message)}),t.promise()}function pickFirstSite(){var e=Backbone.$.Deferred();return api.get("sites",{limit:1}).done(function(t){allowedSite(t[0].code_site).done(function(t){e.resolve(t)}).fail(function(t){e.reject(t)})}).fail(function(t){e.reject(t.message)}),e.promise()}function setCredidentials(e,t){return e.done(function(e){t.storeToken(e.token),t.set("token_media",e.token_media),t.user.set("user_id",e.user.user_id),t.user.set("firstname",e.user.firstname),t.user.set("lastname",e.user.lastname),t.user.set("avatar",e.user.avatar),t.user.set("email",e.user.email),t.user.set("gender",e.user.gender),t.user.set("is_admin",e.user.is_admin),t.user.set("scopes",e.user.scopes||[]),t.user.trigger("authenticate")}).then(null,function(e){return Backbone.$.Deferred().reject(e.message)})}function setSiteContext(e,t){return e.done(function(e){console.log("Set session site",e.code_site),t.site&&e.code_site==t.site.get("code_site")||(t.site.set(e),t.storeLastSite(),api.current_site=t.site.get("code_site"),t.site.trigger("change:site"))}).fail(function(){t.clearLastSite(),api.current_site=null})}var Backbone=require("backbone"),CollectionUtils=require(606),_=require("underscore");require("jquery.cookie");var api=require(603),createHash=require(10),Site=require(47),Cache=require(605),CookieStorage=function(){this.getItem=function(e){return Backbone.$.cookie(e)},this.setItem=function(e,t,i){Backbone.$.cookie(e,t,{path:"/"})},this.clearItem=function(e){Backbone.$.removeCookie(e)}},LocalStorage=function(){var e=window.localStorage,t=window.sessionStorage;this.getItem=function(i){var s=t.getItem(i);return null===s&&(s=e.getItem(i)),s},this.setItem=function(i,s,n){e.setItem(i,s),n&&t.setItem(i,s)},this.clearItem=function(i){e.removeItem(i),t.removeItem(i)}},Session=CollectionUtils.KiubiModel.extend({urlRoot:"auth/token",initialize:function(e){this.user=e.user,this.site=new Site,this.storage=storageFactory(),this.cache=new Cache,this.listenTo(this.site,"change:site",function(){this.clear()}.bind(this.cache))},defaults:{token:"",token_media:"",user:null,site:null},start:function(){var e,t;return document.location.hash&&(t=document.location.hash.match(/^#([a-f0-9]{40})$/))?(e=t[1],history.replaceState(null,null," ")):e=this.storage.getItem("AccesToken"),e?setCredidentials(isTokenValid(e),this).then(function(){var e=this.getLastSite(),t=e?allowedSite(e):pickFirstSite();return setSiteContext(t,this)}.bind(this)):Backbone.$.Deferred().reject()},authenticate:function(e,t,i){return this.clearToken(),setCredidentials(api.post("auth/token",{login:e,password:t}),this).then(function(){var e;return i?(e=Backbone.$.Deferred(),allowedSite(i).done(function(t,i){e.resolve(t,i)}).fail(function(t,i){e.reject(t,i)})):this.getLastSite()?(e=Backbone.$.Deferred(),allowedSite(this.getLastSite()).done(function(t,i){e.resolve(t,i)}).fail(function(){pickFirstSite().done(function(t,i){e.resolve(t,i)}).fail(function(t){e.reject(t)})})):e=pickFirstSite(),setSiteContext(e,this)}.bind(this))},changeSite:function(e){return setSiteContext(allowedSite(e),this)},hashMedia:function(e){var t=this.get("token_media")+";"+e+";"+this.site.get("code_site");return this.user.get("user_id")+"-"+createHash("sha256").update(t).digest("hex")},convertMediaPath:function(e,t){var i=e.match(/(^|\/)([0-9]+)($|\/|\.)/);if(i){var s=t?"&a=download":"";return"https://"+this.site.get("backoffice")+e+"?sign="+this.hashMedia(parseInt(i[2]))+s}return e},autologLink:function(e){e=e||"";var t=this.user.get("user_id"),i=this.site.get("code_site"),s=Math.floor(Date.now()/1e3)+300,n=this.get("token_media"),r=""+t+i+s+e+n,o=createHash("sha256").update(r).digest("hex"),a=this.site.get("domain")+"/?";return a+="u="+t+"&",a+="expire="+s+"&",e&&(a+="as="+e+"&"),a+="sign="+o},autologBackLink:function(e){var t=this.user.get("user_id"),i=this.site.get("code_site"),s=Math.floor(Date.now()/1e3)+300,n=this.get("token_media"),r=""+t+i+s+n,o=createHash("sha256").update(r).digest("hex"),a="https://"+this.site.get("backoffice")+e+"?";return a+="u="+t+"&",a+="expire="+s+"&",a+="sign="+o},autologAccountLink:function(e){var t=this.user.get("user_id"),i=Math.floor(Date.now()/1e3)+300,s=this.get("token_media"),n=""+t+i+s,r=createHash("sha256").update(n).digest("hex"),o=Backbone.Radio.channel("app").request("ctx:config"),a=o.get("account")+e+(e.indexOf("?")>-1?"&":"?");return a+="u="+t+"&",a+="expire="+i+"&",a+="sign="+r},convertThemePath:function(e){return"https://"+this.site.get("backoffice")+e+"?sign="+this.hashMedia(e)},hasScope:function(e){return this.site.hasScope(e)||this.user.hasScope(e)},hasFeature:function(e){return!!this.site.get("features")&&this.site.get("features")[e]===!0},storeValue:function(e,t){this.storage.setItem(e,t)},getValue:function(e){return this.storage.getItem(e)},storePref:function(e,t){""!=this.site.get("code_site")&&(e="pref."+this.site.get("code_site")+"."+e,this.storage.setItem(e,t,!0))},getPref:function(e){return""==this.site.get("code_site")?null:(e="pref."+this.site.get("code_site")+"."+e,this.storage.getItem(e))},getLastSite:function(){var e=this.user.get("user_id"),t=this.storage.getItem("LastSite");if(t)return t=t.split(","),t[0]==""+e?t[1]:void 0},storeLastSite:function(){this.storage.setItem("LastSite",this.user.get("user_id")+","+this.site.get("code_site"),!0)},clearLastSite:function(){this.storage.clearItem("LastSite")},storeToken:function(e){this.storage.setItem("AccesToken",e),api.access_token=e},clearToken:function(){this.storage.clearItem("AccesToken"),api.access_token=null},logout:function(){this.user.clear({silent:!0}),this.site.clear({silent:!0}),this.clearToken(),this.trigger("logout")}});module.exports=Session;
},{"10":10,"47":47,"603":603,"605":605,"606":606,"undefined":undefined}],47:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(606),_=require("underscore");module.exports=CollectionUtils.KiubiModel.extend({urlRoot:"sites",idAttribute:"code_site",defaults:{code_site:"",domain:"",backoffice:"",name:"",plan:{},scopes:[],features:[]},hasScope:function(e){return!!this.get("scopes")&&_.contains(this.get("scopes"),e)},searchSite:function(e){var t=this.get("code_site");return Backbone.ajax({url:"sites.json",data:{term:e,limit:5,sort:"relevance"}}).then(function(e){return _.filter(e,function(e){return e.code_site!=t})})}});
},{"606":606,"undefined":undefined}],48:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/stats",isNew:function(){return!1},defaults:{forms:{unread_responses:0},catalog:{stock_shortage_count:0},checkout:{pending_orders:0,pending_orders_amount:0,pending_orders_amount_label:0,average_cart:0,average_cart_label:"-",monthly_transformation:0,monthly_transformation_label:"-"}}});
},{"606":606}],49:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Collection.extend({defaults:{msg:"",link:null,help:null},fetch:function(){this.add([{msg:"Pour améliorer la sécurité de votre site Internet, activez son accès HTTPS.",link:"/prefs/https",help:"https://aide.kiubi.com/preferences.html#acces-https"},{msg:"Dismoi? permet de créer et de gérer tous types de formulaires de contact.",link:"/forms",help:"https://aide.kiubi.com/formulaires-dismoi.html"},{msg:"Votre catalogue de produits peut être mis à jour par import de fichier Excel.",link:"/modules/import/products",help:"https://aide.kiubi.com/catalogue.html#import-de-produits"},{msg:"Les billets et les composants du site web peuvent être personnalisés selon vos besoins.",help:"https://aide.kiubi.com/design-generalites.html#types-de-billets"},{msg:"Vous disposez de plus de 40 widgets, tous personnalisables et paramétrables.",help:"https://aide.kiubi.com/design-generalites.html#widgets"},{msg:"Les commentaires du blog peuvent être modérés avant leur publication.",link:"/blog/settings",help:"https://aide.kiubi.com/blog.html#parametres-du-blog"},{msg:"Vous pouvez choisir la structure de données des billets, des composants et des produits.",help:"https://aide.kiubi.com/design-generalites.html#types-de-billets"},{msg:"Vous pouvez modifier les types de billets et de composants et en créer autant que nécessaire.",help:"https://aide.kiubi.com/design-generalites.html#types-de-billets"},{msg:"Les prix des produits du catalogue peuvent être affichés HT ou TTC.",link:"/catalog/taxes",help:"https://aide.kiubi.com/catalogue.html#gerer-les-taxes"},{msg:"Les produits peuvent être évalués et notés par les internautes.",link:"/catalog/comments",help:"https://aide.kiubi.com/catalogue.html#gerer-les-evaluations"},{msg:"Le raccourcis ctrl + s (ou cmd + s) permet d'enregistrer les modifications.",link:"/prefs/shortcut"},{msg:"Organiser des ventes privées peut booster l'activité de votre boutique en ligne.",link:"/catalog/settings",help:"https://aide.kiubi.com/catalogue.html#parametres-du-catalogue"},{msg:"L'extranet permet de donner des accès privilégiés à certaines parties du site.",link:"/customers/groups",help:"https://aide.kiubi.com/membres.html#extranet"},{msg:"L'import depuis Wordpress facilite la migration de votre site sur Kiubi.",link:"/modules/import/wordpress"},{msg:"Vous pouvez créer et commercialiser différents types de produits.",help:"https://aide.kiubi.com/design-generalites.html#types-des-produits"},{msg:"Tous les interntautes qui s'inscrivent sur le site disposent d'une fiche client.",link:"/customers",help:"https://aide.kiubi.com/membres.html#ajouter-un-membre"},{msg:"Dynamiser votre activité commerciale en proposant des bons de réductions.",link:"/modules/vouchers",help:"https://aide.kiubi.com/modules.html#bons-de-reduction"},{msg:"Vos clients cumulent des points de fidélité à chacun de leurs achats.",help:"https://aide.kiubi.com/membres.html#points-de-fidelite"},{msg:"Pensez à faire un point de sauvegarde avant toute modification importante.",link:"/modules/backups",help:"https://aide.kiubi.com/modules.html#gestion-des-sauvegardes"},{msg:"Travailler plus de 7h consécutives augmente de 62% les risques d'erreurs."},{msg:"Le code source des templates de votre site est entièrement modifiable.",help:"https://aide.kiubi.com/design-generalites.html"},{msg:"Les APIs sont disponibles pour connecter votre site à de nouveaux services.",link:"/modules",help:"https://aide.kiubi.com/api-front-generalites.html"},{msg:"N'oubliez pas d'activer et de configurer Google Analytics.",link:"/modules/analytics",help:"https://aide.kiubi.com/modules.html#google-analytics"},{msg:"Plusieurs services d'export du catalogue vers les marketplaces sont disponibles."},{msg:"Vérifiez que les coordonnées de votre site sont toujours à jour.",link:"/prefs/contact",help:"https://aide.kiubi.com/preferences.html#coordonnees-du-site"},{msg:"Vous pouvez associer plusieurs noms de domaine à votre site.",link:"/prefs/domains",help:"https://aide.kiubi.com/preferences.html#noms-de-domaine"},{msg:"Vos collaborateurs peuvent avoir un compte utilisateur avec des droits spécifiques.",help:"https://aide.kiubi.com/generalites.html#gestion-des-utilisateurs"},{msg:"Le RGPD s'applique à votre site dès lors qu'il collecte des données personnelles.",link:"/prefs/gdpr",help:"https://aide.kiubi.com/preferences.html#donnees-personnelles"},{msg:"L'utilisation d'un thème graphique personnalisé permet de... tout personnaliser !",help:"https://aide.kiubi.com/design-generalites.html"},{msg:"Le guide du webdesigner documente tout sur les wigets et les thèmes graphiques.",help:"https://aide.kiubi.com/design-generalites.html/"},{msg:"Après certaines mises à jour, une release note détaillée est mis à votre disposition.",help:"https://aide.kiubi.com/changelog.html"},{msg:"Le support en ligne est toujours disponible pour vous aider dans votre projet.",help:"https://aide.kiubi.com/generalites.html#ouvrir-un-ticket-de-support"},{msg:"S'il est encore en travaux, vous pouvez restreindre l'accès à l'ensemble du site.",link:"/prefs",help:"https://aide.kiubi.com/preferences.html#preferences-generales"},{msg:"Votre logo apparait sur plusieurs documents (bloc-marque, bons de commande, etc.).",link:"/prefs",help:"https://aide.kiubi.com/preferences.html#preferences-generales"},{msg:"Pour publier des fichiers volumineux dans la médiathèque, utilisez l'accès FTP.",help:"https://aide.kiubi.com/preferences.html#fichiers-de-la-mediatheque"},{msg:"Le taux de disponibilité moyen de Kiubi sur les 3 dernières années est de 99,98%."},{msg:"Vous pouvez changer de formule d'abonnement à tout moment, sans engagement.",help:"https://aide.kiubi.com/generalites.html#gestion-des-abonnements"},{msg:"Sur un seul compte Kiubi, vous pouvez ouvrir plusieurs sites différents.",help:"https://aide.kiubi.com/generalites.html#ouvrir-un-site-internet"},{msg:"Des remises sur les produits peuvent être configurée par groupes de clients.",help:"https://aide.kiubi.com/membres.html#remises-automatiques"},{msg:"Proposer du Click and Collect et de la livraison de proximité à vos clients.",help:"https://aide.kiubi.com/transporteurs.html#ajout-d-un-retrait-en-magasin"},{msg:"Kiubi est pensée pour les développeurs front-end. Parce qu'on les aime !",help:"https://aide.kiubi.com/design-generalites.html/"},{msg:"Vous pouvez adapter n'importe quel thème graphique à votre site.",help:"https://aide.kiubi.com/design-generalites.html/"},{msg:"Dismoi? intègre une boite de réception pour suivre les réponses aux formulaires.",link:"/forms/inbox/",help:"https://aide.kiubi.com/formulaires-dismoi.html#boite-de-reception"},{msg:"La console d'administration est également disponible en téléchargement.",help:"https://github.com/Kiubi/"},{msg:"S'il vous manque une fonctionnalité, contactez-nous !",link:"/modules/kps",help:"https://www.kiubi.com/professional-services.html"},{msg:"Changez de divise, traduisez le site, vendez dans n'importe quel pays.",link:"/prefs/l10n",help:"https://aide.kiubi.com/preferences.html#traductions"},{msg:"Différents modes de paiements sont disponibles : chèque, CB, PayPal, etc.",link:"/checkout/payments",help:"https://aide.kiubi.com/paiements.html"},{msg:"Ajouter des options, payantes ou gratuites, aux commandes.",link:"/checkout/options",help:"https://aide.kiubi.com/commandes.html#options-des-commandes"},{msg:"Les bons de réduction peuvent être réservés à certains clients ou produits.",link:"/modules/vouchers",help:"https://aide.kiubi.com/modules.html#bons-de-reduction"},{msg:"Les commandes sont exportables sous plusieurs formats de fichiers.",help:"https://aide.kiubi.com/commandes.html#exporter-les-commandes"},{msg:"Les transporteurs peuvent être définis par pays et tranches de poids.",help:"https://aide.kiubi.com/transporteurs.html#ajout-d-un-transporteur"},{msg:"Les transporteurs peuvent être définis par codes postaux et tranches de poids.",help:"https://aide.kiubi.com/transporteurs.html#ajout-d-un-transporteur-local"},{msg:"Vous pouvez définir des horaires de livraison ou de retrait en magasin.",help:"https://aide.kiubi.com/transporteurs.html#livraisons-et-retraits-plannifies"},{msg:"Un montant minimum peut être requis pour passer une commande.",link:"/checkout/settings",help:"https://aide.kiubi.com/commandes.html#parametres-des-commandes"},{msg:"Un franco de port est disponible pour chaque transporteurs.",help:"https://aide.kiubi.com/transporteurs.html#gerer-les-transporteurs"},{msg:"Ne vous fiez pas à la première apparence, un site est toujours personnalisable.",help:"https://aide.kiubi.com/design-generalites.html"},{msg:"Vous souhaitez développer votre activité ? Contactez un Expert Kiubi.",help:"https://www.kiubi.com/agences-partenaires.html"},{msg:"Les bons de commande sont personnalisables si vous utiliser leur version HTML.",help:"https://aide.kiubi.com/design-commandes.html#-span-class-sub-bon-de-commande"},{msg:"Les widgets se placent par glissé-déposé dans les mises en page.",help:"https://aide.kiubi.com/mises-en-page.html"},{msg:"De nombreuses balises permettent de personnaliser le code source des sites.",help:"https://aide.kiubi.com/design-generalites.html#balises"},{msg:"Les images publiées dans la médiathèque sont disponibles en différentes tailles.",link:"/prefs/medias",help:"https://aide.kiubi.com/preferences.html#fichiers-de-la-mediatheque"},{msg:"L'API Front-Office permet d'accéder aux données publiques du site",help:"https://aide.kiubi.com/api-front-generalites.html"},{msg:"L'API Developers ouvre un accès direct et sécurisé à toutes les données du site.",help:"https://aide.kiubi.com/api-dev-generalites.html"},{msg:"Ne vous limitez donc pas aux configurations initiales des widgets. Soyez créatif !",help:"https://aide.kiubi.com/design-generalites.html#widgets"},{msg:"Chaque page peut avoir sa propre mise en page. Et chaque mise en page son template.",help:"https://aide.kiubi.com/mises-en-page.html"},{msg:"Chaque widget peut avoir son propre template. Ou 10... si vous en avez besoin.",help:"https://aide.kiubi.com/mises-en-page.html"},{msg:"Quand vous ouvrez un nouveau site, vous pouvez dupliquer un site existant.",help:"https://aide.kiubi.com/generalites.html#ouvrir-un-site-internet"},{msg:"Les balises métas sont personnalisables pour tout le site ou pour chaque pages.",link:"/prefs/meta",help:"https://aide.kiubi.com/preferences.html#meta-par-defaut"},{msg:"Si une page change d'url, faites une redirection 301 vers sa nouvelle url.",link:"/modules/redirections",help:"https://aide.kiubi.com/modules.html#redirections-301"},{msg:"Le sitemap du site est mis à jour automatiquement, ne vous en préoccupez pas.",link:"/prefs",help:"https://aide.kiubi.com/preferences.html#preferences-generales"},{msg:"L'utilisation quotidienne de Kiubi rend heureux. C'est prouvé !",help:"https://www.youtube.com/watch?v=ZbZSe6N_BXs"},{msg:"Les réponses aux formulaires Dismoi? peuvent être exportées au format .csv.",help:"https://aide.kiubi.com/formulaires-dismoi.html#exporter-les-reponses"},{msg:"Dismoi? peut gérer des pièces jointes, stockées dans la médiathèque.",help:"https://aide.kiubi.com/formulaires-dismoi.html#ajouter-un-formulaire"},{msg:"Quand une commande change d'état, un email peut être envoyé à l'acheteur.",link:"/checkout/emails",help:"https://aide.kiubi.com/commandes.html#emails-de-confirmation"},{msg:"Un historique des opérations est conservé pour chaque commande.",help:"https://aide.kiubi.com/commandes.html#editer-une-commande"},{msg:'Le widget "fragment de code" ajoute du code directement dans une mise en page.',help:"https://aide.kiubi.com/design-generalites.html#widgets"},{msg:"La balise {SOCIETE.email} affiche l'email du site. D'autres balises sont disponibles.",help:"https://aide.kiubi.com/design-generalites.html#balises-globales"},{msg:"Certains widgets ont plus de 30 paramètres de configuration différents.",help:"https://aide.kiubi.com/design-catalogue.html#liste-des-produits"},{msg:"Les commandes peuvent être exportées vers Coliship, le logiciel d'étiquetage de la Poste",help:"https://aide.kiubi.com/transporteurs.html#ajout-d-un-transporteur"},{msg:"Les commandes peuvent être exportées vers le Station DPD, logiciel d'étiquetage de DPD",help:"https://aide.kiubi.com/transporteurs.html#ajout-d-un-transporteur"},{msg:'Un "bac à sable" est disponible pour l\'API Front-Office.',help:"https://aide.kiubi.com/api-front-generalites.html#le-sandbox"},{msg:'Un "bac à sable" est disponible pour l\'API Developers.',help:"https://aide.kiubi.com/api-dev-generalites.html#le-sandbox"},{msg:"Pour utiliser l'API Front-Office, vous devez d'abord l'activer dans les préférences.",link:"/prefs",help:"https://aide.kiubi.com/preferences.html#preferences-generales"},{msg:"Pour utiliser l'API Developers, une clé API d'un administrateur est nécessaire.",help:"https://aide.kiubi.com/api-dev-generalites.html#client-php"},{msg:"L'up-selling et le cross-selling sont des outils efficaces pour booster les ventes",help:"https://aide.kiubi.com/design-catalogue.html#produits-les-plus"},{msg:"Un produit vedette sera mis en avant et affiché en tête de listing.",help:"https://aide.kiubi.com/design-catalogue.html#produits-vedettes"},{msg:"Un produit peut être un objet physique ou un fichier à télécharger.",help:"https://aide.kiubi.com/catalogue.html#produit-virtuel"},{msg:"Chaque produit peut être décliné en 300 variantes et références différentes.",help:"https://aide.kiubi.com/catalogue.html#variantes-produit"},{msg:"Toutes les pages disposent d'options avancées pour optimiser le SEO.",help:"https://aide.kiubi.com/site-web.html#parametres-avances"},{msg:"Si vous êtes exonérez de TVA, n'oubliez pas de le configurer dans le catalogue.",link:"/catalog/taxes",help:"https://aide.kiubi.com/catalogue.html#gerer-les-taxes"},{msg:"Pour d'évidentes raisons de sécurité, tous les mots de passe sont chiffrés.",help:"https://aide.kiubi.com/membres.html#recuperation-du-mot-de-passe"},{msg:"Les bons de réduction permettent également d'offrir une remise sur les frais de port.",link:"/modules/vouchers",help:"https://aide.kiubi.com/modules.html#bons-de-reduction"},{msg:"Des sauvegardes de vos données sont faites quotidiennement et automatiquement.",link:"/modules/backups",help:"https://aide.kiubi.com/modules.html#gestion-des-sauvegardes"},{msg:"Les abonnés à votre newsletter sont à exporter vers votre plateforme d'emailing.",link:"/modules/subscribers",help:"https://aide.kiubi.com/membres.html#exporter-les-membres"},{msg:"Pour faciliter l'ajout de contenu, dupliquez vos billets, vos pages, vos produits.",help:"https://aide.kiubi.com/site-web.html#ajouter-du-contenu"},{msg:"Le contenu de votre site peut être exporté à tout moment. Et importé également.",help:"https://aide.kiubi.com/site-web.html#export-de-contenus"},{msg:"La médiathèque peut stocker tous types de fichiers.",link:"/media/folders/2/files",help:"https://aide.kiubi.com/design-generalites.html#mediatheque"},{msg:"L'accès à un dossier de la médiathèque peut être restreint via l'extranet.",help:"https://aide.kiubi.com/membres.html#extranet"},{msg:"Votre abonnement peut être renouvelé pour 1, 3, 6 ou 12 mois.",help:"https://aide.kiubi.com/generalites.html#gestion-des-abonnements"},{msg:"Un menu ou une liste de produits, tout ce qui s'affiche est piloté par un widget.",help:"https://aide.kiubi.com/design-generalites.html#widgets"},{msg:"Il y a 3 à 4 mises à jour majeures de Kiubi par an. Et 100 fois plus de mineures.",help:"https://www.kiubi.com/blog/"},{msg:"Les composants vous permettent de créer des carrousels, des galeries photos, des accordéons, tout ce que vous voulez !",help:"https://aide.kiubi.com/site-web.html#ajouter-un-composant"},{msg:'Utilisez les symboles pour centraliser une "section" de contenu, de mise en page et de widgets',help:"https://aide.kiubi.com/site-web.html#ajouter-un-symbole"},{msg:"Vous pouvez créer des grilles de tarifs dégressifs en fonction de la quantité de produits achetés.",help:"https://aide.kiubi.com/modules.html#tarifs-degressifs"}])},pickRandom:function(){return this.at(Math.round(Math.random()*(this.length-1))).toJSON()}});
},{"undefined":undefined}],50:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/stats/usage",isNew:function(){return!1},defaults:{space:{},bandwidth:{},api_pfo:{},products:{},forms:{},users:{}}});
},{"606":606}],51:[function(require,module,exports){
var CollectionUtils=require(606),_=require("underscore");module.exports=CollectionUtils.KiubiModel.extend({urlRoot:"users",idAttribute:"user_id",defaults:{user_id:0,lastname:"",firstname:"",avatar:"",email:"",gender:"",is_admin:!1,scopes:[]},isAuth:function(){return this.get("user_id")>0},hasScope:function(e){return!!this.get("scopes")&&_.contains(this.get("scopes"),e)},isAdmin:function(){return this.get("is_admin")===!0},getAvatar:function(){var e;return e="M"==this.get("gender")?"user-avatar-m.png":"user-avatar-f.png"}});
},{"606":606,"undefined":undefined}],52:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Controller=require(34),NotFoundView=require(120),DashboardView=require(98),HomeboardView=require(114),LoginView=require(118),HelpView=require(113),SidebarMenuView=require(124),Stats=require(48),Report=require(44),Live=require(45),Cobranding=require(36),Contact=require(38),statsModel=new Stats,DefaultController=Controller.extend({sidebarMenuService:"dashboard",sidebarMenu:SidebarMenuView,sidebarMenuOptions:{stat:statsModel},notFound:function(e){null===this.navigationController.getSidebarMenuService()&&(this.navigationController.hideSidebarMenu(),this.setHeader([{title:"Kiubi",href:"/"},{title:"Page non disponible"}])),this.navigationController.showContent(new NotFoundView({message:e}))},loadLogin:function(e){var o=this.parseQueryString(e,{code_site:null}),i=Backbone.Radio.channel("app").request("ctx:session");o.code_site?i.changeSite(o.code_site).done(function(){this.navigationController.navigate("/")}.bind(this)).fail(function(){this.showLogin({code_site:o.code_site,cobranding:new Cobranding,Session:i})}.bind(this)):this.showLogin({Session:i})},showLogin:function(e){var o=new LoginView(e);this.listenTo(o,"success:login",function(){this.navigationController.navigate("/"),this.navigationController.hideModal()}.bind(this)),this.navigationController.showModal(o),this.navigationController.showContent(new NotFoundView({message:""}))},chooseBoard:function(){var e=Backbone.Radio.channel("app").request("ctx:session");!e.user.isAdmin()||"prestataire"===e.site.get("account").account_type&&"expert"===e.site.get("account").account_level||!e.site.get("plan").is_trial?this.navigationController.navigate("/dashboard"):this.navigationController.navigate("/homeboard")},showDashboard:function(){this.showSidebarMenu();var e=new DashboardView({stats:statsModel,report:new Report,live:new Live}),o=Backbone.Radio.channel("app").request("ctx:session"),i=this;e.listenTo(o.site,"change:site",function(){e.render(),i.showSidebarMenu()}),this.navigationController.showContent(e),this.setHeader([{title:"Tableau de bord",href:"/"},{title:"Bienvenue sur Kiubi"}],[{title:"Voir le site",callback:"openSite"}])},showHomeboard:function(){this.showSidebarMenu();var e=new HomeboardView;this.navigationController.showContent(e),this.setHeader([{title:"Tableau de bord",href:"/"},{title:"Bienvenue sur Kiubi"}],[{title:"Voir le site",callback:"openSite"}])},openSite:function(){var e=Backbone.Radio.channel("app").request("ctx:session");window.open(e.autologLink())},showHelp:function(){this.showSidebarMenu();var e=new HelpView({model:new Contact});this.navigationController.showContent(e),this.setHeader([{title:"Tableau de bord",href:"/"},{title:"Centre d'aide"}])}});module.exports=Marionette.AppRouter.extend({appRoutes:{"":"chooseBoard",dashboard:"showDashboard",homeboard:"showHomeboard",login:"loadLogin",help:"showHelp","*notFound":"notFound"},navigate:function(e,o){o=o||{trigger:!0};var i=this,t=this.application,n=t.getRegion("contentRegion").currentView,a=void 0===n||!n.onBeforeDetach||n.onBeforeDetach();a&&Backbone.$.when(a).done(function(){return t.trigger("navigate",e),o.preventPushState?void Backbone.history.loadUrl(e):void Marionette.AppRouter.prototype.navigate.apply(i,[e,o])})},initialize:function(e){this.mergeOptions(e,["application"]),this.controller=new DefaultController;var o=e.application;window.onpopstate=function(){o.trigger("navigate",window.location.pathname)}}});
},{"113":113,"114":114,"118":118,"120":120,"124":124,"34":34,"36":36,"38":38,"44":44,"45":45,"48":48,"98":98,"undefined":undefined}],53:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="container container-large"><div data-role="messages"></div><div data-role="plan"></div><article data-role="graph"></article><div data-role="widgets"></div><article data-role="tips"></article></div>';return __p};
},{"undefined":undefined}],54:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article dashboard-activity w-100"><header class="post-header"><nav class="float-right"><ul class="pagination"><li class="page-item disabled" data-role="previous"><a class="page-link" href="#"><span class="md-icon md-previous"></span></a></li><li class="page-item disabled" data-role="next"><a class="page-link" href="#"><span class="md-icon md-next"></span></a></li></ul></nav><h1>Activités récentes</h1></header><div data-role="list"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],55:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><div class="activity-type md-icon md-activity-'+(null==(__t=type)?"":_.escape(__t))+'"></div></div><div class="col item-body"> ',__p+=url?' <a href="'+(null==(__t=url)?"":_.escape(__t))+'">'+(null==(__t=text)?"":_.escape(__t))+"</a> ":" "+(null==(__t=text)?"":_.escape(__t))+" ",__p+=" <h4>"+(null==(__t=user_name)?"":_.escape(__t))+'</h4></div><div class="col-auto"> '+(null==(__t=creation_date_fromnow)?"":_.escape(__t))+" </div></div>";return __p};
},{"undefined":undefined}],56:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article dashboard-forms w-100"><header class="post-header"><nav class="float-right"><ul class="pagination"><li class="page-item"><a class="page-link ml-2" href="/forms/inbox">Tout afficher</a></li></ul></nav><h1>Boite de réception</h1></header><div data-role="list"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],57:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col item-body"><span class="read '+(null==(__t=is_read?"":"not-read")?"":_.escape(__t))+'"></span><h4><a href="/forms/inbox?r='+(null==(__t=response_id)?"":_.escape(__t))+'">#'+(null==(__t=response_id)?"":_.escape(__t))+"</a></h4> "+(null==(__t=creation_date_fromnow)?"":_.escape(__t))+" <span>"+(null==(__t=subject)?"":_.escape(__t))+'</span><p class="item-detail text-truncate" style="height: 25px">'+(null==(__t=summary)?"":_.escape(__t))+"</p></div></div>";return __p};
},{"undefined":undefined}],58:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article dashboard-funnel w-100"><header class="post-header"><h1>Conversion des ventes</h1></header><div class="post-content post-list no-hover"><div class="list-item border-0 stats-value"><div class="row no-gutters"><div class="col item-body"><h4>'+(null==(__t=conversion.pending)?"":_.escape(__t))+'</h4></div><div class="col-auto"><span class="md-icon '+(null==(__t=conversion.pending_trends>=0?"md-trendingup text-success":"md-trendingdown text-danger")?"":_.escape(__t))+' mr-1"></span>'+(null==(__t=formatNumber(conversion.pending_trends,2))?"":_.escape(__t))+'</div></div></div><div class="list-item list-item-md border-0"><div class="row no-gutters"><div class="col item-body"><h4>Ajout au panier</h4> ',hasData&&(__p+=""+(null==(__t=plural(funnel.cart,"%d visite","%d visites"))?"":_.escape(__t))),__p+='&nbsp;</div><div class="col-3 align-items-start">'+(null==(__t=conversion.cart)?"":_.escape(__t))+'</div><div class="col-2 align-items-start"><span class="md-icon '+(null==(__t=conversion.cart_trends>=0?"md-trendingup text-success":"md-trendingdown text-danger")?"":_.escape(__t))+' mr-1"></span>'+(null==(__t=formatNumber(conversion.cart_trends,2))?"":_.escape(__t))+'</div></div></div><div class="list-item list-item-md border-0"><div class="row no-gutters"><div class="col item-body"><h4>Page de récapitulation</h4> ',hasData&&(__p+=""+(null==(__t=plural(funnel.checkout,"%d visite","%d visites"))?"":_.escape(__t))),__p+='&nbsp;</div><div class="col-3 align-items-start">'+(null==(__t=conversion.checkout)?"":_.escape(__t))+'</div><div class="col-2 align-items-start"><span class="md-icon '+(null==(__t=conversion.checkout_trends>=0?"md-trendingup text-success":"md-trendingdown text-danger")?"":_.escape(__t))+' mr-1"></span>'+(null==(__t=formatNumber(conversion.checkout_trends,2))?"":_.escape(__t))+'</div></div></div><div class="list-item list-item-md border-0"><div class="row no-gutters"><div class="col item-body"><h4>Commandes effectuées</h4> ',hasData&&(__p+=""+(null==(__t=plural(funnel.pending,"%d visite","%d visites"))?"":_.escape(__t))),__p+='&nbsp;</div><div class="col-3 align-items-start">'+(null==(__t=conversion.pending)?"":_.escape(__t))+'</div><div class="col-2 align-items-start"><span class="md-icon '+(null==(__t=conversion.pending_trends>=0?"md-trendingup text-success":"md-trendingdown text-danger")?"":_.escape(__t))+' mr-1"></span>'+(null==(__t=formatNumber(conversion.pending_trends,2))?"":_.escape(__t))+'</div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],59:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><div class="row no-gutters d-none d-md-flex"><div class="col filters-options"><span><div class="btn-group"><div class="input-group" data-toggle="tooltip" data-placement="top" data-container="body" data-original-title="Période comprise entre 1 et 31 jours"><div class="input-group-prepend"><span class="input-group-text">Période du</span></div><input data-role="datepicker" class="form-control" name="start_date" value="'+(null==(__t=startDate)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa"><div class="input-group-prepend"><span class="input-group-text">au</span></div><input data-role="datepicker" class="form-control" name="end_date" value="'+(null==(__t=endDate)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa"><div class="input-group-append"><span class="input-group-text"><span data-role="feedback" class="md-icon float-right md-date"></span></span></div></div></div><div class="btn-group mr-0"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Comparée à</span></div><input data-role="datepicker" class="form-control" name="compare_date" value="" placeholder="jj/mm/aaaa"><div class="input-group-append"><span class="input-group-text"><span data-role="feedback" class="md-icon float-right md-date"></span></span></div></div></div></span></div><div class="col-auto sort-options"><span><div class="btn-group" role="group"><button type="button" class="btn btn-secondary" data-role="compare" data-delta="days">Jour</button> <button type="button" class="btn btn-secondary" data-role="compare" data-delta="weeks">Semaine</button> <button type="button" class="btn btn-secondary" data-role="compare" data-delta="months">Mois</button></div><div class="btn-group"><a href="#" data-role="stats" class="btn btn-secondary btn-icon md-icon md-stats"></a> <a href="https://aide.kiubi.com/modules.html#tableau-de-bord-d-activite" target="_blank" class="btn btn-secondary btn-icon md-icon md-help"></a></div></span></div></div></header><div class="post-content"><div data-role="summary"></div><p data-role="chart"></p></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],60:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row align-items-center"><div class="col-8 col-lg-4"><div class="row no-gutters dashboard-stats-primary"><div class="col-6"><div class="dashboard-stats-item '+(null==(__t="visitors"==current?"active":"")?"":__t)+'" data-role="select-visitors"><span class="md-icon md-help-outline d-none" data-toggle="tooltip" data-placement="top" data-container="body" title="" data-original-title="Total des visites"></span> <span class="mt-1"><h1 data-role="visitors">'+(null==(__t=visitors)?"":_.escape(__t))+'</h1><span class="badge stats-label">Visites</span></span></div></div><div class="col-6"><div class="dashboard-stats-item '+(null==(__t="pageviews"==current?"active":"")?"":__t)+'" data-role="select-pageviews"><span class="md-icon md-help-outline d-none" data-toggle="tooltip" data-placement="top" data-container="body" title="" data-original-title="Total des pages vues"></span> <span class="mt-1"><h1 data-role="pageviews">'+(null==(__t=pageviews)?"":_.escape(__t))+'</h1><span class="badge stats-label">Pages vues</span></span></div></div></div></div><div class="col-4 col-lg-2 mt-4 mt-sm-0 order-lg-3"><div class="row no-gutters dashboard-stats-secondary"><div class="col-12"><div class="dashboard-stats-item"><span class="md-icon md-help-outline d-none" data-toggle="tooltip" data-placement="top" data-container="body" title="" data-original-title="Visiteurs actuellement sur le site Internet"></span><h1 class="mr-2" data-role="live">'+(null==(__t=live)?"":_.escape(__t))+'</h1><span class="badge badge-warning">En direct</span></div></div></div></div><div class="col-12 col-lg-6 mt-4 mt-lg-0"><div class="row no-gutters dashboard-stats-primary"><div class="col-4"><div class="dashboard-stats-item '+(null==(__t="orders"==current?"active":"")?"":__t)+'" data-role="select-orders"><span class="md-icon md-help-outline d-none" data-toggle="tooltip" data-placement="top" data-container="body" title="" data-original-title="Total des commandes payées"></span> <span class="mt-1"><h1>'+(null==(__t=orders)?"":_.escape(__t))+'</h1><span class="badge stats-label">Commandes</span></span></div></div><div class="col-4"><div class="dashboard-stats-item '+(null==(__t="sales"==current?"active":"")?"":__t)+'" data-role="select-sales"><span class="md-icon md-help-outline d-none" data-toggle="tooltip" data-placement="top" data-container="body" title="" data-original-title="Total HT des commandes payées"></span> <span class="mt-1"><h1 data-role="sales">'+(null==(__t=sales)?"":__t)+'</h1><span class="badge stats-label">Ventes</span></span></div></div><div class="col-4"><div class="dashboard-stats-item '+(null==(__t="cart"==current?"active":"")?"":__t)+'" data-role="select-cart"><span class="md-icon md-help-outline d-none" data-toggle="tooltip" data-placement="top" data-container="body" title="" data-original-title="Moyenne HT des montants payés par commande"></span> <span class="mt-1"><h1>'+(null==(__t=cart_mean)?"":__t)+'</h1><span class="badge stats-label">Panier moyen</span></span></div></div></div></div></div>';return __p};
},{"undefined":undefined}],61:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article post-article-aside dashboard-map w-100"><header class="post-header d-flex"><h1>Localiser les commandes</h1><nav class="ml-auto"><ul class="pagination mb-0"><li class="page-item '+(null==(__t="france"==mode?"active":"")?"":_.escape(__t))+' d-none d-lg-inline-block"><a href="#" data-role="switch" data-mode="france" class="page-link ml-2">France</a></li><li class="page-item '+(null==(__t="world"==mode?"active":"")?"":_.escape(__t))+' d-none d-lg-inline-block"><a href="#" data-role="switch" data-mode="world" class="page-link ml-2">Monde</a></li></ul></nav></header><div class="post-content post-list" style="height: 510px"><div data-role="map" style="height: 100%"></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],62:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article post-article-aside dashboard-orders w-100"><header class="post-header"><nav class="float-right"><ul class="pagination"><li class="page-item"><a class="page-link ml-2" href="/checkout/orders?status=pending">Tout afficher</a></li></ul></nav><h1>Dernières commandes</h1></header><div data-role="list"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],63:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col item-body"><h4 class="d-inline-block mr-2"><a href="/checkout/orders/'+(null==(__t=order_id)?"":_.escape(__t))+'">#'+(null==(__t=reference)?"":_.escape(__t))+"</a></h4> "+(null==(__t=creation_date_fromnow)?"":_.escape(__t))+' </div><div class="col-3">',__p+=customer_id?' <a href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'">'+(null==(__t=billing_address.firstname)?"":_.escape(__t))+" "+(null==(__t=billing_address.lastname)?"":_.escape(__t))+"</a> ":" "+(null==(__t=billing_address.firstname)?"":_.escape(__t))+" "+(null==(__t=billing_address.lastname)?"":_.escape(__t))+" ",__p+='</div><div class="col-3"><span class="price">'+(null==(__t=price_total_inc_vat_label)?"":_.escape(__t))+" TTC</span></div></div>";return __p};
},{"undefined":undefined}],64:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",site.plan.is_trial?__p+=' <div class="alert alert-warning d-flex justify-content-between align-items-center p-3" role="alert"><span>Bienvenue '+(null==(__t=user.firstname)?"":_.escape(__t))+" "+(null==(__t=user.lastname)?"":_.escape(__t))+", vous bénéficiez d'une période d'essai gratuite de "+(null==(__t=plural(interval_trial,"%d jour","%d jours"))?"":_.escape(__t))+", jusqu'au "+(null==(__t=endtrial_date)?"":_.escape(__t))+' </span><a href="#" data-role="plan" class="btn btn-success align-middle text-nowrap">Choisir une offre</a></div> ':site.plan.is_free||(__p+=" ",site.plan.is_closed?__p+=' <div class="alert alert-danger d-flex justify-content-between align-items-center p-3" role="alert"><span><span class="md-icon md-warning align-middle mr-2"></span>Attention, le site Internet est fermé depuis le '+(null==(__t=closing_date)?"":_.escape(__t))+" et sera supprimé dans "+(null==(__t=plural(180+interval_closing,"%d jour","%d jours"))?"":_.escape(__t))+' </span><a href="#" data-role="subscription" class="btn btn-success align-middle text-nowrap">Créditer le site</a></div> ':interval_closing<=7&&(__p+=' <div class="alert alert-warning d-flex justify-content-between align-items-center p-3" role="alert"><span> '+(null==(__t=user.firstname)?"":_.escape(__t))+" "+(null==(__t=user.lastname)?"":_.escape(__t))+", l'abonnement du site Internet va expirer dans "+(null==(__t=plural(interval_closing,"%d jour","%d jours"))?"":_.escape(__t))+", le "+(null==(__t=closing_date)?"":_.escape(__t))+' </span><a href="#" data-role="subscription" class="btn btn-success align-middle text-nowrap">Créditer le site</a></div> '),__p+=" "),__p+="";return __p};
},{"undefined":undefined}],65:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article dashboard-top w-100"><header class="post-header d-flex"><h1>Meilleurs produits</h1><nav class="ml-auto"><ul class="pagination mb-0"><li class="page-item '+(null==(__t=has_previous?"":"disabled")?"":_.escape(__t))+'" data-role="previous"><a class="page-link" href="#"><span class="md-icon md-previous"></span></a></li><li class="page-item '+(null==(__t=has_next?"":"disabled")?"":_.escape(__t))+'" data-role="next"><a class="page-link" href="#"><span class="md-icon md-next"></span></a></li><li class="page-item '+(null==(__t=enabledTab==tabSold?"active":"")?"":_.escape(__t))+' d-none d-lg-inline-block"><a href="#" class="page-link ml-2" data-role="switch" data-tab="'+(null==(__t=tabSold)?"":_.escape(__t))+'">Plus vendus</a></li><li class="page-item '+(null==(__t=enabledTab==tabShow?"active":"")?"":_.escape(__t))+' d-none d-lg-inline-block"><a href="#" class="page-link ml-2" data-role="switch" data-tab="'+(null==(__t=tabShow)?"":_.escape(__t))+'">Plus vus</a></li></ul></nav></header><div class="post-content post-list"> ',list&&list.length>0?(__p+=" ",_.each(list,function(a,e){__p+=' <div class="list-item list-item-sm"><div class="row no-gutters"><div class="col-auto mr-2">'+(null==(__t=a.position)?"":_.escape(__t))+'.</div><div class="col item-body pr-sm-0"><h4 class="text-truncate"><a href="'+(null==(__t=a.href)?"":__t)+'" title="'+(null==(__t=a.name)?"":_.escape(__t))+'">'+(null==(__t=a.name)?"":_.escape(__t))+'</a></h4></div><div class="col-auto">'+(null==(__t=a.count)?"":_.escape(__t))+"</div></div></div> "}),__p+=" "):__p+=' <span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Il n\'y a encore rien à afficher</span> ',__p+=' </div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],66:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article dashboard-words w-100"><header class="post-header d-flex"><h1>Mots clés recherchés</h1><nav class="ml-auto"><ul class="pagination mb-0"><li class="page-item '+(null==(__t=has_previous?"":"disabled")?"":_.escape(__t))+'" data-role="previous"><a class="page-link" href="#"><span class="md-icon md-previous"></span></a></li><li class="page-item '+(null==(__t=has_next?"":"disabled")?"":_.escape(__t))+'" data-role="next"><a class="page-link" href="#"><span class="md-icon md-next"></span></a></li></ul></nav></header><div class="post-content post-list no-hover"> ',list&&list.length>0?(__p+=" ",_.each(list,function(s,a){__p+=' <div class="list-item list-item-sm"><div class="row no-gutters"><div class="col-auto mr-2">'+(null==(__t=s.position)?"":_.escape(__t))+'.</div><div class="col item-body pr-sm-0"><h4 class="text-truncate">'+(null==(__t=s.name)?"":_.escape(__t))+'</h4></div><div class="col-auto">'+(null==(__t=formatNumber(s.count))?"":_.escape(__t))+"</div></div></div> "}),__p+=" "):__p+=' <span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Il n\'y a encore rien à afficher</span> ',__p+=' </div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],67:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article data-role="referer"></article><article data-role="mobility"></article>';return __p};
},{"undefined":undefined}],68:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header"><h1>Visites par périphériques</h1></header><div class="post-content"><div class="row no-gutters"><div class="col-3"><div><canvas data-role="chart" style="height: 140px" class="mt-4"></canvas></div></div><div class="col-8 ml-auto my-5"><div class="row no-gutters"><div class="col"><span class="md-icon md-data md-source-desktop"></span><h4 class="d-inline-block ml-1">Ordinateurs</h4></div><div class="col-3" data-role="desktop-value">-</div><div class="col-3 text-right" data-role="desktop-prct"></div></div><div class="row no-gutters mt-3"><div class="col"><span class="md-icon md-data md-source-tablet"></span><h4 class="d-inline-block ml-1">Tablettes</h4></div><div class="col-3" data-role="tablet-value">-</div><div class="col-3 text-right" data-role="tablet-prct"></div></div><div class="row no-gutters mt-3"><div class="col"><span class="md-icon md-data md-source-mobile"></span><h4 class="d-inline-block ml-1">Mobiles</h4></div><div class="col-3" data-role="mobile-value">-</div><div class="col-3 text-right" data-role="mobile-prct"></div></div></div></div></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],69:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header"><h1>Visites par sources de trafic</h1></header><div class="post-content post-list no-hover"><div class="list-item list-item-sm"><div class="row no-gutters"><div class="col item-body"><h4>Recherches</h4></div> ',__p+=hasData?' <div class="col-3">'+(null==(__t=formatNumber(referer.search))?"":_.escape(__t))+'</div><div class="col-2"><span class="md-icon '+(null==(__t=referer.search_trends>=0?"md-trendingup text-success":"md-trendingdown text-danger")?"":_.escape(__t))+' mr-1"></span>'+(null==(__t=formatPrct(100*referer.search_trends))?"":_.escape(__t))+"%</div> ":' <div class="col-2">-</div> ',__p+=' </div></div><div class="list-item list-item-sm"><div class="row no-gutters"><div class="col item-body"><h4>Liens directs</h4></div> ',__p+=hasData?' <div class="col-3">'+(null==(__t=formatNumber(referer.referals))?"":_.escape(__t))+'</div><div class="col-2"><span class="md-icon '+(null==(__t=referer.referals_trends>=0?"md-trendingup text-success":"md-trendingdown text-danger")?"":_.escape(__t))+' mr-1"></span>'+(null==(__t=formatPrct(100*referer.referals_trends))?"":_.escape(__t))+"%</div> ":' <div class="col-2">-</div> ',__p+=' </div></div><div class="list-item list-item-sm"><div class="row no-gutters"><div class="col item-body"><h4>Réseaux sociaux</h4></div> ',__p+=hasData?' <div class="col-3">'+(null==(__t=formatNumber(referer.social))?"":_.escape(__t))+'</div><div class="col-2"><span class="md-icon '+(null==(__t=referer.social_trends>=0?"md-trendingup text-success":"md-trendingdown text-danger")?"":_.escape(__t))+' mr-1"></span>'+(null==(__t=formatPrct(100*referer.social_trends))?"":_.escape(__t))+"%</div> ":' <div class="col-2">-</div> ',__p+=' </div></div><div class="list-item list-item-sm"><div class="row no-gutters"><div class="col item-body"><h4>Emails</h4></div> ',__p+=hasData?' <div class="col-3">'+(null==(__t=formatNumber(referer.email))?"":_.escape(__t))+'</div><div class="col-2"><span class="md-icon '+(null==(__t=referer.email_trends>=0?"md-trendingup text-success":"md-trendingdown text-danger")?"":_.escape(__t))+' mr-1"></span>'+(null==(__t=formatPrct(100*referer.email_trends))?"":_.escape(__t))+"%</div> ":' <div class="col-2">-</div> ',__p+=' </div></div></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],70:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="post-content"><div class="row no-gutters align-items-center"><div class="col-auto"><span class="md-icon md-icon-outlined md-tips"></span></div><div class="col"><h4 class="d-inline-block mr-2">Le saviez-vous ?</h4> '+(null==(__t=tip.msg)?"":_.escape(__t))+" ",link&&(__p+=" <a ",is_external&&(__p+=' target="_blank" '),__p+=' href="'+(null==(__t=link)?"":_.escape(__t))+'" data-tracking="Tips">Plus d\'infos</a> '),__p+=' </div></div></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],71:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",actions&&actions.length>0&&(__p+=' <div class="btn-group float-right"><button data-id="'+(null==(__t=actions[0].index)?"":_.escape(__t))+'" type="button" class="btn btn-lg btn-success btn-action '+(null==(__t=actions[0].isEnabled?"":"disabled")?"":__t)+'" data-role="default-action">'+(null==(__t=actions[0].title)?"":_.escape(__t))+"</button> ",actions.length>1&&(__p+=' <button type="button" class="btn btn-lg btn-success btn-action dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right" data-role="other-actions"> '),_(actions).each(function(t,l){0!=l&&(__p+=' <li data-id="'+(null==(__t=t.index)?"":_.escape(__t))+'"><a href="#" class="dropdown-item '+(null==(__t=t.isEnabled?"":"disabled")?"":__t)+'">'+(null==(__t=t.title)?"":_.escape(__t))+"</a></li> ")}),__p+=" </ul> ",__p+=" </div> "),__p+=" ",navigation&&(__p+=' <div class="btn-group float-right m-0"><a href="'+(null==(__t=navigation.previous?navigation.previous:"#")?"":__t)+'" class="btn btn-lg btn-preview md-icon md-previous '+(null==(__t=navigation.previous?"":"disabled")?"":__t)+'" title="Billet précédent"></a> <a href="'+(null==(__t=navigation.next?navigation.next:"#")?"":__t)+'" class="btn border-left btn-lg btn-next md-icon md-next '+(null==(__t=navigation.next?"":"disabled")?"":__t)+'" title="Billet suivant"></a></div> '),__p+=' <ol class="breadcrumb flex-nowrap"> ',_(links).each(function(t){__p+=" ",__p+=t.href?' <li class="breadcrumb-item"><a href="'+(null==(__t=t.href)?"":_.escape(__t))+'" title="'+(null==(__t=t.title)?"":_.escape(__t))+'">'+(null==(__t=t.title)?"":_.escape(__t))+"</a></li> ":' <li class="breadcrumb-item active" title="'+(null==(__t=t.title)?"":_.escape(__t))+'">'+(null==(__t=t.title)?"":_.escape(__t))+"</li> ",__p+=" "}),__p+=' <li class="gradient"></li></ol><div class="d-flex"> ',tabs&&(__p+=' <ul class="nav nav-tab"> ',_(tabs).each(function(t){__p+=' <li role="presentation" class="nav-item"><a href="'+(null==(__t=t.url)?"":_.escape(__t))+'" target="'+(null==(__t=t.target?t.target:"")?"":_.escape(__t))+'" class="nav-link '+(null==(__t=t.is_active?"active":"")?"":__t)+'"> ',t.icon&&(__p+=' <span class="md-icon '+(null==(__t=t.icon)?"":_.escape(__t))+' mr-0 mr-lg-2" title="'+(null==(__t=t.title)?"":_.escape(__t))+'"></span> '),__p+=' <span class="d-none d-lg-inline-block">'+(null==(__t=t.title)?"":_.escape(__t))+"</span></a></li> "}),__p+=" </ul> "),__p+=" ",tabactions&&(__p+=' <ul class="nav nav-tab tab-actions" data-role="other-actions"> ',_(tabactions).each(function(t,l){__p+=' <li class="nav-item" data-id="'+(null==(__t=t.index)?"":_.escape(__t))+'"><a href="#" class="nav-link '+(null==(__t=t.isEnabled?"":"d-none")?"":__t)+'"><span class="md-icon '+(null==(__t=t.icon)?"":_.escape(__t))+' mr-0 mr-lg-2" title="'+(null==(__t=t.title)?"":_.escape(__t))+'"></span> <span class="d-none d-lg-inline-block">'+(null==(__t=t.title)?"":_.escape(__t))+"</span></a></li> "}),__p+=" </ul> "),__p+=" </div>";return __p};
},{"undefined":undefined}],72:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="container"><article class="post-article post-article-empty text-center"><header class="post-header"><h1>Avec Kiubi, vous n\'êtes jamais seul</h1></header><div class="post-content"><p class="lead">Une documentation complète, un guide pour le webdesign, de puissantes API, etc.<br>Nous mettons constamment de nouvelles ressources à votre disposition pour que vous soyez toujours plus efficace.</p></div><footer class="post-footer"></footer></article><article class="post-article"><div class="post-content"><div class="nav-full"><div class="row no-gutters"><div class="col"><div class="nav flex-column nav-pills"><a class="nav-link active" data-toggle="pill" href="#help-tuto-support"><span class="md-icon md-icon-outlined md-support"></span>Support technique</a> <a class="nav-link" data-toggle="pill" href="#help-tuto-help"><span class="md-icon md-icon-outlined md-help"></span>Guide d\'utilisation</a> <a class="nav-link" data-toggle="pill" href="#help-tuto-theme"><span class="md-icon md-icon-outlined md-theme"></span>Création de thèmes</a> <a class="nav-link" data-toggle="pill" href="#help-tuto-api"><span class="md-icon md-icon-outlined md-extension"></span>Utiliser les API</a></div></div><div class="col-8"><div class="tab-content"><div class="tab-pane fade show active" id="help-tuto-support"><div class="row"><div class="col"><h2>Support technique</h2><p>Vous avez une question sur l\'utilisation de Kiubi ? Ouvrez un ticket dans le support en ligne et notre équipe s\'efforcera d\'y répondre dans les meilleurs délais.</p></div><div class="col-auto"><img src="/assets/img/illus_support_help.png" class="img-fluid"></div></div> ',__p+=user.is_admin?' <a href="https://www.kiubi-admin.com/support/" data-tracking target="_blank" class="btn btn-lg btn-success">Ouvrir un ticket</a> ':' <button type="button" class="btn btn-lg btn-success" data-tracking data-toggle="modal" data-target="#technicalSupport">Contacter le support</button> ',__p+=' </div><div class="tab-pane fade" id="help-tuto-help"><div class="row"><div class="col"><h2>Guide d\'utilisation</h2><p>Appropriez-vous Kiubi grâce à une documentation en ligne complète. Cliquez également sur les icônes <a href="https://aide.kiubi.com/" target="_blank" class="md-icon md-help-outline align-text-top" data-toggle="tooltip" data-placement="bottom" data-container="body" title="En savoir plus"></a> pour accéderez directement à la fiche d\'aide associée.</p></div><div class="col-auto"><img src="/assets/img/illus_help.png" class="img-fluid"></div></div><a href="https://aide.kiubi.com/" data-tracking target="_blank" class="btn btn-lg btn-success">Consulter la documentation</a></div><div class="tab-pane fade" id="help-tuto-theme"><div class="row"><div class="col"><h2>Création de thèmes</h2><p>Le guide du webdesigner est à votre disposition pour vous aider à exploiter les possibilités de personnalisation offertes par Kiubi.</p></div><div class="col-auto"><img src="/assets/img/illus_theme.png" class="img-fluid"></div></div><a href="https://aide.kiubi.com/design-generalites.html" data-tracking target="_blank" class="btn btn-lg btn-success">Consulter le guide</a></div><div class="tab-pane fade" id="help-tuto-api"><div class="row"><div class="col"><h2>Utiliser les API</h2><p>Les API de Kiubi couvrent 100% du périmètre fonctionnel de la plateforme. Une ouverture indispensable pour le développement de services et d\'applications tiers.</p></div><div class="col-auto"><img src="/assets/img/illus_api.png" class="img-fluid"></div></div><a href="https://aide.kiubi.com/api-front-generalites.html" data-tracking target="_blank" class="btn btn-lg btn-success mr-3">API Front-Office</a> <a href="https://aide.kiubi.com/api-dev-generalites.html" data-tracking target="_blank" class="btn btn-lg btn-primary">API Developers</a></div></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article post-article-illus"><div class="post-content"><div class="row no-gutters"><div class="col col-content"><h1>Kiubi Professionnal Services</h1><p>Vous avez des attentes particulières ? Vous souhaitez interfacer votre site avec votre CRM ? Votre projet nécessite un hébergement dédié ?<br>Les Kiubi Professional Services sont faits pour vous.</p><a class="btn btn-outline-primary" href="/modules/kps" data-tracking>En savoir plus sur les KPS</a></div><div class="col-5"><img src="/assets/img/illus_kps.jpg" class="img-fluid"></div></div></div><footer class="post-footer"></footer></article><article class="post-article post-article-illus"><div class="post-content"><div class="row no-gutters"><div class="col col-content"><h1>Tenez-vous informé</h1><p>Suivez toute l\'actualité de Kiubi et les dernières nouveautés sur notre blog. Retrouvez-nous également sur les réseaux sociaux, <a href="https://www.facebook.com/Kiubi" data-tracking target="_blank">Facebook</a>, <a href="https://twitter.com/kiubi" data-tracking target="_blank">Twitter</a> et <a href="https://www.linkedin.com/company/kiubi-cms/" data-tracking target="_blank">Linkedin</a>.</p><a class="btn btn-outline-primary" href="https://www.kiubi.com/blog/" data-tracking target="_blank">Consulter le blog de Kiubi</a></div><div class="col-5"><img src="/assets/img/illus_blog.jpg" class="img-fluid"></div></div></div><footer class="post-footer"></footer></article><article data-role="tips"></article></div> ',user.is_admin||(__p+=' <div class="modal fade" tabindex="-1" role="dialog" id="technicalSupport"><div class="modal-dialog modal-sm" role="document"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">Support technique</h4><button type="button" class="close md-icon md-close" data-dismiss="modal"></button></div><div class="modal-body"><article class="post-article"><div class="post-content"><p>Un administrateur est requis pour ouvrir un ticket de support. Nous vous invitons à contactez votre administrateur pour toutes questions techniques :</p><p></p><h2 class="mb-2">'+(null==(__t=contact.company_name)?"":_.escape(__t))+"</h2> "+(null==(__t=contact.civility)?"":_.escape(__t))+" "+(null==(__t=contact.firstname)?"":_.escape(__t))+" "+(null==(__t=contact.lastname)?"":_.escape(__t))+'<br>Email : <a href="mailto:'+(null==(__t=contact.email)?"":_.escape(__t))+'">'+(null==(__t=contact.email)?"":_.escape(__t))+'</a><br>Tél : <a href="tel:'+(null==(__t=contact.phone)?"":_.escape(__t))+'">'+(null==(__t=contact.phone)?"":_.escape(__t))+'</a><p></p></div><footer class="post-footer"></footer></article></div></div></div></div> '),__p+="";return __p};
},{"undefined":undefined}],73:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="container"><div data-role="plan"></div><article data-role="advices"></article><article class="post-article"><header class="post-header"><h1>Accéder aux différents contenus</h1><p>La console d\'administration est répartie en différents services, correspondant aux principales fonctionnalités qui composent votre site. Ces services sont en permanence disponibles via la barre latérale principale, à l\'extrème gauche de l\'écran.</p></header><div class="post-content post-list no-hover module-list"> ',show_cms&&(__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-website rounded-circle"></span></div><div class="col item-body"><h4>Site web</h4>Kiubi, c\'est avant tout un CMS ultra complet. Il est ainsi très facile d\'ajouter des pages, de gérer des éléments de navigation et d\'ajouter tous types de contenus à votre site. <a href="https://aide.kiubi.com/site-web.html" target="_blank">En savoir plus sur le CMS</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/cms" data-tracking="Utiliser le Site web">Utiliser</a></div></div></div> '),__p+=" ",show_blog&&(__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-blog rounded-circle"></span></div><div class="col item-body"><h4>Blog</h4>Un blog est un puissant vecteur de communication, pour peu qu’il contienne une actualité régulière et un contenu cohérent par rapport à votre secteur d\'activité. <a href="https://aide.kiubi.com/blog.html" target="_blank">En savoir plus sur le blog</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/blog" data-tracking="Utiliser le Blog">Utiliser</a></div></div></div> '),__p+=" ",show_catalog&&(__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-product rounded-circle"></span></div><div class="col item-body"><h4>Catalogue</h4>Le catalogue permet de structurer et de personnaliser vos produits. Ses très nombreuses fonctionnalités et options s\'adaptent à toutes les activités. <a href="https://aide.kiubi.com/catalogue.html" target="_blank">En savoir plus la gestion du catalogue</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/catalog" data-tracking="Utiliser le Catalogue">Utiliser</a></div></div></div> '),__p+=" ",show_checkout&&(__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-order rounded-circle"></span></div><div class="col item-body"><h4>Commandes</h4>Tous les outils pour assurer la gestion et le suivi des commandes, la configuration des paiements, des transporteurs et de la logistique. <a href="https://aide.kiubi.com/commandes.html" target="_blank">En savoir plus sur la vente en ligne</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/checkout" data-tracking="Utiliser les Commandes">Utiliser</a></div></div></div> '),__p+=' <div class="collapse" id="showServices"> ',show_customers&&(__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-member rounded-circle"></span></div><div class="col item-body"><h4>Membres</h4>Un membre, ou client, s\'est ouvert un compte sur votre site pour y passer des commandes, poster des commentaires, accéder à des pages réservées. <a href="https://aide.kiubi.com/membres.html" target="_blank">En savoir plus sur les membres et les clients</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/customers" data-tracking="Utiliser les Membres">Utiliser</a></div></div></div> '),__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-extension rounded-circle"></span></div><div class="col item-body"><h4>App & Modules</h4>Optimiser votre site, fidéliser vos clients, améliorer votre référencement, booster votre productivité et accèder aux puissantes API de Kiubi. <a href="https://aide.kiubi.com/modules.html" target="_blank">En savoir plus sur les modules et le développement d\'app</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/modules" data-tracking="Utiliser les Modules">Utiliser</a></div></div></div> ',show_layout&&(__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-layout rounded-circle"></span></div><div class="col item-body"><h4>Mise en page</h4>Le système de mise en page peut à première vue paraitre déroutant. Il a cependant été conçu pour être très pratique d\'utilisation et extrèmement complet. <a href="https://aide.kiubi.com/mises-en-page.html" target="_blank">En savoir plus sur la mise en page</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/appearance" data-tracking="Utiliser les Mises en page">Utiliser</a></div></div></div> '),__p+=" ",show_theme&&(__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-theme rounded-circle"></span></div><div class="col item-body"><h4>Thème graphique</h4>Vous pouvez personnaliser à 100% votre site, grâce à un accès à tous les templates HTML, CSS et JS qui le composent. Pas de limite pour vos designs ! <a href="https://aide.kiubi.com/design-generalites.html" target="_blank">En savoir plus la création de thèmes</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/themes" data-tracking="Utiliser le Thème graphique">Utiliser</a></div></div></div> '),__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-media rounded-circle"></span></div><div class="col item-body"><h4>Médiathèque</h4>La Médiathèque permet de gérer les fichiers (images, documents textes, pdf, sons, vidéos...) que vous allez utiliser pour enrichir le contenu d\'un site. <a href="https://aide.kiubi.com/design-generalites.html#mediatheque" target="_blank">En savoir plus sur les médias</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/media" data-tracking="Utiliser la Médiathèque">Utiliser</a></div></div></div> ',show_pref&&(__p+=' <div class="list-item visible-btn"><div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module md-settings rounded-circle"></span></div><div class="col item-body"><h4>Préférences générales</h4>Ouvrez ou fermez votre site, modifiez vos coordonnées, votre logo, ajoutez votre nom de domaine, activez votre accès HTTPS, définissez les métas par défaut, etc. <a href="https://aide.kiubi.com/preferences.html" target="_blank">En savoir plus sur les préférences</a></div><div class="col-auto"><a class="btn btn-outline-primary" href="/prefs" data-tracking="Utiliser les Préférences">Utiliser</a></div></div></div> '),__p+=' </div><div class="list-item no-hover pb-2 text-center" data-toggle="collapse" data-target="#showServices" aria-expanded="false" aria-controls="showServices"><a href="#">Afficher tous les services<span class="md-icon md-down align-bottom ml-2"></span></a></div><footer class="post-footer"></footer></div></article> ',"porteur"===account_type?__p+=' <article class="post-article post-article-dark post-article-illus porteurs faiteduecommerce"><div class="post-content"><div class="row no-gutters"><div class="col col-content"><h1>#FaiteDuEcommerce</h1><p><span class="text-white">Votre site e-commerce disponible rapidement et gratuitement</span>,<br>entièrement paramétré, avec paiement en ligne et Click & Collect,<br>accompagné d\'une formation individuelle de 3 heures.</p><a class="btn btn-outline-light" href="https://www.kiubi.com/faitesduecommerce.html" data-tracking target="_blank">En savoir plus</a></div><div class="col-5"><img src="/assets/img/illus_prestataires.jpg" class="img-fluid"></div></div></div><footer class="post-footer"></footer></article><article class="post-article post-article-illus porteurs"><div class="post-content"><div class="row no-gutters"><div class="col col-content"><h1>Engagez le bon prestataire pour votre projet</h1><p>Vous voulez un site web, mais vous n\'avez pas les compétences ou le temps nécessaire ? Vous voulez vendre en ligne, pas vous prendre la tête ?<br>Confiez votre projet à un Expert Kiubi.</p><a class="btn btn-outline-primary" href="https://www.kiubi.com/agences-partenaires.html" data-tracking target="_blank">Contacter un expert</a></div><div class="col-5"><img src="/assets/img/illus_kps.jpg" class="img-fluid"></div></div></div><footer class="post-footer"></footer></article> ':"prestataire"===account_type&&(__p+=' <article class="post-article post-article-illus prestataires"><div class="post-content"><div class="row no-gutters"><div class="col col-content"><h1>Rejoignez les Experts Kiubi</h1><p>Faites découvrir Kiubi à vos clients et accompagnez-les dans le développement de leurs projets. Grâce à votre expertise de Kiubi, vous profiterez de nombreux avantages et de services exclusifs.</p><a class="btn btn-outline-primary" href="https://www.kiubi.com/devenir-partenaire.html" data-tracking target="_blank">Rejoindre les experts</a></div><div class="col-5"><img src="/assets/img/illus_experts.jpg" class="img-fluid"></div></div></div><footer class="post-footer"></footer></article><article class="post-article post-article-illus prestataires"><div class="post-content"><div class="row no-gutters"><div class="col col-content"><h1>Découvrez les Kiubi Professionnal Services</h1><p>Vos clients ont des attentes particulières ? Vous devez interfacer vos sites avec des services tiers ? Vos projets nécessitent un hébergement dédié ?<br>Les Kiubi Professional Services sont faits pour vous.</p><a class="btn btn-outline-primary" href="/modules/kps" data-tracking>En savoir plus sur les KPS</a></div><div class="col-5"><img src="/assets/img/illus_kps.jpg" class="img-fluid"></div></div></div><footer class="post-footer"></footer></article> '),__p+=' <article data-role="tips"></article></div>';return __p};
},{"undefined":undefined}],74:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Quelques conseils pour bien débuter</h1></header><div class="post-content"><div class="nav-full"><div class="row no-gutters"><div class="col"><div class="nav flex-column nav-pills"> ',has_cms&&(__p+=' <a class="nav-link '+(null==(__t="cms"==activeTab?"active":"")?"":_.escape(__t))+'" data-toggle="pill" href="#porteurs-tuto-page"><span class="md-icon md-icon-outlined md-add-page"></span>Créer une page</a> '),__p+=" ",has_catalog&&(__p+=' <a class="nav-link '+(null==(__t="catalog"==activeTab?"active":"")?"":_.escape(__t))+'" data-toggle="pill" href="#porteurs-tuto-product"><span class="md-icon md-icon-outlined md-product-item"></span>Ajouter un produit</a> '),__p+=" ",has_domains&&(__p+=' <a class="nav-link '+(null==(__t="domains"==activeTab?"active":"")?"":_.escape(__t))+'" data-toggle="pill" href="#porteurs-tuto-domaine"><span class="md-icon md-icon-outlined md-domaine"></span>Associer un nom de domaine</a> '),__p+=' <a class="nav-link '+(null==(__t="doc"==activeTab?"active":"")?"":_.escape(__t))+'" data-toggle="pill" href="#porteurs-tuto-help"><span class="md-icon md-icon-outlined md-help"></span>Consulter le centre d\'aide</a></div></div><div class="col-8"><div class="tab-content"> ',has_cms&&(__p+=' <div class="tab-pane '+(null==(__t="cms"==activeTab?"show active":"fade")?"":_.escape(__t))+'" id="porteurs-tuto-page"><a href="https://aide.kiubi.com/site-web.html#ajouter-une-page" target="_blank" class="md-icon md-help-outline" data-toggle="tooltip" data-placement="bottom" data-container="body" title="En savoir plus"></a><div class="row"><div class="col"><h2>Créer une première page de contenu</h2><p>Vous pouvez créer dans votre site web autant de pages que vous le désirez. Vous pouvez ainsi librement y ajouter et gérer votre contenu.</p></div><div class="col-auto"><img src="/assets/img/illus_page.png" class="img-fluid"></div></div><button data-tracking data-role="page" type="button" class="btn btn-lg btn-success">Créer une page</button></div> '),__p+=" ",has_catalog&&(__p+=' <div class="tab-pane '+(null==(__t="catalog"==activeTab?"show active":"fade")?"":_.escape(__t))+'" id="porteurs-tuto-product"><a href="https://aide.kiubi.com/catalogue.html#ajouter-un-produit" target="_blank" class="md-icon md-help-outline" data-toggle="tooltip" data-placement="bottom" data-container="body" title="En savoir plus"></a><div class="row"><div class="col"><h2>Remplir le catalogue avec vos produits</h2><p>Tout est prévu dans Kiubi pour gérer et valoriser vos produits. Mettez rapidement en vente votre premier produit, qu\'il soit physique ou virtuel.</p></div><div class="col-auto"><img src="/assets/img/illus_product.png" class="img-fluid"></div></div><button data-tracking data-role="product" type="button" class="btn btn-lg btn-success">Ajouter un produit</button></div> '),__p+=" ",has_domains&&(__p+=' <div class="tab-pane '+(null==(__t="domains"==activeTab?"show active":"fade")?"":_.escape(__t))+'" id="porteurs-tuto-domaine"><a href="https://aide.kiubi.com/preferences.html#noms-de-domaine" target="_blank" class="md-icon md-help-outline" data-toggle="tooltip" data-placement="bottom" data-container="body" title="En savoir plus"></a><div class="row"><div class="col"><h2>Personnaliser votre nom de domaine</h2><p>Si vous possédez un ou plusieurs noms de domaine, vous pouvez les associer à votre site web. Sinon, nous vous en fournissons un par défaut.</p></div><div class="col-auto"><img src="/assets/img/illus_domaine.png" class="img-fluid"></div></div><a href="/prefs/domains" data-tracking class="btn btn-lg btn-success">Associer un domaine</a></div> '),__p+=' <div class="tab-pane '+(null==(__t="doc"==activeTab?"show active":"fade")?"":_.escape(__t))+'" id="porteurs-tuto-help"><div class="row"><div class="col"><h2>Maîtriser Kiubi rapidement</h2><p>Une documentation, un guide pour le webdesign, un support technique, etc. Autant de ressources pour que vous soyez tout de suite efficace.</p></div><div class="col-auto"><img src="/assets/img/illus_help.png" class="img-fluid"></div></div><a href="/help" data-tracking class="btn btn-lg btn-success">Consulter le centre d\'aide</a></div></div></div></div></div></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],75:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Quelques conseils pour bien débuter</h1></header><div class="post-content"><div class="nav-full"><div class="row no-gutters"><div class="col"><div class="nav flex-column nav-pills"> ',has_theme&&(__p+=' <a class="nav-link '+(null==(__t="theme"==activeTab?"active":"")?"":_.escape(__t))+'" data-toggle="pill" href="#prestataires-tuto-theme"><span class="md-icon md-icon-outlined md-theme"></span>Personnaliser le thème</a> '),__p+=' <a class="nav-link" data-toggle="pill" href="#prestataires-tuto-api"><span class="md-icon md-icon-outlined md-extension"></span>Utiliser les API</a> <a class="nav-link" data-toggle="pill" href="#prestataires-tuto-support"><span class="md-icon md-icon-outlined md-support"></span>Accéder au support</a> <a class="nav-link '+(null==(__t="doc"==activeTab?"active":"")?"":_.escape(__t))+'" data-toggle="pill" href="#prestataires-tuto-help"><span class="md-icon md-icon-outlined md-help"></span>Consulter le centre d\'aide</a></div></div><div class="col-8"><div class="tab-content"> ',has_theme&&(__p+=' <div class="tab-pane '+(null==(__t="theme"==activeTab?"show active":"fade")?"":_.escape(__t))+'" id="prestataires-tuto-theme"><a href="https://aide.kiubi.com/design-generalites.html" target="_blank" class="md-icon md-help-outline" data-toggle="tooltip" data-placement="bottom" data-container="body" title="En savoir plus"></a><div class="row"><div class="col"><h2>Personnaliser ce que vous voulez</h2><p>Sur Kiubi, tous les composants des sites sont accessibles et modifiables, vous pouvez librement créer, modifier et paramétrer chaque templates, chaque widgets.</p></div><div class="col-auto"><img src="/assets/img/illus_theme.png" class="img-fluid"></div></div><a href="/themes" data-tracking class="btn btn-lg btn-success">Personnaliser le thème</a></div> '),__p+=' <div class="tab-pane fade" id="prestataires-tuto-api"><div class="row"><div class="col"><h2>De nouvelles applications</h2><p>Les API de Kiubi couvrent 100% du périmètre fonctionnel de la plateforme. Une ouverture indispensable pour le développement de services et d\'applications tiers.</p></div><div class="col-auto"><img src="/assets/img/illus_api.png" class="img-fluid"></div></div><a href="https://aide.kiubi.com/api-front-generalites.html" data-tracking target="_blank" class="btn btn-lg btn-success mr-3">API Front-Office</a> <a href="https://aide.kiubi.com/api-dev-generalites.html" data-tracking target="_blank" class="btn btn-lg btn-primary">API Developers</a></div><div class="tab-pane fade" id="prestataires-tuto-support"><div class="row"><div class="col"><h2>Profiter d\'un support dédié</h2><p>Vous avez une question sur l\'utilisation de Kiubi ? Ouvrez un ticket dans le support en ligne et notre équipe s\'efforcera d\'y répondre dans les meilleurs délais.</p></div><div class="col-auto"><img src="/assets/img/illus_support.png" class="img-fluid"></div></div><a href="#" data-tracking data-role="support" class="btn btn-lg btn-success">Accéder au support</a></div><div class="tab-pane '+(null==(__t="doc"==activeTab?"show active":"fade")?"":_.escape(__t))+'" id="prestataires-tuto-help"><div class="row"><div class="col"><h2>Maîtriser Kiubi rapidement</h2><p>Une documentation, un guide pour le webdesign, un support technique, etc. Autant de ressources pour que vous soyez tout de suite efficace.</p></div><div class="col-auto"><img src="/assets/img/illus_help.png" class="img-fluid"></div></div><a href="/help" data-tracking class="btn btn-lg btn-success">Consulter le centre d\'aide</a></div></div></div></div></div></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],76:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters w-100"><div class="col-12 col-lg-6 col-xl-4 d-flex flex-column login-box"><div class="login-logo"> ',cobranded&&(__p+='<img src="/assets/img/logo_kiubi.png" alt="Kiubi">\t'),__p+=' </div><article class="post-article"><header class="post-header"><h1>Connectez-vous à votre site</h1><p class="my-4">Vous n\'avez pas de compte ? <a href="'+(null==(__t=account)?"":_.escape(__t))+'/login/register.html">Inscrivez-vous</a></p></header><div class="post-content"><form><div class="alert alert-danger" role="alert" style="display:none"></div><div id="group_login" class="form-group has-feedback"><label for="login_input">Identifiant <span>ou</span> email</label><input class="form-control form-control-lg" id="login_input" value="'+(null==(__t=login)?"":_.escape(__t))+'" placeholder=""> <span class="md-feedback md-person"></span></div><div id="group_password" class="form-group has-feedback"><a href="'+(null==(__t=account)?"":_.escape(__t))+'/login/mdp.html" target="_blank" class="float-right">Oublié ?</a><label for="password_input">Mot de passe</label><input class="form-control form-control-lg" id="password_input" placeholder="" type="password"> <span class="md-feedback md-key"></span></div><div class="form-group"><input id="remember_input" value="1" checked="checked" type="checkbox"><label for="remember_input">Se souvenir de moi</label></div> ',__p+=code_site?' <button type="button" class="btn btn-lg btn-success btn-save text-truncate w-100" data-role="submit">Se connecter à '+(null==(__t=code_site)?"":_.escape(__t))+"</button> ":' <button type="button" class="btn btn-lg btn-success btn-save w-100" data-role="submit">Se connecter</button> ',__p+=' <input type="submit" style="display:none"><p><a href="https://aide.kiubi.com/generalites.html#console-d-administration" target="_blank">Besoin d\'aide</a> pour se connecter ?</p></form></div><footer class="post-footer"></footer></article><footer class="copyright"> ',code_site&&(__p+=' <p class="mb-1"><a href="#" data-role="clear" class="text-info">Vous ne voulez pas vous connecter à ce site ?</a></p> '),__p+=' <a href="https://www.kiubi.com/mentions-legales.html" target="_blank">Informations légales</a> | <a href="http://www.kiubi.com/theme/fr/CGV_Kiubi.pdf" target="_blank">Conditions générales d\'utilisation</a><br>Copyright © '+(null==(__t=year)?"":_.escape(__t))+' Kiubi. Tous droits réservés. 100% fabriqué et hébergé avec ♥ en France.</footer></div><div class="col-12 col-lg-6 col-xl-8 d-none d-lg-flex flex-column brand" style="'+(null==(__t=cobranding_background?"background-image:url("+cobranding_background+")":"")?"":_.escape(__t))+' "><div class="brand-logo '+(null==(__t=cobranded?"branded-logo":"")?"":_.escape(__t))+'"><img src="'+(null==(__t=cobranding_logo?cobranding_logo:"")?"":_.escape(__t))+'" alt="Kiubi"></div><div data-role="tips"></div><div class="overlay"></div></div></div>';return __p};
},{"undefined":undefined}],77:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<h2>Le savez-vous ?</h2><p>"+(null==(__t=tip.msg)?"":_.escape(__t))+"</p> ",link&&(__p+=' <a href="'+(null==(__t=link)?"":_.escape(__t))+'" target="_blank" class="btn btn-lg btn-outline-login text-white mt-2" data-tracking="Tips">Plus d\'infos</a> '),__p+="";return __p};
},{"undefined":undefined}],78:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="container"><article class="post-article post-acticle-empty"><header class="post-header"><h1>',__p+=message?""+(null==(__t=message)?"":_.escape(__t)):"La page que vous essayez de consulter n'existe plus",__p+='</h1></header><div class="post-content"><div class="post-content">Nous vous invitons à retourner sur <a href="/">le tableau de bord</a>.</div></div><footer class="post-footer"></footer></article></div><div class="container-fluid"></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],79:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="logo"><img src="/assets/img/logo_kiubi.png"></div><ul class="nav flex-column nav-main"> ',_(mainItems).each(function(a){__p+=' <li class="nav-item '+(null==(__t=a.is_active?"active":"")?"":__t)+'"> ',__p+=a.is_enabled?' <a href="'+(null==(__t=a.path)?"":_.escape(__t))+'" class="nav-link" data-toggle="tooltip" data-placement="right" data-original-title="'+(null==(__t=a.name)?"":_.escape(__t))+'"><span class="md-icon md-icon-menu '+(null==(__t=a.className)?"":_.escape(__t))+'"></span></a> ':' <span class="nav-link disabled" data-toggle="tooltip" data-placement="right" data-original-title="'+(null==(__t=a.name)?"":_.escape(__t))+' - Indisponible"><span class="md-icon md-icon-menu '+(null==(__t=a.className)?"":_.escape(__t))+'"></span></span> ',__p+=" </li> "}),__p+=' </ul><ul class="nav flex-column tools"> ',_(toolsItems).each(function(a){__p+=' <li class="nav-item '+(null==(__t=a.is_active?"active":"")?"":__t)+'"> ',__p+=a.is_enabled?' <a href="'+(null==(__t=a.path)?"":_.escape(__t))+'" '+(null==(__t=a.blank?'target="_blank"':"")?"":__t)+' class="nav-link" data-toggle="tooltip" data-placement="right" data-offset="0, 14px" data-original-title="'+(null==(__t=a.name)?"":_.escape(__t))+'"><span class="md-icon md-icon-menu '+(null==(__t=a.className)?"":_.escape(__t))+'"></span></a> ':' <span class="nav-link disabled" data-toggle="tooltip" data-placement="right" data-original-title="'+(null==(__t=a.name)?"":_.escape(__t))+' - Indisponible"><span class="md-icon md-icon-menu '+(null==(__t=a.className)?"":_.escape(__t))+'"></span></span> ',__p+=" </li> "}),__p+=' <li class="nav-item notifications dropup '+(null==(__t=showNotifications?"":"d-none")?"":_.escape(__t))+'"><a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span data-toggle="tooltip" data-placement="right" data-original-title="Notifications" class="md-icon md-icon-menu md-notifications"></span></a><div data-role="notifications"></div></li></ul><span class="btn-closed md-icon" data-placement="right" data-role="close"></span> ',isAuth&&(__p+=' <div class="user dropup"><button type="button" class="accountmenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><div data-toggle="tooltip" data-placement="right" data-original-title="'+(null==(__t=user.firstname)?"":_.escape(__t))+" "+(null==(__t=user.lastname)?"":_.escape(__t))+'"><div class="rounded-circle user-avatar" style="background-image: url(\'/assets/img/'+(null==(__t=userAvatar)?"":_.escape(__t))+'\')"><img src="'+(null==(__t=user.avatar)?"":_.escape(__t))+'&fallback=false"></div><span class="md-icon"></span></div></button><div class="dropdown-menu ml-2 mb-2"><div class="user-detail dropdown-item-text text-nowrap"><a href="#" data-role="me" title="Voir votre profil"><div class="rounded-circle user-avatar mr-3" style="background-image: url(\'/assets/img/'+(null==(__t=userAvatar)?"":_.escape(__t))+'\')"><img src="'+(null==(__t=user.avatar)?"":_.escape(__t))+'&fallback=false"></div><span><strong>'+(null==(__t=user.firstname)?"":_.escape(__t))+" "+(null==(__t=user.lastname)?"":_.escape(__t))+"</strong><br><small>Voir votre profil</small> </span> ",user.is_admin&&(__p+=' <span class="badge '+(null==(__t=accountBadge)?"":_.escape(__t))+' ml-auto">'+(null==(__t=accountLabel)?"":_.escape(__t))+"</span> "),__p+=' </a></div><div class="dropdown-divider"></div><div class="row no-gutters"><div class="col-5 d-none d-md-flex flex-column border-right"> ',has_scope_subscription?(__p+=' <div class="text-nowrap"><a class="dropdown-item" data-role="subscription" href="#" title="Gérer l\'abonnement pour ce site">Votre abonnement<br><small>'+(null==(__t=site.plan.plan_name)?"":_.escape(__t))+"</small><br> ",__p+=site.plan.is_free?" <small>Abonnement offert</small> ":site.plan.is_trial?" <small>Jusqu'au "+(null==(__t=endtrial_date)?"":_.escape(__t))+"</small> ":" <small>Jusqu'au "+(null==(__t=closing_date)?"":_.escape(__t))+"<br> "+(null==(__t=plural(site.plan.balance,"%d crédit restant","%d crédits restant"))?"":_.escape(__t))+" </small> ",__p+=" </a></div> "):(__p+=' <div class="dropdown-item-text text-nowrap">Votre abonnement<br><small>'+(null==(__t=site.plan.plan_name)?"":_.escape(__t))+"</small><br> ",__p+=site.plan.is_free?" <small>Abonnement offert</small> ":site.plan.is_trial?" <small>Jusqu'au "+(null==(__t=endtrial_date)?"":_.escape(__t))+"</small> ":" <small>Jusqu'au "+(null==(__t=closing_date)?"":_.escape(__t))+"<br> "+(null==(__t=plural(site.plan.balance,"%d crédit restant","%d crédits restant"))?"":_.escape(__t))+" </small> ",__p+=" </div> "),__p+=' <div class="dropdown-divider"></div> ',__p+=has_scope_subscription?' <div><a class="dropdown-item py-2" data-role="bill" href="#" title="Vos factures pour ce site">Vos factures</a></div> ':' <div><span class="dropdown-item-text disabled py-2" title="Accès interdit, contactez votre administrateur">Vos factures</span></div> ',__p+=" ",__p+=has_scope_users?' <div><a class="dropdown-item py-2" href="#" data-role="users" title="Vos utilisateurs pour ce site">Vos utilisateurs</a></div> ':' <div><span class="dropdown-item-text disabled py-2" title="Accès interdit, contactez votre administrateur">Vos utilisateurs</span></div> ',__p+=' <div class="dropdown-divider"></div> ',user.is_admin&&(__p+=' <div><a class="dropdown-item py-2" data-role="account" href="#" title="Votre compte">Votre compte</a></div> '),__p+=' <div><a class="dropdown-item py-2" href="/help" title="Centre d\'aide">Centre d\'aide</a></div><div class="dropdown-divider mt-auto"></div><div><a class="dropdown-item" href="#" data-role="logout" title="Se déconnecter">Se déconnecter</a></div></div><div class="col-12 col-md-7 quotas"><strong>Suivi de votre consommation</strong> ',__p+=has_scope_subscription?' <p class="mt-1 mb-3">Quand les quotas du site sont atteints, <a href="#" data-role="subscription" class="text-info"><strong>mettez à niveau votre abonnement</strong></a><br></p> ':" <p>Quand les quotas du site sont atteints, contactez votre administrateur<br></p> ",__p+=' <div data-role="usage"></div></div></div></div></div> '),__p+="";return __p};
},{"undefined":undefined}],80:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="quotas-label '+(null==(__t=prct_free<15?"text-danger":"")?"":__t)+'">Espace disque <span class="float-right quotas-detail">'+(null==(__t=formatBytes(space.used))?"":__t)+" / "+(null==(__t=formatBytes(space.total))?"":__t)+'</span></div><div class="progress '+(null==(__t=prct_free<15?"progress-bar-danger":"")?"":__t)+'"><div class="progress-bar progress-bar-storage-media" role="progressbar" aria-valuenow="'+(null==(__t=prct_medias)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=prct_medias)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Médias : '+(null==(__t=formatBytes(space.medias))?"":__t)+'"></div><div class="progress-bar progress-bar-storage-data" role="progressbar" aria-valuenow="'+(null==(__t=prct_datas)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=prct_datas)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Données : '+(null==(__t=formatBytes(space.datas))?"":__t)+'"></div><div class="progress-bar progress-bar-storage-ftp" role="progressbar" aria-valuenow="'+(null==(__t=prct_ftp)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=prct_ftp)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="FTP : '+(null==(__t=formatBytes(space.ftp))?"":__t)+'"></div><div class="progress-bar progress-bar-free" role="progressbar" aria-valuenow="'+(null==(__t=prct_free)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=prct_free)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Libre : '+(null==(__t=formatBytes(space.free))?"":__t)+'"></div></div> ',products&&products.total&&(__p+=' <div class="quotas-label '+(null==(__t=prct_products>85?"text-danger":"")?"":__t)+'">Produits <span class="float-right quotas-detail">'+(null==(__t=products.used)?"":_.escape(__t))+" / "+(null==(__t=products.total)?"":_.escape(__t))+'</span></div><div class="progress '+(null==(__t=prct_products>85?"progress-bar-danger":"")?"":__t)+'"><div class="progress-bar progress-bar-storage-media" role="progressbar" aria-valuenow="'+(null==(__t=prct_products)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=prct_products)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Utilisé : '+(null==(__t=products.used)?"":_.escape(__t))+'"></div><div class="progress-bar progress-bar-free" role="progressbar" aria-valuenow="'+(null==(__t=100-prct_products)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=100-prct_products)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Libre : '+(null==(__t=products.free)?"":_.escape(__t))+'"></div></div> '),__p+=" ",forms&&forms.total&&(__p+=' <div class="quotas-label '+(null==(__t=prct_forms>85?"text-danger":"")?"":__t)+'">Formulaires <span class="float-right quotas-detail">'+(null==(__t=forms.used)?"":_.escape(__t))+" / "+(null==(__t=forms.total)?"":_.escape(__t))+'</span></div><div class="progress '+(null==(__t=prct_forms>85?"progress-bar-danger":"")?"":__t)+'"><div class="progress-bar progress-bar-storage-media" role="progressbar" aria-valuenow="'+(null==(__t=prct_forms)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=prct_forms)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Utilisé : '+(null==(__t=forms.used)?"":_.escape(__t))+'"></div><div class="progress-bar progress-bar-free" role="progressbar" aria-valuenow="'+(null==(__t=100-prct_forms)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=100-prct_forms)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Libre : '+(null==(__t=forms.free)?"":_.escape(__t))+'"></div></div> '),__p+=" ",users&&users.total&&(__p+=' <div class="quotas-label '+(null==(__t=prct_users>85?"text-danger":"")?"":__t)+'">Utilisateurs <span class="float-right quotas-detail">'+(null==(__t=users.used)?"":_.escape(__t))+" / "+(null==(__t=users.total)?"":_.escape(__t))+'</span></div><div class="progress '+(null==(__t=prct_users>85?"progress-bar-danger":"")?"":__t)+'"><div class="progress-bar progress-bar-storage-media" role="progressbar" aria-valuenow="'+(null==(__t=prct_users)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=prct_users)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Utilisé : '+(null==(__t=users.used)?"":_.escape(__t))+'"></div><div class="progress-bar progress-bar-free" role="progressbar" aria-valuenow="'+(null==(__t=100-prct_users)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=100-prct_users)?"":_.escape(__t))+'%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Libre : '+(null==(__t=users.free)?"":_.escape(__t))+'"></div></div> '),__p+="";return __p};
},{"undefined":undefined}],81:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Activités en attente</h2><ul class="nav nav-sidebar flex-column"> ',show_checkout&&(__p+=' <li class="nav-item"><a class="nav-link" href="/checkout/orders?status=pending"><span class="badge">'+(null==(__t=pending_orders)?"":_.escape(__t))+"</span>Commandes à traiter</a></li> "),__p+=" ",show_catalog&&(__p+=' <li class="nav-item"><a class="nav-link" href="/catalog?stock=no"><span class="badge">'+(null==(__t=stock_shortage_count)?"":_.escape(__t))+"</span>Ruptures de stock</a></li> "),__p+=' <li class="nav-item"><a class="nav-link" href="/forms/inbox"><span class="badge">'+(null==(__t=unread_responses)?"":_.escape(__t))+"</span>Réponses non lues</a></li></ul>";return __p};
},{"undefined":undefined}],82:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="sidebar-header"><h1 title="Voir le site : '+(null==(__t=name)?"":_.escape(__t))+'"><a href="#" data-role="login"><span>'+(null==(__t=name)?"":_.escape(__t))+'</span><span class="md-icon md-launch"></span></a></h1><div class="dropdown toggle-site" data-role="site-dropdown"><a href="#" class="dropdown-toggle" id="toggle-site" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="'+(null==(__t=domain)?"":_.escape(__t))+'"><span class="btn-content">'+(null==(__t=fqdn)?"":_.escape(__t))+'</span></a><ul class="dropdown-menu" aria-labelledby="toggle-site" data-container="body" data-role="site-search"><li class="dropdown-item-text"><span class="form-group has-feedback"><input class="form-control search-site" placeholder="Rechercher un site"> <span class="md-feedback md-search"></span></span></li></ul></div><div class="overlay fade"></div><div data-role="term"></div></div><div class="sidebar-content"><div><div data-role="content"></div></div></div>';return __p};
},{"undefined":undefined}],83:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<label class="btn btn-primary text-nowrap">Choisir un fichier <input name="'+(null==(__t=name)?"":_.escape(__t))+'" type="file" style="display: none"></label><span data-role="filename" class="file-selected"></span>';return __p};
},{"undefined":undefined}],84:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="dropdown '+(null==(__t=extraDropdownClassname)?"":_.escape(__t))+'"><input class="form-control '+(null==(__t=extraInputClassname)?"":_.escape(__t))+'" name="'+(null==(__t=name)?"":_.escape(__t))+'" data-toggle="dropdown" value="'+(null==(__t=current)?"":_.escape(__t))+'" placeholder="'+(null==(__t=searchPlaceholder)?"":_.escape(__t))+'" autocomplete="off"> <span class="md-feedback md-search"></span><ul class="dropdown-menu '+(null==(__t=extraDropdownMenuClassname)?"":_.escape(__t))+'"></ul></div>';return __p};
},{"undefined":undefined}],85:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article '+(null==(__t=extraClassname)?"":_.escape(__t))+'"><header class="post-header"><h1>'+(null==(__t=title)?"":_.escape(__t))+' <span data-role="counter"></span><span data-role="quota" class="letter-counter"></span></h1><div class="row no-gutters"> ',selection&&selection.length&&(__p+=' <div class="col-auto checkbox-options"><input id="selection_all" name="selection_all" value="1" type="checkbox"><label for="selection_all"><span class="btn btn-secondary" data-role="select-all">Tout sélectionner</span></label><div class="btn-group m-0 d-none" role="group"><div class="dropdown"><button type="button" class="btn btn-secondary dropdown-toggle btn-bulk-action" data-role="bulk-action" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fake-selected">Plus d\'actions</span></button><ul class="dropdown-menu"> ',_(selection).each(function(a,e){__p+=' <li class="'+(null==(__t=a.className)?"":_.escape(__t))+'"><a class="dropdown-item" href="#" data-role="action" data-id="'+(null==(__t=e)?"":_.escape(__t))+'">'+(null==(__t=a.title)?"":_.escape(__t))+"</a></li> "}),__p+=" </ul></div></div></div> "),__p+=' <div class="col filters-options"><span data-role="filters"></span></div><div class="col-auto sort-options"><span data-role="xtra"></span></div></div></header><div data-role="list"></div><div data-role="detail"></div><div data-role="loading" class="text-center" style="display:none"><div class="loader spinner-border text-muted" role="status"><span class="sr-only">Chargement...</span></div></div><div data-role="new"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],86:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button type="button" title="'+(null==(__t=title)?"":_.escape(__t))+'" class="btn btn-secondary btn-icon md-icon '+(null==(__t=collection.length?"dropdown-toggle":"")?"":__t)+" "+(null==(__t=extraClassname)?"":_.escape(__t))+'" '+(null==(__t=collection.length?'data-toggle="dropdown"':"")?"":__t)+' aria-haspopup="true" aria-expanded="false"></button> ',collection.length&&(__p+=' <ul class="dropdown-menu dropdown-menu-right dropdown-control"> ',_(collection).each(function(t){__p+=" ","---"==t.label?__p+=' <li class="dropdown-divider"></li> ':(__p+=' <li class="'+(null==(__t=t.selected?"active":"")?"":__t)+'"><a class="dropdown-item" data-value="'+(null==(__t=t.value)?"":_.escape(__t))+'" ',__p+=t.value.match(/^http/)?' href="'+(null==(__t=t.value)?"":__t)+'" target="_blank" ':' href="#" ',__p+=" >",t.extraClassname&&(__p+='<span class="md-icon '+(null==(__t=t.extraClassname)?"":_.escape(__t))+' float-right"></span>'),__p+=""+(null==(__t=t.label)?"":_.escape(__t))+"</a></li> "),__p+=" "}),__p+=" </ul> "),__p+="";return __p};
},{"undefined":undefined}],87:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="fake-select dropdown"><button type="button" class="btn btn-secondary dropdown-toggle '+(null==(__t=canDelete?"reset-toogle":"")?"":_.escape(__t))+" "+(null==(__t=extraClassname)?"":_.escape(__t))+'" data-toggle="dropdown"><span data-role="label" class="fake-selected">'+(null==(__t=title)?"":_.escape(__t))+"</span></button> ",canDelete&&(__p+='<span data-role="feedback" class="md-icon float-right md-cancel"></span>'),__p+=' <ul class="dropdown-menu dropdown-control"> ',collection&&_(collection).each(function(e,t){__p+=' <li><a class="dropdown-item" data-index="'+(null==(__t=t)?"":_.escape(__t))+'" href="#">'+(null==(__t=e.label)?"":_.escape(__t))+"</a></li> "}),__p+=" </ul></div>";return __p};
},{"undefined":undefined}],88:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",__p+=prependText?' <div class="input-group"><div class="input-group-prepend"><span class="input-group-text">'+(null==(__t=prependText)?"":_.escape(__t))+'</span></div><input class="form-control" name="term" value="'+(null==(__t=value)?"":_.escape(__t))+'" placeholder="'+(null==(__t=title)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text"><span data-role="feedback" class="md-icon float-right '+(null==(__t=extraClassname)?"":_.escape(__t))+'"></span></span></div></div> ':' <input class="form-control" name="term" value="'+(null==(__t=value)?"":_.escape(__t))+'" placeholder="'+(null==(__t=title)?"":_.escape(__t))+'"> <span data-role="feedback" class="md-feedback '+(null==(__t=extraClassname)?"":_.escape(__t))+'"></span> ',__p+="";return __p};
},{"undefined":undefined}],89:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="input-group"><div class="input-group-prepend"><span class="input-group-text">'+(null==(__t=prependText[0])?"":_.escape(__t))+'</span></div><input class="form-control" name="min" value="'+(null==(__t=value?value[0]:"")?"":_.escape(__t))+'" placeholder="'+(null==(__t=title)?"":_.escape(__t))+'"><div class="input-group-prepend"><span class="input-group-text" style="border-left: none">'+(null==(__t=prependText[1])?"":_.escape(__t))+'</span></div><input class="form-control" name="max" value="'+(null==(__t=value?value[1]:"")?"":_.escape(__t))+'" placeholder="'+(null==(__t=title)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text"><span data-role="feedback" class="md-icon float-right '+(null==(__t=extraClassname)?"":_.escape(__t))+'"></span></span></div></div>';return __p};
},{"undefined":undefined}],90:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button class="btn btn-secondary dropdown-toggle '+(null==(__t=current.valuen||canDelete?"reset-toogle":"")?"":__t)+'" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><span data-role="label" class="fake-selected">'+(null==(__t=current.label)?"":_.escape(__t))+'</span></button> <span data-role="feedback" class="md-icon '+(null==(__t=current.value||canDelete?"md-cancel":"")?"":__t)+' float-right"></span><ul class="dropdown-menu dropdown-control dropdown-control-lg"><li class="dropdown-item-text"><span class="form-group has-feedback"><input data-role="input" class="form-control" value="'+(null==(__t=term)?"":_.escape(__t))+'" placeholder="'+(null==(__t=searchPlaceholder)?"":_.escape(__t))+'"> <span class="md-feedback md-search"></span></span></li></ul>';return __p};
},{"undefined":undefined}],91:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<select class="'+(null==(__t=extraClassname?extraClassname:"")?"":_.escape(__t))+'" data-style="selectify"><option value="">'+(null==(__t=title)?"":_.escape(__t))+"</option> ",collection&&(__p+=" ",_(collection).each(function(e){__p+=' <option value="'+(null==(__t=e.value)?"":_.escape(__t))+'" '+(null==(__t=e.selected?'selected="selected"':"")?"":__t)+">"+(null==(__t=indent2Space(e.indent||0))?"":__t)+(null==(__t=e.label)?"":_.escape(__t))+"</option> "}),__p+=" "),__p+=" </select>";return __p};
},{"undefined":undefined}],92:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="loader spinner-border text-dark" role="status"><span class="sr-only">Chargement...</span></div>';return __p};
},{"undefined":undefined}],93:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal fade '+(null==(__t=modalClass)?"":_.escape(__t))+'" tabindex="-1" role="dialog"><div class="modal-dialog '+(null==(__t=modalDialogClass)?"":_.escape(__t))+'" role="document"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">'+(null==(__t=title)?"":_.escape(__t))+'</h4><button type="button" class="close md-icon md-close" data-role="close"></button></div> ',tabs&&(__p+=' <ul class="nav nav-tab"> ',_.each(tabs,function(t,l){__p+=' <li class="nav-item"><a class="nav-link '+(null==(__t=0==l?"active":"")?"":_.escape(__t))+'" data-toggle="tab" href="#'+(null==(__t=t.id)?"":_.escape(__t))+'" aria-selected="true"><span class="md-icon '+(null==(__t=t.icon)?"":_.escape(__t))+' mr-2" title="'+(null==(__t=t.title)?"":_.escape(__t))+'"></span>'+(null==(__t=t.title)?"":_.escape(__t))+" </a></li> "}),__p+=" </ul> "),__p+=' <div class="modal-body '+(null==(__t=modalBodyClass)?"":_.escape(__t))+'"></div> ',action&&(__p+=' <div class="modal-footer"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="close">Fermer</button> <button type="button" class="btn btn-lg btn-success btn-action" data-role="action">'+(null==(__t=action.title)?"":_.escape(__t))+"</button></div> "),__p+=" </div></div></div>";return __p};
},{"undefined":undefined}],94:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="toast fade hide mt-2 toast-'+(null==(__t=code)?"":_.escape(__t))+'" role="alert" aria-live="assertive" aria-atomic="true" data-delay="'+(null==(__t=delay)?"":_.escape(__t))+'"><div class="toast-body d-flex align-items-center"> ',icon&&(__p+='<span class="md-icon '+(null==(__t=icon)?"":_.escape(__t))+' mr-3"></span>'),__p+=' <a href="'+(null==(__t=url)?"":_.escape(__t))+'" class="mr-auto" title="'+(null==(__t=label)?"":_.escape(__t))+'">'+(null==(__t=title)?"":_.escape(__t))+'</a><button type="button" class="close md-icon md-close" data-dismiss="toast" aria-label="Close"></button></div></div>';return __p};
},{"undefined":undefined}],95:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button class="btn btn-secondary dropdown-toggle '+(null==(__t=!isMandatory&&current.value?"reset-toogle":"")?"":__t)+'" type="button" id="dropdownMenu'+(null==(__t=id)?"":_.escape(__t))+'" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><span data-role="label" class="fake-selected">'+(null==(__t=current.label)?"":_.escape(__t))+'</span></button> <span data-role="clear" class="md-icon '+(null==(__t=!isMandatory&&current.value?"md-cancel":"")?"":__t)+' float-right"></span><ul class="dropdown-menu dropdown-control" aria-labelledby="dropdownMenu'+(null==(__t=id)?"":_.escape(__t))+'"><li class="dropdown-item-text"><span class="form-group has-feedback"><input data-role="input" class="form-control" value="'+(null==(__t=term)?"":_.escape(__t))+'" placeholder="'+(null==(__t=searchPlaceholder)?"":_.escape(__t))+'"> <span class="md-feedback md-search"></span></span></li></ul>';return __p};
},{"undefined":undefined}],96:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Référencement</h1></header><div class="post-content"><div data-role="preview"></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label for="meta_title">Titre de la page</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="'+(null==(__t=defaults_meta_title)?"":_.escape(__t))+'"></div> ',0!=slug_edit&&(__p+=' <div class="form-group"><label class="required" for="slug">Adresse de la page</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">'+(null==(__t=slug_prefix)?"":_.escape(__t))+'</span></div><input class="form-control" id="slug" name="slug" value="'+(null==(__t=slug)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=slug_suffix)?"":_.escape(__t))+"</span></div></div></div> "),__p+=' <div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label for="meta_description">Description de la page</label><textarea class="form-control" id="meta_description" name="meta_description" rows="5" placeholder="'+(null==(__t=defaults_meta_description)?"":_.escape(__t))+'">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="collapse" id="seo"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label for="meta_keywords">Mots clés de la page</label><textarea class="form-control" id="meta_keywords" name="meta_keywords" rows="5" placeholder="'+(null==(__t=defaults_meta_keywords)?"":_.escape(__t))+'">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label for="js_head">Code avant <code>&lt;/head&gt;</code></label><textarea class="form-control" id="js_head" name="js_head" rows="5" placeholder="'+(null==(__t=defaults_js_head)?"":_.escape(__t))+'">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label for="js_body">Code avant <code>&lt;/body&gt;</code></label><textarea class="form-control" id="js_body" name="js_body" rows="5" placeholder="'+(null==(__t=defaults_js_body)?"":_.escape(__t))+'">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div><a href="#seo" class="collapsed" data-toggle="collapse" aria-expanded="false" aria-controls="seo">Afficher <span class="more">plus</span> <span class="less">moins</span> d\'options</a></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],97:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="dropdown"><input data-role="input" class="form-control" ',inputName&&(__p+=' name="'+(null==(__t=inputName)?"":_.escape(__t))+'" '),__p+=' data-toggle="dropdown" placeholder="'+(null==(__t=searchPlaceholder)?"":_.escape(__t))+'"> <span class="md-feedback md-search"></span><ul class="dropdown-menu dropdown-control"></ul></div><span data-role="list"></span>';return __p};
},{"undefined":undefined}],98:[function(require,module,exports){
function fieldsNeeded(e){var s=["visits"];return e.findWhere({type:"orders"})&&s.push("orders"),e.findWhere({type:"funnel"})&&s.push("funnel"),e.findWhere({type:"search"})&&s.push("search"),e.findWhere({type:"products"})&&s.push("products"),e.findWhere({type:"map"})&&s.push("origins"),e.findWhere({type:"sources"})&&s.push("referer"),s}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),TooltipBehavior=require(29),Session,Dashboard=require(40),GraphView=require(102),OrdersView=require(104),FormsView=require(100),FunnelView=require(101),SourcesView=require(108),ProductsView=require(106),SearchView=require(107),MapView=require(103),ActivitiesView=require(99),TipsView=require(111),PlanView=require(105),EmptyWidgetView=Marionette.View.extend({template:_.template("")}),WidgetGridView=Marionette.CollectionView.extend({className:"row",childView:function(e){switch(e.get("type")){case"orders":return OrdersView;case"forms":return FormsView;case"funnel":return FunnelView;case"sources":return SourcesView;case"products":return ProductsView;case"search":return SearchView;case"map":return MapView;case"activities":return ActivitiesView}return EmptyWidgetView}}),MessagesView=Marionette.View.extend({template:_.template('<div><% _.each(messages, function(message){ %><div class="alert alert-warning d-flex justify-content-between align-items-center p-3" role="alert"><span><%= message %></span></div><% }) %></div>'),initialize:function(e){this.mergeOptions(e,["messages"])},templateContext:function(){return{messages:this.messages}}});module.exports=Marionette.View.extend({template:require(53),behaviors:[TooltipBehavior],regions:{plan:{el:"div[data-role='plan']",replaceElement:!0},messages:{el:"div[data-role='messages']",replaceElement:!0},graph:{el:"article[data-role='graph']",replaceElement:!0},widgets:{el:"div[data-role='widgets']",replaceElement:!0},tips:{el:"article[data-role='tips']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["stats","report","live"]),Session=Backbone.Radio.channel("app").request("ctx:session"),this.dashboardPrefs=new Dashboard,this.live.fetch()},onRender:function(){Session.hasScope("site:subscription")&&this.showChildView("plan",new PlanView({session:Session})),this.stats.clear().set(this.stats.defaults),this.stats.fetch(),this.dashboardPrefs.fetch().done(function(){var e=new Backbone.Collection;e.model=Backbone.Model.extend({idAttribute:"type",defaults:{type:"",order:0,size:5}});var s=0,i=_.map(this.dashboardPrefs.get("widgets"),function(e){return{type:e,order:s++,size:s%2==0?7:5}});e.add(i);var r=new GraphView({report:this.report,stat:"visitors",live:this.live,stats:this.stats,extra_fields:fieldsNeeded(e)});if(this.showChildView("graph",r),r.fetch(),this.showChildView("widgets",new WidgetGridView({collection:e,childViewOptions:{report:this.report}})),this.dashboardPrefs.get("messages")&&this.dashboardPrefs.get("messages").length>0){var t=new MessagesView({messages:this.dashboardPrefs.get("messages")});this.showChildView("messages",t)}this.showChildView("tips",new TipsView({}))}.bind(this)).fail(function(){console.log("Dashboard - FAILED")}.bind(this))}});
},{"100":100,"101":101,"102":102,"103":103,"104":104,"105":105,"106":106,"107":107,"108":108,"111":111,"29":29,"40":40,"53":53,"99":99,"undefined":undefined}],99:[function(require,module,exports){
function fetchPage(e,t){e.fetch({url:t})}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),moment=require("moment"),Activities=require(35),RowView=Marionette.View.extend({template:require(55),className:"list-item border-0",templateContext:function(){var e=this.model.get("type");return"comment"==e&&(e=this.model.get("urn").match(/^\/blog\//)?"comment":"evaluation"),{creation_date_fromnow:moment(this.model.get("creation_date"),"YYYY-MM-DD HH:mm:ss").fromNow(),url:this.model.mapUrnToUrl(),type:e}}}),NoChildrenView=Marionette.View.extend({template:_.template('<span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Il n\'y a encore rien à afficher</span>')}),ListView=Marionette.CollectionView.extend({className:"post-content post-list no-hover ",childView:RowView,emptyView:NoChildrenView,initialize:function(e){this.renderInterval=setInterval(this.render.bind(this),3e4)},onBeforeDestroy:function(){this.renderInterval&&clearInterval(this.renderInterval)}});module.exports=Marionette.View.extend({template:require(54),attributes:function(){return{"class":"col-12 col-lg-"+this.model.get("size")+" order-lg-"+this.model.get("order")+" d-flex"}},regions:{list:{el:"div[data-role='list']",replaceElement:!0}},ui:{next:'[data-role="next"]',previous:'[data-role="previous"]'},events:{"click @ui.next":function(){this.collection.meta.link.next_page&&fetchPage(this.collection,this.collection.meta.link.next_page)},"click @ui.previous":function(){this.collection.meta.link.previous_page&&fetchPage(this.collection,this.collection.meta.link.previous_page)}},initialize:function(e){this.mergeOptions(e,[]),this.collection=new Activities,this.listenTo(this.collection,"sync",this.onFetch);var t=Backbone.Radio.channel("app").request("ctx:notificationCenter");t&&this.listenTo(t,"notification:comment notification:response notification:order notification:evaluation",function(){this.start()}),this.start()},onRender:function(){this.showChildView("list",new ListView({collection:this.collection}))},start:function(){this.collection.fetch({reset:!0,data:{limit:7}})},onFetch:function(){var e=!1,t=!1;this.collection.meta&&this.collection.meta.link&&(e=0!=this.collection.meta.link.next_page,t=0!=this.collection.meta.link.previous_page),e?this.getUI("next").removeClass("disabled"):this.getUI("next").addClass("disabled"),t?this.getUI("previous").removeClass("disabled"):this.getUI("previous").addClass("disabled")}});
},{"35":35,"54":54,"55":55,"607":607,"undefined":undefined}],100:[function(require,module,exports){
var Marionette=require("backbone.marionette"),Backbone=require("backbone"),_=require("underscore"),format=require(607),moment=require("moment"),Responses=require(419),RowView=Marionette.View.extend({template:require(57),className:"list-item answers-item",templateContext:function(){var e,t=moment(this.model.get("creation_date"),"YYYY-MM-DD HH:mm:ss"),i=moment().diff(t,"days");return e=i>=7?format.formatLongDateTime(this.model.get("creation_date")):t.fromNow(),{creation_date_fromnow:e,summary:this.model.getSummary()}}}),NoChildrenView=Marionette.View.extend({template:_.template('<span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Il n\'y a encore rien à afficher</span>')}),ListView=Marionette.CollectionView.extend({className:"post-content post-list",childView:RowView,emptyView:NoChildrenView,initialize:function(e){this.renderInterval=setInterval(this.render.bind(this),3e4)},onBeforeDestroy:function(){this.renderInterval&&clearInterval(this.renderInterval)}});module.exports=Marionette.View.extend({template:require(56),attributes:function(){return{"class":"col-12 col-lg-"+this.model.get("size")+" order-lg-"+this.model.get("order")+" d-flex"}},regions:{list:{el:"div[data-role='list']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,[]),this.collection=new Responses;var t=Backbone.Radio.channel("app").request("ctx:notificationCenter");t&&this.listenTo(t,"notification:response",function(){this.start()}),this.start()},onRender:function(){this.showChildView("list",new ListView({collection:this.collection}))},start:function(e){this.collection.fetch({reset:!0,data:{limit:5,extra_fields:"forms"}})}});
},{"419":419,"56":56,"57":57,"607":607,"undefined":undefined}],101:[function(require,module,exports){
var Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),TooltipBehavior=require(29);module.exports=Marionette.View.extend({template:require(58),attributes:function(){return{"class":"col-12 col-lg-"+this.model.get("size")+" order-lg-"+this.model.get("order")+" d-flex"}},behaviors:[TooltipBehavior],initialize:function(t){this.mergeOptions(t,["report"]),this.listenTo(this.report,"report",this.render)},templateContext:function(){var t=0,e=null,r=!1;return this.report.get("summary")&&this.report.get("summary").funnel&&(t=this.report.get("summary").visits.count,e=this.report.get("summary").funnel,r=null!=this.report.get("summary").visits&&null!=e.cart),{hasData:r,funnel:e,conversion:{cart:e&&t>0?format.formatFloat(e.cart/t*100)+"%":"-",checkout:e&&t>0?format.formatFloat(e.checkout/t*100)+"%":"-",pending:e&&t>0?format.formatFloat(e.pending/t*100)+"%":"-",cart_trends:e?100*e.conversion_cart_trends:"-",checkout_trends:e?100*e.conversion_checkout_trends:"-",pending_trends:e?100*e.conversion_pending_trends:"-",step_checkout:e&&e.cart>0?e.checkout/e.cart*100+"%":"-",step_pending:e&&e.cart>0?e.pending/e.cart*100+"%":"-"},plural:format.plural,formatNumber:function(t,e){return format.formatFloat(t,e," ")}}}});
},{"29":29,"58":58,"607":607,"undefined":undefined}],102:[function(require,module,exports){
function skinDataset(t,e,a,s,r){var i={type:"line",borderColor:"",backgroundColor:"rgba(255,255,255,0.1)",pointBorderWidth:0,borderWidth:1,pointBackgroundColor:"#0a477b",pointRadius:3,hoverRadius:5,pointBorderColor:"#fff",pointHoverBorderColor:"#fff",pointHoverBackgroundColor:"#fff",label:e,data:t,formatAsFloat:s,tooltipsTitles:r};return a?i.borderColor="#fff":(i.borderColor="#fed558",i.pointBorderColor="#fed558",i.pointHoverBorderColor="#fed558",i.pointHoverBackgroundColor="#fed558",i.backgroundColor="rgba(253,169,81,0.1)"),i}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Chart=require("chart.js"),format=require(607),moment=require("moment"),TooltipBehavior=require(29),SelectifyBehavior=require(26),Datepicker=require(21),Session,SummaryView=Marionette.View.extend({template:require(60),className:"dashboard-stats",tagName:"div",behaviors:[TooltipBehavior],ui:{selectSales:'[data-role="select-sales"]',selectVisitors:'[data-role="select-visitors"]',selectPageviews:'[data-role="select-pageviews"]',selectOrders:'[data-role="select-orders"]',selectCart:'[data-role="select-cart"]'},events:{"click @ui.selectSales":"onSalesSelect","click @ui.selectVisitors":"onVisitorsSelect","click @ui.selectPageviews":"onPageviewsSelect","click @ui.selectOrders":"onOrdersSelect","click @ui.selectCart":"onCartSelect"},current:"visitors",reportData:null,initialize:function(t){this.mergeOptions(t,["model","current","live","report"]),this.reportData={visitors:"-",pageviews:"-",orders:"-",sales:"-",cart:"-",live:""},this.listenTo(this.model,"sync",this.render),this.listenTo(this.live,"sync",function(){this.reportData.live=this.live.get("visitors"),this.render()}.bind(this)),this.listenTo(this.report,"report",function(t){this.reportData.visitors=null!==t.summary.visits.count?t.summary.visits.count:"-",this.reportData.pageviews=null!==t.summary.visits.pageviews?t.summary.visits.pageviews:"-",this.reportData.orders=t.summary.orders&&null!==t.summary.orders.count?t.summary.orders.count:"-",this.reportData.sales=t.summary.orders&&null!==t.summary.orders.total?t.summary.orders.total:"-",this.reportData.cart=t.summary.orders&&null!==t.summary.orders.cart?t.summary.orders.cart:"-",this.reportData.currency=t.summary.orders&&null!==t.summary.orders.currency?t.summary.orders.currency:"",this.render()}.bind(this)),this.interval=null},templateContext:function(){return{current:this.current,live:this.reportData.live,visitors:"-"!==this.reportData.visitors?format.formatFloat(this.reportData.visitors,0," "):"-",pageviews:"-"!==this.reportData.pageviews?format.formatFloat(this.reportData.pageviews,0," "):"-",sales:"-"!==this.reportData.orders?format.formatFloat(this.reportData.sales,2," ")+format.currencyEntity(this.reportData.currency):"-",orders:"-"!==this.reportData.orders?format.formatFloat(this.reportData.orders,0," "):"-",cart_mean:this.reportData.orders>0?format.formatFloat(this.reportData.sales/this.reportData.orders,2," ")+format.currencyEntity(this.reportData.currency):"-"}},onAttach:function(){this.live.fetch(),this.interval=setInterval(function(){this.live.fetch()}.bind(this),3e4)},onDestroy:function(){clearInterval(this.interval)},onSalesSelect:function(){this.current="sales",this.trigger("select:stat",this.current),this.getUI("selectSales").addClass("active"),this.getUI("selectVisitors").removeClass("active"),this.getUI("selectPageviews").removeClass("active"),this.getUI("selectOrders").removeClass("active"),this.getUI("selectCart").removeClass("active")},onVisitorsSelect:function(){this.current="visitors",this.trigger("select:stat",this.current),this.getUI("selectSales").removeClass("active"),this.getUI("selectVisitors").addClass("active"),this.getUI("selectPageviews").removeClass("active"),this.getUI("selectOrders").removeClass("active"),this.getUI("selectCart").removeClass("active")},onPageviewsSelect:function(){this.current="pageviews",this.trigger("select:stat",this.current),this.getUI("selectSales").removeClass("active"),this.getUI("selectVisitors").removeClass("active"),this.getUI("selectPageviews").addClass("active"),this.getUI("selectOrders").removeClass("active"),this.getUI("selectCart").removeClass("active")},onOrdersSelect:function(){this.current="orders",this.trigger("select:stat",this.current),this.getUI("selectSales").removeClass("active"),this.getUI("selectVisitors").removeClass("active"),this.getUI("selectPageviews").removeClass("active"),this.getUI("selectOrders").addClass("active"),this.getUI("selectCart").removeClass("active")},onCartSelect:function(){this.current="cart",this.trigger("select:stat",this.current),this.getUI("selectSales").removeClass("active"),this.getUI("selectVisitors").removeClass("active"),this.getUI("selectPageviews").removeClass("active"),this.getUI("selectOrders").removeClass("active"),this.getUI("selectCart").addClass("active")}}),ChartView=Marionette.View.extend({template:_.template('<iframe class="chartjs-hidden-iframe" style="display: block; overflow: hidden; border: 0px none; margin: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px; height: 100%; width: 100%; position: absolute; pointer-events: none; z-index: -1;" tabindex="-1"></iframe><canvas data-role="chart" style="display: block; width: 100%; height: 280px;"></canvas>'),tagName:"p",ui:{chart:'canvas[data-role="chart"]'},chart:null,onAttach:function(){Chart.defaults.global.defaultFontColor="rgba(255, 255, 255, 0.5)",Chart.defaults.global.defaultFontFamily="'Open Sans', sans-serif",Chart.defaults.global.tooltips.backgroundColor="#000",Chart.defaults.global.tooltips.displayColors=!1,Chart.defaults.global.tooltips.intersect=!1,Chart.defaults.global.tooltips.titleFontFamily="'Open Sans', sans-serif",Chart.defaults.global.tooltips.bodyFontFamily="'Open Sans', sans-serif",Chart.defaults.global.tooltips.cornerRadius=4,this.chart=new Chart(this.getUI("chart"),{options:{maintainAspectRatio:!1,animation:{duration:0},elements:{line:{borderWidth:"2"},point:{radius:"5",borderWidth:"2",hitRadius:"2",hoverRadius:"7"}},legend:{display:!1},layout:{padding:{top:10,right:10,left:5}},scales:{xAxes:[{offset:!1,position:"bottom",gridLines:{color:"rgba(255, 255, 255, 0.1)",zeroLineColor:"rgba(255, 255, 255, 0.2)"}}],yAxes:[{ticks:{suggestedMax:5,maxTicksLimit:5,min:0},type:"linear",position:"left",gridLines:{color:"rgba(255, 255, 255, 0.1)",zeroLineColor:"rgba(255, 255, 255, 0.2)"}}]},tooltips:{callbacks:{title:function(t,e){return 1==t[0].datasetIndex&&t[0].index<e.datasets[1].tooltipsTitles.length?e.datasets[1].tooltipsTitles[t[0].index]:t[0].xLabel},label:function(t,e){var a=e.datasets[0].formatAsFloat;return e.datasets[0].label+" : "+format.formatFloat(t.value,a?2:0," ")}}}}})},updateChart:function(t,e){this.chart.data={labels:t,datasets:e},this.chart.options.scales.xAxes[0].offset=1==e[0].data.length,this.chart.update()},onBeforeDetach:function(){this.chart.destroy()}});module.exports=Marionette.View.extend({template:require(59),className:"post-article dashboard-graph",tagName:"article",regions:{summary:{el:"[data-role='summary']",replaceElement:!0},chart:{el:"[data-role='chart']",replaceElement:!0}},ui:{endDate:"input[name='end_date']",startDate:"input[name='start_date']",compareDate:"input[name='compare_date']",compareShort:"button[data-role='compare']"},events:{'click a[data-role="stats"]':function(){window.open(Session.autologBackLink("/awstats/"))},"click @ui.compareShort":function(t){switch(Backbone.$(t.currentTarget).data("delta")){case"days":this.startDate=this.endDate.clone();break;case"weeks":this.startDate=this.endDate.clone().add(-6,"days");break;case"months":this.startDate=this.endDate.clone().add(-30,"days")}this.getUI("startDate").val(this.startDate.format("DD/MM/YYYY"));var e=this.startDate.clone().add(-1,Backbone.$(t.currentTarget).data("delta"));this.getUI("compareDate").val(e.format("DD/MM/YYYY")),this.onFieldChange({name:"compare_date",date:e})}},behaviors:[SelectifyBehavior,Datepicker,TooltipBehavior],stat:null,startDate:null,endDate:null,compareDate:null,datas:null,extra_fields:null,initialize:function(t){this.mergeOptions(t,["report","stat","live","stats","extra_fields"]),Session=Backbone.Radio.channel("app").request("ctx:session"),this.startDate=moment().add(-31,"days"),this.endDate=moment().add(-1,"days"),this.compareDate=null,this.datas=null},templateContext:function(){Backbone.Radio.channel("app").request("ctx:session");return{startDate:this.startDate.format("DD/MM/YYYY"),endDate:this.endDate.format("DD/MM/YYYY")}},onRender:function(){this.showChildView("summary",new SummaryView({model:this.stats,current:this.stat,report:this.report,live:this.live})),this.showChildView("chart",new ChartView({report:this.report}))},onLoadDatepicker:function(t){t.each(function(t,e){var a=Backbone.$(e);a.data("DateTimePicker").showTodayButton(!1).minDate(moment("2019-09-06")),"start_date"==e.name?a.data("DateTimePicker").maxDate(moment().add(-1,"days")):"end_date"==e.name?a.data("DateTimePicker").maxDate(moment().add(-1,"days")):"compare_date"==e.name&&a.data("DateTimePicker").useCurrent(!1).maxDate(moment().add(-1,"days"))})},onChildviewSelectStat:function(t){t!=this.stat&&(this.stat=t,this.onDataUpdate())},fetch:function(){var t,e={extra_fields:this.extra_fields};if(this.compareDate){if(this.startDate&&this.compareDate){var a=this.endDate?this.endDate.diff(this.startDate,"days"):30;t=this.report.compare(this.startDate,this.compareDate,a,e).done(function(t){this.report.trigger("report",t),this.datas=t.days,this.onDataUpdate()}.bind(this))}}else this.startDate&&(e.start_date=this.startDate.format("DD/MM/YYYY")),this.endDate&&(e.end_date=this.endDate.format("DD/MM/YYYY")),e.extra_fields+=",trends",t=this.report.fetch({data:e,reset:!0}).done(function(){this.report.trigger("report",this.report.toJSON()),this.datas=[this.report.get("days")],this.onDataUpdate()}.bind(this));return t.fail(function(t,e){if(404!=e.status_code){var a=Backbone.Radio.channel("app").request("ctx:navigationController");a.showErrorModal(t)}}),t},onDataUpdate:function(){var t,e=!1;"sales"==this.stat?(t="Ventes",e=!0):"visitors"==this.stat?t="Visiteurs":"orders"==this.stat?t="Commandes":"cart"==this.stat?(t="Panier moyen",e=!0):t="Pages vues";var a=[],s=[[]];if(_.each(this.datas[0],function(t){a.push(moment(t.date,"YYYY-MM-DD").format("DD/MM")),"visitors"==this.stat?s[0].push(t.visits?t.visits.count:null):"sales"==this.stat?s[0].push(t.orders?t.orders.total:null):"orders"==this.stat?s[0].push(t.orders?t.orders.count:null):"cart"==this.stat?s[0].push(t.orders?t.orders.cart_mean:null):s[0].push(t.visits?t.visits.pageviews:null)}.bind(this)),s[0]=skinDataset(s[0],t,!0,e,null),2==this.datas.length){s[1]=[];var r=[];_.each(this.datas[1],function(t){r.push(moment(t.date,"YYYY-MM-DD").format("DD/MM")),"visitors"==this.stat?s[1].push(t.visits?t.visits.count:null):"sales"==this.stat?s[1].push(t.orders?t.orders.total:null):"orders"==this.stat?s[1].push(t.orders?t.orders.count:null):"cart"==this.stat?s[1].push(t.orders?t.orders.cart_mean:null):s[1].push(t.visits?t.visits.pageviews:null)}.bind(this)),s[1]=skinDataset(s[1],t,!1,e,r)}this.getChildView("chart").updateChart(a,s)},onFieldChange:function(t){if(t.name){if("start_date"==t.name){if(!t.date)return void(this.startDate=null);if(t.date.isSame(this.startDate,"day"))return;this.startDate=t.date;var e=this.endDate?this.endDate.diff(this.startDate,"days"):-1;if(e>30||e<0){var a=this.startDate.clone().add(30,"days"),s=moment().add(-1,"days");this.endDate=s.diff(a,"days")>=0?a:s,this.getUI("endDate").val(this.endDate.format("DD/MM/YYYY"))}}else if("end_date"==t.name){if(!t.date)return void(this.endDate=null);if(t.date.isSame(this.endDate,"day"))return;this.endDate=t.date;var e=this.startDate?this.endDate.diff(this.startDate,"days"):-1;(e>30||e<0)&&(this.startDate=this.endDate.clone().subtract(30,"days"),this.getUI("startDate").val(this.startDate.format("DD/MM/YYYY")))}else if("compare_date"==t.name){if(this.compareDate&&t.date&&t.date.isSame(this.compareDate,"day"))return;if(t.date){if(this.startDate.isSame(t.date,"day"))return;this.compareDate=t.date}else this.compareDate=null}this.startDate&&this.fetch()}}});
},{"21":21,"26":26,"29":29,"59":59,"60":60,"607":607,"undefined":undefined}],103:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),l10n=require(613);require("jqvmap-novulnerability"),require(7),require(6),module.exports=Marionette.View.extend({template:require(61),attributes:function(){return{"class":"col-12 col-lg-"+this.model.get("size")+" order-lg-"+this.model.get("order")+" d-flex"}},ui:{map:'[data-role="map"]',"switch":'[data-role="switch"]'},events:{"click @ui.switch":function(e){this.mode=Backbone.$(e.currentTarget).data("mode"),this.onBeforeDetach(),this.render()}},mode:null,initialize:function(e){this.mergeOptions(e,["report"]),this.listenTo(this.report,"report",this.render),this.mode="france"},templateContext:function(){return{mode:this.mode}},onDomRefresh:function(){var e=this.report.get("origins");"world"==this.mode?this.renderWorld(e&&e.countries?e.countries:[]):"france"==this.mode&&this.renderFrance(e&&e.departments?e.departments:[])},renderFrance:function(e){var t=_.reduce(e,function(e,t,r){return t>=0&&(e["fr-"+r]=t),e},{});this.getUI("map").vectorMap({map:"france_fr",backgroundColor:"#fafafc",borderColor:"#fafafc",color:"#E2E5EB",borderOpacity:1,hoverOpacity:.7,enableZoom:!1,showTooltip:!0,values:t,scaleColors:["#C3D9FF","#337ab7"],normalizeFunction:"polynomial",onLabelShow:function(e,r,o){if(!t[o])return void e.preventDefault();var a=r.text();r.text(a+" : "+format.plural(t[o],"%d commande","%d commandes"))},onRegionClick:function(e,r){if(e.preventDefault(),t[r]){var o;o=this.report.get("days")[0].date?this.report.get("days"):this.report.get("days")[0];var a=Backbone.Radio.channel("app").request("ctx:navigationController");a.navigate("/checkout/orders?status=all&department="+r.substring(3)+"&creation_date_min="+o[0].date+"&creation_date_max="+o[o.length-1].date)}}.bind(this)})},renderWorld:function(e){var t=_.reduce(e,function(e,t,r){return t>=0&&(e[r.toLowerCase()]=t),e},{});this.getUI("map").vectorMap({map:"world_en",backgroundColor:"#fafafc",borderColor:"#fafafc",color:"#E2E5EB",hoverOpacity:.7,enableZoom:!1,showTooltip:!0,values:t,scaleColors:["#C3D9FF","#337ab7"],normalizeFunction:"polynomial",onLabelShow:function(e,r,o){if(!t[o])return void e.preventDefault();var a=l10n.translate("country."+o.toUpperCase());a=="country."+o.toUpperCase()&&(a=o.toUpperCase()),r.text(a+" : "+format.plural(t[o],"%d commande","%d commandes"))},onRegionClick:function(e,t){e.preventDefault()}.bind(this)})},onBeforeDetach:function(){Backbone.$(".jqvmap-label").remove()}});
},{"6":6,"607":607,"61":61,"613":613,"7":7,"undefined":undefined}],104:[function(require,module,exports){
var Marionette=require("backbone.marionette"),Backbone=require("backbone"),_=require("underscore"),format=require(607),moment=require("moment"),Orders=require(267),RowView=Marionette.View.extend({template:require(63),className:"list-item list-item-sm",templateContext:function(){var e,t=moment(this.model.get("creation_date"),"YYYY-MM-DD HH:mm:ss"),i=moment().diff(t,"days");return e=i>=1?format.formatLongDateTime(this.model.get("creation_date")):t.fromNow(),{creation_date_fromnow:e}}}),NoChildrenView=Marionette.View.extend({template:_.template('<span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Il n\'y a encore rien à afficher</span>')}),ListView=Marionette.CollectionView.extend({className:"post-content post-list",childView:RowView,emptyView:NoChildrenView,initialize:function(e){this.renderInterval=setInterval(this.render.bind(this),3e4)},onBeforeDestroy:function(){this.renderInterval&&clearInterval(this.renderInterval)}});module.exports=Marionette.View.extend({template:require(62),attributes:function(){return{"class":"col-12 col-lg-"+this.model.get("size")+" order-lg-"+this.model.get("order")+" d-flex"}},regions:{list:{el:"div[data-role='list']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,[]),this.collection=new Orders;var t=Backbone.Radio.channel("app").request("ctx:notificationCenter");t&&this.listenTo(t,"notification:order",function(){this.start()}),this.start()},onRender:function(){this.showChildView("list",new ListView({collection:this.collection}))},start:function(e){this.collection.fetch({reset:!0,data:{limit:5,sort:"-date",extra_fields:"price_label"}})}});
},{"267":267,"607":607,"62":62,"63":63,"undefined":undefined}],105:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),moment=require("moment");module.exports=Marionette.View.extend({template:require(64),events:{'click a[data-role="subscription"]':function(){window.open(this.session.autologBackLink("/comptes/formules/crediter.html"))},'click a[data-role="plan"]':function(){window.open(this.session.autologAccountLink("/sites/formule.html?code_site="+this.session.site.get("code_site")))}},initialize:function(e){this.mergeOptions(e,["session"])},templateContext:function(){var e,t,i=this.session.site.get("plan");return i&&i.closing_date&&(e=Math.ceil(moment(i.closing_date,"YYYY-MM-DD").diff(moment(),"days",!0))+1),i&&i.endtrial_date&&(t=Math.ceil(moment(i.endtrial_date,"YYYY-MM-DD").diff(moment(),"days",!0))+1),{site:this.session.site.toJSON(),user:this.session.user.toJSON(),endtrial_date:i?format.formatDate(i.endtrial_date):"",closing_date:i?format.formatDate(i.closing_date):"",interval_closing:e,interval_trial:t,plural:format.plural}}});
},{"607":607,"64":64,"undefined":undefined}],106:[function(require,module,exports){
function mapProducts(t){return t?_.reduce(t,function(t,e){return t.length>=5?t:(t.push({href:"/catalog/products/"+e.id,name:e.name,count:format.formatFloat(e.count,0," "),position:e.position}),t)},[]):[]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607);const tabShow=1,tabSold=2;var Paginate=require(44);module.exports=Marionette.View.extend({template:require(65),attributes:function(){return{"class":"col-12 col-lg-"+this.model.get("size")+" order-lg-"+this.model.get("order")+" d-flex"}},ui:{"switch":'[data-role="switch"]',next:'[data-role="next"]',previous:'[data-role="previous"]'},events:{"click @ui.switch":"onSwitch","click @ui.next":function(){var t;t=this.enabledTab==tabShow?this.isPaging?this.paginate.meta.next_views_top:this.report.meta.next_views_top:this.isPaging?this.paginate.meta.next_sales_top:this.report.meta.next_sales_top,t&&this.paginate.fetch({url:t})},"click @ui.previous":function(){var t;t=this.enabledTab==tabShow?this.isPaging?this.paginate.meta.previous_views_top:this.report.meta.previous_views_top:this.isPaging?this.paginate.meta.previous_sales_top:this.report.meta.previous_sales_top,t&&this.paginate.fetch({url:t})}},enabledTab:null,paginate:null,isPaging:null,hasNext:null,hasPrevious:null,initialize:function(t){this.mergeOptions(t,["report"]),this.isPaging=!1,this.hasNext=!1,this.hasPrevious=!1,this.paginate=new Paginate,this.enabledTab=tabSold,this.listenTo(this.report,"report",this.onReport),this.listenTo(this.paginate,"sync",this.onPaginate)},templateContext:function(){var t;if(this.report.get("top"))switch(this.enabledTab){case tabSold:t=mapProducts(this.isPaging?this.paginate.get("top").products_sales:this.report.get("top").products_sales);break;case tabShow:t=mapProducts(this.isPaging?this.paginate.get("top").products_views:this.report.get("top").products_views)}return{enabledTab:this.enabledTab,tabShow:tabShow,tabSold:tabSold,has_next:this.hasNext,has_previous:this.hasPrevious,list:t}},onReport:function(){this.isPaging=!1,this.enabledTab==tabShow?(this.hasNext=this.report.meta.next_views_top&&0!=this.report.meta.next_views_top,this.hasPrevious=this.report.meta.previous_views_top&&0!=this.report.meta.previous_views_top):(this.hasNext=this.report.meta.next_sales_top&&0!=this.report.meta.next_sales_top,this.hasPrevious=this.report.meta.previous_sales_top&&0!=this.report.meta.previous_sales_top),this.render()},onPaginate:function(){this.isPaging=!0,this.enabledTab==tabShow?(this.hasNext=this.paginate.meta.next_views_top&&0!=this.paginate.meta.next_views_top,this.hasPrevious=this.paginate.meta.previous_views_top&&0!=this.paginate.meta.previous_views_top):(this.hasNext=this.paginate.meta.next_sales_top&&0!=this.paginate.meta.next_sales_top,this.hasPrevious=this.paginate.meta.previous_sales_top&&0!=this.paginate.meta.previous_sales_top),this.render()},onSwitch:function(t){var e=Backbone.$(t.currentTarget).data("tab");e!=this.enabledTab&&(this.enabledTab=e,this.isPaging=!1,this.render())}});
},{"44":44,"607":607,"65":65,"undefined":undefined}],107:[function(require,module,exports){
function mapSearch(t){return t?_.reduce(t,function(t,e){return t.length>=5?t:(t.push({position:e.position,name:e.word,count:e.count}),t)},[]):[]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),Paginate=require(44);module.exports=Marionette.View.extend({template:require(66),attributes:function(){return{"class":"col-12 col-lg-"+this.model.get("size")+" order-lg-"+this.model.get("order")}},ui:{next:'[data-role="next"]',previous:'[data-role="previous"]'},events:{"click @ui.next":function(){var t=this.isPaging?this.paginate.meta.next_search_top:this.report.meta.next_search_top;t&&this.paginate.fetch({url:t})},"click @ui.previous":function(){var t=this.isPaging?this.paginate.meta.previous_search_top:this.report.meta.previous_search_top;t&&this.paginate.fetch({url:t})}},paginate:null,isPaging:null,hasNext:null,hasPrevious:null,initialize:function(t){this.mergeOptions(t,["report"]),this.isPaging=!1,this.hasNext=!1,this.hasPrevious=!1,this.paginate=new Paginate,this.listenTo(this.report,"report",this.onReport),this.listenTo(this.paginate,"sync",this.onPaginate)},onReport:function(){this.isPaging=!1,this.hasNext=this.report.meta.next_search_top&&0!=this.report.meta.next_search_top,this.hasPrevious=this.report.meta.previous_search_top&&0!=this.report.meta.previous_search_top,this.render()},onPaginate:function(){this.isPaging=!0,this.hasNext=this.paginate.meta.next_search_top&&0!=this.paginate.meta.next_search_top,this.hasPrevious=this.paginate.meta.previous_search_top&&0!=this.paginate.meta.previous_search_top,this.render()},templateContext:function(){return{has_next:this.hasNext,has_previous:this.hasPrevious,list:mapSearch(this.isPaging?this.paginate.get("top").search:this.report.get("top").search),formatPrct:function(t){return format.formatFloat(t,2,"")},formatNumber:function(t){return format.formatFloat(t,0," ")}}}});
},{"44":44,"607":607,"66":66,"undefined":undefined}],108:[function(require,module,exports){
var Marionette=require("backbone.marionette"),MobilityView=require(109),RefererView=require(110);module.exports=Marionette.View.extend({template:require(67),attributes:function(){return{"class":"col-12 col-lg-"+this.model.get("size")+" order-lg-"+this.model.get("order")+" d-flex flex-column"}},regions:{mobility:{el:"article[data-role='mobility']",replaceElement:!0},referer:{el:"article[data-role='referer']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["report"])},onRender:function(){this.showChildView("mobility",new MobilityView({report:this.report})),this.showChildView("referer",new RefererView({report:this.report}))}});
},{"109":109,"110":110,"67":67,"undefined":undefined}],109:[function(require,module,exports){
var Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),Chart=require("chart.js");module.exports=Marionette.View.extend({template:require(68),className:"post-article dashboard-mobility flex-fill w-100",tagName:"article",ui:{chart:'canvas[data-role="chart"]',"desktop-value":'[data-role="desktop-value"]',"desktop-prct":'[data-role="desktop-prct"]',"mobile-value":'[data-role="mobile-value"]',"mobile-prct":'[data-role="mobile-prct"]',"tablet-value":'[data-role="tablet-value"]',"tablet-prct":'[data-role="tablet-prct"]'},chart:null,initialize:function(t){this.mergeOptions(t,["report"]),this.listenTo(this.report,"report",this.onData)},onAttach:function(){this.chart=new Chart(this.getUI("chart"),{type:"doughnut",options:{maintainAspectRatio:!1,legend:{display:!1},tooltips:{callbacks:{label:function(t,e){return e.labels[t.index]},afterLabel:function(t,e){var a=_.reduce(e.datasets[0].data,function(t,e){return t+e},0),o=a>0?" ("+format.formatFloat(100*e.datasets[0].data[t.index]/a,2," ")+"%)":"";return format.formatFloat(e.datasets[0].data[t.index],0," ")+" visites"+o}}}}})},onBeforeDetach:function(){this.chart.destroy()},onData:function(){if(this.report.get("summary")&&this.report.get("summary").mobility){var t=this.report.get("summary").mobility;if(this.chart.data={labels:["Ordinateurs","Tablettes","Mobiles"],datasets:[{data:[t.desktop,t.tablet,t.mobile],backgroundColor:["#a8d6ff","#d6e9c6","#fed558"]}]},this.chart.update(),null!=t.desktop){var e=t.desktop+t.tablet+t.mobile;this.getUI("desktop-value").text(format.formatFloat(t.desktop,0," ")),this.getUI("mobile-value").text(format.formatFloat(t.mobile,0," ")),this.getUI("tablet-value").text(format.formatFloat(t.tablet,0," ")),e>0?(this.getUI("desktop-prct").text(format.formatFloat(100*t.desktop/e,2,"")+" %"),this.getUI("mobile-prct").text(format.formatFloat(100*t.mobile/e,2,"")+" %"),this.getUI("tablet-prct").text(format.formatFloat(100*t.tablet/e,2,"")+" %")):(this.getUI("desktop-prct").text(""),this.getUI("mobile-prct").text(""),this.getUI("tablet-prct").text(""))}else this.getUI("desktop-value").text("-"),this.getUI("mobile-value").text("-"),this.getUI("tablet-value").text("-"),this.getUI("desktop-prct").text("-"),this.getUI("mobile-prct").text("-"),this.getUI("tablet-prct").text("-")}}});
},{"607":607,"68":68,"undefined":undefined}],110:[function(require,module,exports){
var Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607);module.exports=Marionette.View.extend({template:require(69),className:"post-article dashboard-referer w-100",tagName:"article",initialize:function(r){this.mergeOptions(r,["report"]),this.listenTo(this.report,"report",this.render)},templateContext:function(){var r=!1,e=null;return this.report.get("summary")&&this.report.get("summary").referer&&(e=this.report.get("summary").referer,r=null!=this.report.get("summary").referer.search),{referer:e,hasData:r,formatPrct:function(r){return format.formatFloat(r,2,"")},formatNumber:function(r){return format.formatFloat(r,0," ")}}}});
},{"607":607,"69":69,"undefined":undefined}],111:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Tips=require(49);module.exports=Marionette.View.extend({template:require(70),tagName:"article",className:"post-article container tips",tipsList:null,initialize:function(){this.tipsList=new Tips,this.tipsList.fetch()},templateContext:function(){var t=this.tipsList.pickRandom(),e=null;return t.link?e=t.link:t.help&&(e=t.help),{tip:t,is_external:e&&null!==e.match(/^http/),link:e}}});
},{"49":49,"70":70,"undefined":undefined}],112:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),LoaderTpl=require(92),ControllerChannel=Backbone.Radio.channel("controller");module.exports=Marionette.View.extend({template:require(71),links:[{title:"Kiubi",href:"/"}],actions:null,lockActions:!1,tabs:null,navigation:null,ui:{defaultAction:"[data-role='default-action']",otherActions:"[data-role='other-actions'] li"},events:{"click @ui.defaultAction":"onActionEvent","click @ui.otherActions":"onActionEvent"},initialize:function(){this.listenTo(ControllerChannel,"modified:content",_.debounce(this.onModifiedContent,300)),this.listenTo(ControllerChannel,"saved:content",this.onSavedContent),this.navigation=null},templateContext:function(){var t=[],n=[];return this.getOption("actions")&&this.getOption("actions").length>0&&(t=t.concat(_.filter(this.getOption("actions"),function(t){return t.isOnTop&&!t.isOptional}),_.filter(this.getOption("actions"),function(t){return!t.isOnTop&&!t.isOptional})),n=_.filter(this.getOption("actions"),function(t){return t.isOptional})),{links:this.getOption("links"),actions:t,tabactions:n,tabs:this.getOption("tabs"),navigation:this.navigation}},onModifiedContent:function(t){var n=!1;_.each(this.actions,function(t,i){t.activateOnEvent&&"modified:content"==t.activateOnEvent&&!t.isEnabled&&(t.isEnabled=!0,n=!0),t.bubbleOnEvent&&"modified:content"==t.bubbleOnEvent&&!t.isOnTop&&(t.isOnTop=!0,n=!0)}.bind(this)),n&&this.render()},onSavedContent:function(t){var n=!1;_.each(this.actions,function(t,i){t.activateOnEvent&&"modified:content"==t.activateOnEvent&&t.isEnabled&&(t.isEnabled=!1,n=!0),t.bubbleOnEvent&&"modified:content"==t.bubbleOnEvent&&t.isOnTop&&(t.isOnTop=!1,n=!0)}.bind(this)),n&&this.render()},onActionEvent:function(t){var n=Backbone.$(t.currentTarget).data("id"),i=_.findWhere(this.getOption("actions"),{index:n});i&&i.callback&&i.isEnabled&&this.onAction(i.callback)},onAction:function(t){if(!this.lockActions){this.lockActions=!0;var n=t();if(!n)return void(this.lockActions=!1);var i=this.getUI("defaultAction"),e=this,o=i.text();i.html(LoaderTpl()),i.addClass("btn-load"),n.always(function(){i.removeClass("btn-load"),i.text(o),e.lockActions=!1})}},setBreadCrum:function(t){this.links=t},setActions:function(t){_.each(t,function(t,n){t.isEnabled=!t.activateOnEvent,t.isOnTop=!1,t.index=n}),this.actions=t},setTabs:function(t){this.tabs=t},setNavigation:function(t){this.navigation=t}});
},{"71":71,"92":92,"undefined":undefined}],113:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),TrackingBehavior=require(30),TipsView=require(111),Session;module.exports=Marionette.View.extend({template:require(72),behaviors:[{behaviorClass:TrackingBehavior,defaultCategoty:"Help"}],regions:{tips:{el:"article[data-role='tips']",replaceElement:!0}},initialize:function(e){Session=Backbone.Radio.channel("app").request("ctx:session"),this.mergeOptions(e,["model"]),this.model.fetch().done(function(){this.render()}.bind(this))},templateContext:function(){return{user:Session.user.toJSON(),contact:this.model.toJSON()}},onRender:function(){this.showChildView("tips",new TipsView({}))}});
},{"111":111,"30":30,"72":72,"undefined":undefined}],114:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),TrackingBehavior=require(30),PlanView=require(105),TipsView=require(111),PorteursAdvicesView=require(115),PrestatairesAdvicesView=require(116),Session;module.exports=Marionette.View.extend({template:require(73),behaviors:[{behaviorClass:TrackingBehavior,defaultCategoty:"Homeboard"}],regions:{plan:{el:"div[data-role='plan']",replaceElement:!0},advices:{el:"article[data-role='advices']",replaceElement:!0},tips:{el:"article[data-role='tips']",replaceElement:!0}},initialize:function(){Session=Backbone.Radio.channel("app").request("ctx:session")},templateContext:function(){return{account_type:Session.site.get("account").account_type,show_cms:Session.hasScope("site:cms"),show_blog:Session.hasScope("site:blog"),show_catalog:Session.hasScope("site:catalog")&&Session.hasFeature("catalog"),show_checkout:Session.hasScope("site:checkout")&&Session.hasFeature("checkout"),show_customers:Session.hasScope("site:account"),show_layout:Session.hasScope("site:layout"),show_theme:Session.hasScope("site:theme"),show_pref:Session.hasScope("site:pref")}},onRender:function(){Session.site&&Session.site.get("account")&&("porteur"===Session.site.get("account").account_type?this.showChildView("advices",new PorteursAdvicesView({session:Session})):this.showChildView("advices",new PrestatairesAdvicesView({session:Session}))),this.showChildView("plan",new PlanView({session:Session})),this.showChildView("tips",new TipsView({}))}});
},{"105":105,"111":111,"115":115,"116":116,"30":30,"73":73,"undefined":undefined}],115:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Symbols=require(348),Page=require(346),Contents=require(343),Collection=require(341),Product=require(205),Forms=require(608);module.exports=Marionette.View.extend({template:require(74),tagName:"article",className:"post-article post-article-dark porteurs",events:{'click button[data-role="page"]':function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showOverlay();var n,o=new Page({name:"Ma première page",slug:"ma-premiere-page",is_visible:!0,page_type:"page",menu_id:1});o.save().then(function(){var e=new((new Contents).model)({is_visible:!0,container_id:o.get("page_id"),container_type:"page",content:"post",type:"jumbotron",zone:"banniere",title:"Ajouter du contenu",text1:'Ajouter du contenu &agrave; une page, revient &agrave; cr&eacute;er un ou plusieurs <a href="https://aide.kiubi.com/site-web.html#ajouter-un-billet">billets</a>, <br /><a href="https://aide.kiubi.com/site-web.html#ajouter-un-composant">composants</a> ou <a href="https://aide.kiubi.com/site-web.html#ajouter-un-symbole">symboles</a> dans cette page. Chaque &eacute;l&eacute;ment vient <br />se placer dans une <a href="https://aide.kiubi.com/mises-en-page.html#zones-de-contenu">zone de contenu</a> de la page.',text7:"450px",text10:"1080",text11:"1",text13:"bg-transparent",text14:"1",text15:"1"});return e.save()}).then(function(){var e=new((new Contents).model)({is_visible:!0,container_id:o.get("page_id"),container_type:"page",content:"post",type:"image",zone:"contenu",title:"Ceci est un billet",text2:'Un billet permet d\'ajouter du contenu r&eacute;dactionnel &agrave; une page. Chaque billet peut &ecirc;tre consid&eacute;r&eacute; comme un paragraphe, un bloc de contenu structur&eacute; pouvant contenir du texte, des images, des vid&eacute;os, des liens, etc.<br /><br />Pour r&eacute;diger un billet, cliquez sur le bouton "Ajouter un contenu". Choisissez le type de billet que vous souhaitez utiliser. <br /><br />Le billet est alors cr&eacute;&eacute;.<br /><br />Un nouveau billet est toujours masqu&eacute;, il est consid&eacute;r&eacute; "en construction". Pour l&rsquo;afficher, il vous suffit de r&eacute;gler le param&egrave;tre "Affichage" &agrave; "Visible" dans le d&eacute;tail du billet.',text10:"1079"});return e.save()}).then(function(){return n=new((new Contents).model)({is_visible:!0,container_id:o.get("page_id"),container_type:"page",content:"component",type:"apercu",zone:"contenu",fields:{title:"Ceci est un composant",textcolor:"1",content:'<p>Un composant, tout comme un billet, permet d\'ajouter du contenu structur&eacute; dans une page. Le composant pourra cependant &eacute;galement contenir son propre listing de contenu, appel&eacute; "collection". <br /><br />Les composants sont adapt&eacute;s &agrave; l\'int&eacute;gration d\'&eacute;l&eacute;ments plus &eacute;labor&eacute;s techniquement que ceux d\'un billet, ou de listing avec peu de contenu r&eacute;dactionnel mais plus de param&egrave;tres de configuration, comme : des carrousels, des galeries photos, des accord&eacute;ons, des embed, des boutons d\'action, etc.<br /><br />Pour ajouter un composant, cliquez sur le bouton "Ajouter un contenu". Choisissez le type de composant que vous souhaitez utiliser. Le composant est alors cr&eacute;&eacute;.<br /><br />Un nouveau composant est toujours masqu&eacute;, il est consid&eacute;r&eacute; "en construction". Pour l&rsquo;afficher, il vous suffit de r&eacute;gler le param&egrave;tre "Affichage" &agrave; "Visible" dans le d&eacute;tail du composant.<br /><br />Le principal avantage d\'un composant est qu\'il peut contenir son propre listing d\'&eacute;l&eacute;ments. La pr&eacute;sence, ou non, d\'une "collection" d&eacute;pend cependant du type de composant. Pour ajouter un &eacute;l&eacute;ment &agrave; la collection d\'un composant, cliquez sur "Ajouter un &eacute;l&eacute;ment" dans le d&eacute;tail d\'un composant.</p>\nPar exemple, pour ce composant : chaque &eacute;l&eacute;ment de la collection ci-dessous affiche un petit encart dans le site. Chaque &eacute;l&eacute;ment &agrave; son propre contenu (texte, image, lien, etc.).'}}),n.save()}).then(function(){var e=new((new Collection).model)({content_id:n.get("content_id"),is_visible:!0,fields:{title:"Element 1",image:"1077",button:"Texte du bouton",link:"#",content:"Contenu de l'&eacute;l&eacute;ment 1"}});return e.save()}).then(function(){var e=new((new Collection).model)({content_id:n.get("content_id"),is_visible:!0,fields:{title:"Element 2",image:"1076",button:"Texte du bouton",link:"#",content:"Contenu de l'&eacute;l&eacute;ment 2"}});return e.save()}).then(function(){var e=new((new Collection).model)({content_id:n.get("content_id"),is_visible:!0,fields:{title:"Element 3",image:"1078",button:"Texte du bouton",link:"#",content:"Contenu de l'&eacute;l&eacute;ment 3"}});return e.save()}).then(function(){var e=new Symbols;return e.fetch().then(function(){var t=e.find(function(e){return e.get("params")&&"Ceci est un symbole"===e.get("params").title});return t?t.get("symbol_id"):(t=new((new Symbols).model)({title:"Ceci est un symbole"}),t.save().then(function(){var e=new((new Contents).model)({is_visible:!0,container_id:t.get("symbol_id"),container_type:"symbol",content:"post",type:"simple",zone:"contenu",title:"Ceci est un symbole",text2:'<a href="https://aide.kiubi.com/site-web.html#ajouter-un-symbole" target="_blank" rel="noopener">Un symbole</a> a de nombreuses caract&eacute;ristiques communes avec une page libre : il int&egrave;gre son propre contenu (billets et composants), sa mise en page, ses widgets, etc.<br /><br />Cependant, il n\'est pas accessible depuis un menu de navigation ; la fonction du symbole est de centraliser une "section" de contenu, de mise en page et de widgets afin de pouvoir l\'ajouter au contenu d\'<a href="https://aide.kiubi.com/site-web.html#types-de-pages">une page libre</a>.<br /><br />Un symbole est commun &agrave; toutes les pages dans lequel il est ajout&eacute; : une modification ou une suppression du symbole sera r&eacute;percut&eacute;e partout o&ugrave; il est utilis&eacute; dans le site.'});return e.save()}).then(function(){return t.get("symbol_id")}))})}).then(function(e){var t=new((new Contents).model)({is_visible:!0,container_id:o.get("page_id"),container_type:"page",content:"symbol",symbol_id:e,zone:"contenu"});return t.save()}).then(function(){t.hideModal(),t.navigate("/cms/pages/"+o.get("page_id"))}.bind(this),function(e){t.showErrorModal(e)}.bind(this))},'click button[data-role="product"]':function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showOverlay();var n=new Product({name:"Intitulé par défaut",slug:Forms.tmpSlug(),is_visible:!1,stock:null,categories:[]});n.save().done(function(){t.hideModal(),t.navigate("/catalog/products/"+n.get("product_id"))}.bind(this)).fail(function(e){t.showErrorModal(e)}.bind(this))}},initialize:function(e){this.mergeOptions(e,["session"])},templateContext:function(){var e="doc",t=!1,n=!1,o=!1;return this.session.hasScope("site:domains")&&(o=!0,e="domains"),this.session.hasScope("site:catalog")&&this.session.hasFeature("catalog")&&(n=!0,e="catalog"),this.session.hasScope("site:cms")&&(t=!0,e="cms"),{has_cms:t,has_catalog:n,has_domains:o,activeTab:e}}});
},{"205":205,"341":341,"343":343,"346":346,"348":348,"608":608,"74":74,"undefined":undefined}],116:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(75),tagName:"article",className:"post-article post-article-dark prestataires",events:{'click a[data-role="support"]':function(e){window.open(this.session.autologAccountLink("/support/"))}},initialize:function(e){this.mergeOptions(e,["session"])},templateContext:function(){var e="doc",t=!1;return this.session.hasScope("site:theme")&&(t=!0,e="theme"),{has_theme:t,activeTab:e}}});
},{"75":75,"undefined":undefined}],117:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),NotificationView=require(138),View=Marionette.View.extend({el:"body",template:_.noop,regions:{header:"header",sidebar:"#sidebar",sidebarMenu:"#sidebar-menu",content:"#content",modal:"#modal",notification:"#notification"},triggers:{drop:{event:"drop",preventDefault:!0},dragover:{event:"dragover",preventDefault:!0}},childViewEvents:{"sidebarmenu:toggle":function(){this.$el.hasClass("closed")?this.unlockMenu():this.lockMenu()},"open:sitesearch":function(){this.$el.addClass("opened")},"close:sitesearch":function(){this.$el.removeClass("opened")}},lockMenu:function(){this.$el.addClass("closed"),this.getChildView("sidebarMenu")&&this.getChildView("sidebarMenu").closeDropdown&&this.getChildView("sidebarMenu").closeDropdown()},unlockMenu:function(){this.$el.removeClass("closed")},setAppContext:function(e){e?this.$el.addClass("app-context"):this.$el.removeClass("app-context")},initialize:function(e){this.mergeOptions(e,["notificationCollection"]);var t=this;Backbone.$(window).resize(_.debounce(function(e){Backbone.$(document).width()<1155?t.lockMenu():t.unlockMenu()},300)),Backbone.$(document).width()<1155&&setTimeout(this.lockMenu.bind(this),2e3)},events:{"click a[href^=\\/]":function(e){if("_blank"!=e.currentTarget.getAttribute("target")){e.preventDefault();var t={trigger:!0};Backbone.$(e.currentTarget).data("preventPushState")&&(t.preventPushState=!0),this.trigger("navigate",Backbone.$(e.currentTarget).attr("href"),t)}}},onRender:function(){this.notificationCollection&&this.showChildView("notification",new NotificationView({collection:this.notificationCollection}))}});module.exports=View;
},{"138":138,"undefined":undefined}],118:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),LoaderTpl=require(92),TipsView=require(119),View=Marionette.View.extend({className:"login",template:require(76),ui:{login:"#login_input",group_login:"#group_login",password:"#password_input",group_password:"#group_password",remember:"#remember_input",alert:".alert-danger",submitBtn:'button[data-role="submit"]'},events:{"click @ui.submitBtn":"handleSave","submit form":"handleSave",'click a[data-role="clear"]':function(){this.code_site=null,this.render()}},regions:{tips:{el:"div[data-role='tips']",replaceElement:!0}},code_site:null,cobranding:null,loaded:null,Session:null,lockLogin:!1,initialize:function(e){this.mergeOptions(e,["code_site","cobranding","Session"]),this.cobranding?(this.loaded=!1,this.cobranding.fetch({data:{code_site:this.code_site}}).always(function(){this.loaded=!0,this.render()}.bind(this))):this.loaded=!0,this.lockLogin=!1},templateContext:function(){var e,i,t;if(this.loaded&&(e="/assets/img/bg_login_f.jpg",i="/assets/img/logo_kiubi.png",t=!1,this.cobranding)){var o=this.cobranding.get("login");o.background&&(e=o.background),o.logo&&(i=o.logo,t=!0)}var s=Backbone.Radio.channel("app").request("ctx:config");return{code_site:this.code_site,cobranding_background:e,cobranding_logo:i,year:(new Date).getFullYear(),login:this.Session.getValue("last_login")||"",account:s.get("account"),cobranded:t}},handleSave:function(e){if(e.preventDefault(),!this.lockLogin){this.lockLogin=!0,e.preventDefault(),this.showError();var i=this.getUI("submitBtn");i.addClass("btn-load");var t=i.text();return i.html(LoaderTpl()),this.Session.authenticate(this.getUI("login").val(),this.getUI("password").val(),this.code_site).done(function(){this.getUI("remember").prop("checked")?this.Session.storeValue("last_login",this.getUI("login").val()):this.Session.storeValue("last_login",""),this.trigger("success:login")}.bind(this)).fail(function(e){this.showError(e),i.removeClass("btn-load"),i.text(t)}.bind(this)).always(function(){this.lockLogin=!1}.bind(this)),!1}},showError:function(e){return void 0===e?(this.getUI("alert").hide(),this.getUI("group_login").removeClass("has-error"),void this.getUI("group_password").removeClass("has-error")):(this.getUI("alert").text(e),this.getUI("alert").show(),this.getUI("group_login").addClass("has-error"),void this.getUI("group_password").addClass("has-error"))},onRender:function(){this.showChildView("tips",new TipsView({}))}});module.exports=View;
},{"119":119,"76":76,"92":92,"undefined":undefined}],119:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Tips=require(49);module.exports=Marionette.View.extend({template:require(77),tagName:"div",className:"brand-message",tipsList:null,initialize:function(){this.tipsList=new Tips,this.tipsList.fetch()},templateContext:function(){var e=this.tipsList.pickRandom();return{tip:e,link:e.help}}});
},{"49":49,"77":77,"undefined":undefined}],120:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(78),initialize:function(e){this.mergeOptions(e,["message"])},templateContext:function(){return{message:this.message}}});
},{"78":78,"undefined":undefined}],121:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),TooltipBehavior=require(29),navigationChannel=Backbone.Radio.channel("navigation"),UsageView=require(123),NotificationView=require(122);module.exports=Marionette.View.extend({template:require(79),behaviors:[TooltipBehavior],regions:{usage:{el:'[data-role="usage"]',replaceElement:!0},notifications:{el:'[data-role="notifications"]',replaceElement:!0}},ui:{items:".nav-item",toggleBtn:'span[data-role="close"]',notificationBtn:".nav-item.notifications"},triggers:{"click @ui.toggleBtn":"sidebarmenu:toggle"},events:{'click a[data-role="logout"]':function(){this.session.logout()},"shown.bs.dropdown .notifications":function(i){this.getChildView("notifications")&&(this.notificationcenter.markAsRead(),this.getChildView("notifications").fetch())},"shown.bs.dropdown .user":function(i){this.usageView.fetch()},'click a[data-role="me"]':function(){if(this.session.user.isAdmin())window.open(this.session.autologAccountLink("/users/"));else{if(!this.session.hasScope("site:users"))return;window.open(this.session.autologBackLink("/comptes/users/"))}},'click a[data-role="users"]':function(){window.open(this.session.autologBackLink("/comptes/users/"))},'click a[data-role="subscription"]':function(){window.open(this.session.autologBackLink("/comptes/formules/crediter.html"))},'click a[data-role="bill"]':function(){window.open(this.session.autologBackLink("/comptes/factures/"))},'click a[data-role="account"]':function(){window.open(this.session.autologAccountLink("/dashboard/"))}},initialize:function(i){this.mergeOptions(i,["session","collection"]),this.listenTo(navigationChannel,"change:url",this.onChangeURL),this.listenTo(this.session.site,"change:site",function(){this.render(),this.usageView.fetch()}.bind(this)),this.usageView=new UsageView,this.notificationcenter=Backbone.Radio.channel("app").request("ctx:notificationCenter"),this.notificationcenter&&(this.timeoutNotification=null,this.listenTo(this.notificationcenter,"notification:order notification:response notification:comment notification:evaluation",function(){this.getUI("notificationBtn").addClass("dring"),this.timeoutNotification=setTimeout(function(){this.getUI("notificationBtn").removeClass("dring")}.bind(this),6e3)}),this.listenTo(this.notificationcenter,"update:unread",this.onChangeNotificationCount))},templateContext:function(){var i,t,e=this.session.site.get("plan");switch(this.session.site.get("account")&&this.session.site.get("account").account_level){case"expert":i="Expert",t="badge-warning";break;case"premium":i="Premium",t="badge-success";break;default:i="Admin",t="badge-secondary"}return{user:this.session.user.toJSON(),site:this.session.site.toJSON(),isAuth:this.session.user.isAuth(),mainItems:this.getLinks("main"),toolsItems:this.getLinks("tools"),plural:format.plural,endtrial_date:e?format.formatDate(e.endtrial_date):"",closing_date:e?format.formatDate(e.closing_date):"",has_scope_subscription:this.session.hasScope("site:subscription"),has_scope_users:this.session.hasScope("site:users"),userAvatar:this.session.user.getAvatar(),accountBadge:t,accountLabel:i,showNotifications:!!this.notificationcenter}},onBeforeRender:function(){this.usageView.isAttached()&&this.detachChildView("usage")},onRender:function(){this.session.user.isAuth()&&(this.showChildView("usage",this.usageView),this.notificationcenter&&(this.showChildView("notifications",new NotificationView),this.notificationcenter.refreshCount()))},onBeforeDetach:function(){this.timeoutNotification&&clearTimeout(this.timeoutNotification)},getLinks:function(i){var t=this.collection.where({type:i});return _.each(t,function(i){var t=null==i.get("scope")||this.session.hasScope(i.get("scope")),e=null==i.get("feature")||this.session.hasFeature(i.get("feature"));i.set("is_enabled",t&&e),i.set("blank",0==i.get("path").lastIndexOf("http",0))}.bind(this)),_.invoke(t,"toJSON")},onChangeURL:function(i){var t="/"+(i.path+"/").split(/\/|\?/)[1];this.getUI("items").removeClass("active");var e="/"===t?"a[href='"+t+"']":"a[href^='"+t+"']";this.getUI("items").children(e).parent().addClass("active")},onChangeNotificationCount:function(i){i>0?this.getUI("notificationBtn").addClass("notifications-active"):this.getUI("notificationBtn").removeClass("notifications-active")}});
},{"122":122,"123":123,"29":29,"607":607,"79":79,"undefined":undefined}],122:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),moment=require("moment"),Activities=require(35),RowView=Marionette.View.extend({template:_.template('<a class="dropdown-item py-3" href="<%- url %>" title=""><span><div class="md-icon md-activity-<%- type %> mr-3"></div></span><span><%- text %><br/><small><%- creation_date_fromnow %></small></span></a>'),className:"",templateContext:function(){var e=this.model.get("type");return"comment"==e&&(e=this.model.get("urn").match(/^\/blog\//)?"comment":"evaluation"),{creation_date_fromnow:moment(this.model.get("creation_date"),"YYYY-MM-DD HH:mm:ss").fromNow(),url:this.model.mapUrnToUrl()||"#",type:e}}}),NoChildrenView=Marionette.View.extend({template:_.template('<span class="list-item-empty">Il n\'y a encore rien à afficher</span>')}),ListView=Marionette.CollectionView.extend({childView:RowView,emptyView:NoChildrenView,initialize:function(e){this.renderInterval=setInterval(this.render.bind(this),3e4)},onBeforeDestroy:function(){this.renderInterval&&clearInterval(this.renderInterval)}});module.exports=Marionette.View.extend({template:_.template('<div class="dropdown-item-text py-3"><strong>Notifications récentes</strong></div><div data-role="list"></div>'),className:"dropdown-menu mb-2",regions:{list:{el:'[data-role="list"]',replaceElement:!0}},initialize:function(e){this.collection=new Activities},onRender:function(){this.showChildView("list",new ListView({collection:this.collection}))},fetch:function(){this.collection.fetch({reset:!0,data:{limit:10,type:"comment,checkout,form"}}).done(function(){this.$el.siblings().dropdown("update")}.bind(this))}});
},{"35":35,"undefined":undefined}],123:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),TooltipBehavior=require(29),Usage=require(50);module.exports=Marionette.View.extend({template:require(80),behaviors:[TooltipBehavior],initialize:function(t){this.model=new Usage,this.listenTo(this.model,"sync",this.render)},templateContext:function(){var t=0,e=0,o=0,s=0,r=0,a=0;if(this.model.get("space").total){var i=Math.max(this.model.get("space").used,this.model.get("space").total);t=Math.round(100*this.model.get("space").medias/i),e=Math.round(100*this.model.get("space").ftp/i),o=Math.round(100*this.model.get("space").datas/i)}return this.model.get("products").total&&(s=Math.round(100*this.model.get("products").used/this.model.get("products").total)),this.model.get("users").total&&(r=Math.round(100*this.model.get("users").used/this.model.get("users").total)),this.model.get("forms").total&&(a=Math.round(100*this.model.get("forms").used/this.model.get("forms").total)),{formatBytes:format.formatBytes,prct_medias:t,prct_ftp:e,prct_datas:o,prct_free:Math.max(0,100-t-e-o),prct_products:s,prct_users:r,prct_forms:a}},fetch:function(){this.model.fetch({data:{extra_fields:"forms,products,users"}})}});
},{"29":29,"50":50,"607":607,"80":80,"undefined":undefined}],124:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),TooltipBehavior=require(29);module.exports=Marionette.View.extend({template:require(81),service:"dashboard",behaviors:[TooltipBehavior],events:{'click a[data-role="dashboard"]':function(){var t=Backbone.Radio.channel("app").request("ctx:session");window.open(t.autologBackLink("/dashboard/"))}},initialize:function(t){if(this.mergeOptions(t,["stat"]),this.stat){this.listenTo(this.stat,"sync",this.render);var e=Backbone.Radio.channel("app").request("ctx:notificationCenter");e&&this.listenTo(e,"notification:order notification:response",function(){this.stat.fetch()})}},templateContext:function(){var t=Backbone.Radio.channel("app").request("ctx:session");return{show_catalog:t.hasFeature("catalog")&&t.hasScope("site:catalog"),show_checkout:t.hasFeature("checkout")&&t.hasScope("site:checkout"),pending_orders:this.stat.get("checkout")?this.stat.get("checkout").pending_orders:null,stock_shortage_count:this.stat.get("catalog")?this.stat.get("catalog").stock_shortage_count:null,unread_responses:this.stat.get("forms")?this.stat.get("forms").unread_responses:null}}});
},{"29":29,"81":81,"undefined":undefined}],125:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),AutocompleteInputView=require(127),Products=require(206),BlogPosts=require(169),Customers=require(384),Orders=require(267),Files=require(440),Contents=require(343),Menus=require(345),searchCms=Marionette.Object.extend({initialize:function(){this.header="Résultats dans le site web",this.service="Site web",this.type="cms",this.serviceURL="/cms/posts?"},suggest:function(e,t){var s=new Contents,i=new Menus;return Backbone.$.when(s.suggest(e,t),i.suggest(e,t)).then(function(t,s){var i=[];return t.length&&(i.push({label:this.header,is_header:!0}),_.each(t,function(e){i.push(this.mapContent(e))}.bind(this))),s.length&&(i.push({label:"Pages du site web",is_header:!0}),_.each(s,function(e){i.push(this.mapPage(e))}.bind(this))),t.length||s.length?i.push({label:"Tous les résultats",href:this.serviceURL+"term="+e,icon:"md-search"}):i.push({label:"Aucun résultat",href:"#",icon:"md-no-result"}),i}.bind(this))},mapContent:function(e){return{label:e.label,href:"/cms/contents/"+e.content_id,icon:"md-website"}},mapPage:function(e){var t;switch(e.page_type){default:t="md-website";break;case"lien_int":t="md-directions";break;case"lien_ext":t="md-link"}return{label:e.name,href:"/cms/pages/"+e.page_id,icon:t}},searchSummary:function(e){return{term:e,href:this.serviceURL+"term="+e,service:this.service}}}),searchMixin={suggest:function(e,t){var s=new this.collection;return s.suggest(e,t).then(function(t){var s=[{label:this.header,is_header:!0}];return t.length?(_.each(t,function(e){s.push(this.mapSuggestion(e))}.bind(this)),s.push({label:"Tous les résultats",href:this.serviceURL+"term="+e,icon:"md-search"})):s.push({label:"Aucun résultat",href:"#",icon:"md-no-result"}),s}.bind(this))},searchSummary:function(e){return{term:e,href:this.serviceURL+"term="+e,service:this.service}}},searchCatalog=Marionette.Object.extend({initialize:function(){this.type="catalog",this.header="Résultats dans le catalogue",this.service="Catalogue",this.serviceURL="/catalog?",this.collection=Products},mapSuggestion:function(e){return{label:e.name,href:"/catalog/products/"+e.product_id,icon:"md-product"}}});_.extend(searchCatalog.prototype,searchMixin);var searchCutomers=Marionette.Object.extend({initialize:function(){this.type="customers",this.header="Résultats dans les membres",this.service="Membres",this.serviceURL="/customers?",this.collection=Customers},mapSuggestion:function(e){return{label:e.firstname+" "+e.lastname,href:"/customers/"+e.customer_id,icon:"md-member"}}});_.extend(searchCutomers.prototype,searchMixin);var searchBlog=Marionette.Object.extend({initialize:function(){this.type="blog",this.header="Résultats dans le blog",this.service="Blog",this.serviceURL="/blog?",this.collection=BlogPosts},mapSuggestion:function(e){return{label:e.title,href:"/blog/posts/"+e.post_id,icon:"md-blog"}}});_.extend(searchBlog.prototype,searchMixin);var searchCheckout=Marionette.Object.extend({initialize:function(){this.type="checkout",this.header="Résultats dans les commandes",this.service="Commandes",this.serviceURL="/checkout/orders?status=all&",this.collection=Orders},mapSuggestion:function(e){return{label:e.reference,href:"/checkout/orders/"+e.order_id,icon:"md-order"}}});_.extend(searchCheckout.prototype,searchMixin);var searchMedia=Marionette.Object.extend({initialize:function(){this.type="media",this.header="Résultats dans la médiathèque",this.service="Médiathèque",this.serviceURL="/media?",this.collection=Products},mapSuggestion:function(e){return{label:e.name,href:"/media/files/"+e.media_id,icon:"md-media"}}});_.extend(searchMedia.prototype,searchMixin);var SearchEngines=Marionette.Object.extend({initialize:function(){this.engines=new Map,this["default"]=null},addEngine:function(e,t){this.engines.set(e.type,e),!t&&this["default"]||(this["default"]=e)},getEngine:function(e){return this.engines.has(e)?this.engines.get(e):this["default"]}});module.exports=Marionette.View.extend({template:require(82),service:"",ui:{"site-dropdown":'[data-role="site-dropdown"]',"site-search":'[data-role="site-search"]',"input-search":'[data-role="site-search"] input',login:'[data-role="login"]'},events:{"click @ui.site-search a":"onChooseSite","hide.bs.dropdown @ui.site-dropdown":function(e){this.emptyList(),this.getUI("input-search").val(""),this.trigger("close:sitesearch")},"shown.bs.dropdown @ui.site-dropdown":function(e){this.getUI("input-search").focus(),this.trigger("open:sitesearch")},"click @ui.login":function(){var e=Backbone.Radio.channel("app").request("ctx:session");window.open(e.autologLink())}},regions:{detail:{el:'div[data-role="content"]',replaceElement:!0},term:{el:'div[data-role="term"]',replaceElement:!0}},searchStack:null,initialize:function(e){this.mergeOptions(e,["model"]),this.listenTo(this.model,"change",this.onSessionChange),this.searchStack=[];var t=Backbone.Radio.channel("app").request("ctx:session");this.searchEngines=new SearchEngines,this.searchEngines.addEngine(new searchCms,!0),t.hasFeature("catalog")&&t.hasScope("site:catalog")&&this.searchEngines.addEngine(new searchCatalog,!0),t.hasScope("site:account")&&this.searchEngines.addEngine(new searchCutomers),this.searchEngines.addEngine(new searchBlog),t.hasFeature("checkout")&&t.hasScope("site:checkout")&&this.searchEngines.addEngine(new searchCheckout),this.searchEngines.addEngine(new searchMedia)},addSearch:function(e){_.findWhere(this.searchStack,{term:e.term,service:e.service})||(this.searchStack.length>=3&&this.searchStack.shift(),this.searchStack.push(e))},templateContext:function(){return{fqdn:this.model.get("domain").replace(/^https?:\/\//,"")}},onRender:function(){this.getUI("input-search").on("keyup",_.debounce(this.onChange.bind(this),300));var e=Backbone.Radio.channel("app").request("ctx:session"),t=[{label:"Site web",icon:"md-website",id:"cms",className:null},{label:"Blog",icon:"md-blog",id:"blog",className:null}];e.hasFeature("catalog")&&e.hasScope("site:catalog")&&t.push({label:"Catalogue",icon:"md-product",id:"catalog",className:null}),e.hasFeature("checkout")&&e.hasScope("site:checkout")&&t.push({label:"Commandes",icon:"md-order",id:"checkout",className:null}),e.hasScope("site:account")&&t.push({label:"Membres",icon:"md-member",id:"customers",className:null}),t.push({label:"Médiathèque",icon:"md-media",id:"media",className:null}),this.showChildView("term",new AutocompleteInputView({searchPlaceholder:"Recherche",name:"term",extraDropdownClassname:"form-group has-feedback sidebar-search mb-0",extraDropdownMenuClassname:"sidebar-search-results",extraInputClassname:"form-control-sidebar dropdown-toggle",footer:t}))},onSessionChange:function(e){if(e.hasChanged("domain")||e.hasChanged("name")){var t=this.detachChildView("detail");this.render(),t&&this.showChildView("detail",t)}},onChange:function(e){this.model.searchSite(Backbone.$(e.currentTarget).val()).done(function(e){var t="";t=e.length>0?_.reduce(e,function(e,t){var s=0!=t.domain.lastIndexOf(t.code_site,0)?"<small>"+t.code_site+"</small>":"";return e+'<li><a class="dropdown-item" href="#" title="'+t.domain+'" data-site="'+t.code_site+'">'+t.domain+s+"</a></li>"},'<li class="dropdown-divider"></li>'):'<li class="dropdown-divider"></li><li><span class="dropdown-item dropdown-item-empty"><span class="md-icon md-no-result"></span> Aucun résultat</span></li>',this.emptyList().append(t),this.getUI("input-search").focus()}.bind(this))},onChooseSite:function(e){var t=Backbone.$(e.currentTarget).data("site");if(t){var s=Backbone.Radio.channel("app").request("ctx:session");s.changeSite(t).done(function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay(300),e.navigate("/")})}},closeDropdown:function(){this.getUI("site-search").parent().hasClass("show")&&this.getUI("site-search").parent().dropdown("toggle")},emptyList:function(){var e=this.getUI("site-search").children().eq(0).detach();return this.getUI("site-search").empty().append(e)},onChildviewInput:function(e,t){if(""!==e){var s=t.getActiveFooter(),i=this.searchEngines.getEngine(s?s.id:this.service);i&&i.suggest(e,5).then(function(s){this.searchStack.length&&(s.push({label:"Résultats récents",is_header:!0}),_.each(this.searchStack,function(e){s.push({label:e.service+'<span class="md-icon md-next"></span>'+_.escape(e.term),href:e.href,icon:"md-search",disable_escaping:!0})})),t.showResults(s,{activeFooter:i.type}),this.addSearch(i.searchSummary(e))}.bind(this))}},onChildviewSelectFooter:function(e,t){this.onChildviewInput(t.term,t)}});
},{"127":127,"169":169,"206":206,"267":267,"343":343,"345":345,"384":384,"440":440,"82":82,"undefined":undefined}],126:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.View.extend({template:require(83),tagName:"div",className:"input-file",name:"file",tempfileUpload:null,ui:{filename:'[data-role="filename"]'},events:{"change input[type=file]":"dropFile"},initialize:function(e){this.mergeOptions(e,["name"])},templateContext:function(){return{name:this.name}},updateView:function(e){this.getUI("filename").text(e)},dropFile:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer,i=t?t.files:e.originalEvent.target.files;_.each(i,function(e){this.tempfileUpload=e}.bind(this)),this.tempfileUpload&&this.updateView(this.tempfileUpload.name)},getFile:function(){return this.tempfileUpload},getFileContent:function(){var e=Backbone.$.Deferred(),t=new FileReader;return t.onload=function(t){e.resolve(t.target.result)},t.onerror=function(t){e.reject()},t.readAsText(this.tempfileUpload,"UTF-8"),e}});
},{"83":83,"undefined":undefined}],127:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.View.extend({template:require(84),tagName:"div",current:null,name:"",ui:{drop:".dropdown",sel:'.dropdown li[data-role="selection"]',lixtra:'.dropdown li[data-role="xtra"]',input:"input",footer:'.dropdown a[data-role="footer"]'},events:{"keyup @ui.drop input":_.debounce(function(e){this.triggerInput("Enter"==e.key)},300),"mousedown @ui.input":function(e){this.triggerInput(!1)},"click @ui.sel":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||t>this.suggestions.length||(this.current=this.suggestions[t].value,Backbone.$("input",this.el).val(this.current))},"click @ui.lixtra":function(e){var t=Backbone.$(e.currentTarget).data("event");this.triggerMethod(this.eventName(t),this.term,this)},"click @ui.footer":function(e){var t=Backbone.$(e.currentTarget),i=t.data("footerid");e.stopPropagation(),t.siblings().removeClass("active"),t.addClass("active"),_.each(this.footer,function(e){e.isActive=e.id==i}),this.triggerMethod(this.eventName("select:footer"),i,this)}},suggestions:null,term:null,searchPlaceholder:"Rechercher",noResultsLabel:"-- Aucun résultat --",evtSuffix:"",eventName:function(e){return this.evtSuffix?e+":"+this.evtSuffix:e},initialize:function(e){this.mergeOptions(e,["evtSuffix","current","name","footer"]),this.term=null},templateContext:function(){return{name:this.name,current:this.current,searchPlaceholder:this.searchPlaceholder,extraDropdownClassname:this.getOption("extraDropdownClassname"),extraDropdownMenuClassname:this.getOption("extraDropdownMenuClassname"),extraInputClassname:this.getOption("extraInputClassname")}},triggerInput:function(e){(this.getUI("input").val()!==this.term||e)&&(this.term=this.getUI("input").val(),this.triggerMethod(this.eventName("input"),this.term,this))},showResults:function(e,t){this.suggestions=e,t=t||{};var i="";if(e.length>0?i=_.reduce(e,function(e,t,i){if(t.is_header)return e+'<li class="dropdown-header">'+_.escape(t.label)+"</li>";var r=t.icon?'<span class="md-icon '+t.icon+'"></span>':"",a=t.disable_escaping?t.label:_.escape(t.label);return t.href?e+'<li><a class="dropdown-item" href="'+t.href+'">'+r+a+"</a></li>":e+'<li data-role="selection" data-index="'+i+'"><a class="dropdown-item" href="#">'+r+a+"</a></li>"},""):this.emptyLabel&&(i='<li><a class="dropdown-item" href="#">'+this.noResultsLabel+"</a></li>"),t.xtra&&(_.isArray(t.xtra)||(t.xtra=[t.xtra]),_.each(t.xtra,function(e){t.xtra=_.extend({title:"Ajouter",iconClass:"md-add-outline",eventName:"xtra"},t.xtra),i+='<li class="dropdown-divider"></li><li data-role="xtra" data-event="'+t.xtra.eventName+'"><a class="dropdown-item" href="#">'+t.xtra.title+'<span class="md-icon '+t.xtra.iconClass+'"></span></a></li>'})),i='<li><ul class="dropdown-control list-unstyled m-0">'+i+"</ul></li>",this.footer&&this.footer.length>0){t.activeFooter&&_.each(this.footer,function(e){e.isActive=e.id==t.activeFooter});var r=_.reduce(this.footer,function(e,t){return e+'<a class="dropdown-item '+(t.isActive?"active":"")+'" href="#" data-role="footer" data-footerid="'+t.id+'" title="'+t.label+'"><span class="md-icon '+t.icon+'"></span></a>'},'<li class="dropdown-divider"></li><li class="dropdown-footer d-flex">');r+="</li>",i+=r}this.getUI("drop").children("ul").html(i),this.getUI("drop").addClass("show"),this.getUI("drop").children(".dropdown-menu").addClass("show")},getActiveFooter:function(){return _.findWhere(this.footer,{isActive:!0})}});
},{"84":84,"undefined":undefined}],128:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");require(611);var InfiniteScrollBehavior=require(22),LoaderTpl=require(92),FilterBtnView=require(129),FilterSelectView=require(134),FilterSearchView=require(133),FilterInputView=require(131),FilterDropdownView=require(130),FilterIntervalView=require(132),filterCollection=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{id:null,title:"",type:"select",extraClassname:"",collectionPromise:null,canDelete:!1,value:null}})}),FiltersView=Marionette.CollectionView.extend({tagName:"span",childView:FilterSelectView,buildChildView:function(e,t,i){var n=_.extend({model:e},i);switch(e.get("type")){case"select":default:return new FilterSelectView(n);case"button":return new FilterBtnView(n);case"search":return new FilterSearchView(n);case"input":return new FilterInputView(n);case"dropdown":return new FilterDropdownView(n);case"interval":return new FilterIntervalView(n)}}}),NoChildrenView=Marionette.View.extend({template:_.template('<span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Il n\'y a encore rien à afficher</span>')}),ListView=Marionette.CollectionView.extend({className:function(){var e=this.getOption("extraListClassname")||"";return"post-content post-list "+e},emptyView:NoChildrenView,events:{sortupdate:"onSortUpdate"},initialize:function(e){this.mergeOptions(e),this.getOption("renderInterval")>0&&(this.renderInterval=setInterval(this.render.bind(this),this.getOption("renderInterval")))},onBeforeDestroy:function(){this.renderInterval&&clearInterval(this.renderInterval)},onRender:function(){var e=0,t={handle:".btn-drag",axis:"y"};this.getOption("fixRelativeDragNDrop")&&(t.start=function(t,i){e=1!=Backbone.$(this).data("sortableFirst")?Backbone.$("#content").scrollTop():0,Backbone.$(this).data("sortableFirst",!0)},t.sort=function(t,i){e>0&&i.helper.css({top:i.position.top-e+"px"})},t.change=function(t,i){e=0}),Backbone.$(this.el).sortable(t)},onAddChild:function(e,t){t.model&&t.$el.attr("data-id",t.model.id)},onSortUpdate:function(e,t){var i=t.item,n=i.parent().children().index(i),l=this.collection.get(i.data("id")),o=this.children.findByModel(l),s={};return 0==n?s.before_id=i.next().data("id"):s.after_id=i.prev().data("id"),o.triggerMethod("sort:change",s),this.triggerMethod("sort:change",s),!0}});module.exports=Marionette.View.extend({template:require(85),regions:{list:{el:"div[data-role='list']",replaceElement:!0},detail:{el:"div[data-role='detail']",replaceElement:!0},filters:{el:"span[data-role='filters']",replaceElement:!0},xtra:{el:"span[data-role='xtra']",replaceElement:!0},"new":{el:"div[data-role='new']",replaceElement:!0}},title:"Liste",filters:[],xtra:[],selection:[],lock:!1,newRowView:null,behaviors:[InfiniteScrollBehavior],scrollThreshold:null,scrollContentEl:null,ui:{loading:"div[data-role='loading']",select:"#selection_all",action:'[data-role="action"]',"action-main":'[data-role="bulk-action"]',"row-select":'input[name="selection"]',"select-all":'[data-role="select-all"]',counter:'[data-role="counter"]',quota:'[data-role="quota"]'},events:{"click @ui.select":"selectAll","click @ui.action":"onAction","hidden.bs.dropdown .btn-group":"onHiddenDropDown","click @ui.row-select":"selectRow"},initialize:function(e){this.mergeOptions(e,["rowView","newRowView"]),this.listenTo(this.getOption("collection"),"request",this.onCollectionRequest),this.listenTo(this.getOption("collection"),"sync",this.onCollectionSync),this.listenTo(this.getOption("collection"),"sync update",this.selectRow),this.listenTo(this.getOption("collection"),"add remove",this.onCollectionCount)},templateContext:function(){return{title:this.getOption("title"),selection:this.getOption("selection"),extraClassname:this.getOption("extraClassname")}},getChildren:function(){return this.getChildView("list").children},showFilter:function(e){var t=this.getChildView("filters");if(t){var i=t.collection.get("add");i&&this.triggerMethod("filter:change",{model:i,value:e})}},setCounterText:function(e){this.getUI("counter").text(e)},onRender:function(){var e=_.extend({proxy:this},this.getOption("childViewOptions"));if(this.showChildView("list",new ListView({collection:this.getOption("collection"),childView:this.rowView,childViewOptions:e,extraListClassname:this.getOption("extraListClassname"),renderInterval:this.getOption("renderInterval")||null,fixRelativeDragNDrop:this.getOption("fixRelativeDragNDrop")||!1})),this.getOption("filters").length>0&&this.showChildView("filters",new FiltersView({collection:new filterCollection(this.getOption("filters")),childViewOptions:{proxy:this}})),this.getOption("xtra").length>0&&this.showChildView("xtra",new FiltersView({collection:new filterCollection(this.getOption("xtra")),childViewOptions:{proxy:this}})),null!==this.newRowView){var t=_.extend({proxy:this,collection:this.getOption("collection")},this.getOption("childViewOptions"));this.showChildView("new",new this.newRowView(t))}this.getOption("detailView")&&this.showChildView("detail",this.getOption("detailView"))},onCollectionRequest:function(e,t,i){e.models&&this.getUI("loading").show()},onCollectionSync:function(e){this.getUI("loading").hide(),this.onCollectionCount()},onCollectionCount:function(e){if(this.getOption("enableQuota")&&this.collection.getQuota())if(this.getUI("quota").text(this.collection.length+" / "+this.collection.getQuota()),0===this.collection.getQuota())this.getUI("quota").removeClass("text-danger").removeClass("text-warning");else{var t=this.collection.length/this.collection.getQuota();t<.75?this.getUI("quota").removeClass("text-danger").removeClass("text-warning"):t<.9?this.getUI("quota").removeClass("text-danger").addClass("text-warning"):this.getUI("quota").addClass("text-danger").removeClass("text-warning")}},addChildView:function(e,t){return this.getChildView("list").addChildView(e,t)},selectRow:function(){var e=Backbone.$('input[name="selection"]:checked',this.el).length,t=Backbone.$('input[name="selection"]',this.el).length;e>0?(this.getUI("action-main").parent().parent().removeClass("d-none"),this.getUI("select-all").addClass("d-none"),this.setCounterText(" : "+e+(e>1?" sélectionnés":" sélectionné"))):(this.getUI("action-main").parent().parent().addClass("d-none"),this.getUI("select-all").removeClass("d-none"),this.setCounterText("")),0==t||0==e?(this.getUI("select").prop("checked",!1),this.getUI("select").removeClass("partiel")):t==e?(this.getUI("select").prop("checked",!0),this.getUI("select").removeClass("partiel")):(this.getUI("select").prop("checked",!1),this.getUI("select").addClass("partiel"))},selectAll:function(e){Backbone.$('input[name="selection"]',this.el).prop("checked",e.currentTarget.checked).change(),this.selectRow()},onAction:function(e){var t=Backbone.$(e.currentTarget),i=t.data("id");if(!(i>=this.getOption("selection").length)&&this.getOption("selection")[i]&&this.getOption("selection")[i].callback){var n=this.getOption("selection")[i];if(n.confirm&&!t.parent().hasClass("confirm-warning"))return t.parent().addClass("confirm-warning"),t.data("title",t.text()),t.text("Êtes-vous sûr ?"),e.preventDefault(),!1;var l=Backbone.$('input[name="selection"]:checked',this.getChildView("list").el).map(function(e,t){return t.value});if(!this.lock){if(this.lock=!0,0==l.length)return void(this.lock=!1);var o=n.callback(l);if(!o)return n.confirm&&(t.parent().removeClass("confirm-warning"),t.text(t.data("title"))),void(this.lock=!1);var s=this.getUI("action-main").find("span:first-of-type");s.data("title",s.text()),s.addClass("btn-load btn-load-inverse"),s.html(LoaderTpl()),o.then(function(){this.lock=!1,n.confirm&&(t.parent().removeClass("confirm-warning"),t.text(t.data("title"))),s.text(s.data("title")),s.removeClass("btn-load btn-load-inverse"),this.selectRow()}.bind(this))}}},onHiddenDropDown:function(e){Backbone.$(".dropdown-menu a",e.currentTarget).each(function(e,t){t=Backbone.$(t),t.parent().hasClass("confirm-warning")&&(t.text(t.data("title")),t.parent().removeClass("confirm-warning"))})},onChildviewSortChange:function(e){e.list=[],this.getChildView("list").$el.children().each(function(t,i){e.list.push(Backbone.$(i).data("id"))}),this.triggerMethod("sort:change",e)}});
},{"129":129,"130":130,"131":131,"132":132,"133":133,"134":134,"22":22,"611":611,"85":85,"92":92,"undefined":undefined}],129:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606);module.exports=Marionette.View.extend({template:require(86),className:"btn-group",ui:{dropdown:'[data-toggle="dropdown"]'},events:{"click button":"onButtonChange","click li a":"onSelectChange"},oClassname:"",initialize:function(e){return this.mergeOptions(e,["model","proxy"]),this.model.get("collectionPromise")?void(this.model.get("collectionPromise").then?this.model.get("collectionPromise").done(function(e){this.setCollection(e),this.render()}.bind(this)):this.setCollection(this.model.get("collectionPromise"))):void this.setCollection(new CollectionUtils.SelectCollection)},setCollection:function(e){this.collection=e,this.listenTo(this.collection,"update",this.render),this.listenTo(this.collection,"reset",this.render)},activeItem:function(e){this.collection.each(function(t){t.set("selected",t.get("value")==e)}),this.collection.trigger("update")},overrideExtraClassname:function(e){this.oClassname=e},templateContext:function(){return{extraClassname:this.oClassname?this.oClassname:this.model.get("extraClassname"),collection:this.collection.toJSON()}},toggleDropdown:function(){this.getUI("dropdown").dropdown("toggle")},onRender:function(){this.getUI("dropdown").dropdown()},onButtonChange:function(e){return this.proxy.triggerMethod("filter:change",{model:this.model,value:null,view:this}),e.stopPropagation(),e.preventDefault(),!1},onSelectChange:function(e){var t=Backbone.$(e.currentTarget,this.el);t.parent().hasClass("active")||this.proxy.triggerMethod("filter:change",{model:this.model,value:t.data("value"),view:this})}});
},{"606":606,"86":86,"undefined":undefined}],130:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(87),className:"btn-group",ui:{li:"li a",label:'[data-role="label"]',feedback:'[data-role="feedback"]'},events:{"click li a":"onSelect","click @ui.feedback":function(){this.model.get("canDelete")&&(this.proxy.triggerMethod("filter:change",{model:this.model,value:null,view:this}),this.model.collection.remove(this.model))}},initialize:function(e){this.mergeOptions(e,["model","proxy"]),this.collection=null,this.model.get("collectionPromise")&&(this.model.get("collectionPromise").then?this.model.get("collectionPromise").done(function(e){this.collection=e,this.render()}.bind(this)):this.collection=this.model.get("collectionPromise"))},templateContext:function(){var e=this.collection?this.collection.find({selected:!0}):null;return{title:e?e.get("label"):this.model.get("title"),extraClassname:this.model.get("extraClassname")?this.model.get("extraClassname"):"",collection:this.collection?this.collection.toJSON():null}},onSelect:function(e){var t=Backbone.$(e.currentTarget,this.el).data("index");t>=this.collection.length||(this.model.get("disableLabelUpdate")||this.getUI("label").text(this.collection.at(t).get("label")),this.proxy.triggerMethod("filter:change",{index:t,model:this.model,value:this.collection.at(t).get("value"),view:this}))}});
},{"87":87,"undefined":undefined}],131:[function(require,module,exports){
var Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.View.extend({template:require(88),className:"btn-group has-feedback",ui:{term:'input[name="term"]',feedback:'[data-role="feedback"]'},currentTerm:"",events:{"keyup @ui.term":_.debounce(function(e){var t=this.getUI("term").val();t!=this.currentTerm&&(this.currentTerm=t,this.onInputChange(t))},300),"click @ui.feedback":function(){this.model.get("canDelete")&&(this.proxy.triggerMethod("filter:change",{model:this.model,value:null,view:this}),this.model.collection.remove(this.model))}},initialize:function(e){this.mergeOptions(e,["model","proxy"]),this.currentTerm=this.model.get("value")?this.model.get("value"):""},templateContext:function(){var e=this.model.get("canDelete")?"md-cancel":"md-search";return{extraClassname:this.model.get("extraClassname")?this.model.get("extraClassname"):e,prependText:this.model.get("prependText")?this.model.get("prependText"):""}},onInputChange:function(e){this.proxy.triggerMethod("filter:change",{model:this.model,value:e,view:this})}});
},{"88":88,"undefined":undefined}],132:[function(require,module,exports){
var Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607);module.exports=Marionette.View.extend({template:require(89),className:"btn-group",ui:{term:"input",feedback:'[data-role="feedback"]'},currentTerm:"",events:{"keyup @ui.term":_.debounce(function(e){this.onInputChange(e)},300),"click @ui.feedback":function(){this.model.get("canDelete")&&(this.proxy.triggerMethod("filter:change",{model:this.model,value:null,view:this}),this.model.collection.remove(this.model))},"dp.change @ui.term":"onInputChange"},min:"",max:"",initialize:function(e){this.mergeOptions(e,["model","proxy"]),this.min="",this.max="",this.model.get("value")&&(this.min=format.formatDate(this.model.get("value")[0]),this.max=format.formatDate(this.model.get("value")[1]),this.model.set("value",[this.min,this.max]))},templateContext:function(){var e=this.model.get("canDelete")?"md-cancel":"md-search";return{extraClassname:this.model.get("extraClassname")?this.model.get("extraClassname"):e,prependText:this.model.get("prependText")?this.model.get("prependText"):["",""]}},onRender:function(){if(this.model.get("enableDatepicker")){var e={format:"date"==this.model.get("enableDatepicker")?"DD/MM/YYYY":"DD/MM/YYYY HH:mm:ss",showTodayButton:!0,widgetPositioning:{horizontal:"auto",vertical:"bottom"},icons:{time:"md-icon md-time",date:"md-icon md-date",up:"md-icon md-up",down:"md-icon md-down",previous:"md-icon md-previous",next:"md-icon md-next",today:"md-icon md-fixed",clear:"md-icon md-delete",close:"md-icon md-close"},tooltips:{today:"Aujourd'hui",clear:"Recommencer",close:"Fermer",selectMonth:"Choisir un mois",prevMonth:"Mois précédent",nextMonth:"Mois suivant",selectYear:"Choisir une année",prevYear:"Année précédente",nextYear:"Année suivante",selectDecade:"Choisir une décennie",prevDecade:"Décennie précédente",nextDecade:"Décennie suivante",prevCentury:"Siècle précédent",nextCentury:"Siècle suivant",incrementHour:"Heure suivante",pickHour:"Choisir une heure",decrementHour:"Heure précédente",incrementMinute:"Minute suivante",pickMinute:"Choisir une minute",decrementMinute:"Minute précédente",incrementSecond:"Seconde précédente",pickSecond:"Choisir une seconde",decrementSecond:"Seconde suivante",togglePeriod:"Changer de période",selectTime:"Choisir l'heure"}};this.getUI("term").datetimepicker(e)}},onInputChange:function(e){if("min"==e.currentTarget.name){if(this.min==e.currentTarget.value)return;this.min=e.currentTarget.value}else if("max"==e.currentTarget.name){if(this.max==e.currentTarget.value)return;this.max=e.currentTarget.value}this.proxy.triggerMethod("filter:change",{model:this.model,value:[this.min,this.max],view:this})},onBeforeDestroy:function(){this.model.get("enableDatepicker")&&this.getUI("term").data("DateTimePicker").destroy()}});
},{"607":607,"89":89,"undefined":undefined}],133:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.View.extend({template:require(90),tagName:"div",className:"btn-group dropdown",ui:{label:'span[data-role="label"]',li:'li[data-role="selection"]',feedback:'span[data-role="feedback"]',input:'input[data-role="input"]',"dropdown-menu":".dropdown-menu",toggle:".dropdown-toggle"},events:{"shown.bs.dropdown":function(e){this.getUI("input").focus(),this.triggerInput()},"click @ui.li":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||t>this.suggestions.length||(this.setCurrent(this.suggestions[t]),this.proxy.triggerMethod("filter:change",{model:this.model,value:this.current.value,view:this}))},"keyup @ui.input":_.debounce(function(){this.triggerInput()},300),"click @ui.feedback":function(e){if(this.model.get("canDelete"))return this.proxy.triggerMethod("filter:change",{model:this.model,value:null,view:this}),void this.model.collection.remove(this.model);if(null!=this.current.value)return e.preventDefault(),this.setCurrent({label:this.model.get("title"),value:null}),this.proxy.triggerMethod("filter:change",{model:this.model,value:null,view:this}),!1}},term:null,current:{label:"",value:null},suggestions:null,searchPlaceholder:"Rechercher",initialize:function(e){this.term=null,this.mergeOptions(e,["model","proxy"]),this.current={label:this.model.get("title"),value:null}},templateContext:function(){return{term:this.term,searchPlaceholder:this.searchPlaceholder,current:this.current}},triggerInput:function(){this.getUI("input").val()!==this.term&&(this.term=this.getUI("input").val(),this.proxy.triggerMethod("filter:input",{model:this.model,value:this.term,view:this}))},setCurrent:function(e){this.current=e,this.getUI("label").text(e.label||""),null==this.current.value?(this.getUI("feedback").removeClass("md-cancel"),this.getUI("toggle").removeClass("reset-toogle")):(this.getUI("feedback").addClass("md-cancel"),this.getUI("toggle").addClass("reset-toogle"))},showResults:function(e,t){this.suggestions=e;var i="";i=e.length>0?_.reduce(e,function(e,t,i){return e+'<li data-role="selection" data-index="'+i+'"><a class="dropdown-item" href="#">'+t.label+"</a></li>"},'<li class="dropdown-divider"></li>'):'<li class="dropdown-divider"></li><li><span class="dropdown-item dropdown-item-empty"><span class="md-icon md-no-result"></span> Aucun résultat</span></li>',this.emptyList(this.getUI("dropdown-menu")).append(i),this.getUI("input").focus()},emptyList:function(e){var t=e.children().eq(0).detach();return e.empty().append(t)}});
},{"90":90,"undefined":undefined}],134:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectifyBehavior=require(26);module.exports=Marionette.View.extend({template:require(91),className:"btn-group",behaviors:[SelectifyBehavior],events:{"change select":"onSelectChange"},collection:null,initialize:function(e){this.mergeOptions(e,["model","proxy"]),this.collection=null,this.model.get("collectionPromise")&&(this.model.get("collectionPromise").then?this.model.get("collectionPromise").done(function(e){this.collection=e,this.render()}.bind(this)):this.collection=this.model.get("collectionPromise"))},templateContext:function(){return{collection:this.collection?this.collection.toJSON():null,indent2Space:function(e){if(0==e)return"";for(var t="",i=0;i<e;i++)t+="&nbsp;&nbsp;";return t}}},onSelectChange:function(e){var t=Backbone.$(e.currentTarget,this.el);this.proxy.triggerMethod("filter:change",{index:this.model.collection.indexOf(this.model),model:this.model,value:t.val(),view:this})}});
},{"26":26,"91":91,"undefined":undefined}],135:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.Object.extend({openNodes:[],initialize:function(e){this.mergeOptions(e,["nodeInfo","expandByDefault"]),this.openNodes=[]},nodeInfo:function(e){return{url:"#",name:"Node "+e.cid,is_active:!1,extraClassname:""}},openNode:function(e){_.indexOf(this.openNodes,e)==-1&&this.openNodes.push(e)},closeNode:function(e){_.indexOf(this.openNodes,e)>=0&&(this.openNodes=_.without(this.openNodes,e))},isNodeOpen:function(e){return this.getOption("expandByDefault")||_.indexOf(this.openNodes,e)>=0},render:function(e){if(!e)return"";var n="",i=!1;if(_.each(e.childs,function(e){var t=null,s="",a="",o=!1,d=this.nodeInfo(e.model),l=e.model.get(e.model.idAttribute);e.childs.length>0&&(t=this.render(e),o=t.has_active_child||this.isNodeOpen(l),s+=o?"menu-expand-less":"menu-expand-more",a='data-toggle="collapse" href="#menutree'+l+'" data-id="'+l+'" aria-expanded="'+(o?"true":"false")+'" aria-controls="menutree'+l+'"',o&&this.openNode(l)),d.extraClassname&&(s+=" "+d.extraClassname),d.is_active&&(s+=" active"),(d.is_active||o)&&(i=!0),n+='<li class="nav-item '+s+'"><span class="md-icon menu-expand" '+a+'></span><a href="'+d.url+'" title="'+_.escape(d.name)+'" class="nav-link"><span class="md-icon"></span>'+_.escape(d.name)+"</a></li>",t&&(n+=t.html)}.bind(this)),e.model){var t="menutree"+e.model.get(e.model.idAttribute),s=i||this.isNodeOpen(e.model.get(e.model.idAttribute))?"collapse show":"collapse";n='<div class="menu-tree '+s+'" id="'+t+'"><ul class="nav nav-sidebar flex-column">'+n+"</ul></div>"}else n='<div class="menu-tree"><ul class="nav nav-sidebar flex-column">'+n+"</ul></div>";return{html:n,has_active_child:i}}});
},{"undefined":undefined}],136:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),menuTree=require(135);module.exports=Marionette.View.extend({template:_.template("<%= menu %>"),events:{"show.bs.collapse":function(e){const n=Backbone.$('[href="#'+e.target.id+'"]',this.el);n.parent().removeClass("menu-expand-more").addClass("menu-expand-less"),this.menuTree.openNode(n.data("id"))},"hide.bs.collapse":function(e){const n=Backbone.$('[href="#'+e.target.id+'"]',this.el);n.parent().removeClass("menu-expand-less").addClass("menu-expand-more"),this.menuTree.closeNode(n.data("id"))},"click a":function(e){var n=Backbone.$(e.currentTarget);return"#"==n.attr("href")?void n.parent().find(".menu-expand").trigger("click"):(Backbone.$("a",this.el).parent().removeClass("active"),void n.parent().addClass("active"))}},menuTree:null,rootNode:null,initialize:function(e){this.menuTree=new menuTree(e)},templateContext:function(){return{menu:this.menuTree.render(this.rootNode).html}},setTree:function(e){this.rootNode=e,this.render()}});
},{"135":135,"undefined":undefined}],137:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(93),tagName:"div",className:"overlay fade",ui:{modal:".modal",closeBtn:'button[data-role="close"]',actionBtn:'button[data-role="action"]'},events:{"click @ui.closeBtn":"close","click @ui.actionBtn":"onAction",mousedown:function(t){t.target!=this.el&&t.target.parentNode!=this.el||this.close(!0)}},regions:{content:"div.modal-body"},title:"Mon titre",modalClass:"",action:null,templateContext:function(){return{title:this.getOption("title"),modalClass:this.getOption("modalClass"),modalDialogClass:this.getOption("modalDialogClass"),modalBodyClass:this.getOption("modalBodyClass"),action:this.getOption("action"),tabs:this.getOption("tabs")}},initialize:function(t){this.mergeOptions(t),this.keyListener=Backbone.Radio.channel("app").request("ctx:keyListener")},onAttach:function(){this.keyListener.register_combo({keys:"esc",is_exclusive:!0,on_keydown:this.close,"this":this})},onRender:function(){this.getUI("modal").css("display","block"),setTimeout(function(){this.$el.addClass("show")}.bind(this),10),setTimeout(function(){this.getUI("modal").addClass("show")}.bind(this),150)},onDestroy:function(){this.keyListener.unregister_combo("esc")},close:function(t){return t?(this.$el.removeClass("show"),this.getUI("modal").removeClass("show"),void setTimeout(function(){this.destroy()}.bind(this),300)):void this.destroy()},onAction:function(){var t=this.getChildView("content");t&&t.triggerMethod("action:modal",t)},onChildviewCloseModal:function(t){this.close(t)}});
},{"93":93,"undefined":undefined}],138:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),Marionette=require("backbone.marionette"),BasicVue=Marionette.View.extend({template:require(94),templateContext:function(){return{title:this.model.getTitle(),url:this.model.getURL(),code:this.model.getCode(),icon:this.mapIcon(this.model.get("type"))}},mapIcon:function(e){switch(e){default:return null;case 1:return"md-activity-checkout";case 2:return"md-activity-comment";case 3:return"md-activity-evaluation";case 4:return"md-activity-form"}},initialize:function(e){this.mergeOptions(e,["model"])},onAttach:function(){Backbone.$(".toast",this.$el).toast("show")}});module.exports=Marionette.CollectionView.extend({tagName:"div",childView:BasicVue});
},{"94":94,"undefined":undefined}],139:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),CollectionUtils=require(606),SelectifyBehavior=require(26);module.exports=Marionette.View.extend({template:_.template('<select data-style="selectify" name="<%- name %>" data-direction="<%- direction %>"><% if(emptyLabel) { %><option value=""><%- emptyLabel %></option><% } %><% _(options).each(function(item){ %><% if (item.is_group) { %><optgroup data-indent="<%= item.indent %>" label="<%- item.label %>"></optgroup><% } else { %><option data-indent="<%= item.indent %>" value="<%- item.value %>" <%= (item.selected || item.value == selected) ? \'selected="selected"\' : "" %>><%- item.label %></option><% } %><% }) %></select>'),tagName:"div",className:"",extraClassName:"",behaviors:[SelectifyBehavior],ui:{select:"select"},direction:"down",selected:null,name:"",emptyLabel:"",initialize:function(e){this.mergeOptions(e,["selected","name","direction"]),this.getOption("extraClassName")&&this.$el.addClass(this.getOption("extraClassName")),this.collection=new CollectionUtils.SelectCollection,this.getOption("collectionPromise")?this.loadCollection(this.getOption("collectionPromise")):this.getOption("collection")&&this.getOption("collection").selectPayload&&(this.getOption("collection").length>0?this.loadPayload():this.listenTo(this.getOption("collection"),"sync",this.loadPayload))},loadPayload:function(){this.collection.set(this.getOption("collection").selectPayload(),{reset:!0}),this.trigger("load",this.selected),this.render()},loadCollection:function(e){e.done(function(e){this.collection.set(e.toJSON(),{reset:!0});var t=this.collection.findWhere({selected:!0});t&&(this.selected=t.get("value")),this.trigger("load",this.selected),this.render()}.bind(this))},onSelect:function(e){this.selected=Backbone.$(e.currentTarget).val(),this.triggerMethod("change",this.selected,this.getOption("name"))},onRender:function(){this.getUI("select").on("change",this.onSelect.bind(this)),null!=this.selected||this.getOption("emptyLabel")||this.collection.length&&(this.selected=this.collection.at(0).get("value"))},templateContext:function(){return{name:this.getOption("name"),direction:this.direction,selected:this.selected,emptyLabel:this.getOption("emptyLabel"),options:this.collection.toJSON()}},onBeforeDestroy:function(){this.getUI("select").off("change")}});
},{"26":26,"606":606,"undefined":undefined}],140:[function(require,module,exports){
function emptyList(e){var t=e.children().eq(0).detach();return e.empty().append(t)}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SaveBehavior=require(24);module.exports=Marionette.View.extend({template:require(95),tagName:"div",className:"dropdown",behaviors:[SaveBehavior],ui:{label:'span[data-role="label"]',li:'li[data-role="selection"]',lixtra:'li[data-role="xtra"]',clear:'span[data-role="clear"]',input:'input[data-role="input"]',"dropdown-menu":".dropdown-menu",toggle:".dropdown-toggle"},events:{"shown.bs.dropdown":function(e){this.getUI("input").focus(),this.triggerInput()},"click @ui.li":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||t>this.suggestions.length||(this.setCurrent(this.suggestions[t]),this.triggerMethod(this.eventName("change"),this.suggestions[t],this),this.triggerMethod("field:change"))},"click @ui.lixtra":function(e){var t=Backbone.$(e.currentTarget).data("event");this.triggerMethod(this.eventName(t),this.term,this)},"keyup @ui.input":_.debounce(function(){this.triggerInput()},300),"click @ui.clear":function(e){if(!this.isMandatory&&null!=this.current.value)return e.preventDefault(),this.setCurrent({label:"",value:null}),this.triggerMethod(this.eventName("change"),this.current,this),this.triggerMethod("field:change"),!1}},term:null,current:{label:"",value:null},suggestions:null,isMandatory:!0,searchPlaceholder:"Rechercher",evtSuffix:null,eventName:function(e){return this.evtSuffix?e+":"+this.evtSuffix:e},initialize:function(e){this.mergeOptions(e,["current","searchPlaceholder","evtSuffix","isMandatory"]),this.term=null},templateContext:function(){return{id:this.cid,term:this.term,searchPlaceholder:this.searchPlaceholder,current:this.current,isMandatory:this.isMandatory}},triggerInput:function(){this.getUI("input").val()!==this.term&&(this.term=this.getUI("input").val(),this.triggerMethod(this.eventName("input"),this.term,this))},getCurrent:function(){return this.current},clear:function(){this.term="",this.setCurrent({label:"",value:null}),this.suggestions=[],this.render()},setCurrent:function(e){this.current=e,this.getUI("label").text(e.label||""),this.isMandatory||(null==this.current.value?(this.getUI("clear").removeClass("md-cancel"),this.getUI("toggle").removeClass("reset-toogle")):(this.getUI("clear").addClass("md-cancel"),this.getUI("toggle").addClass("reset-toogle")))},showResults:function(e,t){this.suggestions=e;var i="";i=e.length>0?_.reduce(e,function(e,t,i){return e+'<li data-role="selection" data-index="'+i+'"><a class="dropdown-item" href="#">'+_.escape(t.label)+"</a></li>"},'<li class="dropdown-divider"></li>'):'<li class="dropdown-divider"></li><li><span class="dropdown-item dropdown-item-empty"><span class="md-icon md-no-result"></span> Aucun résultat</span></li>',t&&(_.isArray(t)||(t=[t]),_.each(t,function(e){e=_.extend({title:"Ajouter",iconClass:"md-add-outline",eventName:"xtra"},e),i+='<li class="dropdown-divider"></li><li data-role="xtra" data-event="'+e.eventName+'"><a class="dropdown-item" href="#">'+_.escape(e.title)+'<span class="md-icon '+e.iconClass+'"></span></a></li>'})),emptyList(this.getUI("dropdown-menu")).append(i),this.getUI("input").focus()}});
},{"24":24,"95":95,"undefined":undefined}],141:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_string=require("underscore.string"),_=require("underscore"),moment=require("moment"),format=require(607),CharCountBehavior=require(19),Session=Backbone.Radio.channel("app").request("ctx:session"),Contact=require(549),Theme=require(562),PreviewRender=Marionette.Object.extend({matchingReg:null,parseFilters:{left:function(e,t){return e.substring(0,t[0]&&t[0]<=e.length?t[0]:e.length)},ucfirst:function(e){return _string.capitalize(e)},strtoupper:function(e){return e.toUpperCase()},strtolower:function(e){return e.toLowerCase()},rawurlencode:function(e){return encodeURIComponent(e)},htmlentities:function(e,t){return _string.escapeHTML(e)},escapejs:function(e){return _string.quote(e)},stripText:function(e,t){return _string.truncate(_string.stripTags(e),t[0]||0,"...")},mot:function(e,t){e=e.split(/[\s,.;?!:]+/);var i=t[0]?t[0]-1:0;return i>e.length-1?i=e.length-1:i<0&&(i=0),e[i]},mapValue:function(e,t){var i=t[0]||"",n=t[1]||"";return 1===e||"1"===e||"actif"==e||"selected"==e||"checked"==e||"erreur"==e?i:n},sanitize:function(e){return e.length>120?e:e=_string.cleanDiacritics(e).toLowerCase().replace(/[^a-zA-Z0-9_\.\/]/g,"-").replace(/[_-]+$/g,"-").replace(/-+/g,"-")},alternate:function(e,t){var i=t[0]||2;return e=i>1&&i<=12?(parseInt(e)-1)%parseInt(i)+1:""},formatFloat:function(e,t){var i=t[0]||2;return i=Math.min(10,Math.max(0,i)),e=e.length<=10?format.formatFloat(e,i," "):""},empty:function(e,t){var i=t[0]||"",n=t[1]||"";return""===e||null===e?i:n},slice:function(e,t){var i=t[0]||"-";e=e.split(i);var n=e.length,s=parseInt(t[1])||0;s>n&&(s=n),s<-n&&(s=-n);var a=s+(parseInt(t[2])||n);return a>n&&(a=n),s<0&&(a=void 0),e=e.slice(s,a),e.join(i)}},initialize:function(e){this.mergeOptions(e,["slug","link","name"]),this.matchingReg=/{([a-zA-Z0-9_]+)\.?([a-zA-Z0-9_]+)?\|?([a-zA-Z0-9_|-]+)?}/g},render:function(e){var t=Backbone.Radio.channel("app").request("ctx:session"),i=t.cache.get("preview.values");return null===i?this.fetch().done(function(e){t.cache.set("preview.values",e)}).then(function(t){return this.parse(e,t)}.bind(this)):Backbone.$.Deferred().resolve(this.parse(e,i))},fetch:function(){var e=Backbone.Radio.channel("app").request("ctx:session"),t=new Contact,i=new Theme;return Backbone.$.when(t.fetch(),i.fetch()).then(function(){var n=moment();return{racine:"/",lg:"fr",baseLangue:"/",lien_pagecourante:"",intitule_pagecourante:"",optim_pagecourante:"",canonical:"",accroche_site:i.get("site_excerpt"),desc_site:i.get("site_description"),logo_site:i.get("logo_media_id"),url_logo_site:"/media/"+i.get("logo_media_id"),domaine:e.site.get("domain"),schema:"https://"===e.site.get("domain").substr(0,7)?"https":"http",liste_domaines:e.site.get("domain"),site_nom:e.site.get("name"),SOCIETE:{contact_nom:t.get("lastname"),contact_prenom:t.get("firstname"),contact_email:t.get("email"),societe_nom:t.get("company_name"),societe_adresse:t.get("company_address"),societe_cp:t.get("company_zipcode"),societe_ville:t.get("company_city"),societe_pays:t.get("company_country"),societe_tel:t.get("phone"),societe_mobile:t.get("mobile"),societe_fax:t.get("fax"),societe_cnil:t.get("company_cnil"),societe_capital:t.get("company_capital"),societe_siret:t.get("company_siret"),societe_rcs:t.get("company_rcs"),societe_ape:t.get("company_naf"),societe_tva:t.get("company_tva"),societe_forme:t.get("company_forme"),site_nom:e.site.get("name")},num_jour_maintenant:n.date(),jour_semaine_maintenant:n.format("dddd"),num_mois_maintenant:n.month(),mois_maintenant:n.format("MMMM"),mois_abrev_maintenant:n.format("MMM"),annee_maintenant:n.year(),heure_maintenant:n.hour(),minute_maintenant:n.minute(),seconde_maintenant:n.second(),timestamp_maintenant:n.unix()}}.bind(this))},parse:function(e,t){return t.lien_pagecourante=this.link,t.intitule_pagecourante=this.name,t.optim_pagecourante=this.slug,t.canonical=this.link,t.intitule_pageparente="#page parente#",_.mapObject(e,function(e){return e.replace(this.matchingReg,function(e,i,n,s){var a;if(!t.hasOwnProperty(i))return e;if(n){if(!t[i].hasOwnProperty(n))return e;a=t[i][n]}else{if(!_.isString(t[i])&&!_.isNumber(t[i]))return e;a=t[i]}if(s){var r=s.split("|");if(0===r.length||!this.parseFilters.hasOwnProperty(r[0]))return e;var o=r.shift();a=this.parseFilters[o](a,r)}return a}.bind(this))}.bind(this))}}),PreviewView=Marionette.View.extend({template:_.template('<div class="post-group seo-layout"><h3><%- meta_title %></h3><p class="seo-breadcrumb mb-2"><%- slug_prefix %><%- slug %><%- slug_suffix %></p><p class="seo-desc mb-0"><%- meta_description %></p></div>'),initialize:function(e){this.mergeOptions(e,["model"]),this.listenTo(this.model,"change",this.render)},templateContext:function(){return{meta_title:_string.truncate(this.model.get("preview_meta_title"),70,"..."),meta_description:_string.truncate(this.model.get("preview_meta_description"),170,"...")}}});module.exports=Marionette.View.extend({template:require(96),tagName:"article",className:"post-article",behaviors:[CharCountBehavior],ui:{inputTitle:"input[name='meta_title']",inputDescription:"textarea[name='meta_description']"},events:{"keyup @ui.inputTitle":_.debounce(function(){this.onTitleUpdate()},300),"keyup @ui.inputDescription":_.debounce(function(){this.onDescUpdate()},300)},regions:{preview:{el:"div[data-role='preview']",replaceElement:!0}},slug_suffix:null,previewer:null,previewModel:null,initialize:function(e){this.slug_suffix=".html",this.mergeOptions(e,["model","slug_suffix"]),this.previewModel=new Backbone.Model,this.previewer=new PreviewRender({slug:this.model.has("slug")?this.model.get("slug"):"",link:Session.site.get("domain")+this.model.get("service_path")+"/"+(this.model.has("slug")?this.model.get("slug"):"")+(this.model.has("slug")?this.slug_suffix:""),name:this.model.get("name")||this.model.get("title")}),this.listenTo(this.model,"sync",this.render)},templateContext:function(){var e=this.getDefaultsMetas();return{slug_prefix:Session.site.get("domain")+this.model.get("service_path")+"/",slug_suffix:this.model.has("slug")?this.slug_suffix:"",slug_edit:this.model.has("slug"),slug:this.model.get("slug")?this.model.get("slug"):"",defaults_meta_title:e.meta_title,defaults_meta_description:e.meta_description,defaults_meta_keywords:this.model.get("defaults")?this.model.get("defaults").meta_keywords:"Contenu de la balise <meta keywords> qui remplacera celle définie par défaut",defaults_js_head:this.model.get("defaults")?this.model.get("defaults").js_head:"Code placé avant la balise </head> qui remplacera celui défini par défaut",defaults_js_body:this.model.get("defaults")?this.model.get("defaults").js_body:"Code placé avant la balise </body> qui remplacera celui défini par défaut"}},onRender:function(){var e=this.getDefaultsMetas();this.previewModel.set({preview_meta_title:this.model.get("meta_title")?this.model.get("meta_title"):e.meta_title,preview_meta_description:this.model.get("meta_description")?this.model.get("meta_description"):e.meta_description,slug_prefix:Session.site.get("domain")+this.model.get("service_path")+"/",slug:this.model.get("slug")?this.model.get("slug"):"",slug_suffix:this.model.has("slug")?this.slug_suffix:""}),this.showChildView("preview",new PreviewView({model:this.previewModel})),this.previewer.render({preview_meta_title:this.previewModel.get("preview_meta_title"),preview_meta_description:this.previewModel.get("preview_meta_description")}).done(function(e){this.previewModel.set(e)}.bind(this))},getDefaultsMetas:function(){return{meta_title:this.model.get("defaults")?this.model.get("defaults").meta_title:"Contenu de la balise <title> qui remplacera celle définie par défaut",meta_description:this.model.get("defaults")?this.model.get("defaults").meta_description:"Contenu de la balise <meta description> qui remplacera celle définie par défaut"}},onTitleUpdate:function(){this.previewer.render({preview_meta_title:this.getUI("inputTitle").val()?this.getUI("inputTitle").val():this.model.get("defaults").meta_title}).done(function(e){this.previewModel.set(e)}.bind(this))},onDescUpdate:function(){this.previewer.render({preview_meta_description:this.getUI("inputDescription").val()?this.getUI("inputDescription").val():this.model.get("defaults").meta_description}).done(function(e){this.previewModel.set(e)}.bind(this))}});
},{"19":19,"549":549,"562":562,"607":607,"96":96,"undefined":undefined}],142:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SaveBehavior=require(24),TagView=Marionette.View.extend({template:_.template('<span class="badge-content" title="<%- label %>"><%- label %></span><span data-role="delete" class="md-icon md-close"></span>'),className:"badge badge-primary badge-list",tagName:"span",ui:{deleteBtn:'span[data-role="delete"]'},events:{"click @ui.deleteBtn":function(){this.model.destroy()}}}),TagsView=Marionette.CollectionView.extend({className:"",childView:TagView});module.exports=Marionette.View.extend({template:require(97),tagName:"div",behaviors:[SaveBehavior],regions:{list:{el:'span[data-role="list"]',replaceElement:!0}},ui:{drop:".dropdown",sel:'.dropdown li[data-role="selection"]',lixtra:'.dropdown li[data-role="xtra"]',input:'input[data-role="input"]'},events:{"keyup @ui.input":_.debounce(function(e){this.triggerInput()},300),"mousedown @ui.input":function(e){this.triggerInput()},"click @ui.sel":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||t>this.suggestions.length||(this.collection.add(this.suggestions[t]),Backbone.$("input",this.el).val(""))},"click @ui.lixtra":function(e){var t=Backbone.$(e.currentTarget).data("event");this.triggerMethod(this.eventName(t),this.term,this)}},suggestions:null,term:null,searchPlaceholder:"Rechercher",inputName:"",evtSuffix:"",eventName:function(e){return this.evtSuffix?e+":"+this.evtSuffix:e},initialize:function(e){this.mergeOptions(e,["evtSuffix","searchPlaceholder","inputName"]),this.term=null,this.collection=new Backbone.Collection,this.collection.model=Backbone.Model.extend({idAttribute:"value",defaults:{label:"",value:null},isNew:function(){return!0}}),this.getOption("tags")&&this.collection.add(this.getOption("tags"),{silent:!0}),this.listenTo(this.collection,"update",function(){this.triggerMethod("field:change")}.bind(this))},templateContext:function(){return{searchPlaceholder:this.searchPlaceholder,inputName:this.inputName}},onRender:function(){this.showChildView("list",new TagsView({collection:this.collection}))},triggerInput:function(){this.getUI("input").val()!==this.term&&(this.term=this.getUI("input").val(),this.triggerMethod(this.eventName("input"),this.term,this))},showResults:function(e,t){this.suggestions=e;var i="";i=e.length>0?_.reduce(e,function(e,t,i){return e+'<li data-role="selection" data-index="'+i+'"><a class="dropdown-item" href="#">'+_.escape(t.label)+"</a></li>"},""):'<li><span class="dropdown-item dropdown-item-empty"><span class="md-icon md-no-result"></span> Aucun résultat</span></li>',t&&(_.isArray(t)||(t=[t]),_.each(t,function(e){e=_.extend({title:"Ajouter",iconClass:"md-add-outline",eventName:"xtra"},e),i+='<li class="dropdown-divider"></li><li data-role="xtra" data-event="'+e.eventName+'"><a class="dropdown-item" href="#">'+_.escape(e.title)+'<span class="md-icon '+e.iconClass+'"></span></a></li>'})),this.getUI("drop").children("ul").html(i),this.getUI("drop").addClass("show"),this.getUI("drop").children(".dropdown-menu").addClass("show")},addTag:function(e){this.collection.add(e),Backbone.$("input",this.el).val("")},getTags:function(){return this.collection.toJSON()},setTags:function(e){this.collection.set(e,{reset:!0}),Backbone.$("input",this.el).val("")},clearTags:function(){this.collection.reset(),Backbone.$("input",this.el).val("")}});
},{"24":24,"97":97,"undefined":undefined}],143:[function(require,module,exports){
module.exports={months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,a){switch(a){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}};
},{}],144:[function(require,module,exports){
tinyMCE.addI18n("fr_FR",{Cut:"Couper","Heading 5":"En-tête 5","Header 2":"Titre 2","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"Votre navigateur ne supporte pas la copie directe. Merci d'utiliser les touches Ctrl+X/C/V.","Heading 4":"En-tête 4",Div:"Div","Heading 2":"En-tête 2",Paste:"Coller",Close:"Fermer","Font Family":"Police",Pre:"Pre","Align right":"Aligner à droite","New document":"Nouveau document",Blockquote:"Citation","Numbered list":"Numérotation","Heading 1":"En-tête 1",Headings:"En-têtes","Increase indent":"Augmenter le retrait",Formats:"Formats",Headers:"Titres","Select all":"Tout sélectionner","Header 3":"Titre 3",Blocks:"Blocs",Undo:"Annuler",Strikethrough:"Barré","Bullet list":"Puces","Header 1":"Titre 1",Superscript:"Exposant","Clear formatting":"Effacer la mise en forme","Font Sizes":"Taille de police",Subscript:"Indice","Header 6":"Titre 6",Redo:"Rétablir",Paragraph:"Paragraphe",Ok:"Ok",Bold:"Gras",Code:"Code",Italic:"Italique","Align center":"Centrer","Header 5":"Titre 5","Heading 6":"En-tête 6","Heading 3":"En-tête 3","Decrease indent":"Diminuer le retrait","Header 4":"Titre 4","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":'Le presse-papiers est maintenant en mode "texte plein". Les contenus seront collés sans retenir les formatages jusqu\'à ce que vous désactiviez cette option.',Underline:"Souligné",Cancel:"Annuler",Justify:"Justifier",Inline:"En ligne",Copy:"Copier","Align left":"Aligner à gauche","Visual aids":"Aides visuelle","Lower Greek":"Grec minuscule",Square:"Carré",Default:"Par défaut","Lower Alpha":"Alpha minuscule",Circle:"Cercle",Disc:"Disque","Upper Alpha":"Alpha majuscule","Upper Roman":"Romain majuscule","Lower Roman":"Romain minuscule","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"L'Id doit commencer par une lettre suivi par des lettres, nombres, tirets, points, deux-points ou underscores",Name:"Nom",Anchor:"Ancre",Id:"Id","You have unsaved changes are you sure you want to navigate away?":"Vous avez des modifications non enregistrées, êtes-vous sûr de quitter la page?","Restore last draft":"Restaurer le dernier brouillon","Special character":"Caractères spéciaux","Source code":"Code source",Language:"Langue","Insert/Edit code sample":"Insérer / modifier une exemple de code",B:"B",R:"R",G:"V",Color:"Couleur","Right to left":"Droite à gauche","Left to right":"Gauche à droite",Emoticons:"Emoticônes",Robots:"Robots","Document properties":"Propriété du document",Title:"Titre",Keywords:"Mots-clés",Encoding:"Encodage",Description:"Description",Author:"Auteur",Fullscreen:"Plein écran","Horizontal line":"Ligne horizontale","Horizontal space":"Espacement horizontal","Insert/edit image":"Insérer/modifier une image",General:"Général",Advanced:"Avancé",Source:"Source",Border:"Bordure","Constrain proportions":"Conserver les proportions","Vertical space":"Espacement vertical","Image description":"Description de l'image",Style:"Style",Dimensions:"Dimensions","Insert image":"Insérer une image",Image:"Image","Zoom in":"Zoomer",Contrast:"Contraste",Back:"Retour",Gamma:"Gamma","Flip horizontally":"Retournement horizontal",Resize:"Redimensionner",Sharpen:"Affiner","Zoom out":"Dézoomer","Image options":"Options de l'image",Apply:"Appliquer",Brightness:"Luminosité","Rotate clockwise":"Rotation horaire","Rotate counterclockwise":"Rotation anti-horaire","Edit image":"Modifier l'image","Color levels":"Niveaux de couleur",Crop:"Rogner",Orientation:"Orientation","Flip vertically":"Retournement vertical",Invert:"Inverser","Date/time":"Date/heure","Insert date/time":"Insérer date/heure","Remove link":"Enlever le lien",Url:"Url","Text to display":"Texte à afficher",Anchors:"Ancres","Insert link":"Insérer un lien",Link:"Lien","New window":"Nouvelle fenêtre",None:"n/a","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"L'URL que vous avez entrée semble être un lien externe. Voulez-vous ajouter le préfixe http:// nécessaire?","Paste or type a link":"Coller ou taper un lien",Target:"Cible","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"L'URL que vous avez entrée semble être une adresse e-mail. Voulez-vous ajouter le préfixe mailto: nécessaire?","Insert/edit link":"Insérer/modifier un lien","Insert/edit video":"Insérer/modifier une vidéo",Media:"Média","Alternative source":"Source alternative","Paste your embed code below:":"Collez votre code d'intégration ci-dessous :","Insert video":"Insérer une vidéo",Poster:"Publier","Insert/edit media":"Insérer/modifier un média",Embed:"Intégrer","Nonbreaking space":"Espace insécable","Page break":"Saut de page","Paste as text":"Coller comme texte",Preview:"Prévisualiser",Print:"Imprimer",Save:"Enregistrer","Could not find the specified string.":"Impossible de trouver la chaîne spécifiée.",Replace:"Remplacer",Next:"Suiv","Whole words":"Mots entiers","Find and replace":"Trouver et remplacer","Replace with":"Remplacer par",Find:"Chercher","Replace all":"Tout remplacer","Match case":"Respecter la casse",Prev:"Préc ",Spellcheck:"Vérification orthographique",Finish:"Finie","Ignore all":"Tout ignorer",Ignore:"Ignorer","Add to Dictionary":"Ajouter au dictionnaire","Insert row before":"Insérer une ligne avant",Rows:"Lignes",Height:"Hauteur","Paste row after":"Coller la ligne après",Alignment:"Alignement","Border color":"Couleur de la bordure","Column group":"Groupe de colonnes",Row:"Ligne","Insert column before":"Insérer une colonne avant","Split cell":"Diviser la cellule","Cell padding":"Espacement interne cellule","Cell spacing":"Espacement inter-cellulles","Row type":"Type de ligne","Insert table":"Insérer un tableau",Body:"Corps",Caption:"Titre",Footer:"Pied","Delete row":"Effacer la ligne","Paste row before":"Coller la ligne avant",Scope:"Etendue","Delete table":"Supprimer le tableau","H Align":"Alignement H",Top:"Haut","Header cell":"Cellule d'en-tête",Column:"Colonne","Row group":"Groupe de lignes",Cell:"Cellule",Middle:"Milieu","Cell type":"Type de cellule","Copy row":"Copier la ligne","Row properties":"Propriétés de la ligne","Table properties":"Propriétés du tableau",Bottom:"Bas","V Align":"Alignement V",Header:"En-tête",Right:"Droite","Insert column after":"Insérer une colonne après",Cols:"Colonnes","Insert row after":"Insérer une ligne après",Width:"Largeur","Cell properties":"Propriétés de la cellule",Left:"Gauche","Cut row":"Couper la ligne","Delete column":"Effacer la colonne",Center:"Centré","Merge cells":"Fusionner les cellules","Insert template":"Ajouter un thème",Templates:"Thèmes","Background color":"Couleur d'arrière-plan","Custom...":"Personnalisé...","Custom color":"Couleur personnalisée","No color":"Aucune couleur","Text color":"Couleur du texte","Table of Contents":"Table des matières","Show blocks":"Afficher les blocs","Show invisible characters":"Afficher les caractères invisibles","Words: {0}":"Mots : {0}",Insert:"Insérer",File:"Fichier",Edit:"Editer","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"Zone Texte Riche. Appuyer sur ALT-F9 pour le menu. Appuyer sur ALT-F10 pour la barre d'outils. Appuyer sur ALT-0 pour de l'aide.",Tools:"Outils",View:"Voir",Table:"Tableau",Format:"Format"});
},{}],145:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore");module.exports=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/appearance/builder",idAttribute:"draft_id",defaults:{draft_id:null,layout_id:0,type:null,name:"",model:null,tree:null},describeZone:function(e){return _.find(this.get("model").zones,function(t){return t.id==e})},getWidgets:function(e){return Backbone.ajax({url:"sites/@site/appearance/widgets.json?page="+e}).then(function(e,t){return e})},getModels:function(){return Backbone.ajax({url:"sites/@site/appearance/models.json"}).then(function(e,t){return _.map(e,function(e){return{id:e.id,name:e.name,structure:e.structure}})})},addBloc:function(e,t){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/blocs.json",method:"POST",data:{nb_col:t,zone:e}}).then(function(e,t){return e})},removeBloc:function(e){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/blocs/"+e+".json",method:"DELETE"}).then(function(e,t){return null})},removeWidget:function(e){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets/"+e+".json",method:"DELETE"}).then(function(e,t){return null})},addWidget:function(e,t,n){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets.json",method:"POST",data:{widget:e,cell_id:t,position:n.position,sibling_id:n.sibling_id}}).then(function(e,t){return e})},moveWidget:function(e,t,n){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets/"+e+".json",method:"PUT",data:{cell_id:t,position:n.position,sibling_id:n.sibling_id}}).then(function(e,t){return e})},getWidget:function(e){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets/"+e+".json"}).then(function(e,t){return e})},setWidgetSettings:function(e,t,n){var i={};return _.each(n,function(e,n){if(t[n]&&t[n].type){switch(t[n].type){case 1:default:e=""+e;break;case 2:e="1"==e;break;case 3:e=""===e?null:parseInt(e);break;case 4:_.isArray(e)||(e=[e])}i[n]=e}}),Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets/"+e+".json",method:"PUT",data:{settings:i}}).then(function(e,t){return e})}});
},{"606":606,"undefined":undefined}],146:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore");module.exports=CollectionUtils.KiubiModel.extend({urlRoot:function(){return"sites/@site/appearance/layouts/"+this.get("page")},idAttribute:"layout_id",defaults:{layout_id:null,is_multi_layouts:!1,name:"",page:"",is_default:!1,service:"",page_title:"",usage_count:0,model:{}},getTypes:function(){return Backbone.ajax({url:"sites/@site/appearance/types.json"}).then(function(e){var t={};return _.each(e,function(e){t[e.service]||(t[e.service]=[]),t[e.service].push({name:e.name,page:e.page,is_multi_layouts:e.is_multi_layouts||!1})}),t})},getType:function(e){return Backbone.ajax({url:"sites/@site/appearance/types/"+e+".json"}).then(function(e){return{name:e.name,page:e.page,is_multi_layouts:e.is_multi_layouts||!1}})}});
},{"606":606,"undefined":undefined}],147:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone");module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/appearance/layouts",model:require(146)});
},{"146":146,"606":606,"undefined":undefined}],148:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var t=[{title:"Enregistrer",callback:"actionSave"}];return t}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Router=require(612),Controller=require(34),Builder=require(145),Layout=require(146),Layouts=require(147),LayoutsView=require(162),LayoutView=require(159),SidebarMenuLayoutView=require(161),SidebarMenuView=require(163),AppearanceController=Controller.extend({sidebarMenuService:"appearance",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Mises en page",href:"/appearance"}],showIndex:function(){this.navigationController.navigate("/appearance/layouts/cms-home")},showLayouts:function(e){var t=new Layout,a=new Layouts,i=this.failHandler("Type de mise en page introuvable");t.getType(e).then(function(t){a.fetch({data:{page:e}}).done(function(){var i=new LayoutsView({collection:a,page:e});this.navigationController.showContent(i),this.setHeader({title:t.name})}.bind(this)).fail(i)}.bind(this),i)},showLayout:function(e,t){function a(e){return[{title:e.get("type").name,href:"/appearance/layouts/"+e.get("type").page},{title:e.get("name")}]}var i=new Builder({layout_id:t,page:e});i.save().done(function(){var e=new LayoutView({model:i,layout_id:t});this.listenTo(e,"change:name",function(e){this.setBreadCrum(a(e),!0)}.bind(this)),this.navigationController.showContent(e),this.setHeader(a(i),getHeadersAction())}.bind(this)).fail(this.failHandler("Mise en page introuvable"))},showDraft:function(e,t){var a=this.parseQueryString(t,{apply:null}),i=new Builder({draft_id:e});i.fetch().done(function(){var e=new LayoutView({model:i,apply:a.apply});this.listenTo(e,"change:name",function(e){this.setBreadCrum([{title:i.get("type").name,href:"/appearance/layouts/"+i.get("type").page},{title:e.get("name")}],!0)}.bind(this)),this.navigationController.showContent(e),this.setHeader([{title:i.get("type").name,href:"/appearance/layouts/"+i.get("type").page},{title:i.get("name")}],getHeadersAction())}.bind(this)).fail(this.failHandler("Mise en page introuvable"))}});module.exports=Router.extend({controller:new AppearanceController,appRoutes:{appearance:"showIndex","appearance/layouts/:page":"showLayouts","appearance/layouts/:page/:id":"showLayout","appearance/drafts/:id":"showDraft"},onRoute:function(e){var t=Backbone.Radio.channel("app").request("ctx:session");if(!t.hasScope("site:layout"))return void this.controller.navigationController.navigate("/");switch(e){default:this.controller.sidebarMenuService="appearance",this.controller.sidebarMenu=SidebarMenuView;break;case"showLayout":case"showDraft":this.controller.sidebarMenuService="layout",this.controller.sidebarMenu=SidebarMenuLayoutView}this.controller.showSidebarMenu()}});
},{"145":145,"146":146,"147":147,"159":159,"161":161,"162":162,"163":163,"34":34,"612":612,"undefined":undefined}],149:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article post-article-empty text-center"><header class="post-header"><h1>Cette page n\'est pas disponible</h1></header><div class="post-content"><p class="lead">La page que vous cherchez à consulter n\'est pas adaptée à votre périphérique. <span class="md-icon md-mobile-off d-block mt-5"></span></p></div><footer class="post-footer"></footer></article><article class="post-article template-config"><div id="builder" class="post-content widgets">'+(null==(__t=structure)?"":__t)+'</div></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" data-role="cancel" class="btn btn-lg btn-primary btn-cancel">Annuler</button> <button type="button" data-role="save" class="btn btn-lg btn-success btn-save ml-auto">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],150:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="dropzone" data-role="bloc" data-bloc="'+(null==(__t=bloc.bloc_id)?"":_.escape(__t))+'"><a href="#" data-role="removeBloc" class="md-icon md-close float-right"></a><div class="row"> ',_.each(cells,function(l,e){__p+=' <div class="col-'+(null==(__t=sizes[e])?"":_.escape(__t))+' ui-sortable" data-cell="'+(null==(__t=l.cell_id)?"":_.escape(__t))+'">'+(null==(__t=l.content)?"":__t)+"</div> "}),__p+=" </div></div>";return __p};
},{"undefined":undefined}],151:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><form><div class="row"> ',_(widget.settings).each(function(l,e){switch(__p+=" ",l.ctl){case 1:__p+=' <div class="col-'+(null==(l.size&&"small"==l.size,__t="12")?"":__t)+'"><div class="form-group"><label for="field_'+(null==(__t=e)?"":_.escape(__t))+'">'+(null==(__t=l.label)?"":_.escape(__t))+'</label><input class="form-control" id="field_'+(null==(__t=e)?"":_.escape(__t))+'" name="'+(null==(__t=e)?"":_.escape(__t))+'" value="'+(null==(__t=l.value)?"":_.escape(__t))+'" placeholder="'+(null==(__t=l.desc)?"":_.escape(__t))+'"></div></div> ';break;case 2:__p+=' <div class="col-12"><div class="form-group"><label for="field_'+(null==(__t=e)?"":_.escape(__t))+'">'+(null==(__t=l.label)?"":_.escape(__t))+'</label><select class="form-control" id="field_'+(null==(__t=e)?"":_.escape(__t))+'" name="'+(null==(__t=e)?"":_.escape(__t))+'" data-style="selectify"> ',_(l.values).each(function(e){__p+=' <option value="'+(null==(__t=2==l.type?e.value?"1":"0":e.value)?"":_.escape(__t))+'" '+(null==(__t=e.value==l.value?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.label)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div> ";break;case 3:__p+=' <div class="col-12"><label>'+(null==(__t=l.label)?"":_.escape(__t))+'</label><div class="form-group"><div class="form-check"> ',_(l.values).each(function(a,t){__p+=' <input name="'+(null==(__t=e)?"":_.escape(__t))+'" id="field_'+(null==(__t=e)?"":_.escape(__t))+"_"+(null==(__t=t)?"":_.escape(__t))+'" value="'+(null==(__t=2==l.type?a.value?"1":"0":a.value)?"":_.escape(__t))+'" '+(null==(__t=a.value==l.value?'checked="checked"':"")?"":__t)+' type="radio"><label for="field_'+(null==(__t=e)?"":_.escape(__t))+"_"+(null==(__t=t)?"":_.escape(__t))+'" class="visible">'+(null==(__t=a.label)?"":_.escape(__t))+"</label> "}),__p+=" </div></div></div> ";break;case 4:__p+=' <div class="col-12"><label>'+(null==(__t=l.label)?"":_.escape(__t))+'</label><div class="row no-gutters"> ',_(l.values).each(function(a,t){__p+=' <div class="col-3 mb-2"><input name="'+(null==(__t=e)?"":_.escape(__t))+'" id="field_'+(null==(__t=e)?"":_.escape(__t))+"_"+(null==(__t=t)?"":_.escape(__t))+'" value="'+(null==(__t=a.value)?"":_.escape(__t))+'" '+(null==(__t=_.contains(l.value,a.value)?'checked="checked"':"")?"":__t)+' type="checkbox"><label for="field_'+(null==(__t=e)?"":_.escape(__t))+"_"+(null==(__t=t)?"":_.escape(__t))+'" class="visible">'+(null==(__t=a.label)?"":_.escape(__t))+"</label></div> "}),__p+=" </div></div> ";break;case 5:__p+=' <div class="col-12"><div class="form-group"><label for="field_'+(null==(__t=e)?"":_.escape(__t))+'">'+(null==(__t=l.label)?"":_.escape(__t))+'</label><textarea class="form-control" id="field_'+(null==(__t=e)?"":_.escape(__t))+'" name="'+(null==(__t=e)?"":_.escape(__t))+'" rows="5" placeholder="'+(null==(__t=l.desc)?"":_.escape(__t))+'">'+(null==(__t=l.value)?"":_.escape(__t))+"</textarea></div></div> "}__p+=" "}),__p+=' </div></form></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],152:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="post-content templates"><div class="form-group"><label>Mise en page</label><p>Définie l\'apparence, le template et la configuration des widgets de cette page :</p><select data-style="selectify"> ',_(layouts).each(function(e){__p+=' <option value="'+(null==(__t=e.layout_id)?"":_.escape(__t))+'" '+(null==(__t=layout_id==e.layout_id?'selected="selected"':"")?"":__t)+' data-tags="md-layout">'+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=' </select></div><p class="mb-2 d-none d-md-block"><a href="/appearance/layouts/'+(null==(__t=page)?"":_.escape(__t))+"/"+(null==(__t=layout_id)?"":_.escape(__t))+'">Modifier cette mise en page</a></p><p class="d-none d-md-block"><a href="#" data-role="create">Créer une nouvelle mise en page</a></p></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],153:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="widget color '+(null==(__t=color)?"":_.escape(__t))+'" data-role="widget" data-widget="'+(null==(__t=widget_id)?"":_.escape(__t))+'" data-type="'+(null==(__t=type)?"":_.escape(__t))+'"><div class="corner-color"><div class="corner-color-content"></div></div><div class="icon-toolbar" role="toolbar" data-widget="'+(null==(__t=widget_id)?"":_.escape(__t))+'"><a href="#" class="md-icon md-note-add d-none"></a> <a href="#" data-role="configureWidget" class="md-icon md-settings"></a> <a href="#" data-role="removeWidget" class="md-icon md-cancel"></a></div><div class="row no-gutters"><div class="col-auto"><div class="md-icon service-icon"></div></div><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col"><h4 class="widget-title">'+(null==(__t=name)?"":_.escape(__t))+'</h4><p class="note" data-role="widget-desc">'+(null==(__t=description)?"":_.escape(__t))+"</p></div></div></div>";return __p};
},{"undefined":undefined}],154:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="btn-group float-right"><a href="#" class="md-icon md-add-layout" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></a><ul class="dropdown-menu dropdown-menu-right" data-role="addBloc"><li class="dropdown-header">Disposition :</li><li><a class="dropdown-item" href="#" data-col="1" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 1 colonne</a></li> ',col_count>=2&&(__p+=' <li><a class="dropdown-item" href="#" data-col="2" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 2 colonnes</a></li><li><a class="dropdown-item" href="#" data-col="2d" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 2 colonnes à droite</a></li><li><a class="dropdown-item" href="#" data-col="2g" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 2 colonnes à gauche</a></li> '),__p+=" ",col_count>=3&&(__p+=' <li><a class="dropdown-item" href="#" data-col="3" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 3 colonnes</a></li> '),__p+=" </ul></div><h1>"+(null==(__t=name)?"":_.escape(__t))+'</h1><div data-role="zone" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">'+(null==(__t=blocs)?"":__t)+"</div>";return __p};
},{"undefined":undefined}],155:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article post-article-empty text-center"><header class="post-header"><h1>Cette page n\'est pas disponible</h1></header><div class="post-content"><p class="lead">La page que vous cherchez à consulter n\'est pas adaptée à votre périphérique. <span class="md-icon md-mobile-off d-block mt-5"></span></p></div><footer class="post-footer"></footer></article><article class="post-article templates-list"><header class="post-header no-border no-header"><div class="row no-gutters"><div class="col-auto ml-auto sort-options"><div class="btn-group mr-0" data-role="order"><button type="button" class="btn btn-icon md-icon md-sort dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right dropdown-control" data-role="order"><li class="active" data-id="date"><a class="dropdown-item" href="#">Modification</a></li><li data-id="name"><a class="dropdown-item" href="#">Titre</a></li><li data-id="usage"><a class="dropdown-item" href="#">Utilisation</a></li></ul></div></div></div></header><div data-role="list" class="post-content templates"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],156:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="item-templates-list"> ',structure?(__p+=" ",__p+=is_default?' <div class="corner-color template-default right"><div class="corner-color-content"></div></div> ':' <div class="corner-color template-variant right"><div class="corner-color-content"></div></div> ',__p+=" "):__p+=' <div class="corner-color template-danger right"><div class="corner-color-content"></div></div> ',__p+=' <div class="row no-gutters"><div class="col-auto mr-4"><a href="/appearance/layouts/'+(null==(__t=page)?"":_.escape(__t))+"/"+(null==(__t=layout_id)?"":_.escape(__t))+'"><div class="si-overlay"><span class="md-icon md-edit btn-si"></span></div> ',__p+=structure?" "+(null==(__t=structure)?"":__t)+" ":' <div class="template danger"></div> ',__p+=' </a></div><div class="col item-body"><h4> '+(null==(__t=name)?"":_.escape(__t))+" </h4> ",is_multi_layouts&&(__p+=' <div class="row no-gutters"><div class="col-4"><span class="data-label">Appliqué à</span></div><div class="col"> ',__p+="#"!=usage_link?' <a href="'+(null==(__t=usage_link)?"":_.escape(__t))+'">'+(null==(__t=usage_label)?"":_.escape(__t))+"</a> ":" "+(null==(__t=usage_label)?"":_.escape(__t))+" ",__p+=" </div></div> "),__p+=' <div class="row no-gutters"><div class="col-4"><span class="data-label">Template</span></div><div class="col">'+(null==(__t=model.name)?"":_.escape(__t))+'</div></div><div class="row no-gutters mb-4"><div class="col-4"><span class="data-label">Répertoire</span></div><div class="col"><em>'+(null==(__t=model.id)?"":_.escape(__t))+'</em></div></div></div><div class="col-12"><div class="btn-toolbar float-right" role="toolbar"> ',is_multi_layouts&&(__p+=" ",__p+=is_default?' <a class="btn btn-primary" data-role="duplicate" href="#" role="button">Dupliquer</a> ':' <div class="btn-group"><a class="btn btn-primary" data-role="duplicate" href="#" role="button">Dupliquer</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" data-role="delete" href="#">Supprimer</a></li></ul></div> ',__p+=" "),__p+=" </div></div></div></div>";return __p};
},{"undefined":undefined}],157:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",_(types).each(function(a,e){__p+=" <h2>"+(null==(__t=e)?"":_.escape(__t))+'</h2><ul class="nav nav-sidebar flex-column"> ',_(a).each(function(a){__p+=' <li class="nav-item"><a class="nav-link" href="/appearance/layouts/'+(null==(__t=a.page)?"":_.escape(__t))+'">'+(null==(__t=a.name)?"":_.escape(__t))+"</a></li> "}),__p+=" </ul> "}),__p+="";return __p};
},{"undefined":undefined}],158:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Widgets disponibles</h2><div class="form-group"><select data-role="select-folder" data-style="selectify"> ',_.each(folders,function(e,t){__p+='<option value="'+(null==(__t=t)?"":_.escape(__t))+'" '+(null==(__t=folder_id==t?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.name)?"":_.escape(__t))+"</option>"}),__p+=" </select></div><p>Glissez-déposez les widgets dans le modèle de page</p> ",widgets.length&&(__p+=' <div id="widgets_pool"> ',_.each(widgets,function(e){__p+=' <div class="widget" data-type="'+(null==(__t=e.type)?"":_.escape(__t))+'"><a href="#" class="md-icon md-drag btn-drag"></a><h4 class="widget-title">'+(null==(__t=e.name)?"":_.escape(__t))+"</h4></div> "}),__p+=" </div> "),__p+=" ",models.length&&(__p+=' <div class="page_template"><h2>Template appliqué</h2><div class="form-group"><select data-role="select-model" data-style="selectify"> ',_.each(models,function(e){__p+='<option value="'+(null==(__t=e.id)?"":_.escape(__t))+'" '+(null==(__t=e.id==current_model?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.name)?"":_.escape(__t))+"</option>"}),__p+=" </select></div></div> "),__p+=" ",canEditName&&(__p+=' <h2>Intitulé</h2><div class="form-group has-feedback"><input class="form-control form-control-sidebar" data-role="name" placeholder="Intitulé par défaut" value="'+(null==(__t=name)?"":_.escape(__t))+'"> <span class="md-feedback md-edit"></span></div> '),__p+="";return __p};
},{"undefined":undefined}],159:[function(require,module,exports){
function buildBloc(e){var t=[];_.each(e.cells,function(e){var i="";_.each(e.widgets,function(e){i+=buildWidget(e)}),t.push({cell_id:e.cell_id,content:i})});var i;switch(e.type){case"1":i=[12];break;case"2":i=[6,6];break;case"2d":i=[7,5];break;case"2g":i=[5,7];break;case"3":i=[4,4,4]}return tplBloc({bloc:e,cells:t,sizes:i})}function buildWidget(e){var t="widget-tools";return e.category&&(t="widget-"+e.category),tplWidget({widget_id:e.widget_id,name:e.name,type:e.type,description:e.desc,color:t})}function makePosition(e,t){var i=t.children().index(e);if(0==i)return{position:"before",sibling_id:null};if(i==t.children().length-1)return{position:"after",sibling_id:null};var o=t.children().get(i-1);return{position:"after",sibling_id:Backbone.$(o).data("widget")}}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");require(611);var ControllerChannel=Backbone.Radio.channel("controller"),FormBehavior=require(27),SelectifyBehavior=require(26),Forms=require(608),Layout=require(146),tplZone=require(154),tplBloc=require(150),tplWidget=require(153),ModalView=Marionette.View.extend({template:require(151),behaviors:[SelectifyBehavior],initialize:function(e){this.mergeOptions(e,["widget"])},templateContext:function(){return{widget:this.widget}},getValues:function(){var e=Forms.extractFields(_.keys(this.widget.settings),this),t=this.widget.settings;return _.each(e,function(i,o){if(t[o]&&t[o].type){if(2==t[o].ctl&&""==i&&t[o].values&&t[o].values.length>=2&&null==t[o].values[0].value&&""==t[o].values[1].value){var a=Backbone.$('select[name="'+o+'"]',this.el).get(0);a&&0==a.selectedIndex&&delete e[o]}2==t[o].ctl&&Number.isNaN(i)&&(e[o]=Backbone.$('select[name="'+o+'"]',this.el).val())}}.bind(this)),e}});module.exports=Marionette.View.extend({template:require(149),className:"container container-large alerte-rwd",service:"layout",behaviors:[FormBehavior],ui:{addBloc:'ul[data-role="addBloc"] a',removeBloc:'a[data-role="removeBloc"]',removeWidget:'a[data-role="removeWidget"]',configureWidget:'a[data-role="configureWidget"]'},events:{"click @ui.addBloc":"addBloc","click @ui.removeBloc":"removeBloc","click @ui.removeWidget":"removeWidget","click @ui.configureWidget":"openWidgetConfiguration"},willTriggerChangeName:!1,initialize:function(e){this.mergeOptions(e,["apply","layout_id"]),this.widgets=[];var t=this.model.get("type").page;Backbone.$.when(this.model.getWidgets(t),"symbol"==t?[]:this.model.getModels()).done(function(e,t){var i=[];_.each(e,function(e){_.each(e.categories,function(e){i=i.concat(e.widgets)})}),this.widgets=i,ControllerChannel.trigger("refresh:widgets",e,t,this.model)}.bind(this));var i=this;this.listenTo(ControllerChannel,"rendered:widgets",function(){Backbone.$("#widgets_pool .widget").draggable({connectToSortable:"#builder div.ui-sortable",handle:".btn-drag",cursorAt:{top:25,left:58},appendTo:"body",zIndex:9999,helper:function(e,t){var o=Backbone.$(e.currentTarget),a=o.data("type"),n=i.widgets.find(function(e){return e.type==a});return Backbone.$(buildWidget({widget_id:0,type:n.type,name:n.name,desc:n.desc||"",category:n.category}))},revert:"invalid"})}),this.listenTo(ControllerChannel,"change:model",this.onChangeModel),this.listenTo(ControllerChannel,"change:name",this.onChangeName)},templateContext:function(){var e=this.model.get("model"),t=this.model.get("tree"),i=e.structure.replace("<table>",'<table class="template-layout">');return _.each(e.zones,function(e){var o=[];t[e.id]&&_.each(t[e.id],function(e){o.push(buildBloc(e))});var a=tplZone({col_count:parseInt(e.colmax),name:e.name,zone_id:e.id,blocs:o.join("")});i=i.replace("{"+e.id+"}",a)}),i=i.replace(/{[_a-zA-Z0-9]+}/,""),{structure:i}},onRender:function(){this.bindBloc(Backbone.$("#builder div.ui-sortable",this.el))},openWidgetConfiguration:function(e){var t=Backbone.$(e.currentTarget.parentNode).data("widget");this.model.getWidget(t).done(function(e){var t=new ModalView({widget:e});this.listenTo(t,"action:modal",this.onWidgetUpdate);var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.showInModal(t,{title:"Paramètres du widget",modalClass:"modal-right",modalDialogClass:"modal-sm",action:{title:"Valider"}})}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},addBloc:function(e){var t=Backbone.$(e.currentTarget);this.model.addBloc(t.data("zone"),t.data("col")).done(function(e){this.onBlocCreate(e,t.data("zone"))}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this))},removeBloc:function(e){var t=Backbone.$(e.currentTarget),i=t.parents('[data-role="zone"]');this.model.removeBloc(t.parent().data("bloc")).done(function(){if(this.onBlocDestroy(t.parent().data("bloc")),i&&0==i.children().length){var e=this.model.describeZone(i.data("zone")),o=e?e.defaut:"1";this.model.addBloc(i.data("zone"),o).done(function(e){this.onBlocCreate(e,i.data("zone"))}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this))}}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this))},onBlocCreate:function(e,t){Backbone.$('div[data-role="zone"][data-zone="'+t+'"]',this.el).append(buildBloc(e)),this.bindBloc(Backbone.$('div[data-role="bloc"][data-bloc="'+e.bloc_id+'"] div.ui-sortable',this.el))},onBlocDestroy:function(e){Backbone.$('div[data-role="bloc"][data-bloc="'+e+'"]',this.el).remove()},removeWidget:function(e){var t=Backbone.$(e.currentTarget),i=t.parent().data("widget");this.model.removeWidget(i).done(function(){var e=Backbone.$('div[data-role="widget"]',this.el).filter(function(){return Backbone.$(this).data("widget")==i});e.remove()}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this))},onWidgetUpdate:function(e){this.model.setWidgetSettings(e.widget.widget_id,e.widget.settings,e.getValues()).done(function(t){var i=Backbone.$('div[data-role="widget"]',this.el).filter(function(){return Backbone.$(this).data("widget")==t.widget_id});i&&Backbone.$('[data-role="widget-desc"]',i).text(t.desc),e.triggerMethod("close:modal",!0)}.bind(this)).fail(function(){})},onChangeModel:function(e){this.model.save({model:e},{patch:!0}).done(function(){this.model.fetch().done(function(){Backbone.$("#content").animate({scrollTop:0},"slow"),this.render()}.bind(this))}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},onChangeName:function(e){e!=this.model.get("name")&&(this.willTriggerChangeName=!0),this.model.set("name",e,{silent:!0})},addWidget:function(e,t,i,o){this.model.addWidget(e.type,t,o).done(function(e){i.data("widget",e.widget_id),Backbone.$("[data-widget]",i).data("widget",e.widget_id),Backbone.$('[data-role="widget-desc"]',i).text(e.desc)}).fail(function(){console.log("FAIL")})},moveWidget:function(e,t,i){this.model.moveWidget(e,t,i).done(function(){}).fail(function(){console.log("FAIL")})},bindBloc:function(e){var t,i=this;e.sortable({connectWith:"#builder div.ui-sortable",placeholder:"add-zone",handle:".btn-drag",tolerance:"pointer",start:function(e,i){t=1!=Backbone.$(this).data("sortableFirst")?Backbone.$("#content").scrollTop():0,Backbone.$(this).data("sortableFirst",!0)},sort:function(e,i){t>0&&i.helper.css({top:i.position.top-t+"px"})},update:function(e,t){var o=Backbone.$(this);if(0!=o.has(t.item).length){if(0==t.item.data("widget")){var a=t.item.data("type"),n=i.widgets.find(function(e){return e.type==a}),r=Backbone.$(buildWidget({widget_id:0,name:n.name,type:n.type,desc:n.desc||"",category:n.category}));return t.item.replaceWith(r),void i.addWidget(n,parseInt(o.data("cell")),r,makePosition(r,o))}i.moveWidget(t.item.data("widget"),o.data("cell"),makePosition(t.item,o))}},change:function(e,i){t=0}})},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");return this.model.save({name:this.model.get("name")},{patch:!0,wait:!0}).then(function(){var t;return t=new Layout(this.layout_id?{layout_id:this.layout_id,page:this.model.get("type").page,draft_id:this.model.get("draft_id"),name:this.model.get("name")}:{page:this.model.get("type").page,draft_id:this.model.get("draft_id"),apply_to:this.apply,name:this.model.get("name")}),t.save().done(function(){this.layout_id||(this.layout_id=t.get("layout_id")),this.willTriggerChangeName&&this.trigger("change:name",this.model),this.willTriggerChangeName=!1}.bind(this)).fail(function(t){e.showErrorModal(t)})}.bind(this),function(t){e.showErrorModal(t)})}});
},{"146":146,"149":149,"150":150,"151":151,"153":153,"154":154,"26":26,"27":27,"608":608,"611":611,"undefined":undefined}],160:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectifyBehavior=require(26),Layouts=require(147),Builder=require(145);module.exports=Marionette.View.extend({template:require(152),tagName:"article",className:"post-article",behaviors:[SelectifyBehavior],ui:{select:"select",create:"a[data-role='create']"},events:{"change @ui.select":"selectLayout","click @ui.create":"willCreate"},initialize:function(e){this.apply=null,this.mergeOptions(e,["layout_id","type","apply","applyName"]),this.collection=new Layouts,this.collection.fetch({data:{page:this.type}}).done(function(){this.render()}.bind(this))},templateContext:function(){return{page:this.type,layouts:this.collection.toJSON(),layout_id:this.layout_id,structure:this.getStructure(this.layout_id)}},getStructure:function(e){var t=this.collection.findWhere({layout_id:e});return t&&t.get("model")&&t.get("model").structure?t.get("model").structure.replace("<table>",'<table class="template">'):""},selectLayout:function(){this.layout_id=parseInt(this.getUI("select").val()),this.render(),this.triggerMethod("change:layout",this.layout_id,this.collection.findWhere({layout_id:this.layout_id}))},willCreate:function(){var e=new Builder({layout_id:parseInt(this.getUI("select").val()),page:this.type,name:this.applyName||""}),t=Backbone.Radio.channel("app").request("ctx:navigationController");e.save().done(function(){var i=null!=this.apply?"?apply="+this.apply:"";t.navigate("/appearance/drafts/"+e.get("draft_id")+i)}.bind(this)).fail(function(e){t.showErrorModal(e)}.bind(this))}});
},{"145":145,"147":147,"152":152,"26":26,"undefined":undefined}],161:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),ControllerChannel=Backbone.Radio.channel("controller"),ActiveLinksBehaviors=require(18),SelectifyBehavior=require(26);module.exports=Marionette.View.extend({template:require(158),service:"layout",behaviors:[ActiveLinksBehaviors,SelectifyBehavior],tree:[],models:[],folder_id:null,ui:{folderSelector:"select[data-role='select-folder']",modelSelector:"select[data-role='select-model']",inputName:"input[data-role='name']"},events:{"change @ui.folderSelector":function(e){this.folder_id=Backbone.$(e.currentTarget).val(),this.render()},"change @ui.modelSelector":function(e){ControllerChannel.trigger("change:model",Backbone.$(e.currentTarget).val())},"change @ui.inputName":function(e){ControllerChannel.trigger("change:name",Backbone.$(e.currentTarget).val())}},initialize:function(e){this.tree=[],this.models=[],this.builder=null,this.folder_id=0,this.listenTo(ControllerChannel,"refresh:widgets",function(e,t,i){this.tree=e,this.models=t,this.builder=i,this.render()})},templateContext:function(){var e=this.tree,t=[],i=[];return null!=this.folder_id&&e[this.folder_id]&&(t=e[this.folder_id].categories),_.each(t,function(e){i=i.concat(e.widgets)}),{folders:e,folder_id:this.folder_id,categories:t,widgets:i,models:this.models,canEditName:this.builder&&"symbol"!==this.builder.get("type").page,name:this.builder?this.builder.get("name"):"",current_model:this.builder?this.builder.get("model").id:""}},onRender:function(){this.tree.length>0&&ControllerChannel.trigger("rendered:widgets")}});
},{"158":158,"18":18,"26":26,"undefined":undefined}],162:[function(require,module,exports){
function mapPage(e,t){var a;switch(e){case"cms-home":a={link:t>0?"/cms":"#",label:t>0?"Page d'accueil":"Aucune page"};break;case"cms-page":a={link:"#",label:t>0?format.plural(t,"%d page"," %d pages"):"Aucune page"};break;case"blog-category":a={link:"#",label:t>0?format.plural(t,"%d catégorie"," %d catégories"):"Aucune catégorie"};break;case"blog-post":a={link:"#",label:t>0?format.plural(t,"%d billet"," %d billets"):"Aucun billet"};break;case"catalog-home":a={link:t>0?"/catalog/home":"#",label:t>0?"Page d'accueil":"Aucune page"};break;case"catalog-category":a={link:"#",label:t>0?format.plural(t,"%d catégorie"," %d catégories"):"Aucune categorie"};break;case"catalog-product":a={link:"#",label:t>0?format.plural(t,"%d produit"," %d produits"):"Aucun produit"};break;default:a={link:"#",label:t>0?format.plural(t,"%d page"," %d pages"):"Aucune page"}}return a}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),moment=require("moment"),Builder=require(145),RowView=Marionette.View.extend({template:require(156),className:"col-auto d-flex",ui:{duplicate:'[data-role="duplicate"]',"delete":'[data-role="delete"]'},events:{"click @ui.duplicate":"onDuplicate","click @ui.delete":"onDelete","hidden.bs.dropdown .btn-group":"onHiddenDropDown"},templateContext:function(){var e=mapPage(this.model.get("page"),this.model.get("usage_count"));return{usage_link:e.link,usage_label:e.label,structure:this.getStructure(this.model)}},onDuplicate:function(){var e=new Builder({layout_id:this.model.get("layout_id"),page:this.model.get("page"),name:"Copie de "+this.model.get("name")}),t=Backbone.Radio.channel("app").request("ctx:navigationController");e.save().done(function(){t.navigate("/appearance/drafts/"+e.get("draft_id"))}.bind(this)).fail(function(e){t.showErrorModal(e)}.bind(this))},onDelete:function(e){var t=Backbone.$(e.currentTarget);return t.parent().hasClass("confirm-warning")?void this.model.destroy():(e.preventDefault(),t.data("title",t.text()),t.parent().addClass("confirm-warning"),t.text("Êtes-vous sûr ?"),!1)},onHiddenDropDown:function(e){Backbone.$(".dropdown-menu a",e.currentTarget).each(function(e,t){t=Backbone.$(t),t.parent().hasClass("confirm-warning")&&(t.text(t.data("title")),t.parent().removeClass("confirm-warning"))})},getStructure:function(e){return e&&e.get("model")&&e.get("model").structure?e.get("model").structure.replace("<table>",'<table class="template">'):""}}),ListView=Marionette.CollectionView.extend({className:"row",childView:RowView});module.exports=Marionette.View.extend({template:require(155),className:"container-fluid alerte-rwd",service:"appearance",ui:{order:'[data-role="order"] li'},events:{"click @ui.order":"onChangeOrder"},regions:{list:{el:"div[data-role='list']"}},initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.sortCollection("date"),this.showChildView("list",new ListView({collection:this.collection}))},onChangeOrder:function(e){var t=Backbone.$(e.currentTarget);t.hasClass("active")||(this.getUI("order").removeClass("active"),t.addClass("active"),this.sortCollection(t.data("id")))},sortCollection:function(e){switch(e){case"date":this.collection.comparator=function(e){return-1*moment(e.get("modification_date"),"YYYY-MM-DD HH:mm:ss").format("x")};break;case"name":this.collection.comparator="name";break;case"usage":this.collection.comparator=function(e){return-1*e.get("usage_count")}}this.collection.sort()}});
},{"145":145,"155":155,"156":156,"607":607,"undefined":undefined}],163:[function(require,module,exports){
var Marionette=require("backbone.marionette"),Layout=require(146),ActiveLinksBehaviors=require(18);module.exports=Marionette.View.extend({template:require(157),service:"appearance",behaviors:[ActiveLinksBehaviors],pages:[],initialize:function(e){var t=new Layout;t.getTypes().done(function(e){this.types=e,this.render()}.bind(this))},templateContext:function(){return{types:this.types}}});
},{"146":146,"157":157,"18":18,"undefined":undefined}],164:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/blog",isNew:function(){return!1},defaults:{posts_count:0}});
},{"606":606}],165:[function(require,module,exports){
var _=require("underscore"),CollectionUtils=require(606),Categ=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/blog/categories",idAttribute:"category_id",previewLink:null,defaults:{category_id:null,name:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",slug:"",is_visible:!1,layout_id:null,service_path:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/blog/categories",model:Categ,selectPayload:function(){return _.map(this.toJSON(),function(e){return{value:e.category_id,label:e.name}})},promisedSelect:function(e){var t=this;return this.fetch({data:{extra_fields:"recursive"}}).then(function(){var i=new CollectionUtils.SelectCollection,l=[];return t.each(function(t){l.push({value:t.get("category_id"),label:t.get("name"),selected:e&&t.get("category_id")==e})}),i.add(l),i})},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)}});
},{"606":606,"undefined":undefined}],166:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Comment=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/blog/comments",idAttribute:"comment_id",defaults:{comment_id:null,date:"",comment:"",origin:"",is_visible:!1,author:"",email:"",website:"",post_id:0,post_title:"",customer_id:null,avatar_url:"",avatar_thumb_url:"",ip:"",reverse_host:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:function(){return"sites/@site/blog/comments"},model:Comment,bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkGroupAction(this,function(e){return Backbone.ajax({url:"sites/@site/blog/comments",method:"DELETE",data:{comments:e}})},e,100).done(function(e){this.remove(e)}.bind(this))}});
},{"606":606,"undefined":undefined}],167:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/blog/home",isNew:function(){return!1},defaults:{name:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null,is_visible:!0,modification_date:"",service_path:""}});
},{"606":606}],168:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Link=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/blog/links",idAttribute:"link_id",defaults:{link_id:null,name:"",description:"",url:"",is_enabled:!1,position:0}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/blog/links",model:Link,reOrder:function(e){return Backbone.ajax({url:"sites/@site/blog/links",method:"PUT",data:{order:e}})},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?Backbone.$.Deferred().resolve():e.save({is_enabled:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?e.save({is_enabled:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)}});
},{"606":606,"undefined":undefined}],169:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Post=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/blog/posts",idAttribute:"post_id",defaults:{post_id:null,title:"",header:"",content:"",is_visible:!1,comments_count:0,has_comments_open:!1,slug:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",url:"",publication_date:"",category_id:null,category_name:"",thumb:null,layout_id:null,service_path:""},getTypes:function(t){t=t||{};var e={};return t.structure&&(e.extra_fields="structure"),Backbone.ajax({url:"sites/@site/blog/posts_types",data:e}).then(function(t){return _.map(t,function(t){return{type:t.type,name:t.name,position:t.position,fields:t.fields||[]}})})}});module.exports=CollectionUtils.KiubiCollection.extend({url:function(){return"sites/@site/blog/posts"},model:Post,bulkShow:function(t){return CollectionUtils.bulkAction(this,function(t){return t.get("is_visible")?Backbone.$.Deferred().resolve():t.save({is_visible:!0},{patch:!0})},t)},bulkHide:function(t){return CollectionUtils.bulkAction(this,function(t){return t.get("is_visible")?t.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},t)},suggest:function(t,e){return Backbone.ajax({url:"sites/@site/suggest/blog/posts",data:{term:t,limit:e||5}}).then(function(t){return _.map(t,function(t){return{post_id:t.post_id,title:t.title}})})}});
},{"606":606,"undefined":undefined}],170:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/blog",isNew:function(){return!1},defaults:{is_enabled:!1,comments_allowed:!1,comments_captcha:!1,comments_anonymous:!1,comments_autopublish:!1,is_rss_enabled:!1,rss_post_count:0}});
},{"606":606}],171:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var t=[];if(t=t.concat([{title:"Rédiger un billet",callback:"actionNewPost",icon:"md-add-outline"},{title:"Ajouter une catégorie",callback:"actionNewCategory",icon:"md-add-outline"}]),e.preview&&t.push({title:"Aperçu",icon:"md-launch",isOptional:!0,callback:["actionPreview",e.preview]}),e.addSave){var o={title:"Enregistrer",callback:"actionSave",icon:"md-save",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};t.length<=1?t.push(o):t.splice(1,0,o)}return t}function HeaderTabsPost(e,t){return[{title:"Billet",url:"/blog/posts/"+e,icon:"md-blog-detail"},{title:t+" "+(t>1?"Commentaires":"Commentaire"),url:"/blog/posts/"+e+"/comments",icon:"md-blog-comment"}]}function HeaderTabscategory(e,t){return[{title:"Catégorie",url:"/blog/categories/"+e,icon:"md-blog-categ"},{title:t+" "+(t>1?"Billets postés":"Billet posté"),url:"/blog/categories/"+e+"/posts",icon:"md-blog-detail"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),moment=require("moment"),Forms=require(608),Router=require(612),Controller=require(34),Blog=require(164),Categories=require(165),Posts=require(169),Comments=require(166),Links=require(168),Settings=require(170),Home=require(167),PostsView=require(192),PostView=require(191),HomeView=require(189),SettingsView=require(193),LinksView=require(190),CommentsView=require(188),CategoryView=require(187),SidebarMenuView=require(194),BlogController=Controller.extend({sidebarMenuService:"blog",sidebarMenu:SidebarMenuView,sidebarMenuEvents:{"add:category":"actionNewCategory"},baseBreadcrum:[{title:"Blog",href:"/blog"}],showPostsByCategory:function(e,t){this.showGlobalPosts(t,e)},showPosts:function(e){this.showGlobalPosts(e,null)},showGlobalPosts:function(e,t){var o,i=this.parseQueryString(e,{term:null}),n=new Posts,s="Tous les billets postés",r=null,a=new Categories;if(t){var l=new a.model({category_id:t});o=l.fetch().done(function(){s=l.get("name"),r=HeaderTabscategory(t,l.get("posts_count"))}),i.category_id=t}else o=Backbone.$.Deferred().resolve();o.done(function(){var e=new PostsView({collection:n,categories:a,filters:i});this.listenTo(n,"bulk:delete",function(e){this.triggerSidebarMenu("refresh:posts",-e.ids.length)}),this.navigationController.showContent(e),e.start(),this.setHeader({title:s},getHeadersAction(),r)}.bind(this)).fail(this.failHandler("Catégorie introuvable"))},showPost:function(e){var t=new Posts,o=new t.model({post_id:e});o.fetch({data:{extra_fields:"defaults"}}).done(function(){var t=Backbone.Radio.channel("app").request("ctx:session"),i=new Categories;i.fetch();var n=new PostView({model:o,categories:i,typesSource:o.getTypes({structure:!0}),enableSeo:t.hasScope("site:seo"),enableLayout:t.hasScope("site:layout")});this.listenTo(o,"change",function(e){e.hasChanged("title")&&this.setBreadCrum({title:e.get("title")},!0)}.bind(this)),this.listenTo(o,"destroy",function(){this.triggerSidebarMenu("refresh:posts",-1),this.navigationController.showOverlay(300),this.navigationController.navigate("/blog")}),this.navigationController.showContent(n),this.setHeader({title:o.get("title")},getHeadersAction({preview:o,addSave:!0}),HeaderTabsPost(e,o.get("comments_count")))}.bind(this)).fail(this.failHandler("Billet introuvable"))},actionNewPost:function(){var e=this,t=new Categories;return t.fetch({data:{limit:1}}).then(function(){if(t.length<1)return void e.navigationController.showErrorModal("Erreur de chargement des catégories du blog");var o=new Posts,i=new o.model({title:"Intitulé par défaut",slug:Forms.tmpSlug(),is_visible:!1,has_comments_open:!0,publication_date:moment().format("YYYY-MM-DD HH:mm:ss"),category_id:t.at(0).get("category_id")});return i.save().done(function(){e.triggerSidebarMenu("refresh:posts",1),e.navigationController.showOverlay(300),e.navigationController.navigate("/blog/posts/"+i.get("post_id"))}).fail(function(t){e.navigationController.showErrorModal(t)})})},showHome:function(){var e=new Home;e.fetch({data:{extra_fields:"defaults"}}).done(function(){var t=Backbone.Radio.channel("app").request("ctx:session"),o=new HomeView({collection:new Categories,model:e,enableSeo:t.hasScope("site:seo"),enableLayout:t.hasScope("site:layout")});this.listenTo(e,"change",function(e){this.triggerSidebarMenu("refresh:categories")}.bind(this)),this.navigationController.showContent(o),o.start(),this.setHeader({title:"Accueil du blog"},getHeadersAction({preview:e,addSave:!0}))}.bind(this)).fail(this.failHandler("Acccueil du blog introuvable"))},showSettings:function(){var e=new Settings;e.fetch().done(function(){var t=new SettingsView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Paramètres du blog"},getHeadersAction({addSave:!0}))}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showLinks:function(){var e=new LinksView({collection:new Links});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Blogroll"})},showComments:function(e){var t,o=new Comments,i="Tous les commentaires",n=null,s=null,r={};if(e>0){r.post_id=e;var a=new Posts,l=new a.model({post_id:e});t=l.fetch().done(function(){i=l.get("title"),n=HeaderTabsPost(e,l.get("comments_count")),s=getHeadersAction({preview:l})})}else t=Backbone.$.Deferred().resolve();t.done(function(){var t=new CommentsView({collection:o,enableAddComment:e>0,childViewOptions:r});this.navigationController.showContent(t),t.start(r),this.setHeader({title:i},s,n)}.bind(this)).fail(this.failHandler("Billet introuvable"))},showCategory:function(e){var t=new Categories,o=new t.model({category_id:e});o.fetch({data:{extra_fields:"defaults"}}).done(function(){var t=Backbone.Radio.channel("app").request("ctx:session"),i=new CategoryView({model:o,enableSeo:t.hasScope("site:seo"),enableLayout:t.hasScope("site:layout")});this.listenTo(o,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),(e.hasChanged("name")||e.hasChanged("is_visible"))&&this.triggerSidebarMenu("refresh:categories")}.bind(this)),this.listenTo(o,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/blog/home"),this.triggerSidebarMenu("refresh:categories")}),this.navigationController.showContent(i),this.setHeader({title:o.get("name")},getHeadersAction({preview:o,addSave:!0}),HeaderTabscategory(e,o.get("posts_count")))}.bind(this)).fail(this.failHandler("Catégorie introuvable"))},actionNewCategory:function(){var e=new Categories,t=new e.model({name:"Intitulé par défaut",slug:Forms.tmpSlug(),is_visible:!1});return t.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/blog/categories/"+t.get("category_id")),this.triggerSidebarMenu("refresh:categories")}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},actionPreview:function(e){window.open(e.previewLink)}});module.exports=Router.extend({controller:new BlogController,appRoutes:{blog:"showPosts","blog/home":"showHome","blog/settings":"showSettings","blog/links":"showLinks","blog/posts/:id":"showPost","blog/posts/:id/comments":"showComments","blog/comments":"showComments","blog/categories/:id":"showCategory","blog/categories/:id/posts":"showPostsByCategory"},onRoute:function(e){var t=Backbone.Radio.channel("app").request("ctx:session");return t.hasScope("site:blog")?void this.controller.showSidebarMenu():(this.controller.navigationController.navigate("/"),!1)}});
},{"164":164,"165":165,"166":166,"167":167,"168":168,"169":169,"170":170,"187":187,"188":188,"189":189,"190":190,"191":191,"192":192,"193":193,"194":194,"34":34,"608":608,"612":612,"undefined":undefined}],172:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="section_'+(null==(__t=category_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=category_id)?"":_.escape(__t))+'" type="checkbox"><label for="section_'+(null==(__t=category_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_visible?' Contient <a href="/blog/categories/'+(null==(__t=category_id)?"":_.escape(__t))+'/posts">'+(null==(__t=plural(posts_count,"%d billet","%d billets"))?"":_.escape(__t))+"</a> ":' <span class="text-danger">Masqué</span> ',__p+=' </div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/blog/categories/'+(null==(__t=category_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],173:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><header class="post-header"><h1>Détail de la catégorie</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé</label><input class="form-control" id="name" name="name" placeholder="Intitulé de catégorie tel qu\'il apparaîtra dans le menu" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div></div><footer class="post-footer"></footer></article><article data-role="seo"></article></div><div class="col-lg-4 col-12"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" ',is_visible&&(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" ',is_visible||(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],174:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article data-role="list"></article><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],175:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" value="1" type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" class="visible">Visible</label><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" value="0" type="radio" checked="checked"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" class="is_visible0">Masqué</label></div></div><div class="form-group"><label class="required" for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment">Commentaire</label><textarea class="form-control" rows="5" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment" name="comment" placeholder="Obligatoire"></textarea></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show"><span class="page-add md-icon md-add-page"></span>Ajouter un commentaire</a></div>';return __p};
},{"undefined":undefined}],176:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col-auto"><input id="selection_'+(null==(__t=comment_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=comment_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=comment_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><div class="media-object md-icon md-face img-default rounded-circle img-avatar"></div><div class="media-object rounded-circle img-avatar"><img alt="" src="'+(null==(__t=convertMediaPath(avatar_thumb_url))?"":__t)+'&fallback=false"></div></div><div class="col item-body"><h4>'+(null==(__t=author)?"":_.escape(__t))+" ",customer_id>0&&(__p+=" ",__p+="admin"==origin?' <div class="md-icon md-user"></div> ':' <a href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'" class="md-icon md-person"></a> '),__p+=" </h4> ",__p+=is_visible?""+(null==(__t=date)?"":_.escape(__t)):'<span class="text-danger">Masqué</span>',__p+=' dans <a href="/blog/posts/'+(null==(__t=post_id)?"":_.escape(__t))+'">'+(null==(__t=post_title)?"":_.escape(__t))+'</a></div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" class="dropdown-item" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><div data-role="list"><blockquote>'+(null==(__t=comment2br)?"":__t)+'</blockquote></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="form-group"><label>Informations générales</label><p class="form-control-static">Posté le '+(null==(__t=date)?"":_.escape(__t))+' dans <a href="/blog/posts/'+(null==(__t=post_id)?"":_.escape(__t))+'">'+(null==(__t=post_title)?"":_.escape(__t))+'</a></p></div><div class="form-group"><label>IP | Host</label><p class="form-control-static">'+(null==(__t=ip)?"":_.escape(__t))+" | "+(null==(__t=reverse_host)?"":_.escape(__t))+'</p></div><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" class="visible">Visible</label><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" class="not-visible">Masqué</label></div></div><div class="row"><div class="col-4"><div class="form-group"><label>Auteur</label><p class="form-control-static">'+(null==(__t=author)?"":_.escape(__t))+'</p></div></div><div class="col-4"><div class="form-group"><label>Email</label><p class="form-control-static"> ',__p+=email?""+(null==(__t=email)?"":_.escape(__t)):'<em class="text-muted">Non renseigné</em>',__p+=' </p></div></div><div class="col-4"><div class="form-group"><label>Site Web</label><p class="form-control-static"> ',__p+=website?""+(null==(__t=website)?"":_.escape(__t)):'<em class="text-muted">Non renseigné</em>',__p+=' </p></div></div></div><div class="form-group"><label class="required" for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment">Commentaire</label><textarea class="form-control" rows="5" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment" name="comment" placeholder="Obligatoire">'+(null==(__t=comment)?"":_.escape(__t))+'</textarea></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],177:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><header class="post-header"><h1>Détail de la page d\'accueil</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé de l\'accueil tel qu\'il apparaîtra dans le menu"></div></div><footer class="post-footer"></footer></article><article data-role="list"></article><article data-role="seo"></article></div><div class="col-lg-4 col-12"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" ',is_visible&&(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" ',is_visible||(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],178:[function(require,module,exports){
arguments[4][174][0].apply(exports,arguments)
},{"174":174,"undefined":undefined}],179:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_enabled" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled1" value="1" type="radio"><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled1" class="visible">Visible</label><input name="is_enabled" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled0" value="0" type="radio" checked="checked"><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled0" class="not-visible">Masqué</label></div></div><div class="form-group"><label class="required" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_name">Intitulé</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_name" name="name" value="" placeholder="Intitulé du lien tel qu\'il apparaitra dans le blogroll"></div><div class="form-group"><label class="required" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_url">Adresse</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_url" name="url" value="" placeholder="Adresse du lien sous la forme http://www.adresse-du-lien.com/"></div><div class="form-group"><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_description">Description</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_description" name="description" value="" placeholder="Description telle qu\'elle apparaitra dans l\'attribut title du lien"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show"><span class="page-add md-icon md-add-page"></span>Ajouter un blogroll</a></div>';return __p};
},{"undefined":undefined}],180:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col-auto"><input id="selection_'+(null==(__t=link_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=link_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=link_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_enabled?(__p+=" ",__p+=description.length>0?" <span>"+(null==(__t=description)?"":_.escape(__t))+"</span> ":' <span class="text-muted">Le blogroll n\'a pas de description</span> ',__p+=" "):__p+=' <span class="text-danger">Masqué</span> ',__p+=' </div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" class="dropdown-item" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_enabled" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' ><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled1" class="visible">Visible</label><input name="is_enabled" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled0" class="not-visible">Masqué</label></div></div><div class="form-group"><label class="required" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_name">Intitulé</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé du lien tel qu\'il apparaitra dans le blogroll"></div><div class="form-group"><label class="required" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_url">Adresse</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_url" name="url" value="'+(null==(__t=url)?"":_.escape(__t))+'" placeholder="Adresse du lien sous la forme http://www.adresse-du-lien.com/"></div><div class="form-group"><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_description">Description</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_description" name="description" value="'+(null==(__t=description)?"":_.escape(__t))+'" placeholder="Description telle qu\'elle apparaitra dans l\'attribut title du lien"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],181:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><header class="post-header"><h1>Détail du billet</h1></header><div class="post-content"><div class="form-group"><label class="required" for="title">Titre</label><input class="form-control" id="title" name="title" value="'+(null==(__t=title)?"":_.escape(__t))+'" placeholder="Intitulé du billet tel qu\'il apparaîtra dans le blog"></div><div data-role="image"></div><div class="form-group"><label for="header">Chapô</label><textarea class="form-control" id="header" name="header" placeholder="Placeholder du contenu" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=header)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label for="content">Contenu</label><textarea class="form-control" id="content" name="content" placeholder="Placeholder du contenu" data-role="wysiwyg" rows="21">'+(null==(__t=content)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article data-role="type"></article><article data-role="seo"></article></div><div class="col-lg-4 col-12"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div><div class="form-group has-feedback post-subcontent"><label for="publication_date">Date de publication</label><input data-role="datetimepicker" class="form-control" id="publication_date" name="publication_date" value="'+(null==(__t=publication_date)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa hh:mm:ss"> <span class="md-feedback md-date"></span></div><div class="form-group post-subcontent"><label>Catégorie</label><div data-role="categories"></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><div class="post-content"><div class="form-group"><label>Commentaires</label><p>Détermine l\'accès aux commentaires par les Internautes pour ce billet uniquement :</p><div class="form-check"><input name="has_comments_open" id="commentaires1" value="true" '+(null==(__t=has_comments_open?'checked="checked"':"")?"":__t)+' type="radio"><label for="commentaires1">Ouverts</label><input name="has_comments_open" id="commentaires0" value="false" '+(null==(__t=has_comments_open?"":'checked="checked"')?"":__t)+' type="radio"><label for="commentaires0">Fermés</label></div></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],182:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Type de billet</h1></header><div class="post-content"><div class="post-group"><div class="form-group"><p>Le type de billet détermine si des informations complémentaires peuvent être ajoutées au billet :</p><div class="row"><div class="col-6"><select id="type" name="type" data-style="selectify"> ',_(types).each(function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'" '+(null==(__t=e.type==type?'selected="selected"':"")?"":__t)+' data-tags="md-blog-detail">'+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div></div> ",fields&&0!=fields.length||(__p+=' <p class="hidden"><em>Pas d\'information complémentaire...</em></p> '),__p+=" ",_(fields).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <input class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" value="'+(null==(__t=post.get(e.field))?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="5">'+(null==(__t=post.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"wysiwyg":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-role="wysiwyg" rows="21">'+(null==(__t=post.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"select":__p+=' <label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <div class="row"><div class="col-6"><div class="form-group"><select id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=l.value==post.get(e.field)?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div> ";break;case"image":case"file":__p+=' <div data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' </div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],183:[function(require,module,exports){
arguments[4][174][0].apply(exports,arguments)
},{"174":174,"undefined":undefined}],184:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="blog_post_'+(null==(__t=post_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=post_id)?"":_.escape(__t))+'" type="checkbox"><label for="blog_post_'+(null==(__t=post_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><div class="media-object md-icon md-image img-default"></div> ',thumb&&(__p+=' <div class="media-object no-ratio"><img alt="" src="'+(null==(__t=convertMediaPath(thumb.url_miniature))?"":__t)+'&fallback=false"></div> '),__p+=' </div><div class="col item-body"><h4>'+(null==(__t=title)?"":_.escape(__t))+"</h4> ",__p+=is_visible?' <a href="/blog/categories/'+(null==(__t=category_id)?"":_.escape(__t))+'">'+(null==(__t=category_name)?"":_.escape(__t))+"</a> ":' <span class="text-danger">Masqué</span> ',__p+=' </div><div class="col-4"><span title="Date de publication"><i class="md-icon md-date"></i>'+(null==(__t=publication_date)?"":_.escape(__t))+' </span></div><div class="col-2 no-white-space"> ',__p+=comments_count>0?' <a href="/blog/posts/'+(null==(__t=post_id)?"":_.escape(__t))+'/comments">'+(null==(__t=plural(comments_count,"%d commentaire","%d commentaires"))?"":_.escape(__t))+"</a> ":' <span class="text-muted">—</span> ',__p+=' </div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/blog/posts/'+(null==(__t=post_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" class="dropdown-item" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],185:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Commentaires</h1></header><div class="post-content"><p>Les visiteurs du site peuvent poster des commentaires pour chacun de vos billets. Si un visiteur est identifé, son commentaire sera ajouté à son compte en tant que membre du site.</p><div class="row"><div class="col-4"><div class="form-group"><label for="">Commentaires ouverts</label><div class="form-check"><input name="comments_allowed" id="comments_allowed1" value="1" '+(null==(__t=comments_allowed?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_allowed1">Oui</label><input name="comments_allowed" id="comments_allowed0" value="0" '+(null==(__t=comments_allowed?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_allowed0">Non</label></div></div></div><div class="col-4"><div class="form-group"><label for="">Publication immédiate</label><div class="form-check"><input name="comments_autopublish" id="comments_autopublish1" value="1" '+(null==(__t=comments_autopublish?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_autopublish1">Oui</label><input name="comments_autopublish" id="comments_autopublish0" value="0" '+(null==(__t=comments_autopublish?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_autopublish0">Non</label></div></div></div><div class="col-4"><div class="form-group"><label for="">Identification requise</label><div class="form-check"><input name="comments_anonymous" id="comments_anonymous0" value="0" '+(null==(__t=comments_anonymous?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_anonymous0">Oui (recommandé)</label><input name="comments_anonymous" id="comments_anonymous1" value="1" '+(null==(__t=comments_anonymous?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_anonymous1">Non</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Captcha</h1></header><div class="post-content"><p>Le "captcha" est un système anti-spam pour se prémunir contre l\'usage abusif des commentaires. Plusieurs captchas différents sont disponibles : une validation manuelle par l\'internaute ou le système invisible Google reCaptcha.</p><div class="form-group"><label for="">Utilisation du captcha</label><div class="form-check"><input name="comments_captcha" id="comments_captcha1" value="1" '+(null==(__t=comments_captcha?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_captcha1" class="visible">Activé</label><input name="comments_captcha" id="comments_captcha0" value="0" '+(null==(__t=comments_captcha?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_captcha0" class="not-visible">Désactivé</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Syndication</h1></header><div class="post-content"><p>En activant la syndication, les internautes vont pouvoir s’abonner aux flux RSS et/ou Atom du blog.</p><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_rss_enabled" id="is_rss_enabled1" value="1" '+(null==(__t=is_rss_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_rss_enabled1" class="visible">Activé</label><input name="is_rss_enabled" id="is_rss_enabled0" value="0" '+(null==(__t=is_rss_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_rss_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label for="rss_post_count">Nombre de billets inclus dans le flux</label><div class="row"><div class="col-2"><input id="rss_post_count" name="rss_post_count" class="form-control" value="'+(null==(__t=rss_post_count)?"":_.escape(__t))+'" placeholder="max. 15"></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],186:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Blog</h2><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="/blog"><span class="badge">'+(null==(__t=overview.posts_count)?"":_.escape(__t))+'</span>Tous les billets</a></li><li class="nav-item"><a class="nav-link" href="/blog/comments">Commentaires</a></li><li class="nav-item"><a class="nav-link" href="/blog/links">Blogroll</a></li><li class="nav-item"><a class="nav-link" href="/blog/settings">Paramètres</a></li></ul><h2>Catégories</h2><a href="#" data-role="category-add" class="page-add md-icon md-add-page" title="Ajouter une catégorie"></a><ul class="nav nav-sidebar flex-column"> ',is_loaded&&(__p+=' <li class="nav-item '+(null==(__t=home.is_visible?"":"pagetype-visibility-off")?"":__t)+'"><a class="nav-link" href="/blog/home"><span class="md-icon"></span>'+(null==(__t=home.name)?"":_.escape(__t))+"</a></li> ",_.each(categories,function(a){__p+=' <li class="nav-item '+(null==(__t=a.is_visible?"":"pagetype-visibility-off")?"":__t)+'"><a class="nav-link" href="/blog/categories/'+(null==(__t=a.category_id)?"":_.escape(__t))+'"><span class="md-icon"></span>'+(null==(__t=a.name)?"":_.escape(__t))+"</a></li> "})),__p+=" </ul>";return __p};
},{"undefined":undefined}],187:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),LayoutSelectorView=require(160),SeoView=require(141),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(173),className:"container container-large",service:"blog",behaviors:[FormBehavior],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0},seo:{el:"article[data-role='seo']",replaceElement:!0}},fields:["name","is_visible","slug","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["model"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"blog-category",apply:this.model.get("category_id"),applyName:this.model.get("name")}),this.listenTo(this.model,"change",this.render)},onBeforeRender:function(){this.layoutSelector.isAttached()&&this.detachChildView("layout")},onRender:function(){this.getOption("enableLayout")&&this.showChildView("layout",this.layoutSelector),this.getOption("enableSeo")&&this.showChildView("seo",new SeoView({slug_suffix:"/",model:this.model}))},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){var e=Forms.extractFields(this.fields,this);return this.getOption("enableSeo")&&Forms.isTmpSlug(e.slug)&&(e.slug=e.name),this.model.save(e,{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"141":141,"160":160,"173":173,"27":27,"608":608,"undefined":undefined}],188:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),_=require("underscore"),RowActionsBehavior=require(31),Session=Backbone.Radio.channel("app").request("ctx:session"),Forms=require(608),NewRowView=Marionette.View.extend({template:require(175),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]'},initialize:function(e){this.mergeOptions(e)},templateContext:function(){return{comment_id:"new"}},clearFields:function(){Backbone.$("textarea").val("")},onActionSave:function(){var e=Forms.extractFields(["is_visible","comment"],this);e.post_id=this.getOption("post_id");var t=new this.collection.model;return t.save(e).done(function(){this.getUI("form").hide(),this.collection.add(t),this.clearFields()}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),RowView=Marionette.View.extend({template:require(176),className:"list-item",templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),date:format.formatLongDateTime(this.model.get("date")),comment2br:_.escape(""+this.model.get("comment")).replace(/(\r\n|\n\r|\r|\n)+/g,"<br />")}},ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},onActionSave:function(){return this.model.save(Forms.extractFields(["is_visible","comment"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(174),className:"container",service:"blog",enableAddComment:!1,initialize:function(e){this.mergeOptions(e,["collection","enableAddComment"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:this.enableAddComment?NewRowView:null,childViewOptions:this.getOption("childViewOptions"),title:"Liste des commentaires",selection:[{title:"Afficher",callback:this.showComments.bind(this)},{title:"Masquer",callback:this.hideComment.bind(this)},{title:"Supprimer",callback:this.deleteComments.bind(this),confirm:!0}]}))},start:function(e){this.collection.fetch({data:e})},showComments:function(e){return this.collection.bulkShow(e)},hideComment:function(e){return this.collection.bulkHide(e)},deleteComments:function(e){return this.collection.bulkDelete(e)}});
},{"128":128,"174":174,"175":175,"176":176,"31":31,"607":607,"608":608,"undefined":undefined}],189:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),LayoutSelectorView=require(160),SeoView=require(141),RowActionsBehavior=require(31),FormBehavior=require(27),Forms=require(608),ControllerChannel=Backbone.Radio.channel("controller"),RowView=Marionette.View.extend({template:require(172),className:"list-item",templateContext:function(){return{plural:function(e,t,i){return(e>1?i:t).replace("%d",e)}}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy().done(function(){ControllerChannel.trigger("refresh:categories")})},onSortChange:function(e){this.model.save(e,{patch:!0}).done(function(){ControllerChannel.trigger("refresh:categories")})}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(177),className:"container container-large",service:"blog",behaviors:[FormBehavior],regions:{list:{el:"article[data-role='list']",replaceElement:!0},layout:{el:"article[data-role='layout']",replaceElement:!0},seo:{el:"article[data-role='seo']",replaceElement:!0}},fields:["name","is_visible","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["collection","model"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"blog-category",apply:0,applyName:this.model.get("name")})},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,fixRelativeDragNDrop:!0,title:"Liste des catégories",selection:[{title:"Afficher",callback:this.showCategories.bind(this)},{title:"Masquer",callback:this.hideCategories.bind(this)},{title:"Supprimer",callback:this.deleteCategories.bind(this),confirm:!0}],scrollThreshold:920})),this.getOption("enableLayout")&&this.showChildView("layout",this.layoutSelector),this.getOption("enableSeo")&&this.showChildView("seo",new SeoView({model:this.model}))},start:function(){this.collection.fetch()},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},showCategories:function(e){return this.collection.bulkShow(e).done(function(){ControllerChannel.trigger("refresh:categories")})},hideCategories:function(e){return this.collection.bulkHide(e).done(function(){ControllerChannel.trigger("refresh:categories")})},deleteCategories:function(e){return this.collection.bulkDelete(e).done(function(){ControllerChannel.trigger("refresh:categories")})}});
},{"128":128,"141":141,"160":160,"172":172,"177":177,"27":27,"31":31,"608":608,"undefined":undefined}],190:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(31),Forms=require(608),NewRowView=Marionette.View.extend({template:require(179),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]'},templateContext:function(){return{link_id:"new"}},onActionSave:function(){var e=new this.collection.model;return e.save(Forms.extractFields(["is_enabled","url","name","description"],this)).done(function(){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),RowView=Marionette.View.extend({template:require(180),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},onActionDelete:function(){return this.model.destroy()},onActionSave:function(){return this.model.save(Forms.extractFields(["is_enabled","url","name","description"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(178),className:"container",service:"blog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Liste des blogrolls",selection:[{title:"Afficher",callback:this.showLinks.bind(this)},{title:"Masquer",callback:this.hideLinks.bind(this)},{title:"Supprimer",callback:this.deleteLinks.bind(this),confirm:!0}]}))},showLinks:function(e){return this.collection.bulkShow(e)},hideLinks:function(e){return this.collection.bulkHide(e)},deleteLinks:function(e){return this.collection.bulkDelete(e)},start:function(){this.collection.fetch()},onChildviewSortChange:function(e){this.collection.reOrder(e.list)}});
},{"128":128,"178":178,"179":179,"180":180,"31":31,"608":608,"undefined":undefined}],191:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),LayoutSelectorView=require(160),SelectView=require(139),FilePickerView=require(456),SeoView=require(141),CharCountBehavior=require(19),FormBehavior=require(27),WysiwygBehavior=require(28),SelectifyBehavior=require(26),SaveBehavior=require(24),Forms=require(608),format=require(607),Datepicker=require(21),TypeSelectorView=Marionette.View.extend({template:require(182),className:"post-article",tagName:"article",types:[],fields:[],type:"",post:null,ui:{select:"select[name='type']"},events:{"change @ui.select":function(){this.selectType(this.getUI("select").val())}},behaviors:[WysiwygBehavior,SelectifyBehavior,CharCountBehavior,SaveBehavior],initialize:function(e){this.mergeOptions(e,["type","typesSource","post"]),this.typesSource.done(function(e){this.types=e,this.selectType(this.type)}.bind(this))},templateContext:function(){return{type:this.type,types:this.types,post:this.post,fields:this.fields}},selectType:function(e){this.type=e;var t=[],i=_.find(this.types,function(e){return e.type==this.type}.bind(this));i&&i.fields&&(t=i.fields),_.each(this.getRegions(),function(e,t){"filepicker-"==t.substring(0,11)&&this.removeRegion(t)}.bind(this)),_.each(t,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.getRegion(t)||this.addRegion(t,'div[data-role="'+t+'"]')}}.bind(this)),this.fields=t,this.render()},onRender:function(){_.each(this.fields,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.showChildView(t,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,value:this.post.get(e.field),comment:e.help?e.help:null}))}}.bind(this))}});module.exports=Marionette.View.extend({template:require(181),className:"container container-large",service:"blog",behaviors:[FormBehavior,WysiwygBehavior,Datepicker],fields:["title","category_id","media_id","publication_date","is_visible","header","content","has_comments_open","type","text1","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15","slug","meta_title","meta_description","meta_keywords","js_head","js_body"],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0},categories:{el:"div[data-role='categories']",replaceElement:!0},type:{el:"article[data-role='type']",replaceElement:!0},image:{el:"div[data-role='image']",replaceElement:!0},seo:{el:"article[data-role='seo']",replaceElement:!0}},templateContext:function(){return{publication_date:format.formatDateTime(this.model.get("publication_date"))}},initialize:function(e){this.mergeOptions(e,["model","categories","typesSource"]),this.getOption("enableLayout")&&(this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"blog-post",apply:this.model.get("post_id"),applyName:this.model.get("title")})),this.listenTo(this.model,"change",this.render)},onBeforeRender:function(){this.getOption("enableLayout")&&this.layoutSelector.isAttached()&&this.detachChildView("layout")},onRender:function(){this.getOption("enableLayout")&&this.showChildView("layout",this.layoutSelector),this.showChildView("categories",new SelectView({collection:this.categories,selected:this.model.get("category_id"),name:"category_id"})),this.typesSource.done(function(e){0!=e.length&&this.showChildView("type",new TypeSelectorView({type:this.model.get("type"),post:this.model,typesSource:this.typesSource}))}.bind(this)),this.showChildView("image",new FilePickerView({fieldname:"media_id",fieldLabel:"Image",type:"image",value:this.model.get("thumb")?this.model.get("thumb").id:""})),this.getOption("enableSeo")&&this.showChildView("seo",new SeoView({model:this.model}))},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){var e=Forms.extractFields(this.fields,this);return this.getOption("enableSeo")&&Forms.isTmpSlug(e.slug)&&(e.slug=e.title),this.model.save(e,{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"139":139,"141":141,"160":160,"181":181,"182":182,"19":19,"21":21,"24":24,"26":26,"27":27,"28":28,"456":456,"607":607,"608":608,"undefined":undefined}],192:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),CollectionUtils=require(606),_=require("underscore"),RowActionsBehavior=require(31),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(184),className:"list-item",templateContext:function(){return{plural:function(e,t,i){return(e>1?i:t).replace("%d",e)},publication_date:format.formatLongDateTime(this.model.get("publication_date")),convertMediaPath:Session.convertMediaPath.bind(Session)}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(183),className:"container-fluid",service:"blog",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"-publication",filters:null,initialize:function(e){this.mergeOptions(e,["collection"]),this.filters={term:this.getOption("filters")&&this.getOption("filters").term?this.getOption("filters").term:null,category_id:this.getOption("filters")&&this.getOption("filters").category_id?this.getOption("filters").category_id:null}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des billets",selection:[{title:"Afficher",callback:this.showPosts.bind(this)},{title:"Masquer",callback:this.hidePosts.bind(this)},{title:"Supprimer",callback:this.deletePosts.bind(this),confirm:!0}],filters:[{id:"category",extraClassname:"select-category",title:"Toutes les catégories",collectionPromise:this.getOption("categories").promisedSelect(this.filters.category_id)},{id:"term",title:"Rechercher",type:"input",value:this.filters.term},{id:"add",title:"Ajouter un filtre",extraClassname:"filter-add",type:"dropdown",disableLabelUpdate:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:"publication",label:"Publication"},{value:"visible",label:"Visibilité"},{value:"type",label:"Type"},{value:"comments",label:"Nb de commentaires"}])}],xtra:[{id:"sort",extraClassname:"md-sort",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{label:"Publication",selected:!0,value:"-publication"},{label:"Modification",selected:!1,value:"-modification"}])}]}))},start:function(){var e={sort:this.sortOrder?this.sortOrder:null};null!=this.filters.term&&(e.term=this.filters.term),null!=this.filters.category_id&&(e.category_id=this.filters.category_id),null!=this.filters.type&&(e.type=this.filters.type),null!=this.filters.is_visible&&(e.is_visible=this.filters.is_visible),null!=this.filters.publication&&(e.publication_date_min=this.filters.publication[0],e.publication_date_max=this.filters.publication[1]),null!=this.filters.comments&&(e.comments_min=this.filters.comments[0],e.comments_max=this.filters.comments[1]),this.collection.fetch({reset:!0,data:e})},showPosts:function(e){return this.collection.bulkShow(e)},hidePosts:function(e){return this.collection.bulkHide(e)},deletePosts:function(e){return this.collection.bulkDelete(e,"delete")},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onCategoryFilterChange:function(e){this.filters.category_id=""!=e.value?e.value:null,this.start()},onTermFilterChange:function(e){this.filters.term=""!=e.value?e.value:null,this.start()},onVisibleFilterChange:function(e){this.filters.is_visible=e.value,this.start()},onTypeFilterChange:function(e){this.filters.type=e.value,this.start()},onCommentsFilterChange:function(e){this.filters.comments=e.value,this.start()},onPublicationFilterChange:function(e){this.filters.publication=e.value,this.start()},onAddFilterChange:function(e){var t;switch(e.value){case"publication":t={id:e.value,title:"jj/mm/aaaa",type:"interval",enableDatepicker:"date",prependText:["Publié entre","et"],canDelete:!0};break;case"visible":t={id:e.value,title:"Visibilité",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:!0,label:"Affiché"},{value:!1,label:"Masqué"}])};break;case"type":var i=new this.collection.model;t={id:e.value,title:"Type",type:"dropdown",canDelete:!0,collectionPromise:i.getTypes().then(function(e){return new CollectionUtils.SelectCollection(_.map(e,function(e){return{value:e.type,label:e.name}}))})};break;case"comments":t={id:e.value,title:"nb de fois",type:"interval",prependText:["Commenté entre","et"],canDelete:!0};break;default:return}e.model.collection.add(t)},onSortFilterChange:function(e){e.view.activeItem(e.value),this.sortOrder=e.value,this.start()}});
},{"128":128,"183":183,"184":184,"31":31,"606":606,"607":607,"undefined":undefined}],193:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(185),className:"container",service:"blog",behaviors:[FormBehavior],fields:["comments_allowed","comments_anonymous","comments_autopublish","comments_captcha","is_rss_enabled","rss_post_count"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"185":185,"27":27,"608":608,"undefined":undefined}],194:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Categories=require(165),Blog=require(164),Home=require(167),ActiveLinksBehaviors=require(18),ControllerChannel=Backbone.Radio.channel("controller");module.exports=Marionette.View.extend({template:require(186),service:"blog",behaviors:[ActiveLinksBehaviors],ui:{"btn-category-add":'a[data-role="category-add"]'},events:{"click @ui.btn-category-add":function(){this.trigger("add:category")}},is_loaded:null,initialize:function(e){this.categories=new Categories,this.home=new Home,this.overview=new Blog,this.is_loaded=!1,this.listenTo(ControllerChannel,"refresh:categories",this.onRefreshCategories),this.fetchAndRender()},fetchAndRender:function(){Backbone.$.when(this.categories.fetch(),this.home.fetch(),this.overview.fetch()).done(function(){this.is_loaded=!0,this.render()}.bind(this)).fail(function(){console.log("FAIL")})},templateContext:function(){return{is_loaded:this.is_loaded,categories:this.categories.toJSON(),home:this.home.toJSON(),overview:this.overview.toJSON()}},onRefreshCategories:function(){Backbone.$.when(this.categories.fetch(),this.home.fetch()).done(function(){this.render()}.bind(this))},onRefreshPosts:function(e){return null==e?void this.overview.fetch().done(function(){this.render()}.bind(this)):(this.overview.get("posts_count")+e<0?this.overview.set("posts_count",0):this.overview.set("posts_count",this.overview.get("posts_count")+e),void this.render())}});
},{"164":164,"165":165,"167":167,"18":18,"186":186,"undefined":undefined}],195:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Brand=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/catalog/brands",idAttribute:"brand_id",defaults:{brand_id:null,name:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/catalog/brands",model:Brand,suggest:function(e,t){return Backbone.ajax({url:"sites/@site/suggest/catalog/brands",data:{term:e,limit:t||5}}).then(function(e){return _.map(e,function(e){return{brand_id:e.brand_id,name:e.name}})})}});
},{"606":606,"undefined":undefined}],196:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/catalog",isNew:function(){return!1},defaults:{products_count:0}});
},{"606":606}],197:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606);module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/catalog/categories",model:require(198),bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkGroupAction(this,function(e){return Backbone.ajax({url:"sites/@site/catalog/categories",method:"DELETE",data:{categories:e}})},e,100).done(function(e){this.remove(e)}.bind(this))},suggest:function(e,t,i){return Backbone.ajax({url:"sites/@site/suggest/catalog/categories",data:{term:e,exclude:i,limit:t||5}}).then(function(e){return _.map(e,function(e){return{category_id:e.category_id,name:e.name}})})}});
},{"198":198,"606":606,"undefined":undefined}],198:[function(require,module,exports){
var CollectionUtils=require(606),_=require("underscore");module.exports=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/catalog/categories",idAttribute:"category_id",defaults:{category_id:null,name:"",description:"",media_id:null,is_visible:!1,is_main:!1,slug:"",product_count:null,creation_date:"",creation_date_f:"",creation_date_timestamp:null,modification_date:"",modification_date_f:"",modification_date_timestamp:null,meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null,service_path:""}});
},{"606":606,"undefined":undefined}],199:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Comment=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/catalog/comments",idAttribute:"comment_id",defaults:{comment_id:null,is_visible:!1,date:"",comment:"",origin:"",author:"",ip:"",rate:null,reverse_host:"",product_id:null,product_name:"",customer_id:null,customer_name:"",customer_email:"",customer_nickname:"",avatar_url:"",avatar_thumb_url:""}});module.exports=CollectionUtils.KiubiCollection.extend({product_id:null,url:function(){return this.product_id>0?"sites/@site/catalog/products/"+this.product_id+"/comments":"sites/@site/catalog/comments"},model:Comment,bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkGroupAction(this,function(e){return Backbone.ajax({url:"sites/@site/catalog/comments",method:"DELETE",data:{comments:e}})},e,100).done(function(e){this.remove(e)}.bind(this))}});
},{"606":606,"undefined":undefined}],200:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),api=require(603),File=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/catalog/downloads/files",idAttribute:"media_id",file:null,uploadPreview:null,uploadProgression:{prct:0,status:"pending",error:""},defaults:{media_id:null,name:"",folder_id:0,description:"",original_name:"",type:"",ext:"",mime:"",weight:"",width:"",height:"",creation_date:"",modification_date:""},setFile:function(e){if(this.setProgression(0,"pending"),api.max_post_size&&e.size>api.max_post_size)return!1;if(this.set("name",e.name),this.set("ext",e.name.split(".").pop()),this.set("weight",e.size),this.set("type",e.type.match(/^image\//)?"image":"file"),this.file=e,"image"!=this.get("type"))return!0;var i=this,t=new Image,o=self.URL||self.webkitURL||self;if(o.createObjectURL)return t.onload=function(){i.uploadPreview=this.src,i.trigger("change:upload"),delete this},t.src=o.createObjectURL(e),!0;var r=new FileReader;return r.onload=function(e){t.onload=function(){i.uploadPreview=i.createThumbnail(this),i.trigger("change:upload"),delete this},t.src=e.target.result},r.readAsDataURL(e),!0},createThumbnail:function(e){var i=document.createElement("canvas");i.width=320,i.height=i.width/e.width*e.height;var t=i.getContext("2d",{alpha:!1});return t.drawImage(e,0,0,i.width,i.height),i.toDataURL("image/jpeg",.5)},upload:function(){var e=this,i=Backbone.$.Deferred(),t=this.file;if(this.setProgression(0,"pending"),api.max_post_size&&t.size>api.max_post_size)return i.reject("Ce fichier est trop volumineux"),this.setProgression(100,"fail","Ce fichier est trop volumineux"),i.promise();var o=new FormData;return o.append("name",e.get("name")),o.append("folder_id",e.get("folder_id")),o.append("file",t),Backbone.ajax({method:"POST",url:e.url(),contentType:!1,processData:!1,dataType:"json",xhr:function(){var i=Backbone.$.ajaxSettings.xhr();return i.upload.onprogress=function(i){i.lengthComputable?e.setProgression(i.loaded/i.total*100,"uploading"):e.setProgression(50,"uploading")},i.upload.onload=function(){e.setProgression(100,"uploading")},i},data:o}).done(function(t){if(t&&_.isNumber(t)){if(e.set("media_id",t),e.get("name")&&e.get("name").indexOf(".")>=0){var o=e.get("name").split(".").slice(0,-1).join(".");e.set("name",o)}return e.setProgression(100,"done"),void i.resolve()}e.setProgression(100,"fail"),i.reject("Fail")}).fail(function(t){e.setProgression(100,"fail","Erreur inattendue"),i.reject("Fail")}),i.promise()},setProgression:function(e,i,t){this.uploadProgression.prct=e,this.uploadProgression.status=i,t&&(this.uploadProgression.error=t),this.trigger("change:upload")}});module.exports=CollectionUtils.KiubiCollection.extend({folder_id:null,url:function(){return this.folder_id?"sites/@site/catalog/downloads/folders/"+this.folder_id+"/files":"sites/@site/catalog/downloads/files"},model:File,upload:function(){var e=[];return this.each(function(i){"pending"==i.uploadProgression.status&&e.push(i.upload())}),Backbone.$.when.apply(this,e)},bulkMove:function(e,i){return CollectionUtils.bulkAction(this,function(e){return e.get("folder_id")==i?Backbone.$.Deferred().resolve():e.save({folder_id:i},{patch:!0,wait:!0})},e)}});
},{"603":603,"606":606,"undefined":undefined}],201:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(606),_=require("underscore"),Folder=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/catalog/downloads/folders",idAttribute:"folder_id",defaults:{folder_id:null,name:"",folder_key:"",parent_folder_id:0}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/catalog/downloads/folders",model:Folder,getMenuTree:function(){var e={model:null,childs:[]},t={};return this.each(function(l){var i={model:l,childs:[]};t["i"+l.get("folder_id")]=i;var r;r=0==l.get("parent_folder_id")?e:t["i"+l.get("parent_folder_id")],r.childs.push(i)}),e},selectPayload:function(){var e=[],t={};return this.each(function(l){var i=1;l.get("parent_folder_id")>0&&(i=1+t["p"+l.get("parent_folder_id")]),t["p"+l.get("folder_id")]=i;var r={value:l.get("folder_id"),label:l.get("name"),indent:i};e.push(r)}),e},promisedSelect:function(e){var t=this;return this.fetch({data:{extra_fields:"recursive"}}).then(function(){var l=new CollectionUtils.SelectCollection,i=[],r={};return t.each(function(t){var l=1;t.get("parent_folder_id")>0&&(l=1+r["p"+t.get("parent_folder_id")]),r["p"+t.get("folder_id")]=l;var d={value:t.get("folder_id"),label:t.get("name"),indent:l,selected:e&&t.get("folder_id")==e};i.push(d)}),l.add(i),l})}});
},{"606":606,"undefined":undefined}],202:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/catalog/home",isNew:function(){return!1},defaults:{name:"",description:"",is_visible:!1,modification_date:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null,service_path:""}});
},{"606":606}],203:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Image=CollectionUtils.KiubiModel.extend({urlRoot:function(){return"sites/@site/catalog/products/"+this.get("product_id")+"/images"},idAttribute:"media_id",defaults:{media_id:null,product_id:null,position:0,name:"",original_name:""}});module.exports=CollectionUtils.KiubiCollection.extend({product_id:null,url:function(){return"sites/@site/catalog/products/"+this.product_id+"/images"},model:Image,reOrder:function(i){var t=1;return _.each(i,function(i){var e=this.get(i);e&&e.set("position",t++)}.bind(this)),Backbone.ajax({url:"sites/@site/catalog/products/"+this.product_id+"/images",method:"PUT",data:{order:i}})}});
},{"606":606,"undefined":undefined}],204:[function(require,module,exports){
var CollectionUtils=require(606),_=require("underscore"),Linked=CollectionUtils.KiubiModel.extend({urlRoot:function(){return"sites/@site/catalog/products/"+this.get("product_id")+"/linked"},idAttribute:"linked_product_id",defaults:{product_id:null,link:"",linked_product_id:null,name:"",categories:[]}});module.exports=CollectionUtils.KiubiCollection.extend({product_id:null,url:function(){return"sites/@site/catalog/products/"+this.product_id+"/linked"},model:Linked});
},{"606":606,"undefined":undefined}],205:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore");module.exports=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/catalog/products",idAttribute:"product_id",previewLink:null,meta:{},parse:function(t){return this.meta={},"meta"in t&&t.meta.base_price&&(this.meta={base_price:t.meta.base_price,currency:t.meta.currency}),"data"in t?null===t.data?{}:_.isNumber(t.data)?{product_id:t.data}:(t.meta&&t.meta.link&&t.meta.link.preview&&(this.previewLink=t.meta.link.preview),t.data.variants&&_.each(t.data.variants,function(e){e.product_id=t.data.product_id}),t.data):t},defaults:{product_id:null,is_spotlight:!1,available_date:null,is_visible:!1,stock:0,view_count:null,is_virtual:!1,brand_id:null,brand_name:"",price_ex_vat_min:0,price_ex_vat_max:0,price_inc_vat_min:0,price_inc_vat_max:0,price_ex_vat_min_label:"",price_ex_vat_max_label:"",price_inc_vat_min_label:"",price_inc_vat_max_label:"",extra_shipping:0,comments_count:0,rate:0,bought_count:null,variants_count:null,soldout_count:null,is_discount:!1,price_base_ex_vat:0,price_base_inc_vat:0,price_base_ex_vat_label:"",price_base_inc_vat_label:"",creation_date:null,modification_date:null,name:"",description:"",header:"",type:null,main_media_id:null,slug:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null,text1:"",text2:"",text3:"",text4:"",text5:"",text6:"",text7:"",text8:"",text9:"",text10:"",text11:"",text12:"",text13:"",text14:"",text15:"",categories:[],variants:[],images:[],service_path:""},getTypes:function(t){t=t||{};var e={};return t.structure&&(e.extra_fields="structure"),Backbone.ajax({url:"sites/@site/catalog/products_types",data:e}).then(function(t){return _.map(t,function(t){return{type:t.type,name:t.name,position:t.position,fields:t.fields||[]}})})},duplicate:function(t){var e=this;return Backbone.ajax({url:"sites/@site/catalog/products/"+this.get("product_id"),method:"POST",data:t}).then(function(t,a){var i=e.clone();return i.set(i.parse({data:t,meta:a})),i})}});
},{"606":606,"undefined":undefined}],206:[function(require,module,exports){
function checkExport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/export/catalog/products/"+t,method:"GET"}).then(function(e,t){return e})}var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Job=require(476);module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/catalog/products",model:require(205),bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkGroupAction(this,function(e){return Backbone.ajax({url:"sites/@site/catalog/products",method:"DELETE",data:{products:e}})},e,100).done(function(e){this.remove(e)}.bind(this))},suggest:function(e,t,o){return Backbone.ajax({url:"sites/@site/suggest/catalog/products",data:{term:e,exclude:o,limit:t||5}}).then(function(e){return _.map(e,function(e){return{product_id:e.product_id,name:e.name}})})},exportAll:function(e){return Backbone.ajax({url:"sites/@site/export/catalog/products",method:"POST",data:e}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkExport(t)})})}});
},{"205":205,"476":476,"606":606,"undefined":undefined}],207:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/catalog",isNew:function(){return!1},defaults:{is_enabled:!1,currency:"EUR",display_taxes:!1,is_duty_free:!1,comments_allowed:!1,comments_captcha:!1,comments_anonymous:!1,comments_autopublish:!1,require_auth:!1}});
},{"606":606}],208:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Tag=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/catalog/tags",idAttribute:"tag_id",defaults:{tag_id:null,name:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/catalog/tags",model:Tag,suggest:function(t,e,i){return Backbone.ajax({url:"sites/@site/suggest/catalog/tags",data:{term:t,exclude:i,limit:e||5}}).then(function(t){return _.map(t,function(t){return{tag_id:t.tag_id,name:t.name}})})}});
},{"606":606,"undefined":undefined}],209:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),_string=require("underscore.string"),Tax=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/catalog/taxes",idAttribute:"tax_id",defaults:{tax_id:null,vat_rate:0,is_default:!1}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/catalog/taxes",model:Tax,selectPayload:function(){return _.map(this.toJSON(),function(e){return{value:e.tax_id,label:_string.numberFormat(parseFloat(e.vat_rate),2,","," ")+" %"}})}});
},{"606":606,"undefined":undefined}],210:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Variant=CollectionUtils.KiubiModel.extend({urlRoot:function(){return"sites/@site/catalog/products/"+this.get("product_id")+"/variants"},idAttribute:"variant_id",defaults:{variant_id:null,product_id:0,name:"",reference:"",gtin:"",condition:"",weight:0,tax_id:null,price_ex_vat:0,price_inc_vat:0,price_discount_ex_vat:0,price_discount_inc_vat:0,price_ex_vat_label:"",price_inc_vat_label:"",price_discount_ex_vat_label:"",price_discount_inc_vat_label:"",price_ecotax:0,price_ecotax_label:"",is_stock_unlimited:!1,stock:0,media_id:null,file_id:null}});module.exports=CollectionUtils.KiubiCollection.extend({product_id:null,url:function(){return"sites/@site/catalog/products/"+this.product_id+"/variants"},model:Variant,reOrder:function(i){return Backbone.ajax({url:"sites/@site/catalog/products/"+this.product_id+"/variants",method:"PUT",data:{order:i}})}});
},{"606":606,"undefined":undefined}],211:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Name=CollectionUtils.KiubiModel.extend({idAttribute:"name",defaults:{name:null},rename:function(e){return Backbone.ajax({url:"sites/@site/catalog/variants",method:"PUT",data:{from:this.get("name"),to:e}}).done(function(){this.set("name",e),this.trigger("sync")}.bind(this))}});module.exports=CollectionUtils.KiubiCollection.extend({url:function(){return"sites/@site/catalog/variants"},model:Name,suggest:function(e,t){return Backbone.ajax({url:"sites/@site/suggest/catalog/variants",data:{term:e,limit:t||5}}).then(function(e){return _.map(e,function(e){return{name:e.name}})})}});
},{"606":606,"undefined":undefined}],212:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var t=[];if(e.addCategoryOnTop&&t.push({title:"Ajouter une catégorie",callback:"actionNewCategory"}),t=t.concat([{title:"Ajouter un produit",callback:["actionNewProduct",e.targetCategory||null]},{title:"Ajouter un produit virtuel",callback:["actionNewDownload",e.targetCategory||null]}]),e.addCategoryOnTop||t.push({title:"Ajouter une catégorie",callback:"actionNewCategory"}),e.duplicateProduct&&t.push({title:"Dupliquer",icon:"md-duplicate",isOptional:!0,callback:["actionDuplicateProduct",e.duplicateProduct]}),e.preview&&t.push({title:"Aperçu",icon:"md-launch",isOptional:!0,callback:["actionPreview",e.preview]}),e.addSave){var i={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};t.length<=1?t.push(i):t.splice(1,0,i)}return t}function HeaderTabscategory(e,t){return[{title:"Catégorie",url:"/catalog/categories/"+e,icon:"md-catalog-categ"},{title:"Produits en vente",url:"/catalog/categories/"+e+"/products",icon:"md-catalog-detail"}]}function HeaderTabsProduct(e,t,i){return[{title:"Produit",url:"/catalog/products/"+e,icon:"md-catalog-detail"},{title:"Produits associés",url:"/catalog/products/"+e+"/linked",icon:"md-catalog-linked"},{title:t+" "+(t>1?"Évaluations":"Évaluation"),url:"/catalog/products/"+e+"/comments",icon:"md-rating"}]}function HeaderTagsTabs(){return[{title:"Variantes",url:"/catalog/variants",icon:"md-catalog-variants"},{title:"Tags",url:"/catalog/tags",icon:"md-catalog-tags"},{title:"Marques",url:"/catalog/brands",icon:"md-catalog-brands"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Forms=require(608),Router=require(612),Controller=require(34),Catalog=require(196),Category=require(198),Home=require(202),Categories=require(197),Brands=require(195),Tags=require(208),Product=require(205),Products=require(206),Variants=require(210),VariantsNames=require(211),Images=require(203),Comments=require(199),Taxes=require(209),Linked=require(204),Settings=require(207),Files=require(200),Folders=require(201),TierPrices=require(479),ProductView=require(253),HomeView=require(249),CategoryView=require(247),ProductsView=require(254),CategoriesView=require(246),CommentsView=require(248),LinkedView=require(250),SettingsView=require(256),TaxesView=require(259),TagsView=require(258),BrandsView=require(245),VariantsView=require(260),SelectModalView=require(461),PublishModalView=require(463),SidebarMenuView=require(257),CatalogController=Controller.extend({sidebarMenuService:"catalog",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Catalogue",href:"/catalog"}],showProductsByCategory:function(e,t){this.showGlobalProducts(t,e)},showProducts:function(e){this.showGlobalProducts(e,null)},showGlobalProducts:function(e,t){var i,o,a=this.parseQueryString(e,{term:null,stock:null,tier_prices:null});t=parseInt(t),t?(o=new Category({category_id:t}),i=o.fetch()):i=Backbone.$.Deferred().resolve();var r=Backbone.Radio.channel("app").request("ctx:session");i.done(function(){var e=new Products,i=new ProductsView({collection:e,categories:new Categories,tags:new Tags,brands:new Brands,tier_prices:r.hasFeature("tier_prices")&&new TierPrices,category_id:t?t:null,filters:a});this.listenTo(e,"bulk:delete",function(e){this.triggerSidebarMenu("refresh:products",-e.ids.length)}),this.navigationController.showContent(i),i.start(),this.setHeader({title:t?o.get("name"):"Tous les produits"},getHeadersAction({targetCategory:t?t:null}),t?HeaderTabscategory(t,o.get("product_count")):null)}.bind(this)).fail(this.failHandler("Catégorie introuvable"))},showProduct:function(e){var t=new Taxes,i=new Product({product_id:e}),o=Backbone.Radio.channel("app").request("ctx:session");Backbone.$.when(t.fetch(),i.fetch({data:{extra_fields:"texts,variants,price_label,images,defaults"+(o.hasFeature("tier_prices")?",tier_prices":"")}})).done(function(){var a=new Variants;a.product_id=i.get("product_id");var r=new Images;r.product_id=i.get("product_id");var n=new ProductView({model:i,typesSource:i.getTypes({structure:!0}),categories:new Categories,brands:new Brands,tags:new Tags,variants:a,taxes:t,tier_prices:o.hasFeature("tier_prices")&&new TierPrices,images:r,enableSeo:o.hasScope("site:seo"),enableLayout:o.hasScope("site:layout")});this.listenTo(i,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0)}.bind(this)),this.listenTo(i,"destroy",function(){this.triggerSidebarMenu("refresh:products",-1),this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog")}),this.navigationController.showContent(n),this.setHeader({title:i.get("name")},getHeadersAction({preview:i,addSave:!0,duplicateProduct:e}),HeaderTabsProduct(e,i.get("comments_count"),i.get("rate")))}.bind(this)).fail(this.failHandler("Produit introuvable"))},actionNewProduct:function(e){var t=new Product({name:"Intitulé par défaut",slug:Forms.tmpSlug(),is_visible:!1,stock:null,categories:e?[e]:[]});return t.save().done(function(){this.triggerSidebarMenu("refresh:products",1),this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog/products/"+t.get("product_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},actionNewDownload:function(e){var t=new Files,i=new((new Files).model)({folder_id:8}),o=new SelectModalView({collection:t,model:i,type:"file",folders:new Folders,rememberFolder:!1});this.listenTo(o,"close:modal",function(){var t=new Product({name:"Intitulé par défaut",slug:Forms.tmpSlug(),is_visible:!1,is_virtual:!0,file_id:o.model.get("media_id"),stock:null,categories:e?[e]:[]});return t.save().done(function(){this.triggerSidebarMenu("refresh:products",1),this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog/products/"+t.get("product_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))}),this.listenTo(o,"action:modal",function(t){this.actionPublishDownload(e,t.currentFolder)}.bind(this)),this.navigationController.showInModal(o,{title:"Ajouter une fichier",action:{title:"Publier"},modalClass:"mediatheque"})},actionPublishDownload:function(e,t){var i=new Files;i.folder_id=t?t:8;var o=(new((new Files).model),new PublishModalView({isMultiFiles:!1,collection:i}));this.listenTo(o,"uploaded:files",function(t){var i=new Product({name:"Intitulé par défaut",slug:Forms.tmpSlug(),is_visible:!1,is_virtual:!0,file_id:t.at(0).get("media_id"),stock:null,categories:e?[e]:[]});return i.save().done(function(){this.triggerSidebarMenu("refresh:products",1),this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog/products/"+i.get("product_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))}),this.navigationController.showInModal(o,{title:"Médiathèque",modalClass:"mediatheque",action:{title:"Publier un fichier"}})},actionDuplicateProduct:function(e){var t=new Product({product_id:e}),i=this.navigationController;return t.fetch().then(function(){t.duplicate({name:"Copie de "+t.get("name")}).done(function(e){i.showOverlay(300),i.navigate("/catalog/products/"+e.get("product_id"))}).fail(function(e){i.showErrorModal(e)})},function(e){i.showErrorModal(e)})},showLinked:function(e){var t=new Product({product_id:e});t.fetch().done(function(){var i=new Linked;i.product_id=e;var o=new LinkedView({collection:i,products:new Products});o.start(),this.navigationController.showContent(o),this.setHeader({title:t.get("name")},getHeadersAction({preview:t,duplicateProduct:e}),HeaderTabsProduct(e,t.get("comments_count"),t.get("rate")))}.bind(this)).fail(this.failHandler("Produit introuvable"))},showCategory:function(e){var t=new Category({category_id:e});t.fetch({data:{extra_fields:"defaults"}}).done(function(){var i=Backbone.Radio.channel("app").request("ctx:session"),o=new CategoryView({model:t,enableSeo:i.hasScope("site:seo"),enableLayout:i.hasScope("site:layout")});this.listenTo(t,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),e.hasChanged("name")||e.hasChanged("is_visible")}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog")}),this.navigationController.showContent(o),this.setHeader({title:t.get("name")},getHeadersAction({preview:t,addSave:!0,targetCategory:e}),HeaderTabscategory(e,t.get("product_count")))}.bind(this)).fail(this.failHandler("Catégorie introuvable"))},actionNewCategory:function(){var e=new Category({name:"Intitulé par défaut",slug:Forms.tmpSlug(),is_visible:!1});return e.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog/categories/"+e.get("category_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showHome:function(){var e=new Home;e.fetch({data:{extra_fields:"defaults"}}).done(function(){var t=Backbone.Radio.channel("app").request("ctx:session"),i=new HomeView({model:e,enableSeo:t.hasScope("site:seo"),enableLayout:t.hasScope("site:layout")});this.listenTo(e,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0)}.bind(this)),this.navigationController.showContent(i),this.setHeader({title:e.get("name")},getHeadersAction({preview:e,addSave:!0}))}.bind(this)).fail(this.failHandler("Accueil du catalogue introuvable"))},showCategories:function(){var e=new Categories;e.fetch().done(function(){var t=new CategoriesView({collection:e});t.start(),this.navigationController.showContent(t),this.setHeader({title:"Toutes les catégories"},getHeadersAction({addCategoryOnTop:!0}))}.bind(this)).fail(this.failHandler("Catégories introuvables"))},showComments:function(e){var t,i=new Comments,o="Toutes les évaluations",a=null,r={addComments:!0};if(e>0){i.product_id=e;var n=new Product({product_id:e});t=n.fetch().done(function(){o=n.get("name"),a=HeaderTabsProduct(e,n.get("comments_count"),n.get("rate"))}),r.duplicateProduct=e}else t=Backbone.$.Deferred().resolve();t.done(function(){var e=new CommentsView({collection:i});this.navigationController.showContent(e),e.start(),this.setHeader({title:o},getHeadersAction(r),a)}.bind(this)).fail(this.failHandler("Produit introuvable"))},showSettings:function(){var e=new Settings;e.fetch().done(function(){var t=new SettingsView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Paramètres du catalogue"},getHeadersAction({addSave:!0}))}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showTaxes:function(){var e=new Settings;e.fetch().done(function(){var t=new TaxesView({collection:new Taxes,model:e});this.navigationController.showContent(t),this.setHeader({title:"Gestion des taxes"},getHeadersAction({addSave:!0}))}.bind(this)).fail(this.failHandler("Gestion des taxes introuvable"))},showTags:function(){var e=new TagsView({collection:new Tags});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Tous les tags"},getHeadersAction(),HeaderTagsTabs())},showBrands:function(){var e=new BrandsView({collection:new Brands});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Toutes les marques"},getHeadersAction(),HeaderTagsTabs())},showVariants:function(){var e=new VariantsView({collection:new VariantsNames});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Toutes les variantes"},getHeadersAction(),HeaderTagsTabs())},actionPreview:function(e){window.open(e.previewLink)}});module.exports=Router.extend({controller:new CatalogController,appRoutes:{catalog:"showProducts","catalog/products/:id":"showProduct","catalog/products/:id/comments":"showComments","catalog/products/:id/linked":"showLinked","catalog/categories":"showCategories","catalog/home":"showHome","catalog/categories/:id":"showCategory","catalog/categories/:id/products":"showProductsByCategory","catalog/comments":"showComments","catalog/settings":"showSettings","catalog/taxes":"showTaxes","catalog/tags":"showTags","catalog/brands":"showBrands","catalog/variants":"showVariants"},onRoute:function(e){var t=Backbone.Radio.channel("app").request("ctx:session");return t.hasScope("site:catalog")&&t.hasFeature("catalog")?void this.controller.showSidebarMenu():(this.controller.navigationController.navigate("/"),!1)}});
},{"195":195,"196":196,"197":197,"198":198,"199":199,"200":200,"201":201,"202":202,"203":203,"204":204,"205":205,"206":206,"207":207,"208":208,"209":209,"210":210,"211":211,"245":245,"246":246,"247":247,"248":248,"249":249,"250":250,"253":253,"254":254,"256":256,"257":257,"258":258,"259":259,"260":260,"34":34,"461":461,"463":463,"479":479,"608":608,"612":612,"undefined":undefined}],213:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article data-role="list"></article>';return __p};
},{"undefined":undefined}],214:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters align-items-center" data-role="list"><div class="col-auto"><input id="selection_'+(null==(__t=brand_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=brand_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=brand_id)?"":_.escape(__t))+'"></label></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+'</h4></div><div class="col-4"><span class="text-muted">—</span></div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="required" for="name">Intitulé de la marque</label><p>Changer l\'intitulé de la marque permet de renommer la marque sur tous les produits auxquels elle est associée.</p><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],215:[function(require,module,exports){
arguments[4][213][0].apply(exports,arguments)
},{"213":213,"undefined":undefined}],216:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto" style="width: 27px"></div><div class="col-auto"><div class="media-object md-icon md-product img-default catalog-home"></div></div><div class="col-auto" style="width: 23px"></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_visible?" <span>La page d'accueil du catalogue peut être modifiée mais ne peut pas être déplacée ou supprimée</span> ":' <span class="text-danger">Masqué</span> ',__p+=' </div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/catalog/home" role="button">Détail</a></div></div></div>';return __p};
},{"undefined":undefined}],217:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="section_'+(null==(__t=category_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=category_id)?"":_.escape(__t))+'" type="checkbox"><label for="section_'+(null==(__t=category_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><div class="media-object md-icon md-image img-default"></div> ',media_id&&(__p+=' <div class="media-object no-ratio"><img alt="" src="'+(null==(__t=convertMediaPath("/media/miniature/"+media_id))?"":__t)+'"></div> '),__p+=' </div><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_visible?(__p+=" ",__p+=short_desc?" <span>"+(null==(__t=short_desc)?"":__t)+"</span> ":' <span class="text-muted">La catégorie n\'a pas de description</span> ',__p+=" "):__p+=' <span class="text-danger">Masqué</span> ',__p+=' </div><div class="col-4"><span class="text-muted">—</span></div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/catalog/categories/'+(null==(__t=category_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],218:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><header class="post-header"><h1>Détail de la catégorie</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé</label><input class="form-control" id="name" name="name" placeholder="Intitulé de catégorie tel qu\'il apparaîtra dans le menu" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div data-role="image"></div><div class="form-group"><label for="description">Description</label><textarea class="form-control" id="description" name="description" placeholder="Placeholder du contenu" rows="21" data-role="wysiwyg">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article data-role="seo"></article></div><div class="col-lg-4 col-12"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" ',is_visible&&(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" ',is_visible||(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],219:[function(require,module,exports){
arguments[4][174][0].apply(exports,arguments)
},{"174":174,"undefined":undefined}],220:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col-auto"><input id="selection_'+(null==(__t=comment_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=comment_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=comment_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><div class="media-object md-icon md-face img-default rounded-circle img-avatar"></div><div class="media-object rounded-circle img-avatar"><img alt="" src="'+(null==(__t=convertMediaPath(avatar_thumb_url))?"":__t)+'&fallback=false"></div></div><div class="col item-body"> ',customer_id>0?(__p+=" <h4>"+(null==(__t=customer_name)?"":_.escape(__t)),""!=customer_nickname&&(__p+=" ("+(null==(__t=customer_nickname)?"":_.escape(__t))+")"),__p+=" ",__p+="admin"==origin?' <div class="md-icon md-user"></div> ':' <a href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'" class="md-icon md-person"></a> ',__p+=" </h4> "):__p+=" <h4>"+(null==(__t=author)?"":_.escape(__t))+"</h4> ",__p+=" ",__p+=is_visible?" "+(null==(__t=date)?"":_.escape(__t))+" ":' <span class="text-danger">Masqué</span> ',__p+=' dans <a href="/catalog/products/'+(null==(__t=product_id)?"":_.escape(__t))+'">'+(null==(__t=product_name)?"":_.escape(__t))+'</a></div><div class="col-4 no-white-space"><div><div class="rating"><span class="md-icon md-rating-'+(null==(__t=rate)?"":_.escape(__t))+'"></span></div></div></div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><div data-role="list"><blockquote>'+(null==(__t=comment2br)?"":__t)+'</blockquote></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="form-group"><label>Informations générales</label><p class="form-control-static">Posté le '+(null==(__t=date)?"":_.escape(__t))+' dans <a href="/catalog/products/'+(null==(__t=product_id)?"":_.escape(__t))+'">'+(null==(__t=product_name)?"":_.escape(__t))+'</a></p></div><div class="form-group"><label>Note</label><div class="form-control-static rating"><span class="md-icon md-rating-'+(null==(__t=rate)?"":_.escape(__t))+'"></span></div></div><div class="form-group"><label>IP | Host</label><p class="form-control-static">'+(null==(__t=ip)?"":_.escape(__t))+" | "+(null==(__t=reverse_host)?"":_.escape(__t))+'</p></div><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" class="visible">Visible</label><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" class="not-visible">Masqué</label></div></div><div class="form-group"><label>Auteur</label><p class="form-control-static">'+(null==(__t=author)?"":_.escape(__t))+'</p></div><div class="form-group"><label class="required" for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment">Commentaire</label><textarea class="form-control" rows="5" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment" name="comment" placeholder="Obligatoire">'+(null==(__t=comment)?"":_.escape(__t))+'</textarea></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],221:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><header class="post-header"><h1>Détail de la page d\'accueil</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé</label><input class="form-control" id="name" name="name" placeholder="Intitulé de l\'accueil tel qu\'il apparaîtra dans le menu" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div></div><footer class="post-footer"></footer></article><article data-role="seo"></article></div><div class="col-lg-4 col-12"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" ',is_visible&&(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" ',is_visible||(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],222:[function(require,module,exports){
arguments[4][213][0].apply(exports,arguments)
},{"213":213,"undefined":undefined}],223:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-6"><div class="form-group"><label for="linked_product_id">Produit à associer</label><div data-role="product"></div></div></div><div class="col-6"><div class="form-group"><label for="link">Affichage</label><select name="link" id="link" data-style="selectify"><option value="atob">Sur la fiche du produit principal (A &rarr; B)</option><option value="btoa">Sur la fiche du produit associé (B &rarr; A)</option><option value="both">Affichage réciproque (A &#8644; B)</option></select></div></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show"><span class="page-add md-icon md-add-page"></span>Ajouter un produit associé</a></div>';return __p};
},{"undefined":undefined}],224:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col-auto"><div class="media-object md-icon md-image img-default"></div> ',main_media_id&&(__p+='<div class="media-object no-ratio"><img alt="" src="'+(null==(__t=convertMediaPath("/media/miniature/"+main_media_id))?"":__t)+'"></div>'),__p+=" "+(null==(__t=is_spotlight?'<div class="corner-color is-spotlight"><div class="corner-color-content"></div></div>':"")?"":__t)+' </div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_visible?(__p+=" ",main_category&&(__p+=' <a href="/catalog/categories/'+(null==(__t=main_category.category_id)?"":_.escape(__t))+'">'+(null==(__t=main_category.name)?"":_.escape(__t))+"</a> "),__p+=" ",sec_categories.length>0&&(__p+=' et <a href="#" data-toggle="popover" data-placement="right" data-trigger="focus" data-container="#content" data-html="true" data-content="'+(null==(__t=sec_categories.join(""))?"":_.escape(__t))+'">'+(null==(__t=sec_categories.length)?"":_.escape(__t))+" +</a> "),__p+=" "):__p+=' <span class="text-danger">Masqué</span> ',__p+=' </div><div class="col-3"><select name="link" data-style="selectify"><option value="atob" '+(null==(__t="atob"==link?'selected="selected"':"")?"":__t)+'>A &rarr; B</option><option value="btoa" '+(null==(__t="btoa"==link?'selected="selected"':"")?"":__t)+'>B &rarr; A</option><option value="both" '+(null==(__t="both"==link?'selected="selected"':"")?"":__t)+'>A &#8644; B</option></select></div><div class="col-auto"><a href="#" data-role="action" data-action="delete" class="md-icon md-delete float-right"></a></div></div>';return __p};
},{"undefined":undefined}],225:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><div class="row no-gutters"><div class="col filters-options"><div class="btn-group has-feedback w-100"><input class="form-control mw-100" name="term" placeholder="Rechercher"> <span class="md-feedback md-search"></span></div></div></div></header><div data-role="list"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],226:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col item-body d-flex"><h4>'+(null==(__t=name)?"":_.escape(__t))+'</h4></div><div class="col-auto"> ',__p+=is_selected?' <span class="md-icon md-check text-info float-right"></span> ':' <a class="btn btn-primary float-right" href="#" role="button" data-role="select">Choisir</a> ',__p+=" </div></div>";return __p};
},{"undefined":undefined}],227:[function(require,module,exports){
arguments[4][225][0].apply(exports,arguments)
},{"225":225,"undefined":undefined}],228:[function(require,module,exports){
arguments[4][226][0].apply(exports,arguments)
},{"226":226,"undefined":undefined}],229:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><form data-role="part"><article class="post-article"><header class="post-header"><h1>Détail du produit</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé du produit tel qu\'il apparaîtra dans le catalogue"></div><div class="form-group"><label for="header">Chapô</label><textarea id="header" name="header" class="form-control" rows="14" placeholder="Placeholder du contenu" data-role="wysiwyg" data-wysiwyg-toolbar="micro">'+(null==(__t=header)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label for="description">Description</label><textarea id="description" name="description" class="form-control" rows="21" placeholder="Placeholder du contenu" data-role="wysiwyg">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article data-role="type"></article></form><article data-role="variants"></article><article data-role="images"></article><form data-role="part"><article data-role="seo"></article></form></div><div class="col-lg-4 col-12"><form data-role="part"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div><div class="form-group has-feedback post-subcontent"><label for="available_date">Date de disponibilité</label><input data-role="datepicker" class="form-control" id="available_date" name="available_date" value="'+(null==(__t=available_date)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa"> <span class="md-feedback md-date"></span></div></div><footer class="post-footer"></footer></article><article class="post-article"><div class="post-content"><div class="form-group"><label for="primary-categ">Catégorie principale</label><div data-role="primary-categ"></div></div><div class="form-group has-feedback"><label>Catégories secondaires</label><div data-role="other-categ"></div></div><div class="form-group has-feedback"><label for="tags">Tags</label><div data-role="tags"></div></div><div class="form-group"><label for="is_spotlight">Produit vedette</label><select class="form-control" name="is_spotlight" id="is_spotlight" data-style="selectify"><option value="0" '+(null==(__t=is_spotlight?'selected="selected"':"")?"":__t)+'>Aucune mise en avant</option><option value="1" '+(null==(__t=is_spotlight?'selected="selected"':"")?"":__t)+'>Produit mis en avant</option></select></div></div><footer class="post-footer"></footer></article><article class="post-article"><div class="post-content"><div class="form-group"><label for="brand_id">Marque</label><p>Nécessaire à l\'utilisation de certains services de gestion de flux de produits et de marketplace :</p><div class="form-group"><div data-role="brand"></div></div></div><div class="form-group"><label for="extra_shipping">Frais de port additionnels</label><p>Ajoute un surcoût de livraison au moment de la commande au montant total des frais de port :</p><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input id="extra_shipping" name="extra_shipping" value="'+(null==(__t=extra_shipping)?"":_.escape(__t))+'" class="form-control" placeholder="0,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" HT</span></div></div></div></div></div> ",enableTierPrices&&(__p+=' <div class="form-group"><label for="tier_prices_id">Tarifs dégressifs</label><p>Applique une grille de tarifs dégressifs en fonction de la quantité de produit achetée :</p><div class="form-group"><div data-role="tier_prices"></div></div></div> '),__p+=' </div><footer class="post-footer"></footer></article><article data-role="layout"></article></form></div></div><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],230:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header"><h1>Illustrations</h1></header><div class="post-content post-picture"><div data-role="list"></div><p><a href="#" data-role="add-image"></a></p></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],231:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Type de produit</h1></header><div class="post-content"><div class="post-group"><div class="form-group"><p>Le type de produit détermine l\'apparence de la fiche produit et si des informations complémentaires peuvent y être ajoutées :</p><div class="row"><div class="col-6"><select id="type" name="type" data-style="selectify"> ',_(types).each(function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'" '+(null==(__t=e.type==type?'selected="selected"':"")?"":__t)+' data-tags="md-catalog-detail">'+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div></div> ",fields&&0!=fields.length||(__p+=' <p class="hidden"><em>Pas d\'information complémentaire...</em></p> '),__p+=" ",_(fields).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <input class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" value="'+(null==(__t=product.get(e.field))?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="5">'+(null==(__t=product.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"wysiwyg":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-role="wysiwyg" rows="21">'+(null==(__t=product.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"select":__p+=' <label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <div class="row"><div class="col-6"><div class="form-group"><select id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=l.value==product.get(e.field)?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div> ";break;case"image":case"file":__p+=' <div data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' </div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],232:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-4"><div class="form-group has-feedback"><label for="name">Intitulé</label><div data-role="name"></div></div></div><div class="col-4"><div class="form-group"><label for="reference">Référence</label><input class="form-control" id="reference" name="reference" placeholder=""></div></div><div class="col-4"><div class="form-group"><label for="gtin">EAN/ISBN</label><input class="form-control" id="gtin" name="gtin" placeholder="8, 10, 12, 13 ou 14 chiffres"></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="price_ex_vat">Prix HT</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_ex_vat" name="price_ex_vat" data-role="vat" data-linked="price_inc_vat" placeholder="0,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div><div class="col-4"><div class="form-group"><label for="price_inc_vat">Prix TTC</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_inc_vat" name="price_inc_vat" data-role="vat" data-linked="price_ex_vat" placeholder="0,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div><div class="col-4"><div data-role="taxes"></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="price_discount_ex_vat">Promotion HT</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_discount_ex_vat" name="price_discount_ex_vat" data-role="vat" data-linked="price_discount_inc_vat" placeholder="Pas de promotion"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div><div class="col-4"><div class="form-group"><label for="price_discount_inc_vat">Promotion TTC</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_discount_inc_vat" name="price_discount_inc_vat" data-role="vat" data-linked="price_discount_ex_vat" placeholder="Pas de promotion"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="weight">Poids</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="weight" name="weight" placeholder="0"><div class="input-group-append"><span class="input-group-text">g</span></div></div></div></div><div class="col-4"><div class="form-group"><label for="condition">Etat</label><select class="form-control" id="condition" name="condition" data-style="selectify"><option value="new">Neuf</option><option value="used">Occasion</option><option value="refurbished">Reconditionné</option></select></div></div><div class="col-4"><div class="form-group"><label for="price_ecotax">Eco-part. incluse</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_ecotax" name="price_ecotax" placeholder="Pas d\'éco-participation"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="is_stock_unlimited">Stock</label><select class="form-control" id="is_stock_unlimited" name="is_stock_unlimited" data-style="selectify"><option value="0">Quantité limitée</option><option value="1">Stock illimité</option></select></div></div><div class="col-4" data-role="stock"><div class="form-group"><label for="stock">Stock actuel</label><input class="form-control" id="stock" name="stock"></div></div></div> ',is_virtual&&(__p+=' <div class="form-group"><div data-role="file"></div></div> '),__p+=' <div class="form-group"><label>Illustration</label><br><div data-role="images"></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show"><span class="page-add md-icon md-add-page"></span>Ajouter une variante</a></div>';return __p};
},{"undefined":undefined}],233:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col-auto"><div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="" src="'+(null==(__t=media_id?convertMediaPath("/media/miniature/"+media_id+".jpg"):"")?"":_.escape(__t))+'"></div></div><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=reference?" <span>#"+(null==(__t=reference)?"":_.escape(__t))+"</span> ":' <span class="text-muted">Pas de référence</span> ',__p+=' </div><div class="col-3"><span class="price"> '+(null==(__t=current_price_ex_vat_label)?"":_.escape(__t))+"HT<br> "+(null==(__t=current_price_inc_vat_label)?"":_.escape(__t))+'TTC</span></div><div class="col-2"> ',__p+=is_stock_unlimited?' <span class="badge badge-success">Illimité</span> ':' <span class="badge '+(null==(__t=0==stock?"badge-danger":"badge-success")?"":__t)+'">'+(null==(__t=0==stock?"Rupture":stock+" en stock ")?"":__t)+"</span> ",__p+=' </div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="duplicate">Dupliquer</a></li><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-4"><div class="form-group has-feedback"><label>Intitulé</label><div data-role="name"></div></div></div><div class="col-4"><div class="form-group"><label for="reference_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Référence</label><input class="form-control" id="reference_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="reference" value="'+(null==(__t=reference)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-4"><div class="form-group"><label for="gtin_'+(null==(__t=variant_id)?"":_.escape(__t))+'">EAN/ISBN</label><input class="form-control" id="gtin_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="gtin" value="'+(null==(__t=gtin)?"":_.escape(__t))+'" placeholder="8, 10, 12, 13 ou 14 chiffres"></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="price_ex_vat_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Prix HT</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_ex_vat_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="price_ex_vat" data-role="vat" data-linked="price_inc_vat" value="'+(null==(__t=price_ex_vat)?"":_.escape(__t))+'" placeholder="0,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div><div class="col-4"><div class="form-group"><label for="price_inc_vat_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Prix TTC</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_inc_vat_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="price_inc_vat" data-role="vat" data-linked="price_ex_vat" value="'+(null==(__t=price_inc_vat)?"":_.escape(__t))+'" placeholder="0,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div><div class="col-4"><div data-role="taxes"></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="price_discount_ex_vat_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Promotion HT</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_discount_ex_vat_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="price_discount_ex_vat" data-role="vat" data-linked="price_discount_inc_vat" value="'+(null==(__t=price_discount_ex_vat)?"":_.escape(__t))+'" placeholder="Pas de promotion"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div><div class="col-4"><div class="form-group"><label for="price_discount_inc_vat_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Promotion TTC</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_discount_inc_vat_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="price_discount_inc_vat" data-role="vat" data-linked="price_discount_ex_vat" value="'+(null==(__t=price_discount_inc_vat)?"":_.escape(__t))+'" placeholder="Pas de promotion"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="weight_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Poids</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="weight_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="weight" value="'+(null==(__t=weight)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">g</span></div></div></div></div><div class="col-4"><div class="form-group"><label for="condition_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Etat</label><select class="form-control" id="condition_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="condition" data-style="selectify"><option value="new" '+(null==(__t="new"==condition?'selected="selected"':"")?"":__t)+'>Neuf</option><option value="used" '+(null==(__t="used"==condition?'selected="selected"':"")?"":__t)+'>Occasion</option><option value="refurbished" '+(null==(__t="refurbished"==condition?'selected="selected"':"")?"":__t)+'>Reconditionné</option></select></div></div><div class="col-4"><div class="form-group"><label for="price_ecotax_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Eco-part. incluse</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_ecotax_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="price_ecotax" value="'+(null==(__t=price_ecotax)?"":_.escape(__t))+'" placeholder="Pas d\'éco-participation"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="is_stock_unlimited_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Stock</label><select class="form-control" id="is_stock_unlimited_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="is_stock_unlimited" data-style="selectify"><option value="0" '+(null==(__t=is_stock_unlimited?"":'selected="selected"')?"":__t)+'>Quantité limitée</option><option value="1" '+(null==(__t=is_stock_unlimited?'selected="selected"':"")?"":__t)+'>Stock illimité</option></select></div></div><div class="col-4" data-role="stock" '+(null==(__t=is_stock_unlimited?'style="display:none"':"")?"":__t)+'><div class="form-group"><label for="stock_'+(null==(__t=variant_id)?"":_.escape(__t))+'">Ajouter au stock</label><input class="form-control" id="stock_'+(null==(__t=variant_id)?"":_.escape(__t))+'" name="stock" placeholder="+ pour ajouter ou - pour retirer"></div></div><div class="col-4" data-role="stock" '+(null==(__t=is_stock_unlimited?'style="display:none"':"")?"":__t)+'><div class="form-group"><label>Stock actuel</label><p class="form-control-static">'+(null==(__t=stock)?"":_.escape(__t))+"</p></div></div></div> ",is_virtual&&(__p+=' <div class="form-group"><div data-role="file"></div></div> '),__p+=' <div class="form-group"><label>Illustration</label><br><div data-role="images"></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],234:[function(require,module,exports){
arguments[4][174][0].apply(exports,arguments)
},{"174":174,"undefined":undefined}],235:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col-auto"><input id="catalog_product_'+(null==(__t=product_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=product_id)?"":_.escape(__t))+'" type="checkbox"><label for="catalog_product_'+(null==(__t=product_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><div class="media-object md-icon md-image img-default"></div> ',main_media_id&&(__p+='<div class="media-object no-ratio"><img alt="" src="'+(null==(__t=convertMediaPath("/media/miniature/"+main_media_id))?"":__t)+'"></div>'),__p+=" "+(null==(__t=is_spotlight?'<div class="corner-color is-spotlight"><div class="corner-color-content"></div></div>':"")?"":__t)+' </div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_visible?(__p+=" ",__p+=main_category?' <a href="/catalog/categories/'+(null==(__t=main_category.category_id)?"":_.escape(__t))+'">'+(null==(__t=main_category.name)?"":_.escape(__t))+"</a> ":" ",sec_categories.length>0&&(__p+=' et <a href="#" data-toggle="popover" data-placement="right" data-trigger="focus" data-container="#content" data-html="true" data-content="'+(null==(__t=sec_categories.join(""))?"":_.escape(__t))+'">'+(null==(__t=sec_categories.length)?"":_.escape(__t))+" +</a> "),__p+=" "):__p+=' <span class="text-danger">Masqué</span> ',__p+=' </div><div class="col-3"> ',__p+=is_virtual?' <span class="badge badge-success">Téléchargeable</span> ':" "+(null==(__t="yes"==stock?'<span class="badge badge-success">En stock</span>':"")?"":__t)+" "+(null==(__t="no"==stock?'<span class="badge badge-danger">Rupture</span>':"")?"":__t)+" "+(null==(__t="partial"==stock?'<span class="badge badge-warning">Rupture</span>':"")?"":__t)+" ",__p+=' </div><div class="col-2"><span class="price">'+(null==(__t=price_inc_vat_min_label)?"":_.escape(__t))+"TTC ",price_inc_vat_min<price_inc_vat_max&&(__p+="<br>"+(null==(__t=price_inc_vat_max_label)?"":_.escape(__t))+"TTC"),__p+=' </span></div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/catalog/products/'+(null==(__t=product_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],236:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Devise</h1></header><div class="post-content"><p>Vous pouvez choisir la devise affichée dans le catalogue. Si vous choisissez une devise différente de l\'Euro (EUR), assurez-vous au près de votre établissement bancaire que votre terminal de paiement virtuel accepte les paiements dans cette devise. Attention cependant, Kiubi n\'assure pas de conversion automatique en cas de changement de devise.</p><div class="row"><div class="col-4"><div class="form-group"><label for="currency">Préfixe des commandes</label><select class="form-control" id="currency" name="currency" data-style="selectify"><option value="EUR" '+(null==(__t="EUR"==currency?'selected="selected"':"")?"":__t)+'>Euro (EUR)</option><option value="CHF" '+(null==(__t="CHF"==currency?'selected="selected"':"")?"":__t)+'>Franc suisse (CHF)</option><option value="CAD" '+(null==(__t="CAD"==currency?'selected="selected"':"")?"":__t)+'>Dollar canadien (CAD)</option><option value="USD" '+(null==(__t="USD"==currency?'selected="selected"':"")?"":__t)+'>Dollar américain (USD)</option><option value="AUD" '+(null==(__t="AUD"==currency?'selected="selected"':"")?"":__t)+'>Dollar australien (AUD)</option><option value="GBP" '+(null==(__t="GBP"==currency?'selected="selected"':"")?"":__t)+'>Livre sterling (GBP)</option></select></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Vente privée</h1></header><div class="post-content"><p>La vente privée vous permet de restreindre l\'accès du catalogue aux visiteurs inscrits et connectés au site Internet. Pour en savoir plus sur la vente privée, <a href="https://aide.kiubi.com/catalogue.html#vente-privee" target="_blank">consultez l\'aide en ligne</a>.</p><div class="form-group"><label for="">Utilisation de la vente privée</label><div class="form-check"><input name="require_auth" id="require_auth1" value="1" '+(null==(__t=require_auth?'checked="checked"':"")?"":__t)+' type="radio"><label for="require_auth1" class="visible">Activée</label><input name="require_auth" id="require_auth0" value="0" '+(null==(__t=require_auth?"":'checked="checked"')?"":__t)+' type="radio"><label for="require_auth0" class="not-visible">Désactivée</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Évaluations</h1></header><div class="post-content"><p>Les visiteurs du site peuvent poster une évaluation pour chacun des produits, en leur donnant une note de 1 à 10, assortie qu\'un commentaire. Si un visiteur est identifé, son évaluation sera ajoutée à son compte en tant que membre du site.</p><div class="row"><div class="col-4"><div class="form-group"><label for="">Évaluations ouvertes</label><div class="form-check"><input name="comments_allowed" id="comments_allowed1" value="1" '+(null==(__t=comments_allowed?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_allowed1">Oui</label><input name="comments_allowed" id="comments_allowed0" value="0" '+(null==(__t=comments_allowed?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_allowed0">Non</label></div></div></div><div class="col-4"><div class="form-group"><label for="">Publication immédiate</label><div class="form-check"><input name="comments_autopublish" id="comments_autopublish1" value="1" '+(null==(__t=comments_autopublish?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_autopublish1">Oui</label><input name="comments_autopublish" id="comments_autopublish0" value="0" '+(null==(__t=comments_autopublish?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_autopublish0">Non</label></div></div></div><div class="col-4"><div class="form-group"><label for="">Identification requise</label><div class="form-check"><input name="comments_anonymous" id="comments_anonymous0" value="0" '+(null==(__t=comments_anonymous?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_anonymous0">Oui (recommandé)</label><input name="comments_anonymous" id="comments_anonymous1" value="1" '+(null==(__t=comments_anonymous?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_anonymous1">Non</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Captcha</h1></header><div class="post-content"><p>Le "captcha" est un système anti-spam pour se prémunir contre l\'usage abusif des commentaires. Plusieurs captchas différents sont disponibles : une validation manuelle par l\'internaute ou le système invisible Google reCaptcha.</p><div class="form-group"><label for="">Utilisation du captcha</label><div class="form-check"><input name="comments_captcha" id="comments_captcha1" value="1" '+(null==(__t=comments_captcha?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_captcha1" class="visible">Activé</label><input name="comments_captcha" id="comments_captcha0" value="0" '+(null==(__t=comments_captcha?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_captcha0" class="not-visible">Désactivé</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],237:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Catalogue</h2><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="/catalog"><span class="badge">'+(null==(__t=overview.products_count)?"":_.escape(__t))+'</span>Tous les produits</a></li><li class="nav-item"><a class="nav-link" href="/catalog/categories">Catégories</a></li><li class="nav-item"><a class="nav-link" href="/catalog/comments">Évaluations</a></li><li class="nav-item"><a class="nav-link" href="/catalog/variants">Étiquettes</a></li><li class="nav-item"><a class="nav-link" href="/catalog/taxes">Taxes</a></li><li class="nav-item"><a class="nav-link" href="/catalog/settings">Paramètres</a></li></ul><h2>Modules additionnels</h2><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="/modules/import/products">Import de produits</a></li><li class="nav-item"><a class="nav-link" href="/modules/vouchers">Bons de réduction</a></li><li class="nav-item"><a class="nav-link" href="/modules/merchantcenter">Google Merchant Center</a></li></ul>';return __p};
},{"undefined":undefined}],238:[function(require,module,exports){
arguments[4][213][0].apply(exports,arguments)
},{"213":213,"undefined":undefined}],239:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters align-items-center" data-role="list"><div class="col-auto"><input id="selection_'+(null==(__t=tag_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=tag_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=tag_id)?"":_.escape(__t))+'"></label></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+'</h4></div><div class="col-4"><span class="text-muted">—</span></div><div class="col-auto"><a class="btn btn-primary float-right" href="#" role="button" data-role="action" data-confirm="warning" data-action="delete">Supprimer</a></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="required" for="name">Intitulé du tag</label><p>Changer l\'intitulé du tag permet de renommer le tag sur tous les produits auxquels il est associé.</p><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],240:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/catalogue.html#gerer-les-taxes" class="md-icon md-help float-right" target="_blank"></a> Modifier les paramètres des taxes peut avoir des impacts importants sur le catalogue produits et la gestion des commandes. Pour en savoir plus sur la gestion des taxes, <a href="https://aide.kiubi.com/catalogue.html#gerer-les-taxes" target="_blank">consultez l\'aide en ligne</a>.</div><form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres généraux</h1></header><div class="post-content"><div class="form-group"><label for="">Affichage des prix</label><p>Vous pouvez choisir d\'afficher les prix du catalogue en HT ou en TTC. Les commandes seront toujours payées en TTC.</p><div class="form-check"><input name="display_taxes" id="display_taxes0" value="0" '+(null==(__t=display_taxes?"":'checked="checked"')?"":__t)+' type="radio"><label for="display_taxes0">Prix HT</label><input name="display_taxes" id="display_taxes1" value="1" '+(null==(__t=display_taxes?'checked="checked"':"")?"":__t)+' type="radio"><label for="display_taxes1">Prix TTC</label></div></div><div class="form-group"><label for="">Éxoneration de TVA</label><p>Selon la législation en vigueur et le statut de votre entreprise, vous pouvez être exonéré de TVA. Si vous choisissez l\'exonération de TVA, les nouveaux montants des prix seront calculés sur leur base HT actuelle.</p><div class="form-check"><input name="is_duty_free" id="is_duty_free0" value="0" '+(null==(__t=is_duty_free?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_duty_free0">Sans éxoneration</label><input name="is_duty_free" id="is_duty_free1" value="1" '+(null==(__t=is_duty_free?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_duty_free1">Avec éxoneration</label></div></div></div><footer class="post-footer"></footer></article></form><article data-role="list"></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],241:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-2"><div class="form-group"><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_vat_rate">Montant</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_vat_rate" name="vat_rate" placeholder="0,00"><div class="input-group-append"><span class="input-group-text">%</span></div></div></div></div><div class="col-4"></div><div class="col-5"><div class="form-group"><label>Taxe par défaut</label><div class="form-check"><input name="is_default" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default1" value="1" type="radio"><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default1" class="">Oui</label><input name="is_default" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default0" value="0" type="radio" checked="checked"><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default0" class="">Non</label></div></div></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show"><span class="page-add md-icon md-add-page"></span>Ajouter une taxe</a></div>';return __p};
},{"undefined":undefined}],242:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters align-items-center" data-role="list"><div class="col item-body"> '+(null==(__t=vat_rate)?"":_.escape(__t))+'%</div><div class="col-5">'+(null==(__t=is_default?'<span class="badge badge-success">Taxe par défaut</span>':"")?"":__t)+'</div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-2"><div class="form-group"><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_vat_rate">Montant</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_vat_rate" name="vat_rate" placeholder="0,00" value="'+(null==(__t=vat_rate)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text">%</span></div></div></div></div><div class="col-4"></div><div class="col-5"><div class="form-group"><label>Taxe par défaut</label><div class="form-check"><input name="is_default" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default1" value="1" type="radio" '+(null==(__t=is_default?'checked="checked"':"")?"":__t)+' ><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default1" class="">Oui</label><input name="is_default" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default0" value="0" type="radio" '+(null==(__t=is_default?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default0" class="">Non</label></div></div></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],243:[function(require,module,exports){
arguments[4][213][0].apply(exports,arguments)
},{"213":213,"undefined":undefined}],244:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters align-items-center" data-role="list"><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+'</h4></div><div class="col-4"><span class="text-muted">—</span></div><div class="col-auto"><a class="btn btn-primary float-right" href="#" role="button" data-role="action" data-action="edit">Détail</a></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="required" for="name">Intitulé de la variante</label><p>Changer l\'intitulé de la variante permet de renommer la variante pour tous les produits qui l\'utilise. Elle ne peut cependant être supprimée que dans le détail des produits qui l\'utilisent.</p><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],245:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ListView=require(128),RowActionsBehavior=require(31),Forms=require(608),RowView=Marionette.View.extend({template:require(214),className:"list-item",ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},onActionSave:function(){return this.model.save(Forms.extractFields(["name"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}});module.exports=Marionette.View.extend({template:require(213),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des marques",selection:[{title:"Supprimer",callback:this.deleteBrands.bind(this),confirm:!0}]}))},start:function(){this.collection.fetch()},deleteBrands:function(e){return this.collection.bulkDelete(e)}});
},{"128":128,"213":213,"214":214,"31":31,"608":608,"undefined":undefined}],246:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_string=require("underscore.string"),RowActionsBehavior=require(31),Session=Backbone.Radio.channel("app").request("ctx:session"),HomeRowView=Marionette.View.extend({template:require(216),className:"list-item"}),RowView=Marionette.View.extend({template:require(217),className:"list-item",templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),short_desc:_string.prune(_string.stripTags(this.model.get("description")),120)}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},onSortChange:function(e){this.model.save(e,{patch:!0})}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(215),className:"container-fluid",service:"catalog",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:function(e){return e.get("is_main")?HomeRowView:RowView},title:"Liste des catégories",selection:[{title:"Afficher",callback:this.showCategories.bind(this)},{title:"Masquer",callback:this.hideCategories.bind(this)},{title:"Supprimer",callback:this.deleteCategories.bind(this),confirm:!0}]}))},start:function(){this.collection.fetch()},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},showCategories:function(e){return this.collection.bulkShow(e)},hideCategories:function(e){return this.collection.bulkHide(e)},deleteCategories:function(e){return this.collection.bulkDelete(e)}});
},{"128":128,"215":215,"216":216,"217":217,"31":31,"undefined":undefined}],247:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),LayoutSelectorView=require(160),FilePickerView=require(456),SeoView=require(141),FormBehavior=require(27),WysiwygBehavior=require(28),Forms=require(608);module.exports=Marionette.View.extend({template:require(218),className:"container container-large",service:"catalog",behaviors:[FormBehavior,WysiwygBehavior],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0},image:{el:"div[data-role='image']",replaceElement:!0},seo:{el:"article[data-role='seo']",replaceElement:!0}},fields:["name","description","media_id","is_visible","slug","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["model"]),this.getOption("enableLayout")&&(this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"catalog-category",apply:this.model.get("category_id"),applyName:this.model.get("name")})),this.listenTo(this.model,"change",this.render)},onBeforeRender:function(){this.getOption("enableLayout")&&this.layoutSelector.isAttached()&&this.detachChildView("layout")},onRender:function(){this.getOption("enableLayout")&&this.showChildView("layout",this.layoutSelector),this.showChildView("image",new FilePickerView({fieldname:"media_id",fieldLabel:"Illustration",type:"image",value:this.model.get("media_id")?this.model.get("media_id"):""})),this.getOption("enableSeo")&&this.showChildView("seo",new SeoView({slug_suffix:"/",model:this.model}))},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){var e=Forms.extractFields(this.fields,this);return this.getOption("enableSeo")&&Forms.isTmpSlug(e.slug)&&(e.slug=e.name),this.model.save(e,{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"141":141,"160":160,"218":218,"27":27,"28":28,"456":456,"608":608,"undefined":undefined}],248:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),_=require("underscore"),RowActionsBehavior=require(31),Forms=require(608),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(220),className:"list-item",templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),date:format.formatLongDateTime(this.model.get("date")),comment2br:_.escape(""+this.model.get("comment")).replace(/(\r\n|\n\r|\r|\n)+/g,"<br />")}},ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},onActionSave:function(){return this.model.save(Forms.extractFields(["is_visible","comment"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(219),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des évaluations",selection:[{title:"Afficher",callback:this.showComments.bind(this)},{title:"Masquer",callback:this.hideComment.bind(this)},{title:"Supprimer",callback:this.deleteComments.bind(this),confirm:!0}]}))},start:function(e){this.collection.fetch({data:e})},showComments:function(e){return this.collection.bulkShow(e)},hideComment:function(e){return this.collection.bulkHide(e)},deleteComments:function(e){return this.collection.bulkDelete(e)}});
},{"128":128,"219":219,"220":220,"31":31,"607":607,"608":608,"undefined":undefined}],249:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),LayoutSelectorView=require(160),SeoView=require(141),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(221),className:"container container-large",service:"catalog",behaviors:[FormBehavior],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0},seo:{el:"article[data-role='seo']",replaceElement:!0}},fields:["name","is_visible","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["model"]),this.getOption("enableLayout")&&(this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"catalog-home",apply:0,applyName:this.model.get("name")})),this.getOption("enableSeo")&&this.showChildView("seo",new SeoView({model:this.model}))},onRender:function(){this.getOption("enableLayout")&&this.showChildView("layout",this.layoutSelector)},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"141":141,"160":160,"221":221,"27":27,"608":608,"undefined":undefined}],250:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),RowActionsBehavior=require(31),SelectifyBehavior=require(26),AutocompleteView=require(140),PopoverBehavior=require(23),Session=Backbone.Radio.channel("app").request("ctx:session"),Forms=require(608),NewRowView=Marionette.View.extend({template:require(223),className:"post-content post-list",behaviors:[RowActionsBehavior,SelectifyBehavior],regions:{product:{el:"div[data-role='product']",replaceElement:!0}},ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]'},initialize:function(e){this.products=e.products},onRender:function(){this.showChildView("product",new AutocompleteView({searchPlaceholder:"Rechercher un produit"}))},onChildviewInput:function(e,i){var t=this.collection.pluck("linked_product_id");t.push(this.collection.product_id),this.products.suggest(e,5,t).done(function(e){var t=_.map(e,function(e){return{label:e.name,value:e.product_id}});i.showResults(t)})},onChildviewChange:function(e,i){this.linked_product_id=e.value},onActionSave:function(){var e=Forms.extractFields(["link"],this);e.product_id=this.collection.product_id,e.linked_product_id=this.linked_product_id;var i=new this.collection.model({linked_product_id:e.linked_product_id});return this.getChildView("product").clear(),i.save(e).done(function(){this.getUI("form").hide(),this.collection.add(i)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),RowView=Marionette.View.extend({template:require(224),className:"list-item",behaviors:[RowActionsBehavior,SelectifyBehavior,PopoverBehavior],ui:{list:'div[data-role="list"]',link:"select"},events:{"change @ui.link":"onLinkChange"},templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),main_category:_.find(this.model.get("categories"),function(e){return e.is_main}),sec_categories:_.reduce(this.model.get("categories"),function(e,i){return i.is_main||e.push('<a href="/catalog/categories/'+i.category_id+'">'+_.escape(i.name)+"</a><br/>"),e},[])}},onLinkChange:function(e){this.model.save({link:this.getUI("link").val()})},onActionDelete:function(){return this.model.destroy()}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(222),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection","products"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Produits associés",childViewOptions:{products:this.products}}))},start:function(){this.collection.fetch({data:{extra_fields:"categories"}}).done(function(){this.collection.each(function(e){e.set("product_id",e.collection.product_id)})}.bind(this))}});
},{"128":128,"140":140,"222":222,"223":223,"224":224,"23":23,"26":26,"31":31,"608":608,"undefined":undefined}],251:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),_string=require("underscore.string"),ScrollBehavior=require(22),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(226),className:"list-item list-item-md",events:{'click a[data-role="select"]':function(){this.triggerMethod("select:category",this.model)}},initialize:function(e){this.mergeOptions(e,["selected"])},templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),short_desc:_string.prune(_string.stripTags(this.model.get("description")),120),is_selected:_.indexOf(this.selected||[],this.model.get("category_id"))>=0}}}),ListView=Marionette.CollectionView.extend({className:"post-content post-list",childView:RowView,behaviors:[{behaviorClass:ScrollBehavior,contentEl:".modal-body"}],onChildviewSelectCategory:function(e){this.triggerMethod("select:category",e)}});module.exports=Marionette.View.extend({template:require(225),regions:{list:{el:"div[data-role='list']",replaceElement:!0}},ui:{term:'input[name="term"]'},currentTerm:null,currentFetch:null,events:{"keyup @ui.term":_.debounce(function(e){this.currentTerm=this.getUI("term").val(),this.updateFilter()},300)},initialize:function(e){this.mergeOptions(e,["collection","selected"]),this.currentTerm=null,this.currentFetch=null,this.start()},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,childViewOptions:{selected:this.selected||[]}}))},onChildviewChange:function(e,t){this.getUI("term").val(""),this.currentTerm="",this.updateFilter()},updateFilter:function(){this.start(this.currentTerm)},start:function(e){this.currentFetch&&this.currentFetch.abort(),this.collection.reset(),this.currentFetch=this.collection.fetch({reset:!0,data:{term:e||""}}).always(function(){this.currentFetch=null}.bind(this))},onChildviewSelectCategory:function(e){e.get("is_main")||(this.triggerMethod("selected:modal",e.toJSON()),this.triggerMethod("close:modal"))}});
},{"22":22,"225":225,"226":226,"undefined":undefined}],252:[function(require,module,exports){
var Marionette=require("backbone.marionette"),_=require("underscore"),ScrollBehavior=require(22),RowView=Marionette.View.extend({template:require(228),className:"list-item list-item-md",events:{'click a[data-role="select"]':function(){this.triggerMethod("select:tag",this.model)}},initialize:function(e){this.mergeOptions(e,["selected"])},templateContext:function(){return{is_selected:_.indexOf(this.selected,this.model.get("tag_id"))>=0}}}),ListView=Marionette.CollectionView.extend({className:"post-content post-list",childView:RowView,behaviors:[{behaviorClass:ScrollBehavior,contentEl:".modal-body"}],onChildviewSelectTag:function(e){this.triggerMethod("select:tag",e)}});module.exports=Marionette.View.extend({template:require(227),regions:{list:{el:"div[data-role='list']",replaceElement:!0}},ui:{term:'input[name="term"]'},currentTerm:null,currentFetch:null,events:{"keyup @ui.term":_.debounce(function(e){this.currentTerm=this.getUI("term").val(),this.updateFilter()},300)},initialize:function(e){this.mergeOptions(e,["collection","selected"]),this.currentTerm=null,this.currentFetch=null,this.start()},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,childViewOptions:{selected:this.selected||[]}}))},onChildviewChange:function(e,t){this.getUI("term").val(""),this.currentTerm="",this.updateFilter()},updateFilter:function(){this.start(this.currentTerm)},start:function(e){this.currentFetch&&this.currentFetch.abort(),this.collection.reset(),this.currentFetch=this.collection.fetch({reset:!0,data:{term:e,sort:"name"}}).always(function(){this.currentFetch=null}.bind(this))},onChildviewSelectTag:function(e){this.triggerMethod("selected:modal",e.toJSON()),this.triggerMethod("close:modal")}});
},{"22":22,"227":227,"228":228,"undefined":undefined}],253:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");require(611);var LayoutSelectorView=require(160),FilePickerView=require(456),FileSelectorView=require(457),AutocompleteView=require(140),AutocompleteInputView=require(127),TagView=require(142),ListView=require(128),SeoView=require(141),ModalTagsView=require(252),ModalCategoriesView=require(251),TaxView=require(255),CharCountBehavior=require(19),FormBehavior=require(27),WysiwygBehavior=require(28),SelectifyBehavior=require(26),RowActionsBehavior=require(31),VatBehavior=require(32),SaveBehavior=require(24),format=require(607),Forms=require(608),Datepicker=require(21),VariantsNames=require(211),Downloads=require(200),DownloadsFolders=require(201),Session=Backbone.Radio.channel("app").request("ctx:session"),VariantImageRowView=Marionette.View.extend({template:_.template('<input name="media_id" value="<%- media_id %>" autocomplete="off" type="radio"><img alt="<%- name %>" src="<%- convertMediaPath(\'/media/miniature/\' + media_id + \'.jpg\') %>">'),className:"btn btn-image",tagName:"label",initialize:function(e){this.mergeOptions(e,["variant"])},templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session)}},onRender:function(){var e;e=this.variant?this.model.get("media_id")==this.variant.get("media_id"):1==this.model.get("position"),e?this.$el.addClass("active"):this.$el.removeClass("active"),Backbone.$("input",this.$el).prop("checked",e)}}),NewVariantRowView=Marionette.View.extend({template:require(232),className:"post-content post-list",behaviors:[RowActionsBehavior,VatBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0},images:{el:"div[data-role='images']",replaceElement:!0},name:{el:"div[data-role='name']",replaceElement:!0},file:{el:"div[data-role='file']",replaceElement:!0}},ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]',stock_fields:'div[data-role="stock"]',is_stock_unlimited:'select[name="is_stock_unlimited"]'},events:{"change @ui.is_stock_unlimited":function(e){"1"==this.getUI("is_stock_unlimited").val()?this.getUI("stock_fields").hide():this.getUI("stock_fields").show()}},fields:["name","reference","tax_id","gtin","condition","weight","price_ex_vat","price_inc_vat","price_discount_ex_vat","price_discount_inc_vat","price_ecotax","is_stock_unlimited","stock","media_id","file_id"],initialize:function(e){this.taxes=e.taxes,this.images=e.images,this.names=e.names,this.currency=e.currency,this.is_virtual=e.is_virtual},onRender:function(){var e=this.taxes.find({is_default:!0});this.taxes.length&&this.showChildView("taxes",new TaxView({taxes:this.taxes,selected:e?e.get("tax_id"):null})),this.showChildView("images",new Marionette.CollectionView({className:"btn-group d-block",attributes:{"data-toggle":"buttons"},collection:this.images,childView:VariantImageRowView})),this.showChildView("name",new AutocompleteInputView({searchPlaceholder:"Rechercher un intitulé",name:"name",noResultsLabel:null})),this.is_virtual&&this.showChildView("file",new FilePickerView({fieldname:"file_id",fieldLabel:"Fichier téléchargeable",type:"file",collectionFiles:Downloads,collectionFolders:DownloadsFolders,rememberFolder:!1}))},onChildviewInput:function(e,t){this.names.suggest(e,5).done(function(e){var i=_.map(e,function(e){return{label:e.name,value:e.name}});t.showResults(i)}.bind(this))},templateContext:function(){return{images:this.images.toJSON(),convertMediaPath:Session.convertMediaPath.bind(Session),currency:this.currency,is_virtual:this.is_virtual}},onActionSave:function(){var e=new this.collection.model,t=Forms.extractFields(this.fields,this);return t.product_id=this.collection.product_id,e.save(t).done(function(){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),VariantRowView=Marionette.View.extend({template:require(233),className:"list-item",behaviors:[RowActionsBehavior,VatBehavior,SelectifyBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0},images:{el:"div[data-role='images']",replaceElement:!0},name:{el:"div[data-role='name']",replaceElement:!0},file:{el:"div[data-role='file']",replaceElement:!0}},ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]',stock_fields:'div[data-role="stock"]',is_stock_unlimited:'select[name="is_stock_unlimited"]'},events:{"change @ui.is_stock_unlimited":function(e){"1"==this.getUI("is_stock_unlimited").val()?this.getUI("stock_fields").hide():this.getUI("stock_fields").show()}},fields:["name","reference","tax_id","gtin","condition","weight","price_ex_vat","price_inc_vat","price_discount_ex_vat","price_discount_inc_vat","price_ecotax","is_stock_unlimited","media_id","stock","file_id"],initialize:function(e){this.taxes=e.taxes,this.images=e.images,this.names=e.names,this.currency=e.currency,this.is_virtual=e.is_virtual,this.listenTo(this.images,"add remove",this.onImageSync)},templateContext:function(){return{current_price_ex_vat_label:this.model.get("price_discount_ex_vat")?this.model.get("price_discount_ex_vat_label"):this.model.get("price_ex_vat_label"),current_price_inc_vat_label:this.model.get("price_discount_inc_vat")?this.model.get("price_discount_inc_vat_label"):this.model.get("price_inc_vat_label"),convertMediaPath:Session.convertMediaPath.bind(Session),price_ex_vat:format.formatFloat(this.model.get("price_ex_vat"),4),price_inc_vat:format.formatFloat(this.model.get("price_inc_vat"),4),price_discount_ex_vat:format.formatFloat(this.model.get("price_discount_ex_vat"),4),price_discount_inc_vat:format.formatFloat(this.model.get("price_discount_inc_vat"),4),price_ecotax:format.formatFloat(this.model.get("price_ecotax")),currency:this.currency,is_virtual:this.is_virtual}},onRender:function(){this.taxes.length&&this.showChildView("taxes",new TaxView({taxes:this.taxes,selected:this.model.get("tax_id")})),this.showChildView("images",new Marionette.CollectionView({className:"btn-group d-block",attributes:{"data-toggle":"buttons"},collection:this.images,childView:VariantImageRowView,childViewOptions:{variant:this.model}})),this.showChildView("name",new AutocompleteInputView({searchPlaceholder:"Rechercher un intitulé",name:"name",current:this.model.get("name"),noResultsLabel:null})),this.is_virtual&&this.showChildView("file",new FilePickerView({fieldname:"file_id",fieldLabel:"Fichier téléchargeable",type:"file",value:this.model.get("file_id"),collectionFiles:Downloads,collectionFolders:DownloadsFolders,rememberFolder:!1}))},onImageSync:function(e){var t;if(null==this.model.get("media_id")&&1==this.images.length)return t=Session.convertMediaPath("/media/miniature/"+e.get("media_id")+".jpg"),Backbone.$("img",this.el).attr("src",t),void this.model.set("media_id",e.get("media_id"));if(e.get("media_id")==this.model.get("media_id"))if(this.images.length>0){var i=_.sortBy(this.images.toJSON(),"position")[0];t=Session.convertMediaPath("/media/miniature/"+i.media_id+".jpg"),Backbone.$("img",this.el).attr("src",t),this.model.set("media_id",i.media_id)}else Backbone.$("img",this.el).attr("src",""),this.model.set("media_id",null)},onChildviewInput:function(e,t){this.names.suggest(e,5).done(function(e){var i=_.map(e,function(e){return{label:e.name,value:e.name}});t.showResults(i)}.bind(this))},onActionDuplicate:function(){return this.model.duplicate().done(function(e){this.model.collection.add(e)}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},onActionDelete:function(){return this.model.destroy({wait:!0}).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},onActionSave:function(){var e=Forms.extractFields(this.fields,this);return e.is_stock_unlimited&&(e.stock=null),this.model.save(e,{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ImageRowView=Marionette.View.extend({template:_.template('<div class="si-overlay"><span data-role="delete-image" class="md-icon md-delete btn-si"></span></div><img alt="<%- name %>" src="<%- convertMediaPath(\'/media/vignette/\' + media_id + \'.jpg\') %>">'),className:"btn btn-image",tagName:"label",attributes:function(){return{"data-id":this.model.get("media_id")}},events:{'click [data-role="delete-image"]':function(){this.model.destroy()}},templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session)}},onRender:function(){1==this.model.get("position")?this.$el.addClass("active"):this.$el.removeClass("active")}}),EmptyImageRowView=Marionette.View.extend({template:_.template("<div class=\"list-item-empty\">Ce produit n'a pas d'illustration...</div>")}),ImagesView=Marionette.View.extend({template:require(230),className:"post-article",tagName:"article",attributes:{"data-toggle":"buttons"},regions:{list:{el:"div[data-role='list']",replaceElement:!0},add:{el:"a[data-role='add-image']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.showChildView("list",new Marionette.CollectionView({className:"btn-group d-block",collection:this.collection,childView:ImageRowView,emptyView:EmptyImageRowView})),this.showChildView("add",new FileSelectorView);var e=this.getChildView("list").$el,t=0;e.sortable({start:function(e,i){t=1!=Backbone.$(this).data("sortableFirst")?Backbone.$("#content").scrollTop():0,Backbone.$(this).data("sortableFirst",!0)},sort:function(e,i){t>0&&i.helper.css({top:i.position.top-t+"px"})},change:function(e,i){t=0},update:function(t,i){var a=[];e.children().each(function(e){var t=Backbone.$(this);0==e?t.addClass("active"):t.removeClass("active"),a.push(t.data("id"))}),this.collection.reOrder(a)}.bind(this)})},onChildviewSelectedFile:function(e){var t=this.collection.reduce(function(e,t){return Math.max(e,t.get("position"))},0);_.each(e,function(e){this.collection.create({media_id:e.media_id,name:e.name,orginial_name:e.orginial_name,product_id:this.collection.product_id,position:t+1})}.bind(this))}}),TypeSelectorView=Marionette.View.extend({template:require(231),className:"post-article",tagName:"article",types:[],fields:[],type:"",product:null,backupFields:["text1","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15"],ui:{select:"select[name='type']"},events:{"change @ui.select":function(){this.selectType(this.getUI("select").val(),!0)}},behaviors:[CharCountBehavior,WysiwygBehavior,SelectifyBehavior,SaveBehavior],initialize:function(e){this.mergeOptions(e,["type","typesSource","product","formEl"]),this.typesSource.done(function(e){this.types=e,this.selectType(this.type,!1)}.bind(this))},templateContext:function(){return{type:this.type,types:this.types,product:this.product,fields:this.fields}},selectType:function(e,t){this.type=e,t&&(this.triggerMethod("wysiwyg:save"),this.product.set(Forms.extractFormFields(this.backupFields,this.formEl)));var i=[],a=_.find(this.types,function(e){return e.type==this.type}.bind(this));a&&a.fields&&(i=a.fields),_.each(this.getRegions(),function(e,t){"filepicker-"==t.substring(0,11)&&this.removeRegion(t)}.bind(this)),_.each(i,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.getRegion(t)||this.addRegion(t,'div[data-role="'+t+'"]')}}.bind(this)),this.fields=i,this.render()},onRender:function(){_.each(this.fields,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.showChildView(t,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,value:this.product.get(e.field),comment:e.help?e.help:null}))}}.bind(this))}});module.exports=Marionette.View.extend({template:require(229),className:"container container-large",service:"catalog",behaviors:[FormBehavior,WysiwygBehavior,Datepicker],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0},type:{el:"article[data-role='type']",replaceElement:!0},"primary-categ":{el:"div[data-role='primary-categ']",replaceElement:!0},"other-categ":{el:"div[data-role='other-categ']",replaceElement:!0},brand:{el:"div[data-role='brand']",replaceElement:!0},tags:{el:"div[data-role='tags']",replaceElement:!0},variants:{el:"article[data-role='variants']",replaceElement:!0},images:{el:"article[data-role='images']",replaceElement:!0},seo:{el:"article[data-role='seo']",replaceElement:!0},tier_prices:{el:"div[data-role='tier_prices']",replaceElement:!0}},ui:{form:'form[data-role="part"]'},fields:["name","available_date","is_spotlight","header","description","extra_shipping","is_visible","type","text1","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15","slug","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["model","typesSource","categories","brands","tags","variants","taxes","images","tier_prices"]),this.getOption("enableLayout")&&(this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"catalog-product",apply:this.model.get("product_id"),applyName:this.model.get("name")})),this.variants.set(this.model.get("variants")),this.variantsView=new ListView({collection:this.variants,rowView:VariantRowView,newRowView:NewVariantRowView,fixRelativeDragNDrop:!0,title:"Variantes",childViewOptions:{taxes:this.taxes,images:this.images,names:new VariantsNames,currency:format.currencyEntity(this.model.meta.currency),is_virtual:this.model.get("is_virtual")}});var t=this.model.get("images");_.each(t,function(e){e.product_id=this.model.get("product_id")}.bind(this)),this.images.set(t),this.imagesView=new ImagesView({collection:this.images}),this.listenTo(this.model,"change",this.render)},templateContext:function(){return{available_date:format.formatDateTime(this.model.get("available_date")),extra_shipping:format.formatFloat(this.model.get("extra_shipping")),base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency),enableTierPrices:this.getOption("tier_prices")}},onBeforeRender:function(){this.getOption("enableLayout")&&this.layoutSelector.isAttached()&&this.detachChildView("layout"),this.variantsView.isAttached()&&this.detachChildView("variants"),this.imagesView.isAttached()&&this.detachChildView("images")},onRender:function(){this.getOption("enableLayout")&&this.showChildView("layout",this.layoutSelector);var e=new TypeSelectorView({type:this.model.get("type"),product:this.model,typesSource:this.typesSource,formEl:this.getUI("form")});this.showChildView("type",e),this.showChildView("images",this.imagesView),this.showChildView("variants",this.variantsView);var t=_.find(this.model.get("categories"),function(e){return e.is_main});this.showChildView("primary-categ",new AutocompleteView({searchPlaceholder:"Rechercher une catégorie",current:{label:t.name,value:t.category_id}}));var i=_.filter(this.model.get("categories"),function(e){return!e.is_main});i=_.map(i,function(e){return{label:e.name,value:e.category_id}}),this.showChildView("other-categ",new TagView({searchPlaceholder:"Rechercher une catégorie",tags:i})),this.showChildView("brand",new AutocompleteView({searchPlaceholder:"Rechercher une marque",isMandatory:!1,evtSuffix:"brand",current:{label:this.model.get("brand_name"),value:this.model.get("brand_id")}})),this.getOption("tier_prices")&&this.showChildView("tier_prices",new AutocompleteView({searchPlaceholder:"Rechercher une grille",isMandatory:!1,evtSuffix:"tierPrices",current:{label:this.model.get("tier_prices_name"),value:this.model.get("tier_prices_id")}}));var a=_.map(this.model.get("tags"),function(e){return{label:e.name,value:e.tag_id}});this.showChildView("tags",new TagView({evtSuffix:"tags",searchPlaceholder:"Rechercher un tag",tags:a})),this.getOption("enableSeo")&&this.showChildView("seo",new SeoView({model:this.model}))},onChildviewInputBrand:function(e,t){this.brands.suggest(e,5).done(function(e){var i=_.map(e,function(e){return{label:e.name,value:e.brand_id}});t.showResults(i,{title:"Ajouter la marque",eventName:"add"})}.bind(this))},onChildviewChangeBrand:function(e,t){this.model.set("brand_id",e.value,{silent:!0})},onChildviewAddBrand:function(e,t){""!=e&&this.brands.create({name:e},{wait:!0,success:function(e){t.setCurrent({label:e.get("name"),value:e.get("brand_id")}),this.model.set("brand_id",e.get("brand_id"),{silent:!0}),this.triggerMethod("field:change")}.bind(this)})},onChildviewInputTierPrices:function(e,t){this.getOption("tier_prices").fetch({data:{term:e,limit:5}}).done(function(e){var i=_.map(e,function(e){return{label:e.name,value:e.grid_id}});t.showResults(i)}.bind(this))},onChildviewChangeTierPrices:function(e,t){this.model.set("tier_prices_id",e.value,{silent:!0})},onChildviewInputTags:function(e,t){var i=_.pluck(t.getTags(),"value");this.tags.suggest(e,5,i).done(function(e){var i=_.map(e,function(e){return{label:e.name,value:e.tag_id}});t.showResults(i,[{title:"Tous les tags",eventName:"list",iconClass:"md-all"},{title:"Ajouter le tag",eventName:"add"}])}.bind(this))},onChildviewListTags:function(e,t){var i=_.reduce(t.getTags(),function(e,t){return _.isNumber(t.value)&&e.push(t.value),e},[]),a=new ModalTagsView({collection:this.tags,selected:i});this.listenTo(a,"selected:modal",function(e){t.addTag({label:e.name,value:e.tag_id})}.bind(this));var s=Backbone.Radio.channel("app").request("ctx:navigationController");s.showInModal(a,{title:"Selectionner un tag",modalClass:"modal-right has-filters",modalDialogClass:"modal-sm"})},onChildviewAddTags:function(e,t){""!=e&&t.addTag({value:e,label:e})},onChildviewInput:function(e,t){if(t==this.getChildView("primary-categ")||t==this.getChildView("other-categ")){var i;if(t==this.getChildView("primary-categ"))i=[t.current.value];else if(t==this.getChildView("other-categ")){i=_.pluck(t.getTags(),"value");var a=this.getChildView("primary-categ");i.push(a.current.value)}this.categories.suggest(e,5,i).done(function(e){var i=_.map(e,function(e){return{label:e.name,value:e.category_id}});t.showResults(i,[{title:"Toutes les catégories",eventName:"list",iconClass:"md-all"}])})}},onChildviewList:function(e,t){var i=this.getChildView("primary-categ"),a=this.getChildView("other-categ"),s=_.pluck(a.getTags(),"value");s.push(i.current.value);var o=new ModalCategoriesView({collection:this.categories,selected:s});this.listenTo(o,"selected:modal",function(e){var i={value:e.category_id,label:e.name};t==this.getChildView("primary-categ")?(t.setCurrent(i),a.collection.remove(i.value)):t==this.getChildView("other-categ")&&t.addTag(i)}.bind(this));var r=Backbone.Radio.channel("app").request("ctx:navigationController");r.showInModal(o,{title:"Selectionner une catégorie",modalClass:"modal-right has-filters",modalDialogClass:"modal-sm"})},onChildviewChange:function(e,t){if(t==this.getChildView("primary-categ")){var i=this.getChildView("other-categ");i.collection.remove(e.value)}},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onChildviewSortChange:function(e){this.variants.reOrder(e.list)},onSave:function(){this.variantsView.getChildren().each(function(e){e.isEditing&&e.onActionSave()});var e=Forms.extractFields(this.fields,this,{selector:'form[data-role="part"]'});e.brand_id=this.model.get("brand_id")||"",this.getOption("tier_prices")&&(e.tier_prices_id=this.model.get("tier_prices_id")||""),e.tags=_.pluck(this.getChildView("tags").getTags(),"label"),0==e.tags.length&&(e.tags="");var t=[this.getChildView("primary-categ").getCurrent().value];return e.categories=t.concat(_.pluck(this.getChildView("other-categ").getTags(),"value")),this.getOption("enableSeo")&&Forms.isTmpSlug(e.slug)&&(e.slug=e.name),this.model.save(e,{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"127":127,"128":128,"140":140,"141":141,"142":142,"160":160,"19":19,"200":200,"201":201,"21":21,"211":211,"229":229,"230":230,"231":231,"232":232,"233":233,"24":24,"251":251,"252":252,"255":255,"26":26,"27":27,"28":28,"31":31,"32":32,"456":456,"457":457,"607":607,"608":608,"611":611,"undefined":undefined}],254:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606),_=require("underscore"),RowActionsBehavior=require(31),PopoverBehavior=require(23),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(235),className:"list-item",templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),main_category:_.find(this.model.get("categories"),function(e){return e.is_main}),sec_categories:_.reduce(this.model.get("categories"),function(e,t){return t.is_main||e.push('<a href="/catalog/categories/'+t.category_id+'">'+_.escape(t.name)+"</a><br/>"),e},[])}},behaviors:[RowActionsBehavior,PopoverBehavior],onActionDelete:function(){return this.model.destroy()}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(234),className:"container-fluid",service:"catalog",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},category_id:null,sortOrder:"name",filters:null,initialize:function(e){this.mergeOptions(e,["collection","categories","tags","category_id","brands","tier_prices"]);var t=this.getOption("filters")&&this.getOption("filters").stock?this.getOption("filters").stock:null;"yes"!=t&&"partial"!=t&&"no"!=t&&(t=null),this.filters={stock:t,category_id:this.category_id,tag_id:null,term:this.getOption("filters")&&this.getOption("filters").term?this.getOption("filters").term:null,tier_prices:this.getOption("filters")&&this.getOption("filters").tier_prices?this.getOption("filters").tier_prices:null}},onRender:function(){var e=new CollectionUtils.SelectCollection([{value:"stock",label:"Stock"},{value:"tag",label:"Tag"},{value:"price",label:"Prix"},{value:"weight",label:"Poids"},{value:"available",label:"Disponibilité"},{value:"visible",label:"Visibilité"},{value:"spotlight",label:"Produit vedette"},{value:"type",label:"Type"},{value:"name",label:"Intitulé de variante"},{value:"reference",label:"Référence de variante"},{value:"linked",label:"Nb produits associés"},{value:"rate",label:"Note"},{value:"comments",label:"Nb de commentaires"},{value:"brand",label:"Marque"},{value:"condition",label:"État"},{value:"gtin",label:"Code barre de variante"}]);this.getOption("tier_prices")&&e.add({value:"tierPrices",label:"Tarifs dégressifs"});var t=[];null==this.category_id&&t.push({id:"categories",title:"Toutes les catégories",type:"search"}),t.push({id:"term",title:"Rechercher",type:"input",value:this.filters.term}),t.push({id:"add",title:"Ajouter un filtre",extraClassname:"filter-add",type:"dropdown",disableLabelUpdate:!0,collectionPromise:e});var i=new ListView({collection:this.collection,rowView:RowView,title:"Liste des produits",selection:[{title:"Afficher",callback:this.showProducts.bind(this)},{title:"Masquer",callback:this.hideProducts.bind(this)},{title:"Supprimer",callback:this.deleteProducts.bind(this),confirm:!0}],filters:t,xtra:[{id:"export",extraClassname:"md-export",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{value:"export",label:"Exporter les produits",selected:!1}])},{id:"sort",extraClassname:"md-sort",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{label:"Produit",selected:!0,value:"name"},{label:"Prix minimum",selected:!1,value:"price_min"},{label:"Prix maximum",selected:!1,value:"-price_max"},{label:"Modification",selected:!1,value:"-modification"}])}]});this.showChildView("list",i),this.filters.stock&&i.showFilter("stock"),this.filters.tier_prices&&i.showFilter("tierPrices")},start:function(){var e={extra_fields:"price_label,categories",sort:this.sortOrder?this.sortOrder:null};null!=this.filters.stock&&(e.stock=this.filters.stock),null!=this.filters.category_id&&(e.category_id=this.filters.category_id),null!=this.filters.tag_id&&(e.tag_id=this.filters.tag_id),null!=this.filters.term&&(e.term=this.filters.term),null!=this.filters.price&&(e.price_min=this.filters.price[0],e.price_max=this.filters.price[1]),null!=this.filters.weight&&(e.weight_min=this.filters.weight[0],e.weight_max=this.filters.weight[1]),null!=this.filters.available&&(e.available_date_min=this.filters.available[0],e.available_date_max=this.filters.available[1]),null!=this.filters.is_visible&&(e.is_visible=this.filters.is_visible),null!=this.filters.is_spotlight&&(e.is_spotlight=this.filters.is_spotlight),null!=this.filters.type&&(e.type=this.filters.type),null!=this.filters.variant_name&&(e.variant_name=this.filters.variant_name),null!=this.filters.variant_reference&&(e.variant_reference=this.filters.variant_reference),null!=this.filters.variant_condition&&(e.variant_condition=this.filters.variant_condition),null!=this.filters.variant_gtin&&(e.variant_gtin=this.filters.variant_gtin),null!=this.filters.linked&&(e.linked_count_min=this.filters.linked[0],e.linked_count_max=this.filters.linked[1]),null!=this.filters.rate&&(e.rate_min=this.filters.rate[0],e.rate_max=this.filters.rate[1]),null!=this.filters.comments&&(e.comments_min=this.filters.comments[0],e.comments_max=this.filters.comments[1]),null!=this.filters.brand&&(e.brand_id=this.filters.brand),null!=this.filters.tier_prices&&(e.tier_prices_id=this.filters.tier_prices),this.collection.fetch({reset:!0,data:e})},showProducts:function(e){return this.collection.bulkShow(e)},hideProducts:function(e){return this.collection.bulkHide(e)},deleteProducts:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onTermFilterChange:function(e){this.filters.term=""!=e.value?e.value:null,this.start()},onCategoriesFilterChange:function(e){this.filters.category_id=e.value,this.start()},onTagFilterChange:function(e){this.filters.tag_id=e.value,this.start()},onStockFilterChange:function(e){"yes"==e.value?this.filters.stock="yes":"no"==e.value?this.filters.stock="no":"partial"==e.value?this.filters.stock="partial":this.filters.stock=null,this.start()},onExportFilterChange:function(e){if(e.view){var t=e.view;if("export"==e.value){if(t.collection.length>1)return;t.overrideExtraClassname("md-loading"),t.render();var i={};null!=this.filters.category_id&&(i.category_id=this.filters.category_id),null!=this.filters.tag_id&&(i.tag_id=this.filters.tag_id),null!=this.filters.stock&&(i.stock=this.filters.stock),null!=this.filters.term&&(i.term=this.filters.term),null!=this.filters.price&&(i.price_min=this.filters.price[0],i.price_max=this.filters.price[1]),null!=this.filters.weight&&(i.weight_min=this.filters.weight[0],i.weight_max=this.filters.weight[1]),null!=this.filters.available&&(i.available_date_min=this.filters.available[0],i.available_date_max=this.filters.available[1]),null!=this.filters.is_visible&&(i.is_visible=this.filters.is_visible),null!=this.filters.is_spotlight&&(i.is_spotlight=this.filters.is_spotlight),null!=this.filters.type&&(i.type=this.filters.type),null!=this.filters.variant_name&&(i.variant_name=this.filters.variant_name),null!=this.filters.variant_reference&&(i.variant_reference=this.filters.variant_reference),null!=this.filters.variant_condition&&(i.variant_condition=this.filters.variant_condition),null!=this.filters.variant_gtin&&(i.variant_gtin=this.filters.variant_gtin),null!=this.filters.linked&&(i.linked_count_min=this.filters.linked[0],i.linked_count_max=this.filters.linked[1]),null!=this.filters.rate&&(i.rate_min=this.filters.rate[0],i.rate_max=this.filters.rate[1]),null!=this.filters.comments&&(i.comments_min=this.filters.comments[0],i.comments_max=this.filters.comments[1]),null!=this.filters.brand&&(i.brand_id=this.filters.brand),null!=this.filters.tier_prices&&(i.tier_prices_id=this.filters.tier_prices),this.collection.exportAll(i).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}},onSortFilterChange:function(e){e.view.activeItem(e.value),this.sortOrder=e.value,this.start()},onPriceFilterChange:function(e){this.filters.price=e.value,this.start()},onWeightFilterChange:function(e){this.filters.weight=e.value,this.start()},onAvailableFilterChange:function(e){this.filters.available=e.value,this.start()},onVisibleFilterChange:function(e){this.filters.is_visible=e.value,this.start()},onSpotlightFilterChange:function(e){this.filters.is_spotlight=e.value,this.start()},onTypeFilterChange:function(e){this.filters.type=e.value,this.start()},onNameFilterChange:function(e){this.filters.variant_name=e.value,this.start()},onReferenceFilterChange:function(e){this.filters.variant_reference=e.value,this.start()},onLinkedFilterChange:function(e){this.filters.linked=e.value,this.start()},onRateFilterChange:function(e){this.filters.rate=e.value,this.start()},onCommentsFilterChange:function(e){this.filters.comments=e.value,this.start()},onBrandFilterChange:function(e){this.filters.brand=e.value,this.start()},onConditionFilterChange:function(e){this.filters.variant_condition=e.value,this.start()},onGtinFilterChange:function(e){this.filters.variant_gtin=e.value,this.start()},onTierPricesFilterChange:function(e){this.filters.tier_prices=e.value,this.start()},onChildviewFilterInput:function(e){if(e.view&&e.view.showResults){if("categories"==e.model.get("id")){var t=e.view.current.value?[e.view.current.value]:null;return void this.categories.suggest(e.value,5,t).done(function(t){var i=_.map(t,function(e){return{label:e.name,value:e.category_id}});e.view.showResults(i)}.bind(this))}if("tag"==e.model.get("id")){var t=e.view.current.value?[e.view.current.value]:null;return void this.tags.suggest(e.value,5,t).done(function(t){var i=_.map(t,function(e){return{label:e.name,value:e.tag_id}});e.view.showResults(i)}.bind(this))}return"brand"==e.model.get("id")?void this.brands.suggest(e.value,5).done(function(t){var i=_.map(t,function(e){return{label:e.name,value:e.brand_id}});e.view.showResults(i)}.bind(this)):"tierPrices"==e.model.get("id")?void this.getOption("tier_prices").fetch({data:{name:e.value,limit:5}}).done(function(t){var i=_.map(t,function(e){return{label:e.name,value:e.grid_id}});e.view.showResults(i)}.bind(this)):void 0}},onAddFilterChange:function(e){var t;switch(e.value){case"tag":t={id:e.value,title:"Tous les tags",type:"search",canDelete:!0};break;case"stock":t={id:e.value,title:"Tous les états",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:"yes",label:"En stock",selected:"yes"==this.filters.stock},{value:"partial",label:"En rupture partielle",selected:"partial"==this.filters.stock},{value:"no",label:"En rupture totale",selected:"no"==this.filters.stock}])};break;case"price":t={id:e.value,title:"prix HT",type:"interval",prependText:["Coûte entre","et"],canDelete:!0};break;case"weight":t={id:e.value,title:"grammes",type:"interval",prependText:["Pèse entre","et"],canDelete:!0};break;case"available":t={id:e.value,title:"jj/mm/aaaa",type:"interval",enableDatepicker:"date",prependText:["Disponible entre","et"],canDelete:!0};break;case"visible":t={id:e.value,title:"Visibilité",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:!0,label:"Affiché"},{value:!1,label:"Masqué"}])};break;case"spotlight":t={id:e.value,title:"Produit vedette",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:!0,label:"Mis en avant"},{value:!1,label:"Pas mis en avant"}])};break;case"type":var i=new this.collection.model;t={id:e.value,title:"Type",type:"dropdown",canDelete:!0,collectionPromise:i.getTypes().then(function(e){return new CollectionUtils.SelectCollection(_.map(e,function(e){return{value:e.type,label:e.name}}))})};break;case"name":t={id:e.value,title:"Intitulé de la variante",type:"input",value:"",canDelete:!0};break;case"reference":t={id:e.value,title:"Référence de la variante",type:"input",value:"",canDelete:!0};break;case"linked":t={id:e.value,title:"nb produits",type:"interval",prependText:["Associé à entre","et"],canDelete:!0};break;case"rate":t={id:e.value,title:"de 0 à 10",type:"interval",prependText:["Noté entre","et"],canDelete:!0};break;case"comments":t={id:e.value,title:"nb de fois",type:"interval",prependText:["Commenté entre","et"],canDelete:!0};break;case"brand":t={id:e.value,title:"Marque",type:"search",canDelete:!0};break;case"condition":t={id:e.value,title:"État",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:"new",label:"Neuf"},{value:"used",label:"Occasion"},{value:"refurbished",label:"Reconditionné"}])};break;case"gtin":t={id:e.value,title:"Code barre",type:"input",value:"",canDelete:!0};break;case"tierPrices":t={id:e.value,title:"Toutes les grilles",type:"search",canDelete:!0};break;default:return}e.model.collection.add(t)}});
},{"128":128,"23":23,"234":234,"235":235,"31":31,"606":606,"undefined":undefined}],255:[function(require,module,exports){
var Marionette=require("backbone.marionette"),_=require("underscore"),SelectView=require(139);module.exports=Marionette.View.extend({template:_.template('<label>Taxe</label><div data-role="taxes"></div>'),className:"form-group",regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["taxes","selected"])},onRender:function(){var e=new SelectView({collection:this.taxes,selected:this.selected,name:"tax_id"});this.taxes.length>0?this.onTaxChange(this.selected):this.listenTo(e,"load",this.onTaxChange),this.listenTo(e,"change",this.onTaxChange),this.showChildView("taxes",e)},onTaxChange:function(e){this.selected=e,this.trigger("change",e)}});
},{"139":139,"undefined":undefined}],256:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(236),className:"container",service:"catalog",behaviors:[FormBehavior],fields:["currency","comments_allowed","comments_captcha","comments_anonymous","comments_autopublish","require_auth"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"236":236,"27":27,"608":608,"undefined":undefined}],257:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Catalog=require(196),ActiveLinksBehaviors=require(18);module.exports=Marionette.View.extend({template:require(237),service:"catalog",behaviors:[ActiveLinksBehaviors],initialize:function(e){this.overview=new Catalog,this.fetchAndRender()},templateContext:function(){return{overview:this.overview.toJSON()}},fetchAndRender:function(){Backbone.$.when(this.overview.fetch()).done(function(){this.render()}.bind(this)).fail(function(){console.log("FAIL")})},onRefreshProducts:function(e){return null==e?void this.overview.fetch().done(function(){this.render()}.bind(this)):(this.overview.get("products_count")+e<0?this.overview.set("products_count",0):this.overview.set("products_count",this.overview.get("products_count")+e),void this.render())}});
},{"18":18,"196":196,"237":237,"undefined":undefined}],258:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ListView=require(128),RowActionsBehavior=require(31),Forms=require(608),RowView=Marionette.View.extend({template:require(239),className:"list-item",ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()}});module.exports=Marionette.View.extend({template:require(238),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des tags",selection:[{title:"Supprimer",callback:this.deleteTags.bind(this),confirm:!0}]}))},start:function(){this.collection.fetch()},deleteTags:function(e){return this.collection.bulkDelete(e)}});
},{"128":128,"238":238,"239":239,"31":31,"608":608,"undefined":undefined}],259:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),RowActionsBehavior=require(31),FormBehavior=require(27),Forms=require(608),format=require(607),NewRowView=Marionette.View.extend({template:require(241),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]'},templateContext:function(){return{tax_id:"new"}},onActionSave:function(){var e=new this.collection.model;return e.save(Forms.extractFields(["is_default","vat_rate"],this)).done(function(){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),RowView=Marionette.View.extend({template:require(242),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},templateContext:function(){return{vat_rate:format.formatFloat(this.model.get("vat_rate"))}},onActionDelete:function(){return this.model.destroy({wait:!0}).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},onActionSave:function(){return this.model.save(Forms.extractFields(["vat_rate","is_default"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(240),className:"container",service:"catalog",behaviors:[FormBehavior],fields:["display_taxes","is_duty_free"],initialize:function(e){this.mergeOptions(e,["collection","model"]),this.listenTo(this.collection,"change",function(e,t){t.merge||e.hasChanged("is_default")&&this.collection.fetch({reset:!0})}),this.listenTo(this.collection,"add",function(e,t){e.hasChanged("tax_id")&&e.get("is_default")&&this.collection.fetch({reset:!0})}),this.listenTo(this.collection,"remove",function(e,t){e.get("is_default")&&this.collection.fetch({reset:!0})})},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.model.get("is_duty_free")||(this.collection.fetch(),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Liste des taxes"})))},onSave:function(){var e=Forms.extractFields(this.fields,this);return e.display_taxes="1"==e.display_taxes,this.model.save(e,{patch:!0}).done(function(){this.render()}.bind(this))}});
},{"128":128,"240":240,"241":241,"242":242,"27":27,"31":31,"607":607,"608":608,"undefined":undefined}],260:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ListView=require(128),RowActionsBehavior=require(31),Forms=require(608),RowView=Marionette.View.extend({template:require(244),className:"list-item",ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionSave:function(){var e=Forms.extractFields(["name"],this);return this.model.rename(e.name).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}});module.exports=Marionette.View.extend({template:require(243),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des variantes"}))},start:function(){this.collection.fetch()}});
},{"128":128,"243":243,"244":244,"31":31,"608":608,"undefined":undefined}],261:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Order=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/checkout/orders",idAttribute:"order_id",defaults:{order_id:null,reference:"",customer_id:null,customer_email:"",customer_number:"",ip_address:"",reverse_host:"",creation_date:"",modification_date:"",status:"",is_paid:!1,payment_id:null,payment_name:"",is_reintegrated:!1,payment_date:"",price_total_inc_vat:0,price_total_ex_vat:0,price_total_inc_vat_label:"",price_total_ex_vat_label:"",base_price:"",currency:"",is_tax_free:!1,comment:"",use_billing_as_shipping:!0,shipping:null,billing_address:{},shipping_address:{},fidelity_reward:0},restore:function(){return Backbone.ajax({url:"sites/@site/checkout/orders/aborted/"+this.get("order_id"),method:"PUT"})}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/checkout/orders/aborted",model:Order});
},{"606":606,"undefined":undefined}],262:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Step=Backbone.Model.extend({defaults:{weight:0,price_ex_vat:0,price_inc_vat:0,price_ex_vat_label:"",price_inc_vat_label:""}}),Steps=Backbone.Collection.extend({model:Step}),Country=CollectionUtils.KiubiModel.extend({urlRoot:function(){return"sites/@site/checkout/carriers/"+this.get("carrier_id")+"/countries"},idAttribute:"country_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{country_id:e.data}:(e.data.steps&&(e.data.steps=new Steps(e.data.steps)),e.data):e},defaults:{carrier_id:null,country_id:null,franco:null,delay:"",steps:null}});module.exports=CollectionUtils.KiubiCollection.extend({carrier_id:null,url:function(){return"sites/@site/checkout/carriers/"+this.carrier_id+"/countries"},model:Country,parse:function(e){return this.meta=e.meta,_.map(e.data,function(e){e.carrier_id=this.carrier_id}.bind(this)),e.data},promisedSelect:function(e){var t=this;return this.fetch({data:{extra_fields:"all_countries"}}).then(function(){var i=new CollectionUtils.SelectCollection,r=[{label:"Pays livrables",is_group:!0}],n=[{label:"Frais de port non défini",is_group:!0}];return t.each(function(t){var i={value:t.get("country_id"),label:t.get("name"),selected:e&&t.get("country_id")==e};t.get("count")>0?r.push(i):n.push(i)}),r.length>1&&i.add(r),n.length>1&&i.add(n),i})}});
},{"606":606,"undefined":undefined}],263:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Carrier=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/checkout/carriers",idAttribute:"carrier_id",meta:{},defaults:{carrier_id:null,name:"",is_enabled:!1,is_default:!1,is_deletable:!1,description:"",position:0,type:"",export_type:!1,require_scheduling:"no",open_days:[],closed_days:[],limit_hour:null,scheduling_interval_min:null,scheduling_interval_max:null,coliship_type:null,coliship_tradername:"",socolissimo_id:null,socolissimo_secret:null,socolissimo_be_enabled:null,socolissimo_be_extra:null,socolissimo_pickup_franco:null,dpd_customer_center:null,dpd_customer:null,dpd_gmaps:null,dpd_insurance_threshold:null,dpd_gsm_notification:null,mondialrelay_customer:null,mondialrelay_secret:null,mondialrelay_delay:null,mondialrelay_brand:null,mondialrelay_insurance_threshold:null,mondialrelay_insurance_level:null,mondialrelay_gmaps:null,socolissimo_login:null,socolissimo_password:null,socolissimo_delay:null,socolissimo_gmaps:null},isSupported:function(){return"magasin"==this.get("type")||"socolissimo"==this.get("type")||"local"==this.get("type")||"tranchespoids"==this.get("type")||"dpd"==this.get("type")||"soco_pickup"==this.get("type")||"mondialrelay"==this.get("type")},isDeletable:function(){return this.get("is_deletable")===!0}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/checkout/carriers",model:Carrier,promisedSelect:function(e,l){l=_.extend({exclude_pickup:!1},l);var i=this;return this.fetch().then(function(){var t=new CollectionUtils.SelectCollection,n=[];return i.each(function(i){l.exclude_pickup&&"magasin"==i.get("type")||n.push({value:i.get("carrier_id"),label:i.get("name"),selected:e&&i.get("carrier_id")==e})}),t.add(n),t})},reOrder:function(e){return Backbone.ajax({url:"sites/@site/checkout/carriers",method:"PUT",data:{order:e}})},bulkEnable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?Backbone.$.Deferred().resolve():e.save({is_enabled:!0},{patch:!0})},e)},bulkDisable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?e.save({is_enabled:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)}});
},{"606":606,"undefined":undefined}],264:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Step=Backbone.Model.extend({defaults:{weight:0,price_ex_vat:0,price_inc_vat:0,price_ex_vat_label:"",price_inc_vat_label:""}}),Steps=Backbone.Collection.extend({model:Step}),Zone=CollectionUtils.KiubiModel.extend({urlRoot:function(){return"sites/@site/checkout/carriers/"+this.get("carrier_id")+"/zones"},idAttribute:"zone_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{zone_id:e.data}:(e.data.steps&&(e.data.steps=new Steps(e.data.steps)),e.data):e},defaults:{carrier_id:null,zone_id:null,postal_codes:[],free_threshold:null,steps:null}});module.exports=CollectionUtils.KiubiCollection.extend({carrier_id:null,url:function(){return"sites/@site/checkout/carriers/"+this.carrier_id+"/zones"},model:Zone,parse:function(e){return this.meta=e.meta,_.map(e.data,function(e){e.carrier_id=this.carrier_id}.bind(this)),e.data},promisedSelect:function(e){var t=this;return this.fetch().then(function(){var i=new CollectionUtils.SelectCollection,r=[];return t.each(function(t){r.push({value:t.get("zone_id"),label:_.isArray(t.get("postal_codes"))?t.get("postal_codes").join(","):t.get("postal_codes"),selected:e&&t.get("zone_id")==e})}),i.add(r),i})}});
},{"606":606,"undefined":undefined}],265:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/checkout",isNew:function(){return!1},defaults:{pending_count:0,processing_count:0,processed_count:0,shipped_count:0,cancelled_count:0}});
},{"606":606}],266:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Option=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/checkout/options",idAttribute:"option_id",meta:{},defaults:{option_id:null,name:"",description:"",is_enabled:!1,tax_id:null,price_ex_vat:0,price_inc_vat:0,price_ex_vat_label:"",price_inc_vat_label:"",type:"simple",values:[],position:0,creation_date:null,modification_date:null},isSupported:function(){return"simple"==this.get("type")||"textarea"==this.get("type")||"select"==this.get("type")}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/checkout/options",model:Option,reOrder:function(e){return Backbone.ajax({url:"sites/@site/checkout/options",method:"PUT",data:{order:e}})}});
},{"606":606,"undefined":undefined}],267:[function(require,module,exports){
function checkExport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/export/checkout/orders/"+t,method:"GET"}).then(function(e,t){return e})}var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Job=require(476),Order=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/checkout/orders",idAttribute:"order_id",defaults:{order_id:null,reference:"",customer_id:null,customer_email:"",customer_number:"",ip_address:"",reverse_host:"",creation_date:"",modification_date:"",status:"",is_paid:!1,payment_id:null,payment_name:"",is_reintegrated:!1,payment_date:"",price_total_inc_vat:0,price_total_ex_vat:0,price_total_inc_vat_label:"",price_total_ex_vat_label:"",base_price:"",currency:"",is_tax_free:!1,comment:"",use_billing_as_shipping:!0,shipping:null,billing_address:{},shipping_address:{},voucher:null,items:[],options:[],activity:[],fidelity_reward:0,download:[],xtra:[]}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/checkout/orders",model:Order,bulkPaymentStatus:function(e,t){return CollectionUtils.bulkAction(this,function(e){return e.get("is_paid")==t?Backbone.$.Deferred().resolve():e.save({is_paid:t},{patch:!0})},e)},bulkStatus:function(e,t){return CollectionUtils.bulkAction(this,function(e){return e.get("status")==t?Backbone.$.Deferred().resolve():e.save({status:t},{patch:!0})},e)},suggest:function(e,t){return Backbone.ajax({url:"sites/@site/suggest/checkout/orders",data:{term:e,limit:t||5}}).then(function(e){return _.map(e,function(e){return{order_id:e.order_id,reference:e.reference,status:e.status}})})},exportAll:function(e){return Backbone.ajax({url:"sites/@site/export/checkout/orders",method:"POST",data:e}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkExport(t)})})}});
},{"476":476,"606":606,"undefined":undefined}],268:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),supported=["systempay","paybox","cheque","virement","paypal","cm_cic","atos","payline","payplug","manuel"],Payment=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/checkout/payments",idAttribute:"payment_id",defaults:{payment_id:null,name:"",type:"",is_enabled:!1,notification_url:null,config:{}},isSupported:function(){return supported.indexOf(this.get("type"))>=0}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/checkout/payments",model:Payment,reOrder:function(e){return Backbone.ajax({url:"sites/@site/checkout/payments",method:"PUT",data:{order:e}})},promisedSelect:function(e){var t=this;return this.fetch().then(function(){var i=[];return t.each(function(t){i.push({value:t.get("payment_id"),label:t.get("name"),selected:e&&t.get("payment_id")==e})}),new CollectionUtils.SelectCollection(i)})}});
},{"606":606,"undefined":undefined}],269:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/checkout",meta:null,isNew:function(){return!1},defaults:{is_enabled:!1,order_prefix:"C",stockout_selling:!1,stockout_threshold:0,min_order_amount:.01,decrement_stock:"at_payment",mail_recipients:"",mail_pending:"",mail_processing:"",mail_processed:"",mail_shipped:"",mail_cancelled:""}});
},{"606":606}],270:[function(require,module,exports){
function getCarriersAction(e){e=e||{};var t=[];t=t.concat([{title:"Ajouter un transporteur",callback:["actionNewCarrier","tranchespoids"]},{title:"Ajouter un transporteur local",callback:["actionNewCarrier","local"]}]);var i=Backbone.Radio.channel("app").request("ctx:session");if(i.hasFeature("multi_pickup")&&t.push({title:"Ajouter un retrait en magasin",callback:["actionNewCarrier","magasin"]}),e.addSave){var r={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};t.length<=1?t.push(r):t.splice(1,0,r)}return t}function getOrderAction(e){e=e||{};var t=[];e.form&&t.push({title:"Version imprimable",callback:["actionOpenURL",e.form]}),e.xls&&t.push({title:"Exporter pour Excel",callback:["actionOpenURL",e.xls]}),e.coliship&&t.push({title:"Exporter pour Coliship",callback:["actionOpenURL",e.coliship]}),e.dpd&&t.push({title:"Exporter pour Station DPD",callback:["actionOpenURL",e.dpd]}),e.mondialrelay&&t.push({title:"Exporter pour Mondial Relay Connect",callback:["actionOpenURL",e.mondialrelay]});var i={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};return t.length<=1?t.push(i):t.splice(1,0,i),t}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Router=require(612),Controller=require(34),Checkout=require(265),Orders=require(267),Aborted=require(261),Settings=require(269),Options=require(266),Taxes=require(209),Carriers=require(263),CarriersCountries=require(262),CarriersZones=require(264),Countries=require(39),Search=require(43),Payments=require(268),Customers=require(384),Departements=require(41),OrdersView=require(335),OrderView=require(334),AbortedView=require(314),PaymentsView=require(337),PaymentView=require(336),OptionsView=require(333),OptionView=require(332),OptionAddModalView=require(331),SettingsView=require(339),SettingsEmailsView=require(338),CarriersView=require(329),CarrierView=require(315),SidebarMenuView=require(340),CheckoutController=Controller.extend({sidebarMenuService:"checkout",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Commandes",href:"/checkout"}],redirectToPending:function(e){this.navigationController.navigate("/checkout/orders?status=pending")},showOrders:function(e){var t=this.parseQueryString(e,{status:null,term:null,creation_date_min:null,creation_date_max:null,department:null});if(!t.status)return void this.navigationController.navigate("/checkout/orders?status=pending");var i=Backbone.Radio.channel("app").request("ctx:session"),r=new OrdersView({collection:new Orders,carriers:new Carriers,customers:new Customers,payments:new Payments,departments:new Departements,filters:t,hasAccounting:i.hasFeature("accounting")});this.navigationController.showContent(r),r.start(),this.listenTo(r.collection,"bulk",function(e){this.triggerSidebarMenu("refresh:orders")});var n;switch(t.status){default:n="Toutes les commandes";break;case"pending":n="À traiter";break;case"processing":n="En cours";break;case"processed":n="Traitées";break;case"shipped":n="Expédiées";break;case"cancelled":n="Annulées"}this.setHeader({title:n})},showOrder:function(e){var t=new Orders,i=new t.model({order_id:e});i.fetch({data:{extra_fields:"activity,price_label,xtra"}}).done(function(){var e=new OrderView({model:i});this.navigationController.showContent(e),this.setHeader({title:"#"+i.get("reference")},getOrderAction({xls:i.get("download").xls?i.get("download").xls:null,coliship:i.get("download").coliship?i.get("download").coliship:null,form:i.get("download").form?i.get("download").form:null,dpd:i.get("download").dpd?i.get("download").dpd:null,mondialrelay:i.get("download").mondialrelay?i.get("download").mondialrelay:null}))}.bind(this)).fail(this.failHandler("Commande introuvable"))},showAborted:function(){var e=new AbortedView({collection:new Aborted});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Commandes abondonnées"})},showPayments:function(){var e=new PaymentsView({collection:new Payments});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Modes de paiement"})},showPayment:function(e){var t=(new Payments).add({payment_id:e});t.fetch().done(function(){if(!t.isSupported())return this.notFound(),void this.setHeader({title:"Mode de paiement non supportée"});var e=new PaymentView({model:t});this.listenTo(t,"change",function(e){e.hasChanged("name")&&this.setBreadCrum([{title:"Modes de paiement",href:"/checkout/payments"},{title:t.get("name")}],!0)}.bind(this)),this.navigationController.showContent(e),this.setHeader([{title:"Modes de paiement",href:"/checkout/payments"},{title:t.get("name")}],[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Mode de paiement introuvable"))},showOptions:function(){var e=new OptionsView({collection:new Options});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Options à la commande"},[{title:"Ajouter une option",callback:"showOptionAdd"}])},showOption:function(e){var t=(new Options).add({option_id:e}),i=new Taxes;Backbone.$.when(i.fetch(),t.fetch()).done(function(){if(!t.isSupported())return this.notFound(),void this.setHeader({title:"Option non supportée"});var e=new OptionView({model:t,taxes:i});this.listenTo(t,"change",function(e){e.hasChanged("name")&&this.setBreadCrum([{title:"Options",href:"/checkout/options"},{title:t.get("name")}],!0)}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/checkout/options")}),this.navigationController.showContent(e),this.setHeader([{title:"Options",href:"/checkout/options"},{title:t.get("name")}],[{title:"Enregistrer",callback:"actionSave"},{title:"Ajouter une option",callback:"showOptionAdd"}])}.bind(this)).fail(this.failHandler("Option introuvable"))},showOptionAdd:function(){var e=new OptionAddModalView({});this.listenTo(e,"select:type",this.actionNewOption),this.navigationController.showInModal(e,{title:"Ajouter une option",modalClass:"modal-pagetype-add"})},actionNewOption:function(e){var t=(new Options).add({type:e.type});return t.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/checkout/options/"+t.get("option_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showSettingsEmails:function(){var e=new Settings;e.fetch().done(function(){var t=new SettingsEmailsView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Emails de confirmation"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showSettings:function(){var e=new Settings;e.fetch().done(function(){var t=new SettingsView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Paramètres des commandes"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvable"))},showCarriers:function(){var e=new CarriersView({collection:new Carriers});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Transporteurs et frais de port"},getCarriersAction())},showCarrier:function(e){var t=(new Carriers).add({carrier_id:e}),i=new Taxes;t.fetch().done(function(){if(!t.isSupported())return this.notFound(),void this.setHeader({title:"Transporteur non supportée"});var r=new CarriersCountries;r.carrier_id=e;var n=new CarriersZones;n.carrier_id=e;var o=new CarrierView({model:t,taxes:i,countries:new Countries,carrierCountries:r,carrierZones:n,search:new Search});this.listenTo(t,"change",function(e){e.hasChanged("name")&&this.setBreadCrum([{title:"Transporteurs",href:"/checkout/carriers"},{title:t.get("name")}],!0)}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/checkout/carriers")}),this.navigationController.showContent(o),this.setHeader([{title:"Transporteurs",href:"/checkout/carriers"},{title:t.get("name")}],getCarriersAction({addSave:!0}))}.bind(this)).fail(this.failHandler("Transporteur introuvable"))},actionNewCarrier:function(e){var t=(new Carriers).add({type:e,is_enabled:!1});return t.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/checkout/carriers/"+t.get("carrier_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))}});module.exports=Router.extend({controller:new CheckoutController,appRoutes:{checkout:"redirectToPending","checkout/orders":"showOrders","checkout/orders/:id":"showOrder","checkout/aborted":"showAborted","checkout/payments":"showPayments","checkout/payments/:id":"showPayment","checkout/options":"showOptions","checkout/options/:id":"showOption","checkout/emails":"showSettingsEmails","checkout/settings":"showSettings","checkout/carriers":"showCarriers","checkout/carriers/:id":"showCarrier"},onRoute:function(e){var t=Backbone.Radio.channel("app").request("ctx:session");return t.hasScope("site:checkout")&&t.hasFeature("checkout")?void this.controller.showSidebarMenu():(this.controller.navigationController.navigate("/"),!1)}});
},{"209":209,"261":261,"262":262,"263":263,"264":264,"265":265,"266":266,"267":267,"268":268,"269":269,"314":314,"315":315,"329":329,"331":331,"332":332,"333":333,"334":334,"335":335,"336":336,"337":337,"338":338,"339":339,"34":34,"340":340,"384":384,"39":39,"41":41,"43":43,"612":612,"undefined":undefined}],271:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/commandes.html#commandes-abandonnees" class="md-icon md-help float-right" target="_blank"></a> Les commandes abandonnées peuvent correspondre à deux cas de figures :<br><br><ol><li>Les commandes abandonnées par les clients qui ne sont jamais allés au bout du processus de paiement en ligne (hors chèque et virement)</li><li>Les commandes qui ont bien été payées mais qui ont rencontré un problème temporaire qui a empêché le fournisseur de moyen de paiement d\'informer Kiubi que le paiement a bien été effectué. Vous avez donc un crédit sur votre compte bancaire qui ne se correspond à aucune commande "À traiter"</li></ol>Vous seul pouvez distinguer le cas n°1 du cas n°2. Cette page vous permet de réintégrer les commandes du cas n°2 dans la liste des commandes "À traiter" <strong><span class="text-uppercase">uniquement si</span> vous avez bien reçu leur paiement sur votre compte bancaire</strong>.</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],272:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col item-body"><h4>#'+(null==(__t=reference)?"":_.escape(__t))+" </h4> "+(null==(__t=creation_date)?"":_.escape(__t))+' </div><div class="col-5"><span> ',__p+=customer_id?' <a href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'">'+(null==(__t=billing_address.firstname)?"":_.escape(__t))+" "+(null==(__t=billing_address.lastname)?"":_.escape(__t))+"</a> ":" "+(null==(__t=billing_address.firstname)?"":_.escape(__t))+" "+(null==(__t=billing_address.lastname)?"":_.escape(__t))+" ",__p+=" ","pickup"==shipping.type?(__p+="<br> ",__p+=shipping.scheduled?" Retrait le "+(null==(__t=scheduled_date)?"":_.escape(__t))+" ":" "+(null==(__t=shipping.name)?"":_.escape(__t))+" ",__p+=" "):shipping.scheduled&&(__p+="<br>À livrer le "+(null==(__t=scheduled_date)?"":_.escape(__t))+" "),__p+=' </span></div><div class="col-2"> ',"refused"===payment_status&&(__p+=' <span class="badge badge-danger">Paiement refusé </span> '),__p+=' </div><div class="col-1 text-nowrap"><span class="price">'+(null==(__t=price_total_inc_vat_label)?"":_.escape(__t))+' TTC<br></span></div><div class="col-auto"><a class="btn btn-primary float-right" data-role="action" data-action="restore" data-confirm="warning" href="#" role="button">Réintégrer</a></div></div>';return __p};
},{"undefined":undefined}],273:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<form> ","socolissimo"==type?__p+=' <article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>Colissimo Entreprise est une solution de livraison multiples (points relais, sur rendez-vous, etc.) de la Poste. Pour plus d\'informations, <a href="https://www.colissimo.entreprise.laposte.fr/fr" target="_blank">rendez-vous sur le site officiel</a> ou contactez un conseiller la Poste au 3634.</p><p>Afin de configurer correctement ce mode de livraison vous devez :</p><ol><li>Allez sur le site de la Poste et <a href="https://www.colissimo.entreprise.laposte.fr/fr" target="_blank">vous ouvrir un compte</a></li><li>Configurez l\'outil de gestion de compte fourni par la Poste en indiquant les URL de retour sur le site marchand :<br><br>Lorsque le client a sélectionné son mode de livraison (Validation) :<br><strong>'+(null==(__t=domain)?"":_.escape(__t))+"/ecommerce/socolissimo.html</strong><br><br>Lorsque le client n'a pas pu sélectionner son mode de livraison (Echec) :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/socolissimo.html</strong><br><br></li><li>Complètez le formulaire ci-dessous et activez le transporteur</li></ol><p><strong class="text-danger">Il est indispensable d\'effectuer au moins une commande avec ce transporteur</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article> ':(__p+=' <div class="alert alert-warning" role="alert"> ',"tranchespoids"==type?__p+=' <a href="https://aide.kiubi.com/transporteurs.html#ajout-d-un-transporteur" class="md-icon md-help float-right" target="_blank"></a> Un transporteur est défini pour une livraison à l\'adresse indiquée dans une commande. Les frais de port sont calculés en fonction du <strong>pays</strong> de livraison, par <strong>tranche de poids</strong>. ':"magasin"==type?__p+=' <a href="https://aide.kiubi.com/transporteurs.html#ajout-d-un-retrait-en-magasin" class="md-icon md-help float-right" target="_blank"></a> Le retrait en boutique est disponible pour défaut pour toutes les commandes. Le retrait en boutique est <strong>toujours gratuit</strong>. ':"local"==type?__p+=' <a href="https://aide.kiubi.com/transporteurs.html#ajout-d-un-transporteur-local" class="md-icon md-help float-right" target="_blank"></a> Un transporteur local est défini pour une livraison à l\'adresse indiquée dans une commande. Les frais de port sont calculés en fonction du <strong>code postal</strong> de livraison, par <strong>tranche de poids</strong>. ':"dpd"==type?__p+=' <a href="https://aide.kiubi.com/transporteurs.html#parametrer-dpd-relais-pickup" class="md-icon md-help float-right" target="_blank"></a> DPD Relais Pickup est une solution de livraison en points relais dans toute la France. Pour plus d\'informations, <a href="https://www.dpd.fr/pickup" target="_blank">rendez-vous sur le site officiel de DPD</a>. ':"soco_pickup"==type?__p+=' <a href="https://aide.kiubi.com/transporteurs.html#parametrer-colissimo-points-relais" class="md-icon md-help float-right" target="_blank"></a> Colissimo Points Relais est une solution de livraison en points relais dans toute la France et en Europe. Pour plus d\'informations, <a href="https://www.colissimo.entreprise.laposte.fr/fr" target="_blank">rendez-vous sur le site officiel de La Poste</a>. ':"mondialrelay"==type&&(__p+=' <a href="https://aide.kiubi.com/transporteurs.html#parametrer-mondial-relay" class="md-icon md-help float-right" target="_blank"></a> Mondial Relay est une solution de livraison en points relais dans toute la France et en Europe. Pour plus d\'informations, <a href="https://www.mondialrelay.fr/" target="_blank">rendez-vous sur le site officiel de Mondial Relay</a>. '),__p+=" </div> "),__p+=' <div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé du transporteur</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé du transporteur tel qu\'il apparaîtra dans le choix de la livraison"></div><div class="row"><div class="col-4"><div class="form-group"><label>Transporteur par défaut</label><div class="form-check"><input name="is_default" id="is_default1" value="1" type="radio" '+(null==(__t=is_default?'checked="checked"':"")?"":__t)+'><label for="is_default1">Oui</label><input name="is_default" id="is_default0" value="0" type="radio" '+(null==(__t=is_default?"":'checked="checked"')?"":__t)+'><label for="is_default0">Non</label></div></div></div><div class="col-4"><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div></div></div></div><footer class="post-footer"></footer></article><div data-role="infos"></div><div data-role="export"></div><div data-role="schedule"></div></form><div data-role="charges"></div><div class="save"><div class="btn-toolbar" role="toolbar"> ',is_deletable&&(__p+='<button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button>'),__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],274:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><form><header class="post-header no-border"><h1>Pays livrables</h1></header><div class="post-content post-list"><div class="post-group"><div class="row"><div class="col-6"><div class="form-group"><label>Pays concerné</label><div data-role="countries"></div></div></div></div></div><div class="row"><div class="col-6"><div class="form-group"><label for="free_threshold">Francos de port pour le pays concerné</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Gratuit à partir de</span></div><input class="form-control" id="free_threshold" name="free_threshold" value="" placeholder="—"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div><div class="col-6"><div class="form-group"><label for="delay">Délai de livraison pour le pays concerné</label><input class="form-control" id="delay" name="delay" value="" placeholder="3 jours, 1 semaine..."></div></div></div><div class="row"><div class="col-4"><label>Tranche de poids</label></div><div class="col-3"><label>Frais du port</label></div></div><div data-role="steps"></div><div class="list-item no-hover"><a href="#" data-role="step-add"><span class="page-add md-icon md-add-page"></span>Ajouter une tranche pour le pays concerné</a></div></div><footer class="post-footer"></footer></form></article>';return __p};
},{"undefined":undefined}],275:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Livraison en Point Relais</h1></header><form data-role="pickup"><div class="post-content post-list"><div class="row"><div class="col-6"><div class="form-group"><label for="free_threshold">Francos de port</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Gratuit à partir de</span></div><input class="form-control" id="free_threshold" name="free_threshold" value="" placeholder="—"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div><div class="col-6"><div class="form-group"><label for="delay">Délai de livraison</label><input class="form-control" id="delay" name="delay" value="" placeholder="3 jours, 1 semaine..."></div></div></div><div class="row"><div class="col-4"><label>Tranche de poids</label></div><div class="col-3"><label>Frais du port</label></div></div><div data-role="pickup"></div><div class="list-item no-hover"><a href="#" data-role="pickup-add"><span class="page-add md-icon md-add-page"></span>Ajouter une tranche de poids</a></div></div></form><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],276:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Paramètres de configuration</h1></header><div class="post-content"><div class="row"><div class="col-6"><div class="form-group"><label class="required" for="dpd_customer_center">Code agence DPD</label><input class="form-control" id="dpd_customer_center" name="dpd_customer_center" value="'+(null==(__t=dpd_customer_center)?"":_.escape(__t))+'" placeholder="Série de chiffres fournie par DPD"></div></div><div class="col-6"><div class="form-group"><label class="required" for="dpd_customer">Numéro de contrat DPD</label><input class="form-control" id="dpd_customer" name="dpd_customer" value="'+(null==(__t=dpd_customer)?"":_.escape(__t))+'" placeholder="Série de chiffres fournie par DPD"></div></div></div><div class="form-group"><label for="dpd_insurance_threshold">Assurance Ad Valorem</label><p>Souscrite automatiquement pour les commandes dont le montant total TTC est supérieur ou égal au seuil défini.</p><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" id="dpd_insurance_threshold" name="dpd_insurance_threshold" value="'+(null==(__t=dpd_insurance_threshold)?"":_.escape(__t))+'" placeholder="—"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+' TTC</span></div></div></div></div></div><div class="form-group"><label>Notification par SMS</label><p>DPD informe les clients par SMS de la disponibilité de leurs colis. Ce service est facturé par DPD, selon le contrat souscrit.</p><div class="form-check"><input name="dpd_gsm_notification" id="dpd_gsm_notification1" value="1" type="radio" '+(null==(__t="1"==dpd_gsm_notification?'checked="checked"':"")?"":__t)+'><label for="dpd_gsm_notification1">Oui</label><input name="dpd_gsm_notification" id="dpd_gsm_notification0" value="0" type="radio" '+(null==(__t="1"!=dpd_gsm_notification?'checked="checked"':"")?"":__t)+'><label for="dpd_gsm_notification0">Non</label></div></div><div class="form-group"><label for="dpd_gmaps">Clé API Google Maps</label><p>Permet l\'affichage des points relais sur une carte.</p><input class="form-control" id="dpd_gmaps" name="dpd_gmaps" value="'+(null==(__t=dpd_gmaps)?"":_.escape(__t))+'" placeholder="Laisser vide pour désactiver la carte"></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations complémentaires</h1></header><div class="post-content"><div class="form-group"><label for="description">Description</label><textarea class="form-control" id="description" name="description" placeholder="Description du transporteur telle qu\'elle apparaîtra dans le choix de la livraison" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div><div class="row"><div class="col-6"><div class="form-group"><label for="threshold">Montant de commande minimum</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Actif à partir de</span></div><input class="form-control" id="threshold" name="threshold" value="'+(null==(__t=threshold)?"":_.escape(__t))+'" placeholder="1,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div><div class="clearfix"></div><div class="col-3"><div data-role="taxes"></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],277:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header no-border"><h1>Gestion des colis</h1></header><div class="post-content"><div class="post-group"><div class="row"><div class="col-6"><div class="form-group"><label for="export_type">Transporteur et solution de colisage</label><select data-role="export_type" class="form-control" id="export_type" name="export_type" data-style="selectify"><option value="">Pas de solution de colisage</option><option value="coliship" '+(null==(__t="coliship"==export_type?'selected="selected"':"")?"":__t)+'>Colissimo pour Coliship ou Expeditor INET</option><option value="dpd" '+(null==(__t="dpd"==export_type?'selected="selected"':"")?"":__t)+'>DPD pour Station DPD</option><option value="mondialrelay" '+(null==(__t="mondialrelay"==export_type?'selected="selected"':"")?"":__t)+'>Mondial Relay Connect (hors France)</option></select></div></div></div></div><div data-role="coliship" style="display: none; margin-bottom: -30px"><p>Les commandes utilisant ce transporteur peuvent être incluses dans les exports au format Coliship ou Expeditor INET.</p><div class="row"><div class="col-8"><div class="form-group"><label>Remise contre signature (si possible)</label><div class="form-check"><input name="coliship_type" id="coliship_type1" value="expert" type="radio" '+(null==(__t="access"!=coliship_type?'checked="checked"':"")?"":__t)+'><label for="coliship_type1">Oui (Colissimo Expert)</label><input name="coliship_type" id="coliship_type0" value="access" type="radio" '+(null==(__t="access"==coliship_type?'checked="checked"':"")?"":__t)+'><label for="coliship_type0">Non (Colissimo Access)</label></div></div></div></div></div><div data-role="dpd" style="display: none"><p>Les commandes utilisant ce transporteur peuvent être incluses dans les exports au format Station DPD.</p><div class="row"><div class="col-6"><div class="form-group"><label class="required" for="dpd_customer_center">Code agence DPD</label><input class="form-control" id="dpd_customer_center" name="dpd_customer_center" value="'+(null==(__t=dpd_customer_center)?"":_.escape(__t))+'" placeholder="Série de chiffres fournie par DPD"></div></div><div class="col-6"><div class="form-group"><label class="required" for="dpd_customer">Numéro de contrat DPD</label><input class="form-control" id="dpd_customer" name="dpd_customer" value="'+(null==(__t=dpd_customer)?"":_.escape(__t))+'" placeholder="Série de chiffres fournie par DPD"></div></div></div><div class="form-group"><label for="dpd_insurance_threshold">Assurance Ad Valorem</label><p>Souscrite automatiquement pour les commandes dont le montant total TTC est supérieur ou égal au seuil défini.</p><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" id="dpd_insurance_threshold" name="dpd_insurance_threshold" value="'+(null==(__t=dpd_insurance_threshold)?"":_.escape(__t))+'" placeholder="—"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+' TTC</span></div></div></div></div></div></div><div data-role="mondialrelay" style="display: none"><p>Les commandes utilisant ce transporteur peuvent être incluses dans les exports pour Mondial Relay Connect.</p><div class="form-group"><label for="mondialrelay_insurance_threshold">Seuil d\'assurance</label><p>Souscrite automatiquement pour les commandes dont le montant total TTC est supérieur ou égal au seuil défini.</p><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" id="mondialrelay_insurance_threshold" name="mondialrelay_insurance_threshold" value="'+(null==(__t=mondialrelay_insurance_threshold)?"":_.escape(__t))+'" placeholder="—"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+' TTC</span></div></div></div></div></div><div class="form-group"><label for="mondialrelay_insurance_level">Niveau d\'assurance</label><p>Stratégie du choix du niveau d\'assurance par rapport au montant de la commande.</p><div class="row"><div class="col-6"><select id="mondialrelay_insurance_level" name="mondialrelay_insurance_level" data-style="selectify"><option value="floor" '+(null==(__t="floor"===mondialrelay_insurance_level?'selected="selected"':"")?"":__t)+'>Tranche inférieure la plus proche</option><option value="ceil" '+(null==(__t="ceil"===mondialrelay_insurance_level?'selected="selected"':"")?"":__t)+'>Tranche supérieure la plus proche</option></select></div></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],278:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Informations complémentaires</h1></header><div class="post-content"><div class="form-group"><label for="description">Description</label><textarea class="form-control" id="description" name="description" placeholder="Description du transporteur telle qu\'elle apparaîtra dans le choix de la livraison" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div><div class="row"><div class="col-6"><div class="form-group"><label for="threshold">Montant de commande minimum</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Actif à partir de</span></div><input class="form-control" id="threshold" name="threshold" value="'+(null==(__t=threshold)?"":_.escape(__t))+'" placeholder="1,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div><div class="clearfix"></div><div class="col-3"><div data-role="taxes"></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],279:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><form><header class="post-header no-border"><h1>Zones livrables</h1></header><div class="post-content post-list"><div class="post-group"><div data-role="select-zone"><div class="form-group"><a href="#" data-role="delete-zone" class="md-icon md-delete float-right"></a>&nbsp;<a href="#" data-role="edit-zone" class="md-icon md-edit float-right"></a><label>Zone concernée</label><div data-role="zones"></div></div><p style="margin: -15px 0 0 0"><a href="#" data-role="add-zone"><span class="page-add md-icon md-add-page"></span>Ajouter une zone</a></p></div><div data-role="edit-zone" style="display: none"><div class="form-group has-feedback"><label>Codes postaux</label><div data-role="tags"></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel-zone">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="save-zone">Enregistrer</button></div></div></div></div><div class="row"><div class="col-6"><div class="form-group"><label for="free_threshold">Francos de port pour la zone concernée</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Gratuit à partir de</span></div><input class="form-control" id="free_threshold" name="free_threshold" value="" placeholder="—"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div></div><div class="row"><div class="col-4"><label>Tranche de poids</label></div><div class="col-3"><label>Frais du port</label></div></div><div data-role="steps"></div><div class="list-item no-hover"><a href="#" data-role="step-add"><span class="page-add md-icon md-add-page"></span>Ajouter une tranche pour la zone concernée</a></div></div><footer class="post-footer"></footer></form></article>';return __p};
},{"undefined":undefined}],280:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Adresse de la boutique</h1></header><div class="post-content"><div class="form-group"><label for="description">Description</label><textarea class="form-control" id="description" name="description" placeholder="Description de l\'option telle qu\'elle apparaîtra dans le choix de la livraison" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label for="company">Société</label><input class="form-control" id="company" name="company" value="'+(null==(__t=company)?"":_.escape(__t))+'" placeholder="Raison sociale de la société"></div><div class="form-group"><label class="required" for="address">Adresse</label><input class="form-control" id="address" name="address" value="'+(null==(__t=address)?"":_.escape(__t))+'" placeholder="Numéro, rue, bâtiment, étage, ..."></div><div class="row"><div class="col-4"><div class="form-group"><label class="required" for="zipcode">Code postal</label><input class="form-control" id="zipcode" name="zipcode" value="'+(null==(__t=zipcode)?"":_.escape(__t))+'"></div></div><div class="col-4"><div class="form-group"><label class="required" for="city">Ville</label><input class="form-control" id="city" name="city" value="'+(null==(__t=city)?"":_.escape(__t))+'"></div></div><div class="col-4"><div class="form-group"><label class="required">Pays</label><div data-role="countries"></div></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],281:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Paramètres de configuration</h1></header><div class="post-content"><div class="row"><div class="col-6"><div class="form-group"><label class="required" for="mondialrelay_customer">Code enseigne</label><input class="form-control" id="mondialrelay_customer" name="mondialrelay_customer" value="'+(null==(__t=mondialrelay_customer)?"":_.escape(__t))+'" placeholder="Code fourni par Mondial Relay"></div></div><div class="col-6"><div class="form-group"><label class="required" for="mondialrelay_secret">Clé privée</label><input class="form-control" id="mondialrelay_secret" name="mondialrelay_secret" value="'+(null==(__t=mondialrelay_secret)?"":_.escape(__t))+'" placeholder="Code fourni fourni par Mondial Relay"></div></div><div class="col-6"><div class="form-group"><label class="required" for="mondialrelay_brand">Code marque</label><input class="form-control" id="mondialrelay_brand" name="mondialrelay_brand" value="'+(null==(__t=mondialrelay_brand)?"":_.escape(__t))+'" placeholder="Code fourni par Mondial Relay"></div></div></div><div class="form-group"><label for="mondialrelay_insurance_threshold">Seuil d\'assurance</label><p>Souscrite automatiquement pour les commandes dont le montant total TTC est supérieur ou égal au seuil défini.</p><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" id="mondialrelay_insurance_threshold" name="mondialrelay_insurance_threshold" value="'+(null==(__t=mondialrelay_insurance_threshold)?"":_.escape(__t))+'" placeholder="—"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+' TTC</span></div></div></div></div></div><div class="form-group"><label for="mondialrelay_insurance_level">Niveau d\'assurance</label><p>Stratégie du choix du niveau d\'assurance par rapport au montant de la commande.</p><div class="row"><div class="col-6"><select id="mondialrelay_insurance_level" name="mondialrelay_insurance_level" data-style="selectify"><option value="floor" '+(null==(__t="floor"===mondialrelay_insurance_level?'selected="selected"':"")?"":__t)+'>Tranche inférieure la plus proche</option><option value="ceil" '+(null==(__t="ceil"===mondialrelay_insurance_level?'selected="selected"':"")?"":__t)+'>Tranche supérieure la plus proche</option></select></div></div></div><div class="form-group"><label class="required" for="mondialrelay_delay">Délai de préparation des colis</label><p>Délai moyen avant expédition nécessaire pour sélectionner les points de retrait ouverts à la date probable de réception du colis.</p><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" id="mondialrelay_delay" name="mondialrelay_delay" value="'+(null==(__t=mondialrelay_delay)?"":_.escape(__t))+'" placeholder="—"><div class="input-group-append"><span class="input-group-text">jours</span></div></div></div></div></div><div class="form-group"><label for="mondialrelay_gmaps">Clé API Google Maps</label><p>Permet l\'affichage des points relais sur une carte.</p><input class="form-control" id="mondialrelay_gmaps" name="mondialrelay_gmaps" value="'+(null==(__t=mondialrelay_gmaps)?"":_.escape(__t))+'" placeholder="Laisser vide pour désactiver la carte"></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations complémentaires</h1></header><div class="post-content"><div class="form-group"><label for="description">Description</label><textarea class="form-control" id="description" name="description" placeholder="Description du transporteur telle qu\'elle apparaîtra dans le choix de la livraison" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div><div class="row"><div class="col-6"><div class="form-group"><label for="threshold">Montant de commande minimum</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Actif à partir de</span></div><input class="form-control" id="threshold" name="threshold" value="'+(null==(__t=threshold)?"":_.escape(__t))+'" placeholder="1,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div><div class="clearfix"></div><div class="col-3"><div data-role="taxes"></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],282:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Plannification de la ',__p+="local"==type?"date de livraison":"date de retrait",__p+='</h1></header><div class="post-content"> ',__p+="local"==type?" <p>La plannification de la date de livraison permet de proposer le choix d'une date et d'une heure auxquelles les commandes peuvent être livrées.</p> ":" <p>La plannification de la date de retrait permet de proposer le choix d'une date et d'une heure auxquelles les commandes peuvent être retirées en magasin.</p> ",__p+=' <div class="row"><div class="col-6"><div class="form-group"><label for="require_scheduling">Plannification</label><select class="form-control" id="require_scheduling" name="require_scheduling" data-style="selectify"><option value="no" '+(null==(__t="no"==require_scheduling?'selected="selected"':"")?"":__t)+'>Désactivée</option><option value="date" '+(null==(__t="date"==require_scheduling?'selected="selected"':"")?"":__t)+'>Activée</option><option value="datetime" '+(null==(__t="datetime"==require_scheduling?'selected="selected"':"")?"":__t)+'>Activée avec plages horaires</option></select></div></div></div><div data-role="days"></div><hr class="mt-0"><div class="form-group"><label for="closed_days">Jours de fermeture exceptionelle</label><input class="form-control" id="closed_days" name="closed_days" value="'+(null==(__t=closed_days)?"":_.escape(__t))+'" placeholder="Jusqu\'à 20 dates (jj/mm/aaaa) séparées par des virgules (ex. : 01/05/2017,14/07/2017,01/08/2018)"></div><div class="form-group"><label for="limit_hour">Heure de bascule</label> ',__p+="local"==type?" <p>Heure à partir de laquelle les commandes ne peuvent être commandées que le prochain jour ouvré.</p> ":" <p>Heure à partir de laquelle les commandes ne peuvent être retirées que le prochain jour ouvré.</p> ",__p+=' <div class="row"><div class="col-3"><input class="form-control" id="limit_hour" name="limit_hour" value="'+(null==(__t=limit_hour)?"":_.escape(__t))+'" placeholder="ex. : 14h45"></div></div></div><div class="form-group"><label for="scheduling_interval_min">Délai minimal avant de pouvoir ',__p+="local"==type?"livrer les commandes":"retirer les commandes",__p+='</label><div class="row"><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="scheduling_interval_min" name="scheduling_interval_min" value="'+(null==(__t=scheduling_interval_min)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">jour(s)</span></div></div></div></div></div><div class="form-group"><label for="scheduling_interval_max">Délai maximal pour pouvoir ',__p+="local"==type?"livrer les commandes":"retirer les commandes",__p+='</label><div class="row"><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="scheduling_interval_max" name="scheduling_interval_max" value="'+(null==(__t=scheduling_interval_max)?"":_.escape(__t))+'" placeholder="—"><div class="input-group-append"><span class="input-group-text">jour(s)</span></div></div></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],283:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="col-3"><div class="form-group"><label>'+(null==(__t=name)?"":_.escape(__t))+'</label><select name="open_days['+(null==(__t=day_of_week)?"":_.escape(__t))+'][is_open]" data-style="selectify"><option value="0" '+(null==(__t=is_open?"":'selected="selected"')?"":__t)+'>Fermé</option><option value="1" '+(null==(__t=is_open?'selected="selected"':"")?"":__t)+">Ouvert</option></select></div></div> ","datetime"==require_scheduling&&(__p+=' <div class="col-9"><div class="form-group"><label class="required">Heures d\'ouverture</label><input class="form-control" name="open_days['+(null==(__t=day_of_week)?"":_.escape(__t))+'][time_frames]" value="'+(null==(__t=frames)?"":_.escape(__t))+'" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div> '),__p+="";return __p};
},{"undefined":undefined}],284:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Paramètres de configuration</h1></header><div class="post-content"><div class="row"><div class="col-6"><div class="form-group"><label class="required" for="socolissimo_login">Identifiant Colissimo</label><input class="form-control" id="socolissimo_login" name="socolissimo_login" value="'+(null==(__t=socolissimo_login)?"":_.escape(__t))+'" placeholder="Série de chiffres fournie par La Poste"></div></div><div class="col-6"><div class="form-group"><label class="required" for="socolissimo_password">Mot de passe Colissimo</label><input class="form-control" id="socolissimo_password" name="socolissimo_password" value="'+(null==(__t=socolissimo_password)?"":_.escape(__t))+'" placeholder="Mot de passe fourni par La Poste"></div></div></div><div class="form-group"><label class="required" for="socolissimo_delay">Délai de préparation</label><p>Délai moyen de préparation d\'un colis avant son expédition, nécessaire pour sélectionner les points de retrait ouverts à la date propable de réception du colis.</p><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" id="socolissimo_delay" name="socolissimo_delay" value="'+(null==(__t=socolissimo_delay)?"":_.escape(__t))+'" placeholder="—"><div class="input-group-append"><span class="input-group-text">jours</span></div></div></div></div></div><div class="form-group"><label for="socolissimo_gmaps">Clé API Google Maps</label><p>Permet l\'affichage des points relais sur une carte.</p><input class="form-control" id="socolissimo_gmaps" name="socolissimo_gmaps" value="'+(null==(__t=socolissimo_gmaps)?"":_.escape(__t))+'" placeholder="Laisser vide pour désactiver la carte"></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations complémentaires</h1></header><div class="post-content"><div class="form-group"><label for="description">Description</label><textarea class="form-control" id="description" name="description" placeholder="Description du transporteur telle qu\'elle apparaîtra dans le choix de la livraison" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div><div class="row"><div class="col-6"><div class="form-group"><label for="threshold">Montant de commande minimum</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Actif à partir de</span></div><input class="form-control" id="threshold" name="threshold" value="'+(null==(__t=threshold)?"":_.escape(__t))+'" placeholder="1,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div><div class="clearfix"></div><div class="col-3"><div data-role="taxes"></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],285:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Livraison vers la France Métropolitaine, Andorre et Monaco</h1></header><form data-role="steps"><div class="post-content post-list"><div class="row"><div class="col-4"><label>Tranche de poids</label></div><div class="col-3"><label>Frais du port</label></div></div><div data-role="steps"></div><div class="list-item no-hover"><a href="#" data-role="step-add"><span class="page-add md-icon md-add-page"></span>Ajouter une tranche de poids</a></div></div></form><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Livraison en Point Relais</h1></header><form data-role="pickup"><div class="post-content post-list"><div class="row"><div class="col-6"><div class="form-group"><label for="socolissimo_pickup_free_threshold">Francos de port</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Gratuit à partir de</span></div><input class="form-control" id="socolissimo_pickup_free_threshold" name="socolissimo_pickup_free_threshold" value="'+(null==(__t=socolissimo_pickup_free_threshold)?"":_.escape(__t))+'" placeholder="—"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div></div><div class="row"><div class="col-4"><label>Tranche de poids</label></div><div class="col-3"><label>Frais du port</label></div></div><div data-role="pickup"></div><div class="list-item no-hover"><a href="#" data-role="pickup-add"><span class="page-add md-icon md-add-page"></span>Ajouter une tranche de poids</a></div></div></form><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Livraison vers la Belgique</h1></header><div class="post-content"><div class="form-group"><label for="socolissimo_be_extra">Montant du surcout</label><p>Le montant doit être égale à celui configuré dans l\'outil de gestion de compte de la Poste.</p><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="socolissimo_be_extra" name="socolissimo_be_extra" value="'+(null==(__t=socolissimo_be_extra)?"":_.escape(__t))+'" placeholder="1,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+' TTC d\'achat</span></div></div></div></div></div><div class="form-group"><label>Autoriser la livraison vers la Belgique</label><div class="form-check"><input name="socolissimo_be_enabled" id="socolissimo_be_enabled1" value="1" type="radio" '+(null==(__t=socolissimo_be_enabled?'checked="checked"':"")?"":__t)+'><label for="socolissimo_be_enabled1">Oui</label><input name="socolissimo_be_enabled" id="socolissimo_be_enabled0" value="0" type="radio" '+(null==(__t=socolissimo_be_enabled?"":'checked="checked"')?"":__t)+'><label for="socolissimo_be_enabled0">Non</label></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],286:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Paramètres de configuration</h1></header><div class="post-content"><div class="form-group"><label class="required" for="socolissimo_id">Identifiant FO</label><input class="form-control" id="socolissimo_id" name="socolissimo_id" value="'+(null==(__t=socolissimo_id)?"":_.escape(__t))+'" placeholder="14 chiffres fournis par La Poste dans l\'outil de gestion de compte"></div><div class="form-group"><label class="required" for="socolissimo_secret">Clé de cryptage</label><input class="form-control" id="socolissimo_secret" name="socolissimo_secret" value="'+(null==(__t=socolissimo_secret)?"":_.escape(__t))+'" placeholder="12 chiffres fournis par La Poste dans l\'outil de gestion de compte"></div><div class="form-group"><label>Remise contre signature</label><p>Proposée uniquement lorsque l\'internaute choisit une livraison à domicile.</p><div class="form-check"><input name="coliship_type" id="coliship_type1" value="expert" type="radio" '+(null==(__t="expert"==coliship_type?'checked="checked"':"")?"":__t)+'><label for="coliship_type1">Oui (Colissimo Expert)</label><input name="coliship_type" id="coliship_type0" value="access" type="radio" '+(null==(__t="access"==coliship_type?'checked="checked"':"")?"":__t)+'><label for="coliship_type0">Non (Colissimo Access)</label></div></div><div class="form-group"><label for="coliship_tradername">Nom commercial du chargeur</label><p>Utilisé pour l\'export vers le logiciel Expeditor INET.</p><input class="form-control" id="coliship_tradername" name="coliship_tradername" value="'+(null==(__t=coliship_tradername)?"":_.escape(__t))+'" placeholder="La valeur renseignée se substitue à celle configurée dans l\'outil de gestion de compte"></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations complémentaires</h1></header><div class="post-content"><div class="form-group"><label for="description">Description</label><textarea class="form-control" id="description" name="description" placeholder="Description du transporteur telle qu\'elle apparaîtra dans le choix de la livraison" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div><div class="row"><div class="col-6"><div class="form-group"><label for="threshold">Montant de commande minimum</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Actif à partir de</span></div><input class="form-control" id="threshold" name="threshold" value="'+(null==(__t=threshold)?"":_.escape(__t))+'" placeholder="1,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div><div class="clearfix"></div><div class="col-6"><div class="form-group"><label for="free_threshold">Francos de port</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Gratuit à partir de</span></div><input class="form-control" id="free_threshold" name="free_threshold" placeholder="—"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achat</span></div></div></div></div><div class="col-6"><div class="form-group"><label for="delay">Délai de livraison</label><input class="form-control" id="delay" name="delay" placeholder="3 jours, 1 semaine..."></div></div><div class="col-3"><div data-role="taxes"></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],287:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-4"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">Jusqu\'à</span></div><input class="form-control" name="weight[]" value="'+(null==(__t=weight)?"":_.escape(__t))+'" placeholder="—"><div class="input-group-append"><span class="input-group-text">Kg</span></div></div></div></div><div class="col-3"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="price_ex_vat[]" value="'+(null==(__t=price_ex_vat)?"":_.escape(__t))+'" data-role="vat" data-linked="price_inc_vat[]" placeholder="0,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+' HT</span></div></div></div></div><div class="col-3"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="price_inc_vat[]" value="'+(null==(__t=price_inc_vat)?"":_.escape(__t))+'" data-role="vat" data-linked="price_ex_vat[]" placeholder="0,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+' TTC</span></div></div></div></div><div class="col"><a href="#" data-role="action" data-action="delete" class="md-icon md-delete float-right"></a></div></div>';return __p};
},{"undefined":undefined}],288:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/transporteurs.html" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez utiliser plusieurs transporteurs : <strong>le retrait en magasin</strong> pour le Click & Collect, les solutions de <strong>Colissimo La Poste</strong>, de <strong>DPD Relais Pickup</strong>, de <strong>Mondial Relay</strong> et des transporteurs personnalisés pour des <strong>livraisons nationales</strong> (par pays) ou <strong>locales</strong> (par codes postaux).</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],289:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_supported?" "+(null==(__t=type_label)?"":_.escape(__t))+" ":' <span class="text-danger">Transporteur non supporté : '+(null==(__t=type)?"":_.escape(__t))+"</span> ",__p+=' </div><div class="col-4"> ',__p+=is_default?' <span class="badge badge-success">Par défaut</span> ':is_enabled?' <span class="badge badge-success">Activé</span> ':' <span class="badge badge-danger">Désactivé</span> ',__p+=' </div><div class="col-auto"> ',is_supported&&(__p+=" ",__p+=is_deletable?' <div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/checkout/carriers/'+(null==(__t=carrier_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div> ':' <a class="btn btn-primary float-right" href="/checkout/carriers/'+(null==(__t=carrier_id)?"":_.escape(__t))+'" role="button">Détail</a> ',__p+=" "),__p+=" </div></div>";return __p};
},{"undefined":undefined}],290:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><div class="post-content"><form><div class="row"><div class="col-12"><div class="form-group"><label for="modal_civility" class="required">Civilité</label><select class="form-control" id="modal_civility" name="civility" data-style="selectify"><option value="Mr">Monsieur</option><option value="Mrs">Madame</option><option value="Miss">Mademoiselle</option></select></div></div><div class="col-12"><div class="form-group"><label for="modal_lastname" class="required">Nom</label><input class="form-control" id="modal_lastname" name="lastname" placeholder="" value="'+(null==(__t=address.lastname)?"":_.escape(__t))+'"></div></div><div class="col-12"><div class="form-group"><label for="modal_firstname" class="required">Prénom</label><input class="form-control" id="modal_firstname" name="firstname" placeholder="" value="'+(null==(__t=address.firstname)?"":_.escape(__t))+'"></div></div><div class="col-12"><div class="form-group"><label for="modal_company">Société</label><input class="form-control" id="modal_company" name="company" placeholder="" value="'+(null==(__t=address.company)?"":_.escape(__t))+'"></div></div><div class="col-12"><div class="form-group"><label for="modal_address" class="required">Adresse</label><input class="form-control" id="modal_address" name="address" placeholder="" value="'+(null==(__t=address.address)?"":_.escape(__t))+'"></div></div><div class="col-12"><div class="form-group"><label for="modal_zipcode" class="required">Code postal</label><input class="form-control" id="modal_zipcode" name="zipcode" placeholder="" value="'+(null==(__t=address.zipcode)?"":_.escape(__t))+'"></div></div><div class="col-12"><div class="form-group"><label for="modal_city" class="required">Ville</label><input class="form-control" id="modal_city" name="city" placeholder="" value="'+(null==(__t=address.city)?"":_.escape(__t))+'"></div></div><div class="col-12"><div class="form-group"><label for="modal_country_id">Pays</label><div data-role="countries"></div></div></div> ',"billing"===type&&(__p+=' <div class="col-12"><div class="form-group"><label for="modal_phone" class="required">Téléphone</label><input class="form-control" id="modal_phone" name="phone" placeholder="" value="'+(null==(__t=address.phone)?"":_.escape(__t))+'"></div></div> '),__p+=' </div></form><div class="w-100"></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],291:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><div class="row no-gutters"><div class="col-4 d-flex"><div class="card card-select" data-role="select-simple"><div class="md-icon md-check-box"></div><div class="card-body"><h4>Option simple</h4><p>Une case à cocher dans le panier</p></div></div></div><div class="col-4 d-flex"><div class="card card-select" data-role="select-textarea"><div class="md-icon md-comment"></div><div class="card-body"><h4>Zone de texte</h4><p>Permet d\'ajouter un commentaire</p></div></div></div><div class="col-4 d-flex"><div class="card card-select" data-role="select-select"><div class="md-icon md-list"></div><div class="card-body"><h4>Liste de valeurs</h4><p>Choisir une valeur prédéterminée</p></div></div></div></div><div class="w-100"></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],292:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label>Type d\'option</label> ',__p+="simple"==type?" <p>Option simple sous la forme d'une case à cocher pour y souscire dans le détail du panier.</p> ":"textarea"==type?" <p>Zone de texte permettant d'ajouter un commentaire si l'option est souscrite dans le détail du panier.</p> ":" <p>Liste de valeurs prédéterminées sélectionnables si l'option est souscrite dans le détail du panier.</p> ",__p+=' </div><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Visible</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Masqué</label></div></div><div class="form-group"><label class="required" for="name">Intitulé de l\'option</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé de l\'option tel qu\'il apparaîtra dans le détail du panier"></div><div class="row"><div class="col-4"><div class="form-group"><label for="price_ex_vat">Prix HT</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_ex_vat" name="price_ex_vat" value="'+(null==(__t=price_ex_vat)?"":_.escape(__t))+'" data-role="vat" data-linked="price_inc_vat" placeholder="Gratuit"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div><div class="col-4"><div class="form-group"><label for="price_inc_vat">Prix TTC</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="price_inc_vat" name="price_inc_vat" value="'+(null==(__t=price_inc_vat)?"":_.escape(__t))+'" data-role="vat" data-linked="price_ex_vat" placeholder="Gratuit"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+'</span></div></div></div></div><div class="col-4"><div data-role="taxes"></div></div></div> ',"select"==type&&(__p+=' <div class="form-group"><label class="required" for="values">Liste des valeurs</label><input class="form-control" id="values" name="values" value="'+(null==(__t=values)?"":_.escape(__t))+'" placeholder="Valeur 1, Valeur 2, Valeur 3, ..."></div> '),__p+=' <div class="form-group"><label for="description">Description</label><textarea class="form-control" id="description" name="description" rows="5" placeholder="Description de l\'option telle qu\'elle apparaîtra dans le détail du panier">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],293:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert">Les options sont proposées dans le détail du panier d\'achat. Elles peuvent être <strong>payantes</strong> ou <strong>gratuites</strong>, sous la forme d\'une simple <strong>case à cocher</strong>, d\'une <strong>zone de texte</strong> permettant de laisser un commentaire ou d\'une <strong>liste de valeurs</strong> prédéterminées.</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],294:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_supported?(__p+=" ",__p+=is_enabled?""+(null==(__t=type_label)?"":_.escape(__t)):'<span class="text-danger">Masqué</span>',__p+=" "):__p+=' <span class="text-danger">Type d\'option non supportée : '+(null==(__t=type)?"":_.escape(__t))+"</span> ",__p+=' </div><div class="col-4"> ',__p+=0==price_inc_vat?"Offert":""+(null==(__t=price_inc_vat_label)?"":_.escape(__t))+" TTC",__p+=' </div><div class="col-auto"> ',is_supported&&(__p+=' <div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/checkout/options/'+(null==(__t=option_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div> '),__p+=" </div></div>";return __p};
},{"undefined":undefined}],295:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="order-detail"><article class="post-article post-article-dark"><div class="post-content"><div class="row align-items-center"><div class="col-auto"><div class="form-group">Commande créée le '+(null==(__t=creation_date)?"":_.escape(__t))+(null==(__t=is_reintegrated?", réintégrée manuellement":"")?"":__t)+' </div></div><div class="col-auto"><div class="form-group"><div data-role="is_paid"></div></div></div><div class="col-auto"><div class="form-group"><div data-role="status"></div></div></div><div class="col"><div class="form-group" data-role="notify" style="display: none"><div class="checkbox"><input id="notify" name="notify" value="1" type="checkbox"><label for="notify" class="mb-0">Notifier l\'acheteur du changement d\'état</label></div></div></div></div></div><footer class="post-footer"></footer></article><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><div class="post-content post-list no-hover"> ',_.each(items,function(e){__p+=' <div class="list-item order-item"><div class="row"><div class="col item-body"><h4> ',__p+=e.product_id?' <a href="/catalog/products/'+(null==(__t=e.product_id)?"":_.escape(__t))+'">'+(null==(__t=e.product_name)?"":_.escape(__t))+"</a> ":" "+(null==(__t=e.product_name)?"":_.escape(__t))+" ",__p+=" </h4> "+(null==(__t=e.variant_name)?"":_.escape(__t))+" ",e.reference&&(__p+="<br>#"+(null==(__t=e.reference)?"":_.escape(__t))),__p+=" ",0!=e.price_ecotax&&(__p+="<br><em>Éco-part. de "+(null==(__t=e.price_ecotax_label)?"":_.escape(__t))+"</em>"),__p+=" ",e.file_id&&(__p+='<br><a href="/media/files/'+(null==(__t=e.file_id)?"":_.escape(__t))+'">Télécharger</a>'),__p+=' </div><div class="col-3 text-right no-white-space"> ',__p+="TTC"==base_price?" "+(null==(__t=e.price_inc_vat_label)?"":_.escape(__t))+" TTC ":" "+(null==(__t=e.price_ex_vat_label)?"":_.escape(__t))+" HT ",__p+=" ",e.is_discounted&&(__p+="<br>-"+(null==(__t=e.discount)?"":_.escape(__t))+"% "),__p+=' </div><div class="col-2">x'+(null==(__t=e.quantity)?"":_.escape(__t))+'</div><div class="col-auto text-right no-white-space" style="width: 150px"> ',__p+="TTC"==base_price?" "+(null==(__t=e.price_total_inc_vat_label)?"":_.escape(__t))+" TTC ":" "+(null==(__t=e.price_total_ex_vat_label)?"":_.escape(__t))+" HT ",__p+=" </div></div></div> "}),__p+=" ",_.each(options,function(e){__p+=' <div class="list-item order-item"><div class="row"><div class="col item-body"><h4>'+(null==(__t=e.name)?"":_.escape(__t))+"</h4> "+(null==(__t=e.value)?"":_.escape(__t))+' </div><div class="col-3 text-right no-white-space"> ',__p+="TTC"==base_price?" "+(null==(__t=e.price_inc_vat_label)?"":_.escape(__t))+" TTC ":" "+(null==(__t=e.price_ex_vat_label)?"":_.escape(__t))+" TTC ",__p+=' </div><div class="col-2">x'+(null==(__t=e.quantity)?"":_.escape(__t))+'</div><div class="col-auto text-right no-white-space" style="width: 150px"> ',__p+="TTC"==base_price?" "+(null==(__t=e.price_total_inc_vat_label)?"":_.escape(__t))+" TTC ":" "+(null==(__t=e.price_total_ex_vat_label)?"":_.escape(__t))+" HT ",__p+=" </div></div></div> "}),__p+=" ",voucher&&voucher_label&&(__p+=' <div class="list-item order-item"><div class="row"><div class="col item-body"><h4>Bon de réduction</h4> '+(null==(__t=voucher_label)?"":_.escape(__t))+' avec le code "'+(null==(__t=voucher.code)?"":_.escape(__t))+'"</div></div></div> '),__p+=" ",fidelity_reward>0&&(__p+=' <div class="list-item order-item"><span class="md-icon md-card-membership icon-left"></span> '+(null==(__t=fidelity_reward)?"":_.escape(__t))+" points de fidélité ajoutés au compte du membre</div> "),__p+=' <div class="list-item order-item"><span class="md-icon md-icon-outlined md-payment icon-left"></span>Paiement par '+(null==(__t=payment_name)?"":_.escape(__t))+' </div><div class="order-total"><div class="row"> ',__p+="TTC"==base_price?' <div class="col mr-md-3 text-right">Total TTC hors frais de port<br>Frais de port<br>dont TVA<br><span class="total">Total TTC</span></div><div class="col-4 text-right">'+(null==(__t=price_items_inc_vat_label)?"":_.escape(__t))+"<br> "+(null==(__t=shipping.price_inc_vat_label)?"":_.escape(__t))+"<br> "+(null==(__t=price_vat_label)?"":_.escape(__t))+'<br><span class="total">'+(null==(__t=price_total_inc_vat_label)?"":_.escape(__t))+"</span></div> ":' <div class="col mr-md-3 text-right">Total HT hors frais de port<br>Frais de port HT<br>TVA<br><span class="total">Total TTC</span></div><div class="col-4 text-right">'+(null==(__t=price_items_ex_vat_label)?"":_.escape(__t))+"<br> "+(null==(__t=shipping.price_ex_vat_label)?"":_.escape(__t))+"<br> "+(null==(__t=price_vat_label)?"":_.escape(__t))+'<br><span class="total">'+(null==(__t=price_total_inc_vat_label)?"":_.escape(__t))+"</span></div> ",__p+=' </div></div></div><footer class="post-footer"></footer></article> ',shipping&&"delivery"==shipping.type&&(__p+=' <article class="post-article"><div class="post-content"><div class="form-group"><label>Transporteur</label><p class="form-control-static">'+(null==(__t=shipping.name)?"":_.escape(__t))+'</p></div><div class="form-group"><label for="picking_number">Suivi de colis</label><input class="form-control" id="picking_number" name="picking_number" value="'+(null==(__t=shipping.picking_number)?"":_.escape(__t))+'" placeholder="Adresse de suivi sous la forme https://www.adresse-de-suivi.com/"></div></div><footer class="post-footer"></footer></article> '),__p+=' <article class="post-article"><div class="post-content"><div class="form-group"><label>Ajouter une note</label><p>La note est à usage interne et n\'est pas visible sur la commande de l\'acheteur.</p><textarea class="form-control" name="comment" rows="7">'+(null==(__t=comment)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></div><div class="col-lg-4 col-12"><article class="post-article"><div class="post-content"> ',billing_address&&(__p+=' <div class="post-subcontent"> ',customer_id&&(__p+='<a href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'" class="float-right">Détail</a>'),__p+=' <h4>À propos de l\'acheteur</h4><span class="md-icon md-icon-outlined md-account float-right"></span> '+(null==(__t=billing_address._civility)?"":_.escape(__t))+" "+(null==(__t=billing_address.firstname)?"":_.escape(__t))+" "+(null==(__t=billing_address.lastname)?"":_.escape(__t))+"<br>#"+(null==(__t=customer_number)?"":_.escape(__t))+'<br><a href="mailto:'+(null==(__t=customer_email)?"":_.escape(__t))+'">'+(null==(__t=customer_email)?"":_.escape(__t))+"</a></div> "),__p+=" ",shipping_address&&(__p+=' <div class="post-subcontent"> ',shipping_address.is_editable&&(__p+='<a href="#" data-role="addressEdit" data-type="shipping" class="float-right">Modifier</a>'),__p+=" <h4>"+(null==(__t="pickup"==shipping.type?shipping.name:"Adresse de livraison")?"":__t)+" </h4> ",__p+="delivery"==shipping.type?' <span class="md-icon md-icon-outlined md-local-shipping float-right"></span> ':' <span class="md-icon md-icon-outlined md-storefront float-right"></span> ',__p+=" "+(null==(__t=shipping_address._civility)?"":_.escape(__t))+" "+(null==(__t=shipping_address.firstname)?"":_.escape(__t))+" "+(null==(__t=shipping_address.lastname)?"":_.escape(__t))+"<br> ",shipping_address.company&&(__p+=""+(null==(__t=shipping_address.company)?"":_.escape(__t))+"<br>"),__p+=" "+(null==(__t=shipping_address.address)?"":_.escape(__t))+"<br> "+(null==(__t=shipping_address.zipcode)?"":_.escape(__t))+" "+(null==(__t=shipping_address.city)?"":_.escape(__t))+"<br> "+(null==(__t=shipping_address.country)?"":_.escape(__t))+" ",shipping.scheduled&&(__p+='<br><div class="mt-3"><span class="badge badge-lg badge-secondary rounded-pill">'+(null==(__t="pickup"==shipping.type?"À retirer":"À livrer")?"":__t)+" le "+(null==(__t=scheduled_date)?"":_.escape(__t))+"</span></div> "),__p+=' <p class="mt-3"> ',"delivery"==shipping.type&&(__p+='<a href="'+(null==(__t=shipping_address.map)?"":_.escape(__t))+'" target="_blank">Localiser l\'adresse</a>'),__p+=" </p></div> "),__p+=" ",billing_address&&(__p+=' <div class="post-subcontent"> ',billing_address.is_editable&&(__p+='<a href="#" data-role="addressEdit" data-type="billing" class="float-right">Modifier</a>'),__p+=' <h4>Adresse de facturation</h4><span class="md-icon md-icon-outlined md-receipt float-right"></span> '+(null==(__t=billing_address._civility)?"":_.escape(__t))+" "+(null==(__t=billing_address.firstname)?"":_.escape(__t))+" "+(null==(__t=billing_address.lastname)?"":_.escape(__t))+"<br> ",billing_address.company&&(__p+=""+(null==(__t=billing_address.company)?"":_.escape(__t))+"<br>"),__p+=" "+(null==(__t=billing_address.address)?"":_.escape(__t))+"<br> "+(null==(__t=billing_address.zipcode)?"":_.escape(__t))+" "+(null==(__t=billing_address.city)?"":_.escape(__t))+"<br> "+(null==(__t=billing_address.country)?"":_.escape(__t))+"<br>Tél. : "+(null==(__t=billing_address.phone)?"":_.escape(__t))+' <p class="mt-3"><a href="'+(null==(__t=billing_address.map)?"":_.escape(__t))+'" target="_blank">Localiser l\'adresse</a></p></div> '),__p+=" ",_.isArray(xtra)&&xtra.length>0&&(__p+=' <div class="post-subcontent"><h4>Données complémentaires</h4><span class="md-icon md-icon-outlined md-extension float-right"></span> ',_.each(xtra,function(e){__p+=" <div><strong>"+(null==(__t=e.title)?"":_.escape(__t))+"</strong>: ",__p+=""===e.value?" <i>(vide)</i> ":" "+(null==(__t=e.value)?"":_.escape(__t))+" ",__p+=" </div> "}),__p+=" </div> "),__p+=' </div><footer class="post-footer"></footer></article><article class="post-article order-history"><div class="post-content"><div class="post-subcontent"><span class="md-icon md-history float-right"></span><h4>Historique</h4><div data-role="activity"></div></div></div><footer class="post-footer"></footer></article></div></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"><a href="/checkout/orders?status='+(null==(__t=status)?"":_.escape(__t))+'" class="btn btn-lg btn-primary btn-cancel">Annuler</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],296:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/commandes.html" class="md-icon md-help float-right" target="_blank"></a> Avant de traiter une commande, <strong>vous devez vérifier auprès de votre établissement bancaire que la transaction correspondante</strong> a bien été acceptée.</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],297:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="order_'+(null==(__t=order_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=order_id)?"":_.escape(__t))+'" type="checkbox"><label for="order_'+(null==(__t=order_id)?"":_.escape(__t))+'"></label></div><div class="col item-body"><h4>#'+(null==(__t=reference)?"":_.escape(__t))+" </h4> "+(null==(__t=creation_date_fromnow)?"":_.escape(__t))+' </div><div class="col-3"><span> ',__p+=customer_id?' <a href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'">'+(null==(__t=billing_address.firstname)?"":_.escape(__t))+" "+(null==(__t=billing_address.lastname)?"":_.escape(__t))+"</a> ":" "+(null==(__t=billing_address.firstname)?"":_.escape(__t))+" "+(null==(__t=billing_address.lastname)?"":_.escape(__t))+" ",__p+=" ","pickup"==shipping.type?(__p+="<br> ",__p+=shipping.scheduled?" Retrait le "+(null==(__t=scheduled_date)?"":_.escape(__t))+" ":" "+(null==(__t=shipping.name)?"":_.escape(__t))+" ",__p+=" "):shipping.scheduled&&(__p+="<br>À livrer le "+(null==(__t=scheduled_date)?"":_.escape(__t))+" "),__p+=' </span></div><div class="col-2"><span class="badge '+(null==(__t=is_paid?"badge-success":"badge-warning")?"":__t)+'"> '+(null==(__t=is_paid?"Payée":"À payer")?"":__t)+' </span></div><div class="col-2"><span class="badge '+(null==(__t=statutClass)?"":_.escape(__t))+'">'+(null==(__t=statut)?"":_.escape(__t))+'</span></div><div class="col-1 text-nowrap"><span class="price">'+(null==(__t=price_total_inc_vat_label)?"":_.escape(__t))+' TTC</span></div><div class="col-auto"><a class="btn btn-primary float-right" href="/checkout/orders/'+(null==(__t=order_id)?"":_.escape(__t))+'" role="button">Détail</a></div></div>';return __p};
},{"undefined":undefined}],298:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div data-role="form"></div><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/checkout/payments">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],299:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>ATOS SIPS est la solution de paiement en ligne sécurisé proposée par les banques suivantes : Société Générale - Sogénactif / Agora, Crédit Lyonnais - Sherlock, HSBC, CCF - Elysnet, Crédit du Nord - Webaffaires, La Poste - Scellius, Crédit Agricole - e-Transactions, BNP Paribas - Merc@net. Pour plus d\'informations, <a href="http://sips.worldline.com/fr-fr/accueil.html" target="_blank">rendez-vous sur le site officiel</a> ou prenez contact avec un établissement bancaire.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Prendre contact avec un établissement bancaire afin d\'obtenir l’ouverture d’un contrat monétique de Vente A Distance (VAD)</li><li>Une fois que vous avez eu confirmation du service technique de l\'établissement bancaire que le TPE a été activé, complétez le formulaire ci-dessous avec les informations fournis par l\'établissement bancaire et activez le paiement</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="required" for="exmemple1">Certificat</label> ',config.certif&&(__p+=" <p>Certificat installé : "+(null==(__t=config.certif)?"":_.escape(__t))+"</p> "),__p+=' <p>Fichier nommé <code>certif.fr.xxxxxxxxxxxxx</code>. Remplaçez les <code>x</code> par un numéro de marchand. Le fichier et le numéro de marchand sont fournis par l\'établissement bancaire.</p><div data-role="file"></div></div><div class="form-group"><label>Retour automatique au site après paiement</label><div class="form-check"><input name="auto_return" id="auto_return1" value="1" type="radio" '+(null==(__t=config.auto_return?'checked="checked"':"")?"":__t)+'><label for="auto_return1" class="">Activé</label><input name="auto_return" id="auto_return0" value="0" type="radio" '+(null==(__t=config.auto_return?"":'checked="checked"')?"":__t)+'><label for="auto_return0" class="">Désactivé</label></div></div> ',"hmac"==config.driver&&(__p+=' <div class="form-group"><label for="version">Version de la clé secrète</label><input class="form-control" id="version" name="version" value="'+(null==(__t=config.version)?"":_.escape(__t))+'" placeholder="Indiquée dans votre console d\'administration bancaire sur la page de téléchargement du certificat."></div><div class="form-group"><label for="banque">Banque</label><select class="form-control" id="banque" name="banque" data-style="selectify"><option value="atos" '+(null==(__t="atos"==config.banque?'selected="selected"':"")?"":__t)+' >Multi-banques</option><option value="mercanet" '+(null==(__t="mercanet"==config.banque?'selected="selected"':"")?"":__t)+'>Mercanet</option><option value="sogenactif" '+(null==(__t="sogenactif"==config.banque?'selected="selected"':"")?"":__t)+">Sogenactif</option></select></div> "),__p+=' <div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],300:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="required" for="ordre">Nom du bénéficiaire</label><input class="form-control" id="ordre" name="ordre" placeholder="Le nom du bénéficiaire est généralement celui du propriétaire du site Internet" value="'+(null==(__t=config.ordre)?"":_.escape(__t))+'"></div><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],301:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>CM-CIC Monetico Paiement est la solution de paiement en ligne sécurisé proposée par les banques suivantes : Crédit Mutuel, OBC et Groupe CIC. Pour plus d\'informations, <a href="https://www.cmcicpaiement.fr/fr/index.html" target="_blank">rendez-vous sur le site officiel</a> ou prenez contact avec un établissement bancaire.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Prendre contact avec un établissement bancaire afin d\'obtenir l’ouverture d’un contrat monétique de Vente A Distance (VAD)</li><li>Une fois le dossier d\'adhésion fourni par l\'établissement bancaire déposé, contactez le service technique de l\'établissement bancaire afin de configurer le paramètre CGI2 avec les informations suivantes (ces informations restent valables même si le nom de domaine du site change ultérieurement) :<br><br>URL CGI 2 :<br><strong>'+(null==(__t=notification_url)?"":_.escape(__t))+'</strong><br><br></li><li>Une fois que vous avez eu confirmation du service technique de l\'établissement bancaire que la configuration a été effectuée, complétez le formulaire ci-dessous avec les informations fournis par l\'établissement bancaire et activez le paiement</li><li><strong class="text-danger">Effectuez 1 paiement en mode TEST</strong></li><li>Si le paiement en mode TEST s\'est correctement déroulé :<ul class="mb-0"><li>la commande doit être présente dans <a href="/checkout">la gestion des commandes</a></li><li>vous avez reçu un email de l\'établissement bancaire vous indiquant que le paiement a bien été effectué...</li><li>...MAIS vous n\'avez été crédité/débité d\'aucun montant</li><li><strong class="text-danger">passez le paiement en mode PRODUCTION</strong></li></ul></li><li>Si le paiement en mode TEST ne s\'est pas correctement déroulé :<ul class="mb-0"><li>vérifiez que vous avez correctement renseigné le fromulaire ci-dessous</li><li>vérifiez que l\'email de l\'établissement bancaire ne se trouve pas dans votre "boîte à spams"</li><li>contactez le service technique de l\'établissement bancaire afin de vous assurer que tout a été activé correctement</li><li>répétez l\'opération à partir du point 4</li></ul></li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-6"><div class="form-group"><label for="banque">Banque</label><select class="form-control" id="banque" name="banque" data-style="selectify"><option value="cm" '+(null==(__t="cm"==config.banque?'selected="selected"':"")?"":__t)+' >Crédit Mutuel</option><option value="monetico" '+(null==(__t="monetico"==config.banque?'selected="selected"':"")?"":__t)+'>Monetico Paiement</option><option value="cic" '+(null==(__t="cic"==config.banque?'selected="selected"':"")?"":__t)+'>Groupe CIC</option><option value="obc" '+(null==(__t="obc"==config.banque?'selected="selected"':"")?"":__t)+'>OBC</option></select></div></div></div><div class="form-group"><label>Mode</label><div class="form-check"><input name="mode" id="modetest" value="test" type="radio" '+(null==(__t="prod"!=config.mode?'checked="checked"':"")?"":__t)+'><label for="modetest">TEST</label><input name="mode" id="modeprod" value="prod" type="radio" '+(null==(__t="prod"==config.mode?'checked="checked"':"")?"":__t)+'><label for="modeprod">PRODUCTION</label></div></div><div class="form-group"><label class="required" for="tpe">Numéro de TPE</label><input class="form-control" id="tpe" name="tpe" value="'+(null==(__t=config.tpe)?"":_.escape(__t))+'" placeholder="Numéro fourni par l\'établissement bancaire"></div><div class="form-group"><label class="required" for="societe">Code société</label><input class="form-control" id="societe" name="societe" value="'+(null==(__t=config.societe)?"":_.escape(__t))+'" placeholder="Code fourni par l\'établissement bancaire"></div><div class="form-group"><label class="required" for="key">Clé</label><input class="form-control" id="key" name="key" value="'+(null==(__t=config.key)?"":_.escape(__t))+'" placeholder="Une série de 40 chiffres et lettres fournis par l\'établissement bancaire"></div><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],302:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="required" for="instructions">Instructions</label><p>Les instruction s\'affichent à la fin de la procédure de commande.</p><textarea class="form-control" id="instructions" name="instructions" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.instructions)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],303:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>PayBox est une solution de paiement en ligne sécurisée multi-banques. Pour plus d’informations, <a href="http://www1.paybox.com/nos-produits-et-services/" target="_blank">rendez-vous sur le site officiel</a>.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Impérativement obtenir l’ouverture d’un contrat monétique de Vente A Distance (VAD) auprès d\'un établissement bancaire</li><li>Complétez <a href="https://cdn.kiubi-admin.com/69/documents/adhesion_PAYBOX_SYSTEM.pdf" target="_blank">le dossier d’adhésion à PayBox</a> avec les informations suivantes (ces informations restent valables même si le nom de domaine du site change ultérieurement) :<br><br>Système d’exploitation du site web (NT, Unix SCO, AIX,…) :<br><strong>Unix</strong><br><br>URL du serveur web du commerçant :<br><strong>'+(null==(__t=domain)?"":_.escape(__t))+"</strong><br><br>URL de retour par défaut si paiement accepté (PBX_EFFECTUE) :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+"/ecommerce/validation.html</strong><br><br>URL de retour par défaut si paiement refusé (PBX_REFUSE) :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+"/ecommerce/validation.html</strong><br><br>URL de retour par défaut si paiement annulé par le porteur (PBX_ANNULE) :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/validation.html</strong><br><br>Retour immédiat à la boutique après paiement :<br><strong>Oui</strong><br><br>Si vous rencontrez des difficultés pour remplir le dossier d’adhésion, vous pouvez directement <a href="http://www1.paybox.com/contact/" target="_blank">prendre contact avec PayBox</a>.<br><br></li><li>Retournez le dossier préalablement rempli aux adresses postales indiquées dans celui-ci</li><li>Une fois l\'adhésion validée par PayBox, contactez le support de PayBox pour leur indiquer d\'activer l\'URL "IPN" avec l\'adresse suivante :<br><br>URL "IPN" (PBX_REPONDRE_A) :<br><strong>'+(null==(__t=notification_url)?"":_.escape(__t))+'</strong><br><br></li><li>Demandez au support de PayBox de <strong class="text-danger">passer le terminal de paiement en mode REEL</strong>, car PayBox ouvre les terminaux de paiement par défaut en mode TEST qui n\'est pas utilisé par Kiubi.</li><li>Après confirmation du changement par PayBox, complétez le formulaire ci-dessous avec les informations fournis par PayBox et activez le paiement.</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-6"><div class="form-group"><label for="banque">Banque</label><select class="form-control" id="banque" name="banque" data-style="selectify"><option value="" '+(null==(__t="CA"!=config.banque?'selected="selected"':"")?"":__t)+'>Multi-banques</option><option value="CA" '+(null==(__t="CA"==config.banque?'selected="selected"':"")?"":__t)+'>Crédit agricole (E-transactions)</option></select></div></div><div class="col-6"><div class="form-group"><label for="mode">Mode de hachage</label><select class="form-control" id="mode" name="mode" data-style="selectify"><option value="cgi" '+(null==(__t="hmac"!=config.mode?'selected="selected"':"")?"":__t)+'>CGI (ancienne version)</option><option value="hmac" '+(null==(__t="hmac"==config.mode?'selected="selected"':"")?"":__t)+'>HMAC (Recommandé)</option></select></div></div></div><div class="form-group" date-role="hmac" style="'+(null==(__t="hmac"!=config.mode?"display: none;":"")?"":__t)+'"><label class="required" for="hmac">Clé HMAC</label><input class="form-control" id="hmac" name="hmac" value="'+(null==(__t=config.hmac)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="required" for="site">Numéro du site</label><input class="form-control" id="site" name="site" value="'+(null==(__t=config.site)?"":_.escape(__t))+'" placeholder="7 chiffres fournis par PayBox"></div><div class="form-group"><label class="required" for="rang">Rang</label><input class="form-control" id="rang" name="rang" value="'+(null==(__t=config.rang)?"":_.escape(__t))+'" placeholder="2 chiffres fournis par PayBox"></div><div class="form-group"><label class="required" for="id">Identifiant PAYBOX</label><input class="form-control" id="id" name="id" value="'+(null==(__t=config.id)?"":_.escape(__t))+'" placeholder="Une série de chiffres fournis par PayBox"></div><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],304:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>Payline est la solution de paiement en ligne sécurisé proposé par les Crédits Mutuel de Bretagne, du Sud Ouest et Arkéa. Pour plus d\'informations, <a href="https://www.citelis.fr/" target="_blank">rendez-vous sur le site officiel</a> ou prenez contact avec un établissement bancaire.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Prendre contact avec un établissement bancaire afin d\'obtenir l’ouverture d’un contrat monétique de Vente A Distance (VAD)</li><li>Une fois le dossier d\'adhésion fourni par l\'établissement bancaire déposé, Payline vous communiquera votre identifiant commerçant.</li><li>Connectez vous dans votre centre d\'administration d\'homologation. Vérifiez que vous êtes connecté en tant que "Administrateur Commerçant" en haut à droite de l\'écran.</li><li>Allez dans "Configuation" puis "Vos moyens de paiements" et faites une recherche pour afficher votre moyen de paiement. Notez son numéro de contrat.</li><li>Toujours dans votre centre d\'administration d\'homologation, allez dans "Configuation" puis "Gestion des clés d\'accès". Générez un clé si vous n\'en possédez pas déjà une. Cliquez sur le lien "voir" et notez la clé qui s\'affiche en haut de l\'écran.</li><li>Completez le formulaire ci-dessous en indiquant l\'identifiant commerçant, le numéro de contrat et la clé d\'accès.</li><li><strong class="text-danger">Effectuez 1 paiement en mode TEST</strong></li><li>Vérifiez que sans cliquer sur le bouton de retour à la boutique, Kiubi est bien renseigné sur la validation du paiement</li><li>Remplir le PV de recette et renvoyez le au gestionnaire de votre solution de paiement</li><li>Une fois votre compte de production activé, connectez vous dans votre centre d\'administration de production et récupérer votre identifiant commerçant, numéro de contrat et clé d\'accès.</li><li>Completez le formulaire ci-dessous en indiquant <strong>l\'identifiant commerçant, le numéro de contrat et la clé d\'accès de production</strong>. <strong class="text-danger">Passez le paiement en mode PRODUCTION</strong> dans le formulaire ci-dessous.</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label>Mode</label><div class="form-check"><input name="mode" id="modetest" value="test" type="radio" '+(null==(__t="prod"!=config.mode?'checked="checked"':"")?"":__t)+'><label for="modetest">HOMOLOGATION</label><input name="mode" id="modeprod" value="prod" type="radio" '+(null==(__t="prod"==config.mode?'checked="checked"':"")?"":__t)+'><label for="modeprod">PRODUCTION</label></div></div><div class="form-group"><label class="required" for="merchant_id">Identifiant Commerçant</label><input class="form-control" id="merchant_id" name="merchant_id" value="'+(null==(__t=config.merchant_id)?"":_.escape(__t))+'" placeholder="Série de chiffres fournis par l\'établissement bancaire"></div><div class="form-group"><label class="required" for="access_key">Clé d\'accès</label><input class="form-control" id="access_key" name="access_key" value="'+(null==(__t=config.access_key)?"":_.escape(__t))+'" placeholder="Série de chiffres et de lettres fournis par l\'établissement bancaire"></div><div class="form-group"><label class="required" for="contract_number">Numéro de contrat</label><input class="form-control" id="contract_number" name="contract_number" value="'+(null==(__t=config.contract_number)?"":_.escape(__t))+'" placeholder="Série de chiffres fournis fournis par l\'établissement bancaire"></div><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],305:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>PayPal est une solution de paiement en ligne simple et rapide à mettre en place pour recevoir des paiements. Pour plus d\'informations, <a href="https://www.paypal.com/fr/home" target="_blank">rendez-vous sur le site officiel</a>.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Allez sur le site de Paypal pour <a href="https://www.paypal.com/fr/webapps/mpp/account-selection" target="_blank">vous ouvrir un compte</a>. Vous aurez le choix entre plusieurs types de compte. <strong class="text-danger">Vous devrez obligatoirement prendre un compte Professionnel (Premier ou Business)</strong>. Dans le cas contraire, le système de paiement Paypal ne fonctionnera pas avec Kiubi. Si vous possédez déjà un compte Personnel, vous devrez surclasser votre compte</li><li>Souscrivez à l\'offre <a href="https://www.paypal.com/fr/webapps/mpp/standard" target="_blank">PayPal Intégral</a>. L\'offre est généralement associée dès l\'ouverture de votre compte Professionnel</li><li>Configurez le paiement dans l\'administration du compte PayPal, dans "Mon Compte <span class="md-icon md-icon-outlined md-settings" style="top: 5px"></span>" puis "Paramètres du compte" :<br><br>"Préférences de paiement" puis "TVA" :<br><strong>Vérifiez qu\'aucun taux de TVA ne soit défini. La TVA est gérée directement par Kiubi</strong><br><br>"Paiements sur le site" puis "Notifications instantanées de paiement" puis "Choisir les paramètres IPN" :<br><strong>Cochez la case "Activé" et remplissez le champ "URL de notification" avec l\'URL suivante :<br> '+(null==(__t=notification_url)?"":_.escape(__t))+' </strong><br><br>"Paiements sur le site" puis "Préférences de site marchand" puis "Renvoi automatique pour les paiements sur site marchand"<br><strong>Activez et remplissez le champ "URL de renvoi" avec l\'URL suivante :<br>'+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/validation.html</strong><br><br>"Paiements sur le site" puis "Préférences de site marchand" puis "Transfert des données de paiement"<br><strong>Activez le transfert des données de paiement</strong><br><br>"Expédition" puis "Calcul des frais de livraison"<br><strong>Vérifiez qu\'aucun coût ne soit défini. Les frais de livraison sont gérés directement par\tKiubi</strong><br><br></li><li>Complétez le formulaire ci-dessous avec l\'adresse email de votre compte PayPal et activez le paiement.</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="required" for="email">Email du compte PayPal</label><input class="form-control" id="email" name="email" value="'+(null==(__t=config.email)?"":_.escape(__t))+'" placeholder="Email utilisé pour l\'ouverture du compte PayPal"></div><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],306:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>PayPlug est une solution de paiement en ligne sécurisée. Pour plus d’informations, <a href="https://www.payplug.com/fr/?sponsor=1310" target="_blank">rendez-vous sur le site officiel</a>.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li><a href="https://portal.payplug.com/signup?sponsor=1310" target="_blank">Créez un compte</a> chez PayPlug.</li><li>Connectez-vous dans votre console d\'administration PayPlug.</li><li>Allez dans "Paramètres" puis "Clés API". Séléctionnez, si ce n\'est pas déjà le cas, le choix : "API".</li><li>Dans l\'encart Clé API, notez la clé secrète (Secret Key) de <strong>TEST</strong>.</li><li>Complétez le formulaire ci-dessous en indiquant la clé secrète.</li><li><strong class="text-danger">Effectuez un paiement en mode TEST</strong></li><li>Faites les démarches au près de PayPlug pour activer votre compte.</li><li>Une fois votre compte activé, connectez-vous dans votre centre console d\'administration PayPlug et notez la clé secrète (Secret Key) de <strong>production (LIVE)</strong>.</li><li>Complétez le formulaire ci-dessous en indiquant <strong>la clé secrète de production</strong>.</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="required" for="secret">Clé secrète</label><input class="form-control" id="secret" name="secret" value="'+(null==(__t=config.secret)?"":_.escape(__t))+'" placeholder="Série de chiffres et de lettres fournis par l\'établissement bancaire"></div><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],307:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>Systempay est la solution de paiement en ligne sécurisé proposé par la Banque Populaire. Pour plus d\'informations, <a href="http://www.cyberpluspaiement.com" target="_blank">rendez-vous sur le site officiel</a> ou prenez contact avec un établissement bancaire.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Prendre contact avec un établissement bancaire afin d\'obtenir l’ouverture d’un contrat monétique de Vente A Distance (VAD)</li><li>Une fois le dossier d\'adhésion fourni par l\'établissement bancaire déposé, récupérez l\'identifiant boutique sur l\'outil de gestion de caisse fourni par l\'établissement bancaire</li><li>Récupérez le certificat de test sur l\'outil de gestion de caisse</li><li>Renseignez l\'URL serveur TEST, appelée aussi "URL silencieuse", dans l\'outil de gestion de caisse :<br><br>URL serveur de la boutique en mode test :<br><strong>'+(null==(__t=notification_url)?"":_.escape(__t))+"</strong><br><br></li><li>Renseignez l'URL de retour de la boutique en mode TEST dans l'outil de gestion de caisse :<br><br>URL de retour de la boutique en mode test :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/validation.html</strong><br><br></li><li>Completez le formulaire ci-dessous en indiquant l\'identifiant boutique et le certificat de test et activez le paiement</li><li><strong class="text-danger">Effectuez 1 paiement en mode TEST</strong></li><li>Vérifiez que sans cliquer sur le bouton de retour à la boutique, Kiubi est bien renseigné sur la validation du paiement</li><li>Remplir le PV de recette et renvoyez le au getionnaire de votre solution de paiement</li><li>Dès validation du PV de recette, vous recevrez un email indiquant que le certificat de production a été généré</li><li>Renseignez l\'URL serveur PRODUCTION, appelée aussi "URL silencieuse", dans l\'outil de gestion de caisse :<br><br>URL serveur de la boutique :<br><strong>'+(null==(__t=notification_url)?"":_.escape(__t))+"</strong><br><br></li><li>Renseignez l'URL de retour de la boutique en mode PRODUCTION dans l'outil de gestion de caisse :<br><br>URL de retour de la boutique :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/validation.html</strong><br><br></li><li>Configurez dans le module de paiement le champ "Mode" dans l\'outil de gestion de caisse. Effacez TEST et saisir en majuscules PRODUCTION</li><li><strong class="text-danger">Passez le paiement en mode PRODUCTION</strong> dans le formulaire ci-dessous</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-6"><div class="form-group"><label for="banque">Banque</label><select class="form-control" id="banque" name="banque" data-style="selectify"><option value="systempay" '+(null==(__t="systempay"==config.banque?'selected="selected"':"")?"":__t)+' >Multi-banques</option><option value="sogecommerce" '+(null==(__t="sogecommerce"==config.banque?'selected="selected"':"")?"":__t)+'>Sogecommerce</option></select></div></div><div class="col-6"><div class="form-group"><label for="hash">Algorithme de hachage</label><select class="form-control" id="hash" name="hash" data-style="selectify"><option value="sha1" '+(null==(__t="sha256"!=config.hash?'selected="selected"':"")?"":__t)+'>SHA-1</option><option value="sha256" '+(null==(__t="sha256"==config.hash?'selected="selected"':"")?"":__t)+'>SHA-256</option></select></div></div></div><div class="form-group"><label>Mode</label><div class="form-check"><input name="mode" id="modetest" value="test" type="radio" '+(null==(__t="prod"!=config.mode?'checked="checked"':"")?"":__t)+'><label for="modetest">TEST</label><input name="mode" id="modeprod" value="prod" type="radio" '+(null==(__t="prod"==config.mode?'checked="checked"':"")?"":__t)+'><label for="modeprod">PRODUCTION</label></div></div><div class="form-group"><label class="required" for="tpe">Identifiant boutique</label><input class="form-control" id="tpe" name="tpe" value="'+(null==(__t=config.tpe)?"":_.escape(__t))+'" placeholder="8 chiffres fournis par l\'établissement bancaire"></div><div class="form-group"><label class="required" for="key">Certificat</label><input class="form-control" id="key" name="key" value="'+(null==(__t=config.key)?"":_.escape(__t))+'" placeholder="Une série de 16 chiffres fournis par l\'établissement bancaire"></div><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],308:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label for="intitule_long">Intitulé du mode de paiement</label><input class="form-control" id="intitule_long" name="intitule_long" value="'+(null==(__t=config.intitule_long)?"":_.escape(__t))+'" placeholder="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-8"><div class="form-group"><label class="required" for="IBAN">IBAN</label><input class="form-control" id="IBAN" name="IBAN" value="'+(null==(__t=config.IBAN)?"":_.escape(__t))+'" placeholder="34 caractères max."></div></div><div class="col-4"><div class="form-group"><label class="required" for="BIC">BIC</label><input class="form-control" id="BIC" name="BIC" value="'+(null==(__t=config.BIC)?"":_.escape(__t))+'" placeholder="11 caracères max."></div></div></div><div class="row"><div class="col-3"><div class="form-group"><label class="required" for="rib_banque">Banque</label><input class="form-control" id="rib_banque" name="rib_banque" value="'+(null==(__t=config.rib_banque)?"":_.escape(__t))+'" placeholder="11 caractères max."></div></div><div class="col-3"><div class="form-group"><label class="required" for="rib_guichet">Guichet</label><input class="form-control" id="rib_guichet" name="rib_guichet" value="'+(null==(__t=config.rib_guichet)?"":_.escape(__t))+'" placeholder="5 caracères max."></div></div><div class="col-3"><div class="form-group"><label class="required" for="rib_compte">N° compte</label><input class="form-control" id="rib_compte" name="rib_compte" value="'+(null==(__t=config.rib_compte)?"":_.escape(__t))+'" placeholder="5 caracères max."></div></div><div class="col-3"><div class="form-group"><label class="required" for="rib_cle">Clé</label><input class="form-control" id="rib_cle" name="rib_cle" value="'+(null==(__t=config.rib_cle)?"":_.escape(__t))+'" placeholder="2 caracères max."></div></div></div><div class="form-group"><label class="required" for="domicile">Domiciliation</label><input class="form-control" id="domicile" name="domicile" value="'+(null==(__t=config.domicile)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" rows="21">'+(null==(__t=config.message)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form>';return __p};
},{"undefined":undefined}],309:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/paiements.html" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez activer plusieurs modes de paiement : par <strong>chèque</strong>, par <strong>virement</strong> et par <strong>carte bancaire</strong>. Si vous disposez d\'un contrat de vende à distance avec un établissement bancaire, vous pourrez utiliser leur <strong>système de paiement en ligne sécurisé</strong>.</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],310:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> "+(null==(__t=type_label)?"":__t)+' </div><div class="col-3"> ',__p+=is_enabled?' <span class="badge badge-success">Activé</span> ':' <span class="badge badge-danger">Désactivé</span> ',__p+=' </div><div class="col-auto"> ',is_supported&&(__p+=' <a class="btn btn-primary float-right" href="/checkout/payments/'+(null==(__t=payment_id)?"":_.escape(__t))+'" role="button">Détail</a> '),__p+=" </div></div>";return __p};
},{"undefined":undefined}],311:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Email d\'accusé de réception</h1></header><div class="post-content"><p>L\'email d\'accusé de réception de commande est envoyé à l\'acheteur à l\'enregistrement de sa commande, quelque soit le mode de paiment utilisé. Vous pouvez ajouter un message personnalisé dans cet email.</p><div class="form-group"><label for="mail_recipients">Destinataires</label><p>Saisissez les emails des destinataires, séparés par des virgules. Sans destinataire, l\'email par défaut est utilisé.</p><input class="form-control" id="mail_recipients" name="mail_recipients" value="'+(null==(__t=mail_recipients)?"":_.escape(__t))+'"></div><div class="form-group"><label class="required" for="mail_pending">Message personnalisé</label><textarea class="form-control" name="mail_pending" id="mail_pending" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_pending)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Emails de notification de changement d\'état</h1></header><div class="post-content"><p>Un email de notification peut être envoyé à l\'acheteur à chaque changement d\'état de sa commande. Vous pouvez ajouter un message personnalisé pour chacuns de ces emails.</p><div class="form-group"><label class="required" for="mail_processing">Message personnalisé de l\'état : <span class="badge badge-primary">En cours</span></label><textarea class="form-control" name="mail_processing" id="mail_processing" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_processing)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="required" for="mail_processed">Message personnalisé de l\'état : <span class="badge badge-primary">Traitée</span></label><textarea class="form-control" name="mail_processed" id="mail_processed" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_processed)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="required" for="mail_shipped">Message personnalisé de l\'état : <span class="badge badge-primary">Expédiée</span></label><textarea class="form-control" name="mail_shipped" id="mail_shipped" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_shipped)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="required" for="mail_cancelled">Message personnalisé de l\'état : <span class="badge badge-primary">Annulée</span></label><textarea class="form-control" name="mail_cancelled" id="mail_cancelled" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_cancelled)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],312:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){for(__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Gestion du stock</h1></header><div class="post-content"><div class="row"><div class="col-6"><div class="form-group"><label for="stockout_selling">Vente en cas de rupture de stock</label><select id="stockout_selling" name="stockout_selling" data-style="selectify"><option value="1" '+(null==(__t=stockout_selling?'selected="selected"':"")?"":__t)+'>Autoriser la vente du produit</option><option value="0" '+(null==(__t=stockout_selling?"":'selected="selected"')?"":__t)+'>Stopper la vente du produit</option></select></div></div><div class="col-6"><div class="form-group"><label for="decrement_stock">Retirer un produit du stock</label><select id="decrement_stock" name="decrement_stock" data-style="selectify"><option value="at_payment" '+(null==(__t="at_payment"==decrement_stock?'selected="selected"':"")?"":__t)+'>Dès qu\'il est commandé et payé</option><option value="never" '+(null==(__t="never"==decrement_stock?'selected="selected"':"")?"":__t)+'>Jamais</option></select></div></div></div><label for="stockout_threshold">Quantité avant rupture de stock</label><p>Vous pouvez indiquer une quantité minimale d\'un produit qui doit rester en stock. À la valeur indiquée et en dessous, le produit est considéré comme étant en rupture de stock.</p><div class="row"><div class="col-3"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="stockout_threshold" id="stockout_threshold" value="'+(null==(__t=stockout_threshold)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text">produit(s)</span></div></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Numéros des commandes</h1></header><div class="post-content"><p>Vous avez la possibilité de choisir la lettre qui préfixe les numéros des commandes passées sur le site. Si vous possédez plusieurs boutiques en ligne, vous pouvez ainsi plus facilement distinguer l’origine d\'une commande. Le préfixe par défaut est "C".</p><label for="order_prefix">Préfixe des commandes</label><div class="row"><div class="col-3"><div class="form-group"><select id="order_prefix" name="order_prefix" data-style="selectify" data-direction="up"> ',i="A".charCodeAt(0);i<="Z".charCodeAt(0);i++){var l=String.fromCharCode(i);__p+=' <option value="'+(null==(__t=l)?"":_.escape(__t))+'" '+(null==(__t=order_prefix==l?'selected="selected"':"")?"":__t)+">"+(null==(__t=l)?"":_.escape(__t))+"</option> "}__p+=' </select></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Minimum de commande</h1></header><div class="post-content"><p>Le minimum de commande vous permet d\'interdir la prise des commandes en-dessous d\'un certain montant, frais de port compris. Vous pouvez définir un montant de 0,00'+(null==(__t=currency)?"":__t)+' pour autoriser les commandes gratuites.</p><label for="min_order_amount">Montant minimum</label><div class="row"><div class="col-3"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="min_order_amount" id="min_order_amount" value="'+(null==(__t=min_order_amount)?"":_.escape(__t))+'" placeholder="0,00"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+'</span></div></div></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>'}return __p};
},{"undefined":undefined}],313:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Commandes</h2><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="/checkout/orders?status=pending"><span class="md-icon"></span><span class="badge">'+(null==(__t=overview.pending_count)?"":_.escape(__t))+'</span>À traiter</a></li><li class="nav-item"><a class="nav-link" href="/checkout/orders?status=processing"><span class="md-icon"></span><span class="badge">'+(null==(__t=overview.processing_count)?"":_.escape(__t))+'</span>En cours</a></li><li class="nav-item"><a class="nav-link" href="/checkout/orders?status=processed"><span class="md-icon"></span><span class="badge">'+(null==(__t=overview.processed_count)?"":_.escape(__t))+'</span>Traitées</a></li><li class="nav-item"><a class="nav-link" href="/checkout/orders?status=shipped"><span class="md-icon"></span><span class="badge">'+(null==(__t=overview.shipped_count)?"":_.escape(__t))+'</span>Expédiées</a></li><li class="nav-item"><a class="nav-link" href="/checkout/orders?status=cancelled"><span class="md-icon"></span><span class="badge">'+(null==(__t=overview.cancelled_count)?"":_.escape(__t))+'</span>Annulées</a></li><li class="nav-item"><a class="nav-link" href="/checkout/aborted">Abandonnées</a></li></ul><h2>Paramètres e-commerce</h2><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="/checkout/payments"><span class="md-icon"></span>Modes de paiement</a></li><li class="nav-item"><a class="nav-link" href="/checkout/carriers"><span class="md-icon"></span>Transporteurs et frais de port</a></li><li class="nav-item"><a class="nav-link" href="/checkout/emails"><span class="md-icon"></span>Emails de confirmation</a></li><li class="nav-item"><a class="nav-link" href="/checkout/options"><span class="md-icon"></span>Options à la commande</a></li><li class="nav-item"><a class="nav-link" href="/checkout/settings"><span class="md-icon"></span>Paramètres</a></li></ul>';return __p};
},{"undefined":undefined}],314:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(272),className:"list-item visible-btn",behaviors:[RowActionsBehavior],templateContext:function(){var e,t=this.model.get("shipping");return t.scheduled&&(e=t.scheduled.indexOf(" ")===-1?format.formatDate(t.scheduled):format.formatLongDateTime(t.scheduled)),{creation_date:format.formatLongDateTime(this.model.get("creation_date")),scheduled_date:e}},onActionRestore:function(){this.model.restore().done(function(){this.model.collection.remove(this.model)}.bind(this))}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(271),className:"container-fluid",service:"checkout",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des commandes abandonnées"}))},start:function(){var e={extra_fields:"price_label"};this.collection.fetch({reset:!0,data:e})}});
},{"128":128,"271":271,"272":272,"31":31,"607":607,"undefined":undefined}],315:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(27),Forms=require(608),Session=Backbone.Radio.channel("app").request("ctx:session"),InfosMagasinView=require(322),InfosSocolView=require(327),ChargesSocolView=require(326),InfosView=require(320),ExportView=require(319),ChargesTranchesView=require(316),ChargesLocalView=require(321),InfosDpdView=require(318),ChargesDpdView=require(317),InfosSocoPickupView=require(325),InfosMondialrelayView=require(323),ScheduleView=require(324);module.exports=Marionette.View.extend({template:require(273),className:"container",service:"checkout",behaviors:[FormBehavior],regions:{infos:{el:'div[data-role="infos"]',replaceElement:!0},schedule:{el:'div[data-role="schedule"]',replaceElement:!0},"export":{el:'div[data-role="export"]',replaceElement:!0},charges:{el:'div[data-role="charges"]',replaceElement:!0}},fields:["name","is_enabled","is_default","description","threshold","tax_id","company","address","zipcode","city","country_id","coliship_type","export_type","require_scheduling","open_days","closed_days","limit_hour","scheduling_interval_min","scheduling_interval_max","socolissimo_id","socolissimo_secret","coliship_tradername","socolissimo_login","socolissimo_password","socolissimo_delay","socolissimo_gmaps","dpd_customer_center","dpd_customer","dpd_gmaps","dpd_insurance_threshold","dpd_gsm_notification","mondialrelay_customer","mondialrelay_secret","mondialrelay_delay","mondialrelay_brand","mondialrelay_insurance_threshold","mondialrelay_insurance_level","mondialrelay_gmaps"],initialize:function(e){this.mergeOptions(e,["model","taxes","countries","cities","carrierCountries","carrierZones","search"])},templateContext:function(){return{is_deletable:this.model.isDeletable(),domain:Session.site.get("domain")}},onRender:function(){switch(this.model.get("type")){case"magasin":this.showChildView("infos",new InfosMagasinView({model:this.model,countries:this.countries})),this.showChildView("schedule",new ScheduleView({model:this.model}));break;case"socolissimo":var e=new InfosSocolView({model:this.model,taxes:this.taxes});this.listenTo(e,"childview:change",this.onTaxChange),this.showChildView("infos",e),this.showChildView("charges",new ChargesSocolView({model:this.model,carrierCountries:this.carrierCountries}));break;case"soco_pickup":var e=new InfosSocoPickupView({model:this.model,taxes:this.taxes});this.listenTo(e,"childview:change",this.onTaxChange),this.showChildView("infos",e),this.showChildView("charges",new ChargesTranchesView({model:this.model,carrierCountries:this.carrierCountries}));break;case"local":var e=new InfosView({model:this.model,taxes:this.taxes});this.listenTo(e,"childview:change",this.onTaxChange),this.showChildView("infos",e),this.showChildView("schedule",new ScheduleView({model:this.model})),this.showChildView("charges",new ChargesLocalView({model:this.model,carrierZones:this.carrierZones,search:this.search}));break;case"dpd":var e=new InfosDpdView({model:this.model,taxes:this.taxes});this.listenTo(e,"childview:change",this.onTaxChange),this.showChildView("infos",e),this.showChildView("charges",new ChargesDpdView({model:this.model,carrierCountries:this.carrierCountries}));break;case"mondialrelay":var e=new InfosMondialrelayView({model:this.model,taxes:this.taxes});this.listenTo(e,"childview:change",this.onTaxChange),this.showChildView("infos",e),this.showChildView("charges",new ChargesTranchesView({model:this.model,carrierCountries:this.carrierCountries}));break;case"tranchespoids":var e=new InfosView({model:this.model,taxes:this.taxes});this.listenTo(e,"childview:change",this.onTaxChange),this.showChildView("infos",e),this.showChildView("charges",new ChargesTranchesView({model:this.model,carrierCountries:this.carrierCountries})),this.showChildView("export",new ExportView({model:this.model}))}},onTaxChange:function(e){var i=this.taxes.get(e);i&&this.getChildView("charges")&&this.getChildView("charges").triggerMethod("tax:change",1+i.get("vat_rate")/100)},onSave:function(){var e;switch(this.model.get("type")){case"socolissimo":e=function(){return this.getChildView("charges").onSave(this.getChildView("infos").extractFields())}.bind(this);break;case"local":case"tranchespoids":case"dpd":case"mondialrelay":case"soco_pickup":e=function(){return this.getChildView("charges").onSave()}.bind(this);break;default:e=function(){return Backbone.$.Deferred().resolve()}.bind(this)}var i=Forms.extractFields(this.fields,this,{autoCast:!1});return"socolissimo"==this.model.get("type")&&_.extend(i,this.getChildView("charges").extractFields()),i.open_days&&_.map(i.open_days,function(e){e.time_frames=e.time_frames&&""!=e.time_frames?e.time_frames.split(","):[]}),"tranchespoids"==this.model.get("type")&&("coliship"===i.export_type?(delete i.dpd_customer_center,delete i.dpd_customer,delete i.dpd_insurance_threshold,delete i.mondialrelay_insurance_threshold,delete i.mondialrelay_insurance_level):"dpd"===i.export_type?(delete i.coliship_type,delete i.mondialrelay_insurance_threshold,delete i.mondialrelay_insurance_level):"mondialrelay"===i.export_type?(delete i.coliship_type,delete i.dpd_customer_center,delete i.dpd_customer,delete i.dpd_insurance_threshold):(delete i.coliship_type,delete i.dpd_customer_center,delete i.dpd_insurance_threshold,delete i.dpd_customer,delete i.mondialrelay_insurance_threshold,delete i.mondialrelay_insurance_level)),this.model.save(i,{patch:!0,wait:!0}).then(e)},onDelete:function(){return this.model.isDeletable()?this.model.destroy({wait:!0}):null}});
},{"27":27,"273":273,"316":316,"317":317,"318":318,"319":319,"320":320,"321":321,"322":322,"323":323,"324":324,"325":325,"326":326,"327":327,"608":608,"undefined":undefined}],316:[function(require,module,exports){
var Marionette=require("backbone.marionette"),Forms=require(608),format=require(607),StepsView=require(328),SelectView=require(139);module.exports=Marionette.View.extend({template:require(274),regions:{countries:{el:"div[data-role='countries']",replaceElement:!0},steps:{el:"div[data-role='steps']",replaceElement:!0}},ui:{delay:'input[name="delay"]',free_threshold:'input[name="free_threshold"]',addStepBtn:'a[data-role="step-add"]'},events:{"click @ui.addStepBtn":function(){var e=this.getChildView("steps");e&&e.collection.add({weight:"",price_ex_vat:"",price_inc_vat:""})}},fields:["delay","free_threshold","country_id"],rate:null,country:null,initialize:function(e){this.mergeOptions(e,["model","carrierCountries"]),this.rate=1,this.country=null},templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},updateView:function(){this.country&&(this.getUI("free_threshold").val(format.formatFloat(this.country.get("free_threshold"),2)),this.getUI("delay").val(this.country.get("delay")))},onRender:function(){this.showChildView("countries",new SelectView({collectionPromise:this.carrierCountries.promisedSelect().done(function(e){e.length>0&&(e.at(0).get("is_group")?e.length>1&&this.selectContry(e.at(1).get("value")):this.selectContry(e.at(0).get("value")))}.bind(this)),name:"country_id"}))},onChildviewChange:function(e){this.selectContry(parseInt(e))},selectContry:function(e){this.country=this.carrierCountries.get(e),this.country&&this.country.fetch().done(function(){this.updateView();var e=this.getChildView("steps");e?e.collection.set(this.country.get("steps").toJSON(),{reset:!0}):(e=new StepsView({collection:this.country.get("steps"),childViewOptions:{taxesProxy:this,currency:format.currencyEntity(this.model.meta.currency)}}),this.showChildView("steps",e))}.bind(this))},onTaxChange:function(e){this.rate=e},taxRate:function(){return this.rate},onSave:function(){var e=Forms.extractFields(this.fields,this),t=Forms.extractFields(["weight","price_ex_vat"],this);if(t.weight){e.steps={};for(var i=0;i<t.weight.length;i++){var r=Math.round(1e3*format.unformatFloat(t.weight[i]));isNaN(r)||(e.steps[r]=t.price_ex_vat[i])}}else e.steps="";return this.country.save(e,{patch:!0,wait:!0}).done(function(){var e=this.getChildView("countries"),t=e.collection.get(this.country.get("country_id")),i=e.collection.findLastIndex({is_group:!0});i>0&&e.collection.indexOf(t)>i&&(e.collection.remove(t,{silent:!0}),e.collection.add(t,{at:1}),e.render())}.bind(this))}});
},{"139":139,"274":274,"328":328,"607":607,"608":608,"undefined":undefined}],317:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Forms=require(608),format=require(607),StepsView=require(328);module.exports=Marionette.View.extend({template:require(275),regions:{pickup:{el:"div[data-role='pickup']",replaceElement:!0}},ui:{delay:'input[name="delay"]',free_threshold:'input[name="free_threshold"]',addPickupBtn:'a[data-role="pickup-add"]',form_pickup:'form[data-role="pickup"]'},events:{"click @ui.addPickupBtn":function(){var e=this.getChildView("pickup");e&&e.collection.add({weight:"",price_ex_vat:"",price_inc_vat:""})}},fields:["delay","free_threshold"],rate:null,pickup:null,initialize:function(e){this.mergeOptions(e,["model","carrierCountries"]),this.rate=1,this.pickup=null},templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},updateView:function(){this.pickup&&(this.getUI("free_threshold").val(format.formatFloat(this.pickup.get("free_threshold"),2)),this.getUI("delay").val(this.pickup.get("delay")))},onRender:function(){this.pickup=this.carrierCountries.add({carrier_id:this.model.get("carrier_id"),country_id:0}),this.pickup.fetch().done(function(){this.updateView(),this.showChildView("pickup",new StepsView({collection:this.pickup.get("steps"),childViewOptions:{taxesProxy:this,currency:format.currencyEntity(this.model.meta.currency)}}))}.bind(this))},onTaxChange:function(e){this.rate=e},taxRate:function(){return this.rate},onSave:function(e){var t,i,r,a=Forms.extractFields(this.fields,this);if(r=Forms.extractFields(["weight","price_ex_vat"],this,{selector:this.getUI("form_pickup")}),r.weight)for(a.steps={},t=0;t<r.weight.length;t++)i=Math.round(1e3*format.unformatFloat(r.weight[t])),isNaN(i)||(a.steps[i]=r.price_ex_vat[t]);else a.steps="";return this.pickup.save(a,{patch:!0,wait:!0})}});
},{"275":275,"328":328,"607":607,"608":608,"undefined":undefined}],318:[function(require,module,exports){
var Marionette=require("backbone.marionette"),format=require(607),WysiwygBehavior=require(28),TaxView=require(255);module.exports=Marionette.View.extend({template:require(276),behaviors:[WysiwygBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["model","taxes"])},templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency),dpd_insurance_threshold:""!==this.model.get("dpd_insurance_threshold")||null!==format.formatFloat(this.model.get("dpd_insurance_threshold"),2)?format.formatFloat(this.model.get("dpd_insurance_threshold"),2):""}},onRender:function(){this.taxes.fetch().done(function(){0!==this.taxes.length&&this.showChildView("taxes",new TaxView({taxes:this.taxes,selected:this.model.get("tax_id")}))}.bind(this))}});
},{"255":255,"276":276,"28":28,"607":607,"undefined":undefined}],319:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607);module.exports=Marionette.View.extend({template:require(277),ui:{exportSelect:'select[data-role="export_type"]',colishipForm:'div[data-role="coliship"]',dpdForm:'div[data-role="dpd"]',mrForm:'div[data-role="mondialrelay"]'},events:{"change @ui.exportSelect":function(e){var t=Backbone.$(e.currentTarget).val();switch(t){default:this.getUI("colishipForm").hide(),this.getUI("dpdForm").hide(),this.getUI("mrForm").hide();break;case"coliship":this.getUI("colishipForm").show(),this.getUI("dpdForm").hide(),this.getUI("mrForm").hide();break;case"dpd":this.getUI("colishipForm").hide(),this.getUI("dpdForm").show(),this.getUI("mrForm").hide();break;case"mondialrelay":this.getUI("colishipForm").hide(),this.getUI("dpdForm").hide(),this.getUI("mrForm").show()}}},initialize:function(e){this.mergeOptions(e,["model"])},templateContext:function(){return{dpd_insurance_threshold:""!==this.model.get("dpd_insurance_threshold")||null!==format.formatFloat(this.model.get("dpd_insurance_threshold"),2)?format.formatFloat(this.model.get("dpd_insurance_threshold"),2):"",currency:format.currencyEntity(this.model.meta.currency)}},onRender:function(){"coliship"==this.model.get("export_type")?this.getUI("colishipForm").show():"dpd"==this.model.get("export_type")?this.getUI("dpdForm").show():"mondialrelay"==this.model.get("export_type")&&this.getUI("mrForm").show()}});
},{"277":277,"607":607,"undefined":undefined}],320:[function(require,module,exports){
var Marionette=require("backbone.marionette"),WysiwygBehavior=require(28),format=require(607),TaxView=require(255);module.exports=Marionette.View.extend({template:require(278),behaviors:[WysiwygBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["model","taxes"])},templateContext:function(){return{threshold:format.formatFloat(this.model.get("threshold"),2),base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},onRender:function(){this.taxes.fetch().done(function(){0!==this.taxes.length&&this.showChildView("taxes",new TaxView({taxes:this.taxes,selected:this.model.get("tax_id")}))}.bind(this))}});
},{"255":255,"278":278,"28":28,"607":607,"undefined":undefined}],321:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Forms=require(608),_=require("underscore"),format=require(607),StepsView=require(328),SelectView=require(139),TagView=require(142);module.exports=Marionette.View.extend({template:require(279),regions:{zones:{el:"div[data-role='zones']",replaceElement:!0},steps:{el:"div[data-role='steps']",replaceElement:!0},tags:{el:"div[data-role='tags']",replaceElement:!0}},ui:{free_threshold:'input[name="free_threshold"]',addStepBtn:'a[data-role="step-add"]',selectZone:'div[data-role="select-zone"]',zoneForm:'div[data-role="edit-zone"]',cancelZoneBtn:'button[data-role="cancel-zone"]',saveZoneBtn:'button[data-role="save-zone"]',addZoneBtn:'a[data-role="add-zone"]',editZoneBtn:'a[data-role="edit-zone"]',deleteZoneBtn:'a[data-role="delete-zone"]'},events:{"click @ui.addStepBtn":function(){var e=this.getChildView("steps");e&&e.collection.add({weight:"",price_ex_vat:"",price_inc_vat:""})},"click @ui.addZoneBtn":function(){var e=this.getChildView("tags");e&&(e.clearTags(),this.addingZone=!0,this.getUI("selectZone").hide(),this.getUI("zoneForm").show())},"click @ui.editZoneBtn":function(){var e=this.getChildView("tags");if(e){var t=_.map(this.zone.get("postal_codes"),function(e){return{label:e,value:e}});e.setTags(t),this.addingZone=!1,this.getUI("selectZone").hide(),this.getUI("zoneForm").show()}},"click @ui.cancelZoneBtn":function(){this.getUI("zoneForm").hide(),this.getUI("selectZone").show()},"click @ui.saveZoneBtn":function(){var e=this.getChildView("tags");if(e){var t,i,n=_.map(e.getTags(),function(e){return e.value});this.addingZone?(i=this.carrierZones.add({postal_codes:n,carrier_id:this.carrierZones.carrier_id},{wait:!0}),t=i.save()):(i=this.zone,t=i.save({postal_codes:n},{patch:!0,wait:!0})),t.done(function(){this.currentZone=i.get("zone_id"),this.render()}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this))}},"click @ui.deleteZoneBtn":function(){this.zone.destroy(),this.currentZone=null,this.zone=null,this.render()}},fields:["free_threshold","zone_id"],rate:null,zone:null,addingZone:null,currentZone:null,initialize:function(e){this.mergeOptions(e,["model","carrierZones","search"]),this.rate=1,this.zone=null,this.addingZone=null,this.currentZone=null},templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},updateView:function(){this.zone&&this.getUI("free_threshold").val(format.formatFloat(this.zone.get("free_threshold"),2))},onRender:function(){this.showChildView("zones",new SelectView({collectionPromise:this.carrierZones.promisedSelect(this.currentZone).done(function(e){e.length>0&&this.selectZone(this.currentZone?this.currentZone:e.at(0).get("value"))}.bind(this)),name:"zone_id"})),this.showChildView("tags",new TagView({evtSuffix:"tags",searchPlaceholder:"Rechercher et ajouter jusqu'à 20 codes postaux par zone"}))},onChildviewChange:function(e){this.selectZone(parseInt(e))},selectZone:function(e){this.zone=this.carrierZones.get(e),this.zone&&(this.currentZone=e,this.zone.fetch().done(function(){this.updateView();var e=this.getChildView("steps");e?e.collection.set(this.zone.get("steps").toJSON(),{reset:!0}):(e=new StepsView({collection:this.zone.get("steps"),childViewOptions:{taxesProxy:this,currency:format.currencyEntity(this.model.meta.currency)}}),this.showChildView("steps",e))}.bind(this)))},onChildviewInputTags:function(e,t){""!==e&&this.search.fetch({data:{term:e}}).done(function(){var e=_.map(this.search.toJSON(),function(e){return{label:e.postal_code+" ("+e.cities+")",value:e.postal_code}});t.showResults(e)}.bind(this))},onTaxChange:function(e){this.rate=e},taxRate:function(){return this.rate},onSave:function(){if(!this.zone)return Backbone.$.Deferred().resolve();var e=Forms.extractFields(this.fields,this),t=Forms.extractFields(["weight","price_ex_vat"],this);if(t.weight){e.steps={};for(var i=0;i<t.weight.length;i++){var n=Math.round(1e3*format.unformatFloat(t.weight[i]));isNaN(n)||(e.steps[n]=t.price_ex_vat[i])}}else e.steps="";return this.zone.set(e),this.zone.save(e,{patch:!0,wait:!0})}});
},{"139":139,"142":142,"279":279,"328":328,"607":607,"608":608,"undefined":undefined}],322:[function(require,module,exports){
var Marionette=require("backbone.marionette"),WysiwygBehavior=require(28),SelectView=require(139);module.exports=Marionette.View.extend({template:require(280),behaviors:[WysiwygBehavior],regions:{countries:{el:"div[data-role='countries']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["model","countries"])},onRender:function(){this.showChildView("countries",new SelectView({collection:this.countries,selected:this.model.get("country_id"),name:"country_id"})),this.countries.fetch()}});
},{"139":139,"28":28,"280":280,"undefined":undefined}],323:[function(require,module,exports){
var Marionette=require("backbone.marionette"),format=require(607),WysiwygBehavior=require(28),TaxView=require(255);module.exports=Marionette.View.extend({template:require(281),behaviors:[WysiwygBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["model","taxes"])},templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},onRender:function(){this.taxes.fetch().done(function(){0!==this.taxes.length&&this.showChildView("taxes",new TaxView({taxes:this.taxes,selected:this.model.get("tax_id")}))}.bind(this))}});
},{"255":255,"28":28,"281":281,"607":607,"undefined":undefined}],324:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),moment=require("moment"),SelectifyBehavior=require(26),ScheduleRowView=Marionette.View.extend({className:"row",template:require(283),behaviors:[SelectifyBehavior],templateContext:function(){var e=moment().day(this.model.get("day_of_week")).format("dddd");e=e.charAt(0).toUpperCase()+e.slice(1);var t=this.model.get("time_frames")&&_.isArray(this.model.get("time_frames"))?this.model.get("time_frames").join(","):"";return{name:e,frames:t}}}),SpotlightsCollectionView=Marionette.CollectionView.extend({className:"",childView:ScheduleRowView});module.exports=Marionette.View.extend({template:require(282),regions:{days:{el:'div[data-role="days"]',replaceElement:!0}},ui:{require_scheduling:'select[name="require_scheduling"]'},events:{"change @ui.require_scheduling":function(){this.model.set("require_scheduling",this.getUI("require_scheduling").val()),this.updateDays(),this.getChildView("days").render()}},initialize:function(e){this.mergeOptions(e,["model"]),this.days=new Backbone.Collection,this.days.model=Backbone.Model.extend({idAttribute:"day_of_week",defaults:{day_of_week:0,is_open:!1,require_scheduling:"datetime",time_frames:[]}})},templateContext:function(){return{closed_days:this.model.get("closed_days")&&_.isArray(this.model.get("closed_days"))?this.model.get("closed_days").join(","):""}},onRender:function(){this.updateDays(),this.showChildView("days",new SpotlightsCollectionView({collection:this.days}))},updateDays:function(){if(this.days.reset(),"no"!=this.model.get("require_scheduling")){for(var e=0;e<7;e++)this.days.add({day_of_week:e,require_scheduling:this.model.get("require_scheduling")});this.model.get("open_days")&&_.isArray(this.model.get("open_days"))&&_.each(this.model.get("open_days"),function(e){var t=this.days.get(e.day_of_week);t.set("is_open",e.is_open),t.set("time_frames",e.time_frames)}.bind(this))}}});
},{"26":26,"282":282,"283":283,"undefined":undefined}],325:[function(require,module,exports){
var Marionette=require("backbone.marionette"),format=require(607),WysiwygBehavior=require(28),TaxView=require(255);module.exports=Marionette.View.extend({template:require(284),behaviors:[WysiwygBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["model","taxes"])},templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},onRender:function(){this.taxes.fetch().done(function(){0!==this.taxes.length&&this.showChildView("taxes",new TaxView({taxes:this.taxes,selected:this.model.get("tax_id")}))}.bind(this))}});
},{"255":255,"28":28,"284":284,"607":607,"undefined":undefined}],326:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Forms=require(608),format=require(607),StepsView=require(328);module.exports=Marionette.View.extend({template:require(285),regions:{steps:{el:"div[data-role='steps']",replaceElement:!0},pickup:{el:"div[data-role='pickup']",replaceElement:!0}},ui:{pickup_free_threshold:'input[name="socolissimo_pickup_free_threshold"]',be_extra:'input[name="socolissimo_be_extra"]',be_enabled:'input[name="socolissimo_be_enabled"]',addStepBtn:'a[data-role="step-add"]',addPickupBtn:'a[data-role="pickup-add"]',form_pickup:'form[data-role="pickup"]',form_steps:'form[data-role="steps"]'},events:{"click @ui.addStepBtn":function(){var e=this.getChildView("steps");e&&e.collection.add({weight:"",price_ex_vat:"",price_inc_vat:""})},"click @ui.addPickupBtn":function(){var e=this.getChildView("pickup");e&&e.collection.add({weight:"",price_ex_vat:"",price_inc_vat:""})}},fields:["socolissimo_pickup_free_threshold","socolissimo_be_extra","socolissimo_be_enabled"],rate:null,country:null,pickup:null,initialize:function(e){this.mergeOptions(e,["model","carrierCountries"]),this.rate=1,this.country=null,this.pickup=null},templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency),socolissimo_pickup_free_threshold:""!=this.model.get("socolissimo_pickup_free_threshold")?format.formatFloat(this.model.get("socolissimo_pickup_free_threshold"),4):"",socolissimo_be_extra:""!=this.model.get("socolissimo_be_extra")?format.formatFloat(this.model.get("socolissimo_be_extra"),4):""}},onRender:function(){this.country=this.carrierCountries.add({carrier_id:this.model.get("carrier_id"),country_id:73}),this.country.fetch().done(function(){this.showChildView("steps",new StepsView({collection:this.country.get("steps"),childViewOptions:{taxesProxy:this,currency:format.currencyEntity(this.model.meta.currency)}})),this.model.set({delay:this.country.get("delay"),free_threshold:this.country.get("free_threshold")})}.bind(this)),this.pickup=this.carrierCountries.add({carrier_id:this.model.get("carrier_id"),country_id:0}),this.pickup.fetch().done(function(){this.showChildView("pickup",new StepsView({collection:this.pickup.get("steps"),childViewOptions:{taxesProxy:this,currency:format.currencyEntity(this.model.meta.currency)}}))}.bind(this))},onTaxChange:function(e){this.rate=e},taxRate:function(){return this.rate},extractFields:function(){return{socolissimo_pickup_free_threshold:this.getUI("pickup_free_threshold").val(),socolissimo_be_extra:this.getUI("be_extra").val(),socolissimo_be_enabled:this.getUI("be_enabled").filter(":checked").val()}},onSave:function(e){var t,i,s;if(s=Forms.extractFields(["weight","price_ex_vat"],this,{selector:this.getUI("form_steps")}),s.weight)for(e.steps={},t=0;t<s.weight.length;t++)i=Math.round(1e3*format.unformatFloat(s.weight[t])),isNaN(i)||(e.steps[i]=s.price_ex_vat[t]);else e.steps="";var r={};if(s=Forms.extractFields(["weight","price_ex_vat"],this,{selector:this.getUI("form_pickup")}),s.weight)for(r.steps={},t=0;t<s.weight.length;t++)i=Math.round(1e3*format.unformatFloat(s.weight[t])),isNaN(i)||(r.steps[i]=s.price_ex_vat[t]);else r.steps="";return Backbone.$.when(this.country.save(e,{patch:!0,wait:!0}),this.pickup.save(r,{patch:!0,wait:!0}))}});
},{"285":285,"328":328,"607":607,"608":608,"undefined":undefined}],327:[function(require,module,exports){
var Marionette=require("backbone.marionette"),WysiwygBehavior=require(28),format=require(607),TaxView=require(255);module.exports=Marionette.View.extend({template:require(286),behaviors:[WysiwygBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0}},ui:{delay:'input[name="delay"]',free_threshold:'input[name="free_threshold"]'},initialize:function(e){this.mergeOptions(e,["model","taxes"]),this.listenTo(this.model,"change",function(){this.updateView()})},templateContext:function(){return{threshold:format.formatFloat(this.model.get("threshold"),2),base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},onRender:function(){this.taxes.fetch().done(function(){0!==this.taxes.length&&this.showChildView("taxes",new TaxView({taxes:this.taxes,selected:this.model.get("tax_id")}))}.bind(this))},updateView:function(){this.model.hasChanged("free_threshold")&&this.getUI("free_threshold").val(format.formatFloat(this.model.get("free_threshold"),2)),this.model.hasChanged("delay")&&this.getUI("delay").val(this.model.get("delay"))},extractFields:function(){return{free_threshold:this.getUI("free_threshold").val(),delay:this.getUI("delay").val()}}});
},{"255":255,"28":28,"286":286,"607":607,"undefined":undefined}],328:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),VatBehavior=require(32),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(287),className:"list-item list-item-form",behaviors:[RowActionsBehavior,{behaviorClass:VatBehavior,proxy:"taxesProxy"}],fields:["price_ex_vat","weight"],currency:"",initialize:function(e){this.currency=e.currency||""},templateContext:function(){return{price_ex_vat:format.formatFloat(this.model.get("price_ex_vat"),4),price_inc_vat:format.formatFloat(this.model.get("price_inc_vat"),4),weight:this.model.get("weight")>0?format.formatFloat(this.model.get("weight")/1e3,4):"",currency:this.currency}},onActionDelete:function(){this.model.destroy()}}),EmptyView=Marionette.View.extend({template:_.template('<span class="list-item-empty">Aucune tranche</span>')});module.exports=Marionette.CollectionView.extend({className:"",emptyView:EmptyView,childView:RowView});
},{"287":287,"31":31,"32":32,"607":607,"undefined":undefined}],329:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(289),className:"list-item",behaviors:[RowActionsBehavior],templateContext:function(){var e;switch(this.model.get("type")){case"magasin":e="Retrait en magasin pour le Click & Collect";break;case"socolissimo":e="Retrait en points relais ou sur rendez-vous du réseau La Poste";break;case"soco_pickup":e="Retrait en points relais La Poste";break;case"local":e="Livraison locale limitée à certain codes postaux";break;case"tranchespoids":e="Livraison nationale et internationale limitée à certain pays";break;case"dpd":e="Retrait en points relais du réseau DPD Relais Pickup";break;case"mondialrelay":e="Retrait en points relais du réseau Mondial Relay"}return{is_supported:this.model.isSupported(),is_deletable:this.model.isDeletable(),type_label:e}},onActionDelete:function(){return this.model.destroy()}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(288),className:"container",service:"checkout",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des transporteurs"}))},start:function(){this.collection.fetch({reset:!0})},onChildviewSortChange:function(e){this.collection.reOrder(e.list)}});
},{"128":128,"288":288,"289":289,"31":31,"undefined":undefined}],330:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectifyBehavior=require(26),Countries=require(39),SelectView=require(139),Forms=require(608),_=require("underscore");module.exports=Marionette.View.extend({template:require(290),behaviors:[SelectifyBehavior],ui:{errors:"div[data-role='errors']"},regions:{countries:{el:"div[data-role='countries']",replaceElement:!0}},model:null,type:null,countries:null,lockSave:!1,fields:["civility","lastname","firstname","phone","company","address","zipcode","city","country_id"],initialize:function(e){this.mergeOptions(e,["model","type"]),this.countries=new Countries,this.countries.fetch(),this.lockSave=!1},templateContext:function(){return{type:this.type,address:"shipping"===this.type?this.model.get("shipping_address"):this.model.get("billing_address")}},onRender:function(){var e=new SelectView({collection:this.countries,selected:"shipping"===this.type?this.model.get("shipping_address").country_id:this.model.get("billing_address").country_id,name:"country_id",direction:"up"});this.showChildView("countries",e)},onSave:function(){var e=Forms.extractFields(this.fields,this),i={};return"shipping"===this.type?(this.model.set("shipping_address",e),i.shipping_address=e):(this.model.set("billing_address",e),i.billing_address=e),this.model.save(i,{patch:!0,wait:!0})},onActionModal:function(){if(!this.lockSave){this.lockSave=!0,Forms.clearErrors(this.getUI("errors"),this.el);var e=this.onSave();return e?e.done(function(){this.triggerMethod("close:modal",!0)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this)).always(function(){this.lockSave=!1}.bind(this)):void(this.lockSave=!1)}}});
},{"139":139,"26":26,"290":290,"39":39,"608":608,"undefined":undefined}],331:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(291),ui:{"select-simple":'div[data-role="select-simple"]',"select-textarea":'div[data-role="select-textarea"]',"select-select":'div[data-role="select-select"]'},events:{"click @ui.select-simple":function(){this.trigger("select:type",{type:"simple"})},"click @ui.select-textarea":function(){this.trigger("select:type",{type:"textarea"})},"click @ui.select-select":function(){this.trigger("select:type",{type:"select"})}}});
},{"291":291,"undefined":undefined}],332:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),FormBehavior=require(27),VatBehavior=require(32),Forms=require(608),TaxView=require(255);module.exports=Marionette.View.extend({template:require(292),className:"container",service:"checkout",behaviors:[FormBehavior,VatBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0}},fields:["is_enabled","name","description","tax_id","price_ex_vat","values"],initialize:function(e){this.mergeOptions(e,["model","taxes"])},templateContext:function(){return{values:this.model.get("values")&&_.isArray(this.model.get("values"))>0?this.model.get("values").join(","):"",price_ex_vat:format.formatFloat(this.model.get("price_ex_vat"),4),price_inc_vat:format.formatFloat(this.model.get("price_inc_vat"),4),base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},onRender:function(){this.taxes.length>0&&this.showChildView("taxes",new TaxView({taxes:this.taxes,selected:this.model.get("tax_id")}))},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"255":255,"27":27,"292":292,"32":32,"607":607,"608":608,"undefined":undefined}],333:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(294),className:"list-item",behaviors:[RowActionsBehavior],templateContext:function(){var e;switch(this.model.get("type")){case"simple":e="Option simple";break;case"textarea":e="Zone de texte";break;case"select":e="Liste de valeurs"}return{is_supported:this.model.isSupported(),type_label:e}},onActionDelete:function(){return this.model.destroy()}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(293),className:"container",service:"checkout",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des options"}))},start:function(){this.collection.fetch({reset:!0,data:{extra_fields:"price_label"}})},onChildviewSortChange:function(e){this.collection.reOrder(e.list)}});
},{"128":128,"293":293,"294":294,"31":31,"undefined":undefined}],334:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),Forms=require(608),CollectionUtils=require(606),AddressEditModalView=require(330),FormBehavior=require(27),DropdownView=Marionette.View.extend({className:"fake-select dropdown",template:_.template('<button type="button" class="badge badge-lg dropdown-toggle" data-toggle="dropdown"><span class="fake-selected"><%- label %></span></button><ul class="dropdown-menu dropdown-control"><% _.each(options, function(option, index){ %><li class="<%- option.selected ? \'active\' : \'\' %>"><a class="dropdown-item" data-index="<%- index %>" href="#"><%- option.label %></a></li><% }) %></ul><% if(name) { %><input type="hidden" name="<%- name %>" value="<%- value %>"><% } %>'),ui:{options:"[data-index]",button:"button"},events:{"click @ui.options":function(e){var t=this.collection.selectIndex(Backbone.$(e.currentTarget).data("index"));t&&this.trigger("select",t)}},collection:null,initialize:function(e){this.mergeOptions(e),this.collection=new CollectionUtils.SelectCollection,this.listenTo(this.collection,"update",this.render)},templateContext:function(){var e=this.collection.selected(),t=e?e.get("label"):this.getOption("defaultLabel")||"",i=e?e.get("value"):this.getOption("defaultValue")||"";return{label:t,value:i,name:this.getOption("name"),selected:e,options:this.collection.toJSON()}},getOptions:function(){return this.collection},getSelected:function(){return this.collection.selected()}}),ActivityView=Marionette.View.extend({template:_.template("<% _.each(activity, function(item){ %> <p><%= nl2br(item.message) %><br/> le <%- item.date_format %> <% if(item.user) { %> <br/> par <%- item.user %> <% } %></p><%}) %>"),initialize:function(e){this.mergeOptions(e,["model"])},templateContext:function(){var e=_.map(this.model.get("activity"),function(e){return e.date_format=format.formatLongDateTime(e.date),e});return{activity:e,nl2br:function(e){return _.escape(""+e).replace(/(\r\n|\n\r|\r|\n)+/g,"<br />")}}}});module.exports=Marionette.View.extend({template:require(295),className:"container container-large",service:"checkout",behaviors:[FormBehavior],ui:{notify:'div[data-role="notify"]',addressEdit:'a[data-role="addressEdit"]'},events:{"click @ui.addressEdit":function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController"),i=Backbone.$(e.currentTarget).data("type"),a=new AddressEditModalView({model:this.model,type:i});t.showInModal(a,{title:"Modifier l'adresse",modalClass:"modal-right",modalDialogClass:"modal-sm",action:{title:"Enregistrer"}})}},regions:{activity:{el:'div[data-role="activity"]',replaceElement:!0},is_paid:{el:'div[data-role="is_paid"]',replaceElement:!0},status:{el:'div[data-role="status"]',replaceElement:!0}},fields:["comment","picking_number","notify","is_paid","status"],initialize:function(e){this.mergeOptions(e,["model"]),this.listenTo(this.model,"sync",this.render)},templateContext:function(){var e="https://maps.google.fr/maps?h=q&hl=fr&q=";if(this.model.get("shipping_address")){var t=this.model.get("shipping_address");switch(t.map=e+t.address+" "+t.zipcode+" "+t.city+" "+t.country,t.civility){case"Mr":t._civility="M.";break;case"Mrs":t._civility="Mme.";break;case"Miss":t._civility="Mlle.";break;default:t._civility=""}}if(this.model.get("billing_address")){var i=this.model.get("billing_address");switch(i.map=e+i.address+" "+i.zipcode+" "+i.city+" "+i.country,i.civility){case"Mr":i._civility="M.";break;case"Mrs":i._civility="Mme.";break;case"Miss":i._civility="Mlle.";break;default:i._civility=""}}var a,s=this.model.get("shipping");s.scheduled&&(a=s.scheduled.indexOf(" ")===-1?format.formatLongDate(s.scheduled):format.formatLongDateTime(s.scheduled));var o="";if(this.model.get("voucher")&&this.model.get("voucher").type)switch(this.model.get("voucher").type){case"shipping":o="Frais de port fixes";break;case"percent":o="Remise de "+this.model.get("voucher").amount+"%"}return{creation_date:format.formatLongDateTime(this.model.get("creation_date")),voucher_label:o,scheduled_date:a}},onRender:function(){this.showChildView("activity",new ActivityView({model:this.model}));var e=new DropdownView({name:"is_paid"});this.listenTo(e,"render",function(e){var t=e.getSelected();t&&e.getUI("button").addClass(t.get("badge"))}.bind(this)),this.listenTo(e,"select",function(){this.triggerMethod("field:change")}.bind(this)),e.getOptions().add([{value:0,label:"À payer",badge:"badge-warning",selected:!this.model.get("is_paid")},{value:1,label:"Payée",badge:"badge-success",selected:this.model.get("is_paid")}]),this.showChildView("is_paid",e);var t=new DropdownView({name:"status"});this.listenTo(t,"render",function(e){var t=e.getSelected();t&&e.getUI("button").addClass(t.get("badge"))}.bind(this)),this.listenTo(t,"select",function(){this.triggerMethod("field:change"),this.getUI("notify").show()}.bind(this)),t.getOptions().add([{value:"pending",label:"À traiter",badge:"badge-primary",selected:"pending"===this.model.get("status")},{value:"processing",label:"En cours",badge:"badge-warning",selected:"processing"===this.model.get("status")},{value:"processed",label:"Traitée",badge:"badge-info",selected:"processed"===this.model.get("status")},{value:"shipped",label:"Expédiée",badge:"badge-success",selected:"shipped"===this.model.get("status")},{value:"cancelled",label:"Annulée",badge:"badge-danger",selected:"cancelled"===this.model.get("status")}]),this.showChildView("status",t)},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0}).done(function(){this.getUI("notify").hide()}.bind(this))}});
},{"27":27,"295":295,"330":330,"606":606,"607":607,"608":608,"undefined":undefined}],335:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),CollectionUtils=require(606),format=require(607),moment=require("moment"),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(297),className:"list-item",behaviors:[RowActionsBehavior],initialize:function(e){this.mergeOptions(e)},templateContext:function(){var e,t=moment(this.model.get("creation_date"),"YYYY-MM-DD HH:mm:ss"),i=moment().diff(t,"days");e=i>=1?format.formatLongDateTime(this.model.get("creation_date")):t.fromNow();var l,a=this.model.get("shipping");a.scheduled&&(l=a.scheduled.indexOf(" ")===-1?format.formatLongDate(a.scheduled):format.formatLongDateTime(a.scheduled));var s,r;switch(this.model.get("status")){case"pending":s="À traiter",r="badge-primary";break;case"processing":s="En cours",r="badge-warning";break;case"processed":s="Traitée",r="badge-info";break;case"shipped":s="Expédiée",r="badge-success";break;case"cancelled":s="Annulée",r="badge-danger"}return{creation_date:format.formatLongDateTime(this.model.get("creation_date")),creation_date_fromnow:e,scheduled_date:l,statut:s,statutClass:r}},onRender:function(){this.getOption("proxy").lastListId&&this.getOption("proxy").lastListId<this.model.get("order_id")&&this.$el.addClass("new-item")}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(296),className:"container-fluid",service:"checkout",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"-date",filters:null,hasAccounting:null,initialize:function(e){this.mergeOptions(e,["collection","carriers","customers","payments","departments","hasAccounting"]),this.filters={is_paid:null,status:this.getOption("filters")&&this.getOption("filters").status&&"all"!=this.getOption("filters").status?this.getOption("filters").status:null,customer_id:this.getOption("customer_id")?this.getOption("customer_id"):null,term:this.getOption("filters")&&this.getOption("filters").term?this.getOption("filters").term:null,payment_date:this.getOption("filters")&&this.getOption("filters").payment_date_min&&this.getOption("filters").payment_date_max?[this.getOption("filters").payment_date_min,this.getOption("filters").payment_date_max]:null,creation_date:this.getOption("filters")&&this.getOption("filters").creation_date_min&&this.getOption("filters").creation_date_max?[this.getOption("filters").creation_date_min,this.getOption("filters").creation_date_max]:null,department:this.getOption("filters")&&this.getOption("filters").department?this.getOption("filters").department:null},this.listenTo(this.collection,"sync",function(e){null!=this.filters.status&&e instanceof Backbone.Model&&e.get("status")!=this.filters.status&&this.collection.remove(e)}.bind(this));var t=Backbone.Radio.channel("app").request("ctx:notificationCenter");t&&this.listenTo(t,"notification:order",function(){var e=_.compact(this.filters);1===e.length&&"pending"==e[0]&&this.start()})},onRender:function(){var e=[{value:"export",label:"Exporter pour Excel",selected:!1},{value:"export-coliship",label:"Exporter pour Coliship",selected:!1},{value:"export-dpd",label:"Exporter pour Station DPD",selected:!1},{value:"export-mondialrelay",label:"Exporter pour Mondial Relay Connect",selected:!1}];this.hasAccounting&&e.push({value:"export-accounting",label:"Export comptable",selected:!1});var t=new CollectionUtils.SelectCollection([{value:"pending",label:"À traiter"},{value:"processing",label:"En cours"},{value:"processed",label:"Traitées"},{value:"shipped",label:"Expédiées"},{value:"cancelled",label:"Annulées"},{value:null,label:"Toutes les commandes"}]),i=t.findWhere({value:this.filters.status}),l=new ListView({collection:this.collection,rowView:RowView,renderInterval:3e4,title:"Liste des commandes",selection:[{title:"Est À traiter",callback:this.changeStatusPending.bind(this),className:"confirm-success",confirm:!0},{title:"Est En cours",callback:this.changeStatusProcessing.bind(this),className:"confirm-success",confirm:!0},{title:"Est Traitée",callback:this.changeStatusProcessed.bind(this),className:"confirm-success",confirm:!0},{title:"Est Expediée",callback:this.changeStatusShipped.bind(this),className:"confirm-success",confirm:!0},{title:"Est Annulée",callback:this.changeStatusCancelled.bind(this),className:"confirm-success",confirm:!0},{title:"Est Payée",callback:this.changePaid.bind(this),className:"confirm-success",confirm:!0},{title:"Est À payer",callback:this.changeUnpaid.bind(this),className:"confirm-success",confirm:!0}],filters:[{id:"status",title:i?i.get("label"):"Tous les statuts",type:"dropdown",collectionPromise:t},{id:"term",title:"Rechercher",type:"input",value:this.filters.term},{id:"add",title:"Ajouter un filtre",extraClassname:"filter-add",type:"dropdown",disableLabelUpdate:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:"paid",label:"Paiement"},{value:"customer",label:"Acheteur"},{value:"creation",label:"Date de création"},{value:"price",label:"Montant"},{value:"paymentDate",label:"Date de paiement"},{value:"payment",label:"Mode de paiement"},{value:"carrier",label:"Transporteur"},{value:"fidelity",label:"Points de fidélités"},{value:"department",label:"Département"}])}],xtra:[{id:"export",extraClassname:"md-export",type:"button",collectionPromise:new CollectionUtils.SelectCollection(e)},{id:"sort",extraClassname:"md-sort",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{label:"Date",selected:!0,value:"-date"},{label:"Livraison/retrait",selected:!1,value:"-schedule"},{label:"Montant",selected:!1,value:"-amount"},{label:"Modification",selected:!1,value:"-modification"}])}]});this.showChildView("list",l),null!=this.filters.payment_date&&l.showFilter("paymentDate"),null!=this.filters.creation_date&&l.showFilter("creation"),null!=this.filters.department&&l.showFilter("department")},start:function(){var e={sort:this.sortOrder?this.sortOrder:null,extra_fields:"price_label"};null!=this.filters.status&&(e.status=this.filters.status),null!=this.filters.is_paid&&(e.is_paid=this.filters.is_paid),null!=this.filters.customer_id&&(e.customer_id=this.filters.customer_id),null!=this.filters.term&&(e.term=this.filters.term),null!=this.filters.creation_date&&(e.creation_date_min=this.filters.creation_date[0],e.creation_date_max=this.filters.creation_date[1]),null!=this.filters.price_total_inc_vat&&(e.price_total_inc_vat_min=this.filters.price_total_inc_vat[0],e.price_total_inc_vat_max=this.filters.price_total_inc_vat[1]),null!=this.filters.payment_date&&(e.payment_date_min=this.filters.payment_date[0],e.payment_date_max=this.filters.payment_date[1]),null!=this.filters.payment_id&&(e.payment_id=this.filters.payment_id),null!=this.filters.carrier_id&&(e.carrier_id=this.filters.carrier_id),null!=this.filters.fidelity_reward&&(e.fidelity_reward_min=this.filters.fidelity_reward[0],e.fidelity_reward_max=this.filters.fidelity_reward[1]),null!=this.filters.department&&(e.country_id=73,e.department=this.filters.department),this.collection.fetch({reset:!0,data:e}).done(function(){var e=_.compact(this.filters);1===e.length&&"pending"===e[0]?this.getChildView("list")&&this.collection.length&&null==this.lastListId&&(this.lastListId=this.collection.at(0).get("order_id"),this.getChildView("list").lastListId=this.lastListId):this.getChildView("list")&&(this.lastListId=null,this.getChildView("list").lastListId=this.lastListId)}.bind(this))},changePaid:function(e){return this.collection.bulkPaymentStatus(e,!0)},changeUnpaid:function(e){return this.collection.bulkPaymentStatus(e,!1)},changeStatusPending:function(e){return this.collection.bulkStatus(e,"pending")},changeStatusProcessing:function(e){return this.collection.bulkStatus(e,"processing")},changeStatusProcessed:function(e){return this.collection.bulkStatus(e,"processed")},changeStatusShipped:function(e){return this.collection.bulkStatus(e,"shipped")},changeStatusCancelled:function(e){return this.collection.bulkStatus(e,"cancelled")},onSortFilterChange:function(e){e.view.activeItem(e.value),this.sortOrder=e.value,this.start()},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onStatusFilterChange:function(e){this.filters.status=e.value,this.start()},onPaidFilterChange:function(e){"paid"==e.value?this.filters.is_paid=!0:"unpaid"==e.value?this.filters.is_paid=!1:this.filters.is_paid=null,this.start()},onTermFilterChange:function(e){this.filters.term=""!=e.value?e.value:null,this.start()},onExportFilterChange:function(e){if(e.view){var t=e.view,i=4;if(this.hasAccounting&&i++,"export"==e.value||"export-coliship"==e.value||"export-dpd"==e.value||"export-accounting"==e.value||"export-mondialrelay"==e.value){if(t.collection.length>i)return;t.overrideExtraClassname("md-loading"),t.render();var l={};"export-coliship"==e.value?l.type="coliship":"export-accounting"==e.value?l.type="accounting":"export-dpd"==e.value?l.type="dpd":"export-mondialrelay"==e.value&&(l.type="mondialrelay"),null!=this.filters.status&&(l.status=this.filters.status),null!=this.filters.is_paid&&(l.is_paid=this.filters.is_paid),null!=this.filters.term&&(l.term=this.filters.term),null!=this.filters.customer_id&&(l.customer_id=this.filters.customer_id),null!=this.filters.creation_date&&(l.creation_date_min=this.filters.creation_date[0],l.creation_date_max=this.filters.creation_date[1]),null!=this.filters.price_total_inc_vat&&(l.price_total_inc_vat_min=this.filters.price_total_inc_vat[0],l.price_total_inc_vat_max=this.filters.price_total_inc_vat[1]),null!=this.filters.payment_date&&(l.payment_date_min=this.filters.payment_date[0],l.payment_date_max=this.filters.payment_date[1]),null!=this.filters.payment_id&&(l.payment_id=this.filters.payment_id),null!=this.filters.carrier_id&&(l.carrier_id=this.filters.carrier_id),null!=this.filters.fidelity_reward&&(l.fidelity_reward_min=this.filters.fidelity_reward[0],l.fidelity_reward_max=this.filters.fidelity_reward[1]),""!==this.filters.department&&null!=this.filters.department&&(l.country_id=73,l.department=this.filters.department),this.collection.exportAll(l).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var l=Backbone.Radio.channel("app").request("ctx:navigationController");for(l.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>i;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>i;)t.collection.pop()}},onCustomerFilterChange:function(e){this.filters.customer_id=e.value,this.start()},onCreationFilterChange:function(e){this.filters.creation_date=e.value,this.start()},onPriceFilterChange:function(e){this.filters.price_total_inc_vat=e.value,this.start()},onPaymentDateFilterChange:function(e){this.filters.payment_date=e.value,this.start()},onPaymentFilterChange:function(e){this.filters.payment_id=e.value,this.start()},onCarrierFilterChange:function(e){this.filters.carrier_id=e.value,this.start()},onFidelityFilterChange:function(e){this.filters.fidelity_reward=e.value,this.start()},onDepartmentFilterChange:function(e){this.filters.department=e.value,this.start()},onAddFilterChange:function(e){var t;switch(e.value){case"paid":t={id:e.value,title:"Paiement",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:"paid",label:"Payée"},{value:"unpaid",label:"À payer"}])};break;case"customer":t={id:e.value,title:"Acheteur",type:"search",canDelete:!0};break;case"creation":t={id:e.value,title:"jj/mm/aaaa",type:"interval",enableDatepicker:"date",prependText:["Créée entre","et"],canDelete:!0,value:this.filters.creation_date?this.filters.creation_date:null};break;case"price":t={id:e.value,title:"prix TTC",type:"interval",prependText:["Montant entre","et"],canDelete:!0};break;case"paymentDate":t={id:e.value,title:"jj/mm/aaaa",type:"interval",enableDatepicker:"date",prependText:["Payée entre","et"],canDelete:!0,value:this.filters.payment_date?this.filters.payment_date:null};break;case"payment":t={id:e.value,title:"Mode de paiement",type:"dropdown",canDelete:!0,collectionPromise:this.payments.promisedSelect()};break;case"carrier":t={id:e.value,title:"Transporteur",type:"dropdown",canDelete:!0,collectionPromise:this.carriers.promisedSelect()};break;case"fidelity":t={id:e.value,title:"",type:"interval",prependText:["Pt de fidélités","et"],canDelete:!0};break;case"department":t={id:e.value,title:"Département",type:"dropdown",canDelete:!0,collectionPromise:this.departments.promisedSelect(this.filters.department)};break;default:return}e.model.collection.add(t)},onChildviewFilterInput:function(e){if(e.view&&e.view.showResults){var t=e.view.current.value?[e.view.current.value]:null;this.customers.suggest(e.value,5,t).done(function(t){var i=_.map(t,function(e){return{label:e.firstname+" "+e.lastname,value:e.customer_id}});e.view.showResults(i)}.bind(this))}}});
},{"128":128,"296":296,"297":297,"31":31,"606":606,"607":607,"undefined":undefined}],336:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(27),Session=Backbone.Radio.channel("app").request("ctx:session"),WysiwygBehavior=require(28),SelectifyBehavior=require(26),Forms=require(608),FileView=require(126),systempayView=Marionette.View.extend({template:require(307),behaviors:[WysiwygBehavior,SelectifyBehavior],fields:["intitule_long","hash","mode","tpe","key","banque","message"],templateContext:function(){return{domain:Session.site.get("domain"),config:this.model.get("config")}},extractFields:function(){return Forms.extractFields(this.fields,this)}}),chequeView=Marionette.View.extend({template:require(300),behaviors:[WysiwygBehavior],fields:["intitule_long","ordre","message"],templateContext:function(){return{config:this.model.get("config")}},extractFields:function(){return Forms.extractFields(this.fields,this)}}),atosView=Marionette.View.extend({template:require(299),behaviors:[WysiwygBehavior,SelectifyBehavior],regions:{file:{el:"div[data-role='file']",replaceElement:!0}},fields:["intitule_long","auto_return","version","banque","message"],templateContext:function(){return{config:this.model.get("config")}},onRender:function(){this.showChildView("file",new FileView({name:"certif"}))},extractPromisedFields:function(){var e=Backbone.$.Deferred(),i=Forms.extractFields(this.fields,this),t=this.getChildView("file").getFile();return t?this.getChildView("file").getFileContent().done(function(n){i.certif=t.name,i.certif_payload=btoa(n),e.resolve(i)}).fail(function(){e.reject()}):e.resolve(i),e}}),payboxView=Marionette.View.extend({template:require(303),behaviors:[WysiwygBehavior,SelectifyBehavior],ui:{hmac:'[date-role="hmac"]',mode:'select[name="mode"]'},events:{"change @ui.mode":function(e){"hmac"==this.getUI("mode").val()?this.getUI("hmac").show():this.getUI("hmac").hide()}},fields:["intitule_long","banque","mode","hmac","site","rang","id","message"],templateContext:function(){return{domain:Session.site.get("domain"),config:this.model.get("config")}},extractFields:function(){return Forms.extractFields(this.fields,this)}}),paypalView=Marionette.View.extend({template:require(305),behaviors:[WysiwygBehavior],fields:["intitule_long","email","message"],templateContext:function(){return{domain:Session.site.get("domain"),config:this.model.get("config")}},extractFields:function(){return Forms.extractFields(this.fields,this)}}),cmcicView=Marionette.View.extend({template:require(301),behaviors:[WysiwygBehavior,SelectifyBehavior],fields:["intitule_long","banque","key","mode","societe","tpe","message"],templateContext:function(){return{domain:Session.site.get("domain"),config:this.model.get("config")}},extractFields:function(){return Forms.extractFields(this.fields,this)}}),virementView=Marionette.View.extend({template:require(308),behaviors:[WysiwygBehavior],fields:["intitule_long","BIC","IBAN","domicile","rib_banque","rib_cle","rib_compte","rib_guichet","message"],templateContext:function(){return{config:this.model.get("config")}},extractFields:function(){return Forms.extractFields(this.fields,this)}}),paylineView=Marionette.View.extend({template:require(304),behaviors:[WysiwygBehavior,SelectifyBehavior],fields:["intitule_long","merchant_id","access_key","contract_number","mode","message"],templateContext:function(){return{domain:Session.site.get("domain"),config:this.model.get("config")}},extractFields:function(){return Forms.extractFields(this.fields,this)}}),payplugView=Marionette.View.extend({template:require(306),behaviors:[WysiwygBehavior,SelectifyBehavior],fields:["intitule_long","secret","message"],templateContext:function(){return{domain:Session.site.get("domain"),config:this.model.get("config")}},extractFields:function(){return Forms.extractFields(this.fields,this)}}),manuelView=Marionette.View.extend({template:require(302),behaviors:[WysiwygBehavior],fields:["intitule_long","instructions","ordre","message"],templateContext:function(){return{config:this.model.get("config")}},extractFields:function(){return Forms.extractFields(this.fields,this)}});module.exports=Marionette.View.extend({template:require(298),className:"container",service:"checkout",behaviors:[FormBehavior],regions:{form:{el:'div[data-role="form"]',replaceElement:!0}},fields:["is_enabled"],subView:null,initialize:function(e){this.mergeOptions(e,["model"]);var i;switch(this.model.get("type")){case"virement":i=virementView;break;case"cm_cic":i=cmcicView;break;case"paypal":i=paypalView;break;case"paybox":i=payboxView;break;case"atos":i=atosView;break;case"cheque":i=chequeView;break;case"systempay":i=systempayView;break;case"payline":i=paylineView;break;case"payplug":i=payplugView;break;case"manuel":i=manuelView}this.subView=new i({model:this.model}),this.listenTo(this.model,"sync",function(){this.subView.render()})},onRender:function(){this.getChildView("form")||this.showChildView("form",this.subView)},onSave:function(){var e=Forms.extractFields(this.fields,this);e.config={};var i=Backbone.$.Deferred();return this.getChildView("form").extractPromisedFields?this.getChildView("form").extractPromisedFields().done(function(t){_.extend(e.config,t),i.resolve(e)}).fail(function(){i.reject()}):(_.extend(e.config,this.getChildView("form").extractFields()),i.resolve(e)),i.then(function(e){return this.model.save(e,{patch:!0,wait:!0})}.bind(this))}});
},{"126":126,"26":26,"27":27,"28":28,"298":298,"299":299,"300":300,"301":301,"302":302,"303":303,"304":304,"305":305,"306":306,"307":307,"308":308,"608":608,"undefined":undefined}],337:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(310),className:"list-item",behaviors:[RowActionsBehavior],templateContext:function(){var e;switch(this.model.get("type")){case"virement":e="Paiement par virement bancaire";break;case"cm_cic":e="Paiement par carte bancaire distribué par les banques : <br/> Crédit Mutuel (CyberMUT), OBC, Groupe CIC (P@iement CIC)";break;case"paypal":e="Paiement par PayPal";break;case"paybox":e="Solution de paiement en ligne sécurisée multi-banques";break;case"atos":e="Paiement par carte bancaire distribué par les banques : <br/> Société Générale (Sogénactif / Agora), Crédit Lyonnais (Sherlock), HSBC, CCF (Elysnet), Crédit du Nord (Webaffaires), La Poste (Scellius), Crédit Agricole (e-Transactions), BNP Paribas (Merc@net)";break;case"cheque":e="Paiement par chèque";break;case"systempay":e="Paiement par carte bancaire distribué par les banques : Banque Populaire (Cyberplus Paiement), Société générale (Sogecommerce)";break;case"payline":e="Paiement par carte bancaire distribué par : Crédits Mutuel de Bretagne, Crédits Mutuel du Sud Ouest et Arkéa (Citelis)";break;case"payplug":e="Solution de paiement en ligne sécurisée";break;case"manuel":e="Paiement générique par virement ou par chèque"}return{is_supported:this.model.isSupported(),type_label:e}}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(309),className:"container",service:"checkout",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des modes de paiement"}))},start:function(){this.collection.fetch({reset:!0})},onChildviewSortChange:function(e){this.collection.reOrder(e.list)}});
},{"128":128,"309":309,"31":31,"310":310,"undefined":undefined}],338:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),WysiwygBehavior=require(28),Forms=require(608);module.exports=Marionette.View.extend({template:require(311),className:"container",service:"checkout",behaviors:[FormBehavior,WysiwygBehavior],fields:["mail_pending","mail_processing","mail_processed","mail_shipped","mail_cancelled","mail_recipients"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"27":27,"28":28,"311":311,"608":608,"undefined":undefined}],339:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),SelectifyBehavior=require(26),Forms=require(608),format=require(607);module.exports=Marionette.View.extend({template:require(312),className:"container",service:"checkout",behaviors:[FormBehavior,SelectifyBehavior],fields:["order_prefix","stockout_selling","stockout_threshold","decrement_stock","min_order_amount"],templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"26":26,"27":27,"312":312,"607":607,"608":608,"undefined":undefined}],340:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ActiveLinksBehaviors=require(18),Checkout=require(265);module.exports=Marionette.View.extend({template:require(313),service:"checkout",behaviors:[ActiveLinksBehaviors],initialize:function(e){this.overview=new Checkout;var i=Backbone.Radio.channel("app").request("ctx:notificationCenter");i&&this.listenTo(i,"notification:order",function(){this.fetchAndRender()}),this.fetchAndRender()},fetchAndRender:function(){Backbone.$.when(this.overview.fetch()).done(function(){this.render()}.bind(this)).fail(function(){console.log("FAIL")})},templateContext:function(){return{overview:this.overview.toJSON()}},onRefreshOrders:function(){this.overview.fetch().done(function(){this.render()}.bind(this))}});
},{"18":18,"265":265,"313":313,"undefined":undefined}],341:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Item=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/cms/collection",idAttribute:"item_id",url:function(){return this.get("item_id")?"sites/@site/cms/collection/"+this.get("item_id"):"sites/@site/cms/contents/"+this.get("content_id")+"/collection"},defaults:{item_id:null,content_id:null,is_visible:!1,fields:{}},getLabel:function(){return this.get("fields")&&this.get("fields").title?this.get("fields").title:"Élément sans titre"}});module.exports=CollectionUtils.KiubiCollection.extend({content_id:null,url:function(){return"sites/@site/cms/contents/"+this.content_id+"/collection"},model:Item,bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkGroupAction(this,function(e){return Backbone.ajax({url:"sites/@site/cms/collection",method:"DELETE",data:{items:e}})},e,100).done(function(e){this.remove(e)}.bind(this))},reOrder:function(e){return Backbone.ajax({url:this.url(),method:"PUT",data:{order:e}})}});
},{"606":606,"undefined":undefined}],342:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Component=CollectionUtils.KiubiModel.extend({url:function(){return"sites/@site/cms/contents/"+this.get("content_id")+"/component"},idAttribute:"content_id",defaults:{content_id:null,fields:[]},getLabel:function(){return this.get("fields")&&this.get("fields").title?this.get("fields").title:"Composant sans titre"},getTypes:function(e){return e=e||{},Backbone.ajax({url:"sites/@site/cms/components.json",data:e}).then(function(e,t){return _.map(e,function(e){return{type:e.type,name:e.name,fields:e.fields||[],collection:e.collection||[],has_collection:e.has_collection||!1}})})}});module.exports=CollectionUtils.KiubiCollection.extend({url:function(){return"sites/@site/cms/contents"},model:Component});
},{"606":606,"undefined":undefined}],343:[function(require,module,exports){
function checkExport(t){var e=t.get("result");return Backbone.ajax({url:"sites/@site/export/cms/contents/"+e,method:"GET"}).then(function(t,e){return t})}var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Components=require(342),Posts=require(347),Job=require(476),Content=CollectionUtils.KiubiModel.extend({url:function(){return this.get("content_id")?"sites/@site/cms/contents/"+this.get("content_id"):"sites/@site/cms/contents/"+this.get("content")},idAttribute:"content_id",symbol_id:null,page_id:null,defaults:{content_id:null,content_title:"",is_visible:!1,zone:null,content:"post",post:null,symbol:null,component:null},nextContent:null,previousContent:null,parseMeta:function(t){if(t&&t.link){if(this.nextContent=null,t.link.next_content){var e=t.link.next_content.match("cms/contents/([0-9]+)");e&&(this.nextContent=parseInt(e[1]))}if(this.previousContent=null,t.link.previous_content){var e=t.link.previous_content.match("cms/contents/([0-9]+)");e&&(this.previousContent=parseInt(e[1]))}}},getTitle:function(){if(this.get("content_title"))return this.get("content_title");switch(this.get("content")){case"post":return"Billet sans titre";case"component":return"Composant sans titre";case"symbol":return"Symbole sans titre";default:return"Sans titre"}},getTypeName:function(){switch(this.get("content")){case"post":return this.get("post").type_name;case"component":return this.get("component").type_name;case"symbol":return this.get("symbol").model_name;default:return"-"}},getContentModel:function(){var t={content_id:this.get("content_id")};switch(this.get("content")){case"post":var e=new((new Posts).model)(t);return e.set({type:this.get("post").type,type_name:this.get("post").type_name,title:this.get("post").title||"",subtitle:this.get("post").subtitle||"",group:this.get("post").group||"",text1:this.get("post").text1||"",text2:this.get("post").text2||"",text3:this.get("post").text3||"",text4:this.get("post").text4||"",text5:this.get("post").text5||"",text6:this.get("post").text6||"",text7:this.get("post").text7||"",text8:this.get("post").text8||"",text9:this.get("post").text9||"",text10:this.get("post").text10||"",text11:this.get("post").text11||"",text12:this.get("post").text12||"",text13:this.get("post").text13||"",text14:this.get("post").text14||"",text15:this.get("post").text15||""}),e;case"component":var e=new((new Components).model)(t);return e.set({type:this.get("component").type,type_name:this.get("component").type_name,fields:this.get("component").fields||{}}),e;default:return null}},duplicate:function(t){t=t||{};var e=this;return Backbone.ajax({url:"sites/@site/cms/contents/"+this.get("content_id"),method:"POST",data:t}).then(function(t,n){var s=e.clone();return s.set(s.parse({data:t,meta:n})),s})}});module.exports=CollectionUtils.KiubiCollection.extend({symbol_id:null,page_id:null,url:function(){return this.symbol_id?"sites/@site/cms/symbols/"+this.symbol_id+"/contents":"sites/@site/cms/pages/"+this.page_id+"/contents"},model:Content,bulkShow:function(t){return CollectionUtils.bulkAction(this,function(t){return t.get("is_visible")?Backbone.$.Deferred().resolve():t.save({is_visible:!0},{patch:!0})},t)},bulkHide:function(t){return CollectionUtils.bulkAction(this,function(t){return t.get("is_visible")?t.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},t)},bulkDelete:function(t){return CollectionUtils.bulkGroupAction(this,function(t){return Backbone.ajax({url:"sites/@site/cms/contents",method:"DELETE",data:{contents:t}})},t,100).done(function(t){this.remove(t)}.bind(this))},suggest:function(t,e){return Backbone.ajax({url:"sites/@site/suggest/cms/posts",data:{term:t,limit:e||5}}).then(function(t){return _.map(t,function(t){var e="Billet sans titre";return t.title?e=t.title:t.subtitle&&(e=t.subtitle),{content_id:t.content_id,label:e}})})},reOrder:function(t,e){var n=this.symbol_id?"sites/@site/cms/symbols/"+this.symbol_id+"/contents":"sites/@site/cms/pages/"+this.page_id+"/contents";return Backbone.ajax({url:n,method:"PUT",data:{zone:t,order:e}})},exportAll:function(t){return Backbone.ajax({url:"sites/@site/export/cms/contents",method:"POST",data:t}).then(function(t){var e=new Job({job_id:t.job_id});return e.watch().then(function(){return checkExport(e)})})}});
},{"342":342,"347":347,"476":476,"606":606,"undefined":undefined}],344:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/cms/home",idAttribute:"page_id",defaults:{page_id:null,name:"",is_visible:!1,is_home:!1,meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null,service_path:""},getTitle:function(){return this.get("name")},getBackURL:function(){return"/cms"}});
},{"606":606}],345:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Page=require(346),Pages=Backbone.Collection,Menu=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/cms/menus",idAttribute:"menu_id",defaults:{menu_id:null,name:"",is_main:!1,api_key:"",pages:[]}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/cms/menus",model:Menu,parse:function(e){return this.meta=e.meta,_.each(e.data,function(e){var i=[];e.pages&&_.each(e.pages,function(e){i.push(new Page(e))}),e.pages=new Pages(i)}),e.data},selectPayloadFilter:null,selectPayload:function(){var e=[],i=this.selectPayloadFilter;return _.each(this.toJSON(),function(a){if(a.pages){var n={},t={value:"m"+a.menu_id,label:a.name,is_root:!0,indent:0};i&&(t=i(t,null)),t!==!1&&e.push(t),_.each(a.pages.toJSON(),function(a){var t=1;a.page_parent_id>0&&(t=1+n["p"+a.page_parent_id]),n["p"+a.page_id]=t;var s={value:a.page_id,label:a.name,indent:t};i&&(s=i(s,a)),s!==!1&&e.push(s)})}else e.push({value:a.menu_id,label:a.name})}),e},findPage:function(e){var i=null;return _.each(this.toJSON(),function(a){a.pages&&null==i&&_.each(a.pages.toJSON(),function(a){a.page_id==e&&(i=a)})}),i},childPages:function(e,i){var a=[];return _.each(this.toJSON(),function(n){n.menu_id==e&&n.pages&&_.each(n.pages.toJSON(),function(e){e.page_parent_id!=i||e.is_home||a.push(e)})}),a},getMenuTree:function(e){if(0==this.length)return[];var i=null;return this.each(function(a){if(a.get("menu_id")==e){var n={};i={menu_id:a.get("menu_id"),model:null,childs:[]},a.get("pages").each(function(e){var a={model:e,childs:[]};n["i"+e.get("page_id")]=a;var t;t=0==e.get("page_parent_id")?i:n["i"+e.get("page_parent_id")],t.childs.push(a)})}}),i},parentList:function(e){var i=[],a=[e],n=3;return _.each(this.toJSON(),function(e){if(e.pages){var t={},s={value:"m"+e.menu_id,label:e.name,indent:0,is_selectable:!0,is_positionnable:!1};i.push(s),_.each(e.pages.toJSON(),function(e){var s=1;if(e.page_parent_id>0&&(s=1+t["p"+e.page_parent_id]),t["p"+e.page_id]=s,!(e.is_home||a.indexOf(e.page_id)>=0)){if(a.indexOf(e.page_parent_id)>=0)return void a.push(e.page_id);var u={value:e.page_id,label:e.name,indent:s,is_selectable:s<=n,is_positionnable:!0};i.push(u)}})}else i.push({value:e.menu_id,label:e.name,indent:0,is_selectable:!0,is_positionnable:!1})}),i},suggest:function(e,i){return Backbone.ajax({url:"sites/@site/suggest/cms/pages",data:{term:e,limit:i||5}}).then(function(e){return _.map(e,function(e){return{page_id:e.page_id,is_home:e.is_home,name:e.name,slug:e.slug,page_type:e.page_type}})})}});
},{"346":346,"606":606,"undefined":undefined}],346:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/cms/pages",idAttribute:"page_id",defaults:{page_id:null,menu_id:null,page_type:"",page_parent_id:null,name:"",is_visible:!1,is_home:!1,slug:"",has_restrictions:!1,meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null,target_type:"",target_page:"",target_key:"",url_target:"",restrictions:[],service_path:""},getTitle:function(){return this.get("name")},getBackURL:function(){return this.get("is_home")?"/cms":"/cms/pages/"+this.get("page_id")},getInternalLinkTypes:function(e){return Backbone.ajax({url:"sites/@site/cms/internal_links/targets"}).then(function(t){var i=new CollectionUtils.SelectCollection;return i.add(_.map(t,function(t){return{value:t.type,label:t.name,selected:e&&e==t.type}})),i})},getInternalLinkTargets:function(e){return Backbone.ajax({url:"sites/@site/cms/internal_links/targets/"+e}).then(function(e){return e})},duplicate:function(){var e=this;return Backbone.ajax({url:"sites/@site/cms/pages/"+this.get("page_id"),method:"POST"}).then(function(t,i){var n=e.clone();return n.set(n.parse({data:t,meta:i})),n})}});
},{"606":606,"undefined":undefined}],347:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Post=CollectionUtils.KiubiModel.extend({url:function(){return"sites/@site/cms/contents/"+this.get("content_id")+"/post"},idAttribute:"content_id",defaults:{content_id:null,type:"",type_name:"",title:"",subtitle:"",group:"",text1:"",text2:"",text3:"",text4:"",text5:"",text6:"",text7:"",text8:"",text9:"",text10:"",text11:"",text12:"",text13:"",text14:"",text15:""},getLabel:function(){return this.get("title")?this.get("title"):this.get("subtitle")?this.get("subtitle"):"Billet sans titre"},getGroups:function(){return Backbone.ajax({url:"sites/@site/cms/posts_groups"}).then(function(t){var e=new CollectionUtils.SelectCollection;return e.add(_.map(t,function(t){return{value:t.name,label:t.name}})),e})},getTypes:function(){return Backbone.ajax({url:"sites/@site/cms/posts_types",data:{extra_fields:"structure"}}).then(function(t){return _.map(t,function(t){return{type:t.type,name:t.name,position:t.position,fields:t.fields||[]}})})},promisedTypes:function(t){return Backbone.ajax({url:"sites/@site/cms/posts_types"}).then(function(e){var i=new CollectionUtils.SelectCollection,n=[];return e&&_.each(e,function(e){n.push({value:e.type,label:e.name,selected:t&&e.type==t})}),i.add(n),i})}});module.exports=CollectionUtils.KiubiCollection.extend({page_id:null,url:function(){return this.page_id>0?"sites/@site/cms/pages/"+this.page_id+"/posts":"sites/@site/cms/posts"},model:Post,bulkShow:function(t){return CollectionUtils.bulkAction(this,function(t){return t.get("is_visible")?Backbone.$.Deferred().resolve():t.save({is_visible:!0},{patch:!0})},t)},bulkHide:function(t){return CollectionUtils.bulkAction(this,function(t){return t.get("is_visible")?t.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},t)},bulkDelete:function(t){return CollectionUtils.bulkGroupAction(this,function(t){return Backbone.ajax({url:"sites/@site/cms/posts",method:"DELETE",data:{posts:t}})},t,100).done(function(t){this.remove(t)}.bind(this))}});
},{"606":606,"undefined":undefined}],348:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Symbol=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/cms/symbols",idAttribute:"symbol_id",defaults:{symbol_id:null,model:"",zones:null,params:null},getTitle:function(){return this.get("params")?this.get("params").title:""},getBackURL:function(){return"/cms/symbols/"+this.get("symbol_id")},getModels:function(e){return e=e||{},Backbone.ajax({url:"sites/@site/cms/symbols/models.json",data:e}).then(function(e,t){return _.map(e,function(e){return{id:e.id,name:e.name,fields:e.fields||[],zones:e.zones||[]}})})},duplicate:function(){var e=this;return Backbone.ajax({url:"sites/@site/cms/symbols/"+this.get("symbol_id"),method:"POST"}).then(function(t,s){var l=e.clone();return l.set(l.parse({data:t,meta:s})),l})}});module.exports=CollectionUtils.KiubiCollection.extend({url:function(){return"sites/@site/cms/symbols"},model:Symbol,getMenuTree:function(){var e=new Map,t=this.reduce(function(t,s){var l,i,n=s.get("params").title.split("/");return 2==n.length?(l=n[0].trim(),i=n[1].trim()):(l="",i=s.get("params").title),""===l?(t.childs.push({model:new Backbone.Model({id:s.get("symbol_id"),name:i,type:"symbol"}),childs:[]}),t):(e.has(l)||e.set(l,t.childs.length),t.childs[e.get(l)]||(t.childs[e.get(l)]={model:new Backbone.Model({id:"c"+e.get(l),name:l,type:"category"}),childs:[]}),t.childs[e.get(l)].childs.push({model:new Backbone.Model({id:s.get("symbol_id"),name:i,type:"symbol"}),childs:[]}),t)},{model:new Backbone.Model({id:0,name:"",type:"category"}),childs:[]}),s=function(e,t){return 0===e.childs.length&&t.childs.length>0?-1:e.childs.length>0&&0===t.childs.length?1:e.model.get("name")>t.model.get("name")};return t.childs.sort(s),_.each(t.childs,function(e){e.childs.sort(s)}),t}});
},{"606":606,"undefined":undefined}],349:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var t=[];if(e.addPageContent&&t.push({title:"Ajouter un contenu",icon:"md-add-outline",isPrimary:!0,callback:["showContentAdd",{container_id:e.addPageContent,container_type:"page"}]}),e.addSymbolContent&&t.push({title:"Ajouter un contenu",icon:"md-add-outline",isPrimary:!0,callback:["showContentAdd",{container_id:e.addSymbolContent,container_type:"symbol"}]}),e.duplicateContent&&t.push({title:"Dupliquer",icon:"md-duplicate",isOptional:!0,callback:["actionDuplicationContent",e.duplicateContent]}),e.duplicatePage&&t.push({title:"Dupliquer",icon:"md-duplicate",isOptional:!0,callback:["actionDuplicationPage",e.duplicatePage]}),e.duplicateSymbol&&t.push({title:"Dupliquer",icon:"md-duplicate",isOptional:!0,callback:["actionDuplicationSymbol",e.duplicateSymbol]}),e.addPageInMenu||e.addPage){var n={};e.addPageInMenu&&(n.menu_id=e.addPageInMenu),e.addPage&&(n.page_parent_id=e.addPage),t.push({title:"Ajouter une page",icon:"md-add-outline",callback:["actionNewPage",n]})}e.preview&&t.push({title:"Aperçu",icon:"md-launch",isOptional:!0,callback:["actionPreview",e.preview]});var i={title:"Enregistrer",callback:"actionSave",activateOnEvent:e.forceSave?null:"modified:content",bubbleOnEvent:e.forceSave?null:"modified:content"};return t.length<=1?t.push(i):t.splice(1,0,i),t}function HeaderTabsSymbol(e){var t=[{title:"Symbole",url:"/cms/symbols/"+e,icon:"md-symbole-detail"}],n=Backbone.Radio.channel("app").request("ctx:session");return n.hasScope("site:layout")&&t.push({title:"Widgets",url:"/cms/symbols/"+e+"/layout",icon:"md-symbole-widgets"}),t}function getPostNavigation(e){return e.nextContent||e.previousContent?{next:!!e.nextContent&&"/cms/contents/"+e.nextContent,previous:!!e.previousContent&&"/cms/contents/"+e.previousContent}:null}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Forms=require(608),Router=require(612),Controller=require(34),Menus=require(345),Page=require(346),Posts=require(347),Home=require(344),Symbols=require(348),Contents=require(343),Collection=require(341),Builder=require(145),Layout=require(146),IndexView=require(375),MenuView=require(376),PageView=require(379),PostView=require(380),PostsView=require(381),ComponentView=require(373),SymbolView=require(383),PageAddModalView=require(378),ContentAddModalView=require(377),LayoutView=require(159),SidebarMenuLayoutView=require(161),ActiveLinksBehaviors=require(18),SidebarMenuView=require(382),CMSController=Controller.extend({sidebarMenuService:"cms",sidebarMenu:SidebarMenuView,sidebarMenuEvents:{"add:page":"showPageAdd","add:menu":"actionNewMenu"},baseBreadcrum:[{title:"Site Web",href:"/cms"}],showIndex:function(){var e=new Home;e.fetch({data:{extra_fields:"defaults,zones"}}).done(function(){this.addContext("page_id",e.get("page_id")),this.triggerSidebarMenu("change:page",e.get("page_id"));var t=Backbone.Radio.channel("app").request("ctx:session"),n=new IndexView({model:e,enableSeo:t.hasScope("site:seo"),enableLayout:t.hasScope("site:layout"),enableZones:t.hasFeature("component")});this.listenTo(e,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),(e.hasChanged("name")||e.hasChanged("is_visible"))&&this.triggerSidebarMenu("refresh:menus")}.bind(this)),this.navigationController.showContent(n),this.setHeader({title:e.get("name")},getHeadersAction({addPageContent:e.get("page_id")})),n.start()}.bind(this)).fail(function(){this.triggerSidebarMenu("change:page",null),this.failHandler("Page introuvable")()}.bind(this))},showMenu:function(e){var t=new Menus,n=new t.model({menu_id:e});this.triggerSidebarMenu("change:page",null),n.fetch().done(function(){var e=new MenuView({model:n});this.listenTo(n,"change",function(e){e.hasChanged("name")&&(this.setBreadCrum({title:e.get("name")},!0),this.triggerSidebarMenu("refresh:menus"))}.bind(this)),this.listenTo(n,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms"),this.triggerSidebarMenu("refresh:menus")}),this.navigationController.showContent(e),this.setHeader({title:n.get("name")},getHeadersAction({addPageInMenu:n.get("menu_id")}))}.bind(this)).fail(this.failHandler("Menu introuvable"))},actionNewMenu:function(){var e=new Menus,t=new e.model({name:"Intitulé par défaut"});return t.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms/menus/"+t.get("menu_id")),this.triggerSidebarMenu("refresh:menus")}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showPage:function(e){var t=Backbone.Radio.channel("app").request("ctx:session"),n=new Page({page_id:e});this.triggerSidebarMenu("change:page",e),n.fetch({data:{extra_fields:"defaults"+(t.hasFeature("component")?",zones":"")}}).done(function(){if(this.addContext("page_id",n.get("page_id")),n.get("is_home"))return void this.navigationController.navigate("/cms");var e=new PageView({model:n,menus:new Menus,enableSeo:t.hasScope("site:seo"),enableLayout:t.hasScope("site:layout"),enableExtranet:t.hasFeature("extranet"),enableZones:t.hasFeature("component")});this.listenTo(n,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),(e.hasChanged("name")||e.hasChanged("is_visible")||e.hasChanged("page_type")||e.hasChanged("menu_id")||e.hasChanged("page_parent_id")||e.hasChanged("after_id")||e.hasChanged("before_id")||e.hasChanged("has_restrictions"))&&this.triggerSidebarMenu("refresh:menus")}.bind(this)),this.listenTo(n,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms"),this.triggerSidebarMenu("refresh:menus")}),this.listenTo(n,"sync",function(e){this.setHeaderActions(getHeadersAction({preview:"page"==e.get("page_type")&&e,addPageContent:"page"==e.get("page_type")&&e.get("page_id"),addPage:e.get("page_parent_id")>0&&e.get("page_parent_id"),addPageInMenu:0==e.get("page_parent_id")&&e.get("menu_id"),duplicatePage:"page"==e.get("page_type")&&e.get("page_id")}),!0)}),this.navigationController.showContent(e),this.setHeader({title:n.get("name")},getHeadersAction({preview:"page"==n.get("page_type")&&n,addPageContent:"page"==n.get("page_type")&&n.get("page_id"),addPage:n.get("page_parent_id")>0&&n.get("page_parent_id"),addPageInMenu:0==n.get("page_parent_id")&&n.get("menu_id"),duplicatePage:"page"==n.get("page_type")&&n.get("page_id")}))}.bind(this)).fail(this.failHandler("Page introuvable"))},actionNewPage:function(e){var t=new Page({name:"Intitulé par défaut",slug:Forms.tmpSlug(),is_visible:!1,page_type:"page"}),n=function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms/pages/"+t.get("page_id")),this.triggerSidebarMenu("refresh:menus")}.bind(this),i=function(e){this.navigationController.showErrorModal(e)}.bind(this);if(e.menu_id){var a=new Menus,o=new a.model({menu_id:e.menu_id});return o.fetch().then(function(){return t.set("menu_id",o.get("menu_id")),t.save().done(n).fail(i)},i)}var r=new Page({page_id:e.page_parent_id});return r.fetch().then(function(){return t.set("page_parent_id",r.get("page_id")),t.save().done(n).fail(i)},i)},actionNewInternalLink:function(e){var t=this,n=new Menus,i=new n.model({menu_id:e.menu_id});return i.fetch().then(function(){var e=new Page({is_visible:!1,page_type:"internal_link",target_type:"cms",target_page:"index",menu_id:i.get("menu_id")});return e.save().done(function(){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/pages/"+e.get("page_id")),t.triggerSidebarMenu("refresh:menus")}).fail(function(e){t.navigationController.showErrorModal(e)})},function(e){t.navigationController.showErrorModal(e)})},actionNewExternalLink:function(e){var t=this,n=new Menus,i=new n.model({menu_id:e.menu_id});return i.fetch().then(function(){var e=new Page({is_visible:!1,page_type:"external_link",url:"http://www.kiubi.com/",url_target:"_blank",menu_id:i.get("menu_id")});return e.save().done(function(){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/pages/"+e.get("page_id")),t.triggerSidebarMenu("refresh:menus")}).fail(function(e){t.navigationController.showErrorModal(e)})},function(e){t.navigationController.showErrorModal(e)})},actionNewSeparator:function(e){var t=this,n=new Menus,i=new n.model({menu_id:e.menu_id});return i.fetch().then(function(){var e=new Page({is_visible:!1,page_type:"separator",menu_id:i.get("menu_id")});return e.save().done(function(){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/pages/"+e.get("page_id")),t.triggerSidebarMenu("refresh:menus")}).fail(function(e){t.navigationController.showErrorModal(e)})},function(e){t.navigationController.showErrorModal(e)})},actionDuplicationPage:function(e){var t=this,n=new Page({page_id:e});n.duplicate().done(function(e){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/pages/"+e.get("page_id")),t.triggerSidebarMenu("refresh:menus")}).fail(function(e){t.navigationController.showErrorModal(e)})},showContent:function(e){var t,n=new((new Contents).model)({content_id:e});n.fetch({data:{extra_fields:"texts,navigation"}}).then(function(){return"page"==n.get("container_type")?(t=new Page({page_id:n.get("container_id")}),this.addContext("page_id",n.get("container_id")),this.triggerSidebarMenu("change:page",n.get("container_id"))):(t=new((new Symbols).model)({symbol_id:n.get("container_id")}),this.addContext("page_id",null),this.triggerSidebarMenu("change:symbol",n.get("container_id"))),t.fetch()}.bind(this)).done(function(){"post"==n.get("content")?this.showPost(e,n,t):"component"==n.get("content")?this.showComponent(e,n,t):(this.triggerSidebarMenu("change:page",null),this.failHandler("Contenu introuvable")())}.bind(this)).fail(function(){this.triggerSidebarMenu("change:page",null),this.failHandler("Contenu introuvable")()}.bind(this))},showPost:function(e,t,n){function i(e,t){return[{href:t.getBackURL(),title:t.getTitle()},{title:e.getLabel()}]}var a=t.getContentModel(),o=new PostView({model:a,content:t,container:n,menus:"page"==t.get("container_type")?new Menus:null,typesSource:a.getTypes()});this.listenTo(n,"sync",function(e){this.setBreadCrum(i(a,e),!0)}),this.listenTo(a,"change",function(e){(e.hasChanged("title")||e.hasChanged("subtitle"))&&this.setBreadCrum(i(e,n),!0)}.bind(this)),this.listenTo(t,"change",function(e){e.hasChanged("container_id")&&(this.addContext("page_id",e.get("container_id")),this.triggerSidebarMenu("change:page",e.get("container_id")))}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate(n.getBackURL())}),this.navigationController.showContent(o),this.setHeader(i(a,n),getHeadersAction({preview:"page"==t.get("container_type")&&n,addPageContent:"page"==t.get("container_type")?t.get("container_id"):null,addSymbolContent:"symbol"==t.get("container_type")?t.get("container_id"):null,duplicateContent:e}),null,getPostNavigation(t))},actionDuplicationContent:function(e){var t=this,n=new((new Contents).model)({content_id:e});n.duplicate().done(function(e){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/contents/"+e.get("content_id"))}).fail(function(e){t.navigationController.showErrorModal(e)})},showComponent:function(e,t,n){function i(e,t){return[{href:t.getBackURL(),title:t.getTitle()},{title:e.getLabel()}]}var a=t.getContentModel();a.getTypes({extra_fields:"fields,collection",filter:a.get("type")}).done(function(o){if(0===o.length)return this.notFound('Le type du composant "'+a.get("type")+'" est introuvable'),void this.setBreadCrum(i(a,n),!0);"page"==t.get("container_type")?(this.addContext("page_id",t.get("container_id")),this.triggerSidebarMenu("change:page",t.get("container_id"))):(this.addContext("page_id",null),this.triggerSidebarMenu("change:symbol",t.get("container_id")));var r=new Collection;r.content_id=e,this.listenTo(n,"sync",function(e){this.setBreadCrum(i(a,e),!0)}),this.listenTo(a,"change",function(e){e.hasChanged("fields")&&this.setBreadCrum(i(a,n),!0)}.bind(this)),this.listenTo(t,"change",function(e){e.hasChanged("container_id")&&(this.addContext("page_id",e.get("container_id")),this.triggerSidebarMenu("change:page",e.get("container_id")))}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate(n.getBackURL()),this.triggerSidebarMenu("refresh:menus")}),this.navigationController.showContent(new ComponentView({model:a,content:t,container:n,collection:r,type:o.length?o[0]:null,menus:"page"==t.get("container_type")?new Menus:null})),this.setHeader(i(a,n),getHeadersAction({preview:"page"==t.get("container_type")&&n,addPageContent:"page"==t.get("container_type")?t.get("container_id"):null,addSymbolContent:"symbol"==t.get("container_type")?t.get("container_id"):null,duplicateContent:e}),null,getPostNavigation(t))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showSymbol:function(e){var t=new((new Symbols).model)({symbol_id:e});t.fetch({data:{extra_fields:"zones"}}).done(function(){this.triggerSidebarMenu("change:symbol",e),this.setHeader({title:t.get("params").title},getHeadersAction({addSymbolContent:e,duplicateSymbol:e}),HeaderTabsSymbol(e)),this.listenTo(t,"change",function(e){e.hasChanged("params")&&(this.setBreadCrum({title:t.get("params").title}),this.triggerSidebarMenu("refresh:symbols"))}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms"),this.triggerSidebarMenu("refresh:symbols")});var n=new Contents;n.symbol_id=e;var i=new SymbolView({model:t,modelsSource:t.getModels({extra_fields:"fields,zones"}),contents:n});this.navigationController.showContent(i),i.start()}.bind(this)).fail(function(){this.triggerSidebarMenu("change:page",null),this.failHandler("Symbole introuvable")()}.bind(this))},showSymbolLayout:function(e){var t,n=new((new Symbols).model)({symbol_id:e});n.fetch().then(function(){return t=new Builder({layout_id:n.get("layout_id"),page:"symbol"}),t.save()}).done(function(){this.triggerSidebarMenu("change:symbol",e),this.setHeader({title:n.get("params").title},getHeadersAction({forceSave:!0,duplicateSymbol:e}),HeaderTabsSymbol(e));var i=new LayoutView({model:t,layout_id:n.get("layout_id")});this.navigationController.showContent(i)}.bind(this)).fail(this.failHandler("Mise en page introuvable"))},actionNewSymbol:function(){var e=new((new Symbols).model)({title:"Intitulé par défaut"});return e.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms/symbols/"+e.get("symbol_id")),this.triggerSidebarMenu("refresh:symbols")}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},actionDuplicationSymbol:function(e){var t=this,n=new((new Symbols).model)({symbol_id:e});n.duplicate().done(function(e){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/symbols/"+e.get("symbol_id")),t.triggerSidebarMenu("refresh:symbols")}).fail(function(e){t.navigationController.showErrorModal(e)})},actionPreview:function(e){window.open(e.previewLink)},showPageAdd:function(e){var t=Backbone.Radio.channel("app").request("ctx:session"),n=new PageAddModalView({menu_id:e,enableSymbol:t.hasFeature("component")});this.listenTo(n,"select:extLink",this.actionNewExternalLink),this.listenTo(n,"select:intLink",this.actionNewInternalLink),this.listenTo(n,"select:page",this.actionNewPage),this.listenTo(n,"select:separator",this.actionNewSeparator),this.listenTo(n,"select:menu",this.actionNewMenu),this.listenTo(n,"select:symbol",this.actionNewSymbol),this.navigationController.showInModal(n,{title:"Ajouter un élément",modalClass:"modal-pagetype-add"})},showContentAdd:function(e){e=e||{};var t=Backbone.Radio.channel("app").request("ctx:session"),n=new ContentAddModalView({container_type:e.container_type,enableComponent:t.hasFeature("component")}),i=function(e){this.navigationController.showErrorModal(e)}.bind(this),a=new((new Contents).model)({is_visible:!1,container_id:e.container_id,container_type:e.container_type});this.listenTo(n,"select:post",function(e){a.set({content:"post",type:e.type}),a.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms/contents/"+a.get("content_id"))}.bind(this)).fail(i)}),this.listenTo(n,"select:component",function(e){a.set({content:"component",type:e.type}),a.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms/contents/"+a.get("content_id"))}.bind(this)).fail(i)}),this.listenTo(n,"select:symbol",function(e){a.set({content:"symbol",symbol_id:e.symbol_id,is_visible:!0}),a.save().done(function(){if(this.navigationController.hideModal(),this.navigationController.getPath().match(/^\/cms\/contents\//)){var e="/cms/"+a.get("container_type")+"s/"+a.get("container_id");this.navigationController.navigate(e)}else this.navigationController.triggerContent("add:symbol")}.bind(this)).fail(i)}),this.navigationController.showInModal(n,{title:"Ajouter un contenu",modalDialogClass:"modal-sm",modalBodyClass:"p-0"})},showPosts:function(e){var t=this.parseQueryString(e,{term:null});this.triggerSidebarMenu("change:page",null);var n=new PostsView({collection:new Posts,filters:t});this.navigationController.showContent(n),n.start(),this.setHeader({title:"Recherche"})}});module.exports=Router.extend({controller:new CMSController,appRoutes:{cms:"showIndex","cms/menus/:id":"showMenu","cms/pages/:id":"showPage","cms/contents/:id":"showContent","cms/posts":"showPosts","cms/symbols/:id":"showSymbol","cms/symbols/:id/layout":"showSymbolLayout"},onRoute:function(e){var t=Backbone.Radio.channel("app").request("ctx:session");if(!t.hasScope("site:cms"))return this.controller.navigationController.navigate("/"),!1;switch(this.controller.sidebarMenuService="cms",this.controller.sidebarMenu=SidebarMenuView,e){case"showSymbol":if(!t.hasFeature("component"))return this.controller.navigationController.navigate("/"),!1;break;case"showSymbolLayout":if(!t.hasScope("site:layout")||!t.hasFeature("component"))return this.controller.navigationController.navigate("/"),!1;this.controller.sidebarMenuService="layout",this.controller.sidebarMenu=SidebarMenuLayoutView}this.controller.showSidebarMenu()}});
},{"145":145,"146":146,"159":159,"161":161,"18":18,"34":34,"341":341,"343":343,"344":344,"345":345,"346":346,"347":347,"348":348,"373":373,"375":375,"376":376,"377":377,"378":378,"379":379,"380":380,"381":381,"382":382,"383":383,"608":608,"612":612,"undefined":undefined}],350:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><form data-role="part"><article class="post-article"><header class="post-header"><h1>Détail du composant</h1></header><div class="post-content"> ',_(type.fields).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <input class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'" value="'+(null==(__t=fields[e.field])?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'" rows="5">'+(null==(__t=fields[e.field])?"":_.escape(__t))+"</textarea></div> ";break;case"wysiwyg":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'" data-role="wysiwyg" rows="21">'+(null==(__t=fields[e.field])?"":_.escape(__t))+"</textarea></div> ";break;case"select":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <div class="row"><div class="col-6"><select id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=""!=fields[e.field]&&l.value==fields[e.field]||l.value==e["default"]?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.label)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div> ";break;case"image":case"file":__p+=' <div data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' </div><footer class="post-footer"></footer></article></form><article data-role="list"></article></div><div class="col-lg-4 col-12"><form data-role="part"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" type="radio" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+'><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" type="radio" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+'><label for="is_visible0" class="not-visible">Masqué</label></div></div> ',"page"==container&&(__p+=' <div class="form-group post-subcontent"><label>Page du composant</label><div data-role="page"></div></div> '),__p+=' </div><footer class="post-footer"></footer></article><article class="post-article"><div class="post-content"><div class=""><div class="form-group"><label>Type de composant</label><p class="mb-3">Détermine l\'affichage du composant dans une page et la nature de son contenu :</p><span class="text-dark"><span class="md-icon md-item-type md-composant"></span>'+(null==(__t=type_name)?"":_.escape(__t))+'</span></div></div></div><footer class="post-footer"></footer></article></form></div></div><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],351:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="cms_content_'+(null==(__t=content_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=content_id)?"":_.escape(__t))+'" type="checkbox"><label for="cms_content_'+(null==(__t=content_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=title)?"":_.escape(__t))+"</h4> ",__p+=is_visible?' <span class="md-icon md-item-type '+(null==(__t=classType)?"":_.escape(__t))+'"></span>'+(null==(__t=typeName)?"":_.escape(__t))+" ":' <span class="md-icon md-item-type '+(null==(__t=classType)?"":_.escape(__t))+' text-danger"></span><span class="text-danger">Masqué</span> ',__p+=" </div> ",post&&""!=post.group&&(__p+=' <div class="col-3"><span class="badge badge-secondary">'+(null==(__t=post.group)?"":_.escape(__t))+"</span></div> "),__p+=' <div class="col-auto"><div class="btn-group float-right"><a class="btn btn-primary" href="'+(null==(__t=linkEdit)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" class="dropdown-item" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],352:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="list-item-zone"> ',showTitle&&(__p+=' <span class="badge rounded-pill '+(null==(__t=is_allowed?"":"text-danger")?"":_.escape(__t))+'"><span class="md-icon md-zone mr-2"></span> ',__p+=is_allowed?" "+(null==(__t=zone)?"":_.escape(__t))+" ":" zone inconnue"+(null==(__t=zone?" ("+zone+")":"")?"":_.escape(__t))+" ",__p+=" </span> "),__p+=' </div><div data-role="list"></div>';return __p};
},{"undefined":undefined}],353:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><header class="post-header"><h1>Détail de la page d\'accueil</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé de la page tel qu\'il apparaîtra dans le menu"></div></div><footer class="post-footer"></footer></article><article data-role="list"></article><article data-role="seo"></article></div><div class="col-lg-4 col-12"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-success btn-lg btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],354:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_visible" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+'_is_visible1" value="1" type="radio"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+'_is_visible1" class="visible">Visible</label><input name="is_visible" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+'_is_visible0" value="0" type="radio" checked="checked"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+'_is_visible0" class="not-visible">Masqué</label></div></div> ',_(collection).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <input class="form-control" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="5" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'"></textarea></div> ';break;case"wysiwyg":__p+=' <div class="form-group"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="21" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'" data-role="wysiwyg"></textarea></div> ';break;case"select":__p+=' <div class="form-group"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <div class="row"><div class="col-6"><select id="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=l.value==e["default"]?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.label)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div> ";break;case"image":case"file":__p+=' <div data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' <div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" title="Ajouter un élément" data-role="action" data-action="show"><span class="page-add md-icon md-add-page"></span>Ajouter un élément</a></div>';return __p};
},{"undefined":undefined}],355:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col-auto"><input id="cms_item_'+(null==(__t=item_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=item_id)?"":_.escape(__t))+'" type="checkbox"><label for="cms_item_'+(null==(__t=item_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=label)?"":_.escape(__t))+'</h4><p class="item-detail"> ',__p+=is_visible?" &nbsp; ":' <span class="text-danger">Masqué</span> ',__p+=' </p></div><div class="col-auto"><div class="btn-group float-right"><a class="btn btn-primary" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" class="dropdown-item" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_visible" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+'_is_visible1" value="1" type="radio" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' ><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+'_is_visible1" class="visible">Visible</label><input name="is_visible" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+'_is_visible0" value="0" type="radio" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+'_is_visible0" class="not-visible">Masqué</label></div></div> ',_(collection).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <input class="form-control" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'" value="'+(null==(__t=fields[e.field])?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="5" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'">'+(null==(__t=fields[e.field])?"":_.escape(__t))+"</textarea></div> ";break;case"wysiwyg":__p+=' <div class="form-group"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="21" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'" data-role="wysiwyg">'+(null==(__t=fields[e.field])?"":_.escape(__t))+"</textarea></div> ";break;case"select":__p+=' <div class="form-group"><label for="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <div class="row"><div class="col-6"><select id="f_'+(null==(__t=item_id)?"":_.escape(__t))+"_"+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=l.value==fields[e.field]||""==fields[e.field]&&l.value==e["default"]?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.label)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div> ";break;case"image":case"file":__p+=' <div data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' <div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],356:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><p>Toutes les pages du site web sont organisées en menus. Kiubi vous permet de créer plusieurs menus qui peuvent contenir autant de pages que vous le désirez. Ces différents menus et les pages qu\'ils contiennent constituent l\'arborescence du site et permettront à l\'internaute de le parcourir.</p><div class="form-group"><label for="name">Intitulé du menu</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le menu"></div><div class="form-group"><label>Identifiant API</label><p class="form-control-static">'+(null==(__t=api_key)?"":_.escape(__t))+'</p></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"> ',is_main||(__p+=' <button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> '),__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],357:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article tab-content mt-3"><div class="post-content m-0 tab-pane show active" id="content-tab"> ',loading?__p+=' <div class="text-center list-item-empty"><div class="loader spinner-border text-muted" role="status"><span class="sr-only">Chargement...</span></div></div> ':(__p+=' <div class="list-group mb-4" data-role="post"><p>Billets ('+(null==(__t=post_types.length)?"":_.escape(__t))+")</p> ",0==post_types.length&&(__p+=' <span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Aucun type de billet disponible</span> '),__p+=" ",_.each(post_types,function(t){__p+=' <a href="#" class="list-group-item" data-id="'+(null==(__t=t.type)?"":_.escape(__t))+'"><span class="md-icon md-item-type md-billet"></span>'+(null==(__t=t.name)?"":_.escape(__t))+"</a> "}),__p+=" </div> ",enableComponent&&(__p+=' <div class="list-group" data-role="component"><p>Composants ('+(null==(__t=component_types.length)?"":_.escape(__t))+")</p> ",0==component_types.length&&(__p+=' <span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Aucun type de composant disponible</span> '),__p+=" ",_.each(component_types,function(t){__p+=' <a href="#" class="list-group-item" data-id="'+(null==(__t=t.type)?"":_.escape(__t))+'"><span class="md-icon md-item-type md-composant"></span>'+(null==(__t=t.name)?"":_.escape(__t))+"</a> "}),__p+=" </div> "),__p+=" "),__p+=" </div> ",enableComponent&&"page"==container_type&&(__p+=' <div class="post-content m-0 tab-pane" id="symbole-tab"> ',loading?__p+=' <div class="text-center list-item-empty"><div class="loader spinner-border text-muted" role="status"><span class="sr-only">Chargement...</span></div></div> ':(__p+=' <div class="list-group" data-role="symbol"><p>Symboles partagés par plusieurs pages ('+(null==(__t=symbols.length)?"":_.escape(__t))+")</p> ",0==symbols.length&&(__p+=' <span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Aucun symbole disponible</span> '),__p+=" ",_.each(symbols,function(t){__p+=' <a href="#" class="list-group-item" data-id="'+(null==(__t=t.symbol_id)?"":_.escape(__t))+'"><span class="md-icon md-item-type md-symbole"></span>'+(null==(__t=t.params.title)?"":_.escape(__t))+"</a> "}),__p+=" </div> "),__p+=" </div> "),__p+=' <footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],358:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><div class="row no-gutters"><div class="col-6 border-bottom border-right"><div class="card card-select" data-role="select-page"><div class="md-icon md-page"></div><div class="card-body"><h4>Contenu libre</h4><p>Une page de contenu modifiable</p></div></div></div><div class="col-6 border-bottom"><div class="card card-select" data-role="select-intlink"><div class="md-icon md-directions"></div><div class="card-body"><h4>Lien interne</h4><p>Un lien vers une page du site</p></div></div></div><div class="col-6 border-bottom border-right"><div class="card card-select" data-role="select-extlink"><div class="md-icon md-link"></div><div class="card-body"><h4>Lien externe</h4><p>Un lien vers une adresse web</p></div></div></div><div class="col-6 border-bottom"><div class="card card-select" data-role="select-separator"><div class="md-icon md-spacer"></div><div class="card-body"><h4>Séparateur</h4><p>Une séparation, sans lien ni contenu</p></div></div></div><div class="col-6 border-right"><div class="card card-select" data-role="select-menu"><div class="md-icon md-menu"></div><div class="card-body"><h4>Menu</h4><p>Une nouvelle arborescence de pages</p></div></div></div> ',enableSymbol&&(__p+=' <div class="col-6"><div class="card card-select" data-role="select-symbol"><div class="md-icon md-symbole"></div><div class="card-body"><h4>Symbole</h4><p>Un contenu et des widgets partagés</p></div></div></div> '),__p+=' </div><div class="w-100"></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],359:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><header class="post-header"><h1>Détail de la page</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé de la page tel qu\'il apparaîtra dans le menu"></div></div><footer class="post-footer"></footer></article><div data-role="detail"></div></div><div class="col-lg-4 col-12"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div> ',is_home||(__p+=' <div class="form-group post-subcontent"><label>Page parente</label><div data-role="parent"></div></div> '),__p+=' </div><footer class="post-footer"></footer></article> ',is_home||(__p+=' <article class="post-article"><div class="post-content"><div class=""><div class="form-group"><label>Type de page</label><p>Détermine l\'affichage de la page dans le menu et la nature de son contenu :</p><div class="row"><div class="col-12"><select name="page_type" data-style="selectify"><option '+(null==(__t="page"==page_type?'selected="selected"':"")?"":__t)+' data-tags="md-page" value="page">Page de contenu libre</option><option '+(null==(__t="lien_int"==page_type?'selected="selected"':"")?"":__t)+' data-tags="md-directions" value="internal_link">Lien vers une autre page</option><option '+(null==(__t="lien_ext"==page_type?'selected="selected"':"")?"":__t)+' data-tags="md-link" value="external_link">Lien vers une adresse web</option><option '+(null==(__t="separateur"==page_type?'selected="selected"':"")?"":__t)+' data-tags="md-spacer" value="separator">Séparateur, sans lien</option></select></div></div></div></div></div><footer class="post-footer"></footer></article> '),__p+=' <article data-role="layout"></article></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"> ',is_home||(__p+=' <button type="button" class="btn btn-lg btn-danger btn-delete" data-role="delete">Supprimer</button> '),__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],360:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Lien externe</h1></header><div class="post-content"><p>Un lien externe vous permet de faire un lien, depuis un menu, vers n\'importe quelle adresse web.</p><div class="row"><div class="col-8"><div class="form-group"><label class="required" for="url">Adresse du lien externe</label><input class="form-control" id="url" name="url" value="'+(null==(__t=url)?"":_.escape(__t))+'" placeholder="Adresse sous la forme https://www.adresse-internet.com/"></div></div><div class="col-4"><div class="form-group"><label>Fenêtre cible</label><select name="url_target" data-style="selectify"><option value="_self" '+(null==(__t="_self"==url_target?'selected="selected"':"")?"":__t)+' >Même fenêtre</option><option value="_blank" '+(null==(__t="_blank"==url_target?'selected="selected"':"")?"":__t)+' >Nouvelle fenêtre</option></select></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],361:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Lien interne</h1></header><div class="post-content"><p>Un lien interne vous permet de faire un lien, depuis un menu, vers une autre page du site Internet.</p><div class="row"><div class="col-4"><div class="form-group"><label>Vers quel service ?</label><div data-role="type"></div></div></div><div class="col-8"><div class="form-group"><label>Vers quelle page ?</label><div data-role="page"></div></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],362:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article data-role="list"></article> ',enableExtranet&&(__p+=' <article class="post-article"><header class="post-header"><h1>Droits d\'accès</h1></header><div class="post-content"><p>Restreindre l\'accès à cette page aux seuls <a href="/customers/groups">groupes</a> ou <a href="/customers">membres</a> autorisés.</p><div data-role="restrictions"></div></div><footer class="post-footer"></footer></article> '),__p+=' <article data-role="seo"></article>';return __p};
},{"undefined":undefined}],363:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="dropdown"><button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span data-role="label" class="fake-selected">'+(null==(__t=label)?"":_.escape(__t))+'</span><span class="caret"></span></button><ul class="dropdown-menu dropdown-control"> ',_.each(options,function(e){__p+=" ",e.is_selectable?(__p+=' <li data-value="'+(null==(__t=e.value)?"":_.escape(__t))+'" class="page-level-'+(null==(__t=e.indent)?"":__t)+" "+(null==(__t=e.value==selected?"active":"")?"":__t)+'"><a class="dropdown-item" data-role="selectabe" href="#">'+(null==(__t=e.label)?"":_.escape(__t)),e.is_positionnable&&(__p+='<span class="md-icon md-before page-position"></span><span class="md-icon md-after page-position"></span>'),__p+="</a></li> "):(__p+=' <li data-value="'+(null==(__t=e.value)?"":_.escape(__t))+'" class="page-level-'+(null==(__t=e.indent)?"":__t)+' "><span data-role="selectabe" class="dropdown-item disabled '+(null==(__t=e.value==selected?"active":"")?"":__t)+'">'+(null==(__t=e.label)?"":_.escape(__t)),e.is_positionnable&&(__p+='<span class="md-icon md-before page-position"></span><span class="md-icon md-after page-position"></span>'),__p+="</span></li> "),__p+=" "}),__p+=" </ul></div>";return __p};
},{"undefined":undefined}],364:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12 d-flex"><article data-role="type"></article></div><div class="col-lg-4 col-12"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Affichage</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div> ',"page"==container&&(__p+=' <div class="form-group post-subcontent"><label>Page du billet</label><div data-role="page"></div></div> '),__p+=' </div><footer class="post-footer"></footer></article><article class="post-article"><div class="post-content"><div class="form-group"><label for="group">Groupe du billet</label><p>Utilisé comme critère d\'affichage dans certains widgets pour organiser le contenu du site web :</p><input class="form-control" id="group" name="group" value="'+(null==(__t=group)?"":_.escape(__t))+'" placeholder="Colonne à droite, Slideshow, Pied de page..."></div><div class="form-group"><label>Groupes existants</label><div data-role="group"></div></div></div><footer class="post-footer"></footer></article></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],365:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Détail du billet</h1></header><div class="post-content"><div class="post-group"><div class="form-group"><p>Le type de billet détermine l\'apparence et le contenu du billet dans la page :</p><div class="row"><div class="col-6"><select id="type" name="type" data-style="selectify"> ',_(types).each(function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'" '+(null==(__t=e.type==type?'selected="selected"':"")?"":__t)+' data-tags="md-billet tags-color-'+(null==(__t=e.position)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div></div> ",fields&&0!=fields.length||(__p+=" <p><em>Pas d'information complémentaire...</em></p> "),__p+=" ",_(fields).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <input class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" value="'+(null==(__t=post.get(e.field))?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="5">'+(null==(__t=post.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"wysiwyg":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-role="wysiwyg" rows="21">'+(null==(__t=post.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"select":__p+=' <div class="form-group"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <div class="row"><div class="col-6"><select id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=l.value==post.get(e.field)?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div> ";break;case"image":case"file":__p+=' <div data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' </div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],366:[function(require,module,exports){
arguments[4][174][0].apply(exports,arguments)
},{"174":174,"undefined":undefined}],367:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="cms_post_'+(null==(__t=content_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=content_id)?"":_.escape(__t))+'" type="checkbox"><label for="cms_post_'+(null==(__t=content_id)?"":_.escape(__t))+'"></label></div> ',canMove&&(__p+=' <div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div> '),__p+=' <div class="col item-body"><h4>'+(null==(__t=label)?"":_.escape(__t))+"</h4> ",showType?(__p+=" ",__p+=is_visible?' <span class="md-icon md-item-type md-billet tags-color-'+(null==(__t=type_pos)?"":_.escape(__t))+'"></span>'+(null==(__t=type_name)?"":_.escape(__t))+" ":' <span class="md-icon md-item-type md-billet text-danger"></span><span class="text-danger">Masqué</span> ',__p+=" "):__p+=' <a href="'+(null==(__t=is_home?"/cms":"/cms/pages/"+page_id)?"":__t)+'">'+(null==(__t=page_name)?"":_.escape(__t))+"</a> ",__p+=' </div><div class="col-4">',group&&(__p+='<span class="badge badge-secondary">'+(null==(__t=group)?"":_.escape(__t))),__p+='</span></div><div class="col-auto"><div class="btn-group float-right"><a class="btn btn-primary" href="/cms/contents/'+(null==(__t=content_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" class="dropdown-item" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],368:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div data-role="menus"></div><div data-role="symbols"></div>';return __p};
},{"undefined":undefined}],369:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",_.each(items,function(e){__p+=' <h2 data-toggle="tooltip" title="Détail du menu"><a href="/cms/menus/'+(null==(__t=e.menu_id)?"":_.escape(__t))+'" class="text-truncate">'+(null==(__t=e.name)?"":_.escape(__t))+'</a></h2><a href="#" data-role="page-add" data-id="'+(null==(__t=e.menu_id)?"":_.escape(__t))+'" class="page-add md-icon md-add-page" title="Ajouter une page"></a> '+(null==(__t=renderMenu(e.menu_id))?"":__t)+" "}),__p+="";return __p};
},{"undefined":undefined}],370:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<h2>Symboles ("+(null==(__t=usage)?"":_.escape(__t))+"/"+(null==(__t=limit)?"":_.escape(__t))+')</h2><a href="#" data-role="page-add" class="page-add md-icon md-add-page" title="Nouveau symbole"></a><p>Modifiez le contenu et les widgets des symboles et ajoutez-les à une page</p><div data-role="tree"></div>';return __p};
},{"undefined":undefined}],371:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/site-web.html?#ajouter-un-symbole" class="md-icon md-help float-right" target="_blank"></a> Un symbole (son contenu, ses widgets, ses paramètres et son type) peut être <strong>partagé par plusieurs pages</strong>. Modifier le symbole le modifera sur toutes les pages dans lesquelles il a été ajouté.<span class="md-icon md-icon-outlined md-symbole icon-alert"></span></div><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><header class="post-header"><h1>Paramètres du symbole</h1></header><div class="post-content"><div class="form-group"><label class="required" for="title">Intitulé</label><input class="form-control" id="title" name="title" value="'+(null==(__t=params.title)?"":_.escape(__t))+'" placeholder="Intitulé du symbole tel qu\'il apparaîtra dans la console d\'administration"></div></div><footer class="post-footer"></footer></article><article data-role="list"></article></div><div class="col-lg-4 col-12"><div data-role="models"></div></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],372:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><div class="form-group"><label for="model">Type de symbole</label><p>Définie l\'apparence, le template et la nature du contenu du symbole :</p><select id="model" name="model" data-style="selectify"> ',_(models).each(function(e){__p+=' <option value="'+(null==(__t=e.id)?"":_.escape(__t))+'" '+(null==(__t=e.id==currentModel?'selected="selected"':"")?"":__t)+' data-tags="md-symbole '+(null==(__t=e.error?"text-danger":"")?"":_.escape(__t))+'">'+(null==(__t=e.error?"Type inconnu : ":"")?"":_.escape(__t))+" "+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div><footer class="post-footer"></footer></article> ',fields.length&&(__p+=' <article class="post-article post-article-aside"><div class="post-content"> ',_(fields).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group post-subcontent"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <input class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" value="'+(null==(__t=symbol[e.field])?"":_.escape(__t))+'" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group post-subcontent"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="5" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'">'+(null==(__t=symbol[e.field])?"":_.escape(__t))+"</textarea></div> ";break;case"wysiwyg":__p+=' <div class="form-group post-subcontent"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="21" placeholder="'+(null==(__t=e["default"])?"":_.escape(__t))+'" data-role="wysiwyg">'+(null==(__t=symbol[e.field])?"":_.escape(__t))+"</textarea></div> ";break;case"select":__p+=' <div class="form-group post-subcontent"><label for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</label> ",e.help&&(__p+="<p>"+(null==(__t=e.help)?"":_.escape(__t))+"</p>"),__p+=' <select id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=""!=symbol[e.field]&&l.value==symbol[e.field]||l.value==e["default"]?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.label)?"":_.escape(__t))+"</option> "}),__p+=" </select></div> ";break;case"image":case"file":__p+=' <div class="post-subcontent" data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' </div><footer class="post-footer"></footer></article> '),__p+="";return __p};
},{"undefined":undefined}],373:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Forms=require(608),_=require("underscore"),FormBehavior=require(27),WysiwygBehavior=require(28),RowActionsBehavior=require(31),SelectifyBehavior=require(26),FilePickerView=require(456),SelectView=require(139),ListView=require(128),NewRowView=Marionette.View.extend({template:require(354),className:"post-content post-list",behaviors:[RowActionsBehavior,WysiwygBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]'},type:null,initialize:function(e){this.mergeOptions(e,["type","content_id"])},templateContext:function(){return{item_id:"new",collection:this.type.collection}},onRender:function(){_.each(this.type.collection,function(e){if("image"==e.type||"file"==e.type){var i="filepicker-"+e.field;this.getRegion(i)||this.addRegion(i,'div[data-role="'+i+'"]'),this.showChildView(i,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,comment:e.help?e.help:null}))}}.bind(this))},onActionSave:function(){var e=Forms.extractFields(["is_visible"],this);e.fields=Forms.extractFields(_.reduce(this.type.collection,function(e,i){return e.push(i.field),e},[]),this,{autoCast:!1});var i=new this.collection.model;return i.set("content_id",this.content_id),i.save(e).done(function(){this.getUI("form").hide(),this.collection.add(i),this.$el.find("input[type=text]").val("")}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),RowView=Marionette.View.extend({template:require(355),className:"list-item",behaviors:[RowActionsBehavior,SelectifyBehavior,WysiwygBehavior],ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},initialize:function(e){this.mergeOptions(e,["model","type","content_id"])},templateContext:function(){return{collection:this.type.collection,label:this.model.getLabel()}},onRender:function(){_.each(this.type.collection,function(e){if("image"==e.type||"file"==e.type){var i="filepicker-"+e.field;this.getRegion(i)||this.addRegion(i,'div[data-role="'+i+'"]'),this.showChildView(i,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,value:this.model.get("fields")[e.field],comment:e.help?e.help:null}))}}.bind(this))},onActionDelete:function(){return this.model.destroy()},onActionSave:function(){var e=Forms.extractFields(["is_visible"],this);return e.fields=Forms.extractFields(_.reduce(this.type.collection,function(e,i){return e.push(i.field),e},[]),this,{autoCast:!1}),this.model.save(e,{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}});module.exports=Marionette.View.extend({template:require(350),className:"container container-large",service:"cms",behaviors:[FormBehavior,WysiwygBehavior],regions:{page:{el:'div[data-role="page"]',replaceElement:!0},list:{el:"article[data-role='list']",replaceElement:!0}},ui:{form:"form"},fields:["title"],type:null,initialize:function(e){this.mergeOptions(e,["model","content","container","collection","menus","type"])},templateContext:function(){return{type:this.type,is_visible:this.content.get("is_visible"),container:this.container.get("page_id")?"page":"symbol"}},onRender:function(){if(this.menus&&(this.showChildView("page",new SelectView({collection:this.menus,selected:this.container.get("page_id"),name:"page_id"})),this.menus.fetch({data:{extra_fields:"pages"}}),this.menus.selectPayloadFilter=function(e,i){return null!=i&&"page"==i.page_type||(e.is_group=!0),e}),this.type.has_collection){var e=new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,fixRelativeDragNDrop:!0,enableQuota:!0,childViewOptions:{type:this.type,content_id:this.model.get("content_id")},title:"Contenu de la collection",selection:[{title:"Afficher",callback:this.showItems.bind(this)},{title:"Masquer",callback:this.hideItems.bind(this)},{title:"Supprimer",callback:this.deleteItems.bind(this),confirm:!0}],scrollThreshold:920});this.showChildView("list",e),this.collection.fetch({data:{limit:24,extra_fields:"fields"}})}_.each(this.type.fields,function(e){if("image"==e.type||"file"==e.type){var i="filepicker-"+e.field;this.getRegion(i)||this.addRegion(i,'div[data-role="'+i+'"]'),this.showChildView(i,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,value:this.model.get("fields")[e.field],comment:e.help?e.help:null}))}}.bind(this))},showItems:function(e){return this.collection.bulkShow(e)},hideItems:function(e){return this.collection.bulkHide(e)},deleteItems:function(e){return this.collection.bulkDelete(e)},onChildviewSortChange:function(e){this.collection.reOrder(e.list)},onPageChange:function(e){this.container.clear({silent:!0}),this.container.set("page_id",e),this.container.fetch()},onSave:function(){this.type.has_collection&&this.getChildView("list")&&this.getChildView("list").getChildren().each(function(e){e.isEditing&&e.onActionSave()});var e=Forms.extractFields(["is_visible"],this,{selector:'form[data-role="part"]'});this.container.get("page_id")&&this.container.get("page_id")!=this.getChildView("page").selected&&(e.container_id=this.getChildView("page").selected,this.onPageChange(e.container_id));var i={},t=this.fields;return _.reduce(this.type.fields,function(e,i){return e.push(i.field),e},t),i.fields=Forms.extractFields(t,this,{selector:'form[data-role="part"]',autoCast:!1}),Backbone.$.when(this.content.save(e,{patch:!0,wait:!0}),this.model.save(i,{patch:!0,wait:!0}))},onDelete:function(){return this.content.destroy({wait:!0})}});
},{"128":128,"139":139,"26":26,"27":27,"28":28,"31":31,"350":350,"354":354,"355":355,"456":456,"608":608,"undefined":undefined}],374:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");require(611);var RowActionsBehavior=require(31),LoaderTpl=require(92),FilterBtnView=require(129),FilterSelectView=require(134),FilterSearchView=require(133),FilterInputView=require(131),FilterDropdownView=require(130),FilterIntervalView=require(132),filterCollection=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{id:null,title:"",type:"select",extraClassname:"",collectionPromise:null,canDelete:!1,value:null}})}),FiltersView=Marionette.CollectionView.extend({tagName:"span",childView:FilterSelectView,buildChildView:function(e,t,i){var n=_.extend({model:e},i);switch(e.get("type")){case"select":default:return new FilterSelectView(n);case"button":return new FilterBtnView(n);case"search":return new FilterSearchView(n);case"input":return new FilterInputView(n);case"dropdown":return new FilterDropdownView(n);case"interval":return new FilterIntervalView(n)}}}),Contents=require(343),Zone=Backbone.Model.extend({idAttribute:"zone",defaults:{zone:"",is_allowed:!1,contents:null,showTitle:!0}}),ZoneCollection=Backbone.Collection.extend({model:Zone}),cacheSortable,NoChildrenView=Marionette.View.extend({template:_.template('<span class="list-item-empty"><span class="md-icon md-empty mb-2"></span>Il n\'y a encore rien à afficher</span>')}),EmptyZoneView=Marionette.View.extend({template:_.template('<div class="zone-empty"><small>Créez puis glissez-déposez du contenu ici</small></div>')}),ContentRowView=Marionette.View.extend({template:require(351),className:"list-item sortable-item",behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},templateContext:function(){var e,t;switch(this.model.get("content")){case"post":e="md-billet",this.model.get("post")&&this.model.get("is_visible")&&(e+=" tags-color-"+this.model.get("post").type_position),t="/cms/contents/"+this.model.get("content_id");break;case"component":e="md-composant",t="/cms/contents/"+this.model.get("content_id");break;case"symbol":e="md-symbole",t="/cms/symbols/"+this.model.get("symbol").symbol_id}return{classType:e,linkEdit:t,typeName:this.model.getTypeName(),title:this.model.getTitle()}}}),ContentCollectionView=Marionette.CollectionView.extend({emptyView:EmptyZoneView,className:"sortable-content",proxy:null,onAddChild:function(e,t){t.model&&t.$el.attr("data-id",t.model.id)},initialize:function(e){this.mergeOptions(e,["proxy"])},onRender:function(){var e=0,t=this.proxy,i={handle:".btn-drag",axis:"y",connectWith:".contents-list .sortable-allowed div.ui-sortable",tolerance:"pointer",start:function(t,i){cacheSortable={content_id:Backbone.$(i.item).data("id"),zone:Backbone.$(this).data("zone"),zoneEl:Backbone.$(this),position:null},e=1!=Backbone.$(this).data("sortableFirst")?Backbone.$("#content").scrollTop():0,Backbone.$(this).data("sortableFirst",!0)},sort:function(t,i){e>0&&i.helper.css({top:i.position.top-e+"px"})},receive:function(e,t){cacheSortable.zone=Backbone.$(this).data("zone"),cacheSortable.zoneEl=Backbone.$(this)},stop:function(e,i){cacheSortable.position=Backbone.$(".sortable-item",cacheSortable.zoneEl).index(i.item),t.onContentMove(cacheSortable.content_id,cacheSortable.zone,cacheSortable.position)},change:function(t,i){e=0}};Backbone.$(this.el).sortable(i)}}),ZoneView=Marionette.View.extend({template:require(352),className:"post-content post-list",regions:{list:{el:"div[data-role='list']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e)},onRender:function(){this.model.get("is_allowed")?(this.$el.removeClass("sortable-denied"),this.$el.addClass("sortable-allowed")):(this.$el.removeClass("sortable-allowed"),this.$el.addClass("sortable-denied"));var e=new ContentCollectionView({collection:this.model.get("contents"),childView:ContentRowView,proxy:this.getOption("proxy")});this.showChildView("list",e),e.$el.data("zone",this.model.get("zone"))}}),ZoneCollectionView=Marionette.CollectionView.extend({emptyView:NoChildrenView,childView:ZoneView,className:"contents-list",buildChildView:function(e,t,i){var n=_.extend({model:e},i),o=new t(n);return o}});module.exports=Marionette.View.extend({template:require(85),regions:{list:{el:"div[data-role='list']",replaceElement:!0},detail:{el:"div[data-role='detail']",replaceElement:!0},filters:{el:"span[data-role='filters']",replaceElement:!0},xtra:{el:"span[data-role='xtra']",replaceElement:!0},"new":{el:"div[data-role='new']",replaceElement:!0}},title:"Liste",filters:[],xtra:[],selection:[],lock:!1,newRowView:null,ui:{loading:"div[data-role='loading']",select:"#selection_all",action:'[data-role="action"]',"action-main":'[data-role="bulk-action"]',"row-select":'input[name="selection"]',"select-all":'[data-role="select-all"]',counter:'[data-role="counter"]'},events:{"click @ui.select":"selectAll","click @ui.action":"onAction","hidden.bs.dropdown .btn-group":"onHiddenDropDown","click @ui.row-select":"selectRow"},zones:null,enableZones:!0,initialize:function(e){this.mergeOptions(e,["collection","zoneList","enableZones"]),this.listenTo(this.getOption("collection"),"request",this.onCollectionRequest),this.listenTo(this.getOption("collection"),"sync",this.onCollectionSync),this.listenTo(this.getOption("collection"),"sync update",this.selectRow),this.zones=new ZoneCollection,this.enableZones?this.zoneList&&_.each(this.zoneList,function(e){this.addZone(e.id,!0)}.bind(this)):this.addZone("",!0),this.listenTo(this.collection,"remove",function(e){this.zones.each(function(t){t.get("contents").remove(e)})}.bind(this)),this.listenTo(this.collection,"sync",function(e,t){e.model&&(_.each(t.data,function(e){this.addContent(this.collection.get(e.content_id))}.bind(this)),this.collection.fetchNext())})},templateContext:function(){return{title:this.getOption("title"),selection:this.getOption("selection"),extraClassname:this.getOption("extraClassname")}},getChildren:function(){return this.getChildView("list").children},resetZones:function(e){this.zones.reset(),this.enableZones?e&&_.each(e,function(e){this.addZone(e.id,!0)}.bind(this)):this.addZone("",!0),this.collection.each(function(e){this.addContent(e)}.bind(this))},showFilter:function(e){var t=this.getChildView("filters");if(t){var i=t.collection.get("add");i&&this.triggerMethod("filter:change",{model:i,value:e})}},setCounterText:function(e){this.getUI("counter").text(e)},onRender:function(){var e=_.extend({proxy:this,childRowView:this.rowView},this.getOption("childViewOptions"));if(this.showChildView("list",new ZoneCollectionView({collection:this.zones,childViewOptions:e})),this.getOption("filters").length>0&&this.showChildView("filters",new FiltersView({collection:new filterCollection(this.getOption("filters")),childViewOptions:{proxy:this}})),this.getOption("xtra").length>0&&this.showChildView("xtra",new FiltersView({collection:new filterCollection(this.getOption("xtra")),childViewOptions:{proxy:this}})),null!==this.newRowView){var t=_.extend({proxy:this,collection:this.getOption("collection")},this.getOption("childViewOptions"));this.showChildView("new",new this.newRowView(t))}this.getOption("detailView")&&this.showChildView("detail",this.getOption("detailView"))},addZone:function(e,t){return this.zones.add({zone:e,is_allowed:t,contents:new Contents,showTitle:this.enableZones})},addContent:function(e){var t;this.enableZones?(t=this.zones.find({zone:e.get("zone")}),t||(t=this.addZone(e.get("zone"),!1))):t=this.zones.at(0),t.get("contents").add(e)},onContentMove:function(e,t,i){var n=this.zones.find({zone:t}),o=null;this.zones.each(function(t){o||(o=t.get("contents").find({content_id:e}),o&&(t.get("contents").remove(o),n.get("contents").add(o,{at:i})))}),this.collection.reOrder(t,n.get("contents").reduce(function(e,t){return e.push(t.get("content_id")),e},[]))},onCollectionRequest:function(e,t,i){e.models&&this.getUI("loading").show()},onCollectionSync:function(e){this.getUI("loading").hide()},addChildView:function(e,t){return this.getChildView("list").addChildView(e,t)},selectRow:function(){var e=Backbone.$('input[name="selection"]:checked',this.el).length,t=Backbone.$('input[name="selection"]',this.el).length;e>0?(this.getUI("action-main").parent().parent().removeClass("d-none"),this.getUI("select-all").addClass("d-none"),this.setCounterText(" : "+e+(e>1?" sélectionnés":" sélectionné"))):(this.getUI("action-main").parent().parent().addClass("d-none"),this.getUI("select-all").removeClass("d-none"),this.setCounterText("")),0==t||0==e?(this.getUI("select").prop("checked",!1),this.getUI("select").removeClass("partiel")):t==e?(this.getUI("select").prop("checked",!0),this.getUI("select").removeClass("partiel")):(this.getUI("select").prop("checked",!1),this.getUI("select").addClass("partiel"))},selectAll:function(e){Backbone.$('input[name="selection"]',this.el).prop("checked",e.currentTarget.checked).change(),this.selectRow()},onAction:function(e){var t=Backbone.$(e.currentTarget),i=t.data("id");if(!(i>=this.getOption("selection").length)&&this.getOption("selection")[i]&&this.getOption("selection")[i].callback){var n=this.getOption("selection")[i];if(n.confirm&&!t.parent().hasClass("confirm-warning"))return t.parent().addClass("confirm-warning"),t.data("title",t.text()),t.text("Êtes-vous sûr ?"),e.preventDefault(),!1;var o=Backbone.$('input[name="selection"]:checked',this.getChildView("list").el).map(function(e,t){return t.value});if(!this.lock){if(this.lock=!0,0==o.length)return void(this.lock=!1);var l=n.callback(o);if(!l)return n.confirm&&(t.parent().removeClass("confirm-warning"),t.text(t.data("title"))),void(this.lock=!1);var s=this.getUI("action-main").find("span:first-of-type");s.data("title",s.text()),s.addClass("btn-load btn-load-inverse"),s.html(LoaderTpl()),l.then(function(){this.lock=!1,n.confirm&&(t.parent().removeClass("confirm-warning"),t.text(t.data("title"))),s.text(s.data("title")),s.removeClass("btn-load btn-load-inverse"),this.selectRow()}.bind(this))}}},onHiddenDropDown:function(e){Backbone.$(".dropdown-menu a",e.currentTarget).each(function(e,t){t=Backbone.$(t),t.parent().hasClass("confirm-warning")&&(t.text(t.data("title")),t.parent().removeClass("confirm-warning"))})},onChildviewSortChange:function(e){e.list=[],this.getChildView("list").$el.children().each(function(t,i){e.list.push(Backbone.$(i).data("id"))}),this.triggerMethod("sort:change",e)}});
},{"129":129,"130":130,"131":131,"132":132,"133":133,"134":134,"31":31,"343":343,"351":351,"352":352,"611":611,"85":85,"92":92,"undefined":undefined}],375:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606),FormBehavior=require(27),RowActionsBehavior=require(31),LayoutSelectorView=require(160),SeoView=require(141),Forms=require(608),Contents=require(343),ContentsView=require(374);module.exports=Marionette.View.extend({template:require(353),className:"container container-large",service:"cms",behaviors:[FormBehavior],regions:{list:{el:"article[data-role='list']",replaceElement:!0},layout:{el:"article[data-role='layout']",replaceElement:!0},seo:{el:"article[data-role='seo']",replaceElement:!0}},fields:["name","is_visible","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["model","contents"]),this.getOption("enableLayout")&&(this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"cms-home",apply:this.model.get("page_id"),applyName:this.model.get("name")}))},onRender:function(){this.contents=new Contents,this.contents.page_id=this.model.get("page_id"),this.showChildView("list",new ContentsView({zoneList:this.model.get("zones"),collection:this.contents,enableZones:this.getOption("enableZones"),title:"Contenu de la page",selection:[{title:"Afficher",callback:this.showContents.bind(this)},{title:"Masquer",callback:this.hideContents.bind(this)},{title:"Supprimer",callback:this.deleteContents.bind(this),confirm:!0}],scrollThreshold:920,xtra:[{id:"export",extraClassname:"md-export",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{value:"export-page",label:"Exporter les contenus",selected:!1}])}]})),this.getOption("enableLayout")&&this.showChildView("layout",this.layoutSelector),this.getOption("enableSeo")&&this.showChildView("seo",new SeoView({model:this.model}))},start:function(){this.contents.fetch({data:{limit:40}})},showContents:function(e){return this.contents.bulkShow(e)},hideContents:function(e){return this.contents.bulkHide(e)},deleteContents:function(e){return this.contents.bulkDelete(e)},onChildviewChangeLayout:function(e,t){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0}).done(function(){this.getChildView("list").resetZones(t.get("model").zones)}.bind(this))},onChildviewSortChange:function(e){this.contents.reOrder(this.model.get("page_id"),e.list)},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onExportFilterChange:function(e){if(e.view){var t=e.view;if("export-page"==e.value){if(t.collection.length>1)return;t.overrideExtraClassname("md-loading"),t.render();var i={container_id:this.model.get("page_id"),container_type:"page"};this.contents.exportAll(i).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>2;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>2;)t.collection.pop()}},onAddSymbol:function(){this.start()},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"141":141,"160":160,"27":27,"31":31,"343":343,"353":353,"374":374,"606":606,"608":608,"undefined":undefined}],376:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(356),className:"container",service:"cms",behaviors:[FormBehavior],fields:["name"],initialize:function(e){this.mergeOptions(e,["model"])},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"27":27,"356":356,"608":608,"undefined":undefined}],377:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Posts=require(347),Components=require(342),Symbols=require(348);module.exports=Marionette.View.extend({template:require(357),menu_id:null,ui:{"select-post":'[data-role="post"] a',"select-component":'[data-role="component"] a',"select-symbol":'[data-role="symbol"] a'},events:{"click @ui.select-post":function(e){this.trigger("select:post",{type:Backbone.$(e.currentTarget).data("id")})},"click @ui.select-component":function(e){this.trigger("select:component",{type:Backbone.$(e.currentTarget).data("id")})},"click @ui.select-symbol":function(e){this.trigger("select:symbol",{symbol_id:Backbone.$(e.currentTarget).data("id")})}},post_types:null,component_types:null,symbol_models:null,initialize:function(e){this.mergeOptions(e,["enableComponent"]);var t=new((new Posts).model),n=new((new Components).model);this.post_types=null,this.component_types=null,this.symbols=new Symbols,this.loading=!0,Backbone.$.when(t.getTypes(),this.enableComponent?n.getTypes():null,this.enableComponent&&"page"==this.getOption("container_type")?this.symbols.fetch():null).done(function(e,t){this.post_types=e,this.component_types=t,this.loading=!1,this.render()}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal("Echec du chargement des types de contenus")}.bind(this))},templateContext:function(){return{loading:this.loading,container_type:this.getOption("container_type")?this.getOption("container_type"):"page",post_types:this.post_types,component_types:this.component_types,symbols:this.enableComponent?this.symbols.toJSON():null,enableComponent:this.enableComponent}},getTabs:function(){return this.enableComponent&&"page"==this.getOption("container_type")?[{id:"content-tab",title:"Contenus",icon:"md-content"},{id:"symbole-tab",title:"Symboles",icon:"md-symbole"}]:null}});
},{"342":342,"347":347,"348":348,"357":357,"undefined":undefined}],378:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(358),menu_id:null,ui:{"select-page":'div[data-role="select-page"]',"select-intlink":'div[data-role="select-intlink"]',"select-extlink":'div[data-role="select-extlink"]',"select-separator":'div[data-role="select-separator"]',"select-menu":'div[data-role="select-menu"]',"select-symbol":'div[data-role="select-symbol"]'},events:{"click @ui.select-page":function(){this.trigger("select:page",{menu_id:this.getOption("menu_id")})},"click @ui.select-intlink":function(){this.trigger("select:intLink",{menu_id:this.getOption("menu_id")})},"click @ui.select-extlink":function(){this.trigger("select:extLink",{menu_id:this.getOption("menu_id")})},"click @ui.select-separator":function(){this.trigger("select:separator",{menu_id:this.getOption("menu_id")})},"click @ui.select-menu":function(){this.trigger("select:menu")},"click @ui.select-symbol":function(){this.trigger("select:symbol")}},initialize:function(e){this.mergeOptions(e)},templateContext:function(){return{enableSymbol:this.getOption("enableSymbol")===!0}}});
},{"358":358,"undefined":undefined}],379:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),CollectionUtils=require(606),LayoutSelectorView=require(160),SelectView=require(139),FormBehavior=require(27),SaveBehavior=require(24),Forms=require(608),RestrictionsView=require(414),SeoView=require(141),Contents=require(343),Restrictions=require(390),ContentsView=require(374),PageView=Marionette.View.extend({template:require(362),regions:{list:{el:"article[data-role='list']",replaceElement:!0},restrictions:{el:"div[data-role='restrictions']",replaceElement:!0},seo:{el:"article[data-role='seo']",replaceElement:!0}},fields:["slug","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["model","contents"])},templateContext:function(){return{enableExtranet:this.getOption("enableExtranet")}},onRender:function(){this.showChildView("list",new ContentsView({zoneList:this.model.get("zones")||[],collection:this.contents,enableZones:this.getOption("enableZones"),title:"Contenu de la page",selection:[{title:"Afficher",callback:this.showContents.bind(this)},{title:"Masquer",callback:this.hideContents.bind(this)},{title:"Supprimer",callback:this.deleteContents.bind(this),confirm:!0}],scrollThreshold:920,xtra:[{id:"export",extraClassname:"md-export",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{value:"export-page",label:"Exporter les contenus",selected:!1}])}]})),this.getOption("enableExtranet")&&this.showChildView("restrictions",new RestrictionsView({restrictions:this.model.get("restrictions")})),this.getOption("enableSeo")&&this.showChildView("seo",new SeoView({model:this.model}))},start:function(){this.contents.fetch({data:{limit:40}})},showContents:function(e){return this.contents.bulkShow(e)},hideContents:function(e){return this.contents.bulkHide(e)},deleteContents:function(e){return this.contents.bulkDelete(e)},onAddSymbol:function(){this.start()},onChildviewSortChange:function(e){this.contents.reOrder(this.model.get("page_id"),e.list)},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onExportFilterChange:function(e){if(e.view){var t=e.view;if("export-page"==e.value){if(t.collection.length>2)return;t.overrideExtraClassname("md-loading"),t.render();var i={container_id:this.model.get("page_id"),container_type:"page"};this.contents.exportAll(i).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>2;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>2;)t.collection.pop()}},getRestrictions:function(){return this.getChildView("restrictions").getRestrictions()}}),InternalLinkView=Marionette.View.extend({template:require(361),regions:{type:{el:'div[data-role="type"]',replaceElement:!0},page:{el:'div[data-role="page"]',replaceElement:!0}},fields:["target_type","target_page"],onRender:function(){this.showChildView("page",new SelectView({selected:this.model.get("target_page")+"@@"+this.model.get("target_key"),name:"target_page",direction:"up"}));var e=this.model.getInternalLinkTypes(this.model.get("target_type")).done(function(){this.changeType(this.model.get("target_type"))}.bind(this));this.showChildView("type",new SelectView({collectionPromise:e,name:"target_type",direction:"up"}))},onChildviewChange:function(e,t){"target_type"==t&&this.changeType(e)},changeType:function(e){var t=this;this.getChildView("page").loadCollection(this.model.getInternalLinkTargets(e).then(function(i){"cms"==e&&(i=_.filter(i,function(e){return!e.is_linkable||e.target_key!=t.model.get("page_id")}));var n=_.map(i,function(t){var i=t.is_linkable?t.target_page+"@@"+t.target_key:null,n=0;return t.depth&&t.depth>0&&(n+=t.depth),{value:i,label:t.name,indent:"cms"==e?n:null,is_group:!t.is_linkable}});return new CollectionUtils.SelectCollection(n)},function(){return[]}))}}),ExternalLinkView=Marionette.View.extend({template:require(360),fields:["url","url_target"]}),ParentView=Marionette.View.extend({template:require(363),behaviors:[SaveBehavior],ui:{drop:".dropdown",actionBtn:"li a",posBtn:"li .md-before, li .md-after",label:'[data-role="label"]'},events:{"click @ui.actionBtn":function(e){var t=Backbone.$(e.currentTarget).parent().data("value"),i={parent_id:t,after_id:null,before_id:null};this.getUI("label").text(this.pageTitle(t)),this.triggerMethod("select:parent",i),this.triggerMethod("field:change")},"click @ui.posBtn":function(e){e.preventDefault();var t=Backbone.$(e.currentTarget).parent().parent().data("value"),i={parent_id:null,after_id:null,before_id:null},n=Backbone.$(e.target);return n.hasClass("md-before")?i.before_id=t:i.after_id=t,this.getUI("label").text(this.parentTitle(t)),this.triggerMethod("select:parent",i),this.getUI("drop").removeClass("show"),this.getUI("drop").children(".dropdown-menu").removeClass("show"),!1}},selected:null,initialize:function(e){this.mergeOptions(e,["collection","selected","current"]),this.collection.fetch({data:{extra_fields:"pages"}}),this.listenTo(this.collection,"sync",this.render)},pageTitle:function(e){if(0==this.collection.length)return"";if("m"==e.toString().match(/^m/g)){e=parseInt(e.substring(1));var t=this.collection.findWhere({menu_id:e});return t?t.get("name"):"Menu "+e}e=parseInt(e);var i=null;return _.each(this.collection.toJSON(),function(t){t.pages&&null==i&&_.each(t.pages.toJSON(),function(n){n.page_id==e&&(i=t.name+" : "+n.name)})}),i},parentTitle:function(e){if(0==this.collection.length)return"";e=parseInt(e);var t=null,i=this;return _.each(this.collection.toJSON(),function(n){n.pages&&null==t&&_.each(n.pages.toJSON(),function(n){n.page_id==e&&(t=i.pageTitle(n.page_parent_id>0?n.page_parent_id:"m"+n.menu_id))})}),t},templateContext:function(){return{label:this.pageTitle(this.selected),selected:this.selected,options:this.collection.parentList(this.current)}}});module.exports=Marionette.View.extend({template:require(359),className:"container container-large",service:"cms",behaviors:[FormBehavior],fields:["name","is_visible","page_type"],regions:{detail:"div[data-role='detail']",parent:{el:"div[data-role='parent']",replaceElement:!0},layout:{el:"article[data-role='layout']",replaceElement:!0}},ui:{type:"select[name='page_type']"},events:{"change @ui.type":"changeType"},parent:null,initialize:function(e){this.mergeOptions(e,["model","menus"])},getFields:function(){return this.getChildView("detail")&&this.getChildView("detail").fields?this.fields.concat(this.getChildView("detail").fields):this.fields},changeType:function(){this.getUI("type").val()!=this.model.get("page_type")&&this.triggerMethod("simpleForm:save")},onChildviewSelectParent:function(e){this.parent=e},onRender:function(){var e;switch(this.model.get("page_type")){case"page":var t=new Contents;t.page_id=this.model.get("page_id"),e=new PageView({model:this.model,contents:t,enableSeo:this.getOption("enableSeo"),enableExtranet:this.getOption("enableExtranet"),enableZones:this.getOption("enableZones")}),e.start(),this.getOption("enableLayout")&&this.showChildView("layout",new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"cms-page",apply:this.model.get("page_id"),applyName:this.model.get("name")}));break;case"lien_int":e=new InternalLinkView({model:this.model});break;case"lien_ext":e=new ExternalLinkView({model:this.model})}if(e&&this.showChildView("detail",e),!this.model.get("is_home")){var i=0==this.model.get("page_parent_id")?"m"+this.model.get("menu_id"):this.model.get("page_parent_id");this.showChildView("parent",new ParentView({collection:this.menus,selected:i,current:this.model.get("page_id")}))}},onChildviewChangeLayout:function(e,t){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0}).done(function(){"page"===this.model.get("page_type")&&this.getChildView("detail")&&this.getChildView("detail").getChildView("list").resetZones(t.get("model").zones)}.bind(this))},onAddSymbol:function(){"page"==this.model.get("page_type")&&this.getChildView("detail")&&this.getChildView("detail").onAddSymbol()},onSave:function(){var e;if("page"==this.model.get("page_type")&&this.getChildView("detail")&&this.getOption("enableExtranet")){var t=this.getChildView("detail").getRestrictions(),i=new Restrictions;i.setType("cms/pages",this.model.get("page_id")),i.set("customer_id",t.customers),i.set("group_id",t.groups),e=i.save()}else e=Backbone.$.Deferred().resolve();var n=Forms.extractFields(this.getFields(),this);if(this.parent&&(this.parent.after_id?n.after_id=this.parent.after_id:this.parent.before_id?n.before_id=this.parent.before_id:"m"==this.parent.parent_id.toString().match(/^m/g)?n.menu_id=this.parent.parent_id.substring(1):n.page_parent_id=this.parent.parent_id),n.target_page){var l=n.target_page.split("@@",2);n.target_page=l[0],n.target_key=l[1]}"page"==this.model.get("page_type")&&this.getOption("enableSeo")&&Forms.isTmpSlug(n.slug)&&(n.slug=n.name);var a=this;return e.then(function(){return a.model.save(n,{patch:!0,wait:!0})}).done(function(){a.model.fetch().done(function(){a.render()})})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"139":139,"141":141,"160":160,"24":24,"27":27,"343":343,"359":359,"360":360,"361":361,"362":362,"363":363,"374":374,"390":390,"414":414,"606":606,"608":608,"undefined":undefined}],380:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SelectView=require(139),FilePickerView=require(456),FormBehavior=require(27),WysiwygBehavior=require(28),SelectifyBehavior=require(26),Forms=require(608),SaveBehavior=require(24),TypeSelectorView=Marionette.View.extend({template:require(365),className:"post-article w-100",tagName:"article",behaviors:[WysiwygBehavior,SelectifyBehavior,SaveBehavior],ui:{select:"select[name='type']"},events:{"change @ui.select":function(){this.selectType(this.getUI("select").val(),!0)}},types:[],type:"",fields:[],backupFields:["title","subtitle","text1","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15"],initialize:function(e){this.mergeOptions(e,["type","typesSource","post","formEl"]),this.typesSource.done(function(e){this.types=e,this.selectType(this.type,!1)}.bind(this))},templateContext:function(){return{type:this.type,types:this.types,post:this.post,fields:this.fields}},selectType:function(e,t){this.type=e,t&&(this.triggerMethod("wysiwyg:save"),this.post.set(Forms.extractFormFields(this.backupFields,this.formEl)));var i=[],s=_.find(this.types,function(e){return e.type==this.type}.bind(this));s&&s.fields&&(i=s.fields),_.each(this.getRegions(),function(e,t){"filepicker-"==t.substring(0,11)&&this.removeRegion(t)}.bind(this)),_.each(i,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.getRegion(t)||this.addRegion(t,'div[data-role="'+t+'"]')}}.bind(this)),this.fields=i,this.render()},onRender:function(){_.each(this.fields,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.showChildView(t,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,value:this.post.get(e.field),comment:e.help?e.help:null}))}}.bind(this))}});module.exports=Marionette.View.extend({template:require(364),className:"container container-large",service:"cms",behaviors:[FormBehavior],fields:["is_visible"],postFields:["title","subtitle","group","type","text1","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15"],regions:{page:{el:'div[data-role="page"]',replaceElement:!0},type:{el:"article[data-role='type']",replaceElement:!0},group:{el:'div[data-role="group"]',replaceElement:!0}},ui:{form:"form"},menus:null,container:null,initialize:function(e){this.mergeOptions(e,["model","content","container","menus","typesSource"])},templateContext:function(){return{is_visible:this.content.get("is_visible"),container:this.container.get("page_id")?"page":"symbol"}},onRender:function(){var e=new TypeSelectorView({type:this.model.get("type"),post:this.model,typesSource:this.typesSource,formEl:this.getUI("form")});this.showChildView("type",e),this.menus&&(this.showChildView("page",new SelectView({collection:this.menus,selected:this.container.get("page_id"),name:"page_id"})),this.menus.fetch({data:{extra_fields:"pages"}}),this.menus.selectPayloadFilter=function(e,t){return null!=t&&"page"==t.page_type||(e.is_group=!0),e}),this.showChildView("group",new SelectView({collectionPromise:this.model.getGroups(),emptyLabel:"-- Sélectionner un groupe --",name:"group_list",direction:"up"}))},onChildviewChange:function(e,t){"group_list"==t&&this.selectGroup(e)},onPageChange:function(e){this.container.clear({silent:!0}),this.container.set("page_id",e),this.container.fetch()},selectGroup:function(e){""!==e&&Backbone.$('input[name="group"]').val(e)},onSave:function(){var e=Forms.extractFields(this.fields,this);return this.container.get("page_id")&&this.container.get("page_id")!=this.getChildView("page").selected&&(e.container_id=this.getChildView("page").selected,this.onPageChange(e.container_id)),Backbone.$.when(this.content.save(e,{patch:!0,wait:!0}),this.model.save(Forms.extractFields(this.postFields,this),{patch:!0,wait:!0}))},onDelete:function(){return this.content.destroy({wait:!0})}});
},{"139":139,"24":24,"26":26,"27":27,"28":28,"364":364,"365":365,"456":456,"608":608,"undefined":undefined}],381:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(367),className:"list-item",behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},templateContext:function(){return{label:this.model.getLabel(),showType:!1,canMove:!1}}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(366),className:"container-fluid",service:"cms",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},filters:null,initialize:function(e){this.mergeOptions(e,["collection"]),this.filters={term:this.getOption("filters")&&this.getOption("filters").term?this.getOption("filters").term:null}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des billets",selection:[{title:"Afficher",callback:this.showPosts.bind(this)},{title:"Masquer",callback:this.hidePosts.bind(this)},{title:"Supprimer",callback:this.deletePosts.bind(this),confirm:!0}],filters:[{id:"term",title:"Rechercher",type:"input",value:this.filters.term}]}))},start:function(){var e={};null!==this.filters.term&&""!==this.filters.term&&(e.term=this.filters.term),this.collection.fetch({reset:!0,data:e})},showPosts:function(e){return this.collection.bulkShow(e)},hidePosts:function(e){return this.collection.bulkHide(e)},deletePosts:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){switch(e.model.get("id")){case"term":this.onTermFilterChange(e)}},onTermFilterChange:function(e){this.filters.term=""!=e.value?e.value:null,this.start()}});
},{"128":128,"31":31,"366":366,"367":367,"undefined":undefined}],382:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Menus=require(345),Symbols=require(348),MenuTree=require(135),MenuTreeView=require(136),SidebarMenuTreeView=Marionette.View.extend({template:require(369),service:"cms",events:{"show.bs.collapse":function(e){Backbone.$('[href="#'+e.target.id+'"]',this.el).parent().removeClass("menu-expand-more").addClass("menu-expand-less"),this.menuTree.openNode(parseInt(e.target.id.substring(8)))},"hide.bs.collapse":function(e){Backbone.$('[href="#'+e.target.id+'"]',this.el).parent().removeClass("menu-expand-less").addClass("menu-expand-more"),this.menuTree.closeNode(parseInt(e.target.id.substring(8)))},"click a":function(e){var t=Backbone.$(e.currentTarget);"#"!=t.attr("href")&&(Backbone.$("a",this.el).parent().removeClass("active"),t.parent().addClass("active"))}},page_id:-1,initialize:function(e){this.page_id=-1,this.collection=new Menus,this.fetchAndRender();var t=this;this.menuTree=new MenuTree({nodeInfo:function(e){var n="";switch(e.get("is_visible")||(n+=" pagetype-visibility-off"),e.get("page_type")){case"lien_int":n+=" pagetype-internal-link";break;case"lien_ext":n+=" pagetype-external-link";break;case"separateur":n+=" pagetype-separator";break;case"page":n+=" pagetype-page"}return e.get("has_restrictions")&&(n+=" pagetype-extranet"),{url:e.get("is_home")?"/cms":"/cms/pages/"+e.get("page_id"),name:e.get("name"),is_active:e.get("page_id")==t.page_id,extraClassname:n}}})},changePage:function(e){this.page_id!=e&&(this.page_id=e,this.render())},fetchAndRender:function(){this.collection.fetch({data:{extra_fields:"pages"}}).done(function(){this.render()}.bind(this))},templateContext:function(){return{renderMenu:function(e){return this.page_id==-1?"":this.menuTree.render(this.collection.getMenuTree(e)).html}.bind(this)}}}),SidebarMenuSymbolsView=Marionette.View.extend({template:require(370),symbol_id:null,regions:{tree:{el:"div[data-role='tree']",replaceElement:!0}},initialize:function(e){this.symbol_id=null,this.collection=new Symbols,this.fetchAndRender()},templateContext:function(){return{limit:this.collection.getQuota(),usage:this.collection.length}},fetchAndRender:function(){this.collection.fetch().done(function(){this.render()}.bind(this))},changeSymbol:function(e){this.symbol_id!=e&&(this.symbol_id=e,this.render())},onRender:function(){if(0!==this.collection.length){var e=new MenuTreeView({nodeInfo:this.nodeInfo.bind(this),expandByDefault:!0});this.showChildView("tree",e),e.setTree(this.collection.getMenuTree())}},nodeInfo:function(e){return{url:"symbol"===e.get("type")?"/cms/symbols/"+e.get("id"):"#",name:e.get("name"),is_active:e.get("id")==this.symbol_id}}});module.exports=Marionette.View.extend({template:require(368),service:"cms",ui:{"btn-page-add":'a[data-role="page-add"]'},events:{"click @ui.btn-page-add":"addPage"},regions:{menus:{el:"div[data-role='menus']",replaceElement:!0},symbols:{el:"div[data-role='symbols']",replaceElement:!0}},onRender:function(){this.showChildView("menus",new SidebarMenuTreeView);var e=Backbone.Radio.channel("app").request("ctx:session");e.hasFeature("component")&&this.showChildView("symbols",new SidebarMenuSymbolsView)},onRefreshMenus:function(){var e=this.getChildView("menus");e&&e.fetchAndRender()},onChangePage:function(e){var t=this.getChildView("menus");t&&t.changePage(e);var t=this.getChildView("symbols");t&&t.changeSymbol(null)},onRefreshSymbols:function(){var e=this.getChildView("symbols");e&&e.fetchAndRender()},onChangeSymbol:function(e){var t=this.getChildView("menus");t&&t.changePage(null);var t=this.getChildView("symbols");t&&t.changeSymbol(e)},addPage:function(e){var t=Backbone.$(e.currentTarget);this.trigger("add:page",t.data("id"))}});
},{"135":135,"136":136,"345":345,"348":348,"368":368,"369":369,"370":370,"undefined":undefined}],383:[function(require,module,exports){
var Marionette=require("backbone.marionette"),_=require("underscore"),CollectionUtils=require(606),FormBehavior=require(27),SelectifyBehavior=require(26),WysiwygBehavior=require(28),SaveBehavior=require(24),ContentsView=require(374),Forms=require(608),FilePickerView=require(456),ModelSelectorView=Marionette.View.extend({template:require(372),tagName:"div",behaviors:[WysiwygBehavior,SelectifyBehavior,SaveBehavior],ui:{select:"select[name='model']"},events:{"change @ui.select":function(){this.selectModel(this.getUI("select").val(),!0)}},models:[],currentModel:"",symbol:null,fields:[],backupFields:[],initialize:function(e){this.mergeOptions(e,["currentModel","modelsSource","symbol","formEl"]),this.modelsSource.done(function(e){this.models=e,this.selectModel(this.currentModel,!1)}.bind(this))},templateContext:function(){return{currentModel:this.currentModel,models:this.models,symbol:this.symbol.get("params")||{},fields:this.fields}},selectModel:function(e,i){i&&this.triggerMethod("wysiwyg:save");var t=[],o=_.find(this.models,function(i){return i.id==e}.bind(this));o||this.models.push({id:e,name:e,fields:[],zones:[],error:!0}),this.currentModel=e,o&&o.fields&&(t=_.filter(o.fields,function(e){return"title"!=e.field})),_.each(this.getRegions(),function(e,i){"filepicker-"==i.substring(0,11)&&this.removeRegion(i)}.bind(this)),_.each(t,function(e){if("image"==e.type||"file"==e.type){var i="filepicker-"+e.field;this.getRegion(i)||this.addRegion(i,'div[data-role="'+i+'"]')}}.bind(this)),this.fields=t,this.render()},getModel:function(){return _.find(this.models,{id:this.currentModel})},onRender:function(){_.each(this.fields,function(e){if("image"==e.type||"file"==e.type){var i="filepicker-"+e.field,t=this.symbol.get("params")?this.symbol.get("params")[e.field]:null;this.showChildView(i,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,value:t,comment:e.help?e.help:null}))}}.bind(this))}});module.exports=Marionette.View.extend({template:require(371),className:"container container-large",service:"cms",behaviors:[FormBehavior],regions:{models:{el:"div[data-role='models']",replaceElement:!0},list:{el:"article[data-role='list']",replaceElement:!0}},ui:{form:"form"},fields:["title"],initialize:function(e){this.mergeOptions(e,["model","modelsSource","contents"])},onRender:function(){this.showChildView("models",new ModelSelectorView({currentModel:this.model.get("model"),symbol:this.model,modelsSource:this.modelsSource,formEl:this.getUI("form")}));var e=new ContentsView({zoneList:this.model.get("zones"),collection:this.contents,title:"Contenu du symbole",selection:[{title:"Afficher",callback:this.showContents.bind(this)},{title:"Masquer",callback:this.hideContents.bind(this)},{title:"Supprimer",callback:this.deleteContents.bind(this),confirm:!0}],scrollThreshold:920,xtra:[{id:"export",extraClassname:"md-export",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{value:"export-page",label:"Exporter les contenus",selected:!1}])}]});this.showChildView("list",e)},start:function(){this.contents.fetch({data:{limit:40}})},showContents:function(e){return this.contents.bulkShow(e)},hideContents:function(e){return this.contents.bulkHide(e)},deleteContents:function(e){return this.contents.bulkDelete(e)},onSave:function(){var e=this.getChildView("models").getModel(),i=e.id!==this.model.get("model");if(e){var t={model:e.id},o=this.fields;return _.reduce(this.getChildView("models").fields,function(e,i){return e.push(i.field),e},o),t.params=Forms.extractFields(o,this,{autoCast:!1}),this.model.save(t,{patch:!0,wait:!0}).done(function(){i&&this.getChildView("list").resetZones(e.zones)}.bind(this))}},onDelete:function(){return this.model.destroy({wait:!0})},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onExportFilterChange:function(e){if(e.view){var i=e.view;if("export-page"==e.value){if(i.collection.length>2)return;i.overrideExtraClassname("md-loading"),i.render();var t={container_id:this.model.get("symbol_id"),container_type:"symbol"};this.contents.exportAll(t).done(function(e){i.overrideExtraClassname(""),i.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),i.toggleDropdown()}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");for(t.showErrorModal(e),i.overrideExtraClassname("");i.collection.length>2;)i.collection.pop()}.bind(this))}else for(i.toggleDropdown(),i.overrideExtraClassname("");i.collection.length>2;)i.collection.pop()}}});
},{"24":24,"26":26,"27":27,"28":28,"371":371,"372":372,"374":374,"456":456,"606":606,"608":608,"undefined":undefined}],384:[function(require,module,exports){
function checkExport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/export/account/customers/"+t,method:"GET"}).then(function(e,t){return e})}var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Job=require(476),Customer=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/account/customers",idAttribute:"customer_id",defaults:{customer_id:null,is_enabled:!1,number:"",firstname:"",lastname:"",gender:"",email:"",password:"",group_id:0,website:"",nickname:"",avatar_url:"",avatar_thumb_url:"",is_in_mailinglist:!1,order_count:0,order_revenues:0,order_revenues_label:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/account/customers",model:Customer,bulkEnable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?Backbone.$.Deferred().resolve():e.save({is_enabled:!0},{patch:!0})},e)},bulkDisable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?e.save({is_enabled:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},suggest:function(e,t,n){return Backbone.ajax({url:"sites/@site/suggest/account/customers",data:{term:e,exclude:n,limit:t||5}}).then(function(e){return _.map(e,function(e){return{customer_id:e.customer_id,lastname:e.lastname,firstname:e.firstname}})})},exportAll:function(e){return Backbone.ajax({url:"sites/@site/export/account/customers",method:"POST",data:e}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkExport(t)})})}});
},{"476":476,"606":606,"undefined":undefined}],385:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({customer_id:null,url:function(){return"sites/@site/account/customers/"+this.customer_id+"/discounts"},isNew:function(){return!1},defaults:{discount:null,group_discount:null,categories:[]}});
},{"606":606}],386:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Fidelity=CollectionUtils.KiubiModel.extend({url:function(){return"sites/@site/account/customers/"+this.get("customer_id")+"/fidelity"},idAttribute:"",defaults:{customer_id:null,qt:0,comment:"",end_date:"",value_date:""}});module.exports=CollectionUtils.KiubiCollection.extend({customer_id:null,url:function(){return"sites/@site/account/customers/"+this.customer_id+"/fidelity"},model:Fidelity,selectPayload:function(){return _.map(this.toJSON(),function(e){return{value:e.group_id,label:e.name}})},createOperation:function(e,t){return Backbone.ajax({url:this.url(),method:"POST",data:{qt:e,comment:t}}).then(function(e){return _.map(e,function(e){return new Fidelity(e)})})}});
},{"606":606,"undefined":undefined}],387:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/account/groups",idAttribute:"group_id",defaults:{group_id:null,name:"",customer_count:0,is_enabled:!1,target_type:"",target_page:"",target_key:"",target_name:"",target_service:""}});
},{"606":606}],388:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({group_id:null,url:function(){return"sites/@site/account/groups/"+this.group_id+"/discounts"},isNew:function(){return!1},defaults:{discount:null,group_discount:null,categories:[]}});
},{"606":606}],389:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606);module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/account/groups",model:require(387),selectPayload:function(){return _.map(this.toJSON(),function(e){return{value:e.group_id,label:e.name}})},suggest:function(e,t,n){return Backbone.ajax({url:"sites/@site/suggest/account/groups",data:{term:e,exclude:n,limit:t||5}}).then(function(e){return _.map(e,function(e){return{group_id:e.group_id,name:e.name}})})},promisedSelect:function(e){var t=this;return this.fetch().then(function(){var n=[];return t.each(function(t){n.push({value:t.get("group_id"),label:t.get("name"),selected:e&&t.get("group_id")==e})}),new CollectionUtils.SelectCollection(n)})}});
},{"387":387,"606":606,"undefined":undefined}],390:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone");module.exports=CollectionUtils.KiubiModel.extend({type:"",type_id:null,url:function(){return"sites/@site/"+this.type+"/"+this.type_id+"/restrictions"},setType:function(e,t){this.type=e,this.type_id=t},isNew:function(){return!1},defaults:{}});
},{"606":606,"undefined":undefined}],391:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone");module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/customers",isNew:function(){return!1},defaults:{allow_registration:!1,allow_login:!1,validation:"captcha",default_group_id:null,terms:"",processing_purposes:""}});
},{"606":606,"undefined":undefined}],392:[function(require,module,exports){
function getGroupHeadersAction(e){e=e||{};var t=[];if(e.addGrp&&t.push({title:"Ajouter un groupe",callback:"actionNewGroup"}),e.addSave){var o={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};t.length<=1?t.push(o):t.splice(1,0,o)}return t}function getCustomerHeadersAction(e){e=e||{};var t=[{title:"Ajouter un membre",callback:"actionNewCustomer"}];if(e.addSave){var o={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};t.length<=1?t.push(o):t.splice(1,0,o)}return t}function HeaderTabsCustomer(e){var t=Backbone.Radio.channel("app").request("ctx:session"),o=[{title:"Membre",url:"/customers/"+e,icon:"md-customers-detail"}];return t.hasScope("site:blog")&&o.push({title:"Commentaires",url:"/customers/"+e+"/blog_comments",icon:"md-customers-comment"}),t.hasFeature("catalog")&&t.hasScope("site:catalog")&&o.push({title:"Évaluations",url:"/customers/"+e+"/catalog_comments",icon:"md-customers-rating"}),t.hasFeature("checkout")&&t.hasScope("site:checkout")&&(o.push({title:"Commandes",url:"/customers/"+e+"/orders",icon:"md-customers-order"}),o.push({title:"Remises",url:"/customers/"+e+"/discount",icon:"md-customers-discount"})),t.hasFeature("fidelity")&&o.push({title:"Fidelité",url:"/customers/"+e+"/fidelity",icon:"md-customers-fidelity"}),o}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Router=require(612),Controller=require(34),Settings=require(391),Group=require(387),Groups=require(389),GrpDiscount=require(388),Customers=require(384),BlogComments=require(166),CatalogComments=require(199),Orders=require(267),Fidelity=require(386),Discounts=require(385),Page=require(346),CustomersView=require(408),CustomerView=require(407),BlogCommentsView=require(188),CatalogCommentsView=require(248),OrdersView=require(335),DiscountView=require(409),FidelityView=require(411),SettingsView=require(415),GroupsView=require(413),GroupView=require(412),SidebarMenuView=require(416),CustomersController=Controller.extend({sidebarMenuService:"customers",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Membres",href:"/customers"}],showCustomers:function(e){var t=Backbone.Radio.channel("app").request("ctx:session"),o=this.parseQueryString(e,{term:null}),s=new CustomersView({collection:new Customers,groups:new Groups,enableExtranet:t.hasFeature("extranet"),enableFidelity:t.hasFeature("fidelity"),filters:o});this.navigationController.showContent(s),s.start(),this.setHeader({title:"Tous les membres"},getCustomerHeadersAction())},showCustomer:function(e){var t=Backbone.Radio.channel("app").request("ctx:session"),o=(new Customers).add({customer_id:e}),s=new Groups;Backbone.$.when(o.fetch(),t.hasFeature("extranet")?s.fetch():Backbone.$.Deferred().resolve()).done(function(){var r=new CustomerView({model:o,groups:s,enableExtranet:t.hasFeature("extranet")});this.listenTo(o,"change",function(e){(e.hasChanged("firstname")||e.hasChanged("lastname"))&&this.setBreadCrum({title:o.get("firstname")+" "+o.get("lastname")},!0)}.bind(this)),this.listenTo(o,"destroy",function(e){this.navigationController.showOverlay(300),this.navigationController.navigate("/customers")}.bind(this)),this.navigationController.showContent(r),this.setHeader({title:o.get("firstname")+" "+o.get("lastname")},getCustomerHeadersAction({addSave:!0}),HeaderTabsCustomer(e))}.bind(this)).fail(this.failHandler("Membre introuvable"))},actionNewCustomer:function(){this.navigationController.navigate("/customers/new")},showNewCustomer:function(e){var t=Backbone.Radio.channel("app").request("ctx:session"),o=(new Customers).add({}),s=new Groups;Backbone.$.when(t.hasFeature("extranet")?s.fetch():Backbone.$.Deferred().resolve()).done(function(){var e=new CustomerView({model:o,groups:s,enableExtranet:t.hasFeature("extranet")});this.navigationController.showContent(e),this.setHeader({title:"Nouveau membre"},getCustomerHeadersAction({addSave:!0}))}.bind(this)).fail(this.failHandler("Membre introuvable"))},showBlogComments:function(e){var t=(new Customers).add({customer_id:e});t.fetch().done(function(){var o=new BlogComments,s=new BlogCommentsView({collection:o});this.navigationController.showContent(s),s.start({customer_id:e}),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},null,HeaderTabsCustomer(e))}.bind(this)).fail(this.failHandler("Membre introuvable"))},showCommentsCatalog:function(e){var t=(new Customers).add({customer_id:e});t.fetch().done(function(){var o=new CatalogComments,s=new CatalogCommentsView({collection:o});this.navigationController.showContent(s),s.start({customer_id:e}),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},null,HeaderTabsCustomer(e))}.bind(this)).fail(this.failHandler("Membre introuvable"))},showOrders:function(e){var t=(new Customers).add({customer_id:e});t.fetch().done(function(){var o=new OrdersView({collection:new Orders,customer_id:e});this.navigationController.showContent(o),o.start(),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},null,HeaderTabsCustomer(e))}.bind(this)).fail(this.failHandler("Membre introuvable"))},showDiscount:function(e){var t=(new Customers).add({customer_id:e}),o=new Discounts;o.customer_id=e,Backbone.$.when(o.fetch(),t.fetch()).done(function(){var s=new DiscountView({model:o,customer:t});this.navigationController.showContent(s),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},[{title:"Enregistrer",callback:"actionSave"}],HeaderTabsCustomer(e))}.bind(this)).fail(this.failHandler("Membre introuvable"))},showFidelity:function(e){var t=(new Customers).add({customer_id:e});t.fetch().done(function(){var o=new Fidelity;o.customer_id=e;var s=new FidelityView({model:t,collection:o});this.navigationController.showContent(s),s.start(),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},null,HeaderTabsCustomer(e))}.bind(this)).fail(this.failHandler("Membre introuvable"))},showSettings:function(){var e=Backbone.Radio.channel("app").request("ctx:session"),t=new Settings,o=new Groups;Backbone.$.when(t.fetch(),e.hasFeature("extranet")?o.fetch():Backbone.$.Deferred().resolve()).done(function(){var s=new SettingsView({model:t,groups:o,enableExtranet:e.hasFeature("extranet")});this.navigationController.showContent(s),this.setHeader({title:"Paramètres des membres"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showGroups:function(){var e=new GroupsView({collection:new Groups});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Extranet"},getGroupHeadersAction({addGrp:!0}))},showGroup:function(e){var t,o=new Groups,s=new o.model({group_id:e}),r=Backbone.Radio.channel("app").request("ctx:session");if(r.hasFeature("checkout")&&r.hasScope("site:checkout")){var i;i=new GrpDiscount,i.group_id=e,t=i.fetch()}else t=Backbone.$.Deferred().resolve();Backbone.$.when(s.fetch(),t).done(function(){var e=new GroupView({model:s,page:new Page,discount:i});this.listenTo(s,"change",function(e){e.hasChanged("name")&&this.setBreadCrum([{title:"Extranet",href:"/customers/groups"},{title:s.get("name")}],!0)}.bind(this)),this.listenTo(s,"destroy",function(e){this.navigationController.showOverlay(300),this.navigationController.navigate("/customers/groups")}.bind(this)),this.navigationController.showContent(e),this.setHeader([{title:"Extranet",href:"/customers/groups"},{title:s.get("name")}],getGroupHeadersAction({addGrp:!0,addSave:!0}))}.bind(this)).fail(function(){this.notFound(),this.setHeader([{title:"Extranet",href:"/customers/groups"},{title:"Groupe extranet introuvable"}])}.bind(this))},actionNewGroup:function(){var e=new Group({name:"Intitulé par défaut"});return e.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/customers/groups/"+e.get("group_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))}});module.exports=Router.extend({controller:new CustomersController,appRoutes:{customers:"showCustomers","customers/settings":"showSettings","customers/groups":"showGroups","customers/groups/:id":"showGroup","customers/new":"showNewCustomer","customers/:id":"showCustomer","customers/:id/blog_comments":"showBlogComments","customers/:id/catalog_comments":"showCommentsCatalog","customers/:id/orders":"showOrders","customers/:id/discount":"showDiscount","customers/:id/fidelity":"showFidelity"},onRoute:function(e){var t=Backbone.Radio.channel("app").request("ctx:session");return t.hasScope("site:account")&&("showFidelity"!=e||t.hasFeature("fidelity"))&&("showGroups"!=e&&"showGroup"!=e||t.hasFeature("extranet"))?void this.controller.showSidebarMenu():(this.controller.navigationController.navigate("/"),!1)}});
},{"166":166,"188":188,"199":199,"248":248,"267":267,"335":335,"34":34,"346":346,"384":384,"385":385,"386":386,"387":387,"388":388,"389":389,"391":391,"407":407,"408":408,"409":409,"411":411,"412":412,"413":413,"415":415,"416":416,"612":612,"undefined":undefined}],393:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-lg-8 col-12"><article class="post-article"><header class="post-header"><h1>Informations personnelles</h1></header><div class="post-content"><div class="row media-detail"><div class="col-4 customer-avatar"><div class="media-object md-icon md-face img-default rounded-circle mx-auto img-avatar center-block"></div> ',customer_id&&(__p+=' <div class="media-object rounded-circle mx-auto img-avatar center-block"><img alt="" src="'+(null==(__t=convertMediaPath(avatar_url))?"":_.escape(__t))+"&"+(null==(__t=render_counter)?"":_.escape(__t))+'&fallback=false"></div><br><div data-role="file"></div><p class="media-info">Format : gif, jpeg ou png<br>Taille : 120 x 120px minimum</p> '),__p+=' </div><div class="col-8"><div class="row"><div class="col-4"><div class="form-group"><label>Civilité</label><select name="gender" data-style="selectify"><option value="M" '+(null==(__t="F"!=gender?selected="selected":"")?"":__t)+'>M</option><option value="W" '+(null==(__t="W"==gender?selected="selected":"")?"":__t)+'>Mme</option></select></div></div></div><div class="form-group"><label class="required" for="lastname">Nom</label><input class="form-control" id="lastname" name="lastname" value="'+(null==(__t=lastname)?"":_.escape(__t))+'"></div><div class="form-group"><label class="required" for="firstname">Prénom</label><input class="form-control" id="firstname" name="firstname" value="'+(null==(__t=firstname)?"":_.escape(__t))+'"></div><div class="form-group"><label class="required" for="email">Email</label><input class="form-control" id="email" name="email" value="'+(null==(__t=email)?"":_.escape(__t))+'" placeholder="Utilisé pour se connecter au site"></div><div class="form-group"><label for="password">Mot de passe</label> ',__p+=customer_id?' <a data-role="show-password" href="#" class="form-control-static">Modifier le mot de passe</a> <input class="form-control" style="display: none" id="password" name="password" type="password" placeholder="Modifier le mot de passe utilisé pour se connecter au site"> ':' <input class="form-control" id="password" name="password" type="password"> ',__p+=' </div><div class="form-group"><label for="nickname">Pseudo</label><input class="form-control" id="nickname" name="nickname" value="'+(null==(__t=nickname)?"":_.escape(__t))+'" placeholder="S\'affiche à la place du nom"></div><div class="form-group"><label for="website">Site Web</label><input class="form-control" id="website" name="website" value="'+(null==(__t=website)?"":_.escape(__t))+'" placeholder="https://www.site-web.com/"></div> ',enableExtranet&&(__p+=' <div class="form-group"><label>Groupe extranet</label><p>Un membre peut faire partie d\'un groupe de l\'<a href="/customers/groups">extranet</a> ce qui lui permettra d\'accéder à certaines pages et fichiers du site disposant d\'un accès restrint et de bénéficier des remises appliquées au groupe.</p><div class="row"><div class="col-8"><div data-role="groups"></div></div></div></div> '),__p+=' </div></div></div><footer class="post-footer"></footer></article></div><div class="col-lg-4 col-12"><article class="post-article post-article-aside"><div class="post-content"><div class="form-group post-subcontent"><label>Accès</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_enabled1" class="visible">Autorisé</label><input name="is_enabled" id="is_enabled0" value="0" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_enabled0" class="not-visible">Bloqué</label></div></div> ',customer_id&&(__p+=' <div class="form-group post-subcontent"> ',is_enabled&&(__p+=' <a href="#" class="float-right" data-role="connect">Se connecter</a> '),__p+=' <h4>Numéro client</h4><span class="md-icon md-icon-outlined md-account float-right"></span><p>#'+(null==(__t=number)?"":_.escape(__t))+'</p></div><div class="form-group post-subcontent"><h4>Date d\'inscription</h4><span class="md-icon md-submit-date float-right"></span><p>'+(null==(__t=creation_date)?"":_.escape(__t))+"</p></div> "),__p+=' </div><footer class="post-footer"></footer></article></div></div></form><div class="save"><div class="btn-toolbar" role="toolbar"> ',__p+=customer_id?' <button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> ':' <a href="/customers" class="btn btn-lg btn-primary btn-cancel">Annuler</a> ',__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],394:[function(require,module,exports){
arguments[4][174][0].apply(exports,arguments)
},{"174":174,"undefined":undefined}],395:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="customer_'+(null==(__t=customer_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=customer_id)?"":_.escape(__t))+'" type="checkbox"><label for="customer_'+(null==(__t=customer_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"><div class="media-object md-icon md-face img-default rounded-circle img-avatar"></div><div class="media-object rounded-circle img-avatar"><img alt="" src="'+(null==(__t=convertMediaPath(avatar_thumb_url))?"":__t)+'&fallback=false"></div></div><div class="col item-body"><h4>'+(null==(__t="M"==gender?"M":"Mme")?"":_.escape(__t))+". "+(null==(__t=firstname)?"":_.escape(__t))+" "+(null==(__t=lastname)?"":_.escape(__t))+"</h4>#"+(null==(__t=number)?"":_.escape(__t))+' </div><div class="col-2"> ',__p+=is_enabled?' <span class="badge badge-success">Autorisé</span> ':' <span class="badge badge-danger">Bloqué</span> ',__p+=' </div><div class="col-3"><span title="Date d\'inscription"><i class="md-icon md-submit-date"></i>'+(null==(__t=creation_date)?"":_.escape(__t))+'</span></div><div class="col-2 no-white-space"> ',order_count>0?(__p+=" "+(null==(__t=plural(order_count,"%d commande","%d commandes"))?"":_.escape(__t)),order_count>0&&(__p+="<br>"+(null==(__t=order_revenues_label)?"":_.escape(__t))),__p+=" "):__p+=' <span class="text-muted">—</span> ',__p+=' </div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'" role="button">Détail</a> ',is_enabled&&(__p+=' <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="login">Connecter comme</a></li></ul> '),__p+=" </div></div></div>";return __p};
},{"undefined":undefined}],396:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/membres.html#remises-automatiques" class="md-icon md-help float-right" target="_blank"></a> Les remises définies pour un membre <strong>se substituent aux remises du groupe extranet</strong>.</div><form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Remise sur tous les produits</h1></header><div class="post-content"> ',""!=group_discount&&(__p+=' <p>Ce membre fait partie du groupe extranet <strong>"'+(null==(__t=group_name)?"":_.escape(__t))+"\"</strong> et profite d'une remise de <strong>"+(null==(__t=group_discount)?"":_.escape(__t))+"%</strong> sur l'ensemble des produits du catalogue. Vous pouvez changer cette remise, uniquement pour ce membre.</p> "),__p+=' <div class="row"><div class="col-3"><div class="form-group"><label for="discount">Remise appliquée</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="discount" name="discount" value="'+(null==(__t=discount)?"":_.escape(__t))+'" placeholder="'+(null==(__t=group_discount)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text">%</span></div></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Remises par catégories</h1></header><div class="post-content post-list"><p>En complément de la remise sur tous les produits, ce membre peut bénéfichier en fonction de son groupe extranet de remises par catégories de produits. <strong>Ces remises remplacent la remise</strong> sur tous les produits pour les catégories sélectionnées. Vous pouvez changer ou ajouter des remises supplémentaires, uniquement pour ce membre.</p><div class="row"><div class="col-3"><label for="">Remise appliquée</label></div><div class="col-4"><label for="">Catégorie concernée</label></div></div><div data-role="discounts"></div><div class="list-item no-hover"><a href="#" data-role="discount-add"><span class="page-add md-icon md-add-page"></span>Ajouter une remise</a></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],397:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-3"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="discount_c" placeholder="'+(null==(__t=group_discount)?"":_.escape(__t))+'" value="'+(null==(__t=discount)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text">%</span></div></div></div></div><div class="col-7"><div data-role="autocomplete"></div></div><div class="col"><a href="#" data-role="action" data-action="delete" class="md-icon md-delete float-right"></a></div></div>';return __p};
},{"undefined":undefined}],398:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert">A chaque ajout de points de fidélité, si un bon de réduction est généré, <strong>le membre en est informé par email</strong>. Si vous modifiez le bon de réduction par la suite, <strong>veillez à informer le membre</strong> des nouvelles conditions d\'utilisation du bon.</div><article data-role="list"></article><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],399:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="list-item no-hover"><h4>Total des points : <span data-role="sum"></span></h4></div><form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-3"><div class="form-group"><label for="operation">Quantité</label><select id="operation" name="operation" data-style="selectify"><option value="add" selected="selected">Ajouter</option><option value="sub">Retirer</option></select></div></div><div class="col-3"><div class="form-group"><label class="required">&nbsp;</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="qt" name="qt" value="" placeholder="0"><div class="input-group-append"><span class="input-group-text">point(s)</span></div></div></div></div></div><div class="form-group"><label class="required" for="comment">Commentaire</label><input class="form-control" id="comment" name="comment"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show"><span class="page-add md-icon md-add-page"></span>Ajouter/Retirer des points</a></div>';return __p};
},{"undefined":undefined}],400:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col item-body"><h4>'+(null==(__t=qt>0?"+"+qt:qt)?"":_.escape(__t))+" points</h4> "+(null==(__t=comment)?"":_.escape(__t))+' </div><div class="col-4"> ',__p+=qt>0?' <span title="Dates de début et de fin de validité"><i class="md-icon md-card-membership"></i>'+(null==(__t=value_date)?"":_.escape(__t))+' <i class="md-icon md-from-to mx-2"></i>'+(null==(__t=end_date)?"":_.escape(__t))+" </span> ":' <span title="Date de l\'opération"><i class="md-icon md-card-membership"></i>'+(null==(__t=value_date)?"":_.escape(__t))+" </span> ",__p+=' </div><div class="col-auto"></div></div>';return __p};
},{"undefined":undefined}],401:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé du groupe</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le groupe"></div><div class="form-group"><label>Accès</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Autorisé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Bloqué</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Redirection automatique</h1></header><div class="post-content"><p>A la connection au site, les membres du groupe sont automatiquement redirigés vers une page du site, sauf s\'ils s\'y connectent à partir du tunel de commande.</p><div class="row"><div class="col-3"><div class="form-group"><label>Vers quel service ?</label><div data-role="type"></div></div></div><div class="col-6"><div class="form-group"><label>Vers quelle page ?</label><div data-role="page"></div></div></div></div></div><footer class="post-footer"></footer></article> ',enableDiscount&&(__p+=' <article class="post-article"><header class="post-header"><h1>Remise sur tous les produits</h1></header><div class="post-content"><p>Une remise en pourcentage sur l\'ensemble des produits du catalogue peut être appliquée automatiquement pour tous les membres du groupe extranet. Cette remise change directement l\'affichage du prix des produits dans le catalogue et dans le panier d\'achat.</p><div class="row"><div class="col-3"><div class="form-group"><label for="discount">Remise appliquée</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="discount" name="discount" placeholder="0,00" value="'+(null==(__t=discount)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text">%</span></div></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Remises par catégories</h1></header><div class="post-content post-list"><p>En complément de la remise sur tous les produits, des remises par catégories de produits peuvent être définies pour tous les membres de ce groupe extranet. <strong>Ces remises remplacent la remise</strong> sur tous les produits pour les catégories sélectionnées. Pour en savoir plus sur l\'ordre d\'application des remises, <a href="https://aide.kiubi.com/membres.html#remises-automatiques" target="_blank">consultez l\'aide en ligne</a>.</p><div class="row"><div class="col-3"><label for="">Remise appliquée</label></div><div class="col-4"><label for="">Catégorie concernée</label></div></div><div data-role="discounts"></div><div class="list-item no-hover"><a href="#" data-role="discount-add"><span class="page-add md-icon md-add-page"></span>Ajouter une remise</a></div></div><footer class="post-footer"></footer></article> '),__p+=' </form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],402:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/membres.html#extranet" class="md-icon md-help float-right" target="_blank"></a> L\'extranet vous permet de <strong>restreindre l\'accès à certaines pages et fichiers du site</strong> à ses membres. Créez des groupes, modifiez les droits d\'accès des membres, protégez les pages du site et appliquez des remises de groupes.</div><article data-role="list"></article><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],403:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_enabled?target_service&&(__p+=' <span class="md-icon md-home icon-left"></span><span class="spacer">'+(null==(__t=target_service)?"":_.escape(__t))+'</span><span class="spacer">'+(null==(__t=target_name)?"":_.escape(__t))+"</span> "):__p+=' <span class="text-danger">Bloqué</span> ',__p+=' </div><div class="col-3"> ',__p+=customer_count>0?" "+(null==(__t=plural(customer_count,"%d membre","%d membres"))?"":_.escape(__t))+" ":' <span class="text-muted">—</span> ',__p+=' </div><div class="col-3"><span class="text-muted">—</span></div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/customers/groups/'+(null==(__t=group_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],404:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="col-6"><div class="form-group has-feedback"><label for="groups">Accès réservé aux groupes</label><div class="dropdown" data-role="group"><input class="form-control" id="groups" data-toggle="dropdown" placeholder="Recherche des groupes"><span class="md-feedback md-search"></span><ul class="dropdown-menu dropdown-control"></ul></div><span data-role="groups"></span></div></div><div class="col-6"><div class="form-group has-feedback"><label for="customers">Accès réservé aux membres</label><div class="dropdown" data-role="customer"><input class="form-control" id="customers" data-toggle="dropdown" placeholder="Recherche des membres"><span class="md-feedback md-search"></span><ul class="dropdown-menu dropdown-control"></ul></div><span data-role="customers"></span></div></div>';return __p};
},{"undefined":undefined}],405:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Ouverture de compte</h1></header><div class="post-content"><div class="row"><div class="col-6"><div class="form-group"><label for="">Ouverture de nouveaux comptes</label><div class="form-check"><input name="allow_registration" id="allow_registration1" value="1" '+(null==(__t=allow_registration?'checked="checked"':"")?"":__t)+' type="radio"><label for="allow_registration1" class="visible">Autorisée</label><input name="allow_registration" id="allow_registration0" value="0" '+(null==(__t=allow_registration?"":'checked="checked"')?"":__t)+' type="radio"><label for="allow_registration0" class="not-visible">Interdite</label></div></div></div><div class="col-6"><div class="form-group"><label for="">Identification des membres</label><div class="form-check"><input name="allow_login" id="allow_login1" value="1" '+(null==(__t=allow_login?'checked="checked"':"")?"":__t)+' type="radio"><label for="allow_login1" class="visible">Autorisée</label><input name="allow_login" id="allow_login0" value="0" '+(null==(__t=allow_login?"":'checked="checked"')?"":__t)+' type="radio"><label for="allow_login0" class="not-visible">Interdite</label></div></div></div><div class="col-4"><div class="form-group"><label for="validation">Validation de compte</label><select id="validation" name="validation" data-style="selectify"><option value="email" '+(null==(__t="email"==validation?'selected="selected"':"")?"":__t)+'>Par confirmation email</option><option value="captcha" '+(null==(__t="captcha"==validation?'selected="selected"':"")?"":__t)+'>Par captcha</option><option value="auto" '+(null==(__t="auto"==validation?'selected="selected"':"")?"":__t)+'>Pas de validation</option></select></div></div></div></div><footer class="post-footer"></footer></article> ',enableExtranet&&(__p+=' <article class="post-article"><header class="post-header"><h1>Extranet</h1></header><div class="post-content"><p>A l\'ouverture d\'un nouveau compte, vous pouvez automatiquement rattacher le membre à un groupe de l\'extranet.</p><div class="row"><div class="col-4"><div class="form-group"><label for="">Groupe extranet par défaut</label><div data-role="groups"></div></div></div></div></div><footer class="post-footer"></footer></article> '),__p+=' <article class="post-article"><header class="post-header"><h1>Conditions générales d\'utilisation</h1></header><div class="post-content"><p>Vous pouvez personnaliser les conditions générales d\'utilisation du site que tous les membres doivent accepter pour se créer un compte.</p><div class="form-group"><textarea class="form-control" rows="20" placeholder="" name="terms">'+(null==(__t=terms)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Données personnelles collectées et finalités de traitements</h1></header><div class="post-content"><p>Vous pouvez personnaliser les informations concernants les données personnelles collectées à la création d\'un compte ainsi que leurs finalités de traitements. Tous les membres devront accepter, pour se créer un compte, l\'utilisation qui sera faite de leurs données personnelles, si <a href="/prefs/gdpr">la demande de consentement préalable est activée</a>.</p><div class="form-group"><textarea class="form-control" rows="20" placeholder="" name="processing_purposes">'+(null==(__t=processing_purposes)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],406:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Membres</h2><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="/customers">Tous les membres</a></li> ',has_feature_extranet&&(__p+='<li class="nav-item"><a class="nav-link" href="/customers/groups">Extranet</a></li>'),__p+=' <li class="nav-item"><a class="nav-link" href="/customers/settings">Paramètres</a></li></ul>';return __p};
},{"undefined":undefined}],407:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),FormBehavior=require(27),Forms=require(608),Session=Backbone.Radio.channel("app").request("ctx:session"),SelectView=require(139),FileView=require(126);module.exports=Marionette.View.extend({template:require(393),className:"container container-large",service:"customers",behaviors:[FormBehavior],regions:{groups:{el:"div[data-role='groups']",replaceElement:!0},file:{el:"div[data-role='file']",replaceElement:!0}},ui:{showPwdBtn:'a[data-role="show-password"]',pwdInput:'input[name="password"]',connectLink:'a[data-role="connect"]'},events:{"click @ui.showPwdBtn":function(){this.getUI("showPwdBtn").hide(),this.getUI("pwdInput").show()},"click @ui.connectLink":function(){window.open(Session.autologLink(this.model.get("customer_id")))}},fields:["is_enabled","firstname","lastname","gender","email","website","nickname","group_id"],render_counter:1,initialize:function(e){this.mergeOptions(e,["model","groups"])},templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),render_counter:this.render_counter++,creation_date:format.formatLongDateTime(this.model.get("creation_date")),enableExtranet:this.getOption("enableExtranet")}},onRender:function(){this.getOption("enableExtranet")&&this.showChildView("groups",new SelectView({emptyLabel:"Aucun groupe",collection:this.groups,selected:this.model.get("group_id"),name:"group_id",direction:"up"})),this.model.isNew()||this.showChildView("file",new FileView({name:"avatar"}))},onSave:function(){var e=this.model.isNew(),i=Forms.extractFields(this.fields,this);return""!=this.getUI("pwdInput").val()&&(i.password=this.getUI("pwdInput").val()),this.getChildView("file")&&this.getChildView("file").getFile()&&(i.avatar=this.getChildView("file").getFile()),this.model.save(i,{patch:!0,wait:!0}).done(function(){if(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.navigate("/customers/"+this.model.get("customer_id"))}else this.render()}.bind(this))},onDelete:function(){return this.model.destroy()}});
},{"126":126,"139":139,"27":27,"393":393,"607":607,"608":608,"undefined":undefined}],408:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606),format=require(607),RowActionsBehavior=require(31),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(395),className:"list-item",behaviors:[RowActionsBehavior],templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),plural:format.plural,creation_date:format.formatLongDate(this.model.get("creation_date"))}},onActionLogin:function(){window.open(Session.autologLink(this.model.get("customer_id")))}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(394),className:"container-fluid",service:"customers",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"-date",filters:null,initialize:function(e){this.mergeOptions(e,["collection","groups"]),this.filters={term:this.getOption("filters")&&this.getOption("filters").term?this.getOption("filters").term:null}},onRender:function(){var e=new CollectionUtils.SelectCollection([{value:"email",label:"Email"},{value:"enabled",label:"Accès"},{value:"creation",label:"Date d'inscription"},{value:"mailinglist",label:"Abonné newsletter"},{value:"order",label:"Nombre de commandes"},{value:"revenues",label:"Chiffre d'affaire"}]);this.getOption("enableFidelity")&&e.add({value:"fidelity",label:"Points de fidélité"}),this.getOption("enableExtranet")&&e.add({value:"group",label:"Groupe extranet"}),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Tous les membres",xtra:[{id:"export",extraClassname:"md-export",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{value:"export",label:"Exporter les membres",selected:!1}])},{id:"sort",extraClassname:"md-sort",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{label:"Nom",selected:!1,value:"name"},{label:"Inscription",selected:!0,value:"-date"}])}],selection:[{title:"Autoriser",callback:this.enableCustomer.bind(this)},{title:"Bloquer",callback:this.disableCustomer.bind(this)},{title:"Supprimer",callback:this.deleteCustomer.bind(this),confirm:!0}],filters:[{id:"term",title:"Rechercher",type:"input",value:this.filters.term},{id:"add",title:"Ajouter un filtre",extraClassname:"filter-add",type:"dropdown",disableLabelUpdate:!0,collectionPromise:e}]}))},start:function(){var e={sort:this.sortOrder?this.sortOrder:null,extra_fields:"orders"};null!=this.filters.term&&(e.term=this.filters.term),null!=this.filters.email&&(e.email=this.filters.email),null!=this.filters.is_enabled&&(e.is_enabled=this.filters.is_enabled),null!=this.filters.creation_date&&(e.creation_date_min=this.filters.creation_date[0],e.creation_date_max=this.filters.creation_date[1]),null!=this.filters.is_in_mailinglist&&(e.is_in_mailinglist=this.filters.is_in_mailinglist),null!=this.filters.group_id&&(e.group_id=this.filters.group_id),null!=this.filters.order_count&&(e.order_count_min=this.filters.order_count[0],e.order_count_max=this.filters.order_count[1]),null!=this.filters.order_revenues&&(e.order_revenues_min=this.filters.order_revenues[0],e.order_revenues_max=this.filters.order_revenues[1]),null!=this.filters.fidelity&&(e.fidelity_min=this.filters.fidelity[0],e.fidelity_max=this.filters.fidelity[1]),this.collection.fetch({reset:!0,data:e})},enableCustomer:function(e){return this.collection.bulkEnable(e)},disableCustomer:function(e){return this.collection.bulkDisable(e)},deleteCustomer:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onTermFilterChange:function(e){this.filters.term=""!=e.value?e.value:null,this.start()},onExportFilterChange:function(e){if(e.view){var t=e.view;if("export"==e.value){if(t.collection.length>1)return;t.overrideExtraClassname("md-loading"),t.render();var i={};null!=this.filters.term&&(i.term=this.filters.term),null!=this.filters.email&&(i.email=this.filters.email),null!=this.filters.is_enabled&&(i.is_enabled=this.filters.is_enabled),null!=this.filters.creation_date&&(i.creation_date_min=this.filters.creation_date[0],i.creation_date_max=this.filters.creation_date[1]),null!=this.filters.is_in_mailinglist&&(i.is_in_mailinglist=this.filters.is_in_mailinglist),null!=this.filters.group_id&&(i.group_id=this.filters.group_id),null!=this.filters.order_count&&(i.order_count_min=this.filters.order_count[0],i.order_count_max=this.filters.order_count[1]),null!=this.filters.order_revenues&&(i.order_revenues_min=this.filters.order_revenues[0],i.order_revenues_max=this.filters.order_revenues[1]),null!=this.filters.fidelity&&(i.fidelity_min=this.filters.fidelity[0],i.fidelity_max=this.filters.fidelity[1]),this.collection.exportAll(i).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}},onEmailFilterChange:function(e){this.filters.email=e.value,this.start()},onEnabledFilterChange:function(e){this.filters.is_enabled=e.value,this.start()},onCreationFilterChange:function(e){this.filters.creation_date=e.value,this.start()},onMailinglistFilterChange:function(e){this.filters.is_in_mailinglist=e.value,this.start()},onGroupFilterChange:function(e){this.filters.group_id=e.value,this.start()},onOrderFilterChange:function(e){this.filters.order_count=e.value,this.start()},onRevenuesFilterChange:function(e){this.filters.order_revenues=e.value,this.start()},onFidelityFilterChange:function(e){this.filters.fidelity=e.value,this.start()},onSortFilterChange:function(e){e.view.activeItem(e.value),this.sortOrder=e.value,this.start()},onAddFilterChange:function(e){var t;switch(e.value){case"email":t={id:e.value,title:"Email",type:"input",value:"",canDelete:!0};break;case"gender":t={id:e.value,title:"Genre",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:"W",label:"Femme"},{value:"M",label:"Homme"}])};break;case"enabled":t={id:e.value,title:"Accès",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:!0,label:"Actif"},{value:!1,label:"Bloqué"}])};break;case"creation":t={id:e.value,title:"jj/mm/aaaa",type:"interval",enableDatepicker:"date",prependText:["Inscrit entre","et"],canDelete:!0};break;case"mailinglist":t={id:e.value,title:"Newsletter",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:!0,label:"Inscrit"},{value:!1,label:"Désinscrit"}])};break;case"group":t={id:e.value,title:"Groupe extranet",type:"dropdown",canDelete:!0,collectionPromise:this.groups.promisedSelect()};break;case"order":t={id:e.value,title:"nb de fois",type:"interval",prependText:["Commandé entre","et"],canDelete:!0};break;case"revenues":t={id:e.value,title:"",type:"interval",prependText:["CA entre","et"],canDelete:!0};break;case"fidelity":t={id:e.value,title:"",type:"interval",prependText:["Pt fidélité entre","et"],canDelete:!0};break;default:return}e.model.collection.add(t)}});
},{"128":128,"31":31,"394":394,"395":395,"606":606,"607":607,"undefined":undefined}],409:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608),format=require(607),ListView=require(410);module.exports=Marionette.View.extend({template:require(396),className:"container",service:"customers",behaviors:[FormBehavior],regions:{discounts:{el:"div[data-role='discounts']",replaceElement:!0}},ui:{addDiscountBtn:'a[data-role="discount-add"]'},events:{"click @ui.addDiscountBtn":function(){var t=new this.discounts.model({category_id:null,category_name:"-- Choisir une catégorie --"});this.discounts.add(t)}},fields:["discount"],initialize:function(t){this.mergeOptions(t,["model","customer"]),this.discounts=new Backbone.Collection,this.discounts.model=Backbone.Model.extend({defaults:{discount:null,group_discount:null,category_id:null,category_name:""}}),this.discounts.add(this.model.get("categories"))},templateContext:function(){return{group_name:this.customer.get("group_name"),discount:format.formatFloat(this.model.get("discount")),group_discount:format.formatFloat(this.model.get("group_discount"))}},onRender:function(){this.showChildView("discounts",new ListView({collection:this.discounts}))},onSave:function(){var t=Forms.extractFields(this.fields,this),e=this.getChildView("discounts");return t.discount=""==t.discount?null:t.discount,t.categories={},this.discounts.each(function(i){var o=e.children.findByModel(i);o&&""!=o.getUI("discount").val()&&i.get("category_id")&&(t.categories[i.get("category_id")]=format.unformatFloat(o.getUI("discount").val()))}),this.model.save(t,{patch:!0,wait:!0})}});
},{"27":27,"396":396,"410":410,"607":607,"608":608,"undefined":undefined}],410:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),AutocompleteView=require(140),format=require(607),Categories=require(197),CategCollection=new Categories,RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(397),className:"list-item list-item-form",behaviors:[RowActionsBehavior],ui:{discount:'input[name="discount_c"]'},regions:{autocomplete:{el:"div[data-role='autocomplete']",replaceElement:!0}},templateContext:function(){return{discount:format.formatFloat(this.model.get("discount")),group_discount:format.formatFloat(this.model.get("group_discount"))}},onRender:function(){this.showChildView("autocomplete",new AutocompleteView({searchPlaceholder:"Rechercher une catégorie",current:{label:this.model.get("category_name"),value:this.model.get("category_id")}}))},onActionDelete:function(){this.model.destroy()},onChildviewInput:function(e,t){CategCollection.suggest(e,5,[t.current.value]).done(function(e){var o=_.map(e,function(e){return{label:e.name,value:e.category_id}});t.showResults(o)})},onChildviewChange:function(e){this.model.set("category_id",e.value,{silent:!0})}}),EmptyView=Marionette.View.extend({template:_.template('<span class="list-item-empty">Aucune remise</span>')});module.exports=Marionette.CollectionView.extend({className:"",emptyView:EmptyView,childView:RowView});
},{"140":140,"197":197,"31":31,"397":397,"607":607,"undefined":undefined}],411:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),_=require("underscore"),RowActionsBehavior=require(31),SelectifyBehavior=require(26),Forms=require(608),NewRowView=Marionette.View.extend({template:require(399),className:"post-content post-list",behaviors:[RowActionsBehavior,SelectifyBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]',sum:'span[data-role="sum"]'},initialize:function(){this.listenTo(this.collection,"update",this.updateTotal)},updateTotal:function(){var e=this.collection.reduce(function(e,t,i){return e+t.get("qt")},0);this.getUI("sum").text(e)},onActionSave:function(){var e=Forms.extractFields(["qt","comment","operation"],this);return this.collection.createOperation("sub"==e.operation?-1*e.qt:e.qt,e.comment).done(function(e){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),RowView=Marionette.View.extend({template:require(400),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]'},templateContext:function(){return{end_date:this.model.get("end_date")?format.formatLongDate(this.model.get("end_date")):"",value_date:format.formatLongDate(this.model.get("value_date"))}}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(398),className:"container",service:"customers",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Points de fidélité"}))},start:function(){this.collection.fetch()}});
},{"128":128,"26":26,"31":31,"398":398,"399":399,"400":400,"607":607,"608":608,"undefined":undefined}],412:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),CollectionUtils=require(606),FormBehavior=require(27),Forms=require(608),format=require(607),SelectView=require(139),ListView=require(410);module.exports=Marionette.View.extend({template:require(401),className:"container",service:"customers",behaviors:[FormBehavior],regions:{type:{el:'div[data-role="type"]',replaceElement:!0},page:{el:'div[data-role="page"]',replaceElement:!0},discounts:{el:"div[data-role='discounts']",replaceElement:!0}},ui:{addDiscountBtn:'a[data-role="discount-add"]'},events:{"click @ui.addDiscountBtn":function(){var e=new this.discounts.model({category_id:null,category_name:"-- Choisir une catégorie --"});this.discounts.add(e)}},fields:["is_enabled","name","target_type","target_page","discount"],enableDiscount:!1,initialize:function(e){this.mergeOptions(e,["model","page","discount"]),this.discount?(this.discounts=new Backbone.Collection,this.discounts.model=Backbone.Model.extend({defaults:{discount:null,group_discount:null,category_id:null,category_name:""}}),this.discounts.add(this.discount.get("categories")),this.enableDiscount=!0):this.enableDiscount=!1},templateContext:function(){return{enableDiscount:this.enableDiscount,discount:this.enableDiscount?format.formatFloat(this.discount.get("discount")):null}},onRender:function(){this.showChildView("page",new SelectView({selected:this.model.get("target_page")+"@@"+this.model.get("target_key"),name:"target_page"}));var e=this.page.getInternalLinkTypes(this.model.get("target_type")).done(function(){this.changeType(this.model.get("target_type"))}.bind(this));this.showChildView("type",new SelectView({collectionPromise:e,name:"target_type"})),this.enableDiscount&&this.showChildView("discounts",new ListView({collection:this.discounts}))},onChildviewChange:function(e,t){"target_type"==t&&this.changeType(e)},changeType:function(e){this.getChildView("page").loadCollection(this.page.getInternalLinkTargets(e).then(function(t){var i=_.map(t,function(t){var i=t.is_linkable?t.target_page+"@@"+t.target_key:null,n=0;return t.depth&&t.depth>0&&(n+=t.depth),{value:i,label:t.name,indent:"cms"==e?n:null,is_group:!t.is_linkable}});return new CollectionUtils.SelectCollection(i)},function(){return[]}))},onSave:function(){var e=Forms.extractFields(this.fields,this),t=e.target_page.split("@@",2);e.target_page=t[0],e.target_key=t[1];var i;if(this.enableDiscount){var n=this.getChildView("discounts"),s={};s.discount=""==e.discount?null:e.discount,delete e.discount,s.categories={},this.discounts.each(function(e){var t=n.children.findByModel(e);t&&""!=t.getUI("discount").val()&&e.get("category_id")&&(s.categories[e.get("category_id")]=t.getUI("discount").val())}),i=this.discount.save(s,{patch:!0,wait:!0})}else i=Backbone.$.Deferred().resolve();return Backbone.$.when(this.model.save(e,{patch:!0,wait:!0}),i)},onDelete:function(){return this.model.destroy()}});
},{"139":139,"27":27,"401":401,"410":410,"606":606,"607":607,"608":608,"undefined":undefined}],413:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(403),className:"list-item",behaviors:[RowActionsBehavior],templateContext:function(){return{plural:format.plural}},onActionDelete:function(){return this.model.destroy()}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(402),className:"container-fluid",service:"customers",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des groupes extranet"}))},start:function(){this.collection.fetch({data:{extra_fields:"target"}})}});
},{"128":128,"31":31,"402":402,"403":403,"607":607,"undefined":undefined}],414:[function(require,module,exports){
function formatCustomer(e,t){return'<li data-role="selection" data-index="'+t+'"><a class="dropdown-item" href="#">'+e.firstname+" "+e.lastname+"</a></li>"}function formatGroup(e,t){return'<li data-role="selection" data-index="'+t+'"><a class="dropdown-item" href="#">'+e.name+"</a></li>"}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Groups=require(389),Customers=require(384),SaveBehavior=require(24),TagView=Marionette.View.extend({template:_.template('<span class="badge-content" title="<%- name %>"><%- name %></span><span data-role="delete" class="md-icon md-close"></span>'),className:"badge badge-warning badge-list",tagName:"span",ui:{deleteBtn:'span[data-role="delete"]'},events:{"click @ui.deleteBtn":function(){this.model.destroy()}}}),TagsView=Marionette.CollectionView.extend({className:"",childView:TagView});module.exports=Marionette.View.extend({template:require(404),className:"row",behaviors:[SaveBehavior],regions:{customers:{el:'span[data-role="customers"]',replaceElement:!0},groups:{el:'span[data-role="groups"]',replaceElement:!0}},ui:{dropGrp:'.dropdown[data-role="group"]',dropCust:'.dropdown[data-role="customer"]',selGrp:'.dropdown[data-role="group"] li[data-role="selection"]',selCust:'.dropdown[data-role="customer"] li[data-role="selection"]'},events:{"keyup @ui.dropGrp input":_.debounce(function(e){this.triggerInput(Backbone.$(e.currentTarget),"grp")},300),"mousedown @ui.dropGrp input":_.debounce(function(e){this.triggerInput(Backbone.$(e.currentTarget),"grp")},300),"keyup @ui.dropCust input":_.debounce(function(e){this.triggerInput(Backbone.$(e.currentTarget),"cust")},300),"mousedown @ui.dropCust input":_.debounce(function(e){this.triggerInput(Backbone.$(e.currentTarget),"cust")},300),"click @ui.selGrp":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||this.triggerMethod("select:grp",t)},"click @ui.selCust":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||this.triggerMethod("select:cust",t)}},term:null,initialize:function(e){this.mergeOptions(e,[]),this.term={cust:null,grp:null};var t=Backbone.Model.extend({defaults:{name:"",id:null},isNew:function(){return!0}});this.customers=new Customers,this.groups=new Groups,this.selected_groups=new Backbone.Collection,this.selected_customers=new Backbone.Collection,this.selected_groups.model=this.selected_customers.model=t,this.suggestions_groups=[],this.suggestions_customers=[];var s=_.filter(this.getOption("restrictions"),function(e){return e.customer_id});s=_.map(s,function(e){return{id:e.customer_id,name:e.customer_firstname+" "+e.customer_lastname}}),this.selected_customers.add(s);var i=_.filter(this.getOption("restrictions"),function(e){return e.group_id});i=_.map(i,function(e){return{id:e.group_id,name:e.group_name}}),this.selected_groups.add(i),this.listenTo(this.selected_customers,"update",function(){this.triggerMethod("field:change")}.bind(this)),this.listenTo(this.selected_groups,"update",function(){this.triggerMethod("field:change")}.bind(this))},onRender:function(){this.showChildView("customers",new TagsView({collection:this.selected_customers})),this.showChildView("groups",new TagsView({collection:this.selected_groups}))},triggerInput:function(e,t){e.val()!==this.term[t]&&(this.term[t]=e.val(),this.triggerMethod("input:"+t,this.term[t],this))},onInputGrp:function(e){this.groups.suggest(e,5,this.selected_groups.pluck("id")).done(function(e){this.suggestions_groups=e,this.showResults(e,this.getUI("dropGrp"))}.bind(this))},onSelectGrp:function(e){if(!(e>this.suggestions_groups.length)){var t=this.suggestions_groups[e];t&&this.selected_groups.add({name:t.name,id:t.group_id})}},onInputCust:function(e){this.customers.suggest(e,5,this.selected_customers.pluck("id")).done(function(e){this.suggestions_customers=e,this.showResults(e,this.getUI("dropCust"))}.bind(this))},onSelectCust:function(e){if(!(e>this.suggestions_customers.length)){var t=this.suggestions_customers[e];t&&this.selected_customers.add({name:t.firstname+" "+t.lastname,id:t.customer_id})}},showResults:function(e,t){var s="";s=e.length>0?_.reduce(e,function(e,t,s){return e+(t.customer_id?formatCustomer(t,s):formatGroup(t,s))},""):'<li><span class="dropdown-item dropdown-item-empty"><span class="md-icon md-no-result"></span> Aucun résultat</span></li>',t.children("ul").html(s),t.addClass("show")},getRestrictions:function(){return{groups:this.selected_groups.pluck("id"),customers:this.selected_customers.pluck("id")}}});
},{"24":24,"384":384,"389":389,"404":404,"undefined":undefined}],415:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608),SelectView=require(139);module.exports=Marionette.View.extend({template:require(405),className:"container",service:"customers",behaviors:[FormBehavior],fields:["allow_registration","allow_login","validation","default_group_id","terms","processing_purposes"],regions:{groups:{el:"div[data-role='groups']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["model","groups"])},templateContext:function(){return{enableExtranet:this.getOption("enableExtranet")}},onRender:function(){this.getOption("enableExtranet")&&this.showChildView("groups",new SelectView({collection:this.groups,selected:this.model.get("default_group_id"),name:"default_group_id",emptyLabel:"Aucun groupe"}))},onSave:function(){var e=Forms.extractFields(this.fields,this);return e.allow_registration="1"==e.allow_registration,e.allow_login="1"==e.allow_login,this.model.save(e,{patch:!0,wait:!0})}});
},{"139":139,"27":27,"405":405,"608":608,"undefined":undefined}],416:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ActiveLinksBehaviors=require(18);module.exports=Marionette.View.extend({template:require(406),service:"customers",behaviors:[ActiveLinksBehaviors],templateContext:function(){var e=Backbone.Radio.channel("app").request("ctx:session");return{has_feature_extranet:e.hasFeature("extranet")}}});
},{"18":18,"406":406,"undefined":undefined}],417:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Field=CollectionUtils.KiubiModel.extend({urlRoot:function(){return"sites/@site/forms/"+this.get("form_id")+"/fields"},idAttribute:"field_id",defaults:{field_id:null,form_id:null,name:"",type:"",use_for_exp:!1,is_in_subject:!1,is_enabled:!1,is_required:!1,values:[],help:"",position:0,creation_date:"",modification_date:""},getTypes:function(){return[{type:"text",label:"Texte"},{type:"textarea",label:"Texte multiligne"},{type:"date",label:"Date"},{type:"datetime",label:"Date et heure"},{type:"numbers",label:"Que des chiffres"},{type:"letters",label:"Que des lettres"},{type:"email",label:"Email"},{type:"gender",label:"Civilité"},{type:"select",label:"Liste déroulante"},{type:"checkbox",label:"Cases à cocher"},{type:"radio",label:"Boutons radio"},{type:"fieldset",label:"Groupe de champs (fieldset)"},{type:"upload",label:"Fichier à envoyer"},{type:"department",label:"Département"},{type:"region",label:"Région"},{type:"country",label:"Pays"}]}});module.exports=CollectionUtils.KiubiCollection.extend({url:function(){return"sites/@site/forms/"+this.form_id+"/fields"},form_id:null,model:Field,parse:function(e){return this.meta=e.meta,_.each(e.data,function(e){e.form_id=this.form_id}.bind(this)),e.data},reOrder:function(e){return Backbone.ajax({url:this.url(),method:"PUT",data:{order:e}})}});
},{"606":606,"undefined":undefined}],418:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Form=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/forms",idAttribute:"form_id",defaults:{form_id:null,name:"",is_enabled:!1,use_captcha:!1,recipient:"",subject:"",copy_to_sender:!1,message:"",replies_count:0,replies_unread_count:0,creation_date:"",modification_date:"",form_key:"",processing_purposes:"",is_consent_required:!1},duplicate:function(e){var t=this,i=e||{};return Backbone.ajax({url:"sites/@site/forms/"+this.get("form_id"),method:"POST",data:i}).then(function(e,i){var o=t.clone();return o.set(o.parse({data:e,meta:i})),o})}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/forms",model:Form,promisedSelect:function(e){var t=this;return this.fetch().then(function(){var i=new CollectionUtils.SelectCollection,o=[];return t.each(function(t){o.push({value:t.get("form_id"),label:t.get("name"),selected:e&&t.get("form_id")==e})}),i.add(o),i})}});
},{"606":606,"undefined":undefined}],419:[function(require,module,exports){
function checkExport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/export/forms/responses/"+t,method:"GET"}).then(function(e,t){return e})}var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Job=require(476),Response=CollectionUtils.KiubiModel.extend({urlRoot:function(){return"sites/@site/forms/responses"},idAttribute:"response_id",defaults:{response_id:null,form_id:0,form_name:"",subject:"",is_read:!1,email_status:null,fields:[],ip:"",reverse_host:"",creation_date:""},getSummary:function(){var e=115;return _.reduce(this.get("fields"),function(t,n){if(t.length>=e)return t;var r="";return"text"==n.type?r=n.value:"file"==n.type&&(r=n.value.name),t+=n.name+" "+r+" ",t.length>=e?t.substring(0,e-3)+"...":t},"")},getEmailStatus:function(){switch(this.get("email_status")){default:return null;case"SENT":return{label:"L'email de notification a été envoyé",warning:!1};case"DISABLED":return{label:"Pas d'envoi d'email de notification",warning:!0};case"DISABLED_CAPTCHA":return{label:"Non : le captcha est désactivé",warning:!0};case"CANCELED_TPL":return{label:"Non : le template de l'email est introuvable",warning:!0};case"CANCELED_SPAM":return{label:"Non : le contenu est probablement un spam",warning:!0}}}});module.exports=CollectionUtils.KiubiCollection.extend({url:function(){return"sites/@site/forms/responses"},model:Response,bulkRead:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_read")?Backbone.$.Deferred().resolve():e.save({is_read:!0},{patch:!0})},e)},bulkUnred:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_read")?e.save({is_read:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkGroupAction(this,function(e){return Backbone.ajax({url:"sites/@site/forms/responses",method:"DELETE",data:{responses:e}})},e,100).done(function(e){this.remove(e)}.bind(this))},exportAll:function(e){return Backbone.ajax({url:"sites/@site/export/forms/responses",method:"POST",data:e}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkExport(t)})})}});
},{"476":476,"606":606,"undefined":undefined}],420:[function(require,module,exports){
function HeaderTabsForm(e){return[{title:"Formulaire",url:"/forms/"+e,icon:"md-forms-detail"},{title:"Données personnelles",url:"/forms/"+e+"/gdpr",icon:"md-forms-gdpr"},{title:"Paramètres",url:"/forms/"+e+"/settings",icon:"md-forms-settings"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Router=require(612),Controller=require(34),Forms=require(418),Fields=require(417),Responses=require(419),FormsView=require(433),InboxView=require(435),FormView=require(432),SettingsView=require(436),GdprView=require(434),SidebarMenuView=require(437),FormsController=Controller.extend({sidebarMenuService:"forms",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Dismoi",href:"/forms"}],showInbox:function(e){var o=this.parseQueryString(e,{id:null,is_read:null,r:null}),r=new InboxView({collection:new Responses,forms:new Forms,filters:o});this.navigationController.showContent(r),r.start(),this.setHeader({title:"Boite de réception"})},showForms:function(){var e=new FormsView({collection:new Forms});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Tous les formulaires"},[{title:"Ajouter un formulaire",callback:"actionNewForm"}])},actionNewForm:function(){var e=new Forms,o=new e.model({name:"Intitulé par défaut",is_visible:!1});return o.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/forms/"+o.get("form_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showForm:function(e){var o=new Forms,r=new o.model({form_id:e});r.fetch().done(function(){var o=new Fields;o.form_id=e,o.fetch();var i=new FormView({model:r,collection:o});this.listenTo(r,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0)}.bind(this)),this.listenTo(r,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/forms")}),this.navigationController.showContent(i),this.setHeader({title:r.get("name")},[{title:"Dupliquer le formulaire",callback:["actionDuplicateForm",e]},{title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"}],HeaderTabsForm(e))}.bind(this)).fail(this.failHandler("Formulaire introuvable"))},actionDuplicateForm:function(e){var o=new Forms,r=new o.model({form_id:e}),i=this.navigationController;return r.fetch().then(function(){r.duplicate({name:"Copie de "+r.get("name")}).done(function(e){i.showOverlay(300),i.navigate("/forms/"+e.get("form_id"))}).fail(function(e){i.showErrorModal(e)})},function(e){i.showErrorModal(e)})},showGdpr:function(e){var o=new Forms,r=new o.model({form_id:e});r.fetch().done(function(){var o=new GdprView({model:r});this.navigationController.showContent(o),this.setHeader({title:r.get("name")},[{title:"Enregistrer",callback:"actionSave"}],HeaderTabsForm(e))}.bind(this)).fail(this.failHandler("Formulaire introuvable"))},showSettings:function(e){var o=new Forms,r=new o.model({form_id:e});r.fetch().done(function(){var o=new SettingsView({model:r});this.navigationController.showContent(o),this.setHeader({title:r.get("name")},[{title:"Enregistrer",callback:"actionSave"}],HeaderTabsForm(e))}.bind(this)).fail(this.failHandler("Formulaire introuvable"))}});module.exports=Router.extend({controller:new FormsController,appRoutes:{"forms/inbox":"showInbox",forms:"showForms","forms/:id":"showForm","forms/:id/settings":"showSettings","forms/:id/gdpr":"showGdpr"},onRoute:function(e){var o=Backbone.Radio.channel("app").request("ctx:session");return o.hasScope("site:modules")?void this.controller.showSidebarMenu():(this.controller.navigationController.navigate("/"),!1)}});
},{"34":34,"417":417,"418":418,"419":419,"432":432,"433":433,"434":434,"435":435,"436":436,"437":437,"612":612,"undefined":undefined}],421:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form data-role="part"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé du formulaire</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le formulaire"></div><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked" ':"")?"":__t)+'><label for="is_enabled1" class="visible">Visible</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked" ')?"":__t)+'><label for="is_enabled0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article></form><article data-role="list"></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],422:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-4"><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_enabled" id="f_is_enabled1" value="1" type="radio" checked="checked"><label for="f_is_enabled1" class="visible">Visible</label><input name="is_enabled" id="f_is_enabled0" value="0" type="radio"><label for="f_is_enabled0" class="not-visible">Masqué</label></div></div></div><div class="col-4" data-role="inputs"><div class="form-group"><label>Champ à renseigner</label><div class="form-check"><input name="is_required" id="f_is_required1" value="1" type="radio" checked="checked"><label for="f_is_required1" class="">Obligatoire</label><input name="is_required" id="f_is_required0" value="0" type="radio"><label for="f_is_required0" class="">Facultatif</label></div></div></div><div class="col-4" data-role="inputs"><div class="form-group"><label>Ajouter au sujet</label><div class="form-check"><input name="is_in_subject" id="f_is_in_subject1" value="1" type="radio"><label for="f_is_in_subject1" class="">Oui</label><input name="is_in_subject" id="f_is_in_subject0" value="0" checked="checked" type="radio"><label for="f_is_in_subject0" class="">Non</label></div></div></div></div><div class="form-group"><label class="required" for="f_name">Label du champ</label><input class="form-control" id="f_name" name="name" placeholder="Label du champ tel qu\'il apparaitra dans le formulaire"></div><div class="form-group" data-role="inputs"><label for="f_help">Aide à la saisie</label><input class="form-control" id="f_help" name="help" placeholder="Courte description pour aider à correctement renseigner le champ"></div><div class="row"><div class="col-4"><div class="form-group"><label for="f_type">Type de champ</label><select name="type" id="f_type" data-style="selectify"> ',_.each(typeList,function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'">'+(null==(__t=e.label)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div><div class="col-4" data-role="email"><div class="form-group"><label>Email de l\'expéditeur</label><div class="form-check"><input name="use_for_exp" id="f_use_for_exp1" value="1" type="radio" checked="checked"><label for="f_use_for_exp1" class="visible">Oui</label><input name="use_for_exp" id="f_use_for_exp0" value="0" type="radio"><label for="f_use_for_exp0" class="not-visible">Non</label></div></div></div></div><div class="form-group" data-role="values"><label class="required">Liste des valeurs</label><input class="form-control" name="values" placeholder="Valeur 1, Valeur 2, Valeur 3, ..."></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show"><span class="page-add md-icon md-add-page"></span>Ajouter un champ</a></div>';return __p};
},{"undefined":undefined}],423:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col-auto"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_enabled?" <span>"+(null==(__t=typeLabel)?"":_.escape(__t))+"</span> ":' <span class="text-danger">Masqué</span> ',__p+=' </div><div class="col-4">',is_required&&(__p+='<span class="badge badge-primary">Obligatoire</span>'),__p+='</div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-4"><div class="form-group"><label>Affichage</label><div class="form-check"><input name="is_enabled" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' ><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_is_enabled1" class="visible">Visible</label><input name="is_enabled" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_is_enabled0" class="not-visible">Masqué</label></div></div></div><div class="col-4" data-role="inputs"><div class="form-group"><label>Champ à renseigner</label><div class="form-check"><input name="is_required" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_required1" value="1" type="radio" '+(null==(__t=is_required?'checked="checked"':"")?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_required1" class="">Obligatoire</label><input name="is_required" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_required0" value="0" type="radio" '+(null==(__t=is_required?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_required0" class="">Facultatif</label></div></div></div><div class="col-4" data-role="inputs"><div class="form-group"><label>Ajouter au sujet</label><div class="form-check"><input name="is_in_subject" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_in_subject1" value="1" type="radio" '+(null==(__t=is_in_subject?'checked="checked"':"")?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_in_subject1" class="">Oui</label><input name="is_in_subject" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_in_subject0" value="0" type="radio" '+(null==(__t=is_in_subject?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_in_subject0" class="">Non</label></div></div></div></div><div class="form-group"><label class="required" for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'name">Label du champ</label><input class="form-control" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Label du champ tel qu\'il apparaitra dans le formulaire"></div><div class="form-group" data-role="inputs"><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'help">Aide à la saisie</label><input class="form-control" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'help" name="help" value="'+(null==(__t=help)?"":_.escape(__t))+'" placeholder="Courte description pour aider à correctement renseigner le champ"></div><div class="row"><div class="col-4"><div class="form-group"><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'type">Type de champ</label><select name="type" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'type" data-style="selectify"> ',_.each(typeList,function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'" '+(null==(__t=type==e.type?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.label)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div><div class="col-4" data-role="email"><div class="form-group"><label>Email de l\'expéditeur</label><div class="form-check"><input name="use_for_exp" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_use_for_exp1" value="1" type="radio" '+(null==(__t=use_for_exp?'checked="checked"':"")?"":__t)+' ><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_use_for_exp1" class="visible">Oui</label><input name="use_for_exp" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_use_for_exp0" value="0" type="radio" '+(null==(__t=use_for_exp?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_use_for_exp0" class="not-visible">Non</label></div></div></div></div><div class="form-group" data-role="values"><label class="required">Liste des valeurs</label><input class="form-control" name="values" value="'+(null==(__t=values)?"":_.escape(__t))+'" placeholder="Valeur 1, Valeur 2, Valeur 3, ..."></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],424:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/formulaires-dismoi.html" class="md-icon md-help float-right" target="_blank"></a> Dismoi? est le gestionnaire de formulaires de Kiubi. Il vous permet d\'<strong>éditer et gérer différents types de formulaires</strong> pour le site Internet : contact, recrutement, demande de devis, etc.</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],425:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters align-items-center"><div class="col item-body"><span><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_enabled?" ":' <span class="text-danger">Masqué</span> ',__p+=' </span></div><div class="col-4"> ',replies_count>0?(__p+=' <span><a href="/forms/inbox?id='+(null==(__t=form_id)?"":_.escape(__t))+'"> '+(null==(__t=plural(replies_count,"%d réponse","%d réponses"))?"":_.escape(__t))+"</a> ",replies_unread_count>0&&(__p+=' <strong><a href="/forms/inbox?id='+(null==(__t=form_id)?"":_.escape(__t))+'&is_read=0">('+(null==(__t=plural(replies_unread_count,"%d non-lue","%d non-lues"))?"":_.escape(__t))+")</a></strong> "),__p+=" </span> "):__p+=' <span class="text-muted">—</span> ',__p+=' </div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/forms/'+(null==(__t=form_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],426:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Collecte de données personnelles</h1></header><div class="post-content"><p>Le "<a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees" target="_blank">Réglement Général sur la Protection des Données personnelles (RGPD)</a>" impose à toute personne morale le respect des principes et des règles régissant la protection des personnes physiques à l\'égard du <strong>traitement des données à caractère personnel</strong>. Si ce formulaire collecte ce type de données, il est obligatoire :</p><ol><li>D\'activer la demande de consentement préalable</li><li>De préciser les finalités de traitements des données collectées</li><li>D\'ajouter un lien vers la page web dédiée aux engagements pris pour la protection des données personnelles</li></ol><div class="form-group"><label for="">Consentement préalable</label><div class="form-check"><input name="is_consent_required" id="is_consent_required1" value="1" type="radio" '+(null==(__t=is_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_consent_required1" class="visible">Activé</label><input name="is_consent_required" id="is_consent_required0" value="0" type="radio" '+(null==(__t=is_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_consent_required0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="required" for="processing_purposes">Finalités de traitements</label><p>Les finalités de traitements s\'affichent à la fin du formulaire.</p><textarea class="form-control" id="processing_purposes" name="processing_purposes" placeholder="" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=processing_purposes)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],427:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",response_id?(__p+=' <div class="answer-header"><p>'+(null==(__t=creation_date)?"":_.escape(__t))+"</p><h1>#"+(null==(__t=response_id)?"":_.escape(__t))+" - "+(null==(__t=subject)?"":_.escape(__t))+'</h1>Réponse à <a href="/forms/'+(null==(__t=form_id)?"":_.escape(__t))+'">'+(null==(__t=form_name)?"":_.escape(__t))+"</a></div> ",_.each(fields,function(e){__p+=' <div class="form-group"><label>'+(null==(__t=e.name)?"":_.escape(__t))+'</label><p class="form-control-static"> ',__p+=e.value&&"text"==e.type?" "+(null==(__t=nl2br(e.value))?"":__t)+" ":e.value&&"file"==e.type?' <a target="_blank" href="'+(null==(__t=convertMediaPath("/media/multiform/"+e.value.media_id+"."+e.value.ext))?"":__t)+'">'+(null==(__t=e.value.name)?"":_.escape(__t))+"</a> ":' <em class="text-muted">Non renseigné</em> ',__p+=" </p></div> "}),__p+=' <div class="form-group"><label>IP | Host</label><p class="form-control-static">'+(null==(__t=ip)?"":_.escape(__t))+" | "+(null==(__t=reverse_host)?"":_.escape(__t))+"</p></div> ",readableStatus&&(__p+=' <div class="form-group"><label>Envoi de l\'email de notification</label><p class="form-control-static '+(null==(__t=readableStatus.warning?"text-danger":"text-success")?"":_.escape(__t))+'">'+(null==(__t=readableStatus.label)?"":_.escape(__t))+"</p></div> "),__p+=" "):__p+=" ",__p+="";return __p};
},{"undefined":undefined}],428:[function(require,module,exports){
arguments[4][213][0].apply(exports,arguments)
},{"213":213,"undefined":undefined}],429:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="response_'+(null==(__t=response_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=response_id)?"":_.escape(__t))+'" type="checkbox"><label for="response_'+(null==(__t=response_id)?"":_.escape(__t))+'"></label></div><div class="col item-body"><span data-role="read" class="read '+(null==(__t=is_read?"":"not-read")?"":_.escape(__t))+'" title="'+(null==(__t=is_read?"Marquer comme non lu":"Marquer comme lu")?"":_.escape(__t))+'"></span><h4>#'+(null==(__t=response_id)?"":_.escape(__t))+"</h4> "+(null==(__t=creation_date_fromnow)?"":_.escape(__t))+" <span>"+(null==(__t=subject)?"":_.escape(__t))+'</span><p class="item-detail">'+(null==(__t=summary)?"":_.escape(__t))+"</p></div></div>";return __p};
},{"undefined":undefined}],430:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres généraux</h1></header><div class="post-content"><div class="form-group"><label class="required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche une fois le formulaire validé.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=message)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label>Identifiant API Front-office</label><p class="form-control-static">'+(null==(__t=form_key)?"":_.escape(__t))+'</p></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Emails de notification</h1></header><div class="post-content"><div class="alert alert-warning shadow-none p-3" role="alert"><span class="md-icon md-warning align-middle mr-2"></span>Les emails de notifications sont envoyés uniquement <strong>si le captcha est activé</strong>.</div><p>À chaque nouvelle réponse au formulaire, une copie peut être envoyée par email à plusieurs destinataires de votre choix ainsi qu\'à l\'expéditeur de la réponse, si ce dernier a renseigné une adresse email valide.</p><div class="form-group"><label for="subject">Sujet de l\'email</label><input class="form-control" id="subject" name="subject" value="'+(null==(__t=subject)?"":_.escape(__t))+'" placeholder="Sujet de l\'email lors d\'une nouvelle réponse"></div><div class="form-group"><label for="recipient">Destinataires</label><p>Saisissez les emails des destinataires, séparés par des virgules, qui seront en copie des nouvelles réponses.</p><input class="form-control" id="recipient" name="recipient" value="'+(null==(__t=recipient)?"":_.escape(__t))+'" placeholder="Emails des destinataires séparés par des virgules"></div><div class="form-group"><label for="">Envoyer une copie à l\'expéditeur (si possible)</label><div class="form-check"><input name="copy_to_sender" id="copy_to_sender1" value="1" type="radio" '+(null==(__t=copy_to_sender?'checked="checked" ':"")?"":__t)+'><label for="copy_to_sender1" class="">Oui</label><input name="copy_to_sender" id="copy_to_sender0" value="0" type="radio" '+(null==(__t=copy_to_sender?"":'checked="checked" ')?"":__t)+'><label for="copy_to_sender0" class="">Non</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Captcha</h1></header><div class="post-content"><p>Le "captcha" est un système anti-spam pour se prémunir contre l\'usage abusif des formulaires. Plusieurs captchas différents sont disponibles : une validation manuelle par l\'internaute ou le système invisible Google reCaptcha.</p><div class="form-group"><label for="">Utilisation du captcha</label><div class="form-check"><input name="use_captcha" id="use_captcha1" value="1" type="radio" '+(null==(__t=use_captcha?'checked="checked" ':"")?"":__t)+'><label for="use_captcha1" class="visible">Activé</label><input name="use_captcha" id="use_captcha0" value="0" type="radio" '+(null==(__t=use_captcha?"":'checked="checked" ')?"":__t)+'><label for="use_captcha0" class="not-visible">Désactivé</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],431:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Dismoi</h2><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="/forms/inbox">',unread_count>0&&(__p+='<span class="badge">'+(null==(__t=unread_count)?"":_.escape(__t))+"</span>"),__p+='Boite de réception</a></li><li class="nav-item"><a class="nav-link" href="/forms">Formulaires</a></li></ul>';return __p};
},{"undefined":undefined}],432:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(27),Forms=require(608),RowActionsBehavior=require(31),SelectifyBehavior=require(26),ListView=require(128),NewRowView=Marionette.View.extend({template:require(422),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]',type:'select[name="type"]',inputs:'div[data-role="inputs"]',values:'div[data-role="values"]',email:'div[data-role="email"]'},events:{"change @ui.type":"onChangeType"},onRender:function(){this.onChangeType()},templateContext:function(){var e=new this.collection.model;return{typeList:e.getTypes()}},onChangeType:function(e){var i=this.getUI("type").val();"email"==i?this.getUI("email").show():this.getUI("email").hide(),"checkbox"==i||"select"==i||"radio"==i?this.getUI("values").show():this.getUI("values").hide(),"fieldset"==i?this.getUI("inputs").hide():this.getUI("inputs").show()},onActionSave:function(){var e=new this.collection.model({form_id:this.collection.form_id});return e.save(Forms.extractFields(["is_enabled","is_required","name","help","type","use_for_exp","is_in_subject","values"],this)).done(function(){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),RowView=Marionette.View.extend({template:require(423),className:"list-item",behaviors:[RowActionsBehavior,SelectifyBehavior],ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]',type:'select[name="type"]',inputs:'div[data-role="inputs"]',values:'div[data-role="values"]',email:'div[data-role="email"]'},events:{"change @ui.type":"onChangeType"},onRender:function(){this.onChangeType()},templateContext:function(){var e=_.findWhere(this.model.getTypes(),{type:this.model.get("type")});return{typeList:this.model.getTypes(),typeLabel:e?e.label:""}},onChangeType:function(e){var i=this.getUI("type").val();"email"==i?this.getUI("email").show():this.getUI("email").hide(),"checkbox"==i||"select"==i||"radio"==i?this.getUI("values").show():this.getUI("values").hide(),"fieldset"==i?this.getUI("inputs").hide():this.getUI("inputs").show()},onActionDelete:function(){return this.model.destroy()},onActionSave:function(){return this.model.save(Forms.extractFields(["is_enabled","is_required","name","help","type","use_for_exp","is_in_subject","values"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}});module.exports=Marionette.View.extend({template:require(421),className:"container",service:"forms",behaviors:[FormBehavior],fields:["name","is_enabled"],regions:{list:{el:"article[data-role='list']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["model","collection"])},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Liste des champs",scrollThreshold:920}))},onSave:function(){return this.getChildView("list")&&this.getChildView("list").getChildren().each(function(e){e.isEditing&&e.onActionSave()}),this.model.save(Forms.extractFields(this.fields,this,{selector:'form[data-role="part"]'}),{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})},onChildviewSortChange:function(e){this.collection.reOrder(e.list)}});
},{"128":128,"26":26,"27":27,"31":31,"421":421,"422":422,"423":423,"608":608,"undefined":undefined}],433:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ListView=require(128),RowActionsBehavior=require(31),format=require(607),RowView=Marionette.View.extend({template:require(425),className:"list-item",behaviors:[RowActionsBehavior],templateContext:function(){return{plural:format.plural,creation_date:format.formatDateTime(this.model.get("creation_date"))}},onActionDelete:function(){return this.model.destroy()}});module.exports=Marionette.View.extend({template:require(424),className:"container",service:"forms",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des formulaires"}))},start:function(){this.collection.fetch()}});
},{"128":128,"31":31,"424":424,"425":425,"607":607,"undefined":undefined}],434:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),WysiwygBehavior=require(28),Forms=require(608);module.exports=Marionette.View.extend({template:require(426),className:"container",service:"forms",behaviors:[FormBehavior,WysiwygBehavior],fields:["processing_purposes","is_consent_required"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"28":28,"426":426,"608":608,"undefined":undefined}],435:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606),_=require("underscore"),format=require(607),moment=require("moment"),ControllerChannel=Backbone.Radio.channel("controller"),RowActionsBehavior=require(31),Session=Backbone.Radio.channel("app").request("ctx:session"),DetailView=Marionette.View.extend({template:require(427),className:"post-content answer-detail",templateContext:function(){return{response_id:this.model?this.model.get("response_id"):"",creation_date:format.formatLongDateTime(this.model.get("creation_date")),convertMediaPath:Session.convertMediaPath.bind(Session),nl2br:function(e){return _.escape(""+e).replace(/(\r\n|\n\r|\r|\n)+/g,"<br />")},readableStatus:this.model.getEmailStatus()}},showDetail:function(e){this.model=e,this.render()}}),RowView=Marionette.View.extend({template:require(429),className:"list-item answers-item",ui:{read:'span[data-role="read"]'},events:{"click .row":"onSelect","click @ui.read":"onToggleRead"},behaviors:[RowActionsBehavior],initialize:function(e){this.mergeOptions(e,["model","proxy"])},templateContext:function(){var e,t=moment(this.model.get("creation_date"),"YYYY-MM-DD HH:mm:ss"),i=moment().diff(t,"days");return e=i>=7?format.formatLongDateTime(this.model.get("creation_date")):t.fromNow(),{creation_date:format.formatLongDateTime(this.model.get("creation_date")),creation_date_fromnow:e,summary:this.model.getSummary()}},onSelect:function(e){"LABEL"!=e.target.tagName&&"INPUT"!=e.target.tagName&&this.proxy.trigger("select:row",this.model)},onToggleRead:function(e){e.preventDefault();var t=this.model.get("is_read")?1:-1;return this.model.save({is_read:!this.model.get("is_read")},{patch:!0}).done(function(){ControllerChannel.trigger("refresh:forms",t)}),!1}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(428),className:"container-fluid",service:"forms",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},detailView:null,filters:null,initialize:function(e){this.mergeOptions(e,["collection"]),this.filters={id:this.getOption("filters")&&this.getOption("filters").id?this.getOption("filters").id:null,is_read:this.getOption("filters")&&this.getOption("filters").is_read?this.getOption("filters").is_read:null},this.empty=new this.collection.model,this.detailView=new DetailView({model:this.empty}),this.listenTo(this.collection,"sync",function(e){if(e.model)if(this.collection.length>0){var t;this.getOption("filters")&&this.getOption("filters").r&&(t=this.collection.findWhere({response_id:parseInt(this.getOption("filters").r)})),t||(t=this.collection.at(0)),this.onChildviewSelectRow(t)}else this.onChildviewSelectRow(this.empty)}.bind(this));var t=Backbone.Radio.channel("app").request("ctx:notificationCenter");t&&this.listenTo(t,"notification:response",function(){var e=_.compact(this.filters);0===e.length&&this.start()})},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,extraClassname:"answers",extraListClassname:"answers-list",detailView:this.detailView,scrollContentEl:"div.answers-list",renderInterval:3e4,title:"Liste des réponses",selection:[{title:"Marquer lue",callback:this.readRep.bind(this)},{title:"Marquer non-lue",callback:this.unreadRep.bind(this)},{title:"Supprimer",callback:this.deleteRep.bind(this),confirm:!0}],filters:[{id:"form",extraClassname:"select-category",title:"Tous les formulaires",collectionPromise:this.getOption("forms").promisedSelect(this.filters.id)},{id:"read",extraClassname:"select-state",title:"Tous les états",collectionPromise:new CollectionUtils.SelectCollection([{value:"read",label:"Lues",selected:1==this.filters.is_read},{value:"unread",label:"Non-lues",selected:0==this.filters.is_read}])}],xtra:[{id:"export",extraClassname:"md-export",type:"button",collectionPromise:new CollectionUtils.SelectCollection({value:"export",label:"Exporter les réponses",selected:!1})}]}))},start:function(){var e={form_id:this.filters.id,extra_fields:"forms"};null!=this.filters.is_read&&(e.is_read=this.filters.is_read),this.collection.fetch({reset:!0,data:e})},readRep:function(e){var t=this.collection.reduce(function(t,i){return!i.get("is_read")&&_.contains(e,""+i.get("response_id"))&&t--,t},0);return this.collection.bulkRead(e).done(function(){ControllerChannel.trigger("refresh:forms",t)})},unreadRep:function(e){var t=this.collection.reduce(function(t,i){return i.get("is_read")&&_.contains(e,""+i.get("response_id"))&&t++,t},0);return this.collection.bulkUnred(e).done(function(){ControllerChannel.trigger("refresh:forms",t)})},deleteRep:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){switch(e.model.get("id")){case"form":this.onFormFilterChange(e);break;case"read":this.onReadFilterChange(e);break;case"export":this.onExportFilterChange(e)}},onFormFilterChange:function(e){this.filters.id=""==e.value?null:e.value,this.start()},onReadFilterChange:function(e){""===e.value||null===e.value?this.filters.is_read=null:this.filters.is_read="read"==e.value?"1":"0",this.start()},onExportFilterChange:function(e){if(e.view){var t=e.view;if("export"==e.value){if(t.collection.length>1)return;if(!this.filters.id){var i=Backbone.Radio.channel("app").request("ctx:navigationController");return void i.showErrorModal("Veuillez choisir un formulaire")}t.overrideExtraClassname("md-loading"),t.render(),this.collection.exportAll({form_id:this.filters.id}).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}},onChildviewSelectRow:function(e){e.isNew()||e.get("is_read")||e.save({is_read:!0},{patch:!0}).done(function(){ControllerChannel.trigger("refresh:forms",-1)}),this.getChildView("list").getChildren().each(function(t){t.model==e?t.$el.addClass("active"):t.$el.removeClass("active")}),this.detailView.showDetail(e)}});
},{"128":128,"31":31,"427":427,"428":428,"429":429,"606":606,"607":607,"undefined":undefined}],436:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),WysiwygBehavior=require(28),Forms=require(608);module.exports=Marionette.View.extend({template:require(430),className:"container",service:"forms",behaviors:[FormBehavior,WysiwygBehavior],fields:["use_captcha","recipient","subject","copy_to_sender","message"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"28":28,"430":430,"608":608,"undefined":undefined}],437:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Forms=require(418),ControllerChannel=Backbone.Radio.channel("controller"),ActiveLinksBehaviors=require(18);module.exports=Marionette.View.extend({template:require(431),service:"forms",behaviors:[ActiveLinksBehaviors],initialize:function(e){this.unread_count=0,this.forms=new Forms,this.listenTo(this.forms,"sync",function(){this.unread_count=this.forms.reduce(function(e,r){return e+r.get("replies_unread_count")},0),this.render()}.bind(this)),this.forms.fetch(),this.listenTo(ControllerChannel,"refresh:forms",this.onRefreshForms)},templateContext:function(){return{unread_count:this.unread_count}},onRefreshForms:function(e){return null==e?void this.forms.fetch():(this.unread_count+e<0?this.unread_count=0:this.unread_count+=e,void this.render())}});
},{"18":18,"418":418,"431":431,"undefined":undefined}],438:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=function(){function e(){dataLayer.push(arguments)}var a=Backbone.Radio.channel("app").request("ctx:config");if(a&&a.get("ga_tracker")){var t=document.createElement("script");t.async=1,t.src="https://www.googletagmanager.com/gtag/js?id="+a.get("ga_tracker");var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",a.get("ga_tracker"));var r=Backbone.Radio.channel("app").request("ctx:app");r.on("navigate",function(t){e("config",a.get("ga_tracker"),{page_path:t})}),Backbone.Radio.channel("tracker").on("event",function(a){e("event",a.name||"click",{event_category:a.category||"",event_label:a.label||""})})}};
},{"undefined":undefined}],439:[function(require,module,exports){
module.exports=function(){var r=require(349);new r;var e=require(171);new e;var u=require(212);new u;var o=require(270);new o;var a=require(148);new a;var t=require(442);new t;var i=require(392);new i;var n=require(420);new n;var q=require(481);new q;var v=require(563);new v;var w=require(591);new w;var s=require(438);new s};
},{"148":148,"171":171,"212":212,"270":270,"349":349,"392":392,"420":420,"438":438,"442":442,"481":481,"563":563,"591":591}],440:[function(require,module,exports){
function checkExport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/export/media/folder/"+t,method:"GET"}).then(function(e,t){return e})}var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),api=require(603),Job=require(476),File=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/media/files",idAttribute:"media_id",file:null,uploadPreview:null,uploadProgression:{prct:0,status:"pending",error:""},defaults:{media_id:null,name:"",folder_id:0,description:"",original_name:"",type:"",ext:"",mime:"",weight:"",width:"",height:"",creation_date:"",modification_date:"",thumb:[]},setFile:function(e){if(this.setProgression(0,"pending"),api.max_post_size&&e.size>api.max_post_size)return!1;if(this.set("name",e.name),this.set("ext",e.name.split(".").pop()),this.set("weight",e.size),this.set("type",e.type.match(/^image\//)?"image":"file"),this.file=e,"image"!=this.get("type"))return!0;var t=this,i=new Image,n=self.URL||self.webkitURL||self;if(n.createObjectURL)return i.onload=function(){t.uploadPreview=this.src,t.trigger("change:upload"),delete this},i.src=n.createObjectURL(e),!0;var r=new FileReader;return r.onload=function(e){i.onload=function(){t.uploadPreview=t.createThumbnail(this),t.trigger("change:upload"),delete this},i.src=e.target.result},r.readAsDataURL(e),!0},createThumbnail:function(e){var t=document.createElement("canvas");t.width=320,t.height=t.width/e.width*e.height;var i=t.getContext("2d",{alpha:!1});return i.drawImage(e,0,0,t.width,t.height),t.toDataURL("image/jpeg",.5)},upload:function(){var e=this,t=Backbone.$.Deferred(),i=this.file;if(this.setProgression(0,"pending"),api.max_post_size&&i.size>api.max_post_size)return t.reject("Ce fichier est trop volumineux"),this.setProgression(100,"fail","Ce fichier est trop volumineux"),t.promise();var n=new FormData;return n.append("name",e.get("name")),n.append("folder_id",e.get("folder_id")),n.append("file",i),Backbone.ajax({method:"POST",url:e.url(),contentType:!1,processData:!1,dataType:"json",xhr:function(){var t=Backbone.$.ajaxSettings.xhr();return t.upload.onprogress=function(t){t.lengthComputable?e.setProgression(t.loaded/t.total*100,"uploading"):e.setProgression(50,"uploading")},t.upload.onload=function(){e.setProgression(100,"uploading")},t},data:n}).done(function(i){if(i&&_.isNumber(i)){if(e.set("media_id",i),e.get("name")&&e.get("name").indexOf(".")>=0){var n=e.get("name").split(".").slice(0,-1).join(".");e.set("name",n)}return e.setProgression(100,"done"),void t.resolve()}e.setProgression(100,"fail"),t.reject("Fail")}).fail(function(){e.setProgression(100,"fail","Erreur inattendue"),t.reject("Fail")}),t.promise()},setProgression:function(e,t,i){this.uploadProgression.prct=e,this.uploadProgression.status=t,i&&(this.uploadProgression.error=i),this.trigger("change:upload")}});module.exports=CollectionUtils.KiubiCollection.extend({folder_id:null,url:function(){return this.folder_id?"sites/@site/media/folders/"+this.folder_id+"/files":"sites/@site/media/files"},model:File,upload:function(){var e=[];return this.each(function(t){"pending"==t.uploadProgression.status&&e.push(t.upload())}),Backbone.$.when.apply(this,e)},bulkDelete:function(e){return CollectionUtils.bulkGroupAction(this,function(e){return Backbone.ajax({url:"sites/@site/media/files",method:"DELETE",data:{medias:e}})},e,20).done(function(e){this.remove(e)}.bind(this))},bulkMove:function(e,t){return CollectionUtils.bulkAction(this,function(e){return e.get("folder_id")==t?Backbone.$.Deferred().resolve():e.save({folder_id:t},{patch:!0,wait:!0})},e)},exportAll:function(e){return Backbone.ajax({url:"sites/@site/export/media/folder",method:"POST",data:e}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkExport(t)})})},suggest:function(e,t){return Backbone.ajax({url:"sites/@site/suggest/media/files",data:{term:e,limit:t||5}}).then(function(e){return _.map(e,function(e){return{media_id:e.media_id,name:e.name}})})}});
},{"476":476,"603":603,"606":606,"undefined":undefined}],441:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(606),_=require("underscore"),Folder=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/media/folders",idAttribute:"folder_id",defaults:{folder_id:null,name:"",folder_key:"",parent_folder_id:0,is_bookmarked:!1,has_restrictions:!1,restrictions:[]}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/media/folders",model:Folder,getMenuTree:function(){var e={model:null,childs:[]},t={};return this.each(function(i){var r={model:i,childs:[]};t["i"+i.get("folder_id")]=r;var l;l=0==i.get("parent_folder_id")?e:t["i"+i.get("parent_folder_id")],l.childs.push(r)}),e},selectPayload:function(){var e=[],t={};return this.each(function(i){var r=1;i.get("parent_folder_id")>0&&(r=1+t["p"+i.get("parent_folder_id")]),t["p"+i.get("folder_id")]=r;var l={value:i.get("folder_id"),label:i.get("name"),indent:r};e.push(l)}),e},promisedSelect:function(e){var t=this;return this.fetch({data:{extra_fields:"recursive"}}).then(function(){var i=new CollectionUtils.SelectCollection,r=[],l={};return t.each(function(t){var i=1;t.get("parent_folder_id")>0&&(i=1+l["p"+t.get("parent_folder_id")]),l["p"+t.get("folder_id")]=i;var d={value:t.get("folder_id"),label:t.get("name"),indent:i,selected:e&&t.get("folder_id")==e};r.push(d)}),i.add(r),i})}});
},{"606":606,"undefined":undefined}],442:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var i=[];if(e.addDownloadFile&&i.push({title:"Télécharger",callback:["actionDownloadFile",e.addDownloadFile]}),e.addDownloadFolder&&i.push({title:"Télécharger",callback:["actionDownloadFolder",e.addDownloadFolder]}),e.addPublish&&i.push({title:"Publier un fichier",callback:["actionPublish",e.addPublish]}),e.addFolder&&i.push({title:"Ajouter un dossier",callback:["actionNewFolder",e.addFolder]}),e.addSave){var t={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};i.length<=1?i.push(t):i.splice(1,0,t)}return i}function HeaderTabsFolder(e){return[{title:"Dossier",url:"/media/folders/"+e+"/files",icon:"md-media-detail"},{title:"Paramètres",url:"/media/folders/"+e,icon:"md-media-settings"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Router=require(612),Controller=require(34),Folders=require(441),Files=require(440),ImportFtp=require(471),Ftp=require(551),FilesView=require(458),FolderView=require(459),FileView=require(455),PublishModalView=require(463),ImportFTPView=require(460),SidebarMenuView=require(464),MediaController=Controller.extend({sidebarMenuService:"media",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Médiathèque",href:"/media"}],showIndex:function(e){this.navigationController.navigate("/media/folders/2/files"+(e?"?"+e:""))},showFiles:function(e,i){var t=this.parseQueryString(i,{term:null}),r=new((new Folders).model)({folder_id:e});this.triggerSidebarMenu("change:folder",e);var o=new Files;o.folder_id=e,r.fetch().done(function(){this.navigationController.showContent(new FilesView({collection:o,folders:new Folders,filters:t})),this.setHeader({title:r.get("name")},getHeadersAction({addPublish:r.get("folder_id"),addFolder:r.get("folder_id")}),HeaderTabsFolder(e))}.bind(this)).fail(this.failHandler("Dossier introuvable"))},showFolder:function(e){var i=new((new Folders).model)({folder_id:e}),t=new Folders;t.fetch({data:{extra_fields:"recursive"}}),this.triggerSidebarMenu("change:folder",e),i.fetch().done(function(){var r=Backbone.Radio.channel("app").request("ctx:session"),o=new FolderView({model:i,folders:t,enableExtranet:r.hasFeature("extranet")});this.listenTo(i,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),this.triggerSidebarMenu("refresh:folders")}.bind(this)),this.listenTo(i,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/media/folders/"+i.get("parent_folder_id")+"/files"),this.triggerSidebarMenu("refresh:folders")}),this.navigationController.showContent(o),this.setHeader({title:i.get("name")},getHeadersAction({addSave:!0,addDownloadFolder:i.get("folder_id"),addPublish:i.get("folder_id"),addFolder:i.get("folder_id")}),HeaderTabsFolder(e))}.bind(this)).fail(this.failHandler("Dossier introuvable"))},actionNewFolder:function(e){var i=new((new Folders).model)({name:"Intitulé par défaut",parent_folder_id:e});return i.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/media/folders/"+i.get("folder_id")),this.triggerSidebarMenu("refresh:folders")}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},actionDownloadFolder:function(e){console.log("actionDownloadFolder",e)},showFile:function(e){function i(e,i){return[{href:"/media/folders/"+i.get("folder_id")+"/files",title:i.get("name")},{title:e.get("name")}]}var t,r=new((new Files).model)({media_id:e}),o=new Folders;o.fetch({data:{extra_fields:"recursive"}}),r.fetch().then(function(){return t=new((new Folders).model)({folder_id:r.get("folder_id")}),t.fetch()}).done(function(){this.triggerSidebarMenu("change:folder",r.get("folder_id"));var e=new FileView({model:r,folder:t,folders:o});this.listenTo(t,"sync",function(e){this.setBreadCrum(i(r,e),!0)}),this.listenTo(r,"change",function(e){e.hasChanged("name")&&this.setBreadCrum(i(e,t),!0),e.hasChanged("folder_id")&&this.triggerSidebarMenu("change:folder",r.get("folder_id"))}.bind(this)),this.listenTo(r,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/media/folders/"+r.get("folder_id")+"/files")}),this.navigationController.showContent(e),this.setHeader(i(r,t),getHeadersAction({addSave:!0,addDownloadFile:r.get("media_id"),addPublish:r.get("folder_id")}))}.bind(this)).fail(function(){this.triggerSidebarMenu("change:folder",null),this.failHandler("Fichier introuvable")()}.bind(this))},actionPublish:function(e){var i=new Files;i.folder_id=e;var t=new PublishModalView({collection:i});this.navigationController.showInModal(t,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier"}})},actionDownloadFile:function(e){var i=Backbone.Radio.channel("app").request("ctx:session");this.actionOpenURL(i.convertMediaPath("/media/"+e,!0))},importFTP:function(){var e=new ImportFTPView({folders:new Folders,model:new ImportFtp,ftp:new Ftp});this.navigationController.showContent(e),e.start(),this.triggerSidebarMenu("change:folder",null),this.setHeader({title:"Import FTP"})}});module.exports=Router.extend({controller:new MediaController,appRoutes:{media:"showIndex","media/folders/:id/files":"showFiles","media/folders/:id":"showFolder","media/files/:id":"showFile","media/ftp":"importFTP"},onRoute:function(e){this.controller.showSidebarMenu()}});
},{"34":34,"440":440,"441":441,"455":455,"458":458,"459":459,"460":460,"463":463,"464":464,"471":471,"551":551,"612":612,"undefined":undefined}],443:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning text-center" role="alert">L\'adresse publique de ce fichier est <a href="'+(null==(__t=thumb.url)?"":_.escape(__t))+'" target="_blank">'+(null==(__t=thumb.url)?"":_.escape(__t))+'</a></div><form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="row media-detail"><div class="col-4"> ',__p+="image"==type?' <div class="media-object"><a class="preview" href="'+(null==(__t=thumb.url)?"":_.escape(__t))+'" target="_blank"><img alt="'+(null==(__t=name)?"":_.escape(__t))+'" src="'+(null==(__t=convertMediaPath("/media/g_vignette/"+media_id+".jpg"))?"":_.escape(__t))+"&"+(null==(__t=render_counter)?"":_.escape(__t))+'"></a></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' <p class="media-info">'+(null==(__t=original_name)?"":_.escape(__t))+"<br> "+(null==(__t=size)?"":_.escape(__t))+" <br> ","image"==type&&(__p+=" "+(null==(__t=width)?"":_.escape(__t))+" x "+(null==(__t=height)?"":_.escape(__t))+"px<br> "),__p+=" Modifié le "+(null==(__t=last_date)?"":_.escape(__t))+"<br>Par "+(null==(__t=modification_by)?"":_.escape(__t))+' </p></div><div class="col-8"><div class="form-group"><label for="name">Intitulé du fichier</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le fichier"></div><div class="row"><div class="col-7"><div class="form-group"><label>Dossier</label><div data-role="folder"></div></div></div></div><div class="form-group"><label for="description">Description</label><input class="form-control" id="description" name="description" value="'+(null==(__t=description)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label for="file">Remplacement de fichier</label><div data-role="file"></div></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],444:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<label>"+(null==(__t=fieldLabel)?"":_.escape(__t))+"</label> ",comment&&(__p+='<p class="form-control-static">'+(null==(__t=comment)?"":_.escape(__t))+"</p>"),__p+=" ",is_loaded?(__p+=' <p class="form-control-static"><a href="#" data-role="select">'+(null==(__t=file?file.name+"."+file.ext:"Accéder à la médiathèque")?"":_.escape(__t))+"</a> ",file&&(__p+=' <a href="#" data-role="clear" class="md-icon md-delete"></a> '),__p+=" </p> "):__p+=' <p></p><div class="spinner-border text-muted" role="status"><span class="sr-only">Chargement...</span></div><p></p> ',__p+=' <input type="hidden" name="'+(null==(__t=fieldname)?"":_.escape(__t))+'" value="'+(null==(__t=value)?"":_.escape(__t))+'">';return __p};
},{"undefined":undefined}],445:[function(require,module,exports){
arguments[4][213][0].apply(exports,arguments)
},{"213":213,"undefined":undefined}],446:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="media_file_'+(null==(__t=media_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=media_id)?"":_.escape(__t))+'" type="checkbox"><label for="media_file_'+(null==(__t=media_id)?"":_.escape(__t))+'"></label></div><div class="col-auto"> ',__p+="image"==type&&has_thumb?' <div class="media-object md-icon img-default"></div><div class="media-object"><img alt="" src="'+(null==(__t=convertMediaPath("/media/icone/"+media_id))?"":_.escape(__t))+'"></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' </div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"."+(null==(__t=ext)?"":_.escape(__t))+"</h4><span>"+(null==(__t=size)?"":_.escape(__t)),"image"==type&&(__p+=" • "+(null==(__t=width)?"":_.escape(__t))+" x "+(null==(__t=height)?"":_.escape(__t))+"px"),__p+='</span></div><div class="col-5"><span title="Date de dernière modification"><i class="md-icon md-update"></i>'+(null==(__t=last_date)?"":_.escape(__t))+' </span></div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="/media/files/'+(null==(__t=media_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"> ',is_copy_supported&&(__p+=' <li><a class="dropdown-item" href="#" data-role="clipboard" data-clipboard-text="'+(null==(__t=thumb.url)?"":_.escape(__t))+"\">Copier l'adresse</a></li> "),__p+=' <li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],447:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres du dossier</h1></header><div class="post-content"><div class="form-group"><label for="name">Intitulé du dossier</label> ',__p+=parent_folder_id>0?' <input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le dossier"> ':" <p>"+(null==(__t=name)?"":_.escape(__t))+"</p> ",__p+=" </div> ",parent_folder_id>0&&(__p+=' <div class="row"><div class="col-5"><div class="form-group"><label for="">Dossier parent</label><div data-role="folder"></div></div></div></div> '),__p+=' <div class="form-group"><label>Identifiant API Front-office</label><p>'+(null==(__t=folder_key)?"":_.escape(__t))+'</p></div></div><footer class="post-footer"></footer></article> ',parent_folder_id>0&&(__p+=' <article class="post-article"><header class="post-header"><h1>Droits d\'accès</h1></header><div class="post-content"><p>Restreindre l\'accès à ce dossier aux seuls <a href="/customers/groups">groupes</a> ou <a href="/customers">membres</a> autorisés.</p><div data-role="restrictions"></div></div><footer class="post-footer"></footer></article> '),__p+=' </form><div class="save"><div class="btn-toolbar" role="toolbar"> ',parent_folder_id>0&&(__p+=' <button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> '),__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],448:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?(__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/preferences.html#fichiers-de-la-mediatheque" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez <strong>importer des fichiers volumineux</strong> de plus de 7Mo dans la médiathèque à partir de votre espace FTP. Nous vous conseillons avant tout import de <a href="https://aide.kiubi.com/preferences.html#fichiers-de-la-mediatheque" target="_blank">consulter la documentation en ligne</a> et de <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group has-feedback"><label>Dossier</label><p>Vous devez choisir un dossier la médiathèque dans lequel seront importés tous les fichiers.</p><div class="row"><div class="col-6"><div data-role="folder"></div></div></div></div><div class="form-group has-feedback"><label>Contenu</label> ',__p+=summary&&0==summary.count?" <p>Il n'y a aucun fichier dans l'espace FTP. Publier y des fichiers pour les importer.</p> ":summary&&summary.count>0?" <p>L'espace FTP contient "+(null==(__t=summary_count)?"":_.escape(__t))+" pour "+(null==(__t=summary_size)?"":_.escape(__t))+".</p> ":' <p data-role="summary">En chargement ...</p> ',__p+=' </div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Publier des fichiers volumineux</h1></header><div class="post-content"><p>Un compte FTP est disponible pour chaque site. Les informations ci-dessous servent à configurer un logiciel FTP.</p><div class="row"><div class="col-3"><label for="">Adresse de l\'hôte :</label></div><div class="col-9"><p>'+(null==(__t=ftp.host)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-3"><label for="">Port :</label></div><div class="col-9"><p>'+(null==(__t=ftp.port)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-3"><label for="">Nom d\'utilisateur :</label></div><div class="col-9"><p>'+(null==(__t=ftp.login)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-3"><label for="">Mot de passe :</label></div><div class="col-9"><p><span style="display: none" data-role="password-mask">'+(null==(__t=ftp.password)?"":_.escape(__t))+'</span><a data-role="password-toggle" href="#">Afficher le mot de passe</a></p></div></div><div class="row"><div class="col-3"><label for="">Répertoire racine :</label></div><div class="col-9"><p>/mediatheque/</p></div></div></div><footer class="post-footer"></footer></article></form> ',summary&&summary.count>0&&(__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button></div></div> '),__p+=" "):(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans les fichiers.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les fichiers ont été correctement importées dans la médiathèque !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],449:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><div class="row no-gutters"><div class="col filters-options"><div class="btn-group"><div data-role="categories"></div></div><div class="btn-group has-feedback"><input class="form-control" name="term" placeholder="Rechercher"> <span class="md-feedback md-search"></span></div></div><div class="col-auto sort-options"><div class="btn-group mr-0"><button type="button" class="btn btn-secondary btn-modal btn-icon md-icon md-sort dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right" data-role="order"><li data-sort="name" class="'+(null==(__t="name"==order?"active":"")?"":__t)+'"><a class="dropdown-item" href="#">Intitulé</a></li><li data-sort="-date" class="'+(null==(__t="-date"==order?"active":"")?"":__t)+'"><a class="dropdown-item" href="#">Modification</a></li></ul></div></div></div></header><div data-role="list"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],450:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"> ',__p+="image"==type&&has_thumb?' <div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="'+(null==(__t=name)?"":_.escape(__t))+'" src="'+(null==(__t=convertMediaPath("/media/miniature/"+media_id+".jpg"))?"":_.escape(__t))+'"></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' </div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"."+(null==(__t=ext)?"":_.escape(__t))+"</h4><span>"+(null==(__t=size)?"":_.escape(__t)),"image"==type&&(__p+=" • "+(null==(__t=width)?"":_.escape(__t))+" x "+(null==(__t=height)?"":_.escape(__t))+"px"),__p+='</span></div><div class="col-auto"> ',is_selectable&&!is_selected&&(__p+=' <a class="btn btn-primary float-right" href="#" role="button" data-role="select">Choisir</a> '),__p+=" ",is_selected&&(__p+=' <span class="md-icon md-check text-info float-right"></span> '),__p+=" </div></div>";return __p};
},{"undefined":undefined}],451:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><form><div class="row media-detail"><div class="col-4"> ',__p+="image"==type?' <div class="media-object"><a class="preview" href="'+(null==(__t=thumb.url)?"":_.escape(__t))+'" target="_blank"><img alt="'+(null==(__t=name)?"":_.escape(__t))+'" src="'+(null==(__t=convertMediaPath("/media/g_vignette/"+media_id+".jpg"))?"":_.escape(__t))+'"></a></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' <p class="media-info"> '+(null==(__t=original_name)?"":_.escape(__t))+"<br> "+(null==(__t=size)?"":_.escape(__t))+" <br> ","image"==type&&(__p+=" "+(null==(__t=width)?"":_.escape(__t))+" x "+(null==(__t=height)?"":_.escape(__t))+"px<br> "),__p+=" Modifié le "+(null==(__t=last_date)?"":_.escape(__t))+' </p></div><div class="col-8"> ',"image"==type&&(__p+=' <div class="row"><div class="col-7"><div class="form-group"><label for="m_integration_type">Type d\'intégration</label><select id="m_integration_type" name="integration_type" data-style="selectify"><option '+(null==(__t="inline"==integration?'selected="selected"':"")?"":__t)+' value="inline">Insérer l\'image</option><option '+(null==(__t="inline"==integration?"":'selected="selected"')?"":__t)+' value="file">Insérer un lien vers l\'image</option></select></div> ',"inline"==integration&&(__p+=' <div class="form-group"><label>Taille de l\'image</label><div data-role="image_variant"></div></div><div class="form-group"><label for="m_image_align">Alignement</label><select id="m_image_align" name="image_align" data-style="selectify"><option value="default">Par défaut</option><option value="left">À gauche</option><option value="right">À droite</option><option value="middle">Au milieu</option></select></div> '),__p+=" </div></div> ","inline"==integration&&(__p+=' <div class="form-group"><label for="m_alt">Texte alternatif</label><input class="form-control" id="m_alt" name="alt" value="'+(null==(__t=description)?"":_.escape(__t))+'" placeholder="Contenu de l\'attribut alt"></div><label>Marges</label><div class="row"><div class="col-3"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="margin_top" placeholder="Haut"><div class="input-group-append"><span class="input-group-text">px</span></div></div></div></div><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control pr-0" name="margin_right" placeholder="Droite"><div class="input-group-append"><span class="input-group-text">px</span></div></div></div><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="margin_bottom" placeholder="Bas"><div class="input-group-append"><span class="input-group-text">px</span></div></div></div><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control pr-0" name="margin_left" placeholder="Gauche"><div class="input-group-append"><span class="input-group-text">px</span></div></div></div></div><label>Taille</label><div class="row"><div class="col-3"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control pr-0" id="image_width" name="image_width" placeholder="Largeur"><div class="input-group-append"><span class="input-group-text">px</span></div></div></div></div><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control pr-0" id="image_height" name="image_height" placeholder="Hauteur"><div class="input-group-append"><span class="input-group-text">px</span></div></div></div></div> '),__p+=" "),__p+=' <div class="form-group"><label for="m_title">Titre</label><input class="form-control" id="m_title" name="title" placeholder="Contenu de l\'attribut title"></div><div class="form-group"><label for="m_class">Class</label><input class="form-control" id="m_class" name="class" placeholder="Contenu de l\'attribut class"></div><label>Insérer également les informations sur fichier</label><div class="row no-gutters"><div class="col-4 mb-2"><input id="m_xtra_name" name="xtra_name" value="1" type="checkbox"><label for="m_xtra_name">Nom</label></div><div class="col-4 mb-2"><input id="m_xtra_file" name="xtra_file" value="1" type="checkbox"><label for="m_xtra_file">Fichier</label></div><div class="col-4 mb-2"><input id="m_xtra_weight" name="xtra_weight" value="1" type="checkbox"><label for="m_xtra_weight">Poids</label></div> ',"image"==type&&(__p+=' <div class="col-4 mb-2"><input id="m_xtra_size" name="xtra_size" value="1" type="checkbox"><label for="m_xtra_size">Taille</label></div> '),__p+=' <div class="col-4 mb-2"><input id="m_xtra_author" name="xtra_author" value="1" type="checkbox"><label for="m_xtra_author">Auteur</label></div><div class="col-4 mb-2"><input id="m_xtra_modification" name="xtra_modification" value="1" type="checkbox"><label for="m_xtra_modification">Date de modification</label></div></div></div></div></form></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],452:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content mediatheque-upload" data-role="dropzone"> ',canDragAndDrop&&(__p+=' <div id="dropzone" class="dropzone"><div class="md-icon md-upload"></div>Glisser-déposer des fichiers ici</div> '),__p+=' <label class="file-select btn btn-primary">Sélectionner un fichier <input type="file" style="display: none" '+(null==(__t=isMultiFiles?'multiple="multiple"':"")?"":__t)+'></label></div><footer class="post-footer"></footer></article><article class="post-article"><div data-role="list"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],453:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"> ',__p+="image"==type?' <div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="'+(null==(__t=name)?"":_.escape(__t))+'" src="'+(null==(__t=uploadPreview)?"":__t)+'"></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' </div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> "+(null==(__t=size)?"":_.escape(__t))+" ","fail"==uploadProgression.status&&(__p+=' <div class="text-danger">'+(null==(__t=uploadProgression.error)?"":_.escape(__t))+"</div> "),__p+=" </div> ","uploading"==uploadProgression.status?__p+=' <div class="col-3"><div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="'+(null==(__t=uploadProgression.prct)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=uploadProgression.prct)?"":_.escape(__t))+'%"></div></div></div> ':"done"==uploadProgression.status&&(__p+=' <div class="col-3"><span class="md-icon md-check-circle float-right"></span></div> '),__p+=" ","pending"==uploadProgression.status&&(__p+=' <div class="col-3"><a href="#" class="md-icon md-delete float-right" data-role="cancel"></a></div> '),__p+=" </div>";return __p};
},{"undefined":undefined}],454:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Médiathèque</h2><div data-role="tree"></div><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="/media/ftp">Import FTP</a></li></ul>';return __p};
},{"undefined":undefined}],455:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),SelectView=require(139),FileView=require(126),FormBehavior=require(27),Forms=require(608),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(443),className:"container",service:"media",behaviors:[FormBehavior],regions:{folder:{el:"div[data-role='folder']",replaceElement:!0},file:{el:"div[data-role='file']",replaceElement:!0}},fields:["name","description","folder_id"],render_counter:1,initialize:function(e){this.mergeOptions(e,["model","folder","folders"]),this.listenTo(this.model,"change:folder_id",this.onFolderChange)},templateContext:function(){return{last_date:format.formatLongDateTime(this.model.get("modification_date")),size:format.formatBytes(this.model.get("weight"),2),convertMediaPath:Session.convertMediaPath.bind(Session),render_counter:this.render_counter++}},onRender:function(){this.showChildView("folder",new SelectView({collection:this.folders,selected:this.model.get("folder_id"),name:"folder_id"})),this.showChildView("file",new FileView)},onFolderChange:function(){this.folder.clear({silent:!0}),this.folder.set("folder_id",this.model.get("folder_id")),this.folder.fetch()},onSave:function(){var e=Forms.extractFields(this.fields,this);if(this.getChildView("file").getFile()){var i=this.getChildView("file").getFile();e.file=i,e.name=i.name}return this.model.save(e,{patch:!0,wait:!0}).done(function(){this.render()}.bind(this))},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"126":126,"139":139,"27":27,"443":443,"607":607,"608":608,"undefined":undefined}],456:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Files=require(440),Folders=require(441),PublishModalView=require(463),ModalPickerView=require(461),SaveBehavior=require(24);module.exports=Marionette.View.extend({template:require(444),className:"form-group form-filepicker",fieldname:"",fieldLabel:"",comment:"",type:"image",value:"",model:null,ui:{selectBtn:'a[data-role="select"]',clearBtn:'a[data-role="clear"]'},events:{"click @ui.selectBtn":"select","click @ui.clearBtn":function(){this.model.clear(),this.render()}},behaviors:[SaveBehavior],loaded:null,initialize:function(e){this.rememberFolder=!0,this.mergeOptions(e,["fieldname","value","type","fieldLabel","comment","collectionFiles","collectionFolders","rememberFolder"]),this.loaded=!1,this.collectionFiles||(this.collectionFiles=Files),this.collectionFolders||(this.collectionFolders=Folders),this.model=new((new this.collectionFiles).model),this.value>0?(this.model.set("media_id",this.value),this.model.fetch().done(function(){this.loaded=!0,this.render()}.bind(this)).fail(function(e,i){404==i.status_code?this.model.clear({silent:!0}):this.model.set("name","Erreur de chargement"),this.loaded=!0,this.render()}.bind(this))):this.loaded=!0,this.listenTo(this.model,"change",function(){this.loaded&&this.triggerMethod("field:change"),this.render()}.bind(this))},templateContext:function(){return{is_loaded:this.loaded,fieldname:this.fieldname,fieldLabel:this.fieldLabel,comment:this.comment,file:this.model.get("media_id")>0?this.model.toJSON():null,value:this.model.get("media_id")}},select:function(){var e=new ModalPickerView({type:this.type,model:this.model,collection:new this.collectionFiles,folders:new this.collectionFolders,rememberFolder:this.rememberFolder});this.listenTo(e,"action:modal",this.switchToPublish);var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.showInModal(e,{title:"Médiathèque",modalClass:"mediatheque modal-right has-filters",action:{title:"Publier un fichier"}})},switchToPublish:function(e){var i=new this.collectionFiles;i.folder_id=e.currentFolder;var l=new PublishModalView({isMultiFiles:!1,collection:i});this.listenTo(l,"uploaded:files",this.onUploadedFiles);var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showInModal(l,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier un fichier"}})},onUploadedFiles:function(e){var i=e.find(function(e){return"done"==e.uploadProgression.status});i&&this.model.set(i.toJSON());var l=Backbone.Radio.channel("app").request("ctx:navigationController");l.hideModal()}});
},{"24":24,"440":440,"441":441,"444":444,"461":461,"463":463,"undefined":undefined}],457:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Files=require(440),Folders=require(441),PublishModalView=require(463),ModalPickerView=require(461);module.exports=Marionette.View.extend({template:_.template('<span class="page-add md-icon md-add-page"></span>Ajouter une illustration'),tagName:"a",attributes:{href:"#"},type:"image",model:null,events:{click:"select"},modelEvents:{sync:"proxySelection",change:"proxySelection"},initialize:function(e){this.mergeOptions(e,["type"]),this.model=new((new Files).model)},proxySelection:function(){this.triggerMethod("selected:file",[this.model.toJSON()])},select:function(){this.model.clear({silent:!0});var e=new Files,i=new ModalPickerView({type:this.type,model:this.model,collection:e,folders:new Folders});this.listenTo(i,"action:modal",this.switchToPublish);var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showInModal(i,{title:"Médiathèque",modalClass:"mediatheque modal-right has-filters",action:{title:"Publier un fichier"}})},switchToPublish:function(e){var i=new Files;i.folder_id=e.currentFolder;var t=new PublishModalView({isMultiFiles:!0,collection:i});this.listenTo(t,"uploaded:files",this.onUploadedFiles);var o=Backbone.Radio.channel("app").request("ctx:navigationController");o.showInModal(t,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier un fichier"}})},onUploadedFiles:function(e){var i=e.reduce(function(e,i){return"done"==i.uploadProgression.status&&e.push(i.toJSON()),e},[]);i.length&&this.triggerMethod("selected:file",i);var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.hideModal()}});
},{"440":440,"441":441,"461":461,"463":463,"undefined":undefined}],458:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606),format=require(607),ClipboardJS=require("clipboard"),ControllerChannel=Backbone.Radio.channel("controller"),RowActionsBehavior=require(31),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(446),className:"list-item list-media",behaviors:[RowActionsBehavior],ui:{clipboard:'[data-role="clipboard"]'},clipboard:null,templateContext:function(){return{last_date:format.formatLongDateTime(this.model.get("modification_date")),size:format.formatBytes(this.model.get("weight"),2),convertMediaPath:Session.convertMediaPath.bind(Session),has_thumb:!!this.model.get("thumb"),is_copy_supported:ClipboardJS.isSupported()}},onAttach:function(){ClipboardJS.isSupported()&&this.getUI("clipboard").length?this.clipboard=new ClipboardJS(this.getUI("clipboard")[0]):this.clipboard=null},onDestroy:function(){this.clipboard.destroy()},onActionDelete:function(){return this.model.destroy()}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(445),className:"container-fluid",service:"media",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},filters:null,sortOrder:"-date",initialize:function(e){this.mergeOptions(e,["collection","folders"]),this.filters={folder_id:null,term:this.getOption("filters")&&this.getOption("filters").term?this.getOption("filters").term:null},this.start(),this.listenTo(ControllerChannel,"uploaded:files",function(e){e==this.collection.folder_id&&this.start()}.bind(this)),this.listenTo(this.collection,"sync",this.onSync)},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des fichiers",selection:[{title:"Déplacer",callback:this.movePosts.bind(this)},{title:"Supprimer",callback:this.deletePosts.bind(this),confirm:!0}],filters:[{id:"folder",extraClassname:"select-category",title:"Destination",collectionPromise:this.folders.promisedSelect(this.collection.folder_id)},{id:"term",title:"Rechercher",type:"input",value:this.filters.term}],xtra:[{id:"export",extraClassname:"md-export",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{value:"export",label:"Exporter les fichiers",selected:!1}])},{id:"sort",extraClassname:"md-sort",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{label:"Intitulé",selected:!1,value:"name"},{label:"Modification",selected:!0,value:"-date"}])}]}))},start:function(){var e={sort:this.sortOrder?this.sortOrder:null};this.filters.term&&(e.term=this.filters.term),this.collection.fetch({reset:!0,data:e})},onSync:function(e){e instanceof Backbone.Model&&e.get("folder_id")!=this.collection.folder_id&&this.collection.remove(e)},movePosts:function(e){if(""!=this.filters.folder_id&&null!=this.filters.folder_id){this.collection.folder_id;return this.collection.bulkMove(e,this.filters.folder_id)}},deletePosts:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onFolderFilterChange:function(e){this.filters.folder_id=e.value,this.start()},onTermFilterChange:function(e){this.filters.term=""!=e.value?e.value:null,this.start()},onExportFilterChange:function(e){if(e.view){var t=e.view;if("export"==e.value){if(t.collection.length>1)return;t.overrideExtraClassname("md-loading"),t.render(),this.collection.exportAll({folder_id:this.collection.folder_id}).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}},onSortFilterChange:function(e){e.view.activeItem(e.value),this.sortOrder=e.value,this.start()}});
},{"128":128,"31":31,"445":445,"446":446,"606":606,"607":607,"undefined":undefined}],459:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectView=require(139),RestrictionsView=require(414),FormBehavior=require(27),Forms=require(608),Restrictions=require(390);module.exports=Marionette.View.extend({template:require(447),className:"container",service:"media",behaviors:[FormBehavior],regions:{folder:{el:"div[data-role='folder']",replaceElement:!0},restrictions:{el:"div[data-role='restrictions']",replaceElement:!0}},fields:["name","parent_folder_id"],initialize:function(e){this.mergeOptions(e,["model","folders"])},onRender:function(){this.model.get("parent_folder_id")>0&&(this.showChildView("folder",new SelectView({collection:this.folders,selected:this.model.get("parent_folder_id"),name:"parent_folder_id"})),this.getOption("enableExtranet")&&this.showChildView("restrictions",new RestrictionsView({restrictions:this.model.get("restrictions")})))},onSave:function(){var e=Forms.extractFields(this.fields,this);if(this.model.get("parent_folder_id")>0&&this.getOption("enableExtranet")){var i=this.getChildView("restrictions").getRestrictions(),t=new Restrictions;t.setType("media/folders",this.model.get("folder_id")),t.set("customer_id",i.customers),t.set("group_id",i.groups),t.save(),e.has_restrictions=i.customers.length+i.groups.length>0}return this.model.save(e,{patch:!0,wait:!0}).done(function(){this.model.get("parent_folder_id")>0&&this.model.hasChanged("parent_folder_id")&&this.folders.fetch({data:{extra_fields:"recursive"}})}.bind(this))},onDelete:function(){return this.model.destroy({wait:!0}).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.showErrorModal(e)}.bind(this))}});
},{"139":139,"27":27,"390":390,"414":414,"447":447,"608":608,"undefined":undefined}],460:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),SelectView=require(139),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(448),className:"container",service:"media",behaviors:[FormBehavior],regions:{folder:{el:"div[data-role='folder']",replaceElement:!0}},ui:{summary:'[data-role="summary"]',pwdBtn:'a[data-role="password-toggle"]',pwdMask:'span[data-role="password-mask"]'},events:{"click @ui.pwdBtn":function(){this.getUI("pwdBtn").hide(),this.getUI("pwdMask").show()}},fields:["folder_id"],step:0,report:null,initialize:function(e){this.mergeOptions(e,["folders","model","ftp"]),this.listenTo(this.model,"sync",this.render),this.promisedFolders=this.folders.promisedSelect()},templateContext:function(){return{ftp:this.ftp.toJSON(),report:this.report,step:this.step,summary:this.model.get("summary"),summary_count:this.model.get("summary")?format.plural(this.model.get("summary").count,"%d fichier","%d fichiers"):"",summary_size:this.model.get("summary")&&this.model.get("summary").size?format.formatBytes(this.model.get("summary").size,2):""}},onRender:function(){0==this.step&&this.showChildView("folder",new SelectView({collectionPromise:this.promisedFolders,name:"folder_id"}))},start:function(){Backbone.$.when(this.model.fetch(),this.ftp.fetch()).done(function(){this.render()}.bind(this))},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");if(0==this.step){var t=Forms.extractFields(this.fields,this);return e.showOverlay(),this.model["import"](t).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})}},onCancel:function(e){if(0==this.step){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.navigate("/modules")}else this.step=0,this.report=null,this.render()}});
},{"139":139,"27":27,"448":448,"607":607,"608":608,"undefined":undefined}],461:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),SelectView=require(139),ScrollBehavior=require(22),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(450),className:"list-item",events:{'click a[data-role="select"]':function(){this.triggerMethod("select:file",this.model)}},selectableType:"image",selected:null,initialize:function(e){this.mergeOptions(e,["selectableType","selected"])},templateContext:function(){return{size:format.formatBytes(this.model.get("weight"),2),is_selectable:"file"==this.selectableType||this.model.get("type")==this.selectableType,is_selected:this.model.get("media_id")==this.selected,has_thumb:!!this.model.get("thumb"),convertMediaPath:Session.convertMediaPath.bind(Session)}}}),ListView=Marionette.CollectionView.extend({className:"post-content post-list list-media",childView:RowView,selectableType:"image",selected:null,behaviors:[{behaviorClass:ScrollBehavior,contentEl:".modal-body"}],initialize:function(e){this.mergeOptions(e,["selectableType","selected"])},buildChildView:function(e,t,r){var i=_.extend({model:e,selectableType:this.selectableType,selected:this.selected},r);return new t(i)},onChildviewSelectFile:function(e){this.triggerMethod("select:file",e)}});module.exports=Marionette.View.extend({template:require(449),type:"image",regions:{list:{el:"div[data-role='list']",replaceElement:!0},categories:{el:"div[data-role='categories']",replaceElement:!0}},ui:{term:'input[name="term"]',order:'[data-role="order"] li'},currentFolder:null,currentTerm:null,currentOrder:null,currentFetch:null,rememberFolder:null,events:{"keyup @ui.term":_.debounce(function(e){this.currentTerm=this.getUI("term").val(),this.updateFilter()},300),"click @ui.order":"changeOrder"},initialize:function(e){this.currentFolder=null,this.rememberFolder=!0,this.mergeOptions(e,["model","collection","type","folders","currentFolder","rememberFolder"]),this.currentTerm=null,this.currentOrder="-date",this.currentFetch=null},onRender:function(){var e=this.folders.fetch({data:{extra_fields:"recursive"}}),t=Backbone.Radio.channel("app").request("ctx:session"),r=this.rememberFolder?t.getPref("last_folder"):null;this.model.get("folder_id")>0?(this.currentFolder=this.model.get("folder_id"),this.updateFilter(),this.rememberFolder&&t.storePref("last_folder",this.currentFolder)):r>0?(this.currentFolder=r,this.updateFilter()):e.done(function(){this.currentFolder=this.folders.at(0).get("folder_id"),this.updateFilter(),this.rememberFolder&&t.storePref("last_folder",this.currentFolder)}.bind(this)),this.showChildView("categories",new SelectView({name:"categories",collection:this.folders,selected:this.currentFolder})),this.showChildView("list",new ListView({collection:this.collection,selected:this.model.get("media_id"),selectableType:this.type}))},onChildviewChange:function(e,t){this.currentFolder=e,this.getUI("term").val(""),this.currentTerm="",this.updateFilter();var r=Backbone.Radio.channel("app").request("ctx:session");this.rememberFolder&&r.storePref("last_folder",this.currentFolder)},changeOrder:function(e){var t=Backbone.$(e.currentTarget).data("sort");""!=t&&t!=this.currentOrder&&(this.getUI("order").removeClass("active"),Backbone.$(e.currentTarget).addClass("active"),this.currentOrder=t,this.updateFilter())},updateFilter:function(){this.fetchFiles(""==this.currentTerm||null==this.currentTerm?this.currentFolder:null,this.currentTerm,this.currentOrder)},fetchFiles:function(e,t,r){this.currentFetch&&this.currentFetch.abort(),this.collection.reset(),this.collection.folder_id=null,this.currentFetch=this.collection.fetch({reset:!0,data:{folder_id:e,term:t,sort:r}}).always(function(){this.currentFetch=null}.bind(this))},onChildviewSelectFile:function(e){this.model.set(e.toJSON()),this.triggerMethod("close:modal")},templateContext:function(){return{order:this.currentOrder}}});
},{"139":139,"22":22,"449":449,"450":450,"607":607,"undefined":undefined}],462:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),Forms=require(608),Prefs=require(557),SelectView=require(139),SelectifyBehavior=require(26),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(451),behaviors:[SelectifyBehavior],regions:{image_variant:{el:"div[data-role='image_variant']",replaceElement:!0}},ui:{integration_type:"#integration_type"},events:{"change @ui.integration_type":function(e){this.integration="inline"==Backbone.$(e.currentTarget).val()?"inline":"file",this.render()}},integration:"file",prefs:null,initialize:function(e){this.mergeOptions(e,["model"]),this.integration="image"==this.model.get("type")?"inline":"file",this.prefs=new Prefs},templateContext:function(){return{integration:this.integration,last_date:format.formatDateTime(this.model.get("modification_date")),size:format.formatBytes(this.model.get("weight"),2),convertMediaPath:Session.convertMediaPath.bind(Session)}},onRender:function(){"image"==this.model.get("type")&&"inline"==this.integration&&this.showChildView("image_variant",new SelectView({collectionPromise:this.prefs.promisedSelect().then(function(e){return e.at(0).set("label",e.at(0).get("label")+" : "+this.model.get("width")+"x"+this.model.get("height")+" px"),e}.bind(this)),name:"image_variant"}))},onActionModal:function(){var e=["title","class","xtra_name","xtra_file","xtra_weight","xtra_modification","xtra_author"];"image"==this.model.get("type")&&e.push("integration_type","image_variant","image_align","alt","margin_top","margin_right","margin_bottom","margin_left","image_width","image_height","xtra_size");var i=Forms.extractFields(e,this);this.triggerMethod("insert:file",i),this.triggerMethod("close:modal")}});
},{"139":139,"26":26,"451":451,"557":557,"607":607,"608":608,"undefined":undefined}],463:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),ControllerChannel=Backbone.Radio.channel("controller"),RowView=Marionette.View.extend({template:require(453),className:"list-item",events:{'click a[data-role="cancel"]':"cancel"},modelEvents:{"change:upload":"render"},cancel:function(){this.model.destroy()},templateContext:function(){return{uploadPreview:this.model.uploadPreview,size:format.formatBytes(this.model.get("weight"),2),uploadProgression:this.model.uploadProgression}}}),ListView=Marionette.CollectionView.extend({className:"post-content post-list list-media mediatheque-uploaded-file",childView:RowView});module.exports=Marionette.View.extend({template:require(452),ui:{dropzone:"div[data-role='dropzone']"},events:{"drop @ui.dropzone, input[type=file]":"drop","change input[type=file]":"drop","dragenter @ui.dropzone":"dragEnter","dragleave @ui.dropzone":"dragLeave"},regions:{list:{el:"div[data-role='list']",replaceElement:!0}},isMultiFiles:!0,initialize:function(e){this.mergeOptions(e,["isMultiFiles"])},drop:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var t=this.collection.filter(function(e){return"pending"!=e.uploadProgression.status});t.length&&this.collection.remove(t);var i=e.originalEvent.dataTransfer,o=i?i.files:e.originalEvent.target.files;this.isMultiFiles||(this.collection.reset(),o.length>1&&(o=[o[0]])),_.each(o,function(e){var t=new this.collection.model,i=t.setFile(e);i?(t.set("folder_id",this.collection.folder_id),this.collection.add(t)):t.destroy()}.bind(this)),this.isMultiFiles||this.onActionModal()},dragEnter:function(e){e.preventDefault()},dragLeave:function(e){e.preventDefault()},onActionModal:function(){this.collection.upload().always(function(){ControllerChannel.trigger("uploaded:files",this.collection.folder_id),this.trigger("uploaded:files",this.collection)}.bind(this))},templateContext:function(){var e=!0,t=navigator.userAgent||navigator.vendor||window.opera;return(t.match(/iPad/i)||t.match(/iPod/i)||t.match(/iPhone/i)||t.match(/Android/i))&&(e=!1),{canDragAndDrop:e,isMultiFiles:this.isMultiFiles}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection}))}});
},{"452":452,"453":453,"607":607,"undefined":undefined}],464:[function(require,module,exports){
var Marionette=require("backbone.marionette"),MenuTreeView=require(136),Folders=require(441),ActiveLinksBehaviors=require(18);module.exports=Marionette.View.extend({template:require(454),service:"media",behaviors:[ActiveLinksBehaviors],regions:{tree:{el:"div[data-role='tree']",replaceElement:!0}},folder_id:-1,treeView:null,initialize:function(e){this.collection=new Folders,this.folder_id=-1,this.treeView=new MenuTreeView({nodeInfo:this.nodeInfo.bind(this)}),this.fetchAndRender()},onChangeFolder:function(e){this.folder_id!=e&&(this.folder_id=e,this.render())},onRefreshFolders:function(){this.fetchAndRender()},fetchAndRender:function(){this.collection.fetch({data:{extra_fields:"recursive"}}).done(function(){this.render()}.bind(this))},onBeforeRender:function(){this.treeView.isAttached()&&this.detachChildView("tree",this.treeView)},onRender:function(){0!==this.collection.length&&(this.showChildView("tree",this.treeView),this.treeView.setTree(this.collection.getMenuTree()))},nodeInfo:function(e){return{url:"/media/folders/"+e.get("folder_id")+"/files",name:e.get("name"),is_active:e.get("folder_id")==this.folder_id,extraClassname:e.get("has_restrictions")?" pagetype-extranet":""}}});
},{"136":136,"18":18,"441":441,"454":454,"undefined":undefined}],465:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/modules/analytics",isNew:function(){return!1},defaults:{ua:"",is_enabled:!1,type:"",target:"",options:"",consent:""}});
},{"606":606}],466:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),App=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/apps",idAttribute:"app_id",defaults:{app_id:null,name:"",color:"",icon:"",description:""},launch:function(){return Backbone.ajax({url:this.urlRoot+"/"+this.get("app_id"),method:"POST"}).then(function(e){return e.url})}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/apps",model:App});
},{"606":606,"undefined":undefined}],467:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476),Backup=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/backups",idAttribute:"id",defaults:{id:null,creation_date:""},restore:function(){var e=new Backbone.$.Deferred;return Backbone.ajax({url:this.urlRoot+"/"+this.get("id"),method:"PUT"}).done(function(o){var i=new Job({job_id:o.job_id});i.watch().done(function(){e.resolve(i.get("error"))}).fail(function(o,i){e.reject(o,i)})}).fail(function(o,i){e.reject(o,i)}),e.promise()}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/backups",model:Backup,createBackup:function(){var e=new Backbone.$.Deferred;return Backbone.ajax({url:this.url,method:"POST"}).done(function(o){var i=new Job({job_id:o.job_id});i.watch().done(function(){e.resolve(i.get("error"))}).fail(function(o,i){e.reject(o)})}).fail(function(o,i){e.reject(o,i)}),e.promise()}});
},{"476":476,"606":606,"undefined":undefined}],468:[function(require,module,exports){
function checkAnalyse(e){var t=e.get("result").split(";"),n=t[1];return Backbone.ajax({url:"sites/@site/import/checkout/coliship/"+n,method:"GET"}).then(function(e){return e.token=n,e})}function checkImport(e){return Backbone.ajax({url:"sites/@site/import/checkout/coliship/"+e,method:"GET"}).then(function(e,t){return e})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/import/checkout/coliship",isNew:function(){return!1},defaults:{},analyse:function(e){var t=new FormData;return _.each(e,function(e,n){t.append(n,e)}),Backbone.ajax({url:this.url,method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkAnalyse(t)})})},"import":function(e){return Backbone.ajax({url:this.url+"/"+e,method:"PUT"}).then(function(t){var n=new Job({job_id:t.job_id});return n.watch().then(function(){return checkImport(e)})})}});
},{"476":476,"606":606,"undefined":undefined}],469:[function(require,module,exports){
function checkAnalyse(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/import/cms/contents/"+t,method:"GET"}).then(function(e){return e.token=t,e})}function checkImport(e){return Backbone.ajax({url:"sites/@site/import/cms/contents/"+e,method:"GET"}).then(function(e,t){return e})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/import/cms/contents",isNew:function(){return!1},defaults:{},analyse:function(e){var t=new FormData;return _.each(e,function(e,n){t.append(n,e)}),Backbone.ajax({url:this.url,method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkAnalyse(t)})})},"import":function(e){return Backbone.ajax({url:this.url+"/"+e,method:"PUT"}).then(function(t){var n=new Job({job_id:t.job_id});return n.watch().then(function(){return checkImport(e)})})}});
},{"476":476,"606":606,"undefined":undefined}],470:[function(require,module,exports){
function checkImport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/import/media/files/"+t,method:"GET"}).then(function(e,t){return e})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/import/media/files",isNew:function(){return!1},defaults:{is_enabled:!1,page_id:null,mode:"",type:"",file:null},"import":function(e){var t=new FormData;return _.each(e,function(e,n){t.append(n,e)}),Backbone.ajax({url:this.url,method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkImport(t)})})}});
},{"476":476,"606":606,"undefined":undefined}],471:[function(require,module,exports){
function checkImport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/import/media/ftp/"+t,method:"GET"}).then(function(e,t){return e})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/import/media/ftp",isNew:function(){return!1},defaults:{summary:{},files:[]},"import":function(e){var t=new FormData;return _.each(e,function(e,r){t.append(r,e)}),Backbone.ajax({url:this.url,method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkImport(t)})})}});
},{"476":476,"606":606,"undefined":undefined}],472:[function(require,module,exports){
function checkAnalyse(t){var e=t.get("result").split(";"),n=e[1];return Backbone.ajax({url:"sites/@site/import/catalog/products/"+n,method:"GET"}).then(function(t){return t.token=n,t})}function checkImport(t){return Backbone.ajax({url:"sites/@site/import/catalog/products/"+t,method:"GET"}).then(function(t,e){return t})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/import/catalog/products",isNew:function(){return!1},defaults:{},analyse:function(t){var e=new FormData;return _.each(t,function(t,n){e.append(n,t)}),Backbone.ajax({url:this.url,method:"POST",data:e,processData:!1,contentType:!1}).then(function(t){var e=new Job({job_id:t.job_id});return e.watch().then(function(){return checkAnalyse(e)})})},"import":function(t){return Backbone.ajax({url:this.url+"/"+t,method:"PUT"}).then(function(e){var n=new Job({job_id:e.job_id});return n.watch().then(function(){return checkImport(t)})})}});
},{"476":476,"606":606,"undefined":undefined}],473:[function(require,module,exports){
function checkImport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/import/theme/"+t,method:"GET"}).then(function(e,t){return e})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/import/theme",isNew:function(){return!1},defaults:{file:null,with_content:!1,copyrights_acquired:!1},"import":function(e){var t=new FormData;return _.each(e,function(e,r){t.append(r,e)}),Backbone.ajax({url:this.url,method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkImport(t)})})}});
},{"476":476,"606":606,"undefined":undefined}],474:[function(require,module,exports){
function checkAnalyse(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/import/wordpress/"+t,method:"GET"}).then(function(e){return e.token=t,e})}function checkImport(e){return Backbone.ajax({url:"sites/@site/import/wordpress/"+e,method:"GET"}).then(function(e,t){return e})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/import/wordpress",isNew:function(){return!1},defaults:{},analyse:function(e){var t=new FormData;return _.each(e,function(e,n){t.append(n,e)}),Backbone.ajax({url:this.url,method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkAnalyse(t)})})},"import":function(e){return Backbone.ajax({url:this.url+"/"+e,method:"PUT"}).then(function(t){var n=new Job({job_id:t.job_id});return n.watch().then(function(){return checkImport(e)})})}});
},{"476":476,"606":606,"undefined":undefined}],475:[function(require,module,exports){
function checkAnalyse(e){var t=e.get("result").split(";"),n=t[1];return Backbone.ajax({url:"sites/@site/import/checkout/mondialrelay/"+n,method:"GET"}).then(function(e){return e.token=n,e})}function checkImport(e){return Backbone.ajax({url:"sites/@site/import/checkout/mondialrelay/"+e,method:"GET"}).then(function(e,t){return e})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/import/checkout/mondialrelay",isNew:function(){return!1},defaults:{},analyse:function(e){var t=new FormData;return _.each(e,function(e,n){t.append(n,e)}),Backbone.ajax({url:this.url,method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkAnalyse(t)})})},"import":function(e){return Backbone.ajax({url:this.url+"/"+e,method:"PUT"}).then(function(t){var n=new Job({job_id:t.job_id});return n.watch().then(function(){return checkImport(e)})})}});
},{"476":476,"606":606,"undefined":undefined}],476:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore");module.exports=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/jobs",idAttribute:"job_id",defaults:{job_id:null,status:"todo",result:"",progression:"",step:"",error:""},timer:null,deferred:null,watch:function(){return this.deferred=new Backbone.$.Deferred,this.fetchUntilDone(),this.deferred.promise()},unwatch:function(){clearTimeout(this.timer),this.deferred.reject()},fetchUntilDone:function(){this.fetch().done(function(){switch(this.get("status")){default:this.timer=setTimeout(this.fetchUntilDone.bind(this),1500);break;case"done":case"halt":this.deferred.resolve(this)}}.bind(this)).fail(function(e,t){this.deferred.reject(e,t)}.bind(this))}});
},{"606":606,"undefined":undefined}],477:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone"),Redirection=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/seo/redirections",defaults:{uri:"",target:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/seo/redirections",model:Redirection,bulkUpdate:function(e){return Backbone.ajax({url:this.url+"/bulk",method:"PUT",data:{redirections:e}}).then(function(e,i){return e})}});
},{"606":606,"undefined":undefined}],478:[function(require,module,exports){
function checkExport(e){var r=e.get("result");return Backbone.ajax({url:"sites/@site/export/subscribers/"+r,method:"GET"}).then(function(e,r){return e})}var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),Job=require(476),Subscriber=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/subscribers",idAttribute:"subscriber_id",defaults:{subscriber_id:null,email:"",is_registered:!1,subscription_date:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/subscribers",model:Subscriber,bulkSubscribe:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_registered")?Backbone.$.Deferred().resolve():e.save({is_registered:!0},{patch:!0})},e)},bulkUnsubscribe:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_registered")?e.save({is_registered:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},exportAll:function(e){return Backbone.ajax({url:"sites/@site/export/subscribers",method:"POST",data:e}).then(function(e){var r=new Job({job_id:e.job_id});return r.watch().then(function(){return checkExport(r)})})}});
},{"476":476,"606":606,"undefined":undefined}],479:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),format=require(607),Grid=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/catalog/tier_prices",idAttribute:"grid_id",defaults:{grid_id:null,is_enabled:!1,product_count:0}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/catalog/tier_prices",model:Grid,bulkEnable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?Backbone.$.Deferred().resolve():e.save({is_enabled:!0},{patch:!0})},e)},bulkDisable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?e.save({is_enabled:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)}});
},{"606":606,"607":607,"undefined":undefined}],480:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(606),format=require(607),Voucher=CollectionUtils.KiubiModel.extend({urlRoot:"sites/@site/checkout/vouchers",idAttribute:"voucher_id",meta:{},defaults:{voucher_id:null,code:"",type:"",value:0,value_label:"",start_date:"",end_date:"",is_enabled:!1,stock:0,used:0,is_stock_unlimited:!1,quota:0,is_quota_unlimited:!1,threshold:0,threshold_label:"",has_restrictions:!1,creation_date:"",modification_date:"",carrier_id:null}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/checkout/vouchers",model:Voucher,bulkEnable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?Backbone.$.Deferred().resolve():e.save({is_enabled:!0},{patch:!0})},e)},bulkDisable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?e.save({is_enabled:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)}});
},{"606":606,"607":607,"undefined":undefined}],481:[function(require,module,exports){
function getHeadersActionVouchers(e){e=e||{};var i=[{title:"Ajouter une réduction",callback:"showVoucherAdd"}];if(e.addSave){var t={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};i.length<=1?i.push(t):i.splice(1,0,t)}return i}function getHeadersActionTierPrices(e){e=e||{};var i=[{title:"Ajouter une grille",callback:"actionNewTPGrid"}];if(e.addSave){var t={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};i.length<=1?i.push(t):i.splice(1,0,t)}return i}function HeaderTabsSubscribers(){return[{title:"Liste des abonnés",url:"/modules/subscribers",icon:"md-newsletter-detail"},{title:"Paramètres",url:"/modules/subscribers/settings",icon:"md-newsletter-settings"}]}function HeaderTabsIndex(){return[{title:"Modules & Applications",url:"/modules",icon:"md-extension"},{title:"Kiubi Professional Services",url:"/modules/kps",icon:"md-modules-kps"}]}function ctlScope(e){switch(e){case"showInjectcode":case"showRedirections":return"site:seo";case"showFidelity":case"showAnalytics":return"site:modules";case"showVouchers":case"showVoucher":case"showSubscribers":case"showSubscribersSettings":case"showMerchantCenter":case"showLengow":case"showIadvize":case"showAvisVerifies":return"site:marketing";case"showImportPosts":return"site:cms";case"showImportProducts":return"site:catalog";case"showImportColiship":case"showImportMondialrelay":return"site:checkout";case"showImportWordpress":return"site:blog";case"showBackups":return"site:backup"}return null}function ctlFeature(e){switch(e){case"showFidelity":return"fidelity";case"showVouchers":case"showVoucher":case"showLengow":case"showAvisVerifies":case"showMerchantCenter":case"showImportColiship":case"showImportMondialrelay":return"checkout";case"showImportProducts":return"catalog";case"showImportFiles":return"advanced_media"}return null}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),moment=require("moment"),_=require("underscore"),Router=require(612),Controller=require(34),Injectcode=require(559),Analytics=require(465),Redirections=require(477),Subscribers=require(478),Newsletter=require(560),Vouchers=require(480),Customers=require(384),Groups=require(389),Categories=require(197),Products=require(206),Carriers=require(263),Fidelity=require(550),Iadvize=require(554),AvisVerifies=require(547),Lengow=require(556),Backups=require(467),MerchantCenter=require(558),ImportProducts=require(472),ImportColiship=require(468),ImportMondialrelay=require(475),ImportContents=require(469),ImportWordpress=require(474),ImportFiles=require(470),Menus=require(345),Posts=require(347),Folders=require(441),Medias=require(557),Captcha=require(548),Ads=require(546),Symbols=require(348),TierPrices=require(479),Apps=require(466),IndexView=require(532),InjectcodeView=require(533),RedirectionsView=require(538),FidelityView=require(524),AnalyticsView=require(519),AdsView=require(518),VouchersView=require(545),VoucherView=require(544),VoucherAddModalView=require(537),NewsletterView=require(541),SubscribersView=require(540),ImportContentsView=require(527),ImportProductsView=require(529),ImportColishipView=require(526),ImportMondialrelayView=require(531),ImportWordpressView=require(530),ImportFilesView=require(528),MerchantCenterView=require(536),LengowView=require(535),IadvizeView=require(525),AvisVerifiesView=require(521),BackupsView=require(522),CaptchaView=require(523),AppView=require(520),KpsView=require(534),TierPricesView=require(542),TierPricesGridView=require(543),SidebarMenuView=require(539),ModulesController=Controller.extend({sidebarMenuService:"modules",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Modules",href:"/modules"}],showIndex:function(){var e=Backbone.Radio.channel("app").request("ctx:session");this.navigationController.showContent(new IndexView({apps:e.hasFeature("apps")?new Apps:null})),this.setHeader({title:"Tous les modules"},null,HeaderTabsIndex())},showApp:function(e){var i=new Apps,t=new i.model({app_id:e});t.fetch().done(function(){var e=new AppView({model:t});this.navigationController.showContent(e),this.setHeader({title:t.get("name")})}.bind(this)).fail(this.failHandler("Application introuvable"))},showInjectcode:function(){var e=new Injectcode;e.fetch().done(function(){this.navigationController.showContent(new InjectcodeView({model:e})),this.setHeader({title:"Injection de code"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showRedirections:function(){var e=new Redirections;e.fetch().done(function(){this.navigationController.showContent(new RedirectionsView({collection:e})),this.setHeader({title:"Redirections 301"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showFidelity:function(){var e=new Fidelity;e.fetch().done(function(){this.navigationController.showContent(new FidelityView({model:e})),this.setHeader({title:"Points de fidélité"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showAnalytics:function(){var e=new Analytics;e.fetch().done(function(){this.navigationController.showContent(new AnalyticsView({model:e})),this.setHeader({title:"Google Analytics"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showAds:function(){var e=new Ads;e.fetch().done(function(){this.navigationController.showContent(new AdsView({model:e})),this.setHeader({title:"Authorized Digital Sellers (ADS)"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showVouchers:function(){var e=new VouchersView({collection:new Vouchers});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Tous les bons de réduction"},getHeadersActionVouchers({addSave:!1}))},showVoucher:function(e){var i=new Vouchers,t=new i.model({voucher_id:e});t.fetch().done(function(){var e=new VoucherView({model:t,customers:new Customers,groups:new Groups,categories:new Categories,products:new Products,carriers:new Carriers});this.listenTo(t,"change",function(e){e.hasChanged("code")&&this.setBreadCrum([{href:"/modules/vouchers",title:"Bons de réduction"},{title:e.get("code")}],!0)}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/modules/vouchers")}),this.navigationController.showContent(e),this.setHeader([{href:"/modules/vouchers",title:"Bons de réduction"},{title:t.get("code")}],getHeadersActionVouchers({addSave:!0}))}.bind(this)).fail(this.failHandler("Bon de réduction introuvable"))},actionNewVoucher:function(e){var i=new Vouchers,t={type:e,code:"BON",start_date:moment().format("YYYY-MM-DD"),end_date:moment().add(1,"years").format("YYYY-MM-DD")};switch(e){case"amount":t.value="1",t.threshold="10";break;case"percent":t.value="1";break;case"shipping":t.carrier_id=null}var r=new i.model(t),s=function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/modules/vouchers/"+r.get("voucher_id"))}.bind(this),o=function(e){this.navigationController.showErrorModal(e)}.bind(this);if("shipping"==e){var n=new Carriers;return n.fetch().then(function(e){var i=n.find(function(e){return"magasin"!=e.get("type")});return i?(r.set("carrier_id",i.get("carrier_id")),r.save().done(s).fail(o)):(this.navigationController.showErrorModal("Aucun transporteur trouvé"),Backbone.$.Deferred.reject())}.bind(this),o)}return r.save().done(s).fail(o)},showSubscribers:function(){var e=new SubscribersView({collection:new Subscribers});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Abonnés à la newsletter"},null,HeaderTabsSubscribers())},showSubscribersSettings:function(){var e=new Newsletter;e.fetch().done(function(){this.navigationController.showContent(new NewsletterView({model:e})),this.setHeader({title:"Abonnés à la newsletter"},[{title:"Enregistrer",callback:"actionSave"}],HeaderTabsSubscribers())}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showImportContents:function(){this.navigationController.showContent(new ImportContentsView({model:new ImportContents,menus:new Menus,symbols:new Symbols})),this.setHeader({title:"Import de contenus dans le site web"})},showImportProducts:function(){this.navigationController.showContent(new ImportProductsView({model:new ImportProducts,categories:new Categories})),this.setHeader({title:"Import de produits dans le catalogue"})},showImportColiship:function(){this.navigationController.showContent(new ImportColishipView({model:new ImportColiship})),this.setHeader({title:"Import Coliship"})},showImportMondialrelay:function(){this.navigationController.showContent(new ImportMondialrelayView({model:new ImportMondialrelay})),this.setHeader({title:"Import Mondial Relay"})},showImportWordpress:function(){var e=new Posts;this.navigationController.showContent(new ImportWordpressView({model:new ImportWordpress,post:new e.model})),this.setHeader({title:"Import depuis Wordpress"})},showImportFiles:function(){var e=new Medias;e.fetch().always(function(){this.navigationController.showContent(new ImportFilesView({model:new ImportFiles,folders:new Folders,prefs:e})),this.setHeader({title:"Import de fichiers dans la Médiathèque"})}.bind(this))},showMerchantCenter:function(){var e=new MerchantCenter;e.fetch().done(function(){this.navigationController.showContent(new MerchantCenterView({model:e})),this.setHeader({title:"Google Merchant Center"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showLengow:function(){var e=new Lengow;e.fetch().done(function(){this.navigationController.showContent(new LengowView({model:e,categories:new Categories})),this.setHeader({title:"Lengow"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showIadvize:function(){var e=new Iadvize;e.fetch().done(function(){this.navigationController.showContent(new IadvizeView({model:e})),this.setHeader({title:"iAdvize"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showAvisVerifies:function(){var e=new AvisVerifies;e.fetch().done(function(){this.navigationController.showContent(new AvisVerifiesView({model:e})),this.setHeader({title:"Avis Vérifiés"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showCaptcha:function(){var e=new Captcha;e.fetch().done(function(){this.navigationController.showContent(new CaptchaView({model:e})),this.setHeader({title:"Google reCaptcha"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showBackups:function(){var e=new BackupsView({collection:new Backups});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Gestion des sauvegardes"},[{title:"Créer un point de sauvegarde",callback:"actionNewBackup"}])},showKps:function(){this.navigationController.showContent(new KpsView),this.setHeader({title:"Kiubi Professionnal Services"},null,HeaderTabsIndex())},actionNewBackup:function(){this.navigationController.showOverlay();var e=new Backups;return e.createBackup().done(function(e){if(""!=e)return void this.navigationController.showErrorModal(e,4e3);this.navigationController.hideModal();var i=this.navigationController.getContent();i&&i.start&&i.start()}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showTierPrices:function(){var e=new TierPricesView({collection:new TierPrices});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Tous les tarifs dégressifs"},getHeadersActionTierPrices({addSave:!1}))},showTierPricesGrid:function(e){var i=new TierPrices,t=new i.model({grid_id:e});t.fetch().done(function(){var e=new TierPricesGridView({model:t});this.listenTo(t,"change",function(e){e.hasChanged("name")&&this.setBreadCrum([{href:"/modules/tier_prices",title:"Tarifs dégressifs"},{title:e.get("name")}],!0)}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/modules/tier_prices")}),this.navigationController.showContent(e),this.setHeader([{href:"/modules/tier_prices",title:"Tarifs dégressifs"},{title:t.get("name")}],getHeadersActionTierPrices({addSave:!0}))}.bind(this)).fail(this.failHandler("Grille de tarifs dégressifs introuvable"))},actionNewTPGrid:function(){var e=new((new TierPrices).model)({name:"Grille sans titre"});return e.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/modules/tier_prices/"+e.get("grid_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showVoucherAdd:function(e){var i=new VoucherAddModalView;this.listenTo(i,"select:amount",this.actionNewVoucher),this.listenTo(i,"select:percent",this.actionNewVoucher),this.listenTo(i,"select:shipping",this.actionNewVoucher),this.navigationController.showInModal(i,{title:"Ajouter une réduction",modalClass:"modal-pagetype-add"})}});module.exports=Router.extend({controller:new ModulesController,appRoutes:{modules:"showIndex","modules/injectcode":"showInjectcode","modules/redirections":"showRedirections","modules/fidelity":"showFidelity","modules/analytics":"showAnalytics","modules/ads":"showAds","modules/vouchers":"showVouchers","modules/vouchers/:id":"showVoucher","modules/subscribers":"showSubscribers","modules/subscribers/settings":"showSubscribersSettings","modules/import/contents":"showImportContents","modules/import/products":"showImportProducts","modules/import/coliship":"showImportColiship","modules/import/mondialrelay":"showImportMondialrelay","modules/import/wordpress":"showImportWordpress","modules/import/files":"showImportFiles","modules/merchantcenter":"showMerchantCenter","modules/lengow":"showLengow","modules/iadvize":"showIadvize","modules/avisverifies":"showAvisVerifies","modules/captcha":"showCaptcha","modules/backups":"showBackups","modules/kps":"showKps","modules/tier_prices":"showTierPrices","modules/tier_prices/:id":"showTierPricesGrid","modules/apps/:id":"showApp"},onRoute:function(e){var i=Backbone.Radio.channel("app").request("ctx:session"),t=ctlScope(e),r=ctlFeature(e);return t&&!i.hasScope(t)?(this.controller.navigationController.navigate("/"),!1):r&&!i.hasFeature(r)?(this.controller.navigationController.navigate("/"),!1):void this.controller.showSidebarMenu()}});
},{"197":197,"206":206,"263":263,"34":34,"345":345,"347":347,"348":348,"384":384,"389":389,"441":441,"465":465,"466":466,"467":467,"468":468,"469":469,"470":470,"472":472,"474":474,"475":475,"477":477,"478":478,"479":479,"480":480,"518":518,"519":519,"520":520,"521":521,"522":522,"523":523,"524":524,"525":525,"526":526,"527":527,"528":528,"529":529,"530":530,"531":531,"532":532,"533":533,"534":534,"535":535,"536":536,"537":537,"538":538,"539":539,"540":540,"541":541,"542":542,"543":543,"544":544,"545":545,"546":546,"547":547,"548":548,"550":550,"554":554,"556":556,"557":557,"558":558,"559":559,"560":560,"612":612,"undefined":undefined}],482:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#authorized-digital-sellers" class="md-icon md-help float-right" target="_blank"></a> Authorized Digital Sellers vous permet de <strong>vendre votre inventaire publicitaire numérique</strong> uniquement par l\'intermédiaire de vendeurs (comme Google Ads, par exemple) que vous avez identifiés comme étant autorisés.<br><br>Vous pouvez ajouter du contenu à vos fichiers <code>ads.txt</code> et <code>app-ads.txt</code> afin de <strong>contrôler qui est autorisé</strong> à vendre des annonces sur votre site et vos applications et ainsi empêcher qu\'un inventaire de contrefaçon ne soit proposé aux annonceurs.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration des Authorized Digital Sellers</h1></header><div class="post-content"><div class="form-group"><label for="ads">Vendeurs autorisés : <code>ads.txt</code></label><textarea class="form-control" rows="14" id="ads" name="ads">'+(null==(__t=ads)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label for="app_ads">Vendeurs autorisés pour les applications : <code>app-ads.txt</code></label><textarea class="form-control" rows="14" id="app_ads" name="app_ads">'+(null==(__t=app_ads)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],483:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#google-analytics" class="md-icon md-help float-right" target="_blank"></a> Google Analytics est <strong>le service d\'analyse d\'audience</strong> proposé par Google. Pour bénéficier de ces fonctionnalités, vous devez vous <a href="https://www.google.com/intl/fr_ALL/analytics/" target="_blank">ouvrir un compte sur Google Analytics</a>.<br><br>Google Analytics vous permettra également de <strong>suivre précisément l\'activité de vente en ligne</strong> si vous activez l\'option "<em>Site Web de commerce électronique</em>" dans l\'interface de Google Analytics.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration de Google Analytics</h1></header><div class="post-content"><div class="form-group"><label class="required" for="UA">ID de suivi / ID de mesure</label><p>Ce numéro est contenu dans le fragment de code fourni pour Google Analytics à l\'ouverture d\'un compte. Seul ce numéro, de la forme <code>UA-XXXXX-X</code>, ou <code>G-XXXXXXXX</code> pour les propriétés Google Analytics 4, doit être renseigné ci-dessous et non pas l\'ensemble du fragment de code.</p><input id="UA" name="UA" class="form-control" value="'+(null==(__t=UA)?"":_.escape(__t))+'" placeholder="Numéro de la forme : UA-XXXXX-X ou G-XXXXXXXX"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-6"><div class="form-group"><label for="type">Type de Tracker</label><select id="type" name="type" data-style="selectify"><option value="gtag" '+(null==(__t="gtag"==type?'selected="selected"':"")?"":__t)+'>Tracking gtag (recommandé)</option><option value="universal" '+(null==(__t="universal"==type?'selected="selected"':"")?"":__t)+'>Tracking universel</option><option value="async" '+(null==(__t="async"==type?'selected="selected"':"")?"":__t)+'>Tracking web asynchrone (déprécié)</option><option value="sync" '+(null==(__t="sync"==type?'selected="selected"':"")?"":__t)+'>Tracking web standard (déprécié)</option></select></div></div><div class="col-6"><div class="form-group"><label for="target">Position du tracker</label><select id="target" name="target" data-style="selectify"><option value="body" '+(null==(__t="body"==target?'selected="selected"':"")?"":__t)+'>Dans la balise body (recommandé)</option><option value="head" '+(null==(__t="head"==target?'selected="selected"':"")?"":__t)+'>Dans la balise head</option></select></div></div></div><div class="form-group"><label>Activer la demande de consentement</label><div class="form-check"><input name="consent" id="no_consent" value="" '+(null==(__t=""==consent?'checked="checked"':"")?"":__t)+' type="radio"><label for="no_consent">Non</label><input name="consent" id="consent_tarteaucitron" value="tarteaucitron" '+(null==(__t="tarteaucitron"==consent?'checked="checked"':"")?"":__t)+' type="radio"><label for="consent_tarteaucitron">Oui</label>(via <a href="https://aide.kiubi.com/modules.html#tarteaucitron-consentement" target="_blank">tarteaucitron</a>)</div></div><div class="form-group"><label for="options">Paramètres complémentaires</label><textarea class="form-control" rows="5" id="options" name="options">'+(null==(__t=options)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],484:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",url&&(__p+=' <iframe src="'+(null==(__t=url)?"":__t)+'" class="h-100 w-100" style="border: 0px solid black"></iframe> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],485:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#avis-verifies" class="md-icon md-help float-right" target="_blank"></a> Avis Vérifiés est une solution spécialisée dans la récolte des avis clients. Pour bénéficier de ses fonctionnalités, vous devez au préalable vous <a href="https://www.avis-verifies.com/" target="_blank">ouvrir un compte sur le site d\'Avis Vérifiés</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration de Avis Vérifiés</h1></header><div class="post-content"><div class="form-group"><label class="required" for="id">Identifiant Site Web</label><input id="id" name="id" class="form-control" value="'+(null==(__t=id)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="required" for="secret">Clé secrète</label><input id="secret" name="secret" class="form-control" value="'+(null==(__t=secret)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label for="plateform">Pays</label><div class="row"><div class="col-6"><select data-style="selectify" id="plateform" name="plateform"> ',_.each(allPlatforms,function(e,s){__p+=' <option value="'+(null==(__t=s)?"":_.escape(__t))+'" '+(null==(__t=s==plateform?'selected="selected"':"")?"":__t)+">"+(null==(__t=e)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div></div><div class="form-group has-feedback"><label for="is_sending_products">Avis récoltés</label><div class="row"><div class="col-6"><select data-style="selectify" id="is_sending_products" name="is_sending_products"><option value="0" '+(null==(__t=is_sending_products?"":'selected="selected"')?"":__t)+'>Commandes uniquement</option><option value="1" '+(null==(__t=is_sending_products?'selected="selected"':"")?"":__t)+'>Commandes et produits</option></select></div></div></div></div><div class="form-group"><label for="offset">Délai d\'attente avant demande d\'avis</label><div class="row"><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="offset" name="offset" value="'+(null==(__t=offset)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">jours</span></div></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],486:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#gestion-des-sauvegardes" class="md-icon md-help float-right" target="_blank"></a> Kiubi sauvegarde automatiquement l\'<strong>intégralité du site Internet</strong> (contenus, pages, catégories, préférences, médiathèque, thème graphique, etc.) une fois par jour et conserve une sauvegarde de la veille, une de l\'avant-veille et une du lundi précédent. Vous pouvez à tout moment créer un point de sauvegarde manuellement qui <strong>remplacera le dernier point de sauvegarde effectué</strong>.<br><br>Les utilisateurs, les membres, les commandes, les noms de domaines, les clés APIs, la formule d\'abonnement, les crédits souscrits et les factures d\'abonnement sont spécifiquement <strong>exclues</strong> des points de sauvegarde.<br><br><span class="text-danger">Attention, <strong>la création d’un nouveau point de sauvegarde</strong> écrasera le dernier point de sauvegarde créé. <strong>La restauration d\'une sauvegarde</strong> entraînera quant à elle la perte de toutes les données qui ont été ajoutées entre la date de la sauvegarde et la date de sa restauration, à l\'exception des données exclues des points de sauvegarde.</span></div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],487:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters align-items-center"><div class="col item-body"><span><i class="md-icon md-date"></i> '+(null==(__t=creation_date)?"":_.escape(__t))+'</span></div><div class="col-auto"><a class="btn btn-primary float-right" href="#" role="button" data-role="action" data-action="restore" data-confirm="warning">Restaurer</a></div></div>';return __p};
},{"undefined":undefined}],488:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#google-recaptcha" class="md-icon md-help float-right" target="_blank"></a> Google reCaptha est <strong>le service de protection</strong> contre les robots (anti-spam) proposé par Google. Pour bénéficier de ces fonctionnalités, vous devez vous <a href="https://www.google.com/recaptcha/intro/v3.html" target="_blank">ouvrir un compte sur Google reCaptcha</a> et suivre les instructions fournies pour <strong>la version 3</strong>.<br><br>Seules la clé du site et la clé secrète sont nécessaires pour configurer Google reCaptcha. Une fois activé, <strong>il remplace le captcha par défaut</strong> de Kiubi et affiche un badge <em>protection par reCAPTCHA</em> sur les pages concernées.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration de Google reCaptcha</h1></header><div class="post-content"><div class="form-group"><label class="required" for="recaptcha_key">Clé du site</label><p>La clés du site est obtenue après avoir enregistré un reCaptcha version 3 pour les noms de domaine du site auprès de Google.</p><input id="recaptcha_key" name="recaptcha_key" class="form-control" value="'+(null==(__t=recaptcha_key)?"":_.escape(__t))+'"></div><div class="form-group"><label class="required" for="recaptcha_secret">Clé secrète</label><p>La clés secrète est obtenue après avoir enregistré un reCaptcha version 3 pour les noms de domaine du site auprès de Google.</p><input id="recaptcha_secret" name="recaptcha_secret" class="form-control" value="'+(null==(__t=recaptcha_secret)?"":_.escape(__t))+'"></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="type" id="type_recaptcha" value="recaptcha" '+(null==(__t="recaptcha"==type?'checked="checked"':"")?"":__t)+' type="radio"><label for="type_recaptcha" class="visible">Activé</label><input name="type" id="type_kiubi" value="kiubi" '+(null==(__t="kiubi"==type?'checked="checked"':"")?"":__t)+' type="radio"><label for="type_kiubi" class="not-visible">Désactivé</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],489:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/membres.html#points-de-fidelite" class="md-icon md-help float-right" target="_blank"></a> Le paiement d’une commande permet à un membre d’<strong>accumuler des points</strong> sur une carte de réduction virtuelle. Ces points sont valables un an et peuvent être <strong>échangés contre un bon de réduction</strong> utilisable lors d\'une prochaine commande.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Conditions de gains des points de fidélité</h1></header><div class="post-content"><div class="form-group"><label for="gain_rate">Gains par commande</label><p>Nombre de points de fidélité gagnés pour 1,00 '+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' payé à chaque commande (hors frais de port).</p><div class="row"><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="gain_rate" name="gain_rate" value="'+(null==(__t=gain_rate)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">points</span></div></div></div></div></div><div class="form-group"><label for="reward_first_order">Gains bonus</label><p>Nombre de points de fidélité gagnés à la première commande.</p><div class="row"><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="reward_first_order" name="reward_first_order" value="'+(null==(__t=reward_first_order)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">points</span></div></div></div></div></div><div class="form-group"><p>Nombre de points de fidélité gagnés à l\'inscription à la newsletter lors de l\'ouverture de compte.</p><div class="row"><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="reward_subscriber" name="reward_subscriber" value="'+(null==(__t=reward_subscriber)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">points</span></div></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Conversion des points en bons de réduction</h1></header><div class="post-content"><p>Un bon de réduction à usage unique est envoyé par email à un membre chaque fois qu\'il dépasse le seuil de points de fidélité.</p><div class="form-group"><label>Envoi du bon de réduction</label><div class="form-check"><input name="is_creation_enabled" id="is_creation_enabled1" value="1" '+(null==(__t=is_creation_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_creation_enabled1" class="visible">Activé</label><input name="is_creation_enabled" id="is_creation_enabled0" value="0" '+(null==(__t=is_creation_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_creation_enabled0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-6"><div class="form-group"><label for="creation_cost">Seuil d\'envoi</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" id="creation_cost" name="creation_cost" value="'+(null==(__t=creation_cost)?"":_.escape(__t))+'" placeholder="500"><div class="input-group-append"><span class="input-group-text">points</span></div></div></div><div class="form-group"><label for="voucher_threshold">Seuil de validité</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" id="voucher_threshold" name="voucher_threshold" value="'+(null==(__t=voucher_threshold)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achats</span></div></div></div><div class="form-group"><label for="is_voucher_restricted">Limite d\'utilisation</label><select data-style="selectify" id="is_voucher_restricted" name="is_voucher_restricted"><option value="1" '+(null==(__t=is_voucher_restricted?'selected="selected"':"")?"":__t)+' >Seulement au membre à qui il est envoyé</option><option value="0" '+(null==(__t=is_voucher_restricted?"":'selected="selected"')?"":__t)+' >Utilisable par n\'importe quel membre</option></select></div></div><div class="col-4"><div class="form-group"><label for="voucher_value">Montant de la réduction</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="voucher_value" name="voucher_value" value="'+(null==(__t=voucher_value)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+'</span></div></div></div><div class="form-group"><label for="voucher_validity">Durée de validité</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="voucher_validity" name="voucher_validity" value="'+(null==(__t=voucher_validity)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">mois</span></div></div></div></div></div><div class="form-group"><label for="voucher_mail_subject">Sujet de l\'email</label><input class="form-control" id="voucher_mail_subject" name="voucher_mail_subject" value="'+(null==(__t=voucher_mail_subject)?"":_.escape(__t))+'" placeholder="Sujet de l\'email envoyé au membre qui a obtenu le bon de réduction. Laisser vide pour utiliser le sujet par défaut."></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],490:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert">iAdvize est une solution de chat commercial enrichie qui permet de répondre en direct aux visiteurs du site et de les orienter vers la solution ou le produit qui répondra à leurs besoins. Pour bénéficier de ses fonctionnalités, vous devez au préalable vous <a href="https://www.iadvize.com/fr/?sp=113" target="_blank">ouvrir un compte sur le site d\'iAdvize</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration de iAdvize</h1></header><div class="post-content"><div class="form-group"><label class="required" for="id">Numéro de compte</label><input id="id" name="id" class="form-control" value="'+(null==(__t=id)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],491:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/transporteurs.html#export-pour-coliship" class="md-icon md-help float-right" target="_blank"></a> Grâce au système d\'import données d\'expéditions de Kiubi, mettez à jour les urls de suivi de vos expéditions, et informez vos clients de l\'avancement dans le traitement de leur commande. Nous vous conseillons avant tout import de produits de <a href="https://aide.kiubi.com/transporteurs.html#export-pour-coliship" target="_blank">consulter la documentation en ligne</a> et de <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label>Fichier d\'import</label><div data-role="file"></div></div><div class="form-group"><label>Notifier par email le changement de status</label><div class="form-check"><input name="notify" id="notify1" value="1" type="radio"><label for="notify1" class="">Oui</label><input name="notify" id="notify0" value="0" type="radio" checked="checked"><label for="notify0" class="">Non</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button></div></div> ':1==step?(__p+=" ",report.warnings&&report.warnings.length>0&&(__p+=' <div class="alert alert-warning"><strong>Il y a des alertes</strong> ',report.errors&&0!=report.errors.length||(__p+="mais vous pouvez quand même valider l'import de données d'expéditions"),__p+='.<br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank">effectuer un point de sauvegarde</a> de son site.<br><br><ul> ',_.each(report.warnings,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&report.errors.length>0&&(__p+=' <div class="alert alert-danger"><strong>Il y a des erreurs dans le fichier</strong>, vous ne pouvez pas valider l\'import de données d\'expéditions. Veuillez <a href="https://aide.kiubi.com/transporteurs.html#import-depuis-coliship" target="_blank" class="alert-link">consulter la documentation en ligne</a> afin de corriger ces erreurs.<br><br><ul> ',_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&0!=report.errors.length||(__p+=' <div class="alert alert-info"><strong>Les données sont prêtes à être importées.</strong><br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank" class="alert-link">effectuer un point de sauvegarde</a> de son site.</div> '),__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button> ',report.errors&&0!=report.errors.length||(__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button> '),__p+=" </div></div> "):(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans le fichier.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les données d\'expédition ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],492:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/site-web.html#import-de-contenus" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez <strong>importer plusieurs contenus simultanément</strong> pour remplir et mettre à jour les pages et les symboles du site web. Nous vous conseillons avant tout import de contenus de <a href="https://aide.kiubi.com/site-web.html#import-de-contenus" target="_blank">consulter la documentation en ligne</a> et de <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label>Fichier d\'import</label><p>Vous pouvez télécharger un exemple de modèle de fichier d\'import (<a href="https://cdn.kiubi-admin.com/69/documents/import.csv" target="_blank">CSV</a> ou <a href="https://cdn.kiubi-admin.com/69/documents/import.xls" target="_blank">XLS</a>) pour vous aider à préparer votre propre fichier.</p><div data-role="file"></div></div><div class="row"><div class="col-6"><div class="form-group"><label for="page" class="required">Page ou symbole de destination</label><div data-role="page"></div></div></div></div><div class="form-group"><label>Action à réaliser</label><div class="radio"><input name="mode" id="mode1" value="add" type="radio" checked="checked"><label for="mode1" class="">Ajouter les contenus importés à la page ou au symbole de destination</label><p class="ml-4">Cette action <em>conserve</em> les contenus de la page ou du symbole de destination</p></div><div class="radio"><input name="mode" id="mode2" value="replace" type="radio"><label for="mode2" class="">Remplacer tous les contenus de la page ou du symbole de destination</label><p class="ml-4">Cette action <em>supprime</em> les contenus de la page ou du symbole de destination</p></div></div><div class="form-group"><label>Afficher les contenus après l\'import</label><div class="form-check"><input name="is_visible" id="is_visible1" value="1" type="radio"><label for="is_visible1" class="">Oui</label><input name="is_visible" id="is_visible0" value="0" type="radio" checked="checked"><label for="is_visible0" class="">Non</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button></div></div> ':1==step?(__p+=" ",report.warnings&&report.warnings.length>0&&(__p+=' <div class="alert alert-warning"><strong>Il y a des alertes</strong> ',report.errors&&0!=report.errors.length||(__p+="mais vous pouvez quand même valider l'import des contenus"),__p+='.<br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank">effectuer un point de sauvegarde</a> de son site.<br><br><ul> ',_.each(report.warnings,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&report.errors.length>0&&(__p+=' <div class="alert alert-danger"><strong>Il y a des erreurs dans le fichier</strong>, vous ne pouvez pas valider l\'import de contenus. Veuillez <a href="https://aide.kiubi.com/site-web.html#import-de-contenu" target="_blank" class="alert-link">consulter la documentation en ligne</a> afin de corriger ces erreurs.<br><br><ul> ',_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&0!=report.errors.length||(__p+=' <div class="alert alert-info"><strong>Les données sont prêtes à être importées.</strong><br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank" class="alert-link">effectuer un point de sauvegarde</a> de son site.</div> '),__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button> ',report.errors&&0!=report.errors.length||(__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button> '),__p+=" </div></div> "):(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans le fichier.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les contenus du site web ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],493:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#mediatheque-avancee" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez importer des fichiers <strong>à partir d\'une adresse web ou d\'un compte Dropbox</strong> pour remplir votre médiathèque.\tNous vous conseillons avant tout import de fichiers de <a href="https://aide.kiubi.com/modules.html#mediatheque-avancee" target="_blank">consulter la documentation en ligne</a> et de <a href="/modules/backups" target="_blank">réaliser un point de\tsauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label for="url" class="required">URL du fichier ou de l\'archive</label><input class="form-control" id="url" name="url" value="" placeholder="https://www.dropbox.com/fichier.pdf ou https://www.example.org/archive.zip"></div><div class="form-group has-feedback"><div class="row"><div class="col-6"><label class="required">Dossier de destination</label><div data-role="folder"></div></div></div></div><div class="form-group"><label>Décompresser l\'archive</label><p>Décompresse une archive .zip et importe individuellement chaque fichier de l\'archive dans la médiathèque.</p><div class="form-check"><input name="unzip" id="unzip1" value="1" type="radio"><label for="unzip1" class="">Oui</label><input name="unzip" id="unzip0" value="0" type="radio" checked="checked"><label for="unzip0" class="">Non</label></div></div><div class="form-group"><label for="">Taille maximum des images</label><p>Redimensionne automatiquement les images importées qui sont plus grandes que la taille indiquée.</p><div class="row"><div class="col-4"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="max_width" value="'+(null==(__t=max_width)?"":_.escape(__t))+'" placeholder="Taille d\'origine"><div class="input-group-append"><span class="input-group-text">pixels de largeur</span></div></div></div><div class="col-4"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="max_height" value="'+(null==(__t=max_height)?"":_.escape(__t))+'" placeholder="Taille d\'origine"><div class="input-group-append"><span class="input-group-text">pixels de hauteur</span></div></div></div></div></div><div class="form-group"><label for="jpg_compression">Qualité des JPEG</label><div class="row"><div class="col-4"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="jpg_compression" name="jpg_compression" value="'+(null==(__t=jpg_compression)?"":_.escape(__t))+'" placeholder="85"><div class="input-group-append"><span class="input-group-text">sur 100</span></div></div></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button></div></div> ':(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a eu des erreurs.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les fichiers ont été correctement importés !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],494:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/catalogue.html#import-de-produits" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez <strong>importer plusieurs produits simultanément</strong> pour remplir et mettre à jour le catalogue. Nous vous conseillons avant tout import de produits de <a href="https://aide.kiubi.com/catalogue.html#import-de-produits" target="_blank">consulter la documentation en ligne</a> et de <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label>Fichier d\'import</label><p>Vous pouvez télécharger un exemple de modèle de fichier d\'import (<a href="https://cdn.kiubi-admin.com/69/documents/import_catalogue.csv" target="_blank">CSV</a> ou <a href="https://cdn.kiubi-admin.com/69/documents/import_catalogue.xls" target="_blank">XLS</a>) pour vous aider à préparer votre propre fichier.</p><div data-role="file"></div></div><div class="form-group has-feedback"><label>Catégorie par défaut</label><p>Vous devez choisir une catégorie qui sera utilisée si la catégorie du produit n\'est pas précisé dans le fichier d\'import.</p><div class="row"><div class="col-6"><div data-role="categories"></div></div></div></div><div class="form-group"><label>Afficher les produits après l\'import</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio"><label for="is_enabled1" class="">Oui</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" checked="checked"><label for="is_enabled0" class="">Non</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button></div></div> ':1==step?(__p+=" ",report.warnings&&report.warnings.length>0&&(__p+=' <div class="alert alert-warning"><strong>Il y a des alertes</strong> ',report.errors&&0!=report.errors.length||(__p+="mais vous pouvez quand même valider l'import de données du catalogue"),__p+='.<br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank">effectuer un point de sauvegarde</a> de son site.<br><br><ul> ',_.each(report.warnings,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&report.errors.length>0&&(__p+=' <div class="alert alert-danger"><strong>Il y a des erreurs dans le fichier</strong>, vous ne pouvez pas valider l\'import de données du catalogue. Veuillez <a href="https://aide.kiubi.com/catalogue.html#import-de-produits" target="_blank" class="alert-link">consulter la documentation en ligne</a> afin de corriger ces erreurs.<br><br><ul> ',_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&0!=report.errors.length||(__p+=' <div class="alert alert-info"><strong>Les données sont prêtes à être importées.</strong><br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank" class="alert-link">effectuer un point de sauvegarde</a> de son site.</div> '),__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button> ',report.errors&&0!=report.errors.length||(__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button> '),__p+=" </div></div> "):(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans le fichier.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les données du catalogue ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],495:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>Vous pouvez importer l’intégralité d’un site WordPress dans ce site Kiubi : pages, billets, catégories, commentaires, médias, tout le contenu est automatiquement analysé et ajouté à ce site Kiubi.</p><p>Afin de correctement préparer l\'import, vous devez :</p><ul><li>Soit vous rendre dans la console d\'administration du site WordPress et télécharger le fichier XML d\'export disponible dans la rubrique Outils / Export (méthode recommandée)</li><li>Soit vous munir de l\'adresse Web du site WordPress ainsi que de son identifiant et de son mot de passe administrateur</li><li>Dans tous les cas, <a href="/modules/backups" target="_blank">réaliser préalablement un point de sauvegarde</a> du site Internet.</li></ul><p>L\'import est limité à 3000 billets, 300 commentaires par billet, 30 catégories, 50 pages et 10 000 médias. Le fichier XML d\'export ne peut pas dépasser un poids de 7Mo et le format d\'export WordPress doit être en version 1.0, 1.1 ou 1.2.</p><p>Pendant le processus d\'import, le contenu du site WordPress n\'est <strong>jamais modifié ou altéré</strong> et les accès administrateurs ne sont <strong>jamais stockés ou communiqués</strong> à un service tiers.</p><p>L\'import depuis WordPress est une fonctionnalité en béta qui n\'est pas compatible avec toutes les configurations de WordPress. Pour ces raisons, nous ne pouvons assurer de support en cas d\'import impossible ou incomplet.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Source d\'import</h1></header><div class="post-content"><p>Deux sources différentes sont disponibles pour importer le contenu d\'un site WordPress dans ce site Kiubi. Vous devez utiliser un des deux sources, au choix :</p><div class="form-group"><label>Source 1 : fichier XML d\'export du site WordPress (recommandé)</label><div data-role="file"></div></div><hr><div class="form-group"><label for="url">Source 2 : accéder directement au site WordPress</label><input class="form-control" id="url" name="url" value="" placeholder="Adresse du site WordPress de la forme https://www.mon-site-wordpress.com"></div><div class="row"><div class="col-6"><div class="form-group"><label for="login">Identifiant administrateur</label><input class="form-control" id="login" name="login" value="" placeholder=""></div></div><div class="col-6"><div class="form-group"><label for="password">Mot de passe administrateur</label><input class="form-control" id="password" name="password" value="" placeholder="" type="password"></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label>Importer les médias</label><div class="form-check"><input name="import_media" id="import_media1" value="1" type="radio" checked="checked"><label for="import_media1" class="">Oui</label><input name="import_media" id="import_media0" value="0" type="radio"><label for="import_media0" class="">Non</label></div></div><div class="form-group"><label>Importer les pages</label><div class="form-check"><input name="import_pages" id="import_pages1" value="1" type="radio" checked="checked"><label for="import_pages1" class="">Oui</label><input name="import_pages" id="import_pages0" value="0" type="radio"><label for="import_pages0" class="">Non</label></div></div><div class="form-group"><label for="type">Type de billet par défaut</label><div class="row"><div class="col-6"><div data-role="type"></div></div></div></div><div class="form-group"><label for="type">Correspondance de la taille des images miniatures</label><div class="row"><div class="col-6"><select class="form-control" id="thumbnail" name="thumbnail" data-style="selectify"><option value="miniature">Miniature</option><option value="g_miniature" selected="selected">Grande miniature</option><option value="vignette">Vignette</option><option value="g_vignette">Grande vignette</option></select></div></div></div><div class="form-group"><label for="medium">Correspondance de la taille des images moyennes</label><div class="row"><div class="col-6"><select class="form-control" id="medium" name="medium" data-style="selectify"><option value="miniature">Miniature</option><option value="g_miniature">Grande miniature</option><option value="vignette" selected="selected">Vignette</option><option value="g_vignette">Grande vignette</option></select></div></div></div><div class="form-group"><label for="large">Correspondance de la taille des grandes images</label><div class="row"><div class="col-6"><select class="form-control" id="large" name="large" data-style="selectify" data-direction="up"><option value="miniature">Miniature</option><option value="g_miniature">Grande miniature</option><option value="vignette">Vignette</option><option value="g_vignette" selected="selected">Grande vignette</option></select></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button></div></div> ':1==step?(__p+=" ",report.warnings&&report.warnings.length>0&&(__p+=' <div class="alert alert-warning"><strong>Il y a des alertes</strong> ',report.errors&&0!=report.errors.length||(__p+="mais vous pouvez quand même valider l'import de données du catalogue"),__p+='.<br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank">effectuer un point de sauvegarde</a> de son site.<br><br><ul> ',_.each(report.warnings,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&report.errors.length>0&&(__p+=' <div class="alert alert-danger"><strong>Il y a des erreurs dans le fichier</strong>, vous ne pouvez pas valider l\'import de données du catalogue. Veuillez <a href="https://aide.kiubi.com/catalogue.html#import-de-produits" target="_blank" class="alert-link">consulter la documentation en ligne</a> afin de corriger ces erreurs.<br><br><ul> ',_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&0!=report.errors.length||(__p+=' <div class="alert alert-info"><strong>Les données sont prêtes à être importées.</strong><br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank" class="alert-link">effectuer un point de sauvegarde</a> de son site.</div> '),__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button> ',report.errors&&0!=report.errors.length||(__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button> '),__p+=" </div></div> "):(__p+=" ",report.errors&&report.errors.length>0?(__p+=' <div class="alert alert-danger"><strong>L\'import a été réalisé</strong>, mais il y a eu des erreurs :<br><br><ul> ',_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les données du catalogue ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],496:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/transporteurs.html#export-pour-coliship" class="md-icon md-help float-right" target="_blank"></a> Grâce au système d\'import données d\'expéditions de Kiubi, mettez à jour les urls de suivi de vos expéditions, et informez vos clients de l\'avancement dans le traitement de leur commande. Nous vous conseillons avant tout import de produits de <a href="https://aide.kiubi.com/transporteurs.html#export-pour-coliship" target="_blank">consulter la documentation en ligne</a> et de <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label>Fichier d\'import</label><div data-role="file"></div></div><div class="form-group"><label>Notifier par email le changement de status</label><div class="form-check"><input name="notify" id="notify1" value="1" type="radio"><label for="notify1" class="">Oui</label><input name="notify" id="notify0" value="0" type="radio" checked="checked"><label for="notify0" class="">Non</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button></div></div> ':1==step?(__p+=" ",report.warnings&&report.warnings.length>0&&(__p+=' <div class="alert alert-warning"><strong>Il y a des alertes</strong> ',report.errors&&0!=report.errors.length||(__p+="mais vous pouvez quand même valider l'import de données d'expéditions"),__p+='.<br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank">effectuer un point de sauvegarde</a> de son site.<br><br><ul> ',_.each(report.warnings,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&report.errors.length>0&&(__p+=' <div class="alert alert-danger"><strong>Il y a des erreurs dans le fichier</strong>, vous ne pouvez pas valider l\'import de données d\'expéditions. Veuillez <a href="https://aide.kiubi.com/transporteurs.html#import-depuis-mondialrelay" target="_blank" class="alert-link">consulter la documentation en ligne</a> afin de corriger ces erreurs.<br><br><ul> ',_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&0!=report.errors.length||(__p+=' <div class="alert alert-info"><strong>Les données sont prêtes à être importées.</strong><br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank" class="alert-link">effectuer un point de sauvegarde</a> de son site.</div> '),__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button> ',report.errors&&0!=report.errors.length||(__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button> '),__p+=" </div></div> "):(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans le fichier.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les données d\'expédition ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],497:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article post-article-empty text-center"><header class="post-header"><h1>Les modules disponibles sur votre site et dans vos espaces de travail</h1></header><div class="post-content"><p class="lead">Optimiser votre site, fidéliser vos clients, améliorer votre référencement et booster votre productivité</p></div><footer class="post-footer"></footer></article><div class="module-list mt-2 mb-4"><div data-role="spotlights"></div></div><article class="post-article"><header class="post-header"><h1>Autres modules disponibles</h1></header><div data-role="modules"></div><footer class="post-footer"></footer></article><article class="post-article post-article-empty mt-5 text-center"><header class="post-header"><h1>Les APIs pour développer de nouvelles applications</h1></header><div class="post-content"><p class="lead">Permettre aux développeurs web d\'enrichir leurs projets avec de nouvelles fonctionnalités et applications</p></div><footer class="post-footer"></footer></article><div class="module-list"><div class="row"><div class="col-12 col-md-6 d-flex"><article class="post-article thumbs-desc"><header class="post-header"><span class="md-icon md-icon-module md-module-apipfo rounded-circle mr-3"></span></header><div class="post-content"><h1>API Front-Office</h1><p>Pour les intégrateurs Front-End qui ont besoin d\'accéder aux données publiques de leurs sites afin de les enrichir avec de nouvelles interactions. <a href="https://aide.kiubi.com/api-front-generalites.html" target="_blank">En savoir plus</a></p><a class="btn btn-outline-primary" href="'+(null==(__t=domain)?"":_.escape(__t))+'/api/v1/" target="_blank">Se connecter</a></div><footer class="post-footer"></footer></article></div><div class="col-12 col-md-6 d-flex"><article class="post-article thumbs-desc"><header class="post-header"><span class="md-icon md-icon-module md-module-apibdo rounded-circle mr-3"></span></header><div class="post-content"><h1>API Developers</h1><p>Pour les développeurs qui souhaitent interfacer leurs propres applications avec Kiubi grâce à un accès direct et sécurisé aux données de leurs sites. <a href="https://aide.kiubi.com/api-dev-generalites.html" target="_blank">En savoir plus</a></p><a class="btn btn-outline-primary" href="https://api.kiubi.com/" target="_blank">Se connecter</a></div><footer class="post-footer"></footer></article></div></div></div>';return __p};
},{"undefined":undefined}],498:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert">Vous pouvez insérer du code (html, js, css...) avant la balise <code>&lt;/head&gt;</code> et <code>&lt;/body&gt;</code> qui sera <strong>utilisé par défaut</strong> pour toutes les pages du site Internet. Vous pouvez également <strong>personnaliser ce code pour chaque page</strong>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Code à injecter</h1></header><div class="post-content"><div class="form-group"><label for="js_head">Code avant <code>&lt;/head&gt;</code> par défaut</label><textarea class="form-control" rows="10" id="js_head" name="js_head" placeholder="Code utilisé par défaut avant la balise &lt;/head&gt; ">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label for="js_body">Code avant <code>&lt;/body&gt;</code> par défaut</label><textarea class="form-control" rows="10" id="js_body" name="js_body" placeholder="Code utilisé par défaut avant la balise &lt;/body&gt; ">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],499:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article post-article-empty kps"><header class="post-header"><h1>Technologie et Services sur-mesure</h1></header><div class="post-content"><p class="lead">Construisez la solution qui vous convient avec les briques fonctionnelles et le support technique avancés des Kiubi Professionnal Services.</p><p class="lead">Pour en savoir plus, contactez votre agence web référente ou consultez notre équipe composée de professionnels experts. <a href="https://www.kiubi.com/contact-professional-services.html" target="_blank">Contactez-nous</a></p></div><footer class="post-footer"></footer></article><div class="module-list"><div class="row"><div class="col-12 col-md-6 d-flex"><article class="post-article post-article-dark thumbs-desc w-100"><header class="post-header"><span class="md-icon md-icon-module rounded-circle" style="background-color: #a24100">sync_alt</span></header><div class="post-content"><h1>Migration de sites</h1><p>Transfert d\'un site web depuis un CMS vers Kiubi, Copie de données d\'un site à un autre, Intégration HTML/CSS, Accompagnement à la mise en production, ...</p><a class="btn btn-outline-light" href="https://www.kiubi.com/professional-services.html" target="_blank">En savoir plus</a></div><footer class="post-footer"></footer></article></div><div class="col-12 col-md-6 d-flex"><article class="post-article post-article-dark thumbs-desc w-100"><header class="post-header"><span class="md-icon md-icon-module rounded-circle" style="background-color: #fda951">storefront</span></header><div class="post-content"><h1>eCommerce avancé</h1><p>Filtres à facettes, Variantes multicritères, Modes de paiement personnalisés, Paiement d\'acomptes, Vente par lots, Commandes récurrentes, ...</p><a class="btn btn-outline-light" href="https://www.kiubi.com/professional-services.html" target="_blank">En savoir plus</a></div><footer class="post-footer"></footer></article></div><div class="col-12 col-md-6 d-flex"><article class="post-article post-article-dark thumbs-desc w-100"><header class="post-header"><span class="md-icon md-icon-module rounded-circle" style="background-color: #c4b1c4">get_app</span></header><div class="post-content"><h1>Exports personnalisés</h1><p>Synchronisation avec les ERP/CRM, Export des ventes vers les systèmes de comptabilité, Flux personnalisés de produits (Google Merchant, Lengow, etc.), ...</p><a class="btn btn-outline-light" href="https://www.kiubi.com/professional-services.html" target="_blank">En savoir plus</a></div><footer class="post-footer"></footer></article></div><div class="col-12 col-md-6 d-flex"><article class="post-article post-article-dark thumbs-desc w-100"><header class="post-header"><span class="md-icon md-icon-module rounded-circle" style="background-color: #8a6d3b">publish</span></header><div class="post-content"><h1>Imports automatiques</h1><p>Automatisation des imports à partir d’un fichier de données (XLS, CSV, XML, JSON, Google Sheets, etc.), Traitement automatisé du contenu, ...</p><a class="btn btn-outline-light" href="https://www.kiubi.com/professional-services.html" target="_blank">En savoir plus</a></div><footer class="post-footer"></footer></article></div><div class="col-12 col-md-6 d-flex"><article class="post-article post-article-dark thumbs-desc w-100"><header class="post-header"><span class="md-icon md-icon-module rounded-circle" style="background-color: #fed558">share</span></header><div class="post-content"><h1>Interface avec des services tiers</h1><p>Échanges de données (produits, commandes, contenus, etc.) via API, Synchronisation avec des plateformes tierces (Google Agenda, Plateformes Immobilières, etc.), ...</p><a class="btn btn-outline-light" href="https://www.kiubi.com/professional-services.html" target="_blank">En savoir plus</a></div><footer class="post-footer"></footer></article></div><div class="col-12 col-md-6 d-flex"><article class="post-article post-article-dark thumbs-desc w-100"><header class="post-header"><span class="md-icon md-icon-module rounded-circle" style="background-color: #86df6a">dns</span></header><div class="post-content"><h1>Hébergement dédié</h1><p>Mise à disposition d\'une instance Kiubi dédiée : Serveurs, Backup, Noms de domaine, Certificats SSL, Monitoring 24/7, Maintenance applicative et évolutive.</p><a class="btn btn-outline-light" href="https://www.kiubi.com/professional-services.html" target="_blank">En savoir plus</a></div><footer class="post-footer"></footer></article></div><div class="col-12 col-md-6 d-flex"><article class="post-article post-article-dark thumbs-desc w-100"><header class="post-header"><span class="md-icon md-icon-module rounded-circle" style="background-color: #a15db1">devices_other</span></header><div class="post-content"><h1>Applications métiers</h1><p>App mobile, Objets connectés, Configurateur produit, Vote en ligne, Génération de PDF, Géolocation, Demande de devis, Web-to-Store, ...</p><a class="btn btn-outline-light" href="https://www.kiubi.com/professional-services.html" target="_blank">En savoir plus</a></div><footer class="post-footer"></footer></article></div><div class="col-12 col-md-6 d-flex"><article class="post-article post-article-dark thumbs-desc w-100"><header class="post-header"><span class="md-icon md-icon-module rounded-circle" style="background-color: #5CB299; transform: rotate(90deg);\t-webkit-transform: rotate(90deg)">account_tree</span></header><div class="post-content"><h1>Automatisation marketing</h1><p>Connexion avec les plateformes d\'emailing, Suggestions personnalisées de produits, Relances clients, Remises de bienvenue, ...</p><a class="btn btn-outline-light" href="https://www.kiubi.com/professional-services.html" target="_blank">En savoir plus</a></div><footer class="post-footer"></footer></article></div></div></div><article class="post-article post-article-empty text-center"><header class="post-header"><h1>Les APIs pour développer de nouvelles applications</h1></header><div class="post-content"><p class="lead">Permettre aux développeurs web d\'enrichir leurs projets avec de nouvelles fonctionnalités et applications</p></div><footer class="post-footer"></footer></article><div class="module-list"><div class="row"><div class="col-12 col-md-6 d-flex"><article class="post-article thumbs-desc"><header class="post-header"><span class="md-icon md-icon-module md-module-apipfo rounded-circle mr-3"></span></header><div class="post-content"><h1>API Front-Office</h1><p>Pour les intégrateurs Front-End qui ont besoin d\'accéder aux données publiques de leurs sites afin de les enrichir avec de nouvelles interactions. <a href="https://aide.kiubi.com/api-front-generalites.html" target="_blank">En savoir plus</a></p><a class="btn btn-outline-primary" href="'+(null==(__t=domain)?"":_.escape(__t))+'/api/v1/" target="_blank">Se connecter</a></div><footer class="post-footer"></footer></article></div><div class="col-12 col-md-6 d-flex"><article class="post-article thumbs-desc"><header class="post-header"><span class="md-icon md-icon-module md-module-apibdo rounded-circle mr-3"></span></header><div class="post-content"><h1>API Developers</h1><p>Pour les développeurs qui souhaitent interfacer leurs propres applications avec Kiubi grâce à un accès direct et sécurisé aux données de leurs sites. <a href="https://aide.kiubi.com/api-dev-generalites.html" target="_blank">En savoir plus</a></p><a class="btn btn-outline-primary" href="https://api.kiubi.com/" target="_blank">Se connecter</a></div><footer class="post-footer"></footer></article></div></div></div>';return __p};
},{"undefined":undefined}],500:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#lengow" class="md-icon md-help float-right" target="_blank"></a> Lengow est une solution permettant d’optimiser la visibilité et la rentabilité des sites marchands, que ce soit sur les comparateurs de prix, les places de marché, les plateformes d’affiliation ou les réseaux sociaux. Pour bénéficier de ses fonctionnalités, vous devez au préalable vous <a href="https://www.lengow.com" target="_blank">ouvrir un compte sur le site de Lengow</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration de Lengow</h1></header><div class="post-content"><div class="form-group"><label class="required" for="id">Id client Lengow</label><p>Ce numéro est fourni par Lengow, vous pouvez retrouver cet ID en haut de chaque page de leur solution.</p><input id="id" name="id" class="form-control" value="'+(null==(__t=id)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label>Tracker de conversion</label><div class="form-check"><input name="is_tracker_enabled" id="is_tracker_enabled1" value="1" type="radio" '+(null==(__t=is_tracker_enabled?'checked="checked"':"")?"":__t)+'><label for="is_tracker_enabled1" class="visible">Activé</label><input name="is_tracker_enabled" id="is_tracker_enabled0" value="0" type="radio" '+(null==(__t=is_tracker_enabled?"":'checked="checked"')?"":__t)+'><label for="is_tracker_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label>Flux d\'export</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div> ',is_enabled&&(__p+=' <div class="form-group"><label>Adresse de l\'export à communiquer à Lengow</label> ',__p+=export_url?" <p>Dernier export créé le "+(null==(__t=last_export)?"":_.escape(__t))+'.</p><p class="form-control-static lead"><a href="'+(null==(__t=export_url)?"":_.escape(__t))+'">'+(null==(__t=export_url)?"":_.escape(__t))+"</a></p> ":" <p class=\"form-control-static\">L'adresse est disponible 24 heures après l'activation du module.</p> ",__p+=" </div> "),__p+=' <div class="form-group has-feedback"><label class="required" for="categories">Catégories à inclure dans l\'export</label><div data-role="categories"></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],501:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p><a href="https://www.google.fr/retail/merchant-center/" target="_blank">Google Merchant Center</a> permet d\'importer des produits sur Google et les proposer dans Google Shopping ainsi que dans d\'autres services Google.</p><p>Afin de configurer correctement l\'export vers Google Merchant Center, vous devez suivre la procédure suivante :</p><ol><li>Dans Google Merchant Center :<ol><li><a href="https://www.google.fr/retail/merchant-center/" target="_blank">Ouvrez un compte</a> Google Merchant Center</li><li>Terminez le processus d\'ouverture de compte en validant l\'adresse du site Internet pour en revendiquer la propriété sur la page <em>Paramètres généraux</em> de Google Merchant center</li></ol></li><li>Dans la console d\'administration de Kiubi :<ol><li>Il est recommandé d\'activer l\'<a href="/prefs/https">accès en HTTPS</a>, sans quoi le flux pourrait être refusé par Google Merchant Center</li><li>Dans le formulaire ci-dessous, choisissez les catégories de produits à exporter et activez le module</li><li>Attendez le lendemain matin que le flux journalier soit généré</li><li>Une fois le flux généré, un lien <em>Adresse du flux vers Google Merchant Center</em> est disponible. Cliquez sur ce lien pour télécharger le flux.</li></ol></li><li>Dans Google Merchant Center :<ol><li>Allez dans <em>Flux de données</em> et cliquez sur le lien <em>Nouveau flux de données test</em></li><li>Indiquez le pays et un nom de flux (<code>flux_de_test.txt</code>, par exemple). Enregistrez les modifications</li><li>Cliquez sur le lien <em>Importation manuelle</em> en face du flux de test et sélectionnez le flux précédement téléchargé. Cliquez sur <em>Importer et traiter ce fichier</em></li><li>Attendez que Google traite le flux (l\'opération peut prendre plus d\'une heure)</li><li>Une fois l\'opération terminée, vérifiez que le flux a été importé sans erreur. Dans le cas contraire, cliquez sur <em>Afficher les erreurs</em> et suivez les corrections proposées</li><li>UNIQUEMENT si l\'importation s\'est faite sans aucune erreur, créez un nouveau flux, mais pas de test cette fois</li><li>Cliquez sur le lien <em>Créer un planning</em>. Importez le flux tous les jours à 6h. Indiquez dans le champ URL du flux l\'<em>adresse du flux vers Google Merchant Center</em></li><li>Cliquez sur le bouton <em>Planifier et récupérer</em></li></ol></li></ol><p>Aucune autre intervention n\'est nécessaire, si toutes les opérations ont été correctement effectuées, Google Merchant Center récupéra le flux de produits tous les jours.</p></div><footer class="post-footer"></footer></article><form><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":_.escape(__t))+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":_.escape(__t))+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label>Adresse du flux vers Google Merchant Center</label> ',__p+=last_export?' <p class="form-control-static">Dernier export créé le '+(null==(__t=last_export)?"":_.escape(__t))+".</p> ":" <p class=\"form-control-static\">L'adresse est disponible 24 heures après l'activation du module.</p> ",__p+=' <p class="form-control-static lead"><a href="'+(null==(__t=export_url)?"":_.escape(__t))+'" target="_blank">'+(null==(__t=export_url)?"":_.escape(__t))+'</a></p></div></div><footer class="post-footer"></footer></article></form><article class="post-article"><header class="post-header"><h1>Catégories à inclure dans le flux</h1></header><div class="post-content post-list"><p>Sélectionner les catégories de produits du catalogue à inclure dans le flux vers Google Merchant Center. Pour chaque catégorie, vous pouvez indiquer à quelle catégorie de Google Merchant Center elle correspond. Utiliser le moteur de recherche pour trouver la catégorie la plus pertinente.</p><p>La correspondance est strictement obligatoire pour les produits de type vêtements, livres, médias (DVD, musique, ...) et jeux vidéo, sous peine de voir Google pénaliser ou refuser les produits. Elle reste fortement recommandée pour tous les autres types de produits. Pour plus d\'informations, <a href="https://support.google.com/merchants/answer/6324436?hl=fr&visit_id=1-636395331083356320-666099108&rd=1" target="_blank">consulter le centre d\'aide Google Merchant Center</a>.</p><div class="row"><div class="col-4"><label for="">Catégorie du catalogue</label></div><div class="col-8"><label for="">Catégorie de Google Merchant Center</label></div></div><div data-role="categories"></div><div class="list-item no-hover"><a href="#" data-role="categ-add"><span class="page-add md-icon md-add-page"></span>Ajouter une catégorie</a></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],502:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-4"><div data-role="catalog"></div></div><div class="col-6"><div data-role="merchantcenter"></div></div><div class="col"><a href="#" data-role="action" data-action="delete" class="md-icon md-delete float-right"></a></div></div>';return __p};
},{"undefined":undefined}],503:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><div class="row no-gutters"><div class="col-4"><div class="card card-select" data-role="select-amount"><div class="md-icon md-euro"></div><div class="card-body"><h4>Montant fixe</h4><p>Réduction d\'un montant fixe</p></div></div></div><div class="col-4 border-right border-left"><div class="card card-select" data-role="select-percent"><div class="md-icon md-percent" style="height: 38px; line-height: 32px"></div><div class="card-body"><h4>Pourcentage</h4><p>Réduction en pourcentage</p></div></div></div><div class="col-4"><div class="card card-select" data-role="select-shipping"><div class="md-icon md-local-shipping"></div><div class="card-body"><h4>Frais de port</h4><p>Frais de port personnalisés</p></div></div></div></div><div class="w-100"></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],504:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto mr-3"><span class="md-icon md-icon-module rounded-circle">'+(null==(__t=icon)?"":_.escape(__t))+'</span></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> "+(null==(__t=desc)?"":__t)+' </div><div class="col-auto"> ',__p+=is_enabled?' <a class="btn btn-primary float-right" href="'+(null==(__t=href)?"":_.escape(__t))+'" role="button">Utiliser</a> ':' <span class="badge px-1 mx-0 float-right">Indisponible</span> ',__p+=" </div></div>";return __p};
},{"undefined":undefined}],505:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article thumbs-desc w-100"><header class="post-header"><span class="md-icon md-icon-module rounded-circle" style="background-color: '+(null==(__t=color)?"":_.escape(__t))+'">'+(null==(__t=icon)?"":_.escape(__t))+"</span>",quota&&(__p+='<span class="d-none">'+(null==(__t=quota)?"":_.escape(__t))+"</span>"),__p+=" ",__p+=' </header><div class="post-content"><h1>'+(null==(__t=name)?"":_.escape(__t))+"</h1><p> "+(null==(__t=desc)?"":__t)+" ",doc&&(__p+='<a target="_blank" href="'+(null==(__t=doc)?"":_.escape(__t))+'">En savoir plus</a>'),__p+=" </p> ",__p+=is_enabled?' <a class="btn btn-outline-primary" href="'+(null==(__t=href)?"":_.escape(__t))+'">Utiliser</a> ':' <a class="btn btn-outline-primary" href="#" data-role="subscribe">'+(null==(__t=price)?"":_.escape(__t))+"</a> ",__p+=' </div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],506:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#redirections-301" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez rediriger des adresses vers d\'autres adresses à l\'aide des redirections 301. Le nombre de redirections est <strong>limité à 600</strong> et chaque adresse à <strong>255 caractères</strong>.<br><br>Chaque redirection est de la forme suivante :<br><code>/chemin-a-rediriger.html http://www.example.org/nouvelle-adresse-complete.html</code><br><br>Une syntaxe permet également de rediriger toutes les adresses des pages d’un répertoire vers un autre. Exemple :<br><code>^/blog/ http://www.example.org/blog/</code><br>va rediriger <code>/blog/categorie/billet.html</code> vers <code>http://www.example.org/blog/categorie/billet.html</code><br><br>Nous vous encourageons fortement avant toute modification des règles de redirections à <a href="https://aide.kiubi.com/modules.html#redirections-301" target="_blank">consulter la documentation en ligne</a> et à <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Redirections actives</h1></header><div class="post-content"><div class="form-group"><textarea name="redirections" class="form-control" rows="20" data-role="codemirror">'+(null==(__t=redirections)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],507:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Modules disponibles</h2><ul class="nav nav-sidebar flex-column"> ',__p+=has_scope_modules?' <li class="nav-item"><a class="nav-link" href="/forms/inbox">Dismoi?</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Dismoi?</span></li> ',__p+=" ",__p+=has_scope_checkout&&has_feature_checkout?' <li class="nav-item"><a class="nav-link" href="/modules/vouchers">Bons de réduction</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Bons de réduction</span></li> ',__p+=" ",__p+=has_scope_modules&&has_feature_fidelity?' <li class="nav-item"><a class="nav-link" href="/modules/fidelity">Points de fidélité</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Points de fidélité</span></li> ',__p+=" ",__p+=has_scope_marketing&&has_feature_checkout?' <li class="nav-item"><a class="nav-link" href="/modules/merchantcenter">Google Merchant Center</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Google Merchant Center</span></li> ',__p+=" ",__p+=has_scope_catalog&&has_feature_catalog?' <li class="nav-item"><a class="nav-link" href="/modules/import/products">Import dans le Catalogue</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Import dans le Catalogue</span></li> ',__p+=" ",__p+=has_feature_extranet?' <li class="nav-item"><a class="nav-link" href="/customers/groups">Extranet</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Extranet</span></li> ',__p+=" ",__p+=has_feature_advanced_media?' <li class="nav-item"><a class="nav-link" href="/modules/import/files">Import dans la Médiathèque</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Import dans la Médiathèque</span></li> ',__p+=" ",__p+=has_scope_checkout&&has_feature_multi_pickup?' <li class="nav-item"><a class="nav-link" href="/checkout/carriers">Points de retrait multiples</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Points de retrait multiples</span></li> ',__p+=" ",__p+=has_scope_checkout&&has_feature_tier_prices?' <li class="nav-item"><a class="nav-link" href="/modules/tier_prices">Tarifs dégressifs</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Tarifs dégressifs</span></li> ',__p+=' </ul><h2>Autres modules</h2><ul class="nav nav-sidebar flex-column"> ',__p+=has_scope_modules?' <li class="nav-item"><a class="nav-link" href="/modules/analytics">Google Analytics</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Google Analytics</span></li> ',__p+=" ",__p+=has_scope_pref?' <li class="nav-item"><a class="nav-link" href="/modules/captcha">Google reCaptcha</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Google reCaptcha</span></li> ',__p+=" ",__p+=has_scope_seo?' <li class="nav-item"><a class="nav-link" href="/modules/redirections">Redirections 301</a></li><li class="nav-item"><a class="nav-link" href="/modules/injectcode">Injection de code</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Redirections 301</span></li><li class="nav-item"><span class="nav-link disabled">Injection de code</span></li> ',__p+=" ",__p+=has_scope_marketing?' <li class="nav-item"><a class="nav-link" href="/modules/subscribers">Abonnés à la newsletter</a></li><li class="nav-item"><a class="nav-link" href="/modules/ads">Authorized Digital Sellers</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Abonnés à la newsletter</span></li><li class="nav-item"><span class="nav-link disabled">Authorized Digital Sellers</span></li> ',__p+=" ",__p+=has_scope_cms?' <li class="nav-item"><a class="nav-link" href="/modules/import/contents">Import dans le Site Web</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Import dans le Site Web</span></li> ',__p+=" ",__p+=has_scope_blog?' <li class="nav-item"><a class="nav-link" href="/modules/import/wordpress">Import depuis WordPress</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Import depuis WordPress</span></li> ',__p+=" ",__p+=has_scope_checkout&&has_feature_checkout?' <li class="nav-item"><a class="nav-link" href="/modules/import/coliship">Import Coliship</a></li><li class="nav-item"><a class="nav-link" href="/modules/import/mondialrelay">Import Mondial Relay</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Import Coliship</span></li><li class="nav-item"><span class="nav-link disabled">Import Mondial Relay</span></li> ',__p+=" ",__p+=has_scope_backup?' <li class="nav-item"><a class="nav-link" href="/modules/backups">Gestion des sauvegardes</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Gestion des sauvegardes</span></li> ',__p+=" ",__p+=has_scope_marketing&&has_feature_checkout?' <li class="nav-item"><a class="nav-link" href="/modules/lengow">Lengow</a></li><li class="nav-item"><a class="nav-link" href="/modules/iadvize">iAdvize</a></li><li class="nav-item"><a class="nav-link" href="/modules/avisverifies">Avis Verifiés</a></li> ':' <li class="nav-item"><span class="nav-link disabled">Lengow</span></li><li class="nav-item"><span class="nav-link disabled">iAdvize</span></li><li class="nav-item"><span class="nav-link disabled">Avis Verifiés</span></li> ',__p+=' </ul><h2>API</h2><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="https://aide.kiubi.com/api-front-generalites.html" target="_blank">API Front-Office</a></li><li class="nav-item"><a class="nav-link" href="https://aide.kiubi.com/api-dev-generalites.html" target="_blank">API Developers</a></li><li class="nav-item"><a class="nav-link" href="https://status.dev.kiubi.com/" target="_blank">Statuts des services</a></li></ul>';return __p};
},{"undefined":undefined}],508:[function(require,module,exports){
arguments[4][213][0].apply(exports,arguments)
},{"213":213,"undefined":undefined}],509:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters align-items-center"><div class="col-auto"><input id="subscriber_'+(null==(__t=subscriber_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=subscriber_id)?"":_.escape(__t))+'" type="checkbox"><label for="subscriber_'+(null==(__t=subscriber_id)?"":_.escape(__t))+'"></label></div><div class="col item-body"><h4>'+(null==(__t=email)?"":_.escape(__t))+'</h4></div><div class="col-3"> ',__p+=is_registered?' <span class="badge badge-success">Abonné</span> ':' <span class="badge badge-danger">Désabonné</span> ',__p+=' </div><div class="col-4"><span title="Date d\'inscription"><i class="md-icon md-submit-date"></i>'+(null==(__t=subscription_date)?"":_.escape(__t))+"</span></div></div>";return __p};
},{"undefined":undefined}],510:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Messages de confirmation</h1></header><div class="post-content"><div class="form-group"><label for="registration_success_msg">Si l\'inscription est validée</label><input class="form-control" id="registration_success_msg" name="registration_success_msg" value="'+(null==(__t=registration_success_msg)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label for="unregistration_success_msg">Si la désinscription est validée</label><input class="form-control" id="unregistration_success_msg" name="unregistration_success_msg" value="'+(null==(__t=unregistration_success_msg)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label for="registration_error_msg">Si l\'abonné est déjà inscrit</label><input class="form-control" id="registration_error_msg" name="registration_error_msg" value="'+(null==(__t=registration_error_msg)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label for="unregistration_error_msg">Si l\'abonné n\'est pas encore inscrit</label><input class="form-control" id="unregistration_error_msg" name="unregistration_error_msg" value="'+(null==(__t=unregistration_error_msg)?"":_.escape(__t))+'" placeholder=""></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],511:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#tarifs-degressifs" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez créer des grilles de tarifs dégressifs permettant d\'<strong>appliquer automatiquement des remises</strong> en pourcentage sur des produits <strong>en fonction de la quantité de produits achetés</strong>.</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],512:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="voucher_'+(null==(__t=grid_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=grid_id)?"":_.escape(__t))+'" type="checkbox"><label for="voucher_'+(null==(__t=grid_id)?"":_.escape(__t))+'"></label></div><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4><span>",__p+=0==product_count?" Appliquée à aucun produit ":' Appliquée à <a href="/catalog?tier_prices='+(null==(__t=grid_id)?"":_.escape(__t))+'">'+(null==(__t=plural(product_count,"%d produit","%d produits"))?"":_.escape(__t))+"</a> ",__p+='</span></div><div class="col-3"> ',__p+=is_enabled?' <span class="badge badge-success">Activé</span> ':' <span class="badge badge-danger">Désactivé</span> ',__p+=' </div><div class="col-1 no-white-space"></div><div class="col-auto"><a class="btn btn-primary float-right" href="/modules/tier_prices/'+(null==(__t=grid_id)?"":_.escape(__t))+'" role="button">Détail</a></div></div>';return __p};
},{"undefined":undefined}],513:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Nom de la grille</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder=""></div><div class="row"><div class="col-4"><div class="form-group"><label>Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_enabled0" class="not-visible">Désactivé</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Grille de remises</h1></header><div class="post-content post-list"><p>La grille de remises est définie par palier, en fonction de la quantité de produits achetée, toutes variantes confondues. Une fois la grille créée, il est nécessaire de l\'appliquer à un ou plusieurs produits pour activer les remises correspondantes au moment de la commande.</p><div class="row"><div class="col-4"><label for="">Quantité achetée</label></div><div class="col-3"><label for="">Remise appliquée</label></div></div><div data-role="discounts"></div><div class="list-item no-hover"><a href="#" data-role="discount-add"><span class="page-add md-icon md-add-page"></span>Ajouter une remise</a></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],514:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-4"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" name="qt" placeholder="" value="'+(null==(__t=qt)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text"></span></div></div></div></div><div class="col-3"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="discount" placeholder="" value="'+(null==(__t=discount)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text">%</span></div></div></div><div class="col"><a href="#" data-role="action" data-action="delete" class="md-icon md-delete float-right"></a></div></div>';return __p};
},{"undefined":undefined}],515:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="required" for="code">Code de réduction</label><p>Le code doit comprendre 3 caractères minimum, lettres ou chiffres, sans espace, sans caractères spéciaux.</p><input class="form-control" id="code" name="code" value="'+(null==(__t=code)?"":_.escape(__t))+'" placeholder="BON-1213, PROMO-NOEL, TOPCLIENT, ..."></div><div class="row"><div class="col-4"><div class="form-group has-feedback"><label for="start_date">Début de validité</label><input data-role="datepicker" class="form-control" id="start_date" name="start_date" value="'+(null==(__t=start_date)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa"> <span class="md-feedback md-date"></span></div></div><div class="col-4"><div class="form-group has-feedback"><label for="end_date">Fin de validité</label><input data-role="datepicker" class="form-control" id="end_date" name="end_date" value="'+(null==(__t=end_date)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa"> <span class="md-feedback md-date"></span></div></div><div class="col-4"><div class="form-group"><label for="">Utilisation</label><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_enabled0" class="not-visible">Désactivé</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramères du bon de réduction</h1></header><div class="post-content"><div class="row"><div class="col-4"> ',"shipping"==type?__p+=' <div class="form-group"><label for="value">Montant des frais de port</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="value" name="value" value="'+(null==(__t=value)?"":_.escape(__t))+'" placeholder="Frais de port gratuits"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+"</span></div></div></div> ":"amount"==type?__p+=' <div class="form-group"><label for="value">Montant de la réduction</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text" id="basic-addon3"></span></div><input class="form-control" id="value" name="value" value="'+(null==(__t=value)?"":_.escape(__t))+'" placeholder="0,00"><div class="input-group-append"><span class="input-group-text" id="basic-addon2">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+"</span></div></div></div> ":"percent"==type&&(__p+=' <div class="form-group has-feedback"><label for="value">Montant de la réduction</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" id="value" name="value" value="'+(null==(__t=value)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">%</span></div></div></div> '),__p+=' </div><div class="col-4"><div class="form-group"><label for="threshold">Seuil de validité</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">À partir de</span></div><input class="form-control" id="threshold" name="threshold" value="'+(null==(__t=threshold)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">'+(null==(__t=currency)?"":__t)+" "+(null==(__t=base_price)?"":_.escape(__t))+' d\'achats</span></div></div></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="is_stock_unlimited">Limite d\'utilisations</label><select id="is_stock_unlimited" name="is_stock_unlimited" data-style="selectify"><option value="0" '+(null==(__t=is_stock_unlimited?"":'selected="selected"')?"":__t)+'>Limiter l\'utilisation</option><option value="1" '+(null==(__t=is_stock_unlimited?'selected="selected"':"")?"":__t)+'>Utilisation illimitée</option></select></div></div><div class="col-4" data-role="stock" style="'+(null==(__t=is_stock_unlimited?"display: none":"")?"":__t)+'"><div class="form-group"><label for="stock">Utilisations maximum</label><input class="form-control" id="stock" name="stock" value="'+(null==(__t=stock)?"":_.escape(__t))+'" placeholder="0"></div></div><div class="col-4" data-role="stock" style="'+(null==(__t=is_stock_unlimited?"display: none":"")?"":__t)+'"><div class="form-group"><label>Nombre d\'utilisations</label><p class="form-control-static">'+(null==(__t=used)?"":_.escape(__t))+'</p></div></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="is_quota_unlimited">Utilisations par membre</label><select id="is_quota_unlimited" name="is_quota_unlimited" data-style="selectify"><option value="0" '+(null==(__t=is_quota_unlimited?"":'selected="selected"')?"":__t)+'>Limiter l\'utilisation</option><option value="1" '+(null==(__t=is_quota_unlimited?'selected="selected"':"")?"":__t)+'>Utilisation illimitée</option></select></div></div><div class="col-4" data-role="quota" style="'+(null==(__t=is_quota_unlimited?"display: none":"")?"":__t)+'"><div class="form-group"><label for="quota">Utilisations par membre</label><input class="form-control" id="quota" name="quota" value="'+(null==(__t=quota)?"":_.escape(__t))+'" placeholder="0"></div></div></div> ',"shipping"==type&&(__p+=' <div class="row"><div class="col-4"><div class="form-group"><label for="carrier_id">Applicable au transporteur</label><div data-role="carriers"></div></div></div></div> '),__p+=' </div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Réserver le bon de réduction</h1></header><div class="post-content"><p>Vous pouvez réserver un bon de réduction à un ensemble de membres, de groupes extranet, de produits et de catégories de produits. Les conditions d\'utilisation du bon ainsi que le montant de la remise ne s\'appliqueront que sur ces ensembles.</p><div class="row"><div class="col-6"><div class="form-group has-feedback"><label for="allowed_customers">Membres ou groupes extranet à <span class="text-success">inclure</span></label><div data-role="allowed_customers"></div></div></div><div class="col-6"><div class="form-group has-feedback"><label for="denied_customers">Membres ou groupes extranet à <span class="text-danger">exclure</span></label><div data-role="denied_customers"></div></div></div></div> ',"shipping"!=type&&(__p+=' <div class="row"><div class="col-6"><div class="form-group has-feedback"><label for="allowed_products">Produits ou catégories de produits à <span class="text-success">inclure</span></label><div data-role="allowed_products"></div></div></div><div class="col-6"><div class="form-group has-feedback"><label for="denied_products">Produits ou catégories de produits à <span class="text-danger">exclure</span></label><div data-role="denied_products"></div></div></div></div> '),__p+=' </div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn btn-danger btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],516:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/modules.html#bons-de-reduction" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez créer 3 types de bons de réduction différents : <strong>une remise en pourcentage</strong>, <strong>une remise d\'un montant fixe</strong> ou <strong>une remise sur les frais de port</strong>.</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],517:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters"><div class="col-auto"><input id="voucher_'+(null==(__t=voucher_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=voucher_id)?"":_.escape(__t))+'" type="checkbox"><label for="voucher_'+(null==(__t=voucher_id)?"":_.escape(__t))+'"></label></div><div class="col item-body"><h4>'+(null==(__t=code)?"":_.escape(__t))+"</h4><span> ","shipping"==type?(__p+=" Frais de port à "+(null==(__t=value_label)?"":_.escape(__t)),threshold>0&&(__p+=" pour "+(null==(__t=threshold_label)?"":_.escape(__t))+" d'achat "),__p+=" "):"amount"==type?__p+=" "+(null==(__t=value_label)?"":_.escape(__t))+" de remise pour "+(null==(__t=threshold_label)?"":_.escape(__t))+" d'achat ":"percent"==type&&(__p+=" "+(null==(__t=value_label)?"":_.escape(__t))+" de remise",threshold>0&&(__p+=" pour "+(null==(__t=threshold_label)?"":_.escape(__t))+" d'achat "),__p+=" "),__p+=' </span></div><div class="col-4"><span title="Dates de début et de fin de validité"><span class="mr-2"><i class="md-icon md-card-giftcard"></i>'+(null==(__t=start_date)?"":_.escape(__t))+'</span><span class="d-inline-block"><i class="md-icon md-from-to"></i>'+(null==(__t=end_date)?"":_.escape(__t))+'</span></span></div><div class="col-2"> ',__p+=is_enabled?' <span class="badge badge-success">Activé</span> ':' <span class="badge badge-danger">Désactivé</span> ',__p+=' </div><div class="col-1 no-white-space"> ',__p+=is_stock_unlimited?"Illimité":""+(null==(__t=plural(used,"%d utilisé","%d utilisés"))?"":__t)+" ",__p+=' </div><div class="col-auto"><a class="btn btn-primary float-right" href="/modules/vouchers/'+(null==(__t=voucher_id)?"":_.escape(__t))+'" role="button">Détail</a></div></div>';return __p};
},{"undefined":undefined}],518:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(482),className:"container",service:"modules",behaviors:[FormBehavior],fields:["app_ads","ads"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"482":482,"608":608,"undefined":undefined}],519:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(483),className:"container",service:"modules",behaviors:[FormBehavior],fields:["UA","is_enabled","type","target","options","consent"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"483":483,"608":608,"undefined":undefined}],520:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(484),className:"h-100",service:"modules",url:null,initialize:function(e){this.mergeOptions(e,["model"]),this.url=null,this.model.launch().done(function(e){console.log(e),this.url=e,this.render()}.bind(this))},templateContext:function(){return{url:this.url}},onBeforeAttach:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.startAppContext()},onBeforeDetach:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.stopAppContext()}});
},{"484":484,"undefined":undefined}],521:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(485),className:"container",service:"modules",behaviors:[FormBehavior],fields:["id","secret","plateform","offset","is_sending_products","is_enabled"],templateContext:function(){return{allPlatforms:this.model.getPlatforms()}},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"485":485,"608":608,"undefined":undefined}],522:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(607),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(487),className:"list-item visible-btn",behaviors:[RowActionsBehavior],templateContext:function(){return{creation_date:format.formatLongDateTime(this.model.get("creation_date"))}},onActionRestore:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");return e.showOverlay(),this.model.restore().done(function(i){return""!=i?void e.showErrorModal(i,4e3):(e.hideModal(),void this.render())}.bind(this)).fail(function(i){e.showErrorModal(i)})}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(486),className:"container",service:"modules",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Dernières sauvegardes"}))},start:function(){this.collection.fetch()}});
},{"128":128,"31":31,"486":486,"487":487,"607":607,"undefined":undefined}],523:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(488),className:"container",service:"modules",behaviors:[FormBehavior],fields:["type","recaptcha_key","recaptcha_secret"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"488":488,"608":608,"undefined":undefined}],524:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608),format=require(607);module.exports=Marionette.View.extend({template:require(489),className:"container",service:"modules",behaviors:[FormBehavior],fields:["gain_rate","reward_first_order","reward_subscriber","is_creation_enabled","creation_cost","voucher_mail_subject","voucher_value","voucher_validity","voucher_threshold","is_voucher_restricted"],templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency)}},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"489":489,"607":607,"608":608,"undefined":undefined}],525:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(490),className:"container",service:"modules",behaviors:[FormBehavior],fields:["id","is_enabled"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"490":490,"608":608,"undefined":undefined}],526:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FileView=require(126),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(491),className:"container",service:"modules",behaviors:[FormBehavior],regions:{file:{el:"div[data-role='file']",replaceElement:!0}},events:{"change input[type=file]":"dropFile"},fields:["notify"],step:0,report:null,initialize:function(e){this.mergeOptions(e,["model"])},templateContext:function(){return{report:this.report,step:this.step}},onRender:function(){0==this.step&&this.showChildView("file",new FileView)},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");if(0==this.step){var i=Forms.extractFields(this.fields,this);return i.file=this.getChildView("file").getFile(),e.showOverlay(),this.model.analyse(i).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})}return e.showOverlay(),this.model["import"](this.report.token).done(function(e){this.step=2,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.navigate("/modules")}else this.step=0,this.report=null,this.render()}});
},{"126":126,"27":27,"491":491,"608":608,"undefined":undefined}],527:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606),SelectView=require(139),FileView=require(126),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(492),className:"container",service:"modules",behaviors:[FormBehavior],events:{"change input[type=file]":"dropFile"},regions:{page:{el:'div[data-role="page"]',replaceElement:!0},file:{el:"div[data-role='file']",replaceElement:!0}},fields:["is_visible","container_id","mode"],step:0,report:null,menus:null,initialize:function(e){this.mergeOptions(e,["model","menus","symbols"])},templateContext:function(){return{report:this.report,step:this.step}},onRender:function(){if(!(this.step>0)){this.menus.selectPayloadFilter=function(e,i){return null!==i&&"page"==i.page_type||(e.is_group=!0),e.value="p-"+e.value,e};var e=Backbone.$.when(this.menus.fetch({data:{extra_fields:"pages"}}),this.symbols.fetch()).then(function(){var e=new CollectionUtils.SelectCollection(this.menus.selectPayload());return e.add({label:"Symboles",value:"s",is_group:!0}),this.symbols.reduce(function(e,i){return e.add({label:i.get("params").title,value:"s-"+i.get("symbol_id"),indent:1}),e},e),e}.bind(this));this.showChildView("page",new SelectView({collectionPromise:e,name:"container_id"})),this.showChildView("file",new FileView)}},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");if(0===this.step){var i=Forms.extractFields(this.fields,this,{autoCast:!1});return i.container_type="p"===i.container_id.substr(0,1)?"page":"symbol",i.container_id=i.container_id.substr(2),i.file=this.getChildView("file").getFile(),e.showOverlay(),this.model.analyse(i).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})}return e.showOverlay(),this.model["import"](this.report.token).done(function(e){this.step=2,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0===this.step){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.navigate("/modules")}else this.step=0,this.report=null,this.render()}});
},{"126":126,"139":139,"27":27,"492":492,"606":606,"608":608,"undefined":undefined}],528:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectView=require(139),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(493),className:"container",service:"modules",behaviors:[FormBehavior],regions:{folder:{el:"div[data-role='folder']",replaceElement:!0}},fields:["url","folder_id","unzip","max_width","max_height","jpg_compression"],step:0,report:null,folders:null,initialize:function(e){this.mergeOptions(e,["model","folders","prefs"])},templateContext:function(){return{report:this.report,step:this.step,max_width:this.prefs.get("max_width")?this.prefs.get("max_width"):"",max_height:this.prefs.get("max_height")?this.prefs.get("max_height"):"",jpg_compression:this.prefs.get("jpg_compression")?this.prefs.get("jpg_compression"):""}},onRender:function(){this.step>0||(this.showChildView("folder",new SelectView({collection:this.folders,name:"folder_id"})),this.folders.fetch({data:{extra_fields:"recursive"}}))},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay();var i=Forms.extractFields(this.fields,this);return this.model["import"](i).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.navigate("/modules")}else this.step=0,this.report=null,this.render()}});
},{"139":139,"27":27,"493":493,"608":608,"undefined":undefined}],529:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),AutocompleteView=require(140),FileView=require(126),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(494),className:"container",service:"modules",behaviors:[FormBehavior],regions:{categories:{el:"div[data-role='categories']",replaceElement:!0},file:{el:"div[data-role='file']",replaceElement:!0}},events:{"change input[type=file]":"dropFile"},fields:["is_enabled"],step:0,report:null,initialize:function(e){this.mergeOptions(e,["model","categories"])},templateContext:function(){return{report:this.report,step:this.step}},onRender:function(){0==this.step&&(this.showChildView("categories",new AutocompleteView({searchPlaceholder:"Rechercher une catégorie",current:{label:"-- Choisissez une catégorie --",value:null}})),this.showChildView("file",new FileView))},onChildviewInput:function(e,i){var t=i.current.value?[i.current.value]:null;this.categories.suggest(e,5,t).done(function(e){var t=_.map(e,function(e){return{label:e.name,value:e.category_id}});i.showResults(t)}.bind(this))},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");if(0==this.step){var i=Forms.extractFields(this.fields,this);return i.category_id=this.getChildView("categories").getCurrent().value,i.file=this.getChildView("file").getFile(),e.showOverlay(),this.model.analyse(i).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})}return e.showOverlay(),this.model["import"](this.report.token).done(function(e){this.step=2,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.navigate("/modules")}else this.step=0,this.report=null,this.render()}});
},{"126":126,"140":140,"27":27,"494":494,"608":608,"undefined":undefined}],530:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectView=require(139),FileView=require(126),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(495),className:"container",service:"modules",behaviors:[FormBehavior],events:{"change input[type=file]":"dropFile"},regions:{type:{el:'div[data-role="type"]',replaceElement:!0},file:{el:"div[data-role='file']",replaceElement:!0}},fields:["is_enabled","url","login","password","import_pages","import_media","thumbnail","medium","large","type"],step:0,report:null,initialize:function(e){this.mergeOptions(e,["model","post"])},templateContext:function(){return{report:this.report,step:this.step}},onRender:function(){this.step>0||(this.showChildView("type",new SelectView({collectionPromise:this.post.promisedTypes(),name:"type"})),this.showChildView("file",new FileView))},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");if(0==this.step){var i=Forms.extractFields(this.fields,this);return i.file=this.getChildView("file").getFile(),e.showOverlay(),this.model.analyse(i).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})}return e.showOverlay(),this.model["import"](this.report.token).done(function(e){this.step=2,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.navigate("/modules")}else this.step=0,this.report=null,this.render()}});
},{"126":126,"139":139,"27":27,"495":495,"608":608,"undefined":undefined}],531:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FileView=require(126),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(496),className:"container",service:"modules",behaviors:[FormBehavior],regions:{file:{el:"div[data-role='file']",replaceElement:!0}},events:{"change input[type=file]":"dropFile"},fields:["notify"],step:0,report:null,initialize:function(e){this.mergeOptions(e,["model"])},templateContext:function(){return{report:this.report,step:this.step}},onRender:function(){0==this.step&&this.showChildView("file",new FileView)},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");if(0==this.step){var i=Forms.extractFields(this.fields,this);return i.file=this.getChildView("file").getFile(),e.showOverlay(),this.model.analyse(i).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})}return e.showOverlay(),this.model["import"](this.report.token).done(function(e){this.step=2,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.navigate("/modules")}else this.step=0,this.report=null,this.render()}});
},{"126":126,"27":27,"496":496,"608":608,"undefined":undefined}],532:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Session=Backbone.Radio.channel("app").request("ctx:session"),Module=Backbone.Model.extend({defaults:{name:"",icon:"extension",color:"",desc:"",href:"/",doc:"",quota:null,require_scope:null,require_feature:null,feature:null,has_scope:!0,has_feature:!0,price:"",is_spotlight:!1,is_enabled:!1}}),SpotlightRowView=Marionette.View.extend({template:require(505),className:"col-12 col-md-6 d-flex",events:{'click a[data-role="subscribe"]':function(){window.open(Session.autologAccountLink("/sites/options.html?code_site="+Session.site.get("code_site")))}},templateContext:function(){return{code_site:Session.site.get("code_site")}}}),SpotlightsListView=Marionette.CollectionView.extend({className:"row",childView:SpotlightRowView}),ModuleRowView=Marionette.View.extend({template:require(504),className:"list-item visible-btn"}),ModulesListView=Marionette.CollectionView.extend({className:"post-content post-list no-hover module-list",childView:ModuleRowView});module.exports=Marionette.View.extend({template:require(497),className:"container container-locked",service:"modules",regions:{spotlights:{el:'div[data-role="spotlights"]',replaceElement:!0},modules:{el:'div[data-role="modules"]',replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["apps"]),this.list=new Backbone.Collection,this.list.model=Module,this.list.add([{name:"Dismoi?",icon:"move_to_inbox",color:"#337ab7",desc:"Créer et gérer des formulaires (contact, recrutement, sondage,...) entièrement paramétrables.",href:"/forms/inbox",doc:"https://aide.kiubi.com/formulaires-dismoi.html",quota:"2/50",require_scope:"site:modules",is_spotlight:!0},{name:"Bons de réduction",icon:"loyalty",color:"#5CB299",desc:"Créer et gérer des bons de réductions pour les animations commerciales.",href:"/modules/vouchers",doc:"https://aide.kiubi.com/modules.html#bons-de-reduction",require_scope:"site:marketing",require_feature:"checkout",feature:"checkout",is_spotlight:!0},{name:"Points de fidélité",icon:"card_membership",color:"#c4b1c4",desc:"Attribuer des points de fidélité\taux clients pour leur faire bénéficier de remises sur les produits.",href:"/modules/fidelity",doc:"https://aide.kiubi.com/membres.html#points-de-fidelite",require_scope:"site:modules",require_feature:"fidelity",feature:"fidelity",is_spotlight:!0},{name:"Google Merchant Center",icon:"shopping_cart",color:"#a24100",desc:"Exporter les données produits vers Google Shopping ainsi que vers d'autres services de Google.",href:"/modules/merchantcenter",require_scope:"site:marketing",require_feature:"checkout",feature:"checkout",is_spotlight:!0},{name:"Import dans le Catalogue",icon:"publish",color:"#fda951",desc:"Importer des produits pour remplir et mettre à jour rapidement le catalogue.",href:"/modules/import/products",require_scope:"site:catalog",require_feature:"catalog",feature:"catalog",is_spotlight:!0},{name:"Extranet",icon:"lock",color:"#8a6d3b",desc:"Restreindre l'accès aux pages du site. Créer des groupes de clients et y appliquer des remises.",href:"/customers/groups",doc:"https://aide.kiubi.com/membres.html#extranet",require_scope:"site:modules",require_feature:"extranet",feature:"extranet",price:"5,00€HT/mois",is_spotlight:!0},{name:"Médiathèque avancée",icon:"perm_media",color:"#86df6a",desc:"Redimensionner les images téléchargées dans la médiathèque. Importer des fichiers depuis une adresse web ou Dropbox.",href:"/modules/import/files",doc:"https://aide.kiubi.com/modules.html#mediatheque-avancee",require_scope:"site:modules",feature:"advanced_media",price:"9,00€HT/mois",is_spotlight:!0},{name:"Points de retrait multiples",icon:"add_location",color:"#54bef7",desc:"Créer plusieurs points de retrait des commandes en magasin pour le module de Click & Collect.",href:"/checkout/carriers",require_scope:"site:checkout",feature:"multi_pickup",require_feature:"checkout",price:"19,00€/mois",is_spotlight:!0},{name:"Tarifs dégressifs",icon:"trending_down",color:"#a15db1",desc:"Créer des grilles de tarifs dégressifs en fonction de la quantité de produits achetée.",href:"/modules/tier_prices",require_scope:"site:catalog",require_feature:"checkout",feature:"tier_prices",price:"9,00€/mois",is_spotlight:!0},{name:"Google Analytics",icon:"analytics",desc:"Paramétrer le tracking de Google Analytics sur l'ensemble du site.",href:"/modules/analytics",require_scope:"site:modules"},{name:"Google reCaptcha",icon:"how_to_reg",desc:"Paramétrer le captcha de Google sur l'ensemble du site.",href:"/modules/captcha",require_scope:"site:pref"},{name:"Redirections 301",icon:"directions",desc:"Définisser les redirections d'URL permanentes à utiliser sur le site.",href:"/modules/redirections",require_scope:"site:seo"},{name:"Injection de code",icon:"code",desc:"Injecter des scripts et du code avant <code>&lt;/head&gt;</code> et <code>&lt;/body&gt;</code> sur l'ensemble du site.",href:"/modules/injectcode",require_scope:"site:seo"},{name:"Abonnés à la newsletter",icon:"email",desc:"Exporter tout ou partie des abonnés à la newsletter pour les utiliser avec une plateforme d'emailing.",href:"/modules/subscribers",require_scope:"site:marketing"},{name:"Authorized Digital Sellers (ADS)",icon:"picture_in_picture",desc:"Configurer vos fichiers <code>ads.txt</code> et <code>app-ads.txt</code>.",href:"/modules/ads",require_scope:"site:marketing"},{name:"Import dans le Site Web",icon:"description",desc:"Importer des contenus dans les pages du site web.",href:"/modules/import/contents",require_scope:"site:cms"},{name:"Import depuis Wordpress",icon:"public",desc:"Importer du contenu depuis Wordpress dans le site web.",href:"/modules/import/wordpress",require_scope:"site:blog"},{name:"Import Coliship",icon:"publish",desc:"Importer des données d'expédition de Coliship.",href:"/modules/import/coliship",require_scope:"site:checkout",require_feature:"checkout",feature:"checkout"},{name:"Import Mondial Relay",icon:"publish",desc:"Importer des données d'expédition de Mondial Relay Connect.",href:"/modules/import/mondialrelay",require_scope:"site:checkout",require_feature:"checkout",feature:"checkout"},{name:"Gestion des sauvegardes",icon:"backup",desc:"Restaurer ou créer des points de sauvegarde pour sécurier toutes les données du site.",href:"/modules/backups",require_scope:"site:backup"},{name:"Lengow",icon:"call_split",desc:"Créer un flux de données pour publier les produits sur les principales plateformes marketing.",href:"/modules/lengow",require_scope:"site:marketing",require_feature:"checkout",feature:"checkout"},{name:"iAdvize",icon:"chat",desc:"Échanger en direct avec les visiteurs lorsqu'ils visitent le site.",href:"/modules/iadvize",require_scope:"site:marketing",require_feature:"checkout",feature:"checkout"},{name:"Avis Vérifiés",icon:"star",desc:"Récolter les avis clients sur les commandes et les produits.",href:"/modules/avisverifies",require_scope:"site:marketing",require_feature:"checkout",feature:"checkout"}]),this.apps&&this.apps.fetch().done(function(){this.apps.each(function(e){this.list.add({name:e.get("name"),icon:e.get("icon")||"settings_applications",color:e.get("color")||"#337ab7",desc:e.get("description"),href:"/modules/apps/"+e.get("app_id"),is_spotlight:!0})}.bind(this)),this.render()}.bind(this))},templateContext:function(){return{domain:Session.site.get("domain")}},onRender:function(){this.list.each(function(e){e.set("has_scope",!e.get("require_scope")||Session.hasScope(e.get("require_scope"))),e.set("has_feature",!e.get("require_feature")||Session.hasFeature(e.get("require_feature"))),e.set("is_enabled",!e.get("feature")||Session.hasFeature(e.get("feature")))});var e=new Backbone.Collection(this.list.filter(function(e){return!!e.get("is_spotlight")&&(e.get("has_scope")&&e.get("has_feature"))}));this.showChildView("spotlights",new SpotlightsListView({collection:e}));var t=new Backbone.Collection(this.list.filter(function(e){return!e.get("is_spotlight")&&(e.get("has_scope")&&e.get("has_feature"))}));this.showChildView("modules",new ModulesListView({collection:t}))}});
},{"497":497,"504":504,"505":505,"undefined":undefined}],533:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(498),className:"container",service:"modules",behaviors:[FormBehavior],fields:["js_head","js_body"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"498":498,"608":608,"undefined":undefined}],534:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(499),className:"container",service:"modules",templateContext:function(){return{domain:Session.site.get("domain")}}});
},{"499":499,"undefined":undefined}],535:[function(require,module,exports){
function formatCategoriesTags(e){return _.map(e,function(e){return{label:e.name,value:e.category_id}})}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),TagView=require(142),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(500),className:"container",service:"modules",behaviors:[FormBehavior],regions:{categories:{el:"div[data-role='categories']",replaceElement:!0}},fields:["is_enabled","id","is_tracker_enabled"],initialize:function(e){this.mergeOptions(e,["model","categories"])},templateContext:function(){return{last_export:this.model.get("last_export")?format.formatDateTime(this.model.get("last_export")):null}},onRender:function(){this.showChildView("categories",new TagView({searchPlaceholder:"Recherche des catégories de produits",tags:formatCategoriesTags(this.model.get("categories")),inputName:"categories"}))},onChildviewInput:function(e,t){this.categories.suggest(e,5,_.pluck(t.getTags(),"value")).done(function(e){t.showResults(formatCategoriesTags(e))}.bind(this))},onSave:function(){var e=Forms.extractFields(this.fields,this),t=this.getChildView("categories").getTags();return 0==t.length?e.categories=[""]:e.categories=_.reduce(t,function(e,t){return e.push(t.value),e},[]),this.model.save(e,{patch:!0,wait:!0})}});
},{"142":142,"27":27,"500":500,"607":607,"608":608,"undefined":undefined}],536:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(607),FormBehavior=require(27),Forms=require(608),AutocompleteView=require(140),Categories=require(197),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(502),className:"list-item list-item-form",behaviors:[RowActionsBehavior],regions:{catalog:{el:"div[data-role='catalog']",replaceElement:!0},merchantcenter:{el:"div[data-role='merchantcenter']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["categories","merchantcenter"])},onRender:function(){this.showChildView("catalog",new AutocompleteView({searchPlaceholder:"Rechercher une catégorie",current:{label:this.model.get("name"),value:this.model.get("category_id")},evtSuffix:"catalog"})),this.showChildView("merchantcenter",new AutocompleteView({searchPlaceholder:"Recherche sur Google Merchant Center",current:{label:this.model.get("mc_name"),value:this.model.get("mc_category_id")},evtSuffix:"merchantcenter"}))},onActionDelete:function(){this.model.destroy()},onChildviewInputCatalog:function(e,t){var i=t.current.value?[t.current.value]:null;this.categories.suggest(e,5,i).done(function(e){var i=_.map(e,function(e){return{label:e.name,value:e.category_id}});t.showResults(i)}.bind(this))},onChildviewChangeCatalog:function(e){this.model.set("category_id",e.value,{silent:!0})},onChildviewInputMerchantcenter:function(e,t){this.merchantcenter.searchCategories(e).done(function(e){var i=_.map(e,function(e){return{label:e.name,value:e.category_id}});t.showResults(i)})},onChildviewChangeMerchantcenter:function(e){this.model.set("mc_category_id",e.value,{silent:!0})}}),EmptyView=Marionette.View.extend({template:_.template('<span class="list-item-empty">Aucune catégorie</span>')}),ListView=Marionette.CollectionView.extend({className:"",emptyView:EmptyView,childView:RowView});module.exports=Marionette.View.extend({template:require(501),className:"container",service:"modules",behaviors:[FormBehavior],regions:{categories:{el:"div[data-role='categories']",replaceElement:!0}},ui:{addDiscountBtn:'a[data-role="categ-add"]'},events:{"click @ui.addDiscountBtn":function(){var e=new this.mapping.model({category_id:null,name:"-- Choisir une catégorie --",mc_category_id:null,mc_name:"-- Choisir une catégorie --"});this.mapping.add(e)}},fields:["is_enabled"],mapping:null,initialize:function(e){this.mergeOptions(e,["model"]),this.mapping=new Backbone.Collection,this.mapping.add(this.model.get("categories"))},templateContext:function(){return{last_export:this.model.get("last_export")?format.formatDateTime(this.model.get("last_export")):null}},onRender:function(){this.showChildView("categories",new ListView({collection:this.mapping,childViewOptions:{categories:new Categories,merchantcenter:this.model}}))},onSave:function(){var e=Forms.extractFields(this.fields,this);return 0==this.mapping.length?e.categories=[""]:e.categories=this.mapping.reduce(function(e,t){return e.push({category_id:t.get("category_id"),mc_category_id:t.get("mc_category_id")}),e},[]),this.model.save(e,{patch:!0,wait:!0})}});
},{"140":140,"197":197,"27":27,"31":31,"501":501,"502":502,"607":607,"608":608,"undefined":undefined}],537:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(503),ui:{"select-amount":'div[data-role="select-amount"]',"select-percent":'div[data-role="select-percent"]',"select-shipping":'div[data-role="select-shipping"]'},events:{"click @ui.select-amount":function(){this.trigger("select:amount","amount")},"click @ui.select-percent":function(){this.trigger("select:percent","percent")},"click @ui.select-shipping":function(){this.trigger("select:shipping","shipping")}}});
},{"503":503,"undefined":undefined}],538:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(27),CodeMirrorBehavior=require(20),Forms=require(608);module.exports=Marionette.View.extend({template:require(506),className:"container",service:"modules",behaviors:[FormBehavior,CodeMirrorBehavior],fields:["redirections"],templateContext:function(){var e=this.collection.reduce(function(e,r){return e+r.get("uri")+"\t"+r.get("target")+"\n"},"");return{redirections:e}},onSave:function(){var e=Forms.extractFields(this.fields,this);return this.collection.bulkUpdate(e.redirections).done(function(e){this.triggerMethod("codemirror:highligth")}.bind(this)).fail(function(e){if(e&&e.fields){var r=_.reduce(e.fields,function(e,r){return e.push(r.field-1),e},[]);this.triggerMethod("codemirror:highligth",r)}else this.triggerMethod("codemirror:highligth")}.bind(this))}});
},{"20":20,"27":27,"506":506,"608":608,"undefined":undefined}],539:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ActiveLinksBehaviors=require(18);module.exports=Marionette.View.extend({template:require(507),service:"modules",behaviors:[ActiveLinksBehaviors],templateContext:function(){var e=Backbone.Radio.channel("app").request("ctx:session");return{has_scope_seo:e.hasScope("site:seo"),has_scope_modules:e.hasScope("site:modules"),has_scope_checkout:e.hasScope("site:checkout"),has_scope_marketing:e.hasScope("site:marketing"),has_scope_cms:e.hasScope("site:cms"),has_scope_catalog:e.hasScope("site:catalog"),has_scope_blog:e.hasScope("site:blog"),has_scope_backup:e.hasScope("site:backup"),has_scope_pref:e.hasScope("site:pref"),has_feature_extranet:e.hasFeature("extranet"),has_feature_catalog:e.hasFeature("catalog"),has_feature_checkout:e.hasFeature("checkout"),has_feature_fidelity:e.hasFeature("fidelity"),has_feature_advanced_media:e.hasFeature("advanced_media"),has_feature_multi_pickup:e.hasFeature("multi_pickup"),has_feature_tier_prices:e.hasFeature("tier_prices")}}});
},{"18":18,"507":507,"undefined":undefined}],540:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606),format=require(607),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(509),className:"list-item",templateContext:function(){return{subscription_date:format.formatLongDateTime(this.model.get("subscription_date"))}},behaviors:[RowActionsBehavior]}),ListView=require(128);module.exports=Marionette.View.extend({template:require(508),className:"container",service:"modules",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"date",filters:null,initialize:function(e){this.mergeOptions(e,["collection"]),this.filters={is_registered:null}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des abonnés à la newsletter",selection:[{title:"Désinscrire",callback:this.unsubscribeEmail.bind(this)},{title:"Inscrire",callback:this.subscribeEmail.bind(this)},{title:"Supprimer",callback:this.deleteEmail.bind(this),confirm:!0}],filters:[{id:"registred",extraClassname:"select-state",title:"Tous les états",collectionPromise:new CollectionUtils.SelectCollection([{value:"registred",label:"Inscrits",selected:"true"==this.filters.is_registered},{value:"unregistred",label:"Désinscrits",selected:"false"==this.filters.is_registered}])}],xtra:[{id:"export",extraClassname:"md-export",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{value:"export",label:"Exporter les abonnés",selected:!1}])},{id:"sort",extraClassname:"md-sort",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{label:"Inscription",selected:!0,value:"date"},{label:"Email",selected:!1,value:"email"}])}]}))},start:function(){var e={sort:this.sortOrder?this.sortOrder:null};null!=this.filters.is_registered&&(e.is_registered=this.filters.is_registered),this.collection.fetch({reset:!0,data:e})},subscribeEmail:function(e){return this.collection.bulkSubscribe(e)},unsubscribeEmail:function(e){return this.collection.bulkUnsubscribe(e)},deleteEmail:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onRegistredFilterChange:function(e){"registred"==e.value?this.filters.is_registered="true":"unregistred"==e.value?this.filters.is_registered="false":this.filters.is_registered=null,this.start()},onExportFilterChange:function(e){if(e.view){var t=e.view;if("export"==e.value){if(t.collection.length>1)return;t.overrideExtraClassname("md-loading"),t.render();var i={};null!=this.filters.is_registered&&(i.is_registered=this.filters.is_registered),this.collection.exportAll(i).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}},onSortFilterChange:function(e){e.view.activeItem(e.value),this.sortOrder=e.value,this.start()}});
},{"128":128,"31":31,"508":508,"509":509,"606":606,"607":607,"undefined":undefined}],541:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(510),className:"container",service:"modules",behaviors:[FormBehavior],fields:["registration_success_msg","unregistration_success_msg","registration_error_msg","unregistration_error_msg"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"27":27,"510":510,"608":608,"undefined":undefined}],542:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606),format=require(607),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(512),className:"list-item",templateContext:function(){return{plural:format.plural}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(511),className:"container-fluid",service:"modules",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"name",filters:null,initialize:function(e){this.mergeOptions(e,["collection"]),this.filters={}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,enableQuota:!0,title:"Liste des grilles de tarifs dégressifs",selection:[{title:"Activer",callback:this.enableVouchers.bind(this)},{title:"Désactiver",callback:this.disableVouchers.bind(this)},{title:"Supprimer",callback:this.deleteVouchers.bind(this),confirm:!0}],filters:[{id:"name",title:"Rechercher",type:"input",value:""},{id:"add",title:"Ajouter un filtre",extraClassname:"filter-add",type:"dropdown",disableLabelUpdate:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:"enabled",label:"État"}])}],xtra:[{id:"sort",extraClassname:"md-sort",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{label:"Nom",selected:!0,value:"name"},{label:"Nombre de produits",selected:!1,value:"-product_count"}])}]}))},start:function(){var e={sort:this.sortOrder?this.sortOrder:null};null!=this.filters.name&&(e.name=this.filters.name),null!=this.filters.is_enabled&&(e.is_enabled=this.filters.is_enabled),this.collection.fetch({reset:!0,data:e})},enableVouchers:function(e){return this.collection.bulkEnable(e)},disableVouchers:function(e){return this.collection.bulkDisable(e)},deleteVouchers:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onNameFilterChange:function(e){this.filters.name=""!==e.value?e.value:null,this.start()},onEnabledFilterChange:function(e){this.filters.is_enabled=e.value,this.start()},onAddFilterChange:function(e){var t;switch(e.value){case"enabled":t={id:e.value,title:"État",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:!0,label:"Actif"},{value:!1,label:"Inactif"}])};break;default:return}e.model.collection.add(t)},onSortFilterChange:function(e){e.view.activeItem(e.value),this.sortOrder=e.value,this.start()}});
},{"128":128,"31":31,"511":511,"512":512,"606":606,"607":607,"undefined":undefined}],543:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),TagView=require(142),SelectView=require(139),FormBehavior=require(27),Forms=require(608),format=require(607),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(514),className:"list-item list-item-form",behaviors:[RowActionsBehavior],ui:{discount:'input[name="discount"]',qt:'input[name="qt"]'},events:{"input @ui.qt":function(e){this.model.set("qt",e.currentTarget.value)},"input @ui.discount":function(e){this.model.set("discount",e.currentTarget.value)}},templateContext:function(){return{discount:format.formatFloat(this.model.get("discount"))}},onRender:function(){},onActionDelete:function(){this.model.destroy()}}),EmptyView=Marionette.View.extend({template:_.template('<span class="list-item-empty">Aucune remise</span>')}),ListView=Marionette.CollectionView.extend({className:"",emptyView:EmptyView,childView:RowView});module.exports=Marionette.View.extend({template:require(513),className:"container",service:"modules",behaviors:[FormBehavior],regions:{discounts:{el:"div[data-role='discounts']",replaceElement:!0}},ui:{addDiscountBtn:'a[data-role="discount-add"]'},events:{"click @ui.addDiscountBtn":function(){var e=new this.discounts.model({qt:null,discount:null});this.discounts.add(e)}},fields:["name","is_enabled"],discounts:null,initialize:function(e){this.mergeOptions(e,["model"]),this.discounts=new Backbone.Collection,this.discounts.model=Backbone.Model.extend({defaults:{discount:null,qt:null}}),this.discounts.add(this.model.get("steps"))},onRender:function(){this.showChildView("discounts",new ListView({collection:this.discounts}))},onSave:function(){var e=Forms.extractFields(this.fields,this);return e.steps=this.discounts.length?{}:"",this.discounts.each(function(t){""!=t.get("qt")&&""!=t.get("discount")&&(e.steps[t.get("qt")]=t.get("discount"))}),this.model.save(e,{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"139":139,"142":142,"27":27,"31":31,"513":513,"514":514,"607":607,"608":608,"undefined":undefined}],544:[function(require,module,exports){
function formatCustomersTags(e,t){return _.map(t,function(e){return{label:"Groupe : "+e.name,value:e.restriction_id,type:"group"}}).concat(_.map(e,function(e){return{label:e.name,value:e.restriction_id,type:"customer"}}))}function formatProductsTags(e,t){return _.map(t,function(e){return{label:"Catégorie : "+e.name,value:e.restriction_id,type:"category"}}).concat(_.map(e,function(e){return{label:e.name,value:e.restriction_id,type:"product"}}))}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),TagView=require(142),SelectView=require(139),FormBehavior=require(27),Forms=require(608),format=require(607),Datepicker=require(21),Restrictions=require(390);module.exports=Marionette.View.extend({template:require(515),className:"container",service:"modules",behaviors:[FormBehavior,Datepicker],regions:{carriers:{el:"div[data-role='carriers']",replaceElement:!0},allowed_customers:{el:"div[data-role='allowed_customers']",replaceElement:!0},denied_customers:{el:"div[data-role='denied_customers']",replaceElement:!0},allowed_products:{el:"div[data-role='allowed_products']",replaceElement:!0},denied_products:{el:"div[data-role='denied_products']",replaceElement:!0}},ui:{stock_fields:'div[data-role="stock"]',is_stock_unlimited:'select[name="is_stock_unlimited"]',quota_fields:'div[data-role="quota"]',is_quota_unlimited:'select[name="is_quota_unlimited"]',code_field:'input[name="code"]'},events:{"change @ui.is_stock_unlimited":function(e){"1"==this.getUI("is_stock_unlimited").val()?this.getUI("stock_fields").hide():this.getUI("stock_fields").show()},"change @ui.is_quota_unlimited":function(e){"1"==this.getUI("is_quota_unlimited").val()?this.getUI("quota_fields").hide():this.getUI("quota_fields").show()},"input @ui.code_field":function(e){e.currentTarget.value&&(e.currentTarget.value=e.currentTarget.value.toUpperCase())}},fields:["code","value","start_date","end_date","is_enabled","stock","is_stock_unlimited","quota","is_quota_unlimited","threshold","carrier_id"],initialize:function(e){this.mergeOptions(e,["model","customers","groups","categories","products","carriers"])},templateContext:function(){return{base_price:this.model.meta.base_price,currency:format.currencyEntity(this.model.meta.currency),start_date:format.formatDate(this.model.get("start_date")),end_date:format.formatDate(this.model.get("end_date"))}},onRender:function(){var e=this.model.get("restrictions");this.showChildView("allowed_customers",new TagView({evtSuffix:"customers",searchPlaceholder:"Recherche des membres ou groups extranet",tags:formatCustomersTags(e.allow.customers,e.allow.groups)})),this.showChildView("denied_customers",new TagView({evtSuffix:"customers",searchPlaceholder:"Recherche des membres ou groups extranet",tags:formatCustomersTags(e.deny.customers,e.deny.groups)})),"shipping"!=this.model.get("type")?(this.showChildView("allowed_products",new TagView({evtSuffix:"products",searchPlaceholder:"Recherche des produits ou catégories de produits",tags:formatProductsTags(e.allow.products,e.allow.categories)})),this.showChildView("denied_products",new TagView({evtSuffix:"products",searchPlaceholder:"Recherche des produits ou catégories de produits",tags:formatProductsTags(e.deny.products,e.deny.categories)}))):this.showChildView("carriers",new SelectView({collectionPromise:this.carriers.promisedSelect(this.model.get("carrier_id"),{exclude_pickup:!0}),name:"carrier_id"}))},onChildviewInputCustomers:function(e,t){var s=[],i=[];_.each(this.getChildView("allowed_customers").getTags(),function(e){"group"==e.type?i.push(e.value):s.push(e.value)}),_.each(this.getChildView("denied_customers").getTags(),function(e){"group"==e.type?i.push(e.value):s.push(e.value)}),Backbone.$.when(this.customers.suggest(e,5,s),this.groups.suggest(e,5,i)).done(function(e,s){t.showResults(formatCustomersTags(_.map(e,function(e){return{name:e.firstname+" "+e.lastname,restriction_id:e.customer_id}}),_.map(s,function(e){return{name:e.name,restriction_id:e.group_id}})))})},onChildviewInputProducts:function(e,t){var s=[],i=[];_.each(this.getChildView("allowed_products").getTags(),function(e){"product"==e.type?s.push(e.value):i.push(e.value)}),_.each(this.getChildView("denied_products").getTags(),function(e){"product"==e.type?s.push(e.value):i.push(e.value)}),Backbone.$.when(this.products.suggest(e,5,s),this.categories.suggest(e,5,i)).done(function(e,s){t.showResults(formatProductsTags(_.map(e,function(e){return{name:e.name,restriction_id:e.product_id}}),_.map(s,function(e){return{name:e.name,restriction_id:e.category_id}})))})},onSave:function(){var e=new Restrictions;e.setType("checkout/vouchers",this.model.get("voucher_id"));var t=[],s=[],i=[],r=[],o=[],a=[],u=[],c=[];return _.each(this.getChildView("allowed_customers").getTags(),function(e){"customer"==e.type?t.push(e.value):s.push(e.value)}),_.each(this.getChildView("denied_customers").getTags(),function(e){"customer"==e.type?o.push(e.value):a.push(e.value)}),"shipping"!=this.model.get("type")&&(_.each(this.getChildView("allowed_products").getTags(),function(e){"product"==e.type?i.push(e.value):r.push(e.value)}),_.each(this.getChildView("denied_products").getTags(),function(e){"product"==e.type?u.push(e.value):c.push(e.value)})),e.set("allow_customers",t),e.set("allow_groups",s),e.set("allow_products",i),e.set("allow_categories",r),e.set("deny_customers",o),e.set("deny_groups",a),e.set("deny_products",u),e.set("deny_categories",c),this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0}).then(function(){return e.save()})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"139":139,"142":142,"21":21,"27":27,"390":390,"515":515,"607":607,"608":608,"undefined":undefined}],545:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(606),format=require(607),RowActionsBehavior=require(31),RowView=Marionette.View.extend({template:require(517),className:"list-item",templateContext:function(){return{plural:format.plural,start_date:format.formatLongDate(this.model.get("start_date")),end_date:format.formatLongDate(this.model.get("end_date"))}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(516),className:"container-fluid",service:"modules",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"-start_date",filters:null,initialize:function(e){this.mergeOptions(e,["collection"]),this.filters={}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des bons de réduction",selection:[{title:"Activer",callback:this.enableVouchers.bind(this)},{title:"Désactiver",callback:this.disableVouchers.bind(this)},{title:"Supprimer",callback:this.deleteVouchers.bind(this),confirm:!0}],filters:[{id:"term",title:"Rechercher",type:"input",value:""},{id:"add",title:"Ajouter un filtre",extraClassname:"filter-add",type:"dropdown",disableLabelUpdate:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:"type",label:"Type"},{value:"enabled",label:"État"},{value:"start",label:"Date de début"},{value:"end",label:"Date de fin"},{value:"value",label:"Valeur"}])}],xtra:[{id:"sort",extraClassname:"md-sort",type:"button",collectionPromise:new CollectionUtils.SelectCollection([{label:"Date de validité",selected:!0,value:"-start_date"},{label:"Code",selected:!1,value:"code"}])}]}))},start:function(){var e={sort:this.sortOrder?this.sortOrder:null};null!=this.filters.term&&(e.term=this.filters.term),null!=this.filters.is_enabled&&(e.is_enabled=this.filters.is_enabled),null!=this.filters.type&&(e.type=this.filters.type),null!=this.filters.start_date&&(e.start_date_min=this.filters.start_date[0],e.start_date_max=this.filters.start_date[1]),null!=this.filters.end_date&&(e.end_date_min=this.filters.end_date[0],e.end_date_max=this.filters.end_date[1]),null!=this.filters.value&&(e.value_min=this.filters.value[0],e.value_max=this.filters.value[1]),this.collection.fetch({reset:!0,data:e})},enableVouchers:function(e){return this.collection.bulkEnable(e)},disableVouchers:function(e){return this.collection.bulkDisable(e)},deleteVouchers:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){this.triggerMethod(e.model.get("id")+":filter:change",e)},onTermFilterChange:function(e){this.filters.term=""!=e.value?e.value:null,this.start()},onTypeFilterChange:function(e){this.filters.type=""!=e.value?e.value:null,this.start()},onEnabledFilterChange:function(e){this.filters.is_enabled=e.value,this.start()},onValueFilterChange:function(e){this.filters.value=e.value,this.start()},onStartFilterChange:function(e){this.filters.start_date=e.value,this.start()},onEndFilterChange:function(e){this.filters.end_date=e.value,this.start()},onAddFilterChange:function(e){var t;switch(e.value){case"type":t={id:e.value,title:"Type",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:"amount",label:"Montant fixe"},{value:"percent",label:"Pourcentage"},{value:"shipping",label:"Frais de port"}])};break;case"enabled":t={id:e.value,title:"État",type:"dropdown",canDelete:!0,collectionPromise:new CollectionUtils.SelectCollection([{value:!0,label:"Actif"},{value:!1,label:"Inactif"}])};break;case"value":t={id:e.value,title:"",type:"interval",prependText:["Valeur entre","et"],canDelete:!0};break;case"start":t={id:e.value,title:"jj/mm/aaaa",type:"interval",enableDatepicker:"date",prependText:["Commence entre","et"],canDelete:!0};break;case"end":t={id:e.value,title:"jj/mm/aaaa",type:"interval",enableDatepicker:"date",prependText:["Termine entre","et"],canDelete:!0};break;default:return}e.model.collection.add(t)},onSortFilterChange:function(e){e.view.activeItem(e.value),this.sortOrder=e.value,this.start()}});
},{"128":128,"31":31,"516":516,"517":517,"606":606,"607":607,"undefined":undefined}],546:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/ads",isNew:function(){return!1},defaults:{ads:"",app_ads:""}});
},{"606":606}],547:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/avisverifies",isNew:function(){return!1},defaults:{id:"",secret:"",plateform:"",offset:0,is_sending_products:!1,is_enabled:!1},getPlatforms:function(){return{FR:"www.avis-verifies.com",ES:"www.opiniones-verificadas.com",DE:"www.echte-bewertungen.com",IT:"www.recensioni-verificate.com",NL:"www.echte-beoordelingen.com",UK:"www.verified-reviews.co.uk",US:"www.verified-reviews.com",BR:"www.opinioes-verificadas.com.br",PT:"www.opinioes-verificadas.com",CO:"www.opiniones-verificadas.com.co",PL:"www.prawdziwe-opinie.com",PE:"www.opiniones-verificadas.pe",CL:"www.cl.opiniones-verificadas.com",AU:"www.au.verified-reviews.com",NZ:"www.verified-reviews.co.nz",MX:"www.opiniones-verificadas.com.mx"}}});
},{"606":606}],548:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/captcha",isNew:function(){return!1},defaults:{type:"",recaptcha_key:"",recaptcha_secret:""}});
},{"606":606}],549:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/contact",isNew:function(){return!1},defaults:{firstname:"",lastname:"",civility:"",email:"",address:"",zipcode:"",city:"",country_id:"",phone:"",mobile:"",fax:"",company_name:"",company_forme:"",company_cnil:"",company_capital:"",company_siret:"",company_rcs:"",company_naf:"",company_tva:""}});
},{"606":606}],550:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/fidelity",meta:{},isNew:function(){return!1},defaults:{gain_rate:0,reward_first_order:0,reward_subscriber:0,is_creation_enabled:!1,creation_cost:0,voucher_mail_subject:"",voucher_value:0,voucher_validity:0,voucher_threshold:0,is_voucher_restricted:!1}});
},{"606":606}],551:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/ftp",isNew:function(){return!1},defaults:{host:"",port:null,login:"",password:""}});
},{"606":606}],552:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/gdpr",isNew:function(){return!1},defaults:{is_customers_consent_required:!1,is_comments_consent_required:!1,is_evaluations_consent_required:!1,is_newsletter_consent_required:!1,is_checkout_consent_required:!1}});
},{"606":606}],553:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/https",isNew:function(){return!1},defaults:{is_enabled:!1,status:null,domain_IP:""}});
},{"606":606}],554:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/iadvize",isNew:function(){return!1},defaults:{id:"",is_enabled:!1}});
},{"606":606}],555:[function(require,module,exports){
function checkImport(e){var t=e.get("result").split(";"),n=t[1];return Backbone.ajax({url:"sites/@site/import/l10n/theme/"+n,method:"GET"}).then(function(e,t){return e})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476),Entry=CollectionUtils.KiubiModel.extend({url:"sites/@site/l10n/theme",idAttribute:"msgid",defaults:{msgid:null,msgstr:""}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/l10n/theme",model:Entry,clearAll:function(){return Backbone.ajax({url:this.url,method:"DELETE",data:{}})},"import":function(e){var t=new FormData;return _.each(e,function(e,n){t.append(n,e)}),Backbone.ajax({url:"sites/@site/import/l10n/theme",method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkImport(t)})})},exportAll:function(){return Backbone.ajax({url:"sites/@site/export/l10n/theme",method:"POST",data:{}}).then(function(e,t){if(t&&t.success)return e})}});
},{"476":476,"606":606,"undefined":undefined}],556:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/lengow",isNew:function(){return!1},defaults:{is_enabled:!1,categories:[],id:"",is_tracker_enabled:!1,export_url:"",last_export:""}});
},{"606":606}],557:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/medias",isNew:function(){return!1},defaults:{g_vignette_width:null,g_vignette_height:null,vignette_width:null,vignette_height:null,g_miniature_width:null,g_miniature_height:null,miniature_width:null,miniature_height:null,is_resize_enabled:!1,max_width:null,max_height:null,jpg_compression:85},promisedSelect:function(e){var t=this;return this.fetch().then(function(){var i=new CollectionUtils.SelectCollection;return i.add([{value:"full",label:"Taille d'origine",selected:"full"==e||!e},{value:"g_vignette",label:"Grande vignette : "+t.get("g_vignette_width")+" x "+t.get("g_vignette_height")+"px",selected:"g_vignette"==e},{value:"vignette",label:"Vignette : "+t.get("vignette_width")+" x "+t.get("vignette_height")+"px",selected:"vignette"==e},{value:"g_miniature",label:"Grande miniature : "+t.get("g_miniature_width")+" x "+t.get("g_miniature_height")+"px",selected:"g_miniature"==e},{value:"miniature",label:"Miniature : "+t.get("miniature_width")+" x "+t.get("miniature_height")+"px",selected:"miniature"==e}]),i})}});
},{"606":606,"undefined":undefined}],558:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/merchantcenter",isNew:function(){return!1},defaults:{is_enabled:!1,last_export:null,export_url:"",categories:[]},searchCategories:function(e){return Backbone.ajax({url:this.url+"/categories",method:"GET",data:{term:e,limit:5}}).then(function(e,t){return e})}});
},{"606":606,"undefined":undefined}],559:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/seo/meta",isNew:function(){return!1},defaults:{meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:""}});
},{"606":606}],560:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/newsletter",isNew:function(){return!1},defaults:{registration_success_msg:"",unregistration_success_msg:"",registration_error_msg:"",unregistration_error_msg:""}});
},{"606":606}],561:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs",isNew:function(){return!1},defaults:{site_title:"",is_site_open:!1,is_contact_enabled:!1,is_api_enabled:!1,is_blog_enabled:!1,is_catalog_enabled:!1,is_checkout_enabled:!1,front_login:"",front_password:"",breadcrumb:{}}});
},{"606":606}],562:[function(require,module,exports){
var CollectionUtils=require(606);module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/prefs/theme",isNew:function(){return!1},defaults:{site_excerpt:"",is_excerpt_visible:!1,site_description:"",is_description_visible:!1,logo_media_id:null,is_logo_visible:!1}});
},{"606":606}],563:[function(require,module,exports){
function HeaderTabsL10n(){return[{title:"Traductions",url:"/prefs/l10n",icon:"md-translate"},{title:"Import",url:"/prefs/l10n/import",icon:"md-import"}]}function ctlScope(e){switch(e){case"showIndex":case"showContact":case"showGdpr":return"site:pref";case"showHttps":case"showDomains":return"site:domains";case"showL10n":case"showL10nImport":return"site:cms";case"showMeta":return"site:seo"}return null}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Router=require(612),Controller=require(34),Site=require(561),Theme=require(562),Contact=require(549),Medias=require(557),Meta=require(559),Countries=require(39),Domains=require(42),Https=require(553),Gdpr=require(552),L10n=require(555),IndexView=require(582),ContactView=require(578),HttpsView=require(581),MediasView=require(585),MetaView=require(586),DomainsView=require(579),ShortcutView=require(587),GdprView=require(580),L10nView=require(584),L10nImportView=require(583),SidebarMenuView=require(588),PrefsController=Controller.extend({sidebarMenuService:"prefs",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Préférences",href:"/prefs"}],showIndex:function(){var e=new Site,t=new Theme;Backbone.$.when(e.fetch(),t.fetch()).done(function(){var n=new IndexView({site:e,theme:t});this.navigationController.showContent(n),this.setHeader({title:"Préférences Générales"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showContact:function(){var e=new Contact;e.fetch().done(function(){var t=new ContactView({model:e,countries:new Countries});this.navigationController.showContent(t),this.setHeader({title:"Coordonnées du site Internet"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showHttps:function(){var e=new Https;e.fetch().done(function(){this.navigationController.showContent(new HttpsView({model:e})),this.setHeader({title:"Certificat SSL/TLS et accès HTTPS"})}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showMedias:function(){var e=new Medias;e.fetch().done(function(){var t=Backbone.Radio.channel("app").request("ctx:session"),n=new MediasView({model:e,enableAdvanced:t.hasFeature("advanced_media")});this.navigationController.showContent(n),this.setHeader({title:"Paramètres de la médiathèque"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showMeta:function(){var e=new Meta;e.fetch().done(function(){var t=new MetaView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Balises metas par défaut"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showDomains:function(){var e=new DomainsView({collection:new Domains});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Noms de domaine"})},showShortcut:function(){this.navigationController.showContent(new ShortcutView),this.setHeader({title:"Raccourcis clavier"})},showGdpr:function(){var e=new Gdpr;e.fetch().done(function(){var t=new GdprView({model:e});this.navigationController.showContent(t),this.setHeader({title:"Protection des données personnelles"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showL10n:function(){var e=new L10nView({collection:new L10n});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Traductions"},[{title:"Supprimer les traductions",callback:"actionClearL10n"}],HeaderTabsL10n())},showL10nImport:function(){this.navigationController.showContent(new L10nImportView({model:new L10n})),this.setHeader({title:"Import de traductions"},null,HeaderTabsL10n())},actionClearL10n:function(){var e=new L10n;this.navigationController.showOverlay(),e.clearAll().then(function(){var e=this.navigationController.getContent();e&&e.start&&e.start(),this.navigationController.hideModal()}.bind(this),function(){this.navigationController.showErrorModal("Erreur lors de la suppresion des traductions",2e3)}.bind(this))}});module.exports=Router.extend({controller:new PrefsController,appRoutes:{prefs:"showIndex","prefs/contact":"showContact","prefs/https":"showHttps","prefs/medias":"showMedias","prefs/meta":"showMeta","prefs/domains":"showDomains","prefs/shortcut":"showShortcut","prefs/gdpr":"showGdpr","prefs/l10n":"showL10n","prefs/l10n/import":"showL10nImport"},onRoute:function(e){var t=ctlScope(e);if(t){var n=Backbone.Radio.channel("app").request("ctx:session");if(!n.hasScope(t))return this.controller.navigationController.navigate("/"),!1}this.controller.showSidebarMenu()}});
},{"34":34,"39":39,"42":42,"549":549,"552":552,"553":553,"555":555,"557":557,"559":559,"561":561,"562":562,"578":578,"579":579,"580":580,"581":581,"582":582,"583":583,"584":584,"585":585,"586":586,"587":587,"588":588,"612":612,"undefined":undefined}],564:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert">Les coordonnées ci-dessous concernent uniquement <strong>le propriétaire de ce site Internet</strong>, qui peut être différent du propriétaire du compte Kiubi. Les coordonnées de ce site Internet sont mentionnées dans de nombreux documents : factures, commandes, mentions légales, etc. <strong>Veillez donc à ce qu\'elles soient toujours valides</strong>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Propriétaire du site</h1></header><div class="post-content"><div class="row"><div class="col-2"><div class="form-group"><label for="civility">Civilité</label><select id="civility" name="civility" data-style="selectify"><option value="Mr" '+(null==(__t="Mr"==civility?'selected="selected"':"")?"":__t)+'>M</option><option value="Mrs" '+(null==(__t="Mrs"==civility?'selected="selected"':"")?"":__t)+'>Mme</option><option value="Miss" '+(null==(__t="Miss"==civility?'selected="selected"':"")?"":__t)+'>Mlle</option></select></div></div><div class="col-5"><div class="form-group"><label class="required" for="lastname">Nom</label><input class="form-control" name="lastname" id="lastname" value="'+(null==(__t=lastname)?"":_.escape(__t))+'"></div></div><div class="col-5"><div class="form-group"><label class="required" for="firstname">Prénom</label><input class="form-control" name="firstname" id="firstname" value="'+(null==(__t=firstname)?"":_.escape(__t))+'"></div></div><div class="col-12"><div class="form-group"><label class="required" for="email">Email</label><p>Cet email sera le destinataire de plusieurs informations provenant de Kiubi : notifications, messages d\'information, factures d\'abonnement, copies des commandes, etc.</p><input class="form-control" name="email" id="email" value="'+(null==(__t=email)?"":_.escape(__t))+'" placeholder=""></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Coordonnées postales et téléphoniques</h1></header><div class="post-content"><div class="form-group"><label class="required" for="address">Adresse</label><input id="address" name="address" class="form-control" value="'+(null==(__t=address)?"":_.escape(__t))+'" placeholder=""></div><div class="row"><div class="col-4"><div class="form-group"><label class="required" for="zipcode">Code postal</label><input id="zipcode" name="zipcode" class="form-control" value="'+(null==(__t=zipcode)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-8"><div class="form-group"><label class="required" for="city">Ville</label><input id="city" name="city" class="form-control" value="'+(null==(__t=city)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-6"><div class="form-group"><label for="country_id">Pays</label><div data-role="countries"></div></div></div><div class="w-100"></div><div class="col-4"><div class="form-group"><label class="required" for="phone">Téléphone</label><input id="phone" name="phone" class="form-control" value="'+(null==(__t=phone)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-4"><div class="form-group"><label for="mobile">Mobile</label><input id="mobile" name="mobile" class="form-control" value="'+(null==(__t=mobile)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-4"><div class="form-group"><label for="fax">Fax (encore utile parait-il ;))</label><input id="fax" name="fax" class="form-control" value="'+(null==(__t=fax)?"":_.escape(__t))+'" placeholder=""></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations sur la société</h1></header><div class="post-content"><div class="row"><div class="col-12"><div class="form-group"><label for="company_name">Dénomination sociale</label><input id="company_name" name="company_name" class="form-control" value="'+(null==(__t=company_name)?"":_.escape(__t))+'" placeholder="Le nom légal de la société"></div></div><div class="col-4"><div class="form-group"><label for="company_forme">Forme juridique</label><input id="company_forme" name="company_forme" class="form-control" value="'+(null==(__t=company_forme)?"":_.escape(__t))+'" placeholder="EURL, SARL, SAS, SA, ..."></div></div><div class="col-8"><div class="form-group"><label for="company_capital">Capital social</label><input id="company_capital" name="company_capital" class="form-control" value="'+(null==(__t=company_capital)?"":_.escape(__t))+'" placeholder="Vous pouvez préciser le montant, avec ou sans la devise"></div></div><div class="col-4"><div class="form-group"><label for="company_siret">Siret</label><input id="company_siret" name="company_siret" class="form-control" value="'+(null==(__t=company_siret)?"":_.escape(__t))+'" placeholder="Composé de 14 caractères" maxlength="20"></div></div><div class="col-4"><div class="form-group"><label for="company_rcs">RCS</label><input id="company_rcs" name="company_rcs" class="form-control" value="'+(null==(__t=company_rcs)?"":_.escape(__t))+'" placeholder="Composé de 13 caractères" maxlength="20"></div></div><div class="col-4"><div class="form-group"><label for="company_naf">NAF (ou APE)</label><input id="company_naf" name="company_naf" class="form-control" value="'+(null==(__t=company_naf)?"":_.escape(__t))+'" placeholder="Composé de 5 caractères" maxlength="20"></div></div><div class="col-6"><div class="form-group"><label for="company_tva">Numéro de TVA intracommunautaire</label><input id="company_tva" name="company_tva" class="form-control" value="'+(null==(__t=company_tva)?"":_.escape(__t))+'" placeholder="Composé de 14 caractères" maxlength="20"></div></div><div class="col-6"><div class="form-group"><label for="company_cnil">Numéro de déclaration CNIL</label><input id="company_cnil" name="company_cnil" class="form-control" value="'+(null==(__t=company_cnil)?"":_.escape(__t))+'" placeholder="À déclarer sur https://www.cnil.fr/"></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],565:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/preferences.html#noms-de-domaine" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez associer un ou plusieurs noms de domaine, préalablement acquis chez <a href="https://fr.wikipedia.org/wiki/Registar" target="_blank">un dépositaire</a>, à votre site Internet. Une fois le dépôt effectué et validé, votre dépositaire vous permet de configurer la zone DNS de vos domaines. <a href="https://aide.kiubi.com/preferences.html#noms-de-domaine" target="_blank">Définissez l\'enregistrement A</a> des domaines pour le serveur de Kiubi à l\'adresse IP :<p class="lead text-center my-4"><strong data-role="ip"></strong></p>Une fois validée, cette reconfiguration peut prendre de <strong>24 à 48 heures pour être opérationnelle</strong>. Du côté de Kiubi, veillez à ajouter les noms de domaine que vous avez déposés et à en choisir un comme domaine principal.<br><br>Votre adresse d\'origine <code>'+(null==(__t=domain)?"":_.escape(__t))+'</code> restera toujours valable et n\'est pas modifiable.</div><article data-role="list"></article><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],566:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="required" for="name">Nom de domaine</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">http://</span></div><input class="form-control" id="name" name="name" value="" placeholder="domaine.com"><div class="input-group-append"><span class="input-group-text"></span></div></div></div><div class="form-group"><label>Ajouter le nom de domaine <span data-role="sub">www.</span></label><div class="form-check"><input name="sub" id="sub1" value="1" checked="checked" type="radio"><label for="sub1" class="">Oui</label><input name="sub" id="sub0" value="0" type="radio"><label for="sub0" class="">Non</label></div></div><p>Si vous souhaitez utiliser des noms de domaine accentués, vous devez les saisir sous le format <a href="https://www.punycoder.com/" target="_blank">Punycode</a> :<br><code>www.accentué.fr</code> doit être saisi <code>www.xn--accentu-hya.fr</code></p><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show"><span class="page-add md-icon md-add-page"></span>Associer un nom de domaine</a></div>';return __p};
},{"undefined":undefined}],567:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row no-gutters" data-role="list"><div class="col item-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4><span>",is_https_enabled?(__p+=" ",__p+=is_https_certified?"HTTPS activé":"HTTPS en cours d'activation",__p+=" "):__p+="HTTPS désactivé",__p+=' </span></div><div class="col-2">',is_main&&(__p+='<span class="badge badge-success">Principal</span>'),__p+='</div><div class="col-auto" style="min-width: 250px"> ',1==actions.length?__p+=' <button type="button" class="btn btn-primary float-right" role="button" data-role="action" data-action="'+(null==(__t=actions[0].action)?"":_.escape(__t))+'" data-confirm="'+(null==(__t=actions[0].confirm)?"":_.escape(__t))+'">'+(null==(__t=actions[0].label)?"":_.escape(__t))+"</button> ":actions.length>1&&(__p+=' <div class="btn-group float-right" role="group"><button type="button" class="btn btn-primary" role="button" data-role="action" data-action="'+(null==(__t=actions[0].action)?"":_.escape(__t))+'">'+(null==(__t=actions[0].label)?"":_.escape(__t))+'</button> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"> ',_.each(actions,function(t,a){0!=a&&(__p+=' <li><a class="dropdown-item" href="#" data-role="action" data-action="'+(null==(__t=t.action)?"":_.escape(__t))+'" data-confirm="'+(null==(__t=t.confirm)?"":_.escape(__t))+'">'+(null==(__t=t.label)?"":_.escape(__t))+"</a></li> ")}),__p+=" </ul></div> "),__p+=" </div></div>";return __p};
},{"undefined":undefined}],568:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert">Le "<a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees" target="_blank">Réglement Général sur la Protection des Données personnelles (RGPD)</a>" impose à toute personne morale le respect des principes et des règles régissant la protection des personnes physiques à l\'égard du <strong>traitement des données à caractère personnel</strong>.<br><br>Vous trouverez ci-dessous des informations et des procédures afin d\'appliquer à ce site Internet cette réglementation européenne. Les procédures proposées le sont <strong>à titre indicatif et concernent uniquement les données personnelles collectées par Kiubi</strong>. Elles doivent être adaptées par vos soins en fonction de votre activité et de l\'évolution de la législation.<br><br><strong class="text-danger">Important :</strong> Si vous utilisez un thème graphique personnalisé vous devez mettre à jour votre thème en vous reportant à <a href="https://aide.kiubi.com/changelog.html" target="_blank">la release note correspondante</a> et <a href="https://demo.kiubi-web.com/" target="_blank">au site de démonstration</a> dédiés.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Engagements pris pour la protection des données personnelles</h1></header><div class="post-content"><p>Il est obligatoire d\'indiquer dans <strong>une page web dédiée et publiquement accessible</strong> les engagements que vous avez pris pour la protection des données personnelles, en y précisant notamment :</p><ul><li>Le responsable des traitements</li><li>Les finalités de traitements</li><li>Les données personnelles collectées</li><li>La durée de conservation des données</li><li>Les destinataires</li><li>La procédure de retrait de consentement</li><li>La procédure d\'application du droit d\'accès aux données</li></ul><p>Les engagements pris pour la protection des données personnelles indiqués dans cette page web concernent non seulement ce site Internet mais également l\'ensemble des services de votre société, de vos filiales, de vos sous-traitants, etc. ayant accès aux données personnelles collectées.</p><p>Exemple : si des adresses emails collectées via ce site sont transmises à une plateforme de gestion commerciale et utilisées dans le cadre d\'opérations marketing, il est obligatoire d\'inclure dans vos engagements toutes les informations concernant cette finalité de traitements ainsi que toutes les informations sur leurs destinataires (c\'est-à-dire les coordonnées de la plateforme de gestion commerciale ainsi que tous autres tiers et sous-traitants concernés).</p><p>Kiubi met à votre disposition une page web dédiée aux engagements pris pour la protection des données personnelles. Cette page web est à <strong>compléter et modifier par vos soins</strong> en fonction de votre activité, de vos sous-traitants et de l\'évolution de la législation.</p><p>Si vous ne disposez pas encore d\'une page web dédiée aux engagements pris pour la protection des données personnelles, vous devez <a href="/cms">la créer</a> en lui donnant comme adresse <code>/donnees-personnelles.html</code>. Vous pouvez en consulter et en télécharger un exemple aux adresses suivantes :</p><ul><li>Exemple de <a href="https://demo.kiubi-web.com/donnees-personnelles.html" target="_blank">page web</a></li><li>Exemple de <a href="https://cdn.kiubi-admin.com/documents/contenu_page_donnees_personnelles.xls" target="_blank">contenu à télécharger</a> pour y être <a href="/modules/import/contents">importé dans votre site</a></li></ul></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Finalités de traitements et Consentement préalable</h1></header><div class="post-content"><p>À chaque fois que des données personnelles sont collectées, il est obligatoire de faire figurer au moment de leur collecte :</p><ol><li>Une demande de consentement préalable, c\'est-à-dire une case à cocher (ou tout autre processus) qui valide l\'utilisation des données personnelles collectées. Si la case n\'est pas cochée par l\'internaute, les données ne peuvent être collectées</li><li>Les finalités de traitements des données collectées</li><li>Un lien vers la page web dédiée aux engagements pris pour la protection des données personnelles</li></ol><p>Ces éléments doivent être présents directement dans les templates des widgets correspondants. Vous pouvez alors activer la demande de consentement préalable :</p><div class="form-group post-group"><label>Création de compte d\'un membre (Inscription au site)</label><p>Le texte précisant les données personnelles collectées à la création d\'un compte d\'un membre et leurs finalités de traitements peut être personnalisé dans <a href="/customers/settings">les paramètres des membres</a>. Ce texte, ainsi que la demande de consentement, doivent obligatoirement être placés dans une zone clairement distincte de la validation de conditions d\'utilisation du site.</p><div class="form-check"><input name="is_customers_consent_required" id="is_customers_consent_required1" value="1" type="radio" '+(null==(__t=is_customers_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_customers_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_customers_consent_required" id="is_customers_consent_required0" value="0" type="radio" '+(null==(__t=is_customers_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_customers_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label>Poster un commentaire dans le blog</label><div class="form-check"><input name="is_comments_consent_required" id="is_comments_consent_required1" value="1" type="radio" '+(null==(__t=is_comments_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_comments_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_comments_consent_required" id="is_comments_consent_required0" value="0" type="radio" '+(null==(__t=is_comments_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_comments_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label>Poster une évaluation de produit</label><div class="form-check"><input name="is_evaluations_consent_required" id="is_evaluations_consent_required1" value="1" type="radio" '+(null==(__t=is_evaluations_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_evaluations_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_evaluations_consent_required" id="is_evaluations_consent_required0" value="0" type="radio" '+(null==(__t=is_evaluations_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_evaluations_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label>Inscription à la newsletter</label><div class="form-check"><input name="is_newsletter_consent_required" id="is_newsletter_consent_required1" value="1" type="radio" '+(null==(__t=is_newsletter_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_newsletter_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_newsletter_consent_required" id="is_newsletter_consent_required0" value="0" type="radio" '+(null==(__t=is_newsletter_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_newsletter_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label>Choix de l\'adresse de livraison d\'une commande</label><div class="form-check"><input name="is_checkout_consent_required" id="is_checkout_consent_required1" value="1" type="radio" '+(null==(__t=is_checkout_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_checkout_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_checkout_consent_required" id="is_checkout_consent_required0" value="0" type="radio" '+(null==(__t=is_checkout_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_checkout_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label>Formulaires Dismoi? (Gestionnaire de formulaires)</label><p class="form-control-static">Les finalités de traitements et le consentement préalable sont propres à chaque formulaire et doivent être configurés dans les paramètres du formulaire en question.</p></div><div class="form-group post-group"><label>Gestion du compte d\'un membre</label><p class="form-control-static">La demande de consentement ayant été faite à l\'inscription au site, elle n\'est plus nécessaire dans la gestion du compte du membre.</p></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Procédure de retrait de consentement et Droit d\'accès aux données</h1></header><div class="post-content"><p>Kiubi ne collecte que le minimum de données nécessaires au bon fonctionnement du service fourni par le site Internet (principe de minimisation de la collecte de données). Le RGPD impose cependant de permettre à un internaute de <a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees/chapitre3#Article21" target="_blank">retirer son consentement</a> à l\'utilisation de ses données personnelles ainsi qu\'<a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees/chapitre3#Article15" target="_blank">un droit d\'accès</a> et de <a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees/chapitre3#Article16" target="_blank">rectification de ses données</a>.</p><div class="form-group post-group"><label>Gestion du compte d\'un membre</label><p class="form-control-static">Un membre inscrit peut mettre à jour ou supprimer librement les données non obligatoires à la bonne marche du service proposé par le site directement en se connectant à son compte. Les commandes qu\'un membre a passé sur le site sont librement téléchargeables dans la gestion de son compte.</p></div><div class="form-group post-group"><label>Suppression du compte d\'un membre</label><p class="form-control-static">Si un membre inscrit souhaite retirer l\'ensemble de son consentement, il peut supprimer son compte. Cela supprimera toutes ses informations personnelles ainsi que tous les commentaires postés en étant identifié sur le site. Ses commandes seront cependant conservées. Le propriétaire du site est averti par email que le compte a été supprimé de Kiubi et est invité à supprimer toutes autres informations concernant ce membre.</p></div><div class="form-group post-group"><label>Portabilités des données personnelles</label><p class="form-control-static">Toutes les données personnelles peuvent être supprimées et exportées dans des fichiers au format CSV ou Excel dans les différents services de la console d\'adminstration (<a href="/customers">membres</a>, <a href="/checkout">commandes</a>, <a href="/modules/subscribers">abonnés à la newsletter</a> et <a href="/forms/inbox">Dismoi?</a>).</p></div><div class="form-group post-group"><label>Chiffrage des mots de passe des membres</label><p class="form-control-static">Les mots de passe des membres sont chiffrés et ne peuvent ni être lus en clair ni être transmis (principe de sécurité). La demande de renvoi de mot de passe génère automatiquement un nouveau mot de passe temporaire. À la connexion du membre dans le laps de temps imparti, ce nouveau mot de passe remplace le précédent et le membre est redirigé vers le formulaire de changement de mot de passe pour en choisir un nouveau, s\'il le souhaite.</p></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Demande de confirmation du consentement</h1></header><div class="post-content"><p>Tous les membres inscrits sur le site Internet <strong>avant la mise en place de la demande de consentement</strong> au moment de leur inscription au site doivent être contactés afin qu\'ils autorisent l\'utilisation de leurs données personnelles. Il est conseillé de réaliser un emailling vers tous les membres du site concernés pour les inviter à :</p><ul><li>Consulter la page web dédiée aux engagements pris pour la protection des données personnelles</li><li>Se connecter à leur compte pour mettre à jour leurs informations personnelles</li><li>Ou supprimer leur compte si ils souhaitent retirer l\'ensemble de leur consentement</li></ul></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],569:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>L\'accès HTTPS permet de chiffrer et de sécuriser l\'intégralité du <a href="https://fr.wikipedia.org/wiki/Application_de_front_office" target="_blank">front-office</a> du site Internet. L\'adresse du site Internet changera de HTTP à HTTPS : <code>http://'+(null==(__t=fqdn)?"":_.escape(__t))+"</code> deviendra <code>https://"+(null==(__t=fqdn)?"":_.escape(__t))+'</code>.</p><p>Avant d\'activer l\'accès HTTPS, veuillez noter que :</p><ul><li><a href="/prefs/domains">Les noms de domaine associés au site</a> doivent être correctement configurés sur l\'adresse IP indiquée</li><li>La propagation des DNS doit être complète et acceptée par Let\'s Encrypt :<ul class="mb-0"><li>Si c\'est le cas, l\'accès HTTPS est activé dans <span class="text-danger">un délais de 5 minutes environ</span></li><li>Si ce n\'est pas le cas, l\'accès HTTPS est activé une fois la propagation complète, dans <span class="text-danger">un délais de 48 heures environ</span></li></ul></li><li>Le sitemap du site généré automatiquement est mis à jour 24 heures après l\'activation du HTTPS</li><li>Le certificat SSL/TLS utilisé pour l\'accès HTTPS n’est pas compatible avec IE8 et précédents sur Windows XP</li></ul><p>Les supports, garanties et conditions générales de vente liées au certificat SSL/TLS utilisé par Kiubi sont <a href="https://letsencrypt.org/repository/" target="_blank">celles de Let’s Encrypt</a>. Elles sont par conséquence soumises aux évolutions et modifications effectuées par ce dernier.</p><p>Nous vous conseillons avant toute activation de l\'accès HTTPS de <a href="https://aide.kiubi.com/preferences.html#acces-https" target="_blank">consulter la documentation en ligne</a> afin de prendre connaissance de l\'ensemble des informations nécessaires à la bonne utilisation de cette fonctionnalité.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Accès HTTPS</h1></header><div class="post-content"><div class="form-group"><div class="form-check"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé (recommandé)</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div> ',is_enabled){switch(__p+=" ",status){case"TODO":__p+=" La demande d'activation de l'accès HTTPS est en attente de traitement, merci de patienter quelques minutes. ";break;case"PENDING":__p+=" La demande d'activation de l'accès HTTPS est en cours en traitement. ";break;case"ERROR":__p+=" L'activation HTTPS a échoué, merci de reessayer dans quelques instants. ",brek}__p+=" "}__p+=' </div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>'}return __p};
},{"undefined":undefined}],570:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="required" for="site_title">Nom du site Internet</label><p>Donnez un nom explicite au site pour permettre son identification par Kiubi et par les Internautes. Ce nom est mentionné dans de nombreux documents : factures, commandes, mentions légales, etc.</p><input id="site_title" name="site_title" class="form-control" value="'+(null==(__t=site.site_title)?"":_.escape(__t))+'" placeholder=""></div><div data-role="logo"></div><div class="form-group"><label>Accès au site Internet</label><div class="form-check"><input name="is_site_open" id="is_site_open1" value="1" type="radio" '+(null==(__t=site.is_site_open?'checked="checked"':"")?"":__t)+'><label for="is_site_open1" class="visible">Le site est ouvert, tous les services sont publiquement accessibles</label></div><div class="form-check"><input name="is_site_open" id="is_site_open0" value="0" type="radio" '+(null==(__t=site.is_site_open?"":'checked="checked"')?"":__t)+'><label for="is_site_open0" class="not-visible">Le site est fermé, aucun service n\'est accessible, sauf pour les utilisateurs de la console d\'administration</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Services accessibles</h1></header><div class="post-content"><p>Vous pouvez activer ou désactiver l\'accès aux différents services de Kiubi est fonction des besoins du site. Un service désactivé ne sera accessible à personne : ni aux Internautes, ni aux utilisateurs de la console d\'administration.</p><div class="row"><div class="col-5"><div class="form-group"><label>Vente en ligne</label><div class="form-check"><input name="is_checkout_enabled" id="is_checkout_enabled1" value="1" type="radio" '+(null==(__t=site.is_checkout_enabled?'checked="checked"':"")?"":__t)+'><label for="is_checkout_enabled1" class="visible">Activée</label><input name="is_checkout_enabled" id="is_checkout_enabled0" value="0" type="radio" '+(null==(__t=site.is_checkout_enabled?"":'checked="checked"')?"":__t)+'><label for="is_checkout_enabled0" class="not-visible">Désactivée</label></div></div><div class="form-group"><label>Catalogue</label><div class="form-check"><input name="is_catalog_enabled" id="is_catalog_enabled1" value="1" type="radio" '+(null==(__t=site.is_catalog_enabled?'checked="checked"':"")?"":__t)+'><label for="is_catalog_enabled1" class="visible">Activé</label><input name="is_catalog_enabled" id="is_catalog_enabled0" value="0" type="radio" '+(null==(__t=site.is_catalog_enabled?"":'checked="checked"')?"":__t)+'><label for="is_catalog_enabled0" class="not-visible">Désactivé</label></div></div></div><div class="col-5"><div class="form-group"><label>Blog</label><div class="form-check"><input name="is_blog_enabled" id="is_blog_enabled1" value="1" type="radio" '+(null==(__t=site.is_blog_enabled?'checked="checked"':"")?"":__t)+'><label for="is_blog_enabled1" class="visible">Activé</label><input name="is_blog_enabled" id="is_blog_enabled0" value="0" type="radio" '+(null==(__t=site.is_blog_enabled?"":'checked="checked"')?"":__t)+'><label for="is_blog_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label>Page de contact</label><div class="form-check"><input name="is_contact_enabled" id="is_contact_enabled1" value="1" type="radio" '+(null==(__t=site.is_contact_enabled?'checked="checked"':"")?"":__t)+'><label for="is_contact_enabled1" class="visible">Activée</label><input name="is_contact_enabled" id="is_contact_enabled0" value="0" type="radio" '+(null==(__t=site.is_contact_enabled?"":'checked="checked"')?"":__t)+'><label for="is_contact_enabled0" class="not-visible">Désactivée</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>API Front-Office</h1></header><div class="post-content"><p>En activant l\'API Front-Office vous ouvrez <a href="'+(null==(__t=domain)?"":_.escape(__t))+'/api/v1/" target="_blank">des points d\'accès dédiés et structurés</a> aux données de votre site. Ce paramètre n\'impacte pas l\'accès aux données du site par l\'API Developers.</p><div class="form-group"><label>Utilisation de l\'API Front-office</label><div class="form-check"><input name="is_api_enabled" id="is_api_enabled1" value="1" type="radio" '+(null==(__t=site.is_api_enabled?'checked="checked"':"")?"":__t)+'><label for="is_api_enabled1" class="visible">Activée</label><input name="is_api_enabled" id="is_api_enabled0" value="0" type="radio" '+(null==(__t=site.is_api_enabled?"":'checked="checked"')?"":__t)+'><label for="is_api_enabled0" class="not-visible">Désactivée</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Accès restreint</h1></header><div class="post-content"><p>Vous pouvez restreindre l\'accès à l\'ensemble du site, par exemple si ce dernier est encore en travaux, en ajoutant une demande d\'identification directement avant la page d\'accueil.</p><div class="form-group"><label for="front_login">Identifiant</label><input id="front_login" name="front_login" class="form-control" value="'+(null==(__t=site.front_login)?"":_.escape(__t))+'" placeholder="Si le mot de passe est renseigné, cet identifiant sera demandé pour accéder au site"></div><div class="form-group"><label for="front_password">Mot de passe</label><input id="front_password" name="front_password" class="form-control" value="'+(null==(__t=site.front_password)?"":_.escape(__t))+'" placeholder="Si l\'identifiant est renseigné, ce mot de passe sera demandé pour accéder au site"></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Bloc-marque</h1></header><div class="post-content"><p>Le bloc-marque représente l\'identité du site Internet et est généralement affiché dans la zone d\'entête de ce dernier. Il est composé du nom de la marque ou de la société, de sa signature (ou slogan) ainsi que du logo.</p><div class="form-group"><label for="site_excerpt">Nom de la marque</label><input id="site_excerpt" name="site_excerpt" class="form-control" value="'+(null==(__t=theme.site_excerpt)?"":_.escape(__t))+'" placeholder="Le nom est généralement affichée dans la zone d\'entête du site"></div><div class="form-group"><label for="site_description">Signature de la marque</label><input id="site_description" name="site_description" class="form-control" value="'+(null==(__t=theme.site_description)?"":_.escape(__t))+'" placeholder="La signature est généralement affichée en dessous du nom"></div><div class="row"><div class="col-4"><div class="form-group"><label>Afficher le nom</label><div class="form-check"><input name="is_excerpt_visible" id="is_excerpt_visible1" value="1" type="radio" '+(null==(__t=theme.is_excerpt_visible?'checked="checked"':"")?"":__t)+'><label for="is_excerpt_visible1" class="">Oui</label><input name="is_excerpt_visible" id="is_excerpt_visible0" value="0" type="radio" '+(null==(__t=theme.is_excerpt_visible?"":'checked="checked"')?"":__t)+'><label for="is_excerpt_visible0" class="">Non</label></div></div></div><div class="col-4"><div class="form-group"><label>Afficher la signature</label><div class="form-check"><input name="is_description_visible" id="is_description_visible1" value="1" type="radio" '+(null==(__t=theme.is_description_visible?'checked="checked"':"")?"":__t)+'><label for="is_description_visible1" class="">Oui</label><input name="is_description_visible" id="is_description_visible0" value="0" type="radio" '+(null==(__t=theme.is_description_visible?"":'checked="checked"')?"":__t)+'><label for="is_description_visible0" class="">Non</label></div></div></div><div class="col-4"><div class="form-group"><label>Afficher le logo</label><div class="form-check"><input name="is_logo_visible" id="is_logo_visible1" value="1" type="radio" '+(null==(__t=theme.is_logo_visible?'checked="checked"':"")?"":__t)+'><label for="is_logo_visible1" class="">Oui</label><input name="is_logo_visible" id="is_logo_visible0" value="0" type="radio" '+(null==(__t=theme.is_logo_visible?"":'checked="checked"')?"":__t)+'><label for="is_logo_visible0" class="">Non</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Fil d\'Ariane</h1></header><div class="post-content post-list no-hover"><p>Le fil d\'Ariane du blog et du catalogue peut être renommé et l\'adresse du répertoire de base peut être personnalisée. Une redirection 301 est alors mise en place automatiquement vers la nouvelle adresse.</p><div class="row"><div class="col-3"><label>Nom du service</label></div><div class="col-8"><label>Adresse du répertoire</label></div></div> ',_.each(site.breadcrumb,function(e,s){__p+=' <div class="list-item list-item-form"><div class="row"><div class="col-3"><div class="form-group"><input name="breadcrumb['+(null==(__t=s)?"":_.escape(__t))+'][name]" class="form-control" value="'+(null==(__t=e.name)?"":_.escape(__t))+'" placeholder="'+(null==(__t=e.default_name)?"":_.escape(__t))+'"></div></div><div class="col-9"><div class="form-group"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text" id="basic-addon3">'+(null==(__t=domain)?"":_.escape(__t))+'/</span></div><input name="breadcrumb['+(null==(__t=s)?"":_.escape(__t))+'][path]" class="form-control" value="'+(null==(__t=e.path)?"":_.escape(__t))+'" placeholder="'+(null==(__t=s)?"":_.escape(__t))+'"><div class="input-group-append"><span class="input-group-text" id="basic-addon2">/</span></div></div></div></div></div></div> '}),__p+=' </div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Sitemap</h1></header><div class="post-content"><p>Un sitemap est mis à jour automatiquement à l\'adresse : <a href="'+(null==(__t=domain)?"":_.escape(__t))+'/sitemap.xml" target="_blank">'+(null==(__t=domain)?"":_.escape(__t))+'/sitemap.xml</a>.</p></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],571:[function(require,module,exports){
arguments[4][174][0].apply(exports,arguments)
},{"174":174,"undefined":undefined}],572:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/preferences.html#traductions" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez <strong>importer des traductions</strong> pour modifier les messages générés automatiquement par Kiubi. Nous vous encourageons avant tout import de traductions de <a href="https://aide.kiubi.com/preferences.html#traductions" target="_blank">consulter la documentation en ligne</a> et à <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label for="file">Fichier d\'import</label><p>Vous pouvez télécharger un exemple de modèle de fichier de traduction (<a href="#TODO" target="_blank">FR</a> ou <a href="#TODO" target="_blank">EN</a>) pour vous aider à préparer votre propre fichier.</p><input name="file" id="file" type="file"></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button></div></div> ':(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans le fichier.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les traductions ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],573:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row i18n-list" data-role="list"><div class="col"><code class="i18n-id">'+(null==(__t=msgid)?"":_.escape(__t))+'</code></div><div class="col-1 align-item-center justify-content-center"><span class="md-icon md-next"></span></div><div class="col"><code> ',__p+=msgstr?" "+(null==(__t=msgstr)?"":_.escape(__t))+" ":' <em class="text-muted">Pas de traduction</em> ',__p+=' </code></div><div class="col-auto"><div class="btn-group float-right" role="group"><a class="btn btn-primary" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"><li><a class="dropdown-item" href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group has-feedback"><label>'+(null==(__t=msgid)?"":_.escape(__t))+'</label><input class="form-control" name="msgstr" value="'+(null==(__t=msgstr)?"":_.escape(__t))+'" placeholder="Traduction"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-lg btn-success btn-save" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],574:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Tailles des vignettes et miniatures</h1></header><div class="post-content"><p>Quand une image est publiée dans la médiathèque, Kiubi génère automatiquement 4 images supplémentaires de tailles différentes, en plus de l\'image d\'origine. Ces images peuvent être utilisées dans le contenu ou les templates graphiques du site.</p><div class="row"><div class="col-8"><div class="form-group"><label for="">Taille maximum des grandes vignettes</label><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="g_vignette_width" id="g_vignette_width" value="'+(null==(__t=g_vignette_width)?"":_.escape(__t))+'" placeholder="1"><div class="input-group-append"><span class="input-group-text">pixels de largeur</span></div></div></div><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="g_vignette_height" id="g_vignette_height" value="'+(null==(__t=g_vignette_height)?"":_.escape(__t))+'" placeholder="1"><div class="input-group-append"><span class="input-group-text">pixels de hauteur</span></div></div></div></div></div></div><div class="col-8"><div class="form-group"><label for="">Taille maximum des vignettes</label><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="vignette_width" id="vignette_width" value="'+(null==(__t=vignette_width)?"":_.escape(__t))+'" placeholder="1"><div class="input-group-append"><span class="input-group-text">pixels de largeur</span></div></div></div><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="vignette_height" id="vignette_height" value="'+(null==(__t=vignette_height)?"":_.escape(__t))+'" placeholder="1"><div class="input-group-append"><span class="input-group-text">pixels de hauteur</span></div></div></div></div></div></div><div class="col-8"><div class="form-group"><label for="">Taille maximum des grandes miniatures</label><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="g_miniature_width" id="g_miniature_width" value="'+(null==(__t=g_miniature_width)?"":_.escape(__t))+'" placeholder="1"><div class="input-group-append"><span class="input-group-text">pixels de largeur</span></div></div></div><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="g_miniature_height" id="g_miniature_height" value="'+(null==(__t=g_miniature_height)?"":_.escape(__t))+'" placeholder="1"><div class="input-group-append"><span class="input-group-text">pixels de hauteur</span></div></div></div></div></div></div><div class="col-8"><div class="form-group"><label for="">Taille maximum des miniatures</label><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="miniature_width" id="miniature_width" value="'+(null==(__t=miniature_width)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">pixels de largeur</span></div></div></div><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="miniature_height" id="miniature_height" value="'+(null==(__t=miniature_height)?"":_.escape(__t))+'" placeholder="0"><div class="input-group-append"><span class="input-group-text">pixels de hauteur</span></div></div></div></div></div></div></div></div><footer class="post-footer"></footer></article> ',enableAdvanced&&(__p+=' <article class="post-article"><header class="post-header"><h1>Traitement des images</h1></header><div class="post-content"><p>Quand une image est publiée dans la médiathèque, Kiubi peut la redimensionner automatiquement si elle est plus grande que la taille indiquée. L\'image originale n\'est pas conservée et remplacée par sa version redimensionnée.</p><div class="row"><div class="col-12"><div class="form-group"><label>Redimensionnement automatique</label><div class="form-check"><input name="is_resize_enabled" id="is_resize_enabled1" value="1" type="radio" '+(null==(__t=is_resize_enabled?'checked="checked"':"")?"":__t)+'><label for="is_resize_enabled1" class="visible">Activé</label><input name="is_resize_enabled" id="is_resize_enabled0" value="0" type="radio" '+(null==(__t=is_resize_enabled?"":'checked="checked"')?"":__t)+'><label for="is_resize_enabled0" class="not-visible">Désactivé</label></div></div></div><div class="col-8"><div class="form-group"><label for="">Taille maximum des images</label><div class="row"><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="max_width" value="'+(null==(__t=max_width)?"":_.escape(__t))+'" placeholder="Taille d\'origine"><div class="input-group-append"><span class="input-group-text">pixels de largeur</span></div></div></div><div class="col-6"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="max_height" value="'+(null==(__t=max_height)?"":_.escape(__t))+'" placeholder="Taille d\'origine"><div class="input-group-append"><span class="input-group-text">pixels de hauteur</span></div></div></div></div></div></div><div class="col-4"><div class="form-group"><label for="">Qualité des JPEG</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"></span></div><input class="form-control" name="jpg_compression" value="'+(null==(__t=jpg_compression)?"":_.escape(__t))+'" placeholder="85"><div class="input-group-append"><span class="input-group-text">sur 100</span></div></div></div></div></div></div><footer class="post-footer"></footer></article> '),__p+=' </form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],575:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/preferences.html#meta-par-defaut" class="md-icon md-help float-right" target="_blank"></a> Vous pouvez définir les balises <code>&lt;title&gt;</code>, <code>&lt;meta description&gt;</code> et <code>&lt;meta keywords&gt;</code> qui seront <strong>utilisées par défaut</strong> pour toutes les pages du site Internet. Il est cependant conseillé de <strong>personnaliser ces balises pour chaque page</strong>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Balises metas par défaut</h1></header><div class="post-content"><div class="form-group"><label for="meta_title">Titre par défaut des pages</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; utilisée par défaut"></div><div class="form-group"><label for="meta_description">Description par défaut des pages</label><textarea class="form-control" rows="5" id="meta_description" name="meta_description" placeholder="Contenu de la balise &lt;meta description&gt; utilisée par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label for="meta_keywords">Mots clés par défaut des pages</label><textarea class="form-control" rows="5" id="meta_keywords" name="meta_keywords" placeholder="Contenu de la balise &lt;meta keywords&gt; utilisée par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],576:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Liste des raccourcis clavier</h1></header><div class="post-content"><div class="row"><div class="col-3"><p><kbd><kbd>ctrl</kbd> + <kbd>S</kbd></kbd> ou <kbd><kbd>⌘</kbd> + <kbd>S</kbd></kbd></p></div><div class="col-9"><p>Enregistrer les modifications</p></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],577:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Préférences</h2><ul class="nav nav-sidebar flex-column"> ',has_scope_pref&&(__p+=' <li class="nav-item"><a class="nav-link" href="/prefs">Préférences générales</a></li><li class="nav-item"><a class="nav-link" href="/prefs/contact">Coordonnées du site</a></li> '),__p+=" ",has_scope_seo&&(__p+=' <li class="nav-item"><a class="nav-link" href="/prefs/meta">Meta par défaut</a></li> '),__p+=' <li class="nav-item"><a class="nav-link" href="/prefs/medias">Fichiers de la médiathèque</a></li> ',has_scope_domains&&(__p+=' <li class="nav-item"><a class="nav-link" href="/prefs/domains">Noms de domaine</a></li><li class="nav-item"><a class="nav-link" href="/prefs/https">Accès HTTPS</a></li> '),__p+=" ",has_scope_cms&&(__p+=' <li class="nav-item"><a class="nav-link" href="/prefs/l10n">Traductions</a></li> '),__p+=" ",has_scope_pref&&(__p+=' <li class="nav-item"><a class="nav-link" href="/prefs/gdpr">Données personnelles</a></li> '),__p+=' <li class="nav-item"><a class="nav-link" href="/prefs/shortcut">Raccourcis clavier</a></li></ul>';return __p};
},{"undefined":undefined}],578:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectView=require(139),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(564),className:"container",service:"prefs",behaviors:[FormBehavior],regions:{countries:{el:"div[data-role='countries']",replaceElement:!0}},fields:["firstname","lastname","civility","email","address","zipcode","city","country_id","phone","mobile","fax","company_name","company_forme","company_cnil","company_capital","company_siret","company_rcs","company_naf","company_tva"],initialize:function(e){this.mergeOptions(e,["model","countries"])},onRender:function(){this.showChildView("countries",new SelectView({collection:this.countries,selected:this.model.get("country_id"),name:"country_id"})),this.countries.fetch()},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"139":139,"27":27,"564":564,"608":608,"undefined":undefined}],579:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Session=Backbone.Radio.channel("app").request("ctx:session"),RowActionsBehavior=require(31),Forms=require(608),NewRowView=Marionette.View.extend({template:require(566),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]',name:'input[name="name"]',sub:'span[data-role="sub"]'},events:{"keyup @ui.name":function(e){var i=this.getUI("name").val();this.getUI("sub").text(0==i.indexOf("www.")?i.substr(4):"www."+i)}},onActionSave:function(){var e,i=Forms.extractFields(["name","sub"],this);if("1"==i.sub){var t=new this.collection.model,n=new this.collection.model,o=0==i.name.indexOf("www.")?i.name.substr(4):"www."+i.name;e=t.save({name:i.name,is_main:!1},{patch:!0,wait:!0}).then(function(){return n.save({name:o,is_main:!1},{patch:!0,wait:!0})}).done(function(){this.getUI("form").hide(),this.collection.add([t,n])}.bind(this))}else{var s=new this.collection.model;e=s.save({name:i.name,is_main:!1},{patch:!0,wait:!0}).done(function(){this.getUI("form").hide(),this.collection.add(s)}.bind(this))}return e.fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el,{showErrors:!0})}.bind(this))}}),RowView=Marionette.View.extend({template:require(567),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]'},templateContext:function(){var e=[];return this.model.get("is_main")||e.push({label:"Rendre principal",action:"main",confirm:""}),this.model.get("is_main")||this.model.get("is_provided")||e.push({label:"Supprimer",action:"delete",confirm:"warning"}),{actions:e,is_https_enabled:this.model.collection.meta&&this.model.collection.meta.is_https_enabled}},onActionDelete:function(){if(this.model.get("is_main")){var e=this.model.collection;return this.model.destroy().done(function(){e.fetch()})}return this.model.destroy()},onActionMain:function(){return this.model.save({is_main:!0},{patch:!0,wait:!0}).done(function(){_.each(this.model.collection.where({is_main:!0}),function(e){this.model!=e&&(e.set("is_main",!1),e.trigger("sync"))}.bind(this)),Session.site.fetch()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.showErrorModal(e)}.bind(this))}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(565),className:"container",service:"prefs",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},ui:{ip:'[data-role="ip"]'},initialize:function(e){this.mergeOptions(e,["collection"])},start:function(){this.collection.fetch().done(function(e,i){i.domain_IP&&this.getUI("ip").text(i.domain_IP)}.bind(this))},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Liste des noms de domaine"}))},templateContext:function(){return{domain:Session.site.get("domain")}}});
},{"128":128,"31":31,"565":565,"566":566,"567":567,"608":608,"undefined":undefined}],580:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(568),className:"container",service:"prefs",behaviors:[FormBehavior],fields:["is_customers_consent_required","is_comments_consent_required","is_evaluations_consent_required","is_newsletter_consent_required","is_checkout_consent_required"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"27":27,"568":568,"608":608,"undefined":undefined}],581:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(569),className:"container",service:"prefs",behaviors:[FormBehavior],fields:["is_enabled"],initialize:function(e){this.mergeOptions(e,["model"])},templateContext:function(){return{fqdn:Session.site.get("domain").replace(/^https?:\/\//,"")}},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"27":27,"569":569,"608":608,"undefined":undefined}],582:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FilePickerView=require(456),FormBehavior=require(27),Forms=require(608),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(570),className:"container",service:"prefs",regions:{logo:{el:"div[data-role='logo']",replaceElement:!0}},behaviors:[FormBehavior],site_fields:["site_title","is_site_open","is_contact_enabled","is_blog_enabled","is_catalog_enabled","is_checkout_enabled","is_api_enabled","front_login","front_password","breadcrumb"],theme_fields:["site_excerpt","is_excerpt_visible","site_description","is_description_visible","logo_media_id","is_logo_visible"],initialize:function(e){this.mergeOptions(e,["site","theme"]),this.listenTo(this.site,"sync",function(e){Session.site.set("name",e.get("site_title"))}.bind(this))},onRender:function(){this.showChildView("logo",new FilePickerView({fieldname:"logo_media_id",fieldLabel:"Logo du site Internet",comment:"Le logo peut être utilisé dans tous les templates du site Internet, dans les emails, le bloc-marque et le détail des commandes.",type:"image",value:this.theme.get("logo_media_id")}))},templateContext:function(){return{domain:Session.site.get("domain"),site:this.site.toJSON(),theme:this.theme.toJSON()}},onSave:function(){return Backbone.$.when(this.site.save(Forms.extractFields(this.site_fields,this),{patch:!0}),this.theme.save(Forms.extractFields(this.theme_fields,this),{patch:!0}))}});
},{"27":27,"456":456,"570":570,"608":608,"undefined":undefined}],583:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SelectView=require(139),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(572),className:"container",service:"modules",behaviors:[FormBehavior],events:{"change input[type=file]":"dropFile"},fields:["type"],step:0,tempfileUpload:null,report:null,initialize:function(e){this.mergeOptions(e,["model"])},templateContext:function(){return{report:this.report,step:this.step}},dropFile:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer,i=t?t.files:e.originalEvent.target.files;_.each(i,function(e){this.tempfileUpload=e}.bind(this))},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay();var t=Forms.extractFields(this.fields,this);return t.file=this.tempfileUpload,this.model["import"](t).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.navigate("/modules")}else this.step=0,this.report=null,this.tempfileUpload=null,this.render()}});
},{"139":139,"27":27,"572":572,"608":608,"undefined":undefined}],584:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(31),Forms=require(608),CollectionUtils=require(606),RowView=Marionette.View.extend({template:require(573),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},onActionDelete:function(){return this.model.save({msgstr:""},{patch:!1,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionSave:function(){return this.model.save(Forms.extractFields(["msgstr"],this),{patch:!1,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(128);module.exports=Marionette.View.extend({template:require(571),className:"container-fluid",service:"prefs",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){var e=new CollectionUtils.SelectCollection;e.add({value:"export",label:"Exporter les traductions",selected:!1}),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des traductions",filters:[{id:"term",title:"Rechercher",type:"input",value:""},{id:"export",extraClassname:"md-export",title:"Export",type:"button",collectionPromise:e}]}))},start:function(){this.collection.fetch({reset:!0})},onChildviewFilterChange:function(e){"export"==e.model.get("id")?this.onExportFilterChange(e):this.onSearchFilterChange(e)},onExportFilterChange:function(e){if(e.view){var t=e.view;if("export"==e.value){if(t.collection.length>1)return;t.overrideExtraClassname("md-loading"),t.render(),this.collection.exportAll().done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}},onSearchFilterChange:function(e){this.collection.fetch({reset:!0,data:{term:e.value}})}});
},{"128":128,"31":31,"571":571,"573":573,"606":606,"608":608,"undefined":undefined}],585:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(574),className:"container",service:"prefs",behaviors:[FormBehavior],fields:["g_vignette_width","g_vignette_height","vignette_width","vignette_height","g_miniature_width","g_miniature_height","miniature_width","miniature_height","max_height","max_width","is_resize_enabled","jpg_compression"],initialize:function(e){this.mergeOptions(e,["model","enableAdvanced"])},templateContext:function(){return{enableAdvanced:this.enableAdvanced}},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"27":27,"574":574,"608":608,"undefined":undefined}],586:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(575),className:"container",service:"prefs",behaviors:[FormBehavior],fields:["meta_title","meta_description","meta_keywords"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"27":27,"575":575,"608":608,"undefined":undefined}],587:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(576),className:"container",service:"prefs"});
},{"576":576,"undefined":undefined}],588:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ActiveLinksBehaviors=require(18);module.exports=Marionette.View.extend({template:require(577),service:"prefs",behaviors:[ActiveLinksBehaviors],templateContext:function(){var e=Backbone.Radio.channel("app").request("ctx:session");return{has_scope_pref:e.hasScope("site:pref"),has_scope_domains:e.hasScope("site:domains"),has_scope_cms:e.hasScope("site:cms"),has_scope_seo:e.hasScope("site:seo")}}});
},{"18":18,"577":577,"undefined":undefined}],589:[function(require,module,exports){
var CollectionUtils=require(606),Backbone=require("backbone");module.exports=CollectionUtils.KiubiModel.extend({url:"sites/@site/themes/current/conversion",isNew:function(){return!1},defaults:{warnings:[],errors:[],zones:[],is_compatible:!1},convert:function(e){return Backbone.ajax({url:this.url,method:"POST",data:{zone:e,type:"component"}}).then(function(e,n){return e})}});
},{"606":606,"undefined":undefined}],590:[function(require,module,exports){
function checkExport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/export/theme/"+t,method:"GET"}).then(function(e,t){return e})}var CollectionUtils=require(606),Backbone=require("backbone"),_=require("underscore"),Job=require(476),Theme=CollectionUtils.KiubiModel.extend({url:"sites/@site/themes",idAttribute:"code",defaults:{code:null,author_name:"",author_email:"",author_url:"",is_current:!1,name:"",style:"",version:"",date:null,status:"",variants:[]}});module.exports=CollectionUtils.KiubiCollection.extend({url:"sites/@site/themes",model:Theme,createTheme:function(e){return Backbone.ajax({url:this.url,method:"POST",data:{name:e.name,code:e.code,reuse_layouts:e.reuse_layouts}}).then(function(e){return this.trigger("create"),new this.model(e)}.bind(this))},changeTheme:function(e){return Backbone.ajax({url:this.url+"/current",method:"PUT",data:{code:e}}).then(function(e){return new this.model(e)}.bind(this))},getCurrent:function(){return Backbone.ajax({url:this.url+"/current",method:"GET"}).then(function(e){return new this.model(e)}.bind(this))},changeThemeVariants:function(e){return Backbone.ajax({url:this.url+"/current",method:"PUT",data:{variant:e}}).then(function(e){}.bind(this))},exportCustom:function(e){return Backbone.ajax({url:"sites/@site/export/theme",method:"POST",data:e}).then(function(e){var t=new Job({job_id:e.job_id});return t.watch().then(function(){return checkExport(t)})})}});
},{"476":476,"606":606,"undefined":undefined}],591:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Router=require(612),Controller=require(34),Ftp=require(551),Themes=require(590),Conversion=require(589),ImportTheme=require(473),ThemeView=require(601),CustomView=require(598),ImportView=require(599),ConversionView=require(597),SidebarMenuView=require(600),ThemesController=Controller.extend({sidebarMenuService:"themes",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Thèmes",href:"/themes"}],showTheme:function(){var e=new Ftp,t=new Themes,o=Backbone.Radio.channel("app").request("ctx:session");Backbone.$.when(e.fetch(),t.getCurrent()).done(function(n,i){var r=new ThemeView({ftp:e,themes:t,current:i,enableConversion:!o.hasFeature("component"),enableExport:o.hasFeature("theme_export")});this.navigationController.showContent(r),this.setHeader({title:"Thème graphique"})}.bind(this)).fail(function(e,t){4015===e.code?(this.notFound(e.message),this.setHeader({title:"Thème graphique"})):(this.notFound(),this.setHeader({title:"Thème graphique"}))}.bind(this))},showCustom:function(){var e=new Themes;e.fetch().done(function(){this.navigationController.showContent(new CustomView({collection:e})),this.listenTo(e,"create",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/themes")}),this.setHeader({title:"Passer en thème personnalisé"})}.bind(this)).fail(this.failHandler("Paramètres introuvables"))},showImport:function(){this.navigationController.showContent(new ImportView({model:new ImportTheme})),this.setHeader({title:"Importer un thème"})},showConversion:function(){var e=Backbone.Radio.channel("app").request("ctx:session");return e.hasFeature("component")?void this.navigationController.navigate("/"):(this.navigationController.showContent(new ConversionView({model:new Conversion})),void this.setHeader({title:"Analyse du thème"}))}});module.exports=Router.extend({controller:new ThemesController,appRoutes:{themes:"showTheme","themes/custom":"showCustom","themes/import":"showImport","themes/conversion":"showConversion"},onRoute:function(e){var t=Backbone.Radio.channel("app").request("ctx:session");return t.hasScope("site:theme")?void this.controller.showSidebarMenu():(this.controller.navigationController.navigate("/"),!1)}});
},{"34":34,"473":473,"551":551,"589":589,"590":590,"597":597,"598":598,"599":599,"600":600,"601":601,"612":612,"undefined":undefined}],592:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?(__p+=' <article class="post-article"><header class="post-header"><h1>Gestion des composants</h1></header><div class="post-content"> ',is_loading?__p+=' <div class="text-center list-item-empty"><div class="loader spinner-border text-muted" role="status"><span class="sr-only">Analyse en cours...</span></div></div> ':(__p+=" ",warnings&&warnings.length>0&&(__p+=' <div class="alert alert-warning"><strong>Il y a des alertes</strong>',is_compatible&&(__p+=" mais vous pouvez quand même convertir votre site"),__p+='.<br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank">effectuer un point de sauvegarde</a> de son site.<br><br><ul> ',_.each(warnings,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",errors&&errors.length>0&&(__p+=' <div class="alert alert-danger"><strong>Il y a des erreurs bloquantes</strong>, vous ne pouvez pas convertir votre site dans l\'état actuel. Veuillez <a href="https://aide.kiubi.com/" target="_blank" class="alert-link">consulter la documentation en ligne</a> afin de corriger ces erreurs.<br><br><ul> ',_.each(errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",is_compatible&&0==warnings.length&&0==errors.length&&(__p+=' <div class="alert alert-info"><strong>Les site est prêt à être converti.</strong><br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank" class="alert-link">effectuer un point de sauvegarde</a> de son site.</div> '),__p+=" ",is_compatible&&(__p+=' <form><div class="form-group"><label>Zone par défaut</label><p>Choisissez une zone par défaut à laquelle les billets du site web vont être assignés.</p><div class="form-check"><select data-style="selectify" name="zone"> ',_.each(zones,function(e){__p+=' <option value="'+(null==(__t=e.id)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></form> "),__p+=" "),__p+=' </div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button> ',is_compatible&&(__p+=' <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Convertir</button> '),__p+=" </div></div> "):__p+=' <div class="alert alert-success"><strong>Conversion réussie</strong>, la gestion des composants est activé sur le site !</div><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> ',__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],593:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/design-generalites.html" class="md-icon md-help float-right" target="_blank"></a> Le thème graphique personnalisé permet de créer un look sur mesure pour votre un site Internet, en vous donnant <strong>un accès complet aux templates</strong> qui le composent. Aucune limitation graphique et technique particulières ne vous sont alors imposées.<br><br>Afin de répondre aux exigences de qualité et de performance d\'un site Internet professionnel, <strong>la maîtrise des standards du Web</strong> tels que le HTML, le CSS et le Javascript est nécessaire. Le <a href="https://aide.kiubi.com/design-generalites.html" target="_blank">guide du webdesigner</a> est à votre disposition pour vous aider à exploiter les très nombreux possibilités de personnalisation offertes par Kiubi.<br><br>Activer le thème graphique personnalisé va également <strong>réinitialiser tous les fichiers</strong> de votre espace FTP. Nous vous conseillons avant son l\'activation de <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration du thème</h1></header><div class="post-content"><div class="form-group"><label class="required" for="name">Intitulé du thème</label><input class="form-control" id="name" name="name" value="" placeholder="Intitulé du thème tel qu\'il apparaîtra dans la console d\'administration"></div><div class="form-group"><label>Mise en page</label><div class="radio"><input name="reuse_layouts" id="reuse_layouts1" value="1" checked="checked" type="radio"><label for="reuse_layouts1" class="">Conserver la mise en page actuelle qui est déjà personnalisée pour ce site</label><p class="ml-4">Recommandé si le thème à copier est <em>identique</em> au thème par défaut</p></div><div class="radio"><input name="reuse_layouts" id="reuse_layouts0" value="0" type="radio"><label for="reuse_layouts0" class="">Remplacer la mise en page actuelle par la mise en page par défaut du thème</label><p class="ml-4">Recommandé si le thème à copier est <em>différent</em> du thème par défaut</p></div></div><div class="row"><div class="col-4"><div class="form-group"><label for="code">Thème à copier</label><select id="code" name="code" data-style="selectify"> ',_.each(themes,function(e){__p+=' <option value="'+(null==(__t=e.code)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-lg btn-primary btn-cancel" href="/themes">Retour</a> <button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],594:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article post-article-empty text-center"><header class="post-header"><h1>Cette page n\'est pas disponible</h1></header><div class="post-content"><p class="lead">La page que vous cherchez à consulter n\'est pas adaptée à votre périphérique. <span class="md-icon md-mobile-off d-block mt-5"></span></p></div><footer class="post-footer"></footer></article> ',0==step?__p+=' <form><div class="alert alert-warning" role="alert">Grâce au système d\'import de thèmes graphiques de Kiubi, vous pouvez importer d\'un clic l\'ensemble d\'un thème graphique existant. Une fois ajouté à votre site, vous pouvez le personnaliser à votre convenance.<br><br><span class="text-danger">Attention, l\'import d\'un nouveau thème va <strong>modifier le contenu et le thème graphique</strong> actuels du site. Nous vous recommandons <strong>avant tout import de thème</strong> de <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</span></div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label>Fichier d\'import (format .thm)</label><div data-role="file"></div></div><div class="form-group"><label>Importer le contenu</label><div class="form-check"><input name="with_content" id="with_content1" value="1" type="radio"><label for="with_content1">Oui, je souhaite remplacer le contenu actuel du site par celui du thème</label><p class="ml-4">Cette action <em>supprime</em> le contenu actuel du site (billets, pages, blog, produits, médiathèque, thème graphique, etc.)</p><input name="with_content" id="with_content0" value="0" checked="checked" type="radio"><label for="with_content0">Non, je souhaite conserver le contenu actuel du site</label><p class="ml-4">Cette action <em>conserve</em> le contenu actuel du site mais peut nécessiter de devoir reconfigurer manuellement les types de billets et de produits ainsi que les mises en pages</p></div></div><div class="form-group"><div class="checkbox"><input id="copyrights_acquired" name="copyrights_acquired" value="1" type="checkbox"><label for="copyrights_acquired">Je reconnais avoir acquis l\'ensemble des droits nécessaires à l\'utilisation des éléments importés</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-success btn-save ml-auto" data-role="save">Importer</button></div></div> ':(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans le fichier.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, le thème a été importé !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-lg btn-primary btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],595:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Thèmes</h2><ul class="nav nav-sidebar flex-column"><li class="nav-item"><a class="nav-link" href="/themes">Thème graphique</a></li><li class="nav-item"><a class="nav-link" href="/themes/import">Importer un thème</a></li></ul>';return __p};
},{"undefined":undefined}],596:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article post-article-empty text-center"><header class="post-header"><h1>Cette page n\'est pas disponible</h1></header><div class="post-content"><p class="lead">La page que vous cherchez à consulter n\'est pas adaptée à votre périphérique. <span class="md-icon md-mobile-off d-block mt-5"></span></p></div><footer class="post-footer"></footer></article><article class="post-article bg-theme"><header class="post-header"><h1>'+(null==(__t=theme.name)?"":_.escape(__t))+'</h1></header><div class="post-content"><div class="btn-group ml-4 float-right" role="group"> ',__p+="theme"==theme.code?' <a class="btn btn-lg btn-success" href="#" role="button" data-role="default">Revenir en thème par défaut</a> ':' <a class="btn btn-lg btn-success" href="#" role="button" data-role="custom">Passer en thème personnalisé</a> ',__p+=' <button type="button" class="btn btn-lg btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu dropdown-menu-right"> ',theme.author_url&&(__p+=' <li><a class="dropdown-item" href="'+(null==(__t=theme.author_url)?"":_.escape(__t))+'" target="_blank">Site web de l\'auteur</a></li> '),__p+=" ",theme.author_email&&(__p+=' <li><a class="dropdown-item" href="mailto:'+(null==(__t=theme.author_email)?"":_.escape(__t))+"\">Contacter l'auteur</a></li> "),__p+="  ",theme_download&&(__p+=' <li><a class="dropdown-item" href="'+(null==(__t=theme_download)?"":_.escape(__t))+'" target="_blank">Télécharger les fichiers du thème</a></li> '),__p+=" </ul></div> ",__p+="theme"==theme.code?" <p>Vous utilisez un thème graphique personnalisé. Vous avez accès à tous les templates qui composent le thème pour créer un look sur mesure.</p> ":" <p>Vous utilisez le thème graphique par défaut. Vous pouvez créer un look sur mesure en utilisant un thème graphique personnalisé.</p> ",__p+=' <div class="devises"><div class="desktop"><div class="screen"> ',"theme"==theme.code&&(__p+=' <div class="md-icon md-code"></div> '),__p+=' <img src="'+(null==(__t=theme_img)?"":_.escape(__t))+'"></div><div class="screen-footer"></div><div class="stand"></div></div></div></div><footer class="post-footer"></footer></article> ',theme.variants&&theme.variants.length>0&&(__p+=' <article class="post-article"><header class="post-header"><h1>Variantes du thème</h1></header><div class="post-content"><div data-toggle="buttons" class="row select-variants"> ',_.each(theme.variants,function(e){__p+=' <div class="col-3"><label class="btn btn-variante d-flex align-items-stretch '+(null==(__t=e.is_enabled?"active":"")?"":__t)+'" data-role="select-variant" data-id="'+(null==(__t=e.id)?"":_.escape(__t))+'"><input name="select-variant" value="" autocomplete="off" type="radio"> <span class="variante" style="background-color: '+(null==(__t=e.colors.color1)?"":_.escape(__t))+'"></span> <span class="variante" style="background-color: '+(null==(__t=e.colors.color2)?"":_.escape(__t))+'"></span> <span class="variante" style="background-color: '+(null==(__t=e.colors.color3)?"":_.escape(__t))+'"></span> <span class="variante" style="background-color: '+(null==(__t=e.colors.color4)?"":_.escape(__t))+'"></span></label></div> '}),__p+=' </div></div><footer class="post-footer"></footer></article> '),__p+=" ",show_conversion&&(__p+=' <article class="post-article"><header class="post-header"><h1>Activer la gestion des composants et des symboles</h1></header><div class="post-content"><p>Votre site ne profite pas du système de composants et de symboles qui permet de gérer plus efficacement les contenus de vos pages.</p><p>Si votre thème graphique est déjà compatible, vous pouvez lancer la migration de votre site. Dans le cas contraire, l\'analyse du thème vous indiquera les modifications minimales à apporter pour le rendre compatible.</p><a class="btn btn-lg btn-success" href="/themes/conversion" role="button">Analyser le thème</a></div><footer class="post-footer"></footer></article> '),__p+=" ","theme"==theme.code&&(__p+=" ",show_export&&(__p+=' <article class="post-article"><header class="post-header"><h1>Export de thème - <span class="badge badge-warning">beta</span></h1></header><div class="post-content"><p>Vous pouvez exporter ce thème personnalisé et le contenu du site pour l\'importer dans un autre.</p><button type="button" class="btn btn-lg btn-success" data-role="export">Exporter le thème</button></div><footer class="post-footer"></footer></article> '),__p+=' <article class="post-article"><header class="post-header"><h1>Accès aux templates</h1></header><div class="post-content"><p>Pour personnaliser le thème, vous devez vous connecter à votre espace FTP. Le <a href="https://aide.kiubi.com/design-generalites.html" target="_blank">guide du webdesigner</a> est à votre disposition pour vous aider à exploiter les possibilités de personnalisation offertes par Kiubi.</p><div class="row"><div class="col-3"><label for="">Adresse de l\'hôte :</label></div><div class="col-9"><p>'+(null==(__t=ftp.host)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-3"><label for="">Port :</label></div><div class="col-9"><p>'+(null==(__t=ftp.port)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-3"><label for="">Nom d\'utilisateur :</label></div><div class="col-9"><p>'+(null==(__t=ftp.login)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-3"><label for="">Mot de passe :</label></div><div class="col-9"><p><span style="display: none" data-role="password-mask">'+(null==(__t=ftp.password)?"":_.escape(__t))+'</span><a data-role="password-toggle" href="#">Afficher le mot de passe</a></p></div></div><div class="row"><div class="col-3"><label for="">Répertoire racine :</label></div><div class="col-9"><p>/theme/</p></div></div></div><footer class="post-footer"></footer></article> '),__p+=' <article class="post-article"><header class="post-header"><h1>Création d\'un thème personnalisé</h1></header><div class="post-content"><div class="row"><div class="col-7"><p>Le thème graphique de votre site est 100% personnalisable. Vous pouvez librement créer, modifier et paramétrer chaque templates, chaque widgets.<br><a class="btn btn-primary mt-3" href="https://aide.kiubi.com/design-generalites.html" target="_blank">Guide du webdesigner</a></p><p>Vous pouvez télécharger la dernière version de chacun des thèmes graphiques fournis par Kiubi et suivre les mises à jour qui y sont apportées.<br><a class="btn btn-primary mt-3" href="https://aide.kiubi.com/changelog.html" target="_blank">Versions des thèmes</a></p></div><div class="col-5 text-right"><p><img src="assets/img/illustration_theme_and_co.png"></p></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],597:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(27),Forms=require(608),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(592),className:"container",service:"themes",behaviors:[FormBehavior],loading:!1,step:null,initialize:function(e){this.mergeOptions(e,["model"]),this.loading=!0,this.step=0,this.listenTo(this.model,"fetch",this.onFetch),this.model.fetch({data:{type:"component"}}).done(function(){this.onFetch()}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this))},templateContext:function(){return{is_loading:this.loading,step:this.step}},onFetch:function(){this.loading=!1,this.render()},onSave:function(){var e=Forms.extractFields(["zone"],this);this.model.convert(e.zone).done(function(){this.step++,Session.site.fetch({data:{extra_fields:"scopes,features"}}),this.render()}.bind(this))}});
},{"27":27,"592":592,"608":608,"undefined":undefined}],598:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(27),Forms=require(608);module.exports=Marionette.View.extend({template:require(593),className:"container",service:"themes",behaviors:[FormBehavior],fields:["name","code","reuse_layouts"],initialize:function(e){this.mergeOptions(e,["collection"])},templateContext:function(){return{themes:_.filter(this.collection.toJSON(),function(e){return"theme"!=e.code})}},onSave:function(){return this.collection.createTheme(Forms.extractFields(this.fields,this))}});
},{"27":27,"593":593,"608":608,"undefined":undefined}],599:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Session=Backbone.Radio.channel("app").request("ctx:session"),FormBehavior=require(27),Forms=require(608),FileView=require(126);module.exports=Marionette.View.extend({template:require(594),className:"container alerte-rwd",service:"themes",behaviors:[FormBehavior],events:{"change input[type=file]":"dropFile"},regions:{file:{el:"div[data-role='file']",replaceElement:!0}},fields:["with_content","copyrights_acquired"],step:0,report:null,initialize:function(e){this.mergeOptions(e,["model"])},templateContext:function(){return{report:this.report,step:this.step}},onRender:function(){this.step>0||this.showChildView("file",new FileView)},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay();var i=Forms.extractFields(this.fields,this);return i.file=this.getChildView("file").getFile(),this.model["import"](i).done(function(e){this.step=1,this.report=e,this.report.errors&&0===this.report.errors.length&&Session.site.fetch({data:{extra_fields:"scopes,features"}}),this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.navigate("/themes")}else this.step=0,this.report=null,this.render()}});
},{"126":126,"27":27,"594":594,"608":608,"undefined":undefined}],600:[function(require,module,exports){
var Marionette=require("backbone.marionette"),ActiveLinksBehaviors=require(18);module.exports=Marionette.View.extend({template:require(595),service:"themes",behaviors:[ActiveLinksBehaviors]});
},{"18":18,"595":595,"undefined":undefined}],601:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(27),Forms=require(608),SelectifyBehavior=require(26),LoaderTpl=require(92),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(596),className:"container container-locked alerte-rwd",service:"themes",behaviors:[SelectifyBehavior],ui:{pwdBtn:'a[data-role="password-toggle"]',pwdMask:'span[data-role="password-mask"]',defaultBtn:'a[data-role="default"]',customBtn:'a[data-role="custom"]',selectVariant:'[data-role="select-variant"]',exportBtn:'[data-role="export"]'},events:{"click @ui.pwdBtn":function(){this.getUI("pwdBtn").hide(),this.getUI("pwdMask").show()},"click @ui.defaultBtn":function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay();var t=function(t){e.showErrorModal(t)};this.themes.fetch().then(function(){var n=this.themes.find(function(e){return"theme"!=e.get("code")});n||t("Aucun theme disponible"),this.themes.changeTheme(n.get("code")).done(function(t){this.current=t,this.render(),e.hideModal()}.bind(this)).fail(t)}.bind(this),t)},"click @ui.customBtn":function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay();var t=function(t){e.showErrorModal(t)};this.themes.fetch().then(function(){var n=this.themes.find(function(e){return"theme"==e.get("code")});n?this.themes.changeTheme("theme").done(function(t){this.current=t,this.render(),e.hideModal()}.bind(this)).fail(t):(e.navigate("/themes/custom"),e.hideModal())}.bind(this),t)},"click @ui.selectVariant":function(e){var t=Backbone.$(e.currentTarget).data("id");this.themes.changeThemeVariants(t).done(function(){}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this))},"click @ui.exportBtn":function(){var e=this.getUI("exportBtn");e.addClass("btn-load");var t=e.text();e.html(LoaderTpl()),this.themes.exportCustom().done(function(e){Backbone.Radio.channel("app").request("ctx:navigationController");window.open(e.url)}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this)).always(function(){e.removeClass("btn-load"),e.text(t)})}},initialize:function(e){this.mergeOptions(e,["ftp","current","themes"])},templateContext:function(){return{ftp:this.ftp.toJSON(),theme:this.current.toJSON(),theme_img:Session.convertThemePath("/themes/"+this.current.get("code")+"/illustration.jpg"),theme_download:"theme"==this.current.get("code")?null:Session.convertThemePath("/themes/"+this.current.get("code")+"/"+this.current.get("code")+".zip"),show_conversion:this.getOption("enableConversion"),show_export:this.getOption("enableExport")}}});
},{"26":26,"27":27,"596":596,"608":608,"92":92,"undefined":undefined}],602:[function(require,module,exports){
function updateTitle(e){if(0==e.length)return void(document.title="Kiubi");var i=e[e.length-1].title,t=Backbone.Radio.channel("app").request("ctx:session"),a=t?t.site.get("name"):"Kiubi";document.title=a+" • "+i}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),NavigationChannel=Backbone.Radio.channel("navigation"),SidebarView=require(121),SidebarMenuView=require(125),HeaderView=require(112),ModalView=require(137),OverlayView=Marionette.View.extend({template:require(92),tagName:"div",className:"overlay"}),Link=Backbone.Model.extend({defaults:{name:"",path:"/",className:"",type:"main",is_active:!1,scope:null,feature:null,is_enabled:!0}});module.exports=Marionette.Object.extend({layoutView:null,application:null,lockErrorModal:!1,initialize:function(e){this.mergeOptions(e,["layoutView","application"]),this.listenTo(this.application.session.site,"change:site",function(){var e=this.layoutView.getChildView("header");e&&updateTitle(e.links)}.bind(this));var i=Backbone.Radio.channel("app").request("ctx:notificationCenter");i&&this.listenTo(i,"update:unread",function(e){Backbone.$("link[rel*='icon']").each(function(i,t){0===e?t.href=t.href.replace("/favicon-notif.","/favicon."):t.href=t.href.replace("/favicon.","/favicon-notif.")})}.bind(this)),this.listenTo(NavigationChannel,"critical:error",function(e,i){this.showErrorModal(e)}.bind(this)),this.listenTo(NavigationChannel,"expired:login",function(e,i){this.navigate("/login")}.bind(this))},setBreadCrum:function(e){this.layoutView.getChildView("header")&&(this.layoutView.getChildView("header").setBreadCrum(e),updateTitle(e))},setHeaderActions:function(e){this.layoutView.getChildView("header")&&this.layoutView.getChildView("header").setActions(e)},setHeaderNavigation:function(e){this.layoutView.getChildView("header")&&this.layoutView.getChildView("header").setNavigation(e)},setHeaderTabs:function(e){this.layoutView.getChildView("header")&&this.layoutView.getChildView("header").setTabs(e)},refreshHeader:function(){this.layoutView.getChildView("header")&&this.layoutView.getChildView("header").render()},showHeader:function(){this.layoutView.showChildView("header",new HeaderView)},showSidebar:function(){var e=new Backbone.Collection;e.model=Link,e.add([{name:"Tableau de bord",path:"/",className:"md-home",is_active:!0},{name:"Site Web",path:"/cms",className:"md-website",scope:"site:cms"},{name:"Blog",path:"/blog",className:"md-blog",scope:"site:blog"},{name:"Catalogue",path:"/catalog",className:"md-product",scope:"site:catalog",feature:"catalog"},{name:"Commandes",path:"/checkout",className:"md-order",scope:"site:checkout",feature:"checkout"},{name:"Membres",path:"/customers",className:"md-member",scope:"site:account"},{name:"Modules",path:"/modules",className:"md-extension"},{name:"Mises en page",path:"/appearance",className:"md-layout",scope:"site:layout"},{name:"Thème graphique",path:"/themes",className:"md-theme",scope:"site:theme"},{name:"Médiathèque",path:"/media",className:"md-media",type:"tools"},{name:"Préférences",path:"/prefs",className:"md-settings",type:"tools",scope:"site:pref"}]),this.layoutView.showChildView("sidebar",new SidebarView({session:this.application.session,collection:e}))},hideSidebarMenu:function(){this.layoutView.lockMenu(),this.layoutView.getRegion("sidebarMenu").empty()},showSidebarMenu:function(){this.layoutView.showChildView("sidebarMenu",new SidebarMenuView({model:this.application.session.site}))},showSidebarMenuDetail:function(e){this.layoutView.getChildView("sidebarMenu")||this.showSidebarMenu();var i=this.layoutView.getChildView("sidebarMenu");i.showChildView("detail",e),i.service=e.service},getSidebarMenuDetail:function(){if(!this.layoutView.getChildView("sidebarMenu"))return null;var e=this.layoutView.getChildView("sidebarMenu");return e.getChildView("detail")},getSidebarMenuService:function(){return this.layoutView.getRegion("sidebarMenu")&&this.layoutView.getChildView("sidebarMenu")?this.layoutView.getChildView("sidebarMenu").service||null:null},showContent:function(e){try{this.layoutView.showChildView("content",e)}catch(i){console.error(i)}},getContent:function(){return this.layoutView.getChildView("content")},triggerContent:function(e,i){this.layoutView.getChildView("content")&&this.layoutView.getChildView("content").triggerMethod(e,i)},startAppContext:function(){this.layoutView.setAppContext(!0)},stopAppContext:function(){this.layoutView.setAppContext(!1)},showModal:function(e,i){this.layoutView.showChildView("modal",e),i&&setTimeout(this.hideModal.bind(this),i)},showInModal:function(e,i){e.getTabs&&(i.tabs=e.getTabs());var t=new ModalView(i);this.showModal(t),t.showChildView("content",e)},showErrorModal:function(e,i){if(!this.lockErrorModal){this.lockErrorModal=!0;var t;if(_.isString(e))t=e;else{if(e.handled)return;t=e.message?e.message:"Une erreur inattendue s'est produite",e.fields&&_.isArray(e.fields)&&e.fields.length>0&&(t+=" : <ul>"+_.reduce(e.fields,function(e,i){return e+"<li>"+i.message+"</li>"},"")+"</ul>")}var a=new ModalView({title:"Oups ! Une erreur est survenue.",modalClass:"modal-danger"});this.showModal(a,i),this.listenTo(a,"destroy",function(){this.lockErrorModal=!1});var o=Marionette.View.extend({template:_.template(t)});a.showChildView("content",new o)}},hideModal:function(){this.layoutView.getRegion("modal").empty()},showOverlay:function(e){this.showModal(new OverlayView,e)},navigate:function(e){this.application.navigate(e),this.scrollTop("fast")},getPath:function(){return document.location.pathname},notFound:function(e){this.application.router.controller.notFound(e)},scrollTop:function(e){e=e||"slow",Backbone.$("#content").animate({scrollTop:0},e)}});
},{"112":112,"121":121,"125":125,"137":137,"92":92,"undefined":undefined}],603:[function(require,module,exports){
function withoutNull(e){if(!e)return{};var r={};return _.each(e,function(e,t){null!==e&&void 0!==e&&(r[t]=e)}),r}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),$=require("jquery"),_=require("underscore"),NavigationChannel=Backbone.Radio.channel("navigation");void 0===Backbone.__sync&&(Backbone.__sync=Backbone.sync,Backbone.sync=function(e,r,t){return null!=t.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(t.data=t.attrs||r.toJSON(t)),t.data=withoutNull(t.data),Backbone.__sync(e,r,t)});var Errors={};Errors.E_UNKNOWN_RESOURCE=4401,Errors.E_MAINTENANCE=5300,Errors.E_SYS_UNEXPECTED_ERROR=5007,Errors.E_REQUEST_TOO_LARGE=413,Errors.E_ACCESS_ABUSE=4300,Errors.E_ACCESS_AUTH_NEEDED=4307,Errors.E_ACCESS_DENIED=4308,Errors.E_ACCESS_IDENTIFICATION_FAILED=4309,Errors.E_ACCESS_NOT_YOURS=4310,Errors.E_ACCESS_TOKEN=4311,Errors.E_ACCESS_INSUFFICIENT_SCOPE=4312,Errors.E_ACCESS_CLIENT_TOO_OLD=4313,Errors.E_ACCESS_UNKNOWN_USER=4314,Errors.E_ACCESS_REGISTRATION_NEEDED=4320,Errors.E_USER_REQUIRED_PARAMS=4001,Errors.E_USER_PARAMS_VALIDATION=4002,Errors.E_USER_PARAMS_ENCODING=4012;var Client=Marionette.Object.extend({current_site:null,api_version:1,api_url:"",version:1,initialize:function(e){this.access_token=null,this.max_post_size=8388608,this._rate_remaining=null;var r=Backbone.Radio.channel("app").request("ctx:config");this.api_version=r.get("api_version"),this.api_url=r.get("api"),this.version=r.get("client_version")},normalize_url:function(e){return 0!==e.indexOf("/")&&(e="/"+e),e=0===e.indexOf("/v"+this.api_version)?e.substring(1):"v"+this.api_version+e,e.indexOf(".json")==-1&&(e+=".json"),e.indexOf("/sites/@site/")>0&&this.current_site&&(e=e.replace("/sites/@site/","/sites/"+this.current_site+"/")),this.api_url+"/"+e},ajax:function(e,r){e=e||{};var t=e.headers||{};t["X-Client"]="Kiubi/"+this.version;var a=e.access_token||this.access_token||null;if(a&&(t.Authorization="token "+a),e.headers=t,e.url=this.normalize_url(e.url),e.type&&!e.method&&(e.method=e.type),delete e.type,"PATCH"==e.method&&(e.method="PUT"),e.data instanceof FormData)"PUT"!=e.method&&"DELETE"!=e.method||(e.data.append("method",e.method),e.method="POST");else if(e.data&&_.size(e.data)){"PUT"!=e.method&&"DELETE"!=e.method||(e.data.method=e.method,e.method="POST");var n=_.filter(e.data,function(e){return e instanceof File});if(0==n.length)e.contentType="application/x-www-form-urlencoded",e.data=$.param(e.data);else{e.contentType=!1;var i=new FormData;_.each(e.data,function(e,r){i.append(r,e)}),e.data=i}}else e.data=null;return this.decorationAjax(Backbone.$.ajax.apply(Backbone.$,[e,r]),e)},decorationAjax:function(e,r){var t=Backbone.$.Deferred(),a=this;return e.done(function(e){return e.meta&&200!=e.meta.status_code?void t.reject(e.error||{},e.meta||{},e.data||{}):void t.resolve(e.data||{},e.meta||{})}),e.fail(function(e){var a={};if(e.responseText)try{a=Backbone.$.parseJSON(e.responseText)}catch(n){a.error={code:Errors.E_SYS_UNEXPECTED_ERROR,message:"Une erreur inattendue s’est produite",fields:[]}}503!=e.status||r.disableErrorHandling||(NavigationChannel.trigger("critical:error",a.error,a.meta),a.error.handled=!0),403!=e.status||r.disableErrorHandling||!a.error||a.error.code!=Errors.E_ACCESS_TOKEN&&a.error.code!=Errors.E_ACCESS_AUTH_NEEDED||(NavigationChannel.trigger("expired:login",a.error,a.meta),a.error.handled=!0),t.reject.apply(this,[a.error||{},a.meta||{},a.data||{}])}),e.always(function(e){if(!e.meta)try{e=$.parseJSON(e.responseText)}catch(r){return}a._rate_remaining=e.meta.rate_remaining}),t.promise()},query:function(e,r,t,a){return this.ajax($.extend({type:e,dataType:"json",data:t||{},url:r},a||{}))},post:function(e,r){return $.ajaxSetup({cache:!1}),this.query("POST",e,r)},get:function(e,r,t){return $.ajaxSetup({cache:!0}),this.query("GET",e,r,t)},put:function(e,r){return $.ajaxSetup({cache:!1}),this.query("PUT",e,r)},"delete":function(e,r){return $.ajaxSetup({cache:!1}),this.query("DELETE",e,r)},login:function(e,r,t){return t=$.extend(t||{},{login:e,password:r}),this.post("auth/authorize",t)},logout:function(){return this["delete"]("auth/session")},getFirstPage:function(e){return e&&e.link&&e.link.first_page?this.crawl(e.link.first_page):this.fail()},getPreviousPage:function(e){return e&&e.link&&e.link.previous_page?this.crawl(e.link.previous_page):this.fail()},getNextPage:function(e){return e&&e.link&&e.link.next_page?this.crawl(e.link.next_page):this.fail()},getLastPage:function(e){return e&&e.link&&e.link.last_page?this.crawl(e.link.last_page):this.fail()},getPage:function(e,r){return e&&e.link&&e.link.first_page?this.crawl(e.link.first_page+"&page="+parseInt(r)):this.fail()},hasNextPage:function(e){return e&&e.link&&e.link.next_page},hasPreviousPage:function(e){return e&&e.link&&e.link.previous_page},crawl:function(e){return e=e.replace(this.base+"v"+this.api_version,""),this.get(e)},fail:function(){var e=new $.Deferred;return e.reject({},{},{}),e.promise()},escape:function(e){for(var r="",t="€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ",a=e.length,n=new Array(a),i=0;i<a;i++){var o=t.indexOf(e[i]);o<0?n[i]=e[i]:n[i]=r.charAt(o)}return window.escape(n.join(""))},getRateRemaining:function(e){if(e||void 0===this._rate_remaining){var r=$.ajax({dataType:"json",url:this.base+"v"+this.api_version+"/rate",async:!1});try{var t=$.parseJSON(r.responseText).meta;this._rate_remaining=t&&t.rate_remaining}catch(a){return-1}}return this._rate_remaining}});module.exports=new Client,module.exports.Errors=Errors;
},{"undefined":undefined}],604:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),api=require(603),NavigationController=require(602),LayoutView=require(117),AppRouter=require(52);module.exports=Marionette.Application.extend({region:"body",serviceProvider:null,session:null,notificationCenter:null,initialize:function(i){console.info("Initialize Application"),this.mergeOptions(i,["session","serviceProvider"]),this.serviceProvider.registerApp(this),Backbone.ajax=function(){return api.ajax.apply(api,arguments)};var e=this,t=this.serviceProvider.getNotificationCenter(),n=new LayoutView({notificationCollection:t?t.collection:null});n.render(),this.navigationController=new NavigationController({layoutView:n,application:this}),this.router=new AppRouter({application:this}),n.on("navigate",function(i,t){e.navigationController.navigate(i)}),this.listenTo(this.session,"logout",function(){this.navigationController.navigate("/login")}.bind(this)),t&&(this.listenTo(this.session.site,"change:site",function(){t.register(this.session.storage.getItem("AccesToken"),this.session.site.get("code_site"))}.bind(this)),this.listenTo(this.session,"logout",function(){t.close()}.bind(this)))},onStart:function(i){console.info("Starting Application"),this.navigationController.showSidebar(),this.navigationController.showSidebarMenu(),this.navigationController.showHeader(),Backbone.history.started||Backbone.history.start({pushState:!0}),Backbone.Radio.channel("navigation").trigger("change:url",{path:window.location.pathname+window.location.search});var e=this.serviceProvider.getKeyListener();e.register_combo({keys:"meta s",is_exclusive:!0,on_keydown:function(){var i=Backbone.Radio.channel("controller");i.trigger("meta:s:shortcut")}})},navigate:function(i,e){this.router.navigate(i,_.extend({trigger:!0},e)),Backbone.Radio.channel("navigation").trigger("change:url",{path:i})}});
},{"117":117,"52":52,"602":602,"603":603,"undefined":undefined}],605:[function(require,module,exports){
var Marionette=require("backbone.marionette");module.exports=Marionette.Object.extend({memory:{},clear:function(){this.memory={}},set:function(e,t){this.memory[e]=t},get:function(e){return"undefined"!=typeof this.memory[e]?this.memory[e]:null}});
},{"undefined":undefined}],606:[function(require,module,exports){
function bulkAction(t,e,i,n){var a=_.compact(_.map(i,function(e){return t.get(e)}));return Backbone.$.when.apply(Backbone.$,a.map(e)).done(function(a){t.trigger(n?"bulk:"+n:"bulk",{action:e,ids:i})})}function bulkGroupAction(t,e,i,n,a){i=_.compact(i),n<1&&(n=1);for(var u=[],o=0;o<i.length;o+=n){var l=i.slice(o,o+n);u.push(e(l))}return Backbone.$.when.apply(Backbone.$,u).then(function(){return t.trigger(a?"bulk:"+a:"bulk",{action:e,ids:i}),i})}var Backbone=require("backbone"),_=require("underscore"),Option=Backbone.Model.extend({idAttribute:"value",defaults:{label:"",value:null,indent:null,selected:!1,extraClassname:null,is_group:!1}}),SelectCollection=Backbone.Collection.extend({model:Option,selected:function(){return this.findWhere({selected:!0})},selectIndex:function(t){var e=this.at(t);return!e||e.get("selected")?null:(this.each(function(e,i){e.set("selected",i===t,{silent:!0})}),this.trigger("update"),e)}}),KiubiModel=Backbone.Model.extend({previewLink:null,meta:null,parse:function(t){if(this.meta={},"data"in t){if(null===t.data)return{};if(_.isNumber(t.data)){var e={};return e[this.idAttribute]=t.data,e}return t.meta&&(this.meta=t.meta,this.parseMeta(this.meta),t.meta.link&&t.meta.link.preview&&(this.previewLink=t.meta.link.preview)),t.data}return t},parseMeta:function(t){},duplicate:function(t){var e=this,i=t||{};return i[this.idAttribute]||(i[this.idAttribute]=this.get(this.idAttribute)),Backbone.ajax({url:_.isFunction(this.urlRoot)?this.urlRoot():this.urlRoot,method:"POST",data:i}).then(function(t,i){var n=e.clone();return n.set(n.parse({data:t,meta:i})),n})}}),KiubiCollection=Backbone.Collection.extend({meta:null,parse:function(t){return this.meta=t.meta,t.data},fetchNext:function(){return!!(this.meta&&this.meta.link&&this.meta.link.next_page)&&this.fetch({url:this.meta.link.next_page,remove:!1})},bulkDelete:function(t,e){return bulkAction(this,function(t){return t.destroy()},t,e)},getQuota:function(){return this.meta&&this.meta.quota&&this.meta.quota.limit?this.meta.quota.limit:0},getEstimatedUsage:function(){return this.meta&&this.meta.quota&&this.meta.quota.usage?this.meta.quota.usage:0}});module.exports.bulkAction=bulkAction,module.exports.bulkGroupAction=bulkGroupAction,module.exports.SelectCollection=SelectCollection,module.exports.KiubiModel=KiubiModel,module.exports.KiubiCollection=KiubiCollection;
},{"undefined":undefined}],607:[function(require,module,exports){
function formatDate(t){return""==t?t:moment(t,"YYYY-MM-DD").format("DD/MM/YYYY")}function formatDateTime(t){return""==t?t:moment(t,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY HH:mm:ss")}function formatLongDate(t){return""==t?t:moment(t,"YYYY-MM-DD").format("DD MMM YYYY")}function formatLongDateTime(t){return""==t?t:moment(t,"YYYY-MM-DD HH:mm:ss").format("DD MMM YYYY [à] HH[h]mm")}function formatBytes(t,r){if(0==t)return"0 octets";var e=1024,o=r||2,n=["octets","Ko","Mo","Go"],a=Math.floor(Math.log(t)/Math.log(e));return _string.numberFormat(t/Math.pow(e,a),o,","," ")+" "+n[a]}function formatFloat(t,r,e){return _.isString(t)&&(t=unformatFloat(t)),null===t?"":(r="undefined"==typeof r?2:r,e=e||"",_string.numberFormat(t,r,",",e))}function unformatFloat(t){if(null===t||""===t)return null;t=t.replace(",","."),t=t.replace(" ","");var r=parseFloat(t);return isNaN(r)?null:r}function currencyEntity(t){switch(t){case"EUR":return"&euro;";case"GBP":return"&pound;";case"CAD":case"USD":return"$";default:return t}}function plural(t,r,e){return(t>1?e:r).replace("%d",t)}var Backbone=require("backbone"),_=require("underscore"),_string=require("underscore.string"),moment=require("moment");module.exports.formatDate=formatDate,module.exports.formatDateTime=formatDateTime,module.exports.formatLongDate=formatLongDate,module.exports.formatLongDateTime=formatLongDateTime,module.exports.formatBytes=formatBytes,module.exports.formatFloat=formatFloat,module.exports.unformatFloat=unformatFloat,module.exports.currencyEntity=currencyEntity,module.exports.plural=plural;
},{"undefined":undefined}],608:[function(require,module,exports){
function extractFields(e,r,t){return t=_.defaults(t||{},{selector:"form"}),extractFormFields(e,Backbone.$(t.selector,r.el),t)}function extractFormFields(e,r,t){t=_.defaults(t||{},{autoCast:!0});var s=_.reduce(r,function(e,r){return _.extend(e,serialize(r,{hash:!0,empty:!0}))},{}),o=_.pick(s,e);return _.mapObject(o,function(e,r){return t.autoCast&&("is_"!==r.substring(0,3)||"1"!=e&&"0"!=e?"_id"===r.substring(r.length-3)&&""!==e&&(e=parseInt(e)):e="1"==e),_.isArray(e)&&(e=_.filter(e,function(e){return!_.isString(e)||e.length>0})),e})}function displayErrors(e,r,t,s){if(s=_.defaults(s||{},{showErrors:!1}),!e||!e.message)return r.text("Erreur inattendue"),void r.show();if(s.showErrors){var o="<p>"+e.message+"</p>";e.fields.length&&(o+="<ul>"+_.reduce(e.fields,function(e,r){return e.push("<li>"+r.message+"</li>"),e},[]).join("")+"</ul>"),r.html(o)}else r.text(e.message);r.show(),e&&e.fields&&_(e.fields).each(function(e){Backbone.$("input[name='"+e.field+"'], textarea[name='"+e.field+"'], select[name='"+e.field+"']",t).parents(".form-group").addClass("has-error")})}function clearErrors(e,r){e.hide(),Backbone.$("input, textarea, select",r).parents(".form-group").removeClass("has-error")}function tmpSlug(){var e=1e7,r=99999999;return"________"+(Math.floor(Math.random()*(r-e+1))+e)}function isTmpSlug(e){return null!==e.match(/^_{8}[0-9]{8}/)}var Backbone=require("backbone"),_=require("underscore"),serialize=require("form-serialize");module.exports.extractFields=extractFields,module.exports.extractFormFields=extractFormFields,module.exports.displayErrors=displayErrors,module.exports.clearErrors=clearErrors,module.exports.tmpSlug=tmpSlug,module.exports.isTmpSlug=isTmpSlug;
},{"undefined":undefined}],609:[function(require,module,exports){
function retryDelay(e){return Math.min(1e3*e,3e4)}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Activities=require(35),NotificationModel=Backbone.Model.extend({defaults:{type:null,type_id:null,label:"",delay:5e3},getTitle:function(){switch(this.get("type")){case 1:return"Nouvelle commande à traiter";case 2:return"Nouveau commentaire dans le blog";case 3:return"Nouvelle évaluation de produit";case 4:return"Nouvelle réponse à un formulaire";default:return"Notification"}},getURL:function(){switch(this.get("type")){case 1:return"/checkout/orders/"+this.get("type_id");case 2:return"/blog/posts/"+this.get("type_id")+"/comments";case 3:return"/catalog/products/"+this.get("type_id")+"/comments";case 4:return"/forms/inbox?id="+this.get("type_id");default:return null}},getCode:function(){switch(this.get("type")){case 1:return"order";case 2:return"comment";case 3:return"evaluation";case 4:return"response";default:return null}}}),NotificationCollection=Backbone.Collection.extend({model:NotificationModel});module.exports=Marionette.Object.extend({connection:null,collection:null,webSocket:null,current:null,retryCount:null,initialize:function(e){this.webSocket=e,this.collection=new NotificationCollection,this.connect(),this.current=null,this.retryCount=0},register:function(e,t){this.current={code_site:t,token:e},this.send({action:"join",site:t,token:e})},"switch":function(e){this.current.code_site=e,this.notification.send({action:"switch",site:e})},connect:function(){if(this.webSocket){this.connection=new WebSocket(this.webSocket);var e=Backbone.$.Deferred();return this.connection.onopen=function(t){this.retryCount=0,console.log("NotificationCenter : connection established !"),e.resolve()}.bind(this),this.connection.onerror=function(t){e.reject()}.bind(this),this.connection.onclose=function(t){this.retryCount++,console.log("NotificationCenter : connection closed !"),"pending"===e.state()&&e.reject(),setTimeout(function(){console.log("NotificationCenter: try reconnecting..."),this.connect().then(function(){this.register(this.current.token,this.current.code_site)}.bind(this))}.bind(this),retryDelay(this.retryCount))}.bind(this),this.connection.onmessage=function(e){var t=JSON.parse(e.data);if(t.action){var n=t.action+":message";this.triggerMethod(n,t)}else this.triggerMethod("message",t)}.bind(this),e}},close:function(){this.connection&&this.connection.close()},send:function(e){this.connection?1==this.connection.readyState&&this.connection.send(JSON.stringify(e)):this.connect().done(function(){1==this.connection.readyState&&this.connection.send(JSON.stringify(e))}.bind(this))},onPushMessage:function(e){if(e.type){if(this.collection.length>10)return void console.log("NotificationCenter : overflow");var t=this.collection.add({type:e.type,label:e.label,type_id:e.id},{at:0});t.getCode()&&(this.trigger("notification:"+t.getCode()),this.trigger("update:unread",1)),setTimeout(function(){this.collection.remove(t)}.bind(this),t.get("delay")+1e3)}},markAsRead:function(){var e=Backbone.Radio.channel("app").request("ctx:session");e.storePref("lastReadDate",Math.floor(Date.now()/1e3)),this.trigger("update:unread",0)},refreshCount:function(){var e=Backbone.Radio.channel("app").request("ctx:session"),t=e.getPref("lastReadDate");if(null===t)return e.storePref("lastReadDate",Math.floor(Date.now()/1e3)),void this.trigger("update:unread",0);var n=new Activities;n.countActivitiesSince(t).done(function(e){this.trigger("update:unread",e)}.bind(this))}});
},{"35":35,"undefined":undefined}],610:[function(require,module,exports){
var Marionette=require("backbone.marionette");module.exports=Marionette.Object.extend({channelName:"app",radioRequests:{"ctx:app":"getApp","ctx:session":"getSession","ctx:config":"getConfig","ctx:navigationController":"getNavigationController","ctx:keyListener":"getKeyListener","ctx:notificationCenter":"getNotificationCenter"},app:null,config:null,keyListener:null,notificationCenter:null,registerApp:function(t){this.app=t},getApp:function(){return this.app},registerConfig:function(t){this.config=t},getConfig:function(){return this.config},getSession:function(){return this.app.session},getNavigationController:function(){return this.app.navigationController},registerKeyListener:function(t){this.keyListener=t},getKeyListener:function(){return this.keyListener},registerNotificationCenter:function(t){this.notificationCenter=t},getNotificationCenter:function(){return this.notificationCenter}});
},{"undefined":undefined}],611:[function(require,module,exports){
require("jquery-ui/ui/version"),require("jquery-ui/ui/ie"),require("jquery-ui/ui/scroll-parent"),require("jquery-ui/ui/safe-blur"),require("jquery-ui/ui/safe-active-element"),require("jquery-ui/ui/plugin"),require("jquery-ui/ui/data"),require("jquery-ui/ui/widget"),require("jquery-ui/ui/widgets/mouse"),require("jquery-ui/ui/widgets/sortable"),require("jquery-ui/ui/widgets/draggable");
},{"undefined":undefined}],612:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");const ObjectAPI=["_setOptions","mergeOptions","getOption"],ClassOptions=["appRoutes","controller"];var AppRouter=Backbone.Router.extend({constructor:function(t){this._setOptions(t),this.mergeOptions(t,ClassOptions),Backbone.Router.apply(this,arguments);var e=this.appRoutes,o=this._getController();this.processAppRoutes(o,e)},appRoute:function(t,e){var o=this._getController();return this._addAppRoute(o,t,e),this},processAppRoutes:function(t,e){var o=this;if(!e)return this;var r=_.keys(e).reverse();return _.each(r,function(r){o._addAppRoute(t,r,e[r])}),this},_getController:function(){return this.controller},_addAppRoute:function(t,e,o){var r=t[o];if(!r)throw new Marionette.Error('Method "'+o+'" was not found on the controller');var n;n=_.isFunction(this.onRoute)?function(){this.onRoute(o)!==!1&&r.apply(t,arguments)}.bind(this):_.bind(r,t),this.route(e,o,n)}});_.extend(AppRouter.prototype,_.pick(Marionette.Object.prototype,ObjectAPI)),module.exports=AppRouter;
},{"undefined":undefined}],613:[function(require,module,exports){
var Marionette=require("backbone.marionette"),$=require("jquery"),Cache=function(){var e={};return{clear:function(){e={}},set:function(t,a){e[t]=a},get:function(t){return"undefined"!=typeof e[t]&&e[t]}}}(),Translate=Marionette.Object.extend({initialize:function(e){switch(this.mergeOptions(e,["lang"]),this.lang){case"fr":var t=require("moment");t.defineLocale(this.lang,require(143)),t.locale(this.lang)}},load:function(e){var t=Cache.get("locales_"+e);if(t===!1){try{t=require("locales_"+e+"/messages")}catch(a){t={}}Cache.set("locales_"+e,t)}return t},translate:function(e,t){var a=this.load(this.lang);return a[e]?a[e][1]:e},format_price:function(e,t){return $.isNumeric(e)?"EUR"==t?e.toFixed(2)+"€":e.toFixed(2)+" "+t:e}}),sharedInstance=new Translate({lang:$("html").attr("lang")||"en"});module.exports=sharedInstance,module.exports.translate=Translate.prototype.translate.bind(sharedInstance),module.exports.format_price=Translate.prototype.format_price.bind(sharedInstance),module.exports.Translate=Translate;
},{"143":143,"undefined":undefined}]},{},[17])

