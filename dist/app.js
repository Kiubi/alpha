(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function placeHoldersCount(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===o[r-2]?2:"="===o[r-1]?1:0}function byteLength(o){return 3*o.length/4-placeHoldersCount(o)}function toByteArray(o){var r,e,t,u,n,p=o.length;u=placeHoldersCount(o),n=new Arr(3*p/4-u),e=u>0?p-4:p;var a=0;for(r=0;r<e;r+=4)t=revLookup[o.charCodeAt(r)]<<18|revLookup[o.charCodeAt(r+1)]<<12|revLookup[o.charCodeAt(r+2)]<<6|revLookup[o.charCodeAt(r+3)],n[a++]=t>>16&255,n[a++]=t>>8&255,n[a++]=255&t;return 2===u?(t=revLookup[o.charCodeAt(r)]<<2|revLookup[o.charCodeAt(r+1)]>>4,n[a++]=255&t):1===u&&(t=revLookup[o.charCodeAt(r)]<<10|revLookup[o.charCodeAt(r+1)]<<4|revLookup[o.charCodeAt(r+2)]>>2,n[a++]=t>>8&255,n[a++]=255&t),n}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]}function encodeChunk(o,r,e){for(var t,u=[],n=r;n<e;n+=3)t=(o[n]<<16)+(o[n+1]<<8)+o[n+2],u.push(tripletToBase64(t));return u.join("")}function fromByteArray(o){for(var r,e=o.length,t=e%3,u="",n=[],p=16383,a=0,l=e-t;a<l;a+=p)n.push(encodeChunk(o,a,a+p>l?l:a+p));return 1===t?(r=o[e-1],u+=lookup[r>>2],u+=lookup[r<<4&63],u+="=="):2===t&&(r=(o[e-2]<<8)+o[e-1],u+=lookup[r>>10],u+=lookup[r>>4&63],u+=lookup[r<<2&63],u+="="),n.push(u),n.join("")}exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;
},{}],2:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Buffer.prototype):(null===t&&(t=new Buffer(e)),t.length=e),t}function Buffer(t,e,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,e,r)}function from(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?fromArrayBuffer(t,e,r,n):"string"==typeof e?fromString(t,e,r):fromObject(t,e)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc(t,e,r,n){return assertSize(e),e<=0?createBuffer(t,e):void 0!==r?"string"==typeof n?createBuffer(t,e).fill(r,n):createBuffer(t,e).fill(r):createBuffer(t,e)}function allocUnsafe(t,e){if(assertSize(e),t=createBuffer(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function fromString(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(e,r);t=createBuffer(t,n);var f=t.write(e,r);return f!==n&&(t=t.slice(0,f)),t}function fromArrayLike(t,e){var r=e.length<0?0:0|checked(e.length);t=createBuffer(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),Buffer.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Buffer.prototype):t=fromArrayLike(t,e),t}function fromObject(t,e){if(Buffer.isBuffer(e)){var r=0|checked(e.length);return t=createBuffer(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&isArray(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t){return+t!=t&&(t=0),Buffer.alloc(+t)}function byteLength(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"latin1":case"binary":return latin1Slice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function swap(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function bidirectionalIndexOf(t,e,r,n,f){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=f?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(f)return-1;r=t.length-1}else if(r<0){if(!f)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:arrayIndexOf(t,e,r,n,f);if("number"==typeof e)return e=255&e,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):arrayIndexOf(t,[e],r,n,f);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,r,n,f){function i(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,u=t.length,s=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,s/=2,r/=2}var a;if(f){var h=-1;for(a=r;a<u;a++)if(i(t,a)===i(e,h===-1?0:a-h)){if(h===-1&&(h=a),a-h+1===s)return h*o}else h!==-1&&(a-=a-h),h=-1}else for(r+s>u&&(r=u-s),a=r;a>=0;a--){for(var c=!0,l=0;l<s;l++)if(i(t,a+l)!==i(e,l)){c=!1;break}if(c)return a}return-1}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n),n>f&&(n=f)):n=f;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))return o;t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function latin1Write(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128===(192&s)&&(c=(31&i)<<6|63&s,c>127&&(o=c));break;case 3:s=t[f+1],a=t[f+2],128===(192&s)&&128===(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128===(192&s)&&128===(192&a)&&128===(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(127&t[f]);return n}function latin1Slice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;++f)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;++i)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>f||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;++f)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;++f)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=(f-55296<<10|r-56320)+65536}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);++f)e[f+r]=t[f];return f}function isnan(t){return t!==t}var base64=require(1),ieee754=require(3),isArray=require(5);exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,r){return from(null,t,e,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,r){return alloc(null,t,e,r)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i;++f)if(t[f]!==e[f]){r=t[f],n=e[f];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Buffer.allocUnsafe(e),f=0;for(r=0;r<t.length;++r){var i=t[r];if(!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)swap(this,e,e+1);return this},Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)swap(this,e,e+3),swap(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)swap(this,e,e+7),swap(this,e+1,e+6),swap(this,e+2,e+5),swap(this,e+3,e+4);return this},Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t,e,r,n,f){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===f&&(f=this.length),e<0||r>t.length||n<0||f>this.length)throw new RangeError("out of range index");if(n>=f&&e>=r)return 0;if(n>=f)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,f>>>=0,this===t)return 0;for(var i=f-n,o=r-e,u=Math.min(i,o),s=this.slice(n,f),a=t.slice(e,r),h=0;h<u;++h)if(s[h]!==a[h]){i=s[h],o=a[h];break}return i<o?-1:o<i?1:0},Buffer.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},Buffer.prototype.indexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!1)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0)}var f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"latin1":case"binary":return latin1Write(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=Buffer.prototype;else{var f=e-t;n=new Buffer(f,(void 0));for(var i=0;i<f;++i)n[i]=this[i+t]}return n},Buffer.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e=0|e,r=0|r,!n){var f=Math.pow(2,8*r)-1;checkInt(this,t,e,r,f,0)}var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e=0|e,r=0|r,!n){var f=Math.pow(2,8*r)-1;checkInt(this,t,e,r,f,0)}var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;--f)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;++f)t[f+e]=this[f+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var f=t.charCodeAt(0);f<256&&(t=f)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var i;if("number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,n).toString()),u=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%u]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"1":1,"3":3,"5":5}],3:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],4:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],5:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};
},{}],6:[function(require,module,exports){
function copyProps(f,r){for(var e in f)r[e]=f[e]}function SafeBuffer(f,r,e){return Buffer(f,r,e)}var buffer=require(2),Buffer=buffer.Buffer;Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(f,r,e){if("number"==typeof f)throw new TypeError("Argument must not be a number");return Buffer(f,r,e)},SafeBuffer.alloc=function(f,r,e){if("number"!=typeof f)throw new TypeError("Argument must be a number");var u=Buffer(f);return void 0!==r?"string"==typeof e?u.fill(r,e):u.fill(r):u.fill(0),u},SafeBuffer.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Buffer(f)},SafeBuffer.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(f)};
},{"2":2}],7:[function(require,module,exports){
function Hash(t,i){this._block=Buffer.alloc(t),this._finalSize=i,this._blockSize=t,this._len=0}var Buffer=require(6).Buffer;Hash.prototype.update=function(t,i){"string"==typeof t&&(i=i||"utf8",t=Buffer.from(t,i));for(var e=this._block,s=this._blockSize,h=t.length,o=this._len,l=0;l<h;){for(var r=o%s,_=Math.min(h-l,s-r),n=0;n<_;n++)e[r+n]=t[l+n];o+=_,l+=_,o%s===0&&this._update(e)}return this._len+=h,this},Hash.prototype.digest=function(t){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var e=8*this._len;if(e<=4294967295)this._block.writeUInt32BE(e,this._blockSize-4);else{var s=(4294967295&e)>>>0,h=(e-s)/4294967296;this._block.writeUInt32BE(h,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=Hash;
},{"6":6}],8:[function(require,module,exports){
var exports=module.exports=function(e){e=e.toLowerCase();var r=exports[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};exports.sha=require(9),exports.sha1=require(10),exports.sha224=require(11),exports.sha256=require(12),exports.sha384=require(13),exports.sha512=require(14);
},{"10":10,"11":11,"12":12,"13":13,"14":14,"9":9}],9:[function(require,module,exports){
function Sha(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,i,r,h){return 0===t?i&r|~i&h:2===t?i&r|i&h|r&h:i^r^h}var inherits=require(4),Hash=require(7),Buffer=require(6).Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);inherits(Sha,Hash),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(t){for(var i=this._w,r=0|this._a,h=0|this._b,s=0|this._c,e=0|this._d,n=0|this._e,_=0;_<16;++_)i[_]=t.readInt32BE(4*_);for(;_<80;++_)i[_]=i[_-3]^i[_-8]^i[_-14]^i[_-16];for(var a=0;a<80;++a){var o=~~(a/20),f=rotl5(r)+ft(o,h,s,e)+n+i[a]+K[o]|0;n=e,e=s,s=rotl30(h),h=r,r=f}this._a=r+this._a|0,this._b=h+this._b|0,this._c=s+this._c|0,this._d=e+this._d|0,this._e=n+this._e|0},Sha.prototype._hash=function(){var t=Buffer.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=Sha;
},{"4":4,"6":6,"7":7}],10:[function(require,module,exports){
function Sha1(){this.init(),this._w=W,Hash.call(this,64,56)}function rotl1(t){return t<<1|t>>>31}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,i,r,h){return 0===t?i&r|~i&h:2===t?i&r|i&h|r&h:i^r^h}var inherits=require(4),Hash=require(7),Buffer=require(6).Buffer,K=[1518500249,1859775393,-1894007588,-899497514],W=new Array(80);inherits(Sha1,Hash),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(t){for(var i=this._w,r=0|this._a,h=0|this._b,s=0|this._c,e=0|this._d,n=0|this._e,_=0;_<16;++_)i[_]=t.readInt32BE(4*_);for(;_<80;++_)i[_]=rotl1(i[_-3]^i[_-8]^i[_-14]^i[_-16]);for(var a=0;a<80;++a){var o=~~(a/20),f=rotl5(r)+ft(o,h,s,e)+n+i[a]+K[o]|0;n=e,e=s,s=rotl30(h),h=r,r=f}this._a=r+this._a|0,this._b=h+this._b|0,this._c=s+this._c|0,this._d=e+this._d|0,this._e=n+this._e|0},Sha1.prototype._hash=function(){var t=Buffer.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=Sha1;
},{"4":4,"6":6,"7":7}],11:[function(require,module,exports){
function Sha224(){this.init(),this._w=W,Hash.call(this,64,56)}var inherits=require(4),Sha256=require(12),Hash=require(7),Buffer=require(6).Buffer,W=new Array(64);inherits(Sha224,Sha256),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var t=Buffer.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},module.exports=Sha224;
},{"12":12,"4":4,"6":6,"7":7}],12:[function(require,module,exports){
function Sha256(){this.init(),this._w=W,Hash.call(this,64,56)}function ch(t,i,h){return h^t&(i^h)}function maj(t,i,h){return t&i|h&(t|i)}function sigma0(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function sigma1(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function gamma0(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function gamma1(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}var inherits=require(4),Hash=require(7),Buffer=require(6).Buffer,K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W=new Array(64);inherits(Sha256,Hash),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(t){for(var i=this._w,h=0|this._a,s=0|this._b,r=0|this._c,e=0|this._d,n=0|this._e,_=0|this._f,a=0|this._g,f=0|this._h,u=0;u<16;++u)i[u]=t.readInt32BE(4*u);for(;u<64;++u)i[u]=gamma1(i[u-2])+i[u-7]+gamma0(i[u-15])+i[u-16]|0;for(var o=0;o<64;++o){var c=f+sigma1(n)+ch(n,_,a)+K[o]+i[o]|0,m=sigma0(h)+maj(h,s,r)|0;f=a,a=_,_=n,n=e+c|0,e=r,r=s,s=h,h=c+m|0}this._a=h+this._a|0,this._b=s+this._b|0,this._c=r+this._c|0,this._d=e+this._d|0,this._e=n+this._e|0,this._f=_+this._f|0,this._g=a+this._g|0,this._h=f+this._h|0},Sha256.prototype._hash=function(){var t=Buffer.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},module.exports=Sha256;
},{"4":4,"6":6,"7":7}],13:[function(require,module,exports){
function Sha384(){this.init(),this._w=W,Hash.call(this,128,112)}var inherits=require(4),SHA512=require(14),Hash=require(7),Buffer=require(6).Buffer,W=new Array(160);inherits(Sha384,SHA512),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){function h(h,t,s){i.writeInt32BE(h,s),i.writeInt32BE(t,s+4)}var i=Buffer.allocUnsafe(48);return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),i},module.exports=Sha384;
},{"14":14,"4":4,"6":6,"7":7}],14:[function(require,module,exports){
function Sha512(){this.init(),this._w=W,Hash.call(this,128,112)}function Ch(h,t,i){return i^h&(t^i)}function maj(h,t,i){return h&t|i&(h|t)}function sigma0(h,t){return(h>>>28|t<<4)^(t>>>2|h<<30)^(t>>>7|h<<25)}function sigma1(h,t){return(h>>>14|t<<18)^(h>>>18|t<<14)^(t>>>9|h<<23)}function Gamma0(h,t){return(h>>>1|t<<31)^(h>>>8|t<<24)^h>>>7}function Gamma0l(h,t){return(h>>>1|t<<31)^(h>>>8|t<<24)^(h>>>7|t<<25)}function Gamma1(h,t){return(h>>>19|t<<13)^(t>>>29|h<<3)^h>>>6}function Gamma1l(h,t){return(h>>>19|t<<13)^(t>>>29|h<<3)^(h>>>6|t<<26)}function getCarry(h,t){return h>>>0<t>>>0?1:0}var inherits=require(4),Hash=require(7),Buffer=require(6).Buffer,K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W=new Array(160);inherits(Sha512,Hash),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(h){for(var t=this._w,i=0|this._ah,s=0|this._bh,r=0|this._ch,_=0|this._dh,a=0|this._eh,e=0|this._fh,l=0|this._gh,n=0|this._hh,f=0|this._al,g=0|this._bl,u=0|this._cl,c=0|this._dl,m=0|this._el,o=0|this._fl,y=0|this._gl,C=0|this._hl,d=0;d<32;d+=2)t[d]=h.readInt32BE(4*d),t[d+1]=h.readInt32BE(4*d+4);for(;d<160;d+=2){var b=t[d-30],p=t[d-30+1],v=Gamma0(b,p),G=Gamma0l(p,b);b=t[d-4],p=t[d-4+1];var B=Gamma1(b,p),S=Gamma1l(p,b),w=t[d-14],E=t[d-14+1],I=t[d-32],j=t[d-32+1],q=G+E|0,H=v+w+getCarry(q,G)|0;q=q+S|0,H=H+B+getCarry(q,S)|0,q=q+j|0,H=H+I+getCarry(q,j)|0,t[d]=H,t[d+1]=q}for(var W=0;W<160;W+=2){H=t[W],q=t[W+1];var x=maj(i,s,r),A=maj(f,g,u),U=sigma0(i,f),k=sigma0(f,i),z=sigma1(a,m),D=sigma1(m,a),F=K[W],J=K[W+1],L=Ch(a,e,l),M=Ch(m,o,y),N=C+D|0,O=n+z+getCarry(N,C)|0;N=N+M|0,O=O+L+getCarry(N,M)|0,N=N+J|0,O=O+F+getCarry(N,J)|0,N=N+q|0,O=O+H+getCarry(N,q)|0;var P=k+A|0,Q=U+x+getCarry(P,k)|0;n=l,C=y,l=e,y=o,e=a,o=m,m=c+N|0,a=_+O+getCarry(m,c)|0,_=r,c=u,r=s,u=g,s=i,g=f,f=N+P|0,i=O+Q+getCarry(f,N)|0}this._al=this._al+f|0,this._bl=this._bl+g|0,this._cl=this._cl+u|0,this._dl=this._dl+c|0,this._el=this._el+m|0,this._fl=this._fl+o|0,this._gl=this._gl+y|0,this._hl=this._hl+C|0,this._ah=this._ah+i+getCarry(this._al,f)|0,this._bh=this._bh+s+getCarry(this._bl,g)|0,this._ch=this._ch+r+getCarry(this._cl,u)|0,this._dh=this._dh+_+getCarry(this._dl,c)|0,this._eh=this._eh+a+getCarry(this._el,m)|0,this._fh=this._fh+e+getCarry(this._fl,o)|0,this._gh=this._gh+l+getCarry(this._gl,y)|0,this._hh=this._hh+n+getCarry(this._hl,C)|0},Sha512.prototype._hash=function(){function h(h,i,s){t.writeInt32BE(h,s),t.writeInt32BE(i,s+4)}var t=Buffer.allocUnsafe(64);return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),h(this._gh,this._gl,48),h(this._hh,this._hl,56),t},module.exports=Sha512;
},{"4":4,"6":6,"7":7}],15:[function(require,module,exports){
!function(){(function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(e){return e.getParam("media_scripts")},n=function(e){return e.getParam("audio_template_callback")},o=function(e){return e.getParam("video_template_callback")},c=function(e){return e.getParam("media_live_embeds",!0)},s=function(e){return e.getParam("media_filter_html",!0)},u=function(e){return e.getParam("media_url_resolver")},l=function(e){return e.getParam("media_alt_source",!0)},m=function(e){return e.getParam("media_poster",!0)},d=function(e){return e.getParam("media_dimensions",!0)},h={getScripts:a,getAudioTemplateCallback:n,getVideoTemplateCallback:o,hasLiveEmbeds:c,shouldFilterHtml:s,getUrlResolver:u,hasAltSource:l,hasPoster:m,hasDimensions:d},p=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),f=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=function(e,t){if(e)for(var r=0;r<e.length;r++)if(t.indexOf(e[r].filter)!==-1)return e[r]},v={getVideoScriptMatch:g},b=function(e){return e.replace(/px$/,"")},w=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},y=function(e){return function(t){return t?b(t.style[e]):""}},x=function(e){return function(t,r){t&&(t.style[e]=w(r))}},S={getMaxWidth:y("maxWidth"),getMaxHeight:y("maxHeight"),setMaxWidth:x("maxWidth"),setMaxHeight:x("maxHeight")},j=f.DOM,C=function(e){return j.getAttrib(e,"data-ephox-embed-iri")},M=function(e){var t=j.createFragment(e);return""!==C(t.firstChild)},T=function(e,t){var r={};return p({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,a){if(r.source1||"param"!==t||(r.source1=a.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(r.type||(r.type=t),r=i.extend(a.map,r)),"script"===t){var n=v.getVideoScriptMatch(e,a.map.src);if(!n)return;r={type:"script",source1:a.map.src,width:n.width,height:n.height}}"source"===t&&(r.source1?r.source2||(r.source2=a.map.src):r.source1=a.map.src),"img"!==t||r.poster||(r.poster=a.map.src)}}).parse(t),r.source1=r.source1||r.src||r.data,r.source2=r.source2||"",r.poster=r.poster||"",r},_=function(e){var t=j.createFragment(e),r=t.firstChild;return{type:"ephox-embed-iri",source1:C(r),source2:"",poster:"",width:S.getMaxWidth(r),height:S.getMaxHeight(r)}},H=function(e,t){return M(t)?_(t):T(e,t)},k={htmlToData:H},z=tinymce.util.Tools.resolve("tinymce.util.Promise"),A=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},r=e.toLowerCase().split(".").pop(),i=t[r];return i?i:""},F={guess:A},N=tinymce.util.Tools.resolve("tinymce.html.Writer"),P=tinymce.util.Tools.resolve("tinymce.html.Schema"),O=f.DOM,D=function(e,t){var r,i,a,n;for(r in t)if(a=""+t[r],e.map[r])for(i=e.length;i--;)n=e[i],n.name===r&&(a?(e.map[r]=a,n.value=a):(delete e.map[r],e.splice(i,1)));else a&&(e.push({name:r,value:a}),e.map[r]=a)},$=function(e){var t=N(),r=p(t);return r.parse(e),t.getContent()},E=function(e,t,r){var i,a=N(),n=0;return p({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){a.comment(e)},cdata:function(e){a.cdata(e)},text:function(e,t){a.text(e,t)},start:function(e,o,c){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&D(o,{width:t.width,height:t.height})}if(r)switch(e){case"video":D(o,{poster:t.poster,src:""}),t.source2&&D(o,{src:""});break;case"iframe":D(o,{src:t.source1});break;case"source":if(n++,n<=2&&(D(o,{src:t["source"+n],type:t["source"+n+"mime"]}),!t["source"+n]))return;break;case"img":if(!t.poster)return;i=!0}a.start(e,o,c)},end:function(e){if("video"===e&&r)for(var o=1;o<=2;o++)if(t["source"+o]){var c=[];c.map={},n<o&&(D(c,{src:t["source"+o],type:t["source"+o+"mime"]}),a.start("source",c,!0))}if(t.poster&&"object"===e&&r&&!i){var s=[];s.map={},D(s,{src:t.poster,width:t.width,height:t.height}),a.start("img",s,!0)}a.end(e)}},P({})).parse(e),a.getContent()},L=function(e){var t=O.createFragment(e);return""!==O.getAttrib(t.firstChild,"data-ephox-embed-iri")},V=function(e,t){var r=O.createFragment(e),i=r.firstChild;return S.setMaxWidth(i,t.width),S.setMaxHeight(i,t.height),$(i.outerHTML)},R=function(e,t,r){return L(e)?V(e,t):E(e,t,r)},U={updateHtml:R},W=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],I=function(e,t){for(var r=e.regex.exec(t),i=e.url,a=function(e){i=i.replace("$"+e,function(){return r[e]?r[e]:""})},n=0;n<r.length;n++)a(n);return i.replace(/\?$/,"")},J=function(e){var t=W.filter(function(t){return t.regex.test(e)});return t.length>0?i.extend({},t[0],{url:I(t[0],e)}):null},B=function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"},G=function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"},q=function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"},K=function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"},Q=function(e){return'<script src="'+e.source1+'"></script>'},X=function(e,t){var r=i.extend({},t);if(!r.source1&&(i.extend(r,k.htmlToData(h.getScripts(e),r.embed)),!r.source1))return"";r.source2||(r.source2=""),r.poster||(r.poster=""),r.source1=e.convertURL(r.source1,"source"),r.source2=e.convertURL(r.source2,"source"),r.source1mime=F.guess(r.source1),r.source2mime=F.guess(r.source2),r.poster=e.convertURL(r.poster,"poster");var a=J(r.source1);if(a&&(r.source1=a.url,r.type=a.type,r.allowFullscreen=a.allowFullscreen,r.width=r.width||a.w,r.height=r.height||a.h),r.embed)return U.updateHtml(r.embed,r,!0);var n=v.getVideoScriptMatch(h.getScripts(e),r.source1);n&&(r.type="script",r.width=n.width,r.height=n.height);var o=h.getAudioTemplateCallback(e),c=h.getVideoTemplateCallback(e);return r.width=r.width||300,r.height=r.height||150,i.each(r,function(t,i){r[i]=e.dom.encode(t)}),"iframe"===r.type?B(r):"application/x-shockwave-flash"===r.source1mime?G(r):r.source1mime.indexOf("audio")!==-1?q(r,o):"script"===r.type?Q(r):K(r,c)},Y={dataToHtml:X},Z={},ee=function(e,t,r){return new z(function(i,a){var n=function(r){return r.html&&(Z[e.source1]=r),i({url:e.source1,html:r.html?r.html:t(e)})};Z[e.source1]?n(Z[e.source1]):r({url:e.source1},n,a)})},te=function(e,t){return new z(function(r){r({html:t(e),url:e.source1})})},re=function(e){return function(t){return Y.dataToHtml(e,t)}},ie=function(e,t){var r=h.getUrlResolver(e);return r?ee(t,re(e),r):te(t,re(e))},ae=function(e){return Z.hasOwnProperty(e)},ne={getEmbedHtml:ie,isCached:ae},oe=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},ce=function(e,t){var r=e.find("#width")[0],i=e.find("#height")[0],a=e.find("#constrain")[0];r&&i&&a&&t(r,i,a.checked())},se=function(e,t,r){var i=e.state.get("oldVal"),a=t.state.get("oldVal"),n=e.value(),o=t.value();r&&i&&a&&n&&o&&(n!==i?(o=Math.round(n/i*o),isNaN(o)||t.value(o)):(n=Math.round(o/a*n),isNaN(n)||e.value(n))),oe(e,t)},ue=function(e){ce(e,oe)},le=function(e){ce(e,se)},me=function(e){var t=function(){e(function(e){le(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},de={createUi:me,syncSize:ue,updateSize:le},he=r.ie&&r.ie<=8?"onChange":"onInput",pe=function(e){return function(t){var r=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:r})}},fe=function(e){var t=e.selection.getNode(),r=t.getAttribute("data-ephox-embed-iri");return r?{source1:r,"data-ephox-embed-iri":r,width:S.getMaxWidth(t),height:S.getMaxHeight(t)}:t.getAttribute("data-mce-object")?k.htmlToData(h.getScripts(e),e.serializer.serialize(t,{selection:!0})):{}},ge=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},ve=function(e,t){return function(r){var a=r.html,n=e.find("#embed")[0],o=i.extend(k.htmlToData(h.getScripts(t),a),{source1:r.url});e.fromJSON(o),n&&(n.value(a),de.updateSize(e))}},be=function(e,t){var r,i,a=e.dom.select("img[data-mce-object]");for(r=0;r<t.length;r++)for(i=a.length-1;i>=0;i--)t[r]===a[i]&&a.splice(i,1);e.selection.select(a[0])},we=function(e,t){var r=e.dom.select("img[data-mce-object]");e.insertContent(t),be(e,r),e.nodeChanged()},ye=function(e,t){var r=e.toJSON();r.embed=U.updateHtml(r.embed,r),r.embed&&ne.isCached(r.source1)?we(t,r.embed):ne.getEmbedHtml(t,r).then(function(e){we(t,e.html)})["catch"](pe(t))},xe=function(e,t){i.each(t,function(t,r){e.find("#"+r).value(t)})},Se=function(e){var t,r,a=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){ne.getEmbedHtml(e,t.toJSON()).then(ve(t,e))["catch"](pe(e))},1)},onchange:function(r){ne.getEmbedHtml(e,t.toJSON()).then(ve(t,e))["catch"](pe(e)),xe(t,r.meta)},onbeforecall:function(e){e.meta=t.toJSON()}}],n=[],o=function(e){e(t),r=t.toJSON(),t.find("#embed").value(U.updateHtml(r.embed,r))};if(h.hasAltSource(e)&&n.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),h.hasPoster(e)&&n.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),h.hasDimensions(e)){var c=de.createUi(o);a.push(c)}r=fe(e);var s={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:ge(e),multiline:!0,rows:5,label:"Source"},u=function(){r=i.extend({},k.htmlToData(h.getScripts(e),this.value())),this.parent().parent().fromJSON(r)};s[he]=u;var l=[{title:"General",type:"form",items:a},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},s]}];n.length>0&&l.push({title:"Advanced",type:"form",items:n}),t=e.windowManager.open({title:"Insert/edit media",data:r,bodyType:"tabpanel",body:l,onSubmit:function(){de.updateSize(t),ye(t,e)}}),de.syncSize(t)},je={showDialog:Se},Ce=function(e){var t=function(){je.showDialog(e)};return{showDialog:t}},Me={get:Ce},Te=function(e){var t=function(){je.showDialog(e)};e.addCommand("mceMedia",t)},_e={register:Te},He=tinymce.util.Tools.resolve("tinymce.html.Node"),ke=function(e,t){if(h.shouldFilterHtml(e)===!1)return t;var r,i=N();return p({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(t,a,n){if(r=!0,"script"!==t&&"noscript"!==t){for(var o=0;o<a.length;o++){if(0===a[o].name.indexOf("on"))return;"style"===a[o].name&&(a[o].value=e.dom.serializeStyle(e.dom.parseStyle(a[o].value),t))}i.start(t,a,n),r=!1}},end:function(e){r||i.end(e)}},P({})).parse(t),i.getContent()},ze={sanitize:ke},Ae=function(e,t){var i,a=t.name;return i=new He("img",1),i.shortEnded=!0,Ne(e,t,i),i.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===a?"30":"150"),style:t.attr("style"),src:r.transparentSrc,"data-mce-object":a,"class":"mce-object mce-object-"+a}),i},Fe=function(e,t){var r,i,a,n=t.name;return r=new He("span",1),r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":n,"class":"mce-preview-object mce-object-"+n}),Ne(e,t,r),i=new He(n,1),i.attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),"class":t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),a=new He("span",1),a.attr("class","mce-shim"),r.append(i),r.append(a),r},Ne=function(e,t,r){var i,a,n,o,c;for(n=t.attributes,o=n.length;o--;)i=n[o].name,a=n[o].value,"width"!==i&&"height"!==i&&"style"!==i&&("data"!==i&&"src"!==i||(a=e.convertURL(a,i)),r.attr("data-mce-p-"+i,a));c=t.firstChild&&t.firstChild.value,c&&(r.attr("data-mce-html",escape(ze.sanitize(e,c))),r.firstChild=null)},Pe=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},Oe=function(e){return function(t){for(var i,a,n=t.length;n--;)i=t[n],i.parent&&(i.parent.attr("data-mce-object")||("script"!==i.name||(a=v.getVideoScriptMatch(h.getScripts(e),i.attr("src"))))&&(a&&(a.width&&i.attr("width",a.width.toString()),a.height&&i.attr("height",a.height.toString())),"iframe"===i.name&&h.hasLiveEmbeds(e)&&r.ceFalse?Pe(i)||i.replace(Fe(e,i)):Pe(i)||i.replace(Ae(e,i))))}},De={createPreviewIframeNode:Fe,createPlaceholderNode:Ae,placeHolderConverter:Oe},$e=function(e){e.on("preInit",function(){var t=e.schema.getSpecialElements();i.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var r=e.schema.getBoolAttrs();i.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){r[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",De.placeHolderConverter(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,r){for(var i,a,n,o,c,s,u,l,m=t.length;m--;)if(i=t[m],i.parent){for(u=i.attr(r),a=new He(u,1),"audio"!==u&&"script"!==u&&(l=i.attr("class"),l&&l.indexOf("mce-preview-object")!==-1?a.attr({width:i.firstChild.attr("width"),height:i.firstChild.attr("height")}):a.attr({width:i.attr("width"),height:i.attr("height")})),a.attr({style:i.attr("style")}),o=i.attributes,n=o.length;n--;){var d=o[n].name;0===d.indexOf("data-mce-p-")&&a.attr(d.substr(11),o[n].value)}"script"===u&&a.attr("type","text/javascript"),c=i.attr("data-mce-html"),c&&(s=new He("#text",3),s.raw=!0,s.value=ze.sanitize(e,unescape(c)),a.append(s)),i.replace(a)}})}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,r){var i=e.$(r);0===i.find("span.mce-shim",r).length&&i.append('<span class="mce-shim"></span>')})})},Ee={setup:$e},Le=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})},Ve={setup:Le},Re=function(e){e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),e.on("objectResized",function(e){var t,r=e.target;r.getAttribute("data-mce-object")&&(t=r.getAttribute("data-mce-html"),t&&(t=unescape(t),r.setAttribute("data-mce-html",escape(U.updateHtml(t,{width:e.width,height:e.height})))))})},Ue={setup:Re},We=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})},Ie={register:We};return t.add("media",function(e){return _e.register(e),Ie.register(e),Ve.setup(e),Ee.setup(e),Ue.setup(e),Me.get(e)}),e})()}();
},{}],16:[function(require,module,exports){
!function(){(function(){"use strict";function e(e,t,n){var i,r,o,s,a,l,u,c,d,f;return d=Jt(),r=qt.getPos(t,Pe.getUiContainer(e)),o=r.x,s=r.y,Xt(e)&&$t(document.body)&&(o-=d.x,s-=d.y),i=e.getEl(),f=qt.getSize(i),a=f.width,l=f.height,f=qt.getSize(t),u=f.width,c=f.height,n=(n||"").split(""),"b"===n[0]&&(s+=c),"r"===n[1]&&(o+=u),"c"===n[0]&&(s+=Math.round(c/2)),"c"===n[1]&&(o+=Math.round(u/2)),"b"===n[3]&&(s-=l),"r"===n[4]&&(o-=a),"c"===n[3]&&(s-=Math.round(l/2)),"c"===n[4]&&(o-=Math.round(a/2)),{x:o,y:s,w:a,h:l}}function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}function i(e){for(var t,n=[],i=e.length;i--;)t=e[i],t.__checked||(n.push(t),t.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}function r(e){return e.nodeType>0}function o(e,t){var n,i;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;if(A.isArray(t)){if(e.length!==t.length)return!1;for(n=e.length;n--;)if(!o(e[n],t[n]))return!1}if(r(e)||r(t))return e===t;i={};for(n in t){if(!o(e[n],t[n]))return!1;i[n]=!0}for(n in e)if(!i[n]&&!o(e[n],t[n]))return!1;return!0}function s(e){return e._eventDispatcher||(e._eventDispatcher=new Qt({scope:e,toggleEvent:function(t,n){n&&Qt.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&a(e))}})),e._eventDispatcher}function a(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=l._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),l._lastHoverCtrl=null)}function i(t){var n,i,r,o=e.getParentCtrl(t.target),s=l._lastHoverCtrl,a=0;if(o!==s){if(l._lastHoverCtrl=o,i=o.parents().toArray().reverse(),i.push(o),s){for(r=s.parents().toArray().reverse(),r.push(s),a=0;a<r.length&&i[a]===r[a];a++);for(n=r.length-1;n>=a;n--)s=r[n],s.fire("mouseleave",{target:s.getEl()})}for(n=a;n<i.length;n++)o=i[n],o.fire("mouseenter",{target:o.getEl()})}}function r(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var o,s,a,l,u,c;if(u=e._nativeEvents){for(a=e.parents().toArray(),a.unshift(e),o=0,s=a.length;!l&&o<s;o++)l=a[o]._eventsRoot;for(l||(l=a[a.length-1]||e),e._eventsRoot=l,s=o,o=0;o<s;o++)a[o]._eventsRoot=l;var d=l._delegates;d||(d=l._delegates={});for(c in u){if(!u)return!1;"wheel"!==c||xn?("mouseenter"===c||"mouseleave"===c?l._hasMouseEnter||(Vt(l.getEl()).on("mouseleave",n).on("mouseover",i),l._hasMouseEnter=1):d[c]||(Vt(l.getEl()).on(c,t),d[c]=!0),u[c]=!1):yn?Vt(e.getEl()).on("mousewheel",r):Vt(e.getEl()).on("DOMMouseScroll",r)}}}function l(e){function t(e){return e&&1===e.nodeType}function n(e){return e=e||y,t(e)?e.getAttribute("role"):null}function i(e){for(var t,i=e||y;i=i.parentNode;)if(t=n(i))return t}function r(e){var n=y;if(t(n))return n.getAttribute("aria-"+e)}function o(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function s(e){return!(!o(e)||e.hidden)||(!!Hn(e)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(n(e)))}function a(e){function t(e){if(1===e.nodeType&&"none"!==e.style.display&&!e.disabled){s(e)&&n.push(e);for(var i=0;i<e.childNodes.length;i++)t(e.childNodes[i])}}var n=[];return t(e||w.getEl()),n}function l(e){var t,n;e=e||x,n=e.parents().toArray(),n.unshift(e);for(var i=0;i<n.length&&(t=n[i],!t.settings.ariaRoot);i++);return t}function u(e){var t=l(e),n=a(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}function c(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n=-1,i=l();t=t||a(i.getEl());for(var r=0;r<t.length;r++)t[r]===y&&(n=r);n+=e,i.lastAriaIndex=c(n,t)}function f(){var e=i();"tablist"===e?d(-1,a(y.parentNode)):x.parent().submenu?v():d(-1)}function h(){var e=n(),t=i();"tablist"===t?d(1,a(y.parentNode)):"menuitem"===e&&"menu"===t&&r("haspopup")?b():d(1)}function m(){d(-1)}function g(){var e=n(),t=i();"menuitem"===e&&"menubar"===t?b():"button"===e&&r("haspopup")?b({key:"down"}):d(1)}function p(e){var t=i();if("tablist"===t){var n=a(x.getEl("body"))[0];n&&n.focus()}else d(e.shiftKey?-1:1)}function v(){x.fire("cancel")}function b(e){e=e||{},x.fire("click",{target:y,aria:e})}var y,x,w=e.root;try{y=document.activeElement}catch(_){y=document.body}return x=w.getParentCtrl(y),w.on("keydown",function(e){function t(e,t){o(y)||Hn(y)||"slider"!==n(y)&&t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,f);break;case 39:t(e,h);break;case 38:t(e,m);break;case 40:t(e,g);break;case 27:v();break;case 14:case 13:case 32:t(e,b);break;case 9:p(e),e.preventDefault()}}),w.on("focusin",function(e){y=e.target,x=e.control}),{focusFirst:u}}function u(e){var t,n,i,r,o,s,a,l,u=Math.max;return t=e.documentElement,n=e.body,i=u(t.scrollWidth,n.scrollWidth),r=u(t.clientWidth,n.clientWidth),o=u(t.offsetWidth,n.offsetWidth),s=u(t.scrollHeight,n.scrollHeight),a=u(t.clientHeight,n.clientHeight),l=u(t.offsetHeight,n.offsetHeight),{width:i<o?r:i,height:s<l?a:s}}function c(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function d(e,t){var n,i,r,o,s,a,l,d=t.document||document;t=t||{};var f=d.getElementById(t.handle||e);r=function(e){var r,h,m=u(d);c(e),e.preventDefault(),i=e.button,r=f,a=e.screenX,l=e.screenY,h=window.getComputedStyle?window.getComputedStyle(r,null).getPropertyValue("cursor"):r.runtimeStyle.cursor,n=Vt("<div></div>").css({position:"absolute",top:0,left:0,width:m.width,height:m.height,zIndex:2147483647,opacity:1e-4,cursor:h}).appendTo(d.body),Vt(d).on("mousemove touchmove",s).on("mouseup touchend",o),t.start(e)},s=function(e){return c(e),e.button!==i?o(e):(e.deltaX=e.screenX-a,e.deltaY=e.screenY-l,e.preventDefault(),void t.drag(e))},o=function(e){c(e),Vt(d).off("mousemove touchmove",s).off("mouseup touchend",o),n.remove(),t.stop&&t.stop(e)},this.destroy=function(){Vt(f).off()},Vt(f).on("mousedown touchstart",r)}function f(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function h(e){for(var t=On.length;t--;){var n=On[t],i=n.getParentCtrl(e.target);if(n.settings.autohide){if(i&&(f(i,n)||n.parent()===i))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function m(){Rn||(Rn=function(e){2!==e.button&&h(e)},Vt(document).on("click touchstart",Rn))}function g(){En||(En=function(){var e;for(e=On.length;e--;)v(On[e])},Vt(window).on("scroll",En))}function p(){if(!kn){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;kn=function(){document.all&&t===e.clientWidth&&n===e.clientHeight||(t=e.clientWidth,n=e.clientHeight,An.hideAll())},Vt(window).on("resize",kn)}}function v(e){function t(t,n){for(var i,r=0;r<On.length;r++)if(On[r]!==e)for(i=On[r].parent();i&&(i=i.parent());)i===e&&On[r].fixed(t).moveBy(0,n).repaint()}var n=qt.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function b(e,t){var n,i,r=An.zIndex||65535;if(e)Bn.push(t);else for(n=Bn.length;n--;)Bn[n]===t&&Bn.splice(n,1);if(Bn.length)for(n=0;n<Bn.length;n++)Bn[n].modal&&(r++,i=Bn[n]),Bn[n].getEl().style.zIndex=r,Bn[n].zIndex=r,r++;var o=Vt("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];i?Vt(o).css("z-index",i.zIndex-1):o&&(o.parentNode.removeChild(o),Tn=!1),An.currentZIndex=r}function y(e){var t;for(t=On.length;t--;)On[t]===e&&On.splice(t,1);for(t=Bn.length;t--;)Bn[t]===e&&Bn.splice(t,1)}function x(e,t){var n,i,r=this,o=Sn.classPrefix;r.show=function(s,a){function l(){n&&(Vt(e).append('<div class="'+o+"throbber"+(t?" "+o+"throbber-inline":"")+'"></div>'),a&&a())}return r.hide(),n=!0,s?i=ge.setTimeout(l,s):l(),r},r.hide=function(){var t=e.lastChild;return ge.clearTimeout(i),t&&t.className.indexOf("throbber")!==-1&&t.parentNode.removeChild(t),n=!1,r}}function w(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()},n=function(){var n=t(e);return qt.getSize(n).width},i=function(e){Qe(e,function(e){e.moveTo(0,0)})},r=function(n){if(n.length>0){var i=n.slice(0,1)[0],r=t(e);i.moveRel(r,"tc-tc"),Qe(n,function(e,t){t>0&&e.moveRel(n[t-1].getEl(),"bc-tc")})}},o=function(e){i(e),r(e)},s=function(e,t){var i=A.extend(e,{maxWidth:n()}),r=new Jn(i);return r.args=i,i.timeout>0&&(r.timer=setTimeout(function(){r.close(),t()},i.timeout)),r.on("close",function(){t()}),r.renderTo(),r},a=function(e){e.close()},l=function(e){return e.args};return{open:s,close:a,reposition:o,getArgs:l}}function _(e){var t,n="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",i=Vt("meta[name=viewport]")[0];Rt.overrideViewPort!==!1&&(i||(i=document.createElement("meta"),i.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(i)),t=i.getAttribute("content"),t&&"undefined"!=typeof Kn&&(Kn=t),i.setAttribute("content",e?n:Kn))}function C(e,t){R()&&t===!1&&Vt([document.documentElement,document.body]).removeClass(e+"fullscreen")}function R(){for(var e=0;e<Gn.length;e++)if(Gn[e]._fullscreen)return!0;return!1}function E(){function e(){var e,t,n=qt.getWindowSize();for(e=0;e<Gn.length;e++)t=Gn[e].layoutRect(),Gn[e].moveTo(Gn[e].settings.x||Math.max(0,n.w/2-t.w/2),Gn[e].settings.y||Math.max(0,n.h/2-t.h/2))}if(!Rt.desktop){var t={w:window.innerWidth,h:window.innerHeight};ge.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w===e&&t.h===n||(t={w:e,h:n},Vt(window).trigger("resize"))},100)}Vt(window).on("resize",e)}function k(e){var t=function(e,t,n){var i;return e.title=e.title||" ",e.url=e.url||e.file,e.url&&(e.width=parseInt(e.width||320,10),e.height=parseInt(e.height||240,10)),e.body&&(e.items={defaults:e.defaults,type:e.bodyType||"form",items:e.body,data:e.data,callbacks:e.commands}),e.url||e.buttons||(e.buttons=[{text:"Ok",subtype:"primary",onclick:function(){i.find("form")[0].submit()}},{text:"Cancel",onclick:function(){i.close()}}]),i=new Zn(e),i.on("close",function(){n(i)}),e.data&&i.on("postRender",function(){this.find("*").each(function(t){var n=t.name();n in e.data&&t.value(e.data[n])})}),i.features=e||{},i.params=t||{},i=i.renderTo(document.body).reflow()},n=function(e,t,n){var i;return i=Qn.alert(e,function(){t()}),i.on("close",function(){n(i)}),i},i=function(e,t,n){var i;return i=Qn.confirm(e,function(e){t(e)}),i.on("close",function(){n(i)}),i},r=function(e){e.close()},o=function(e){return e.params},s=function(e,t){e.params=t};return{open:t,alert:n,confirm:i,close:r,getParams:o,setParams:s}}function T(e,t,n){var i=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!i,o=e.isAndroid()&&3===e.version.major,s=e.isAndroid()&&4===e.version.major,a=i||o||s&&/mobile/i.test(n)===!0,l=e.isiOS()||e.isAndroid(),u=l&&!a,c=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1;return{isiPad:be(i),isiPhone:be(r),isTablet:be(a),isPhone:be(u),isTouch:be(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:be(c)}}function S(e,t,n,i,r){return e(n,i)?Se.some(n):Xe(r)&&r(n)?Se.none():t(n,i,r)}function H(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}function N(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}function M(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function D(e,t,n){e.setAttribute("aria-"+t,n)}function P(e,t){var n,i,r,o,s,a;"v"===e.settings.orientation?(o="top",r="height",i="h"):(o="left",r="width",i="w"),a=e.getEl("handle"),n=(e.layoutRect()[i]||100)-qt.getSize(a)[r],s=n*((t-e._minValue)/(e._maxValue-e._minValue))+"px",a.style[o]=s,a.style.height=e.layoutRect().h+"px",D(a,"valuenow",t),D(a,"valuetext",""+e.settings.previewFilter(t)),D(a,"valuemin",e._minValue),D(a,"valuemax",e._maxValue)}function W(){}var O=tinymce.util.Tools.resolve("tinymce.ThemeManager"),B=tinymce.util.Tools.resolve("tinymce.EditorManager"),A=tinymce.util.Tools.resolve("tinymce.util.Tools"),I=function(e){return e.getParam("branding",!0,"boolean")},L=function(e){return z(e)!==!1},z=function(e){return e.getParam("menubar")},F=function(e){return e.getParam("statusbar",!0,"boolean")},U=function(e){return e.getParam("toolbar_items_size")},V=function(e){return e.getParam("readonly",!1,"boolean")},Y=function(e){return e.getParam("fixed_toolbar_container")},q=function(e){return e.getParam("inline_toolbar_position_handler")},$=function(e){return e.getParam("menu")},X=function(e){return e.getParam("removed_menuitems","")},j=function(e){return e.getParam("min_width",100,"number")},J=function(e){return e.getParam("min_height",100,"number")},G=function(e){return e.getParam("max_width",65535,"number")},K=function(e){return e.getParam("max_height",65535,"number")},Z=function(e){return e.settings.skin===!1},Q=function(e){return e.getParam("inline",!1,"boolean")},ee=function(e){var t=e.getParam("resize","vertical");return t===!1?"none":"both"===t?"both":"vertical"},te=function(e){var t=e.settings,n=t.skin,i=t.skin_url;if(n!==!1){var r=n?n:"lightgray";i=i?e.documentBaseURI.toAbsolute(i):B.baseURL+"/skins/"+r}return i},ne=function(e,t){for(var n=[],i=1;i<10;i++){var r=e["toolbar"+i];if(!r)break;n.push(r)}var o=e.toolbar?[e.toolbar]:[t];return n.length>0?n:o},ie=function(e){var t=e.getParam("toolbar"),n="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";return t===!1?[]:A.isArray(t)?A.grep(t,function(e){return e.length>0}):ne(e.settings,n)},re=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),oe=tinymce.util.Tools.resolve("tinymce.ui.Factory"),se=tinymce.util.Tools.resolve("tinymce.util.I18n"),ae=function(e){return e.fire("SkinLoaded")},le=function(e){return e.fire("ResizeEditor")},ue=function(e){return e.fire("BeforeRenderUI")},ce={fireSkinLoaded:ae,fireResizeEditor:le,fireBeforeRenderUI:ue},de=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},fe=function(e,t){e.shortcuts.add("Alt+F9","",de(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",de(t,"toolbar")),e.shortcuts.add("Alt+F11","",de(t,"elementpath")),t.on("cancel",function(){e.focus()})},he={addKeys:fe},me=tinymce.util.Tools.resolve("tinymce.geom.Rect"),ge=tinymce.util.Tools.resolve("tinymce.util.Delay"),pe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},ve=function(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t.apply(null,arguments))}},be=function(e){return function(){return e}},ye=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=new Array(arguments.length-1),r=1;r<arguments.length;r++)i[r-1]=arguments[r];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var s=i.concat(r);return e.apply(null,s)}},xe=be(!1),we=be(!0),_e=xe,Ce=we,Re=function(){return Ee},Ee=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},i=function(){},r=function(){return null},o=function(){},s={fold:function(e,t){return e()},is:_e,isSome:_e,isNone:Ce,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:r,getOrUndefined:o,or:n,orThunk:t,map:Re,ap:Re,each:i,bind:Re,flatten:Re,exists:_e,forall:Ce,filter:Re,equals:e,equals_:e,toArray:function(){return[]},toString:be("none()")};return Object.freeze&&Object.freeze(s),s}(),ke=function(e){var t=function(){return e},n=function(){return o},i=function(t){return ke(t(e))},r=function(t){return t(e)},o={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:Ce,isNone:_e,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:i,ap:function(t){return t.fold(Re,function(t){return ke(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?o:Ee},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(_e,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},Te=function(e){return null===e||void 0===e?Ee:ke(e)},Se={some:ke,none:Re,from:Te},He=function(e){var t=Me(e);if(t&&"static"!==re.DOM.getStyle(t,"position",!0)){var n=re.DOM.getPos(t),i=t.scrollLeft-n.x,r=t.scrollTop-n.y;return Se.some({x:i,y:r})}return Se.none()},Ne=function(e,t){var n=re.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},Me=function(e){return e?e.getRoot().uiContainer:null},De=function(e,t){return t.uiContainer=Me(e)},Pe={getUiContainerDelta:He,setUiContainer:Ne,getUiContainer:Me,inheritUiContainer:De},We=function(e,t,n){var i,r=[];if(t)return A.each(t.split(/[ ,]/),function(t){var o,s=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?i=null:(i||(i={type:"buttongroup",items:[]},r.push(i)),e.buttons[t]&&(o=t,t=e.buttons[o],"function"==typeof t&&(t=t()),t.type=t.type||"button",t.size=n,t=oe.create(t),i.items.push(t),e.initialized?s():e.on("init",s)))}),{type:"toolbar",layout:"flow",items:r}},Oe=function(e,t){var n=[],i=function(i){i&&n.push(We(e,i,t))};if(A.each(ie(e),function(e){i(e)}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},Be={createToolbar:We,createToolbars:Oe},Ae=re.DOM,Ie=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},Le=function(e){A.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},ze=function(e,t){e.moveTo(t.left,t.top)},Fe=function(e,t,n){t=t?t.substr(0,2):"",A.each({t:"down",b:"up"},function(i,r){e.classes.toggle("arrow-"+i,n(r,t.substr(0,1)))}),A.each({l:"left",r:"right"},function(i,r){e.classes.toggle("arrow-"+i,n(r,t.substr(1,1)))})},Ue=function(e,t,n,i,r,o){return o=Ie({x:t,y:n,w:o.w,h:o.h}),e&&(o=e({elementRect:Ie(i),contentAreaRect:Ie(r),panelRect:o})),o},Ve=function(e){var t,n=function(){return e.contextToolbars||[]},i=function(t){var n,i,r;return n=Ae.getPos(e.getContentAreaContainer()),i=e.dom.getRect(t),r=e.dom.getRoot(),"BODY"===r.nodeName&&(i.x-=r.ownerDocument.documentElement.scrollLeft||r.scrollLeft,i.y-=r.ownerDocument.documentElement.scrollTop||r.scrollTop),i.x+=n.x,i.y+=n.y,i},r=function(t,n){var r,o,s,a,l,u,c,d,f=q(e);if(!e.removed){if(!t||!t.toolbar.panel)return void Le(e);c=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],l=t.toolbar.panel,n&&l.show(),s=i(t.element),o=Ae.getRect(l.getEl()),a=Ae.getRect(e.getContentAreaContainer()||e.getBody());var h=Pe.getUiContainerDelta(l).getOr({x:0,y:0});if(s.x+=h.x,s.y+=h.y,o.x+=h.x,o.y+=h.y,a.x+=h.x,a.y+=h.y,d=25,"inline"!==Ae.getStyle(t.element,"display",!0)){var m=t.element.getBoundingClientRect();s.w=m.width,s.h=m.height}e.inline||(a.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&s.w<d&&(s=me.inflate(s,0,8)),r=me.findBestRelativePosition(o,s,a,c),s=me.clamp(s,a),r?(u=me.relativePosition(o,s,r),ze(l,Ue(f,u.x,u.y,s,a,o))):(a.h+=o.h,s=me.intersect(a,s),s?(r=me.findBestRelativePosition(o,s,a,["bc-tc","bl-tl","br-tr"]),r?(u=me.relativePosition(o,s,r),ze(l,Ue(f,u.x,u.y,s,a,o))):ze(l,Ue(f,s.x,s.y,s,a,o))):l.hide()),Fe(l,r,function(e,t){return e===t})}},o=function(t){return function(){var n=function(){e.selection&&r(u(e.selection.getNode()),t)};ge.requestAnimationFrame(n)}},s=function(n){if(!t){var i=o(!0),r=Pe.getUiContainer(n);t=e.selection.getScrollContainer()||e.getWin(),Ae.bind(t,"scroll",i),Ae.bind(r,"scroll",i),e.on("remove",function(){Ae.unbind(t,"scroll",i),Ae.unbind(r,"scroll",i)})}},a=function(t){var n;return t.toolbar.panel?(t.toolbar.panel.show(),void r(t)):(n=oe.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:Be.createToolbar(e,t.toolbar.items),oncancel:function(){e.focus()}}),Pe.setUiContainer(e,n),s(n),t.toolbar.panel=n,n.renderTo().reflow(),void r(t))},l=function(){A.each(n(),function(e){e.panel&&e.panel.hide()})},u=function(t){var i,r,o,s=n();for(o=e.$(t).parents().add(t),i=o.length-1;i>=0;i--)for(r=s.length-1;r>=0;r--)if(s[r].predicate(o[i]))return{toolbar:s[r],element:o[i]};return null};e.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&ge.setEditorTimeout(e,function(){var t;t=u(e.selection.getNode()),t?(l(),a(t)):l()})}),e.on("blur hide contextmenu",l),e.on("ObjectResizeStart",function(){var t=u(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",o(!0)),e.on("nodeChange",o(!1)),e.on("remove",function(){A.each(n(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=u(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})},Ye={addContextualToolbars:Ve},qe=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},$e=function(e){return function(t){return qe(t)===e}},Xe=$e("function"),je=$e("number"),Je=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return rt(e,t)};return void 0===e?n:t}(),Ge=function(e,t){var n=Je(e,t);return n===-1?Se.none():Se.some(n)},Ke=function(e,t){return it(e,t).isSome()},Ze=function(e,t){for(var n=e.length,i=new Array(n),r=0;r<n;r++){var o=e[r];i[r]=t(o,r,e)}return i},Qe=function(e,t){for(var n=0,i=e.length;n<i;n++){var r=e[n];t(r,n,e)}},et=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];t(o,i,e)&&n.push(o)}return n},tt=function(e,t,n){return Qe(e,function(e){n=t(n,e)}),n},nt=function(e,t){for(var n=0,i=e.length;n<i;n++){var r=e[n];if(t(r,n,e))return Se.some(r)}return Se.none()},it=function(e,t){for(var n=0,i=e.length;n<i;n++){var r=e[n];if(t(r,n,e))return Se.some(n)}return Se.none()},rt=function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n]===t)return n;return-1},ot=Array.prototype.push,st=function(e){for(var t=[],n=0,i=e.length;n<i;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ot.apply(t,e[n])}return t},at=Array.prototype.slice,lt=function(e){var t=at.call(e,0);return t.reverse(),t},ut=(Xe(Array.from)?Array.from:function(e){return at.call(e)},{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),ct=function(){return{name:"|",item:{text:"|"}}},dt=function(e,t){var n=t?{name:e,item:t}:null;return"|"===e?ct():n},ft=function(e,t){return it(e,function(e){return e.name===t}).isSome()},ht=function(e){return e&&"|"===e.item.text},mt=function(e,t){var n=et(e,function(e){return t.hasOwnProperty(e.name)===!1}),i=et(n,function(e,t,n){return!ht(e)||!ht(n[t-1])});return et(i,function(e,t,n){return!ht(e)||t>0&&t<n.length-1})},gt=function(e,t,n,i){var r,o,s,a;return t?(o=t[i],a=!0):o=ut[i],o&&(r={text:o.title},s=[],A.each((o.items||"").split(/[ ,]/),function(t){var n=dt(t,e[t]);n&&s.push(n)}),a||A.each(e,function(e,t){e.context!==i||ft(s,t)||("before"===e.separator&&s.push(ct()),e.prependToContext?s.unshift(dt(t,e)):s.push(dt(t,e)),"after"===e.separator&&s.push(ct()))}),r.menu=Ze(mt(s,n),function(e){return e.item}),!r.menu.length)?null:r},pt=function(e){var t,n=[],i=$(e);if(i)for(t in i)n.push(t);else for(t in ut)n.push(t);return n},vt=function(e){for(var t=[],n=pt(e),i=A.makeMap(X(e).split(/[ ,]/)),r=z(e),o="string"==typeof r?r.split(/[ ,]/):n,s=0;s<o.length;s++){var a=o[s],l=gt(e.menuItems,$(e),i,a);l&&t.push(l)}return t},bt={createMenuButtons:vt},yt=re.DOM,xt=function(e){return{width:e.clientWidth,height:e.clientHeight}},wt=function(e,t,n){var i,r,o,s;i=e.getContainer(),r=e.getContentAreaContainer().firstChild,o=xt(i),s=xt(r),null!==t&&(t=Math.max(j(e),t),t=Math.min(G(e),t),yt.setStyle(i,"width",t+(o.width-s.width)),yt.setStyle(r,"width",t)),n=Math.max(J(e),n),n=Math.min(K(e),n),yt.setStyle(r,"height",n),ce.fireResizeEditor(e)},_t=function(e,t,n){var i=e.getContentAreaContainer();wt(e,i.clientWidth+t,i.clientHeight+n)},Ct={resizeTo:wt,resizeBy:_t},Rt=tinymce.util.Tools.resolve("tinymce.Env"),Et=function(e){return{element:function(){return e}}},kt=function(e,t,n){var i=e.settings[n];i&&i(Et(t.getEl("body")))},Tt=function(e,t,n){A.each(n,function(n){var i=t.items().filter("#"+n.name)[0];i&&i.visible()&&n.name!==e&&(kt(n,i,"onhide"),i.visible(!1))})},St=function(e){e.items().each(function(e){e.active(!1)})},Ht=function(e,t){return A.grep(e,function(e){return e.name===t})[0]},Nt=function(e,t,n){return function(i){var r=i.control,o=r.parents().filter("panel")[0],s=o.find("#"+t)[0],a=Ht(n,t);Tt(t,o,n),St(r.parent()),s&&s.visible()?(kt(a,s,"onhide"),s.hide(),r.active(!1)):(s?(s.show(),kt(a,s,"onshow")):(s=oe.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),o.prepend(s),kt(a,s,"onrender"),kt(a,s,"onshow")),r.active(!0)),ce.fireResizeEditor(e)}},Mt=function(){return!Rt.ie||Rt.ie>=11},Dt=function(e){return!(!Mt()||!e.sidebars)&&e.sidebars.length>0},Pt=function(e){var t=A.map(e.sidebars,function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:Nt(e,t.name,e.sidebars)}});return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:t}]}},Wt={hasSidebar:Dt,createSidebar:Pt},Ot=function(e){var t=function(){e._skinLoaded=!0,ce.fireSkinLoaded(e)};return function(){e.initialized?t():e.on("init",t)}},Bt={fireSkinLoaded:Ot},At=re.DOM,It=function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}},Lt=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},zt=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[Lt("0"),Wt.createSidebar(e)]}},Ft=function(e,t,n){var i,r,o;if(Z(e)===!1&&n.skinUiCss?At.styleSheetLoader.load(n.skinUiCss,Bt.fireSkinLoaded(e)):Bt.fireSkinLoaded(e)(),i=t.panel=oe.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[L(e)===!1?null:{type:"menubar",border:"0 0 1 0",items:bt.createMenuButtons(e)},Be.createToolbars(e,U(e))]},Wt.hasSidebar(e)?zt(e):Lt("1 0 0 0")]}),Pe.setUiContainer(e,i),"none"!==ee(e)&&(r={type:"resizehandle",direction:ee(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;o={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===ee(e)?Ct.resizeTo(e,o.width+t.deltaX,o.height+t.deltaY):Ct.resizeTo(e,null,o.height+t.deltaY)}}),F(e)){var s='<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>',a=se.translate(["Powered by {0}",s]),l=I(e)?{type:"label",classes:"branding",html:" "+a}:null;i.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},r,l]})}return ce.fireBeforeRenderUI(e),e.on("SwitchMode",It(i)),i.renderBefore(n.targetNode).reflow(),V(e)&&e.setMode("readonly"),n.width&&At.setStyle(i.getEl(),"width",n.width),e.on("remove",function(){i.remove(),i=null}),he.addKeys(e,i),Ye.addContextualToolbars(e),{iframeContainer:i.find("#iframe")[0].getEl(),editorContainer:i.getEl()}},Ut={render:Ft},Vt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Yt=0,qt={id:function(){return"mceu_"+Yt++},create:function(e,t,n){var i=document.createElement(e);return re.DOM.setAttribs(i,t),"string"==typeof n?i.innerHTML=n:A.each(n,function(e){e.nodeType&&i.appendChild(e)}),i},createFragment:function(e){return re.DOM.createFragment(e)},getWindowSize:function(){return re.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return re.DOM.getPos(e,t||qt.getContainer())},getContainer:function(){return Rt.container?Rt.container:document.body},getViewPort:function(e){return re.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return re.DOM.addClass(e,t)},removeClass:function(e,t){return re.DOM.removeClass(e,t)},hasClass:function(e,t){return re.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return re.DOM.toggleClass(e,t,n)},css:function(e,t,n){return re.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return re.DOM.getStyle(e,t,!0)},on:function(e,t,n,i){return re.DOM.bind(e,t,n,i)},off:function(e,t,n){return re.DOM.unbind(e,t,n)},fire:function(e,t,n){return re.DOM.fire(e,t,n)},innerHtml:function(e,t){re.DOM.setHTML(e,t)}},$t=function(e){return"static"===qt.getRuntimeStyle(e,"position")},Xt=function(e){return e.state.get("fixed")},jt=function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}},Jt=function(){var e=window,t=Math.max(e.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),n=Math.max(e.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop),i=e.innerWidth||document.documentElement.clientWidth,r=e.innerHeight||document.documentElement.clientHeight;return{x:t,y:n,w:t+i,h:n+r}},Gt=function(e){var t=Pe.getUiContainer(e);return t&&!Xt(e)?jt(t):Jt()},Kt={testMoveRel:function(t,n){for(var i=Gt(this),r=0;r<n.length;r++){var o=e(this,t,n[r]);if(Xt(this)){if(o.x>0&&o.x+o.w<i.w&&o.y>0&&o.y+o.h<i.h)return n[r]}else if(o.x>i.x&&o.x+o.w<i.w&&o.y>i.y&&o.y+o.h<i.h)return n[r]}return n[0]},moveRel:function(t,n){"string"!=typeof n&&(n=this.testMoveRel(t,n));var i=e(this,t,n);return this.moveTo(i.x,i.y)},moveBy:function(e,t){var n=this,i=n.layoutRect();return n.moveTo(i.x+e,i.y+t),n},moveTo:function(e,t){function n(e,t,n){return e<0?0:e+n>t?(e=t-n,e<0?0:e):e}var i=this;if(i.settings.constrainToViewport){var r=Gt(this),o=i.layoutRect();e=n(e,r.w,o.w),t=n(t,r.h,o.h)}var s=Pe.getUiContainer(i);return s&&$t(s)&&!Xt(i)&&(e-=s.scrollLeft,t-=s.scrollTop),s&&(e+=1,t+=1),i.state.get("rendered")?i.layoutRect({x:e,y:t}).repaint():(i.settings.x=e,i.settings.y=t),i.fire("move",{x:e,y:t}),i}},Zt=tinymce.util.Tools.resolve("tinymce.util.Class"),Qt=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),en={parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},measureBox:function(e,t){function n(t){var n=e.ownerDocument.defaultView;if(n){var i=n.getComputedStyle(e,null);return i?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),i.getPropertyValue(t)):null}return e.currentStyle[t]}function i(e){var t=parseFloat(n(e));return isNaN(t)?0:t}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}}};A.extend(n.prototype,{
add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e};var tn,nn,rn,on=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,sn=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,an=/^\s*|\s*$/g,ln=Zt.extend({init:function(e){function t(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}function n(e){if(e)return function(t){return t._name===e}}function i(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}function r(e,t,n){if(e)return function(i){var r=i[e]?i[e]():"";return t?"="===t?r===n:"*="===t?r.indexOf(n)>=0:"~="===t?(" "+r+" ").indexOf(" "+n+" ")>=0:"!="===t?r!==n:"^="===t?0===r.indexOf(n):"$="===t&&r.substr(r.length-n.length)===n:!!n}}function o(e){var t;if(e)return e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=a(e[1],[]),function(e){return!l(e,t)}):(e=e[2],function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2===0:"odd"===e?n%2===1:!!t[e]&&t[e]()})}function s(e,s,a){function l(e){e&&s.push(e)}var u;return u=on.exec(e.replace(an,"")),l(t(u[1])),l(n(u[2])),l(i(u[3])),l(r(u[4],u[5],u[6])),l(o(u[7])),s.pseudo=!!u[7],s.direct=a,s}function a(e,t){var n,i,r,o=[];do if(sn.exec(""),i=sn.exec(e),i&&(e=i[3],o.push(i[1]),i[2])){n=i[3];break}while(i);for(n&&a(n,t),e=[],r=0;r<o.length;r++)">"!==o[r]&&e.push(s(o[r],[],">"===o[r-1]));return t.push(e),t}var l=this.match;this._selectors=a(e,[])},match:function(e,t){var n,i,r,o,s,a,l,u,c,d,f,h,m;for(t=t||this._selectors,n=0,i=t.length;n<i;n++){for(s=t[n],o=s.length,m=e,h=0,r=o-1;r>=0;r--)for(u=s[r];m;){if(u.pseudo)for(f=m.parent().items(),c=d=f.length;c--&&f[c]!==m;);for(a=0,l=u.length;a<l;a++)if(!u[a](m,c,d)){a=l+1;break}if(a===l){h++;break}if(r===o-1)break;m=m.parent()}if(h===o)return!0}return!1},find:function(e){function t(e,n,i){var r,s,a,l,u,c=n[i];for(r=0,s=e.length;r<s;r++){for(u=e[r],a=0,l=c.length;a<l;a++)if(!c[a](u,r,s)){a=l+1;break}if(a===l)i===n.length-1?o.push(u):u.items&&t(u.items(),n,i+1);else if(c.direct)return;u.items&&t(u.items(),n,i)}}var n,r,o=[],s=this._selectors;if(e.items){for(n=0,r=s.length;n<r;n++)t(e.items(),s[n],0);r>1&&(o=i(o))}return tn||(tn=ln.Collection),new tn(o)}}),un=Array.prototype.push,cn=Array.prototype.slice;rn={length:0,init:function(e){e&&this.add(e)},add:function(e){var t=this;return A.isArray(e)?un.apply(t,e):e instanceof nn?t.add(e.toArray()):un.call(t,e),t},set:function(e){var t,n=this,i=n.length;for(n.length=0,n.add(e),t=n.length;t<i;t++)delete n[t];return n},filter:function(e){var t,n,i,r,o=this,s=[];for("string"==typeof e?(e=new ln(e),r=function(t){return e.match(t)}):r=e,t=0,n=o.length;t<n;t++)i=o[t],r(i)&&s.push(i);return new nn(s)},slice:function(){return new nn(cn.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},each:function(e){return A.each(this,e),this},toArray:function(){return A.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new nn(A.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n,i=this;return void 0!==t?(i.each(function(n){n[e]&&n[e](t)}),i):(n=i[0],n&&n[e]?n[e]():void 0)},exec:function(e){var t=this,n=A.toArray(arguments).slice(1);return t.each(function(t){t[e]&&t[e].apply(t,n)}),t},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},A.each("fire on off show hide append prepend before after reflow".split(" "),function(e){rn[e]=function(){var t=A.toArray(arguments);return this.each(function(n){e in n&&n[e].apply(n,t)}),this}}),A.each("text name disabled active selected checked visible parent value data".split(" "),function(e){rn[e]=function(t){return this.prop(e,t)}}),nn=Zt.extend(rn),ln.Collection=nn;var dn=nn,fn=function(e){this.create=e.create};fn.create=function(e,t){return new fn({create:function(n,i){var r,o=function(e){n.set(i,e.value)},s=function(n){e.set(t,n.value)};return n.on("change:"+i,s),e.on("change:"+t,o),r=n._bindings,r||(r=n._bindings=[],n.on("destroy",function(){for(var e=r.length;e--;)r[e]()})),r.push(function(){e.off("change:"+t,o)}),e.get(t)}})};var hn,mn,gn=tinymce.util.Tools.resolve("tinymce.util.Observable"),pn=Zt.extend({Mixins:[gn],init:function(e){var t,n;e=e||{};for(t in e)n=e[t],n instanceof fn&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,i,r=this.data[e];if(t instanceof fn&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return o(r,t)||(this.data[e]=t,i={target:this,name:e,value:t,oldValue:r},this.fire("change:"+e,i),this.fire("change",i)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return fn.create(this,e)},destroy:function(){this.fire("destroy")}}),vn={},bn={add:function(e){var t=e.parent();if(t){if(!t._layout||t._layout.isNative())return;vn[t._id]||(vn[t._id]=t),hn||(hn=!0,ge.requestAnimationFrame(function(){var e,t;hn=!1;for(e in vn)t=vn[e],t.state.get("rendered")&&t.reflow();vn={}},document.body))}},remove:function(e){vn[e._id]&&delete vn[e._id]}},yn="onmousewheel"in document,xn=!1,wn="mce-",_n=0,Cn={Statics:{classPrefix:wn},isRtl:function(){return mn.rtl},classPrefix:wn,init:function(e){function t(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)o.classes.add(e[t])}var i,r,o=this;o.settings=e=A.extend({},o.Defaults,e),o._id=e.id||"mceu_"+_n++,o._aria={role:e.role},o._elmCache={},o.$=Vt,o.state=new pn({visible:!0,active:!1,disabled:!1,value:""}),o.data=new pn(e.data),o.classes=new n(function(){o.state.get("rendered")&&(o.getEl().className=this.toString())}),o.classes.prefix=o.classPrefix,i=e.classes,i&&(o.Defaults&&(r=o.Defaults.classes,r&&i!==r&&t(r)),t(i)),A.each("title text name visible disabled active value".split(" "),function(t){t in e&&o[t](e[t])}),o.on("click",function(){if(o.disabled())return!1}),o.settings=e,o.borderBox=en.parseBox(e.border),o.paddingBox=en.parseBox(e.padding),o.marginBox=en.parseBox(e.margin),e.hidden&&o.hide()},Properties:"parent,name",getContainerElm:function(){var e=Pe.getUiContainer(this);return e?e:qt.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,i,r,o,s,a,l,u,c=this,d=c.settings,f=c.getEl();e=c.borderBox=c.borderBox||en.measureBox(f,"border"),c.paddingBox=c.paddingBox||en.measureBox(f,"padding"),c.marginBox=c.marginBox||en.measureBox(f,"margin"),u=qt.getSize(f),a=d.minWidth,l=d.minHeight,r=a||u.width,o=l||u.height,n=d.width,i=d.height,s=d.autoResize,s="undefined"!=typeof s?s:!n&&!i,n=n||r,i=i||o;var h=e.left+e.right,m=e.top+e.bottom,g=d.maxWidth||65535,p=d.maxHeight||65535;return c._layoutRect=t={x:d.x||0,y:d.y||0,w:n,h:i,deltaW:h,deltaH:m,contentW:n-h,contentH:i-m,innerW:n-h,innerH:i-m,startMinWidth:a||0,startMinHeight:l||0,minW:Math.min(r,g),minH:Math.min(o,p),maxW:g,maxH:p,autoResize:s,scrollW:0},c._lastLayoutRect={},t},layoutRect:function(e){var t,n,i,r,o,s=this,a=s._layoutRect;return a||(a=s.initLayoutRect()),e?(i=a.deltaW,r=a.deltaH,void 0!==e.x&&(a.x=e.x),void 0!==e.y&&(a.y=e.y),void 0!==e.minW&&(a.minW=e.minW),void 0!==e.minH&&(a.minH=e.minH),n=e.w,void 0!==n&&(n=n<a.minW?a.minW:n,n=n>a.maxW?a.maxW:n,a.w=n,a.innerW=n-i),n=e.h,void 0!==n&&(n=n<a.minH?a.minH:n,n=n>a.maxH?a.maxH:n,a.h=n,a.innerH=n-r),n=e.innerW,void 0!==n&&(n=n<a.minW-i?a.minW-i:n,n=n>a.maxW-i?a.maxW-i:n,a.innerW=n,a.w=n+i),n=e.innerH,void 0!==n&&(n=n<a.minH-r?a.minH-r:n,n=n>a.maxH-r?a.maxH-r:n,a.innerH=n,a.h=n+r),void 0!==e.contentW&&(a.contentW=e.contentW),void 0!==e.contentH&&(a.contentH=e.contentH),t=s._lastLayoutRect,t.x===a.x&&t.y===a.y&&t.w===a.w&&t.h===a.h||(o=mn.repaintControls,o&&o.map&&!o.map[s._id]&&(o.push(s),o.map[s._id]=!0),t.x=a.x,t.y=a.y,t.w=a.w,t.h=a.h),s):a},repaint:function(){var e,t,n,i,r,o,s,a,l,u,c=this;l=document.createRange?function(e){return e}:Math.round,e=c.getEl().style,i=c._layoutRect,a=c._lastRepaintRect||{},r=c.borderBox,o=r.left+r.right,s=r.top+r.bottom,i.x!==a.x&&(e.left=l(i.x)+"px",a.x=i.x),i.y!==a.y&&(e.top=l(i.y)+"px",a.y=i.y),i.w!==a.w&&(u=l(i.w-o),e.width=(u>=0?u:0)+"px",a.w=i.w),i.h!==a.h&&(u=l(i.h-s),e.height=(u>=0?u:0)+"px",a.h=i.h),c._hasBody&&i.innerW!==a.innerW&&(u=l(i.innerW),n=c.getEl("body"),n&&(t=n.style,t.width=(u>=0?u:0)+"px"),a.innerW=i.innerW),c._hasBody&&i.innerH!==a.innerH&&(u=l(i.innerH),n=n||c.getEl("body"),n&&(t=t||n.style,t.height=(u>=0?u:0)+"px"),a.innerH=i.innerH),c._lastRepaintRect=a,c.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,qt.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(r){return t||i.parentsAndSelf().each(function(i){var r=i.settings.callbacks;if(r&&(t=r[e]))return n=i,!1}),t?t.call(n,r):(r.action=e,void this.fire("execute",r))}}var i=this;return s(i).on(e,n(t)),i},off:function(e,t){return s(this).off(e,t),this},fire:function(e,t,n){var i=this;if(t=t||{},t.control||(t.control=i),t=s(i).fire(e,t),n!==!1&&i.parent)for(var r=i.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return s(this).has(e)},parents:function(e){var t,n=this,i=new dn;for(t=n.parent();t;t=t.parent())i.add(t);return e&&(i=i.filter(e)),i},parentsAndSelf:function(e){return new dn(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=Vt("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&i.setAttribute("role"===e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return mn.translate?mn.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,i=n.getEl(),r=n.parent();if(n.items){var o=n.items().toArray();for(t=o.length;t--;)o[t].remove()}r&&r.items&&(e=[],r.items().each(function(t){t!==n&&e.push(t)}),r.items().set(e),r._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&Vt(i).off();var s=n.getRoot().controlIdLookup;return s&&delete s[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return Vt(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return Vt(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,i,r,o=this,s=o.settings;o.$el=Vt(o.getEl()),o.state.set("rendered",!0);for(i in s)0===i.indexOf("on")&&o.on(i.substr(2),s[i]);if(o._eventsRoot){for(n=o.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(i in r._nativeEvents)o._nativeEvents[i]=!0}a(o),s.style&&(e=o.getEl(),e&&(e.setAttribute("style",s.style),e.style.cssText=s.style)),o.settings.border&&(t=o.borderBox,o.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=o.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[o._id]=o;for(var u in o._aria)o.aria(u,o._aria[u]);o.state.get("visible")===!1&&(o.getEl().style.display="none"),o.bindStates(),o.state.on("change:visible",function(e){var t,n=e.value;o.state.get("rendered")&&(o.getEl().style.display=n===!1?"none":"",o.getEl().getBoundingClientRect()),t=o.parent(),t&&(t._lastRect=null),o.fire(n?"show":"hide"),bn.add(o)}),o.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,i,r=e;for(n=i=0;r&&r!==t&&r.nodeType;)n+=r.offsetLeft||0,i+=r.offsetTop||0,r=r.offsetParent;return{x:n,y:i}}var n,i,r,o,s,a,l=this.getEl(),u=l.parentNode,c=t(l,u);return n=c.x,i=c.y,r=l.offsetWidth,o=l.offsetHeight,s=u.clientWidth,a=u.clientHeight,"end"===e?(n-=s-r,i-=a-o):"center"===e&&(n-=s/2-r/2,i-=a/2-o/2),u.scrollLeft=n,u.scrollTop=i,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var i=n.length;i--;)n[i].rootControl=e;return e},reflow:function(){bn.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};A.each("text title visible disabled active value".split(" "),function(e){Cn[e]=function(t){return 0===arguments.length?this.state.get(e):("undefined"!=typeof t&&this.state.set(e,t),this)}}),mn=Zt.extend(Cn);var Rn,En,kn,Tn,Sn=mn,Hn=function(e){return!!e.getAttribute("data-mce-tabstop")},Nn={},Mn=Sn.extend({init:function(e){var t=this;t._super(e),e=t.settings,e.fixed&&t.state.set("fixed",!0),t._items=new dn,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new n(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=oe.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return e=Nn[e]=Nn[e]||new ln(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,i,r=this;return e&&(n=r.keyboardNav||r.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(r):(i=r.find("*"),r.statusbar&&i.add(r.statusbar.items()),i.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),r)},replace:function(e,t){for(var n,i=this.items(),r=i.length;r--;)if(i[r]===e){i[r]=t;break}r>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,i=[];return A.isArray(e)||(e=[e]),A.each(e,function(e){e&&(e instanceof Sn||("string"==typeof e&&(e={type:e}),t=A.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=oe.create(t)),i.push(e))}),i},renderNew:function(){var e=this;return e.items().each(function(t,n){var i;t.parent(e),t.state.get("rendered")||(i=e.getEl("body"),i.hasChildNodes()&&n<=i.childNodes.length-1?Vt(i.childNodes[n]).before(t.renderHtml()):Vt(i).append(t.renderHtml()),t.postRender(),bn.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var i,r,o,s=this;return e=s.create(e),i=s.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(r=i.slice(0,t).toArray(),o=i.slice(t).toArray(),i.set(r.concat(e,o))),s.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),i=e.value();n&&"undefined"!=typeof i&&(t[n]=i)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=l({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var e;if(bn.remove(this),this.visible()){for(Sn.repaintControls=[],Sn.repaintControls.map={},this.recalc(),e=Sn.repaintControls.length;e--;)Sn.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),Sn.repaintControls=[]}return this}}),Dn={init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function e(){function e(e,o,s,a,l,u){var c,d,f,h,m,g,p,v,b;if(d=n.getEl("scroll"+e)){if(v=o.toLowerCase(),b=s.toLowerCase(),Vt(n.getEl("absend")).css(v,n.layoutRect()[a]-1),!l)return void Vt(d).css("display","none");Vt(d).css("display","block"),c=n.getEl("body"),f=n.getEl("scroll"+e+"t"),h=c["client"+s]-2*i,h-=t&&r?d["client"+u]:0,m=c["scroll"+s],g=h/m,p={},p[v]=c["offset"+o]+i,p[b]=h,Vt(d).css(p),p={},p[v]=c["scroll"+o]*g,p[b]=h*g,Vt(f).css(p)}}var t,r,o;o=n.getEl("body"),t=o.scrollWidth>o.clientWidth,r=o.scrollHeight>o.clientHeight,e("h","Left","Width","contentW",t,"Height"),e("v","Top","Height","contentH",r,"Width")}function t(){function e(e,t,r,o,s){var a,l=n._id+"-scroll"+e,u=n.classPrefix;Vt(n.getEl()).append('<div id="'+l+'" class="'+u+"scrollbar "+u+"scrollbar-"+e+'"><div id="'+l+'t" class="'+u+'scrollbar-thumb"></div></div>'),n.draghelper=new d(l+"t",{start:function(){a=n.getEl("body")["scroll"+t],Vt("#"+l).addClass(u+"active")},drag:function(l){var u,c,d,f,h=n.layoutRect();c=h.contentW>h.innerW,d=h.contentH>h.innerH,f=n.getEl("body")["client"+r]-2*i,f-=c&&d?n.getEl("scroll"+e)["client"+s]:0,u=f/n.getEl("body")["scroll"+r],n.getEl("body")["scroll"+t]=a+l["delta"+o]/u},stop:function(){Vt("#"+l).removeClass(u+"active")}})}n.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height")}var n=this,i=2;n.settings.autoScroll&&(n._hasScroll||(n._hasScroll=!0,t(),n.on("wheel",function(t){var i=n.getEl("body");i.scrollLeft+=10*(t.deltaX||0),i.scrollTop+=10*t.deltaY,e()}),Vt(n.getEl("body")).on("scroll",e)),e())}},Pn=Mn.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[Dn],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),Wn={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=qt.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this,i=n.layoutRect();return n.resizeTo(i.w+e,i.h+t)}},On=[],Bn=[],An=Pn.extend({Mixins:[Kt,Wn],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(m(),p(),On.push(t)),e.autofix&&(g(),t.on("move",function(){v(this)})),t.on("postrender show",function(e){if(e.control===t){var n,i=t.classPrefix;t.modal&&!Tn&&(n=Vt("#"+i+"modal-block",t.getContainerElm()),n[0]||(n=Vt('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>').appendTo(t.getContainerElm())),ge.setTimeout(function(){n.addClass(i+"in"),Vt(t.getEl()).addClass(i+"in")}),Tn=!0),b(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=qt.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this,n=t._super();for(e=On.length;e--&&On[e]!==t;);return e===-1&&On.push(t),n},hide:function(){return y(this),b(!1,this),this._super()},hideAll:function(){An.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),b(!1,e)),e},remove:function(){y(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});An.hideAll=function(){for(var e=On.length;e--;){var t=On[e];t&&t.settings.autohide&&(t.hide(),On.splice(e,1))}};var In=function(e,t){return!(!e||t.settings.ui_container)},Ln=function(e,t,n){var i,r,o=re.DOM,s=Y(e);s&&(r=o.select(s)[0]);var a=function(){if(i&&i.moveRel&&i.visible()&&!i._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),r=0,s=0;if(t){var a=o.getPos(n),l=o.getPos(t);r=Math.max(0,l.x-a.x),s=Math.max(0,l.y-a.y)}i.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,s)}},l=function(){i&&(i.show(),a(),o.addClass(e.getBody(),"mce-edit-focus"))},u=function(){i&&(i.hide(),An.hideAll(),o.removeClass(e.getBody(),"mce-edit-focus"))},c=function(){return i?void(i.visible()||l()):(i=t.panel=oe.create({type:r?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:In(r,e),fixed:In(r,e),border:1,items:[L(e)===!1?null:{type:"menubar",border:"0 0 1 0",items:bt.createMenuButtons(e)},Be.createToolbars(e,U(e))]}),Pe.setUiContainer(e,i),ce.fireBeforeRenderUI(e),r?i.renderTo(r).reflow():i.renderTo().reflow(),he.addKeys(e,i),l(),Ye.addContextualToolbars(e),e.on("nodeChange",a),e.on("ResizeWindow",a),e.on("activate",l),e.on("deactivate",u),void e.nodeChanged())};return e.settings.content_editable=!0,e.on("focus",function(){Z(e)===!1&&n.skinUiCss?o.styleSheetLoader.load(n.skinUiCss,c,c):c()}),e.on("blur hide",u),e.on("remove",function(){i&&(i.remove(),i=null)}),Z(e)===!1&&n.skinUiCss?o.styleSheetLoader.load(n.skinUiCss,Bt.fireSkinLoaded(e)):Bt.fireSkinLoaded(e)(),{}},zn={render:Ln},Fn=function(e,t){var n;e.on("ProgressState",function(e){n=n||new x(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})},Un={setup:Fn},Vn=function(e,t,n){var i=te(e);return i&&(n.skinUiCss=i+"/skin.min.css",e.contentCSS.push(i+"/content"+(e.inline?".inline":"")+".min.css")),Un.setup(e,t),Q(e)?zn.render(e,t,n):Ut.render(e,t,n)},Yn={renderUI:Vn},qn=Sn.extend({Mixins:[Kt],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),$n=Sn.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&$n.tooltips!==!1&&(t.on("mouseenter",function(n){var i=t.tooltip().moveTo(-65535);if(n.control===t){var r=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.classes.toggle("tooltip-n","bc-tc"===r),i.classes.toggle("tooltip-nw","bc-tl"===r),i.classes.toggle("tooltip-ne","bc-tr"===r),i.moveRel(t.getEl(),r)}else i.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove(),t._tooltip=null})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new qn({type:"tooltip"}),Pe.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Xn=$n.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}}),jn=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},Jn=Sn.extend({Mixins:[Kt],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new Xn),t.on("click",function(e){e.target.className.indexOf(t.classPrefix+"close")!==-1&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",i="",r="",o="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),o=' style="max-width: '+e.maxWidth+"px;"+(e.color?"background-color: "+e.color+';"':'"'),e.closeButton&&(i='<button type="button" class="'+t+'close" aria-hidden="true">×</button>'),e.progressBar&&(r=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+o+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+r+i+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return ge.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),jn(e,e.state.get("text"))},100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().firstChild.innerHTML=t.value,jn(e,t.value)}),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",function(t){jn(e,e.state.get("text"))})),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}}),Gn=[],Kn="",Zn=An.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new Pn({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",function(e){var n=t.classPrefix+"close";(qt.hasClass(e.target,n)||qt.hasClass(e.target.parentNode,n))&&t.close()}),t.on("cancel",function(){t.close()}),t.on("move",function(e){e.control===t&&An.hideAll()}),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,i,r=this,o=r.statusbar;r._fullscreen&&(r.layoutRect(qt.getWindowSize()),r.layoutRect().contentH=r.layoutRect().innerH),r._super(),e=r.layoutRect(),r.settings.title&&!r._fullscreen&&(t=e.headerW,t>e.w&&(n=e.x-Math.max(0,t/2),r.layoutRect({w:t,x:n}),i=!0)),o&&(o.layoutRect({w:r.layoutRect().innerW}).recalc(),t=o.layoutRect().minW+e.deltaW,t>e.w&&(n=e.x-Math.max(0,t-e.w),r.layoutRect({w:t,x:n}),i=!0)),i&&r.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),i=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var r=qt.getSize(e);n.headerW=r.width,n.headerH=r.height,i+=n.headerH}t.statusbar&&(i+=t.statusbar.layoutRect().h),n.deltaH+=i,n.minH+=i,n.h+=i;var o=qt.getWindowSize();return n.x=t.settings.x||Math.max(0,o.w/2-n.w/2),n.y=t.settings.y||Math.max(0,o.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,r=e.settings,o="",s="",a=r.html;return e.preRender(),t.preRender(e),r.title&&(o='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+e.encode(r.title)+'</div><div id="'+n+'-dragh" class="'+i+'dragh"></div><button type="button" class="'+i+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(a='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),"undefined"==typeof a&&(a=t.renderHtml(e)),e.statusbar&&(s=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+a+"</div>"+s+"</div></div>"},fullscreen:function(e){var t,n,i=this,r=document.documentElement,o=i.classPrefix;if(e!==i._fullscreen)if(Vt(window).on("resize",function(){var e;if(i._fullscreen)if(t)i._timer||(i._timer=ge.setTimeout(function(){var e=qt.getWindowSize();i.moveTo(0,0).resizeTo(e.w,e.h),i._timer=0},50));else{e=(new Date).getTime();var n=qt.getWindowSize();i.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-e>50&&(t=!0)}}),n=i.layoutRect(),i._fullscreen=e,e){i._initial={x:n.x,y:n.y,w:n.w,h:n.h},i.borderBox=en.parseBox("0"),i.getEl("head").style.display="none",n.deltaH-=n.headerH+2,Vt([r,document.body]).addClass(o+"fullscreen"),i.classes.add("fullscreen");var s=qt.getWindowSize();i.moveTo(0,0).resizeTo(s.w,s.h)}else i.borderBox=en.parseBox(i.settings.border),i.getEl("head").style.display="",n.deltaH+=n.headerH,Vt([r,document.body]).removeClass(o+"fullscreen"),i.classes.remove("fullscreen"),i.moveTo(i._initial.x,i._initial.y).resizeTo(i._initial.w,i._initial.h);return i.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new d(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){
t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),Gn.push(t),_(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e,t=this;for(t.dragHelper.destroy(),t._super(),t.statusbar&&this.statusbar.remove(),C(t.classPrefix,!1),e=Gn.length;e--;)Gn[e]===t&&Gn.splice(e,1);_(Gn.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});E();var Qn=Zn.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){function t(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),i(t)}}}var n,i=e.callback||function(){};switch(e.buttons){case Qn.OK_CANCEL:n=[t("Ok",!0,!0),t("Cancel",!1)];break;case Qn.YES_NO:case Qn.YES_NO_CANCEL:n=[t("Yes",1,!0),t("No",0)],e.buttons===Qn.YES_NO_CANCEL&&n.push(t("Cancel",-1));break;default:n=[t("Ok",!0,!0)]}return new Zn({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){i(!1)}}).renderTo(document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,Qn.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=Qn.OK_CANCEL,Qn.msgBox(e)}}}),ei=function(e){var t=function(t){return Yn.renderUI(e,this,t)},n=function(t,n){return Ct.resizeTo(e,t,n)},i=function(t,n){return Ct.resizeBy(e,t,n)},r=function(){return w(e)},o=function(){return k(e)};return{renderUI:t,resizeTo:n,resizeBy:i,getNotificationManagerImpl:r,getWindowManagerImpl:o}},ti={get:ei},ni=Zt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=A.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,i,r,o=this,s=o.settings;t=s.firstControlClass,n=s.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(s.controlClass),e.visible()&&(i||(i=e),r=e)}),i&&i.classes.add(t),r&&r.classes.add(n)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),ii=ni.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),ri=$n.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&(e=t.style,e.width=e.height="100%"),this._super()},renderHtml:function(){var e,t,n=this,i=n._id,r=n.classPrefix,o=n.state.get("icon"),s=n.state.get("text"),a="",l=n.settings;return e=l.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",s&&(n.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+n.encode(s)+"</span>"),o=o?r+"ico "+r+"i-"+o:"",t="boolean"==typeof l.active?' aria-pressed="'+l.active+'"':"",'<div id="'+i+'" class="'+n.classes+'" tabindex="-1"'+t+'><button id="'+i+'-button" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+a+"</button></div>"},bindStates:function(){function e(e){var r=n("span."+i,t.getEl());e?(r[0]||(n("button:first",t.getEl()).append('<span class="'+i+'"></span>'),r=n("span."+i,t.getEl())),r.html(t.encode(e))):r.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,n=t.$,i=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var i=n.value,r=t.classPrefix;t.settings.icon=i,i=i?r+"ico "+r+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,s=o.getElementsByTagName("i")[0];i?(s&&s===o.firstChild||(s=document.createElement("i"),o.insertBefore(s,o.firstChild)),s.className=i):s&&o.removeChild(s),e(t.state.get("text"))}),t._super()}}),oi=ri.extend({init:function(e){var t=this;e=A.extend({text:"Browse...",multiple:!1,accept:null},e),t._super(e),t.classes.add("browsebutton"),e.multiple&&t.classes.add("multiple")},postRender:function(){var e=this,t=qt.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),Vt(t).on("change",function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)}),Vt(t).on("click",function(e){e.stopPropagation()}),Vt(e.getEl("button")).on("click",function(e){e.stopPropagation(),t.click()}),e.getEl().appendChild(t)},remove:function(){Vt(this.getEl("button")).off(),Vt(this.getEl("input")).off(),this._super()}}),si=Mn.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),ai=$n.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,i=t.classPrefix;if("undefined"==typeof n)return t.settings.icon;t.settings.icon=n,n=n?i+"ico "+i+"i-"+t.settings.icon:"";var r=t.getEl().firstChild,o=r.getElementsByTagName("i")[0];n?(o&&o===r.firstChild||(o=document.createElement("i"),r.insertBefore(o,r.firstChild)),o.className=n):o&&r.removeChild(o)}),t.state.get("checked")&&e(!0),t._super()}}),li=tinymce.util.Tools.resolve("tinymce.util.VK"),ui=$n.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var i=n.target,r=t.getEl();if(Vt.contains(r,i)||i===r)for(;i&&i!==r;)i.id&&i.id.indexOf("-open")!==-1&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),i=i.parentNode}),t.on("keydown",function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),i=e.target.value;i!==n&&(t.state.set("value",i),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&e.target.className.indexOf(t.classPrefix+"status")!==-1){var i=t.statusMessage()||"Ok",r=n.text(i).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===r),n.classes.toggle("tooltip-nw","bc-tl"===r),n.classes.toggle("tooltip-ne","bc-tr"===r),n.moveRel(e.target,r)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this,n=t.settings;t.menu||(e=n.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=oe.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,n=this,i=n.getEl(),r=n.getEl("open"),o=n.layoutRect(),s=0,a=i.firstChild;n.statusLevel()&&"none"!==n.statusLevel()&&(s=parseInt(qt.getRuntimeStyle(a,"padding-right"),10)-parseInt(qt.getRuntimeStyle(a,"padding-left"),10)),e=r?o.w-qt.getSize(r).width-10:o.w-10;var l=document;return l.all&&(!l.documentMode||l.documentMode<=8)&&(t=n.layoutRect().h-2+"px"),Vt(a).css({width:e-s,lineHeight:t}),n._super(),n},postRender:function(){var e=this;return Vt(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n=this,i=n._id,r=n.settings,o=n.classPrefix,s=n.state.get("value")||"",a="",l="",u="";return"spellcheck"in r&&(l+=' spellcheck="'+r.spellcheck+'"'),r.maxLength&&(l+=' maxlength="'+r.maxLength+'"'),r.size&&(l+=' size="'+r.size+'"'),r.subtype&&(l+=' type="'+r.subtype+'"'),u='<i id="'+i+'-status" class="mce-status mce-ico" style="display: none"></i>',n.disabled()&&(l+=' disabled="disabled"'),e=r.icon,e&&"caret"!==e&&(e=o+"ico "+o+"i-"+r.icon),t=n.state.get("text"),(e||t)&&(a='<div id="'+i+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+o+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+i+'" class="'+n.classes+'"><input id="'+i+'-inp" class="'+o+'textbox" value="'+n.encode(s,!1)+'" hidefocus="1"'+l+' placeholder="'+n.encode(r.placeholder)+'" />'+u+a+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0===e.length)return void n.hideMenu();var i=function(e,t){return function(){n.fire("selectitem",{title:t,value:e})}};n.menu?n.menu.items().remove():n.menu=oe.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),A.each(e,function(e){n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:i(e.value,e.title)})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var r=n.layoutRect().w;n.menu.layoutRect({w:r,minW:0,maxW:r}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var n=e.getEl("status"),i=e.classPrefix,r=t.value;qt.css(n,"display","none"===r?"none":""),qt.toggleClass(n,i+"i-checkmark","ok"===r),qt.toggleClass(n,i+"i-warning","warn"===r),qt.toggleClass(n,i+"i-error","error"===r),e.classes.toggle("has-status","none"!==r),e.repaint()}),qt.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var i=n.keyCode;"INPUT"===n.target.nodeName&&(i===li.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):i===li.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){Vt(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),ci=ui.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(i){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}}),di=ri.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new An(n).on("hide",function(){e.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var i=["bc-tc","bc-tl","bc-tr"],r=["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"],o=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?i:r));e.panel.classes.toggle("start","l"===o.substr(-1)),e.panel.classes.toggle("end","r"===o.substr(-1));var s="t"===o.substr(0,1);e.panel.classes.toggle("bottom",!s),e.panel.classes.toggle("top",s),e.panel.moveRel(e.getEl(),o)},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),fi=re.DOM,hi=di.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.state.get("text"),r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",s="";return i&&(e.classes.add("btn-has-text"),s='<span class="'+n+'txt">'+e.encode(i)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+s+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==e||fi.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))}),delete e.settings.onclick,e._super()}}),mi=tinymce.util.Tools.resolve("tinymce.util.Color"),gi=$n.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var n,i,r=qt.getPos(e);return n=t.pageX-r.x,i=t.pageY-r.y,n=Math.max(0,Math.min(n/e.clientWidth,1)),i=Math.max(0,Math.min(i/e.clientHeight,1)),{x:n,y:i}}function t(e,t){var n=(360-e.h)/360;qt.css(s,{top:100*n+"%"}),t||qt.css(l,{left:e.s+"%",top:100-e.v+"%"}),a.style.background=mi({s:100,v:100,h:e.h}).toHex(),u.color().parse({s:e.s,v:e.v,h:e.h})}function n(n){var i;i=e(a,n),r.s=100*i.x,r.v=100*(1-i.y),t(r),u.fire("change")}function i(n){var i;i=e(o,n),r=c.toHsv(),r.h=360*(1-i.y),t(r,!0),u.fire("change")}var r,o,s,a,l,u=this,c=u.color();o=u.getEl("h"),s=u.getEl("hp"),a=u.getEl("sv"),l=u.getEl("svp"),u._repaint=function(){r=c.toHsv(),t(r)},u._super(),u._svdraghelper=new d(u._id+"-sv",{start:n,drag:n}),u._hdraghelper=new d(u._id+"-h",{start:i,drag:i}),u._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=mi()),this._color},renderHtml:function(){function e(){var e,t,n,i,s="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=o.split(","),e=0,t=i.length-1;e<t;e++)s+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+i[e]+",endColorstr="+i[e+1]+");-ms-"+n+i[e]+",endColorstr="+i[e+1]+')"></div>';return s}var t,n=this,i=n._id,r=n.classPrefix,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",s="background: -ms-linear-gradient(top,"+o+");background: linear-gradient(to bottom,"+o+");";return t='<div id="'+i+'-h" class="'+r+'colorpicker-h" style="'+s+'">'+e()+'<div id="'+i+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+i+'" class="'+n.classes+'"><div id="'+i+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+i+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}}),pi=$n.extend({init:function(e){var t=this;e=A.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),t._super(e),t.classes.add("dropzone"),e.multiple&&t.classes.add("multiple")},renderHtml:function(){var e,t,n=this,i=n.settings;return e={id:n._id,hidefocus:"1"},t=qt.create("div",e,"<span>"+this.translate(i.text)+"</span>"),i.height&&qt.css(t,"height",i.height+"px"),i.width&&qt.css(t,"width",i.width+"px"),t.className=n.classes,t.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes},n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var i=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return A.grep(t,function(e){return i.test(e.name)})};e._super(),e.$el.on("dragover",function(e){e.preventDefault()}),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",function(t){if(t.preventDefault(),!e.state.get("disabled")){var i=n(t.dataTransfer.files);e.value=function(){return i.length?e.settings.multiple?i:i[0]:null},i.length&&e.fire("change",t)}})},remove:function(){this.$el.off(),this._super()}}),vi=$n.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n,i=e.target;(n=i.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,i=this,r=e||[],o="",s=i.classPrefix;for(t=0,n=r.length;t<n;t++)o+=(t>0?'<div class="'+s+'divider" aria-hidden="true"> '+i.settings.delimiter+" </div>":"")+'<div role="button" class="'+s+"path-item"+(t===n-1?" "+s+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+i._id+"-"+t+'" aria-level="'+(t+1)+'">'+r[t].name+"</div>";return o||(o='<div class="'+s+'path-item"> </div>'),o}}),bi=vi.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var t=this,n=t.settings.editor;return n.settings.elementpath!==!1&&(t.on("select",function(e){n.focus(),n.selection.select(this.row()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(i){for(var r=[],o=i.parents,s=o.length;s--;)if(1===o[s].nodeType&&!e(o[s])){var a=n.fire("ResolveName",{name:o[s].nodeName.toLowerCase(),target:o[s]});if(a.isDefaultPrevented()||r.push({name:a.name,element:o[s]}),a.isPropagationStopped())break}t.row(r)})),t._super()}}),yi=Mn.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),xi=Mn.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each(function(t){var n,i=t.settings.label;i&&(n=new yi(A.extend({items:{type:"label",id:t._id+"-l",text:i,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults)),n.type="formitem",t.aria("labelledby",t._id+"-l"),"undefined"==typeof t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e,n,i,r=0,o=[];if(t.settings.labelGapCalc!==!1)for(i="children"===t.settings.labelGapCalc?t.find("formitem"):t.items(),i.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,o.push(t)}),n=t.settings.labelGap||0,e=o.length;e--;)o[e].settings.minWidth=r+n}var t=this;t._super(),t.on("show",e),e()}}),wi=xi.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),_i=0,Ci=function(e){var t=new Date,n=t.getTime(),i=Math.floor(1e9*Math.random());return _i++,e+"_"+i+_i+String(n)},Ri=function(e,t){var n=t||document,i=n.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return Ti(i.childNodes[0])},Ei=function(e,t){var n=t||document,i=n.createElement(e);return Ti(i)},ki=function(e,t){var n=t||document,i=n.createTextNode(e);return Ti(i)},Ti=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:be(e)}},Si=function(e,t,n){var i=e.dom();return Se.from(i.elementFromPoint(t,n)).map(Ti)},Hi={fromHtml:Ri,fromTag:Ei,fromText:ki,fromDom:Ti,fromPoint:Si},Ni=function(e){var t,n=!1;return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n||(n=!0,t=e.apply(null,i)),t}},Mi={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Di=function(e){var t=e.dom().nodeName;return t.toLowerCase()},Pi=function(e){return e.dom().nodeType},Wi=function(e){return e.dom().nodeValue},Oi=function(e){return function(t){return Pi(t)===e}},Bi=function(e){return Pi(e)===Mi.COMMENT||"#comment"===Di(e)},Ai=Oi(Mi.ELEMENT),Ii=Oi(Mi.TEXT),Li=Oi(Mi.DOCUMENT),zi={name:Di,type:Pi,value:Wi,isElement:Ai,isText:Ii,isDocument:Li,isComment:Bi},Fi=function(e){var t=zi.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},Ui=Ni(function(){return Vi(Hi.fromDom(document))}),Vi=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Hi.fromDom(t)},Yi={body:Ui,getBody:Vi,inBody:Fi},qi=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var i={};return Qe(e,function(e,n){i[e]=be(t[n])}),i}},$i=function(e,t){var n=[],i=function(e){return n.push(e),t(e)},r=t(e);do r=r.bind(i);while(r.isSome());return n},Xi={toArray:$i},ji="undefined"!=typeof window?window:Function("return this;")(),Ji=function(e,t){for(var n=void 0!==t&&null!==t?t:ji,i=0;i<e.length&&void 0!==n&&null!==n;++i)n=n[e[i]];return n},Gi=function(e,t){var n=e.split(".");return Ji(n,t)},Ki=function(e,t){return Gi(e,t)},Zi=function(e,t){var n=Ki(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},Qi={getOrDie:Zi},er=function(){var e=Qi.getOrDie("Node");return e},tr=function(e,t,n){return 0!==(e.compareDocumentPosition(t)&n)},nr=function(e,t){return tr(e,t,er().DOCUMENT_POSITION_PRECEDING)},ir=function(e,t){return tr(e,t,er().DOCUMENT_POSITION_CONTAINED_BY)},rr={documentPositionPreceding:nr,documentPositionContainedBy:ir},or=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.test(t))return i}},sr=function(e,t){var n=or(e,t);if(!n)return{major:0,minor:0};var i=function(e){return Number(t.replace(n,"$"+e))};return ur(i(1),i(2))},ar=function(e,t){var n=String(t).toLowerCase();return 0===e.length?lr():sr(e,n)},lr=function(){return ur(0,0)},ur=function(e,t){return{major:e,minor:t}},cr={nu:ur,detect:ar,unknown:lr},dr="Edge",fr="Chrome",hr="IE",mr="Opera",gr="Firefox",pr="Safari",vr=function(e,t){return function(){return t===e}},br=function(){return yr({current:void 0,version:cr.unknown()})},yr=function(e){var t=e.current,n=e.version;return{current:t,version:n,isEdge:vr(dr,t),isChrome:vr(fr,t),isIE:vr(hr,t),isOpera:vr(mr,t),isFirefox:vr(gr,t),isSafari:vr(pr,t)}},xr={unknown:br,nu:yr,edge:be(dr),chrome:be(fr),ie:be(hr),opera:be(mr),firefox:be(gr),safari:be(pr)},wr="Windows",_r="iOS",Cr="Android",Rr="Linux",Er="OSX",kr="Solaris",Tr="FreeBSD",Sr=function(e,t){return function(){return t===e}},Hr=function(){return Nr({current:void 0,version:cr.unknown()})},Nr=function(e){var t=e.current,n=e.version;return{current:t,version:n,isWindows:Sr(wr,t),isiOS:Sr(_r,t),isAndroid:Sr(Cr,t),isOSX:Sr(Er,t),isLinux:Sr(Rr,t),isSolaris:Sr(kr,t),isFreeBSD:Sr(Tr,t)}},Mr={unknown:Hr,nu:Nr,windows:be(wr),ios:be(_r),android:be(Cr),linux:be(Rr),osx:be(Er),solaris:be(kr),freebsd:be(Tr)},Dr=function(e,t){var n=String(t).toLowerCase();return nt(e,function(e){return e.search(n)})},Pr=function(e,t){return Dr(e,t).map(function(e){var n=cr.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Wr=function(e,t){return Dr(e,t).map(function(e){var n=cr.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Or={detectBrowser:Pr,detectOs:Wr},Br=function(e,t){return e.indexOf(t)!==-1},Ar=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ir=function(e){return function(t){return Br(t,e)}},Lr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){var t=Br(e,"edge/")&&Br(e,"chrome")&&Br(e,"safari")&&Br(e,"applewebkit");return t}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ar],search:function(e){return Br(e,"chrome")&&!Br(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Br(e,"msie")||Br(e,"trident")}},{name:"Opera",versionRegexes:[Ar,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ir("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ir("firefox")},{name:"Safari",versionRegexes:[Ar,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Br(e,"safari")||Br(e,"mobile/"))&&Br(e,"applewebkit")}}],zr=[{name:"Windows",search:Ir("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Br(e,"iphone")||Br(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ir("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ir("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ir("linux"),versionRegexes:[]},{name:"Solaris",search:Ir("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ir("freebsd"),versionRegexes:[]}],Fr={browsers:be(Lr),oses:be(zr)},Ur=function(e){var t=Fr.browsers(),n=Fr.oses(),i=Or.detectBrowser(t,e).fold(xr.unknown,xr.nu),r=Or.detectOs(n,e).fold(Mr.unknown,Mr.nu),o=T(r,i,e);return{browser:i,os:r,deviceType:o}},Vr={detect:Ur},Yr=Ni(function(){var e=navigator.userAgent;return Vr.detect(e)}),qr={detect:Yr},$r=Mi.ELEMENT,Xr=Mi.DOCUMENT,jr=function(e,t){var n=e.dom();if(n.nodeType!==$r)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Jr=function(e){return e.nodeType!==$r&&e.nodeType!==Xr||0===e.childElementCount},Gr=function(e,t){var n=void 0===t?document:t.dom();return Jr(n)?[]:Ze(n.querySelectorAll(e),Hi.fromDom)},Kr=function(e,t){var n=void 0===t?document:t.dom();return Jr(n)?Se.none():Se.from(n.querySelector(e)).map(Hi.fromDom)},Zr={all:Gr,is:jr,one:Kr},Qr=function(e,t){return e.dom()===t.dom()},eo=function(e,t){return e.dom().isEqualNode(t.dom())},to=function(e,t){return Ke(t,ye(Qr,e))},no=function(e,t){var n=e.dom(),i=t.dom();return n!==i&&n.contains(i)},io=function(e,t){return rr.documentPositionContainedBy(e.dom(),t.dom())},ro=qr.detect().browser,oo=ro.isIE()?io:no,so={eq:Qr,isEqualNode:eo,member:to,contains:oo,is:Zr.is},ao=function(e){return Hi.fromDom(e.dom().ownerDocument)},lo=function(e){return Hi.fromDom(e.dom().ownerDocument.documentElement)},uo=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Hi.fromDom(n)},co=function(e){var t=e.dom();return Se.from(t.parentNode).map(Hi.fromDom)},fo=function(e){return co(e).bind(function(t){var n=xo(t);return it(n,function(t){return so.eq(e,t)})})},ho=function(e,t){for(var n=Xe(t)?t:be(!1),i=e.dom(),r=[];null!==i.parentNode&&void 0!==i.parentNode;){var o=i.parentNode,s=Hi.fromDom(o);if(r.push(s),n(s)===!0)break;i=o}return r},mo=function(e){var t=function(t){return et(t,function(t){return!so.eq(e,t)})};return co(e).map(xo).map(t).getOr([])},go=function(e){var t=e.dom();return Se.from(t.offsetParent).map(Hi.fromDom);
},po=function(e){var t=e.dom();return Se.from(t.previousSibling).map(Hi.fromDom)},vo=function(e){var t=e.dom();return Se.from(t.nextSibling).map(Hi.fromDom)},bo=function(e){return lt(Xi.toArray(e,po))},yo=function(e){return Xi.toArray(e,vo)},xo=function(e){var t=e.dom();return Ze(t.childNodes,Hi.fromDom)},wo=function(e,t){var n=e.dom().childNodes;return Se.from(n[t]).map(Hi.fromDom)},_o=function(e){return wo(e,0)},Co=function(e){return wo(e,e.dom().childNodes.length-1)},Ro=function(e){return e.dom().childNodes.length},Eo=function(e){return e.dom().hasChildNodes()},ko=qi("element","offset"),To=function(e,t){var n=xo(e);return n.length>0&&t<n.length?ko(n[t],0):ko(e,t)},So={owner:ao,defaultView:uo,documentElement:lo,parent:co,findIndex:fo,parents:ho,siblings:mo,prevSibling:po,offsetParent:go,prevSiblings:bo,nextSibling:vo,nextSiblings:yo,children:xo,child:wo,firstChild:_o,lastChild:Co,childNodesCount:Ro,hasChildNodes:Eo,leaf:To},Ho=function(e){return Po(Yi.body(),e)},No=function(e,t,n){return et(So.parents(e,n),t)},Mo=function(e,t){return et(So.siblings(e),t)},Do=function(e,t){return et(So.children(e),t)},Po=function(e,t){var n=[];return Qe(So.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Po(e,t))}),n},Wo={all:Ho,ancestors:No,siblings:Mo,children:Do,descendants:Po},Oo=function(e){return Zr.all(e)},Bo=function(e,t,n){return Wo.ancestors(e,function(e){return Zr.is(e,t)},n)},Ao=function(e,t){return Wo.siblings(e,function(e){return Zr.is(e,t)})},Io=function(e,t){return Wo.children(e,function(e){return Zr.is(e,t)})},Lo=function(e,t){return Zr.all(t,e)},zo={all:Oo,ancestors:Bo,siblings:Ao,children:Io,descendants:Lo},Fo=A.trim,Uo=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Vo=Uo("true"),Yo=Uo("false"),qo=function(e,t,n,i,r){return{type:e,title:t,url:n,level:i,attach:r}},$o=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Vo(e)}return!1},Xo=function(e,t){return Ze(zo.descendants(Hi.fromDom(t),e),function(e){return e.dom()})},jo=function(e){return e.innerText||e.textContent},Jo=function(e){return e.id?e.id:Ci("h")},Go=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},Ko=function(e){return Go(e)&&Qo(e)},Zo=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},Qo=function(e){return $o(e)&&!Yo(e)},es=function(e){return Zo(e)&&Qo(e)},ts=function(e){return Zo(e)?parseInt(e.nodeName.substr(1),10):0},ns=function(e){var t=Jo(e),n=function(){e.id=t};return qo("header",jo(e),"#"+t,ts(e),n)},is=function(e){var t=e.id||e.name,n=jo(e);return qo("anchor",n?n:"#"+t,"#"+t,0,pe)},rs=function(e){return Ze(et(e,es),ns)},os=function(e){return Ze(et(e,Ko),is)},ss=function(e){var t=Xo("h1,h2,h3,h4,h5,h6,a:not([href])",e);return t},as=function(e){return Fo(e.title).length>0},ls=function(e){var t=ss(e);return et(rs(t).concat(os(t)),as)},us={find:ls},cs=function(){return window.tinymce?window.tinymce.activeEditor:B.activeEditor},ds={},fs=5,hs=function(){ds={}},ms=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},gs=function(e){return A.map(e,ms)},ps=function(e,t){return{title:e,value:{title:e,url:t,attach:pe}}},vs=function(e,t){var n=Ke(t,function(t){return t.url===e});return!n},bs=function(e,t,n){var i=t in e?e[t]:n;return i===!1?null:i},ys=function(e,t,n,i){var r={title:"-"},o=function(e){var i=e.hasOwnProperty(n)?e[n]:[],r=et(i,function(e){return vs(e,t)});return A.map(r,function(e){return{title:e,value:{title:e,url:e,attach:pe}}})},s=function(e){var n=et(t,function(t){return t.type===e});return gs(n)},a=function(){var e=s("anchor"),t=bs(i,"anchor_top","#top"),n=bs(i,"anchor_bottom","#bottom");return null!==t&&e.unshift(ps("<top>",t)),null!==n&&e.push(ps("<bottom>",n)),e},l=function(e){return tt(e,function(e,t){var n=0===e.length||0===t.length;return n?e.concat(t):e.concat(r,t)},[])};return i.typeahead_urls===!1?[]:"file"===n?l([ws(e,o(ds)),ws(e,s("header")),ws(e,a())]):ws(e,o(ds))},xs=function(e,t){var n=ds[t];/^https?/.test(e)&&(n?Ge(n,e).isNone()&&(ds[t]=n.slice(0,fs).concat(e)):ds[t]=[e])},ws=function(e,t){var n=e.toLowerCase(),i=A.grep(t,function(e){return e.title.toLowerCase().indexOf(n)!==-1});return 1===i.length&&i[0].title===e?[]:i},_s=function(e){var t=e.title;return t.raw?t.raw:t},Cs=function(e,t,n,i){var r=function(r){var o=us.find(n),s=ys(r,o,i,t);e.showAutoComplete(s,r)};e.on("autocomplete",function(){r(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var r=_s(n);"image"===i?e.fire("change",{meta:{alt:r,attach:n.attach}}):e.fire("change",{meta:{text:r,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&r("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||xs(e.value(),i)})})},Rs=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}},Es=function(e,t,n){var i=t.filepicker_validator_handler;if(i){var r=function(t){return 0===t.length?void e.statusLevel("none"):void i({url:t,type:n},function(t){var n=Rs(t);e.statusMessage(n.message),e.statusLevel(n.status)})};e.state.on("change:value",function(e){r(e.value)})}},ks=ui.extend({Statics:{clearHistory:hs},init:function(e){var t,n,i,r=this,o=cs(),s=o.settings,a=e.filetype;e.spellcheck=!1,i=s.file_picker_types||s.file_browser_callback_types,i&&(i=A.makeMap(i,/[, ]/)),i&&!i[a]||(n=s.file_picker_callback,!n||i&&!i[a]?(n=s.file_browser_callback,!n||i&&!i[a]||(t=function(){n(r.getEl("inp").id,r.value(),a,window)})):t=function(){var e=r.fire("beforecall").meta;e=A.extend({filetype:a},e),n.call(o,function(e,t){r.value(e).fire("change",{meta:t})},r.value(),e)}),t&&(e.icon="browse",e.onaction=t),r._super(e),r.classes.add("filepicker"),Cs(r,s,o.getBody(),a),Es(r,s,a)}}),Ts=ii.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),Ss=ii.extend({recalc:function(e){var t,n,i,r,o,s,a,l,u,c,d,f,h,m,g,p,v,b,y,x,w,_,C,R,E,k,T,S,H,N,M,D,P,W,O,B,A,I,L=[],z=Math.max,F=Math.min;for(i=e.items().filter(":visible"),r=e.layoutRect(),o=e.paddingBox,s=e.settings,f=e.isRtl()?s.direction||"row-reversed":s.direction,a=s.align,l=e.isRtl()?s.pack||"end":s.pack,u=s.spacing||0,"row-reversed"!==f&&"column-reverse"!==f||(i=i.set(i.toArray().reverse()),f=f.split("-")[0]),"column"===f?(E="y",C="h",R="minH",k="maxH",S="innerH",T="top",H="deltaH",N="contentH",O="left",P="w",M="x",D="innerW",W="minW",B="right",A="deltaW",I="contentW"):(E="x",C="w",R="minW",k="maxW",S="innerW",T="left",H="deltaW",N="contentW",O="top",P="h",M="y",D="innerH",W="minH",B="bottom",A="deltaH",I="contentH"),d=r[S]-o[T]-o[T],_=c=0,t=0,n=i.length;t<n;t++)h=i[t],m=h.layoutRect(),g=h.settings,p=g.flex,d-=t<n-1?u:0,p>0&&(c+=p,m[k]&&L.push(h),m.flex=p),d-=m[R],v=o[O]+m[W]+o[B],v>_&&(_=v);if(x={},d<0?x[R]=r[R]-d+r[H]:x[R]=r[S]-d+r[H],x[W]=_+r[A],x[N]=r[S]-d,x[I]=_,x.minW=F(x.minW,r.maxW),x.minH=F(x.minH,r.maxH),x.minW=z(x.minW,r.startMinWidth),x.minH=z(x.minH,r.startMinHeight),!r.autoResize||x.minW===r.minW&&x.minH===r.minH){for(y=d/c,t=0,n=L.length;t<n;t++)h=L[t],m=h.layoutRect(),b=m[k],v=m[R]+m.flex*y,v>b?(d-=m[k]-m[R],c-=m.flex,m.flex=0,m.maxFlexSize=b):m.maxFlexSize=0;for(y=d/c,w=o[T],x={},0===c&&("end"===l?w=d+o[T]:"center"===l?(w=Math.round(r[S]/2-(r[S]-d)/2)+o[T],w<0&&(w=o[T])):"justify"===l&&(w=o[T],u=Math.floor(d/(i.length-1)))),x[M]=o[O],t=0,n=i.length;t<n;t++)h=i[t],m=h.layoutRect(),v=m.maxFlexSize||m[R],"center"===a?x[M]=Math.round(r[D]/2-m[P]/2):"stretch"===a?(x[P]=z(m[W]||0,r[D]-o[O]-o[B]),x[M]=o[O]):"end"===a&&(x[M]=r[D]-m[P]-o.top),m.flex>0&&(v+=m.flex*y),x[C]=v,x[E]=w,h.layoutRect(x),h.recalc&&h.recalc(),w+=v+u}else if(x.w=x.minW,x.h=x.minH,e.layoutRect(x),this.recalc(e),null===e._lastRect){var U=e.parent();U&&(U._lastRect=null,U.recalc())}}}),Hs=ni.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),Ns=function(e){return Os(Yi.body(),e)},Ms=function(e,t,n){for(var i=e.dom(),r=Xe(n)?n:be(!1);i.parentNode;){i=i.parentNode;var o=Hi.fromDom(i);if(t(o))return Se.some(o);if(r(o))break}return Se.none()},Ds=function(e,t,n){var i=function(e){return t(e)};return S(i,Ms,e,t,n)},Ps=function(e,t){var n=e.dom();return n.parentNode?Ws(Hi.fromDom(n.parentNode),function(n){return!so.eq(e,n)&&t(n)}):Se.none()},Ws=function(e,t){var n=nt(e.dom().childNodes,ve(t,Hi.fromDom));return n.map(Hi.fromDom)},Os=function(e,t){var n=function(e){for(var i=0;i<e.childNodes.length;i++){if(t(Hi.fromDom(e.childNodes[i])))return Se.some(Hi.fromDom(e.childNodes[i]));var r=n(e.childNodes[i]);if(r.isSome())return r}return Se.none()};return n(e.dom())},Bs={first:Ns,ancestor:Ms,closest:Ds,sibling:Ps,child:Ws,descendant:Os},As=function(e){return Zr.one(e)},Is=function(e,t,n){return Bs.ancestor(e,function(e){return Zr.is(e,t)},n)},Ls=function(e,t){return Bs.sibling(e,function(e){return Zr.is(e,t)})},zs=function(e,t){return Bs.child(e,function(e){return Zr.is(e,t)})},Fs=function(e,t){return Zr.one(t,e)},Us=function(e,t,n){return S(Zr.is,Is,e,t,n)},Vs={first:As,ancestor:Is,sibling:Ls,child:zs,descendant:Fs,closest:Us},Ys=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},qs=function(e,t,n){var i=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,i):e.on("init",function(){e.formatter.formatChanged(t,i)})},$s=function(e,t){return function(n){qs(e,t,function(e){n.control.active(e)})}},Xs=function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n="alignleft",i=[{text:"Left",icon:"alignleft",onclick:Ys(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:Ys(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:Ys(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:Ys(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:i}),e.addButton("align",{type:"menubutton",icon:n,menu:i,onShowMenu:function(n){var i=n.control.menu;A.each(t,function(t,n){i.items().eq(n).each(function(n){return n.active(e.formatter.match(t))})})},onPostRender:function(i){var r=i.control;A.each(t,function(t,i){qs(e,t,function(e){r.icon(n),e&&r.icon(t)})})}}),A.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:$s(e,n)})})},js={register:Xs},Js=function(e){return e?e.split(",")[0]:""},Gs=function(e,t){var n,i=t?t.toLowerCase():"";return A.each(e,function(e){e.value.toLowerCase()===i&&(n=e.value)}),A.each(e,function(e){n||Js(e.value).toLowerCase()!==Js(i).toLowerCase()||(n=e.value)}),n},Ks=function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",function(i){var r=e.queryCommandValue("FontName"),o=Gs(t,r);n.value(o?o:null),!o&&r&&n.text(Js(r))})}},Zs=function(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e},Qs=function(e){var t="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",n=Zs(e.settings.font_formats||t);return A.map(n,function(e){return{text:{raw:e[0]},value:e[1],textStyle:e[1].indexOf("dings")===-1?"font-family:"+e[1]:""}})},ea=function(e){e.addButton("fontselect",function(){var t=Qs(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:Ks(e,t),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})},ta=function(e){ea(e)},na={register:ta},ia=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},ra=function(e,t){return/[0-9.]+px$/.test(e)?ia(72*parseInt(e,10)/96,t||0)+"pt":e},oa=function(e,t,n){var i;return A.each(e,function(e){e.value===n?i=n:e.value===t&&(i=t)}),i},sa=function(e,t){return function(){var n=this;e.on("init nodeChange",function(i){var r,o,s,a;if(r=e.queryCommandValue("FontSize"))for(s=3;!a&&s>=0;s--)o=ra(r,s),a=oa(t,o,r);n.value(a?a:null),a||n.text(o)})}},aa=function(e){var t="8pt 10pt 12pt 14pt 18pt 24pt 36pt",n=e.settings.fontsize_formats||t;return A.map(n.split(" "),function(e){var t=e,n=e,i=e.split("=");return i.length>1&&(t=i[0],n=i[1]),{text:t,value:n}})},la=function(e){e.addButton("fontsizeselect",function(){var t=aa(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:sa(e,t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}})},ua=function(e){la(e)},ca={register:ua},da=function(e,t){var n=t.length;return A.each(t,function(t){t.menu&&(t.hidden=0===da(e,t.menu));var i=t.format;i&&(t.hidden=!e.formatter.canApply(i)),t.hidden&&n--}),n},fa=function(e,t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(fa(e,t.menu)>0),!t.menu&&t.settings.menu&&t.visible(da(e,t.settings.menu)>0);var i=t.settings.format;i&&t.visible(e.formatter.canApply(i)),t.visible()||n--}),n},ha=function(e){var t=0,n=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],r=function(e){var i=[];if(e)return A.each(e,function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=r(e.items);else{var s=e.format||"custom"+t++;e.format||(e.name=s,n.push(e)),o.format=s,o.cmd=e.cmd}i.push(o)}),i},o=function(){var t;return t=r(e.settings.style_formats_merge?e.settings.style_formats?i.concat(e.settings.style_formats):i:e.settings.style_formats||i)};return e.on("init",function(){A.each(n,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:o(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,i;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),i=t.settings.cmd,i&&t.active(e.queryCommandState(i))})},onclick:function(){this.settings.format&&Ys(e,this.settings.format)(),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}},ma=function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})},ga=function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&fa(e,this.menu)}})},pa=function(e){var t=ha(e);ma(e,t),ga(e,t)},va={register:pa},ba="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",ya=function(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e},xa=function(e,t,n){return function(){var i=this;e.on("nodeChange",function(r){var o=e.formatter,s=null;A.each(r.parents,function(e){if(A.each(t,function(t){if(n?o.matchNode(e,n,{value:t.value})&&(s=t.value):o.matchNode(e,t.value)&&(s=t.value),s)return!1}),s)return!1}),i.value(s)})}},wa=function(e,t){return function(){var n=[];return A.each(t,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:t[0][0],values:n,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();Ys(e,n)()}},onPostRender:xa(e,n)}}},_a=function(e,t){return A.map(t,function(t){return{text:t[0],onclick:Ys(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}})},Ca=function(e){var t=ya(e.settings.block_formats||ba);e.addMenuItem("blockformats",{text:"Blocks",menu:_a(e,t)}),e.addButton("formatselect",wa(e,t))},Ra={register:Ca},Ea=function(e,t){var n,i;if("string"==typeof t)i=t.split(" ");else if(A.isArray(t))return st(A.map(t,function(t){return Ea(e,t)}));return n=A.grep(i,function(t){return"|"===t||t in e.menuItems}),A.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},ka=function(e){return e&&"-"===e.text},Ta=function(e){var t=et(e,function(e,t,n){return!ka(e)||!ka(n[t-1])});return et(t,function(e,t,n){return!ka(e)||t>0&&t<n.length-1})},Sa=function(e,t){var n=[{text:"-"}],i=A.grep(e.menuItems,function(e){return e.context===t});return A.each(i,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n},Ha=function(e){var t=e.settings.insert_button_items;return Ta(t?Ea(e,t):Sa(e,"insert"))},Na=function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Ha(e)),this.menu.renderNew()}})},Ma=function(e){Na(e)},Da={register:Ma},Pa=function(e){A.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{active:!1,tooltip:t,onPostRender:$s(e,n),onclick:Ys(e,n)})})},Wa=function(e){A.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})})},Oa=function(e){A.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:$s(e,n)})})},Ba=function(e){Pa(e),Wa(e),Oa(e)},Aa=function(e){A.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:Ys(e,"code")})},Ia=function(e){Ba(e),Aa(e)},La={register:Ia},za=function(e,t){return function(){var n=this,i=function(){var n="redo"===t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()};n.disabled(!i()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(e.readonly||!i())})}},Fa=function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:za(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:za(e,"redo"),cmd:"redo"})},Ua=function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:za(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:za(e,"redo"),cmd:"redo"})},Va=function(e){Fa(e),Ua(e)},Ya={register:Va},qa=function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}},$a=function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:qa(e),cmd:"mceToggleVisualAid"})},Xa=function(e){$a(e)},ja={register:Xa},Ja=function(){$n.tooltips=!Rt.iOS,Sn.translate=function(e){return B.translate(e)}},Ga=function(e){e.settings.ui_container&&(Rt.container=Vs.descendant(Hi.fromDom(document.body),e.settings.ui_container).fold(be(null),function(e){return e.dom()}))},Ka=function(e){e.rtl&&(Sn.rtl=!0)},Za=function(e){e.on("mousedown",function(){An.hideAll()})},Qa=function(e){Ka(e),Za(e),Ga(e),Ja(),Ra.register(e),js.register(e),La.register(e),Ya.register(e),ca.register(e),na.register(e),va.register(e),ja.register(e),Da.register(e)},el={setup:Qa},tl=ii.extend({recalc:function(e){var t,n,i,r,o,s,a,l,u,c,d,f,h,m,g,p,v,b,y,x,w,_,C,R,E,k,T,S,H,N=[],M=[];t=e.settings,r=e.items().filter(":visible"),o=e.layoutRect(),i=t.columns||Math.ceil(Math.sqrt(r.length)),n=Math.ceil(r.length/i),b=t.spacingH||t.spacing||0,y=t.spacingV||t.spacing||0,x=t.alignH||t.align,w=t.alignV||t.align,p=e.paddingBox,S="reverseRows"in t?t.reverseRows:e.isRtl(),x&&"string"==typeof x&&(x=[x]),w&&"string"==typeof w&&(w=[w]);for(d=0;d<i;d++)N.push(0);for(f=0;f<n;f++)M.push(0);for(f=0;f<n;f++)for(d=0;d<i&&(c=r[f*i+d],c);d++)u=c.layoutRect(),R=u.minW,E=u.minH,N[d]=R>N[d]?R:N[d],M[f]=E>M[f]?E:M[f];for(k=o.innerW-p.left-p.right,_=0,d=0;d<i;d++)_+=N[d]+(d>0?b:0),k-=(d>0?b:0)+N[d];for(T=o.innerH-p.top-p.bottom,C=0,f=0;f<n;f++)C+=M[f]+(f>0?y:0),T-=(f>0?y:0)+M[f];if(_+=p.left+p.right,C+=p.top+p.bottom,l={},l.minW=_+(o.w-o.innerW),l.minH=C+(o.h-o.innerH),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH,l.minW=Math.min(l.minW,o.maxW),l.minH=Math.min(l.minH,o.maxH),l.minW=Math.max(l.minW,o.startMinWidth),l.minH=Math.max(l.minH,o.startMinHeight),!o.autoResize||l.minW===o.minW&&l.minH===o.minH){o.autoResize&&(l=e.layoutRect(l),l.contentW=l.minW-o.deltaW,l.contentH=l.minH-o.deltaH);var D;D="start"===t.packV?0:T>0?Math.floor(T/n):0;var P=0,W=t.flexWidths;if(W)for(d=0;d<W.length;d++)P+=W[d];else P=i;var O=k/P;for(d=0;d<i;d++)N[d]+=W?W[d]*O:O;for(m=p.top,f=0;f<n;f++){for(h=p.left,a=M[f]+D,d=0;d<i&&(H=S?f*i+i-1-d:f*i+d,c=r[H],c);d++)g=c.settings,u=c.layoutRect(),s=Math.max(N[d],u.startMinWidth),u.x=h,u.y=m,v=g.alignH||(x?x[d]||x[0]:null),"center"===v?u.x=h+s/2-u.w/2:"right"===v?u.x=h+s-u.w:"stretch"===v&&(u.w=s),v=g.alignV||(w?w[d]||w[0]:null),"center"===v?u.y=m+a/2-u.h/2:"bottom"===v?u.y=m+a-u.h:"stretch"===v&&(u.h=a),c.layoutRect(u),h+=s+b,c.recalc&&c.recalc();m+=a+y}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var B=e.parent();B&&(B._lastRect=null,B.recalc())}}}),nl=$n.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=e,t&&t()):ge.setTimeout(function(){n.html(e)}),this}}),il=$n.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),rl=$n.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();if(e.settings.multiline){var n=qt.getSize(e.getEl());n.width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,qt.getSize(e.getEl()).height)}return t},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,i=n.settings.forId,r=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!i&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0],e&&(i=e._id)),i?'<label id="'+n._id+'" class="'+n.classes+'"'+(i?' for="'+i+'"':"")+">"+r+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+r+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),ol=Mn.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}}),sl=ol.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),al=ri.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t,n=this;return n.menu&&n.menu.visible()&&e!==!1?n.hideMenu():(n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),t.renderTo?n.menu=t.parent(n).show().renderTo():n.menu=oe.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),void n.fire("showmenu"))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,r=t.settings.icon,o=t.state.get("text"),s="";return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o&&(t.classes.add("btn-has-text"),s='<span class="'+i+'txt">'+t.encode(o)+"</span>"),r=t.settings.icon?i+"ico "+i+"i-"+r:"",t.aria("role",t.parent()instanceof sl?"menuitem":"button"),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button id="'+n+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+s+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&H(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,i=t.control,r=e.parent();i&&r&&i instanceof al&&i.parent()===r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==i&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(i.focus(),i.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),ll=An.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,i=n.length;i--;)n[i]=A.extend({},e.itemDefaults,n[i]);t._super(e),t.classes.add("menu"),e.animate&&11!==Rt.ie&&t.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){function e(){i.throbber&&(i.throbber.hide(),i.throbber=null)}var t,n,i=this;n=i.settings.itemsFactory,n&&(i.throbber||(i.throbber=new x(i.getEl("body"),(!0)),0===i.items().length?(i.throbber.show(),i.fire("loading")):i.throbber.show(100,function(){i.items().remove(),i.fire("loading")}),i.on("hide close",e)),i.requestTime=t=(new Date).getTime(),i.settings.itemsFactory(function(n){return 0===n.length?void i.hide():void(i.requestTime===t&&(i.getEl().style.width="",i.getEl("body").style.width="",e(),i.items().remove(),i.getEl("body").innerHTML="",i.add(n),i.renderNew(),i.fire("loaded")))}))},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e.on("show hide",function(t){t.control===e&&("show"===t.type?ge.setTimeout(function(){e.classes.add("in")},0):e.classes.remove("in"))}),e._super()}}),ul=al.extend({init:function(e){function t(n){for(var o=0;o<n.length;o++){if(i=n[o].selected||e.value===n[o].value)return r=r||n[o].text,s.state.set("value",n[o].value),!0;if(n[o].menu&&t(n[o].menu))return!0}}var n,i,r,o,s=this;s._super(e),e=s.settings,s._values=n=e.values,n&&("undefined"!=typeof e.value&&t(n),!i&&n.length>0&&(r=n[0].text,s.state.set("value",n[0].value)),s.state.set("menu",n)),s.state.set("text",e.text||r),s.classes.add("listbox"),s.on("select",function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):s.value(t.control.value()),o=n})},value:function(e){if(0===arguments.length)return this.state.get("value");if("undefined"==typeof e)return this;if(this.settings.values){var t=A.grep(this.settings.values,function(t){return t.value===e});t.length>0?this.state.set("value",e):null===e&&this.state.set("value",null)}else this.state.set("value",e);return this},bindStates:function(){function e(e,t){e instanceof ll&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===t)})}function t(e,n){var i;if(e)for(var r=0;r<e.length;r++){if(e[r].value===n)return e[r];if(e[r].menu&&(i=t(e[r].menu,n)))return i}}var n=this;return n.on("show",function(t){e(t.control,n.value())}),n.state.on("change:value",function(e){var i=t(n.state.get("menu"),e.value);i?n.text(i.text):n.text(n.settings.text)}),n._super()}}),cl=function(e,t){var n=e._textStyle;if(n){var i=e.getEl("text");i.setAttribute("style",n),t&&(i.style.color="",i.style.backgroundColor="")}},dl=$n.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;
n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),t=n.state.get("text"),"-"!==t&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,i=t.parent();if(i.items().each(function(e){e!==t&&e.hideMenu()}),n.menu){e=t.menu,e?e.show():(e=n.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",i.settings.itemDefaults&&(e.itemDefaults=i.settings.itemDefaults),e=t.menu=oe.create(e).parent(t).renderTo(),e.reflow(),e.on("cancel",function(n){n.stopPropagation(),t.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(n){n.control===e&&t.classes.remove("selected")}),e.submenu=!0),e._parentMenu=i,e.classes.add("menu-sub");var r=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),r),e.rel=r,r="menu-sub-"+r,e.classes.remove(e._lastRel).add(r),e._lastRel=r,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){var t,n,i={};for(i=Rt.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)n=i[e[t].toLowerCase()],n&&(e[t]=n);return e.join("+")}function t(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function n(e){var n=s.match||"";return n?e.replace(new RegExp(t(n),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function i(e){return e.replace(new RegExp(t("!mce~match["),"g"),"<b>").replace(new RegExp(t("]mce~match!"),"g"),"</b>")}var r=this,o=r._id,s=r.settings,a=r.classPrefix,l=r.state.get("text"),u=r.settings.icon,c="",d=s.shortcut,f=r.encode(s.url),h="";return u&&r.parent().classes.add("menu-has-icons"),s.image&&(c=" style=\"background-image: url('"+s.image+"')\""),d&&(d=e(d)),u=a+"ico "+a+"i-"+(r.settings.icon||"none"),h="-"!==l?'<i class="'+u+'"'+c+"></i> ":"",l=i(r.encode(n(l))),f=i(r.encode(n(f))),'<div id="'+o+'" class="'+r.classes+'" tabindex="-1">'+h+("-"!==l?'<span id="'+o+'-text" class="'+a+'text">'+l+"</span>":"")+(d?'<div id="'+o+'-shortcut" class="'+a+'menu-shortcut">'+d+"</div>":"")+(s.menu?'<div class="'+a+'caret"></div>':"")+(f?'<div class="'+a+'menu-item-link">'+f+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var i=e.getEl("text");i&&(i.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),ge.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",!0),e},active:function(e){return cl(this,e),"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),fl=ai.extend({Defaults:{classes:"radio",role:"radio"}}),hl=$n.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"===e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new d(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}}),ml=$n.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t=this,n="";return e=N(t._options),t.size&&(n=' size = "'+t.size+'"'),'<select id="'+t._id+'" class="'+t.classes+'"'+n+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(t){e.getEl().innerHTML=N(t.value)}),e._super()}}),gl=$n.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"===e.orientation&&t.classes.add("vertical"),t._minValue=je(e.minValue)?e.minValue:0,t._maxValue=je(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function e(e,t,n){return(n+e)/(t-e)}function t(e,t,n){return n*(t-e)-e}function n(n,i){function r(r){var o;o=c.value(),o=t(n,i,e(n,i,o)+.05*r),o=M(o,n,i),c.value(o),c.fire("dragstart",{value:o}),c.fire("drag",{value:o}),c.fire("dragend",{value:o})}c.on("keydown",function(e){switch(e.keyCode){case 37:case 38:r(-1);break;case 39:case 40:r(1)}})}function i(e,t,n){var i,r,o,f,h;c._dragHelper=new d(c._id,{handle:c._id+"-handle",start:function(e){i=e[s],r=parseInt(c.getEl("handle").style[a],10),o=(c.layoutRect()[u]||100)-qt.getSize(n)[l],c.fire("dragstart",{value:h})},drag:function(l){var u=l[s]-i;f=M(r+u,0,o),n.style[a]=f+"px",h=e+f/o*(t-e),c.value(h),c.tooltip().text(""+c.settings.previewFilter(h)).show().moveRel(n,"bc tc"),c.fire("drag",{value:h})},stop:function(){c.tooltip().hide(),c.fire("dragend",{value:h})}})}var r,o,s,a,l,u,c=this;r=c._minValue,o=c._maxValue,"v"===c.settings.orientation?(s="screenY",a="top",l="height",u="h"):(s="screenX",a="left",l="width",u="w"),c._super(),n(r,o),i(r,o,c.getEl("handle"))},repaint:function(){this._super(),P(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){P(e,t.value)}),e._super()}}),pl=$n.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}}),vl=al.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this,i=n.getEl(),r=n.layoutRect();return n._super(),e=i.firstChild,t=i.lastChild,Vt(e).css({width:r.w-qt.getSize(t).width,height:r.h-2}),Vt(t).css({height:r.h-2}),n},activeMenu:function(e){var t=this;Vt(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e,t,n=this,i=n._id,r=n.classPrefix,o=n.state.get("icon"),s=n.state.get("text"),a=n.settings,l="";return e=a.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=a.icon?r+"ico "+r+"i-"+o:"",s&&(n.classes.add("btn-has-text"),l='<span class="'+r+'txt">'+n.encode(s)+"</span>"),t="boolean"==typeof a.active?' aria-pressed="'+a.active+'"':"",'<div id="'+i+'" class="'+n.classes+'" role="button"'+t+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+l+'</button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(o?" ":"")+n._menuBtnText:"")+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&n.className.indexOf("open")===-1)return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}}),bl=Hs.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),yl=Pn.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),Vt(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,t=this.getEl("t"+e),t.setAttribute("aria-selected","true"),Vt(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!==n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,r){var o=e._id+"-t"+r;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]===t.target&&e.activateTab(i)})},initLayoutRect:function(){var e,t,n,i=this;t=qt.getSize(i.getEl("head")).width,t=t<0?0:t,n=0,i.items().each(function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)}),i.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})});var r=qt.getSize(i.getEl("head")).height;return i.settings.minWidth=t,i.settings.minHeight=n+r,e=i._super(),e.deltaH+=r,e.innerH=e.h-e.deltaH,e}}),xl=$n.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e,t,n,i,r,o=this,s=0;e=o.getEl().style,t=o._layoutRect,r=o._lastRepaintRect||{};var a=document;return!o.settings.multiline&&a.all&&(!a.documentMode||a.documentMode<=8)&&(e.lineHeight=t.h-s+"px"),n=o.borderBox,i=n.left+n.right+8,s=n.top+n.bottom+(o.settings.multiline?8:0),t.x!==r.x&&(e.left=t.x+"px",r.x=t.x),t.y!==r.y&&(e.top=t.y+"px",r.y=t.y),t.w!==r.w&&(e.width=t.w-i+"px",r.w=t.w),t.h!==r.h&&(e.height=t.h-s+"px",r.h=t.h),o._lastRepaintRect=r,o.fire("repaint",{},!1),o},renderHtml:function(){var e,t,n=this,i=n.settings;return e={id:n._id,hidefocus:"1"},A.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=i[t]}),n.disabled()&&(e.disabled="disabled"),i.subtype&&(e.type=i.subtype),t=qt.create(i.multiline?"textarea":"input",e),t.value=n.state.get("value"),t.className=n.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}}),wl=function(){return{Selector:ln,Collection:dn,ReflowQueue:bn,Control:Sn,Factory:oe,KeyboardNavigation:l,Container:Mn,DragHelper:d,Scrollable:Dn,Panel:Pn,Movable:Kt,Resizable:Wn,FloatPanel:An,Window:Zn,MessageBox:Qn,Tooltip:qn,Widget:$n,Progress:Xn,Notification:Jn,Layout:ni,AbsoluteLayout:ii,Button:ri,ButtonGroup:si,Checkbox:ai,ComboBox:ui,ColorBox:ci,PanelButton:di,ColorButton:hi,ColorPicker:gi,Path:vi,ElementPath:bi,FormItem:yi,Form:xi,FieldSet:wi,FilePicker:ks,FitLayout:Ts,FlexLayout:Ss,FlowLayout:Hs,FormatControls:el,GridLayout:tl,Iframe:nl,InfoBox:il,Label:rl,Toolbar:ol,MenuBar:sl,MenuButton:al,MenuItem:dl,Throbber:x,Menu:ll,ListBox:ul,Radio:fl,ResizeHandle:hl,SelectBox:ml,Slider:gl,Spacer:pl,SplitButton:vl,StackLayout:bl,TabPanel:yl,TextBox:xl,DropZone:pi,BrowseButton:oi}},_l=function(e){e.ui?A.each(wl(),function(t,n){e.ui[n]=t}):e.ui=wl()},Cl=function(){A.each(wl(),function(e,t){oe.add(t,e)})},Rl={appendTo:_l,registerToFactory:Cl};return Rl.registerToFactory(),Rl.appendTo(window.tinymce?window.tinymce:{}),O.add("modern",function(e){return el.setup(e),ti.get(e)}),W})()}();
},{}],17:[function(require,module,exports){
(function (global){
function gtag(){dataLayer.push(arguments)}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");global.jQuery=require("jquery"),require("bootstrap"),global.__=require(426).translate,window.__agent&&window.__agent.start(Backbone,Marionette);var Cfg=require(29),ServiceProvider=Marionette.Object.extend({channelName:"app",radioRequests:{"ctx:session":"getSession","ctx:config":"getConfig","ctx:navigationController":"getNavigationController","ctx:keyListener":"getKeyListener"},app:null,config:null,keyListener:null,registerApp:function(e){this.app=e},registerConfig:function(e){this.config=e},getConfig:function(){return this.config},getSession:function(){return this.app.session},getNavigationController:function(){return this.app.navigationController},registerKeyListener:function(e){this.keyListener=e},getKeyListener:function(){return keyListener}}),SP=new ServiceProvider;SP.registerConfig(Cfg);var LayoutView=require(429),AppRouter=require(216),User=require(38),Session=require(36),NavigationController=require(406),api=require(421),keypressContainer=require("keypress.js/keypress-2.1.4.min.js"),keyListener=new keypressContainer.keypress.Listener;SP.registerKeyListener(keyListener);var KiubiApp=Marionette.Application.extend({region:"body",initialize:function(e){console.info("Initialize Application"),this.mergeOptions(e,["session"]),SP.registerApp(this),Backbone.ajax=function(){return api.ajax.apply(api,arguments)};var t=this,r=new LayoutView;r.render(),this.navigationController=new NavigationController({layoutView:r,application:this}),this.router=new AppRouter({application:this}),r.on("navigate",function(e,r){t.navigationController.navigate(e)})},onStart:function(e){console.info("Starting Application"),this.navigationController.showSidebar(),this.navigationController.showSidebarMenu(),this.navigationController.showHeader(),Backbone.history.started||Backbone.history.start({pushState:!0}),Backbone.Radio.channel("navigation").trigger("change:url",{path:window.location.pathname})},navigate:function(e,t){this.router.navigate(e,_.extend({trigger:!0},t)),Backbone.Radio.channel("navigation").trigger("change:url",{path:e})}}),S=new Session({user:new User}),App=new KiubiApp({session:S}),CMSRoute=require(198);new CMSRoute;var BlogRoute=require(68);new BlogRoute;var CatalogRoute=require(106);new CatalogRoute;var CheckoutRoute=require(150);new CheckoutRoute;var AppearanceRoute=require(42);new AppearanceRoute;var MediaRoute=require(282);new MediaRoute;var CustomersRoute=require(235);new CustomersRoute;var FormsRoute=require(263);new FormsRoute;var ModulesRoute=require(311);new ModulesRoute;var PrefsRoute=require(368);new PrefsRoute;var ThemesRoute=require(398);if(new ThemesRoute,Cfg.get("ga_tracker")){var script=document.createElement("script");script.async=1,script.src="https://www.googletagmanager.com/gtag/js?id="+Cfg.get("ga_tracker");var insert=document.getElementsByTagName("script")[0];insert.parentNode.insertBefore(script,insert),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config",Cfg.get("ga_tracker")),App.on("navigate",function(e){gtag("config",Cfg.get("ga_tracker"),{page_path:e})})}S.start().done(function(){console.log("Already authenticate")}).fail(function(){"/login"!=document.location.pathname&&history.pushState({},document.title,"/login")}).always(function(){App.start({})});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"106":106,"150":150,"198":198,"216":216,"235":235,"263":263,"282":282,"29":29,"311":311,"36":36,"368":368,"38":38,"398":398,"406":406,"42":42,"421":421,"426":426,"429":429,"68":68,"undefined":undefined}],18:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),navigationChannel=Backbone.Radio.channel("navigation");module.exports=Marionette.Behavior.extend({options:{maxDepth:3},initialize:function(e){this.listenTo(navigationChannel,"change:url",function(e){this.activateLink(e.path)})},activateLink:function(e){e=e.split("/",this.getOption("maxDepth")+1).join("/"),Backbone.$("li a",this.view.el).parent().removeClass("active"),Backbone.$('li a[href="'+e+'"]',this.view.el).parent().addClass("active")},onRender:function(){this.activateLink(document.location.pathname)}});
},{"undefined":undefined}],19:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({ui:{inputs:"[data-behavior='countable'] input,[data-behavior='countable'] textarea"},events:{"keyup @ui.inputs":"charUpdate"},onRender:function(){this.getUI("inputs").each(function(e,t){this.charCounts(t)}.bind(this))},charCounts:function(e){e&&e.parentElement&&Backbone.$(".letter-counter",e.parentElement).text(Backbone.$(e).val().length)},charUpdate:function(e){this.charCounts(e.target)}});
},{"undefined":undefined}],20:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),DatePicker=require("bootstrap-datetimepicker-npm");DatePicker(Backbone.$),module.exports=Marionette.Behavior.extend({ui:{inputsDate:"input[data-role='datepicker']",inputsDateTime:"input[data-role='datetimepicker']"},events:{"dp.change @ui.inputsDate":"onChange","dp.change @ui.inputsDateTime":"onChange"},loaded:!1,onRender:function(){var e={showTodayButton:!0,widgetPositioning:{horizontal:"auto",vertical:"bottom"},icons:{time:"md-icon md-time",date:"md-icon md-date",up:"md-icon md-up",down:"md-icon md-down",previous:"md-icon md-preview",next:"md-icon md-next",today:"md-icon md-fixed",clear:"md-icon md-delete",close:"md-icon md-close"},tooltips:{today:"Aujourd'hui",clear:"Recommencer",close:"Fermer",selectMonth:"Choisir un mois",prevMonth:"Mois précédent",nextMonth:"Mois suivant",selectYear:"Choisir une année",prevYear:"Année précédente",nextYear:"Année suivante",selectDecade:"Choisir une décennie",prevDecade:"Décennie précédente",nextDecade:"Décennie suivante",prevCentury:"Siècle précédent",nextCentury:"Siècle suivant",incrementHour:"Heure suivante",pickHour:"Choisir une heure",decrementHour:"Heure précédente",incrementMinute:"Minute suivante",pickMinute:"Choisir une minute",decrementMinute:"Minute précédente",incrementSecond:"Seconde précédente",pickSecond:"Choisir une seconde",decrementSecond:"Seconde suivante",togglePeriod:"Changer de période",selectTime:"Choisir l'heure"}};this.getUI("inputsDate").datetimepicker(_.extend({format:"DD/MM/YYYY"},e)),this.getUI("inputsDateTime").datetimepicker(_.extend({format:"DD/MM/YYYY HH:mm:ss"},e)),this.loaded=!0},onChange:function(e){this.loaded&&this.view.triggerMethod("field:change")},onBeforeDestroy:function(){this.getUI("inputsDate").length&&this.getUI("inputsDate").data("DateTimePicker").destroy(),this.getUI("inputsDateTime").length&&this.getUI("inputsDateTime").data("DateTimePicker").destroy()}});
},{"undefined":undefined}],21:[function(require,module,exports){
function contentHeight(t){return Backbone.$(t+" > div").toArray().reduce(function(t,o){return Backbone.$(o).outerHeight(!0)+t},0)}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.Behavior.extend({options:{renderThreshold:50,scrollThreshold:250,contentEl:"#content"},callback:null,$scroll:null,initialize:function(){void 0!=this.view.getOption("scrollThreshold")&&(this.options.scrollThreshold=this.view.getOption("scrollThreshold")),this.view.getOption("scrollContentEl")&&(this.options.contentEl=this.view.getOption("scrollContentEl")),this.callback=_.debounce(this.scrollHandler,150).bind(this)},onAttach:function(){this.$scroll=Backbone.$(this.options.contentEl),this.$scroll.bind("scroll",this,this.callback)},onDestroy:function(){this.$scroll.unbind("scroll",this.callback)},collectionFetchNextPage:function(){var t=this,o=this.view.collection;if(o.meta&&o.meta.link&&o&&!o.isSyncing)return o.isSyncing=!0,o.meta.link.next_page?void o.fetch({url:o.meta.link.next_page,remove:!1}).always(function(){o.isSyncing=!1,t.onDomRefresh()}):void(o.isSyncing=!1)},scrollHandler:function(t){var o=this.$scroll.scrollTop()+this.$scroll.height(),e=contentHeight(this.options.contentEl)-this.options.scrollThreshold;o<e||this.collectionFetchNextPage()},onDomRefresh:function(){this.$scroll&&contentHeight(this.options.contentEl)-this.options.renderThreshold<this.$scroll.height()&&this.collectionFetchNextPage()}});
},{"undefined":undefined}],22:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({onRender:function(){Backbone.$('[data-toggle="popover"]',this.view.el).popover()}});
},{"undefined":undefined}],23:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({options:{contentEl:"#content"},level:0,offset:null,initialize:function(e){this.listenTo(this.view,"freeze:scroll",this.onFreezeScroll),this.listenTo(this.view,"unfreeze:scroll",this.onUnFreezeScroll)},onFreezeScroll:function(){this.level++,1==this.level&&(this.offset=Backbone.$(this.options.contentEl).scrollTop())},onUnFreezeScroll:function(){this.level--,this.level<=0&&(this.level=0,null!=this.offset&&Backbone.$(this.options.contentEl).scrollTop(this.offset),this.offset=null)}});
},{"undefined":undefined}],24:[function(require,module,exports){
function selectify(e,t){var a=Backbone.$,n=a.extend({btnSize:"",btnStyle:"",direction:"down"},t);return e.each(function(e){var t=a(this);if(!t.data("style-loaded")){t.data("style-loaded",!0);var o=void 0==t.attr("id")?"fake-select-"+e:t.attr("id");n=a.extend({},n,t.data()),t.wrap('<div class="fake-select-wrap"/>'),t.before('<div class="fake-select-mask '+("down"==n.direction?"dropdown":"dropup")+'" id="'+o+'-mask"><button type="button" class="form-control form-control-select '+n.btnStyle+" "+n.btnSize+' dropdown-toggle" data-toggle="dropdown"><span class="fake-selected">'+getLabel(a("option:selected",t))+'</span><span class="caret"></span></button><ul class="dropdown-menu dropdown-control"></ul></div>');var d=t.prev(".fake-select-mask"),i=t.prop("selectedIndex"),s=d.find(".dropdown-menu"),l=0;t.find("option, optgroup").each(function(){var e,t=Backbone.$(this).data("indent"),n=void 0!=t&&null!=t&&""!=t?"page-level-"+t:"";"OPTGROUP"==this.tagName?e='<li class="'+n+'"><span class="disabled">'+this.label+"</span></li>":(e='<li class="'+n+(l==i?" active":"")+'"><a data-index="'+this.index+'" href="#">'+a(this).text()+"</a></li>",l++),s.append(e)}),d.attr("title",t.attr("title")||""),d.find(".dropdown-menu li a").each(function(){a(this).click(function(e){a(".dropdown-menu li",d).removeClass("active"),a(this).parent().addClass("active"),t.prop("selectedIndex",a(this).data("index")).change(),e.preventDefault()})}),t.hide(),t.on("change",function(){a(this).parents("form").trigger("input"),d.find(".fake-selected").html(getLabel(a("option:selected",t)));var e=t.prop("selectedIndex");a(".dropdown-menu li",d).removeClass("active"),a('.dropdown-menu li a[data-index="'+e+'"]',d).parent().addClass("active")})}})}function getLabel(e){return(e.data("tags")?'<span class="tags tags-color-'+e.data("tags")+'"></span>':"")+e.text()}var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({onRender:function(){selectify(Backbone.$('select[data-style="selectify"]',this.view.el))}});
},{"undefined":undefined}],25:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Forms=require(424),LoaderTpl=require(417),ControllerChannel=Backbone.Radio.channel("controller"),SelectifyBehavior=require(24),ScrollFixBehavior=require(23);module.exports=Marionette.Behavior.extend({ui:{save:"button[data-role='save']",cancel:"button[data-role='cancel']","delete":"button[data-role='delete']",errors:"div[data-role='errors']",form:"form",radioInputs:'input[type="radio"]'},events:{"click @ui.save":"onSave","click @ui.cancel":"onCancel","click @ui.delete":"onDelete","input @ui.form":"onFieldChange","change @ui.radioInputs":function(){this.getUI("form").trigger("input")}},behaviors:[SelectifyBehavior,ScrollFixBehavior],keyCombos:[],initialize:function(e){this.mergeOptions(e),this.lockSave=!1,this.lockDelete=!1,this.keyListener=Backbone.Radio.channel("app").request("ctx:keyListener")},onFieldChange:function(){ControllerChannel.trigger("modified:content")},onRender:function(){this.keyCombos.push(this.keyListener.register_combo({keys:"meta s",is_exclusive:!0,on_keydown:this.onSave.bind(this)}))},onDestroy:function(){this.keyListener.unregister_many(this.keyCombos)},onSimpleFormSave:function(e){e?e.promise=this.onSave():this.onSave()},onSave:function(e){if(this.view.trigger("freeze:scroll"),!this.view.onSave)return void this.view.trigger("unfreeze:scroll");if(e&&e.preventDefault(),!this.lockSave){this.lockSave=!0,Forms.clearErrors(this.getUI("errors"),this.view.el),this.view.triggerMethod("before:save"),_.each(this.view.getRegions(),function(e){e.currentView&&e.currentView.triggerMethod("before:save")});var i=this.view.onSave();if(!i)return ControllerChannel.trigger("saved:content"),this.lockSave=!1,void this.view.trigger("unfreeze:scroll");var t=this.getUI("save");t.addClass("btn-load");var r=t.text();return t.html(LoaderTpl()),i.done(function(){ControllerChannel.trigger("saved:content")}).fail(function(e){Backbone.$("#content").animate({scrollTop:0},"slow"),Forms.displayErrors(e,this.getUI("errors"),this.view.el)}.bind(this)).always(function(){this.lockSave=!1,t.removeClass("btn-load"),t.html('C\'est fait <span class="md-icon md-done"></span>'),setTimeout(function(){t&&t.text(r)},2e3),this.view.trigger("unfreeze:scroll")}.bind(this))}},onCancel:function(e){if(!this.view.onCancel)return void Backbone.history.history.back();e&&e.preventDefault(),this.view.triggerMethod("before:cancel"),_.each(this.view.getRegions(),function(e){e.currentView&&e.currentView.triggerMethod("before:cancel")});var i=this.view.onCancel();if(i){var t=this.getUI("cancel");t.addClass("btn-load");t.text();return t.html(LoaderTpl()),i.fail(function(e){Backbone.$("#content").animate({scrollTop:0},"slow"),Forms.displayErrors(e,this.getUI("errors"),this.view.el)}.bind(this)).always(function(){Backbone.history.history.back()}.bind(this))}},onDelete:function(e){if(this.view.onDelete){e&&e.preventDefault();var i=this.getUI("delete");if(!i.hasClass("confirm-warning"))return i.addClass("confirm-warning"),i.data("label",i.text()),void i.text("Confirmer");if(!this.lockDelete){this.lockDelete=!0;var t=this.view.onDelete();if(!t)return this.lockDelete=!1,i.removeClass("confirm-warning"),void i.text(i.data("label"));i.removeClass("confirm-warning"),i.addClass("btn-load"),i.html(LoaderTpl()),t.always(function(){this.lockDelete=!1,i.removeClass("btn-load"),i.text(i.data("label"))}.bind(this))}}},onChildviewFieldChange:function(){this.view.triggerMethod("field:change")},onChildviewSave:function(){this.view.triggerMethod("save")}});
},{"23":23,"24":24,"417":417,"424":424,"undefined":undefined}],26:[function(require,module,exports){
function addSign(e,i){var t=i.match(/(^|\/)([0-9]+)($|\/|\.)/);if(t){var n=Session.hashMedia(parseInt(t[2]));return'src="https://'+Session.site.get("backoffice")+"/media/"+i+"?sign="+n+'"'}return e}function removeSign(e,i){return i=i.replace(/(\?|\&)sign=[-a-zA-Z0-9]+/,""),'src="/media/'+i+'"'}function settingToHTML(e,i){var t="";if("image"==e.get("type")&&i.integration_type&&"inline"==i.integration_type){var n="";switch(i.image_variant){case"g_vignette":n="/g_vignette";break;case"vignette":n="/vignette";break;case"g_miniature":n="/g_miniature";break;case"miniature":n="/miniature"}var a="";switch(i.image_align){case"left":case"right":case"middle":a=i.image_align}t='<img src="/media'+n+"/"+e.get("media_id")+'" '+(""!=a?' align="'+a+'" ':"")+(""==i.image_height||isNaN(parseFloat(i.image_height))?"":' height="'+parseFloat(i.image_height)+'px" ')+(""==i.image_width||isNaN(parseFloat(i.image_width))?"":' width="'+parseFloat(i.image_width)+'px" ')+(""!=i["class"]?' class="'+_.escape(i["class"])+'" ':"")+' style="'+(""==i.margin_top||isNaN(parseFloat(i.margin_top))?"":" margin-top:"+parseFloat(i.margin_top)+"px;")+(""==i.margin_right||isNaN(parseFloat(i.margin_right))?"":" margin-right:"+parseFloat(i.margin_right)+"px;")+(""==i.margin_left||isNaN(parseFloat(i.margin_left))?"":" margin-left:"+parseFloat(i.margin_left)+"px;")+(""==i.margin_bottom||isNaN(parseFloat(i.margin_bottom))?"":" margin-bottom:"+parseFloat(i.margin_bottom)+"px;")+'"'+(""!=i.alt?' alt="'+_.escape(i.alt)+'" ':"")+" "+(""!=i.title?' title="'+_.escape(i.title)+'" ':"")+"  />"}else t="<a",t+=' href="/media/'+e.get("media_id")+'" target="_blank"',i["class"]&&(t+=' class="'+_.escape(i["class"])+'"'),i.title&&(t+=' title="'+_.escape(i.title)+'"'),t+=">Télécharger le fichier</a>";var r=[];return i.xtra_author,i.xtra_file&&r.push(e.get("original_name")),i.xtra_name&&r.push(e.get("name")),i.xtra_modification&&r.push(format.formatDateTime(this.model.get("modification_date"))),i.xtra_weight&&r.push(format.formatBytes(e.get("weight"),2)),i.xtra_size&&"image"==e.get("type")&&r.push(""+e.get("width")+" x "+e.get("height")),r.length>0&&(t+=" ("+r.join(" ")+")"),t}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(423),PublishModalView=require(301),SelectModalView=require(299),WysiwygModalView=require(300),File=require(278),Files=require(279),Page=require(195),WysiwygChannel=Backbone.Radio.channel("wysiwyg"),Session=Backbone.Radio.channel("app").request("ctx:session");require("tinymce");var tinyMCE=window.tinyMCE;require(32),require(16),require("tinymce/plugins/lists/plugin.js"),require("tinymce/plugins/paste/plugin.js"),require(427),require("tinymce/plugins/charmap/plugin.js"),require("tinymce/plugins/code/plugin.js"),require("tinymce/plugins/anchor/plugin.js"),require("tinymce/plugins/table/plugin.js"),require("tinymce/plugins/textcolor/plugin.js"),require("tinymce/plugins/colorpicker/plugin.js"),require("tinymce/plugins/fullscreen/plugin.js"),require("tinymce/plugins/image/plugin.js"),require("tinymce/plugins/contextmenu/plugin.js"),require(15),tinyMCE.PluginManager.add("kiubi",function(e,i){e.addButton("kiubi_media",{tooltip:"Médiathèque",icon:"image",onclick:function(){WysiwygChannel.trigger("open:media",e)}}),e.on("BeforeSetContent",function(e){e.content=e.content.replace(/src="\/media\/([^"]+)"/,addSign)}),e.on("GetContent",function(e){var i=new RegExp('src="https://'+Session.site.get("backoffice")+'/media/([^"]+)"',"i");e.content=e.content.replace(i,removeSign)})}),module.exports=Marionette.Behavior.extend({options:{selector:'textarea[data-role="wysiwyg"]'},editorList:[],initialize:function(e){this.mergeOptions(e),this.listenTo(WysiwygChannel,"open:media",this.openMedia)},onDomRefresh:function(){this.clearAllWysiwyg();var e=this;Backbone.$(this.options.selector,this.view.$el).each(function(i,t){e.createWysiwyg(t).then(function(i){i.length>0&&e.editorList.push(i[0])})})},createWysiwyg:function(e){var i,t,n=Backbone.$(e),a=n.height();switch(n.data("wysiwyg-toolbar")){case"micro":i=["image","contextmenu","kiubi","lists","paste","link","charmap","code"],t="bold italic underline strikethrough | numlist bullist | pastetext | link unlink | kiubi_media charmap removeformat | code",a-=68;break;default:i=["image","contextmenu","kiubi","media","lists","paste","textcolor","colorpicker","link","anchor","table","charmap","code"],t=["formatselect fontsizeselect | pastetext | undo redo | link unlink anchor | kiubi_media media table | charmap removeformat","bold italic underline strikethrough | subscript superscript | alignleft aligncenter alignright alignjustify | forecolor backcolor | numlist bullist | outdent indent | fullscreen code"],a-=102}var r=this;return tinyMCE.init({target:e,height:a,skin_url:"/vendor/tinymce/skins/lightgray",language:"fr_FR",language_url:!1,convert_urls:!1,menu:{},custom_undo_redo_levels:20,forced_root_block:!1,block_formats:"Paragraphe=p;Titre 1=h1;Titre 2=h2;Titre 3=h3;Titre 4=h4;Titre 5=h5;Titre 6=h6;Preformatted=pre;Normal (SPAN)=span;Normal (DIV)=div",plugins:i,toolbar:t,fontsize_formats:"8px 10px 12px 14px 18px 24px 36px",branding:!1,link_list:{types:this.link_types.bind(this),pages:this.link_pages.bind(this)},extended_valid_elements:"style[type],script[language|type|src],span[*]",valid_children:"+body[style], +div[style], +span[*]",init_instance_callback:function(e){e.on("Change",function(e){r.view.triggerMethod("field:change")}),e.on("KeyDown",function(e){if("s"==e.key&&e.metaKey)return e.preventDefault(),r.view.triggerMethod("save"),!1})}})},link_types:function(e){var i=new Page;i.getInternalLinkTypes().done(function(i){e(_.map(i,function(e){return{value:e.value,title:e.label}}))})},link_pages:function(e,i){var t=new Page;t.getInternalLinkTargets(e).done(function(e){i(_.map(e,function(e){var i="";if(e.depth&&e.depth>0)for(var t=0;t<e.depth;t++)i="  "+i;return{value:e.url,text:i+_.escape(e.name),disabled:null==e.url}}))})},clearAllWysiwyg:function(){_.each(this.editorList,function(e){tinymce.remove(e)}),this.editorList=[]},onBeforeDestroy:function(){this.clearAllWysiwyg()},onBeforeSave:function(){_.each(this.editorList,function(e){e.save()})},openMedia:function(e){var i=_.find(this.editorList,function(i){return i==e});if(i===e){var t=new Files;t.folder_id=2;var n=new File,a=new SelectModalView({collection:t,model:n,type:"file"});this.listenTo(a,"close:modal",function(){this.setupMedia(e,a.model)}),this.listenTo(a,"action:modal",function(i){this.switchToPublish(e,i.currentFolder)});var r=Backbone.Radio.channel("app").request("ctx:navigationController");r.showInModal(a,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier"}})}},setupMedia:function(e,i){var t=new WysiwygModalView({model:i});this.listenTo(t,"insert:file",function(t){e.insertContent(settingToHTML(i,t))});var n=Backbone.Radio.channel("app").request("ctx:navigationController");n.showInModal(t,{title:i.get("name"),modalClass:"mediatheque modal-right",modalDialogClass:"modal-lg",action:{title:"Insérer"}})},switchToPublish:function(e,i){var t=new Files;t.folder_id=i;var n=new PublishModalView({isMultiFiles:!1,collection:t});this.listenTo(n,"uploaded:files",function(i){this.onUploadedFiles(e,i)});var a=Backbone.Radio.channel("app").request("ctx:navigationController");a.showInModal(n,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier un fichier"}})},onUploadedFiles:function(e,i){var t=i.find(function(e){return"done"==e.uploadProgression.status}),n=Backbone.Radio.channel("app").request("ctx:navigationController");return t?void t.fetch().done(function(){this.setupMedia(e,t)}.bind(this)).fail(function(){n.hideModal()}):void n.hideModal()}});
},{"15":15,"16":16,"195":195,"278":278,"279":279,"299":299,"300":300,"301":301,"32":32,"423":423,"427":427,"undefined":undefined}],27:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({onRender:function(){Backbone.$('[data-toggle="tooltip"]',this.view.el).tooltip()}});
},{"undefined":undefined}],28:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.Behavior.extend({isSelected:!1,lock:!1,ui:{selection:"input[name='selection']"},events:{"click [data-role='action']":"action","hidden.bs.dropdown .btn-group":"onHiddenDropDown","change @ui.selection":"onSelect"},action:function(e){var t=Backbone.$(e.currentTarget),n=t.data("action");if(n){var i="onAction"+n.charAt(0).toUpperCase()+n.slice(1);if(this.view[i]){var o=t.data("confirm");if(o&&!t.parent().hasClass("confirm-"+o))return e.preventDefault(),t.data("title",t.text()),t.parent().addClass("confirm-"+o),t.text("Êtes-vous sûr ?"),!1;if(!this.lock){this.lock=!0;var a=this.view[i]();if(!a)return void(this.lock=!1);var r=this,c=t.text();t.addClass("disabled"),t.text("Chargement..."),a.always(function(){t.removeClass("disabled"),t.text(c),r.lock=!1})}}}},onHiddenDropDown:function(e){Backbone.$(".dropdown-menu a",e.currentTarget).each(function(e,t){t=Backbone.$(t),t.data("confirm")&&t.parent().hasClass("confirm-"+t.data("confirm"))&&(t.text(t.data("title")),t.parent().removeClass("confirm-"+t.data("confirm")))})},initialize:function(e){this.view.getOption("model")&&this.view.listenTo(this.view.getOption("model"),"sync",this.view.render)},onRender:function(){this.getUI("selection").prop("checked",this.isSelected)},onSelect:function(e){this.isSelected=e.currentTarget.checked}});
},{"undefined":undefined}],29:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Config=require(33),Cfg=new Config;module.exports=Cfg;
},{"33":33,"undefined":undefined}],30:[function(require,module,exports){
function setHeaderActions(e,n){e&&e.length&&_(e).each(function(e){e.callback&&!_.isFunction(e.callback)&&(_.isArray(e.callback)?e.callback=n[e.callback[0]].bind(n,e.callback[1]):e.callback=n[e.callback].bind(n))}),n.navigationController.setHeaderActions(e)}function setHeaderTabs(e,n){e&&_(e).each(function(e){e.is_active=e.url==document.location.pathname}),n.navigationController.setHeaderTabs(e)}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.Object.extend({sidebarMenuService:null,sidebarMenu:null,sidebarMenuEvents:{},sidebarMenuBuffer:[],baseBreadcrum:[],initialize:function(e){this.navigationController=Backbone.Radio.channel("app").request("ctx:navigationController")},showSidebarMenu:function(){if(this.sidebarMenu&&(null==this.navigationController.getSidebarMenuDetail()||this.navigationController.getSidebarMenuService()!=this.sidebarMenuService)){var e=new this.sidebarMenu;_.each(this.sidebarMenuEvents,function(n,i){this.listenTo(e,i,this[n])},this),_.each(this.sidebarMenuBuffer,function(n){e.triggerMethod(n.event,n.params)},this),this.sidebarMenuBuffer=[],this.navigationController.showSidebarMenuDetail(e)}},triggerSidebarMenu:function(e,n){var i=this.navigationController.getSidebarMenuDetail();return i&&this.sidebarMenuService==i.service?void i.triggerMethod(e,n):void this.sidebarMenuBuffer.push({event:e,params:n})},notFound:function(){this.navigationController.notFound()},setHeader:function(e,n,i){this.setBreadCrum(e),setHeaderActions(n,this),setHeaderTabs(i,this),this.navigationController.refreshHeader()},setBreadCrum:function(e,n){for(var i=[],t=this.baseBreadcrum.length;t--;)i[t]=this.baseBreadcrum[t];_.isArray(e)?i=i.concat(e):i.push(e),this.navigationController.setBreadCrum(i),n&&this.navigationController.refreshHeader()},actionSave:function(){var e=this.navigationController.getContent();if(!e||!e.onSave)return null;var n={};return e.triggerMethod("simpleForm:save",n),n.promise?n.promise:void 0},parseQueryString:function(e,n){if(!_.isString(e))return n;e=e.substring(e.indexOf("?")+1);var i=decodeURI(e).split(/&/g);return _.each(i,function(e){var i=e.split("=");i.length>=1&&n.hasOwnProperty(i[0])&&(n[i[0]]=2==i.length?i[1]:null)}),n}});
},{"undefined":undefined}],31:[function(require,module,exports){
module.exports={months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,a){switch(a){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}};
},{}],32:[function(require,module,exports){
tinyMCE.addI18n("fr_FR",{Cut:"Couper","Heading 5":"En-tête 5","Header 2":"Titre 2","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"Votre navigateur ne supporte pas la copie directe. Merci d'utiliser les touches Ctrl+X/C/V.","Heading 4":"En-tête 4",Div:"Div","Heading 2":"En-tête 2",Paste:"Coller",Close:"Fermer","Font Family":"Police",Pre:"Pre","Align right":"Aligner à droite","New document":"Nouveau document",Blockquote:"Citation","Numbered list":"Numérotation","Heading 1":"En-tête 1",Headings:"En-têtes","Increase indent":"Augmenter le retrait",Formats:"Formats",Headers:"Titres","Select all":"Tout sélectionner","Header 3":"Titre 3",Blocks:"Blocs",Undo:"Annuler",Strikethrough:"Barré","Bullet list":"Puces","Header 1":"Titre 1",Superscript:"Exposant","Clear formatting":"Effacer la mise en forme","Font Sizes":"Taille de police",Subscript:"Indice","Header 6":"Titre 6",Redo:"Rétablir",Paragraph:"Paragraphe",Ok:"Ok",Bold:"Gras",Code:"Code",Italic:"Italique","Align center":"Centrer","Header 5":"Titre 5","Heading 6":"En-tête 6","Heading 3":"En-tête 3","Decrease indent":"Diminuer le retrait","Header 4":"Titre 4","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":'Le presse-papiers est maintenant en mode "texte plein". Les contenus seront collés sans retenir les formatages jusqu\'à ce que vous désactiviez cette option.',Underline:"Souligné",Cancel:"Annuler",Justify:"Justifier",Inline:"En ligne",Copy:"Copier","Align left":"Aligner à gauche","Visual aids":"Aides visuelle","Lower Greek":"Grec minuscule",Square:"Carré",Default:"Par défaut","Lower Alpha":"Alpha minuscule",Circle:"Cercle",Disc:"Disque","Upper Alpha":"Alpha majuscule","Upper Roman":"Romain majuscule","Lower Roman":"Romain minuscule","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"L'Id doit commencer par une lettre suivi par des lettres, nombres, tirets, points, deux-points ou underscores",Name:"Nom",Anchor:"Ancre",Id:"Id","You have unsaved changes are you sure you want to navigate away?":"Vous avez des modifications non enregistrées, êtes-vous sûr de quitter la page?","Restore last draft":"Restaurer le dernier brouillon","Special character":"Caractères spéciaux","Source code":"Code source",Language:"Langue","Insert/Edit code sample":"Insérer / modifier une exemple de code",B:"B",R:"R",G:"V",Color:"Couleur","Right to left":"Droite à gauche","Left to right":"Gauche à droite",Emoticons:"Emoticônes",Robots:"Robots","Document properties":"Propriété du document",Title:"Titre",Keywords:"Mots-clés",Encoding:"Encodage",Description:"Description",Author:"Auteur",Fullscreen:"Plein écran","Horizontal line":"Ligne horizontale","Horizontal space":"Espacement horizontal","Insert/edit image":"Insérer/modifier une image",General:"Général",Advanced:"Avancé",Source:"Source",Border:"Bordure","Constrain proportions":"Conserver les proportions","Vertical space":"Espacement vertical","Image description":"Description de l'image",Style:"Style",Dimensions:"Dimensions","Insert image":"Insérer une image",Image:"Image","Zoom in":"Zoomer",Contrast:"Contraste",Back:"Retour",Gamma:"Gamma","Flip horizontally":"Retournement horizontal",Resize:"Redimensionner",Sharpen:"Affiner","Zoom out":"Dézoomer","Image options":"Options de l'image",Apply:"Appliquer",Brightness:"Luminosité","Rotate clockwise":"Rotation horaire","Rotate counterclockwise":"Rotation anti-horaire","Edit image":"Modifier l'image","Color levels":"Niveaux de couleur",Crop:"Rogner",Orientation:"Orientation","Flip vertically":"Retournement vertical",Invert:"Inverser","Date/time":"Date/heure","Insert date/time":"Insérer date/heure","Remove link":"Enlever le lien",Url:"Url","Text to display":"Texte à afficher",Anchors:"Ancres","Insert link":"Insérer un lien",Link:"Lien","New window":"Nouvelle fenêtre",None:"n/a","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"L'URL que vous avez entrée semble être un lien externe. Voulez-vous ajouter le préfixe http:// nécessaire?","Paste or type a link":"Coller ou taper un lien",Target:"Cible","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"L'URL que vous avez entrée semble être une adresse e-mail. Voulez-vous ajouter le préfixe mailto: nécessaire?","Insert/edit link":"Insérer/modifier un lien","Insert/edit video":"Insérer/modifier une vidéo",Media:"Média","Alternative source":"Source alternative","Paste your embed code below:":"Collez votre code d'intégration ci-dessous :","Insert video":"Insérer une vidéo",Poster:"Publier","Insert/edit media":"Insérer/modifier un média",Embed:"Intégrer","Nonbreaking space":"Espace insécable","Page break":"Saut de page","Paste as text":"Coller comme texte",Preview:"Prévisualiser",Print:"Imprimer",Save:"Enregistrer","Could not find the specified string.":"Impossible de trouver la chaîne spécifiée.",Replace:"Remplacer",Next:"Suiv","Whole words":"Mots entiers","Find and replace":"Trouver et remplacer","Replace with":"Remplacer par",Find:"Chercher","Replace all":"Tout remplacer","Match case":"Respecter la casse",Prev:"Préc ",Spellcheck:"Vérification orthographique",Finish:"Finie","Ignore all":"Tout ignorer",Ignore:"Ignorer","Add to Dictionary":"Ajouter au dictionnaire","Insert row before":"Insérer une ligne avant",Rows:"Lignes",Height:"Hauteur","Paste row after":"Coller la ligne après",Alignment:"Alignement","Border color":"Couleur de la bordure","Column group":"Groupe de colonnes",Row:"Ligne","Insert column before":"Insérer une colonne avant","Split cell":"Diviser la cellule","Cell padding":"Espacement interne cellule","Cell spacing":"Espacement inter-cellulles","Row type":"Type de ligne","Insert table":"Insérer un tableau",Body:"Corps",Caption:"Titre",Footer:"Pied","Delete row":"Effacer la ligne","Paste row before":"Coller la ligne avant",Scope:"Etendue","Delete table":"Supprimer le tableau","H Align":"Alignement H",Top:"Haut","Header cell":"Cellule d'en-tête",Column:"Colonne","Row group":"Groupe de lignes",Cell:"Cellule",Middle:"Milieu","Cell type":"Type de cellule","Copy row":"Copier la ligne","Row properties":"Propriétés de la ligne","Table properties":"Propriétés du tableau",Bottom:"Bas","V Align":"Alignement V",Header:"En-tête",Right:"Droite","Insert column after":"Insérer une colonne après",Cols:"Colonnes","Insert row after":"Insérer une ligne après",Width:"Largeur","Cell properties":"Propriétés de la cellule",Left:"Gauche","Cut row":"Couper la ligne","Delete column":"Effacer la colonne",Center:"Centré","Merge cells":"Fusionner les cellules","Insert template":"Ajouter un thème",Templates:"Thèmes","Background color":"Couleur d'arrière-plan","Custom...":"Personnalisé...","Custom color":"Couleur personnalisée","No color":"Aucune couleur","Text color":"Couleur du texte","Table of Contents":"Table des matières","Show blocks":"Afficher les blocs","Show invisible characters":"Afficher les caractères invisibles","Words: {0}":"Mots : {0}",Insert:"Insérer",File:"Fichier",Edit:"Editer","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"Zone Texte Riche. Appuyer sur ALT-F9 pour le menu. Appuyer sur ALT-F10 pour la barre d'outils. Appuyer sur ALT-0 pour de l'aide.",Tools:"Outils",View:"Voir",Table:"Tableau",Format:"Format"});
},{}],33:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({defaults:{api:"https://api.kiubi.com",ga_tracker:null}});
},{"undefined":undefined}],34:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Country=Backbone.Model.extend({urlRoot:"geo/countries",idAttribute:"country_id",parse:function(e){return e.data?_.isNumber(e.data)?{user_id:e.data}:e.data:e},defaults:{country_id:0,name:"",code:"",group_id:0,group_name:""}});module.exports=Backbone.Collection.extend({url:"geo/countries",model:Country,parse:function(e){return this.meta=e.meta,e.data},selectPayload:function(){return _.map(this.toJSON(),function(e){return{value:e.country_id,label:e.name}})}});
},{"undefined":undefined}],35:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Domain=Backbone.Model.extend({urlRoot:"sites/@site/domains",idAttribute:"domain_id",parse:function(e){return e.data?_.isNumber(e.data)?{domain_id:e.data}:e.data:e},defaults:{domain_id:null,is_main:!1,is_provided:!1,is_https_certified:!1,name:"",https_status:null}});module.exports=Backbone.Collection.extend({url:"sites/@site/domains",model:Domain,parse:function(e){return this.meta=e.meta,e.data}});
},{"undefined":undefined}],36:[function(require,module,exports){
function isTokenValid(e){return api.get("auth/token/"+e,{},{access_token:e})}function allowedSite(e){var t=Backbone.$.Deferred();return api.get("sites/"+e,{}).done(function(e,i){t.resolve(i)}).fail(function(e,i){t.reject(i.message)}),t.promise()}function pickFirstSite(){var e=Backbone.$.Deferred();return api.get("sites",{limit:1}).done(function(t,i){e.resolve(i[0])}).fail(function(t,i){e.reject(i.message)}),e.promise()}function storeToken(e){Backbone.$.cookie("AccesToken",e,{path:"/"}),api.access_token=e}function getLastSite(e){var t=Backbone.$.cookie("LastSite");if(t)return t=t.split(","),t[0]==""+e?t[1]:void 0}function storeLastSite(e,t){Backbone.$.cookie("LastSite",t+","+e,{path:"/"})}function clearToken(){Backbone.$.removeCookie("AccesToken"),api.access_token=null}function setCredidentials(e,t){return e.done(function(e,i){storeToken(i.token),t.set("token_media",i.token_media),t.user.set("user_id",i.user.user_id),t.user.set("firstname",i.user.firstname),t.user.set("lastname",i.user.lastname),t.user.set("avatar",i.user.avatar),t.user.set("email",i.user.email),t.user.trigger("authenticate")}).then(null,function(e,t){return Backbone.$.Deferred().reject(t.message)})}function setSiteContext(e,t){return e.done(function(e){console.log("Set session site",e.code_site),t.site&&e.code_site==t.site.get("code_site")||(t.site.set(e),storeLastSite(t.site.get("code_site"),t.user.get("user_id")),api.current_site=t.site.get("code_site"),t.site.trigger("change:site"))}).fail(function(){Backbone.$.removeCookie("LastSite"),api.current_site=null})}var Backbone=require("backbone"),_=require("underscore");require("jquery.cookie");var api=require(421),createHash=require(8),Site=require(37),Session=Backbone.Model.extend({urlRoot:"auth/token",initialize:function(e){this.user=e.user,this.site=new Site},defaults:{token:"",token_media:"",user:null,site:null},start:function(){var e=Backbone.$.cookie("AccesToken");return e?setCredidentials(isTokenValid(e),this).then(function(){var e=getLastSite(this.user.get("user_id"))?allowedSite(getLastSite(this.user.get("user_id"))):pickFirstSite();return setSiteContext(e,this)}.bind(this)):Backbone.$.Deferred().reject()},authenticate:function(e,t){return clearToken(),setCredidentials(api.post("auth/token",{login:e,password:t}),this).then(function(){var e;return getLastSite(this.user.get("user_id"))?(e=Backbone.$.Deferred(),allowedSite(getLastSite(this.user.get("user_id"))).done(function(t,i){e.resolve(t,i)}).fail(function(){pickFirstSite().done(function(t,i){e.resolve(t,i)}).fail(function(t,i){e.reject(t,i)})})):e=pickFirstSite(),setSiteContext(e,this)}.bind(this))},changeSite:function(e){return setSiteContext(allowedSite(e),this)},hashMedia:function(e){var t=this.get("token_media")+";"+e+";"+this.site.get("code_site");return this.user.get("user_id")+"-"+createHash("sha256").update(t).digest("hex")},convertMediaPath:function(e){var t=e.match(/(^|\/)([0-9]+)($|\/|\.)/);return t?"https://"+this.site.get("backoffice")+e+"?sign="+this.hashMedia(parseInt(t[2])):e},convertThemePath:function(e){return"https://"+this.site.get("backoffice")+e+"?sign="+this.hashMedia(e)}});module.exports=Session;
},{"37":37,"421":421,"8":8,"undefined":undefined}],37:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites",idAttribute:"code_site",parse:function(e){return e.data?_.isNumber(e.data)?{site_id:e.data}:e.data:e},defaults:{code_site:"",domain:"",backoffice:"",name:""},searchSite:function(e){var t=this.get("code_site");return Backbone.ajax({url:"sites.json",data:{term:e,limit:5}}).then(function(e){return _.filter(e.data,function(e){return e.code_site!=t})})}});
},{"undefined":undefined}],38:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"users",idAttribute:"user_id",parse:function(e){return e.data?_.isNumber(e.data)?{user_id:e.data}:e.data:e},defaults:{user_id:0,lastname:"",firstname:"",avatar:"",email:""},isAuth:function(){return this.get("user_id")>0}});
},{"undefined":undefined}],39:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/appearance/builder",idAttribute:"draft_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{draft_id:e.data}:e.data:e},defaults:{draft_id:null,layout_id:0,type:null,name:"",model:null,tree:null},describeZone:function(e){return _.find(this.get("model").zones,function(t){return t.id==e})},getWidgets:function(e){return Backbone.ajax({url:"sites/@site/appearance/widgets.json?page="+e}).then(function(e){return e.data})},getModels:function(){return Backbone.ajax({url:"sites/@site/appearance/models.json"}).then(function(e){return _.map(e.data,function(e){return{id:e.id,name:e.name,structure:e.structure}})})},addBloc:function(e,t){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/blocs.json",method:"POST",data:{nb_col:t,zone:e}}).then(function(e){return e.data})},removeBloc:function(e){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/blocs/"+e+".json",method:"DELETE"}).then(function(e){return null})},removeWidget:function(e){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets/"+e+".json",method:"DELETE"}).then(function(e){return null})},addWidget:function(e,t,n){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets.json",method:"POST",data:{widget:e,cell_id:t,position:n.position,sibling_id:n.sibling_id}}).then(function(e){return e.data})},moveWidget:function(e,t,n){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets/"+e+".json",method:"PUT",data:{cell_id:t,position:n.position,sibling_id:n.sibling_id}}).then(function(e){return e.data})},getWidget:function(e){return Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets/"+e+".json"}).then(function(e){return e.data})},setWidgetSettings:function(e,t,n){var a={};return _.each(n,function(e,n){if(t[n]&&t[n].type){switch(t[n].type){case 1:default:e=""+e;break;case 2:e="1"==e;break;case 3:e=""===e?null:parseInt(e);break;case 4:_.isArray(e)||(e=[e])}a[n]=e}}),Backbone.ajax({url:"sites/@site/appearance/builder/"+this.get("draft_id")+"/widgets/"+e+".json",method:"PUT",data:{settings:a}}).then(function(e){})}});
},{"undefined":undefined}],40:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:function(){return"sites/@site/appearance/layouts/"+this.get("page")},idAttribute:"layout_id",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},defaults:{layout_id:null,is_multi_layouts:!1,name:"",page:"",is_default:!1,service:"",page_title:"",usage_count:0,model:{}},getTypes:function(){return Backbone.ajax({url:"sites/@site/appearance/types.json"}).then(function(e){var a={};return _.each(e.data,function(e){a[e.service]||(a[e.service]=[]),a[e.service].push({name:e.name,page:e.page,is_multi_layouts:e.is_multi_layouts||!1})}),a})},getType:function(e){return Backbone.ajax({url:"sites/@site/appearance/types/"+e+".json"}).then(function(e){return{name:e.data.name,page:e.data.page,is_multi_layouts:e.data.is_multi_layouts||!1}})}});
},{"undefined":undefined}],41:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Collection.extend({url:"sites/@site/appearance/layouts",model:require(40),parse:function(e){return this.meta=e.meta,e.data}});
},{"40":40,"undefined":undefined}],42:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var t=[{title:"Enregistrer",callback:"actionSave"}];return t}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Controller=require(30),ControllerChannel=Backbone.Radio.channel("controller"),Builder=require(39),Layout=require(40),Layouts=require(41),IndexView=require(54),LayoutsView=require(57),LayoutView=require(55),ActiveLinksBehaviors=require(18),SelectifyBehavior=require(24),SidebarMenuView=Marionette.View.extend({template:require(52),service:"appearance",behaviors:[ActiveLinksBehaviors],pages:[],initialize:function(e){var t=new Layout;t.getTypes().done(function(e){this.types=e,this.render()}.bind(this))},templateContext:function(){return{types:this.types}}}),SidebarMenuLayoutView=Marionette.View.extend({template:require(53),service:"layout",behaviors:[ActiveLinksBehaviors,SelectifyBehavior],tree:[],models:[],folder_id:null,category_id:null,ui:{folderSelector:"select[data-role='select-folder']",categorySelector:"select[data-role='select-category']",modelSelector:"select[data-role='select-model']",inputName:"input[data-role='name']"},events:{"change @ui.folderSelector":function(e){this.folder_id=Backbone.$(e.currentTarget).val(),this.category_id=0,this.render()},"change @ui.categorySelector":function(e){this.category_id=Backbone.$(e.currentTarget).val(),this.render()},"change @ui.modelSelector":function(e){ControllerChannel.trigger("change:model",Backbone.$(e.currentTarget).val())},"change @ui.inputName":function(e){ControllerChannel.trigger("change:name",Backbone.$(e.currentTarget).val())}},initialize:function(e){this.tree=[],this.models=[],this.builder=null,this.folder_id=0,this.category_id=0,this.listenTo(ControllerChannel,"refresh:widgets",function(e,t,i){this.tree=e,this.models=t,this.builder=i,this.render()})},templateContext:function(){var e=this.tree,t=[],i=[];return null!=this.folder_id&&e[this.folder_id]&&(t=e[this.folder_id].categories),null!=this.category_id&&t[this.category_id]&&(i=t[this.category_id].widgets),{folders:e,folder_id:this.folder_id,categories:t,category_id:this.category_id,widgets:i,models:this.models,name:this.builder?this.builder.get("name"):"",current_model:this.builder?this.builder.get("model").id:""}},onRender:function(){this.tree.length>0&&ControllerChannel.trigger("rendered:widgets")}}),AppearanceController=Controller.extend({sidebarMenuService:"appearance",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Mises en page",href:"/appearance"}],showIndex:function(){this.navigationController.navigate("/appearance/layouts/cms-home")},showLayouts:function(e){var t=new Layout,i=new Layouts;t.getType(e).then(function(t){i.fetch({data:{page:e}}).done(function(){var n=new LayoutsView({collection:i,page:e});this.navigationController.showContent(n),this.setHeader({title:t.name})}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Type de mise en page introuvable"})}.bind(this))}.bind(this),function(){this.notFound(),this.setHeader({title:"Type de mise en page introuvable"})})},showLayout:function(e,t){function i(e){return[{title:e.get("type").name,href:"/appearance/layouts/"+e.get("type").page},{title:e.get("name")}]}var n=new Builder({layout_id:t,page:e});n.save().done(function(){var e=new LayoutView({model:n,layout_id:t});this.listenTo(e,"change:name",function(e){this.setBreadCrum(i(e),!0)}.bind(this)),this.navigationController.showContent(e),this.setHeader(i(n),getHeadersAction())}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Mise en page introuvable"})}.bind(this))},showDraft:function(e,t){var i=this.parseQueryString(t,{apply:null}),n=new Builder({draft_id:e});n.fetch().done(function(){var e=new LayoutView({model:n,apply:i.apply});this.listenTo(e,"change:name",function(e){this.setBreadCrum([{title:n.get("type").name,href:"/appearance/layouts/"+n.get("type").page},{title:e.get("name")}],!0)}.bind(this)),this.navigationController.showContent(e),this.setHeader([{title:n.get("type").name,href:"/appearance/layouts/"+n.get("type").page},{title:n.get("name")}],getHeadersAction())}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Mise en page introuvable"})}.bind(this))}});module.exports=Marionette.AppRouter.extend({controller:new AppearanceController,appRoutes:{appearance:"showIndex","appearance/layouts/:page":"showLayouts","appearance/layouts/:page/:id":"showLayout","appearance/drafts/:id":"showDraft"},onRoute:function(e,t,i){switch(e){default:this.controller.sidebarMenuService="appearance",this.controller.sidebarMenu=SidebarMenuView;break;case"showLayout":case"showDraft":this.controller.sidebarMenuService="layout",this.controller.sidebarMenu=SidebarMenuLayoutView}this.controller.showSidebarMenu()}});
},{"18":18,"24":24,"30":30,"39":39,"40":40,"41":41,"52":52,"53":53,"54":54,"55":55,"57":57,"undefined":undefined}],43:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="container"><article class="post-article post-acticle-empty"><header class="post-header"><h1>Présentation des mises en pages</h1></header><div class="post-content"><div class="post-content">Introduction aux concepts principaux...</div></div><footer class="post-footer"></footer></article></div><div class="container-fluid"></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],44:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="dropzone" data-role="bloc" data-bloc="'+(null==(__t=bloc.bloc_id)?"":_.escape(__t))+'"><a href="#" data-role="removeBloc" class="md-icon md-close pull-right"></a><div class="row"> ',_.each(cells,function(l,e){__p+=' <div class="col-xs-'+(null==(__t=sizes[e])?"":_.escape(__t))+' ui-sortable" data-cell="'+(null==(__t=l.cell_id)?"":_.escape(__t))+'">'+(null==(__t=l.content)?"":__t)+"</div> "}),__p+=" </div></div>";return __p};
},{"undefined":undefined}],45:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article template-config"><div id="builder" class="post-content widgets">'+(null==(__t=structure)?"":__t)+'</div></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" data-role="cancel" class="btn btn-cancel">Annuler</button> <button type="button" data-role="save" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],46:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><div class="row"><form> ',_(widget.settings).each(function(l,e){switch(__p+=" ",l.ctl){case 1:__p+=' <div class="col-xs-'+(null==(__t=l.size&&"small"==l.size?"6":"12")?"":__t)+'"><div class="form-group"><label class="control-label" for="field_'+(null==(__t=e)?"":_.escape(__t))+'">'+(null==(__t=l.label)?"":_.escape(__t))+'</label><input class="form-control" id="field_'+(null==(__t=e)?"":_.escape(__t))+'" name="'+(null==(__t=e)?"":_.escape(__t))+'" value="'+(null==(__t=l.value)?"":_.escape(__t))+'" placeholder="'+(null==(__t=l.desc)?"":_.escape(__t))+'"></div></div> ';break;case 2:__p+=' <div class="col-xs-6"><div class="form-group"><label class="control-label" for="field_'+(null==(__t=e)?"":_.escape(__t))+'">'+(null==(__t=l.label)?"":_.escape(__t))+'</label><select class="form-control" id="field_'+(null==(__t=e)?"":_.escape(__t))+'" name="'+(null==(__t=e)?"":_.escape(__t))+'" data-style="selectify"> ',_(l.values).each(function(e){__p+=' <option value="'+(null==(__t=2==l.type?e.value?"1":"0":e.value)?"":_.escape(__t))+'" '+(null==(__t=e.value==l.value?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.label)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div><div class="col-xs-6 col-xs-offset-6"></div> ';break;case 3:__p+=' <div class="col-xs-12"><label class="control-label">'+(null==(__t=l.label)?"":_.escape(__t))+'</label><div class="form-group"><div class="radio-group"> ',_(l.values).each(function(a,t){__p+=' <input name="'+(null==(__t=e)?"":_.escape(__t))+'" id="field_'+(null==(__t=e)?"":_.escape(__t))+"_"+(null==(__t=t)?"":_.escape(__t))+'" value="'+(null==(__t=2==l.type?a.value?"1":"0":a.value)?"":_.escape(__t))+'" '+(null==(__t=a.value==l.value?'checked="checked"':"")?"":__t)+' type="radio"><label for="field_'+(null==(__t=e)?"":_.escape(__t))+"_"+(null==(__t=t)?"":_.escape(__t))+'" class="visible">'+(null==(__t=a.label)?"":_.escape(__t))+"</label> "}),__p+=" </div></div></div> ";break;case 4:__p+=' <div class="col-xs-12"><label class="control-label">'+(null==(__t=l.label)?"":_.escape(__t))+'</label><div class="form-group"> ',_(l.values).each(function(a,t){__p+=' <div class="checkbox-inline"><input name="'+(null==(__t=e)?"":_.escape(__t))+'" id="field_'+(null==(__t=e)?"":_.escape(__t))+"_"+(null==(__t=t)?"":_.escape(__t))+'" value="'+(null==(__t=a.value)?"":_.escape(__t))+'" '+(null==(__t=_.contains(l.value,a.value)?'checked="checked"':"")?"":__t)+' type="checkbox"><label for="field_'+(null==(__t=e)?"":_.escape(__t))+"_"+(null==(__t=t)?"":_.escape(__t))+'" class="visible">'+(null==(__t=a.label)?"":_.escape(__t))+"</label></div> "}),__p+=" </div></div> ";break;case 5:__p+=' <div class="col-xs-12"><div class="form-group"><label class="control-label" for="field_'+(null==(__t=e)?"":_.escape(__t))+'">'+(null==(__t=l.label)?"":_.escape(__t))+'</label><textarea class="form-control" id="field_'+(null==(__t=e)?"":_.escape(__t))+'" name="'+(null==(__t=e)?"":_.escape(__t))+'" rows="5" placeholder="'+(null==(__t=l.desc)?"":_.escape(__t))+'">'+(null==(__t=l.value)?"":_.escape(__t))+"</textarea></div></div> "}__p+=" "}),__p+=' </form></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],47:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Mise en page</h1></header><div class="post-content post-group templates"><div class="media"><div class="media-left"><a href="/appearance/layouts/'+(null==(__t=page)?"":_.escape(__t))+"/"+(null==(__t=layout_id)?"":_.escape(__t))+'"><div class="si-overlay"><span class="md-icon md-edit btn-si"></span></div> '+(null==(__t=structure)?"":__t)+' </a></div><div class="media-body"><div class="form-group"><p>La mise en page choisie détermine l\'apparence de cette page :</p><div class="row"><div class="col-xs-7"><select data-style="selectify"> ',_(layouts).each(function(e){__p+=' <option value="'+(null==(__t=e.layout_id)?"":_.escape(__t))+'" '+(null==(__t=layout_id==e.layout_id?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div></div><p><a href="/appearance/layouts/'+(null==(__t=page)?"":_.escape(__t))+"/"+(null==(__t=layout_id)?"":_.escape(__t))+'">Modifier cette mise en page</a><br><a href="#" data-role="create">Créer une nouvelle mise en page</a></p></div></div></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],48:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="widget color '+(null==(__t=color)?"":_.escape(__t))+'" data-role="widget" data-widget="'+(null==(__t=widget_id)?"":_.escape(__t))+'" data-type="'+(null==(__t=type)?"":_.escape(__t))+'"><div class="media"><div class="media-left"><div class="corner-color"><div class="corner-color-content"></div></div><div class="md-icon service-icon"></div></div><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><div class="icon-toolbar" role="toolbar" data-widget="'+(null==(__t=widget_id)?"":_.escape(__t))+'"><a href="#" class="md-icon md-note-add"></a> <a href="#" data-role="configureWidget" class="md-icon md-settings"></a> <a href="#" data-role="removeWidget" class="md-icon md-cancel"></a></div><h4 class="widget-title">'+(null==(__t=name)?"":_.escape(__t))+'</h4><p class="note">'+(null==(__t=description)?"":_.escape(__t))+"</p></div></div></div>";return __p};
},{"undefined":undefined}],49:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="btn-group pull-right"><a href="#" class="md-icon md-add-layout" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></a><ul class="dropdown-menu" data-role="addBloc"><li class="dropdown-header">Disposition :</li><li><a href="#" data-col="1" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 1 colonne</a></li> ',col_count>=2&&(__p+=' <li><a href="#" data-col="2" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 2 colonnes</a></li><li><a href="#" data-col="2d" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 2 colonnes à droite</a></li><li><a href="#" data-col="2g" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 2 colonnes à gauche</a></li> '),__p+=" ",col_count>=3&&(__p+=' <li><a href="#" data-col="3" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">Sur 3 colonnes</a></li> '),__p+=" </ul></div><h1>"+(null==(__t=name)?"":_.escape(__t))+'</h1><div data-role="zone" data-zone="'+(null==(__t=zone_id)?"":_.escape(__t))+'">'+(null==(__t=blocs)?"":__t)+"</div>";return __p};
},{"undefined":undefined}],50:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article templates-list"><header class="post-header no-border no-header"><div class="btn-group pull-right" data-role="order"><button type="button" class="btn btn-icon md-icon md-sort dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu" data-role="order"><li class="active" data-id="date"><a href="#">Modification</a></li><li data-id="name"><a href="#">Titre</a></li><li data-id="usage"><a href="#">Utilisation</a></li></ul></div></header><div data-role="list" class="post-content templates"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],51:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="item-templates-list"> ',__p+=is_default?' <div class="corner-color template-default right"><div class="corner-color-content"></div></div> ':' <div class="corner-color template-variant right"><div class="corner-color-content"></div></div> ',__p+=' <div class="media"><div class="media-left"><a href="/appearance/layouts/'+(null==(__t=page)?"":_.escape(__t))+"/"+(null==(__t=layout_id)?"":_.escape(__t))+'"><div class="si-overlay"><span class="md-icon md-edit btn-si"></span></div> '+(null==(__t=structure)?"":__t)+' </a></div><div class="media-body"><h4> '+(null==(__t=name)?"":_.escape(__t))+' </h4><div class="flex-row"><div class="flex-col-1"><span class="data-label">Appliqué à</span></div><div class="flex-col-2"><a href="#"> '+(null==(__t=usage_count)?"":_.escape(__t))+' pages</a></div></div><div class="flex-row"><div class="flex-col-1"><span class="data-label">Template</span></div><div class="flex-col-2">'+(null==(__t=model.name)?"":_.escape(__t))+'</div></div><div class="flex-row"><div class="flex-col-1"><span class="data-label">Répertoire</span></div><div class="flex-col-2"><em>'+(null==(__t=model.id)?"":_.escape(__t))+'</em></div></div><div class="btn-toolbar pull-right" role="toolbar"> ',is_multi_layouts&&(__p+=" ",__p+=is_default?' <a class="btn btn-option" data-role="duplicate" href="#" role="button">Dupliquer</a> ':' <div class="btn-group" role="edit"><a class="btn btn-option" data-role="duplicate" href="#" role="button">Dupliquer</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a data-role="delete" href="#">Supprimer</a></li></ul></div> ',__p+=" "),__p+=" </div></div></div></div>";return __p};
},{"undefined":undefined}],52:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",_(types).each(function(e,a){__p+=" <h2>"+(null==(__t=a)?"":_.escape(__t))+'</h2><ul class="nav nav-sidebar"> ',_(e).each(function(e){__p+=' <li><a href="/appearance/layouts/'+(null==(__t=e.page)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</a></li> "}),__p+=" </ul> "}),__p+="";return __p};
},{"undefined":undefined}],53:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Widgets disponibles</h2><div class="form-group"><select data-role="select-folder" data-style="selectify"> ',_.each(folders,function(e,t){__p+='<option value="'+(null==(__t=t)?"":_.escape(__t))+'" '+(null==(__t=folder_id==t?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.name)?"":_.escape(__t))+"</option>"}),__p+=' </select></div><div class="form-group"><select data-role="select-category" data-style="selectify"> ',categories.length&&(__p+=" ",_.each(categories,function(e,t){__p+='<option value="'+(null==(__t=t)?"":_.escape(__t))+'" '+(null==(__t=category_id==t?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.name)?"":_.escape(__t))+"</option>"}),__p+=" "),__p+=" </select></div><p>Glissez-déposez les widgets dans le modèle de page</p> ",widgets.length&&(__p+=' <div id="widgets_pool"> ',_.each(widgets,function(e){__p+=' <div class="widget" data-type="'+(null==(__t=e.type)?"":_.escape(__t))+'"><a href="#" class="md-icon md-drag btn-drag pull-left"></a><h4 class="widget-title">'+(null==(__t=e.name)?"":_.escape(__t))+"</h4></div> "}),__p+=" </div> "),__p+=' <h2>Template appliqué</h2><div class="form-group"><select data-role="select-model" data-direction="up" data-style="selectify"> ',_.each(models,function(e){__p+='<option value="'+(null==(__t=e.id)?"":_.escape(__t))+'" '+(null==(__t=e.id==current_model?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.name)?"":_.escape(__t))+"</option>"}),__p+=' </select></div><h2>Intitulé</h2><div class="form-group has-feedback"><input class="form-control" data-role="name" placeholder="Intitulé par défaut" value="'+(null==(__t=name)?"":_.escape(__t))+'"> <span class="form-control-feedback md-feedback md-edit"></span></div>';return __p};
},{"undefined":undefined}],54:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(43),className:"container container-large",service:"appearance"});
},{"43":43,"undefined":undefined}],55:[function(require,module,exports){
function buildBloc(e){var t=[];_.each(e.cells,function(e){var i="";_.each(e.widgets,function(e){i+=buildWidget(e)}),t.push({cell_id:e.cell_id,content:i})});var i;switch(e.type){case"1":i=[12];break;case"2":i=[6,6];break;case"2d":i=[7,5];break;case"2g":i=[5,7];break;case"3":i=[4,4,4]}return tplBloc({bloc:e,cells:t,sizes:i})}function buildWidget(e){var t="widget-tools";switch(e.main_category||null){case 1:t="widget-cms";break;case 2:t="widget-blog";break;case 3:t="widget-modules";break;case 19:t="widget-search";break;case 25:t="widget-customers";break;case 31:t="widget-catalog";break;case 22:t="widget-tools"}return tplWidget({widget_id:e.widget_id,name:e.name,type:e.type,description:e.desc,color:t})}function makePosition(e,t){var i=t.children().index(e);if(0==i)return{position:"before",sibling_id:null};if(i==t.children().length-1)return{position:"after",sibling_id:null};var o=t.children().get(i-1);return{position:"after",sibling_id:Backbone.$(o).data("widget")}}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");require(425);var ControllerChannel=Backbone.Radio.channel("controller"),FormBehavior=require(25),SelectifyBehavior=require(24),Forms=require(424),Layout=require(40),tplZone=require(49),tplBloc=require(44),tplWidget=require(48),ModalView=Marionette.View.extend({template:require(46),behaviors:[SelectifyBehavior],initialize:function(e){this.mergeOptions(e,["widget"])},templateContext:function(){return{widget:this.widget}},getValues:function(){var e=Forms.extractFields(_.keys(this.widget.settings),this),t=this.widget.settings;return _.each(e,function(i,o){if(t[o]&&t[o].type){if(2==t[o].ctl&&""==i&&t[o].values&&t[o].values.length>=2&&null==t[o].values[0].value&&""==t[o].values[1].value){var a=Backbone.$('select[name="'+o+'"]',this.el).get(0);a&&0==a.selectedIndex&&delete e[o]}2==t[o].ctl&&Number.isNaN(i)&&(e[o]=Backbone.$('select[name="'+o+'"]',this.el).val())}}.bind(this)),e}});module.exports=Marionette.View.extend({template:require(45),className:"container-fluid",service:"layout",behaviors:[FormBehavior],ui:{addBloc:'ul[data-role="addBloc"] a',removeBloc:'a[data-role="removeBloc"]',removeWidget:'a[data-role="removeWidget"]',configureWidget:'a[data-role="configureWidget"]'},events:{"click @ui.addBloc":"addBloc","click @ui.removeBloc":"removeBloc","click @ui.removeWidget":"removeWidget","click @ui.configureWidget":"openWidgetConfiguration"},willTriggerChangeName:!1,initialize:function(e){this.mergeOptions(e,["apply","layout_id"]),this.widgets=[],Backbone.$.when(this.model.getWidgets(this.model.get("type").page),this.model.getModels()).done(function(e,t){var i=[];_.each(e,function(e){_.each(e.categories,function(e){i=i.concat(e.widgets)})}),this.widgets=i,ControllerChannel.trigger("refresh:widgets",e,t,this.model)}.bind(this));var t=this;this.listenTo(ControllerChannel,"rendered:widgets",function(){Backbone.$("#widgets_pool .widget").draggable({connectToSortable:"#builder div.ui-sortable",handle:".btn-drag",cursorAt:{top:25,left:58},appendTo:"body",zIndex:9999,helper:function(e,i){var o=Backbone.$(e.currentTarget),a=o.data("type"),n=t.widgets.find(function(e){return e.type==a});return Backbone.$(buildWidget({widget_id:0,type:n.type,name:n.name,desc:n.desc||"",main_category:n.main_category}))},revert:"invalid"})}),this.listenTo(ControllerChannel,"change:model",this.onChangeModel),this.listenTo(ControllerChannel,"change:name",this.onChangeName)},templateContext:function(){var e=this.model.get("model"),t=this.model.get("tree"),i=e.structure.replace("<table>",'<table class="template-layout">');return _.each(e.zones,function(e){var o=[];t[e.id]&&_.each(t[e.id],function(e){o.push(buildBloc(e))});var a=tplZone({col_count:parseInt(e.colmax),name:e.intitule,zone_id:e.id,blocs:o.join("")});i=i.replace("{"+e.id+"}",a)}),i=i.replace(/{[_a-zA-Z0-9]+}/,""),{structure:i}},onRender:function(){this.bindBloc(Backbone.$("#builder div.ui-sortable",this.el))},openWidgetConfiguration:function(e){var t=Backbone.$(e.currentTarget.parentNode).data("widget");this.model.getWidget(t).done(function(e){var t=new ModalView({widget:e});this.listenTo(t,"action:modal",this.onWidgetUpdate);var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.showInModal(t,{title:"Paramètres du widget",modalClass:"modal-right",action:{title:"Valider"}})}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},addBloc:function(e){var t=Backbone.$(e.currentTarget);this.model.addBloc(t.data("zone"),t.data("col")).done(function(e){this.onBlocCreate(e,t.data("zone"))}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this))},removeBloc:function(e){var t=Backbone.$(e.currentTarget),i=t.parents('[data-role="zone"]');this.model.removeBloc(t.parent().data("bloc")).done(function(){if(this.onBlocDestroy(t.parent().data("bloc")),i&&0==i.children().length){var e=this.model.describeZone(i.data("zone")),o=e?e.defaut:"1";this.model.addBloc(i.data("zone"),o).done(function(e){this.onBlocCreate(e,i.data("zone"))}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)}.bind(this))}}.bind(this)).fail(function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showErrorModal(xhr)}.bind(this))},onBlocCreate:function(e,t){Backbone.$('div[data-role="zone"][data-zone="'+t+'"]',this.el).append(buildBloc(e)),this.bindBloc(Backbone.$('div[data-role="bloc"][data-bloc="'+e.bloc_id+'"] div.ui-sortable',this.el))},onBlocDestroy:function(e){Backbone.$('div[data-role="bloc"][data-bloc="'+e+'"]',this.el).remove()},removeWidget:function(e){var t=Backbone.$(e.currentTarget),i=t.parent().data("widget");this.model.removeWidget(i).done(function(){var e=Backbone.$('div[data-role="widget"]',this.el).filter(function(){return Backbone.$(this).data("widget")==i});e.remove()}.bind(this)).fail(function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showErrorModal(xhr)}.bind(this))},onWidgetUpdate:function(e){this.model.setWidgetSettings(e.widget.widget_id,e.widget.settings,e.getValues()).done(function(){e.triggerMethod("close:modal",!0)}).fail(function(){})},onChangeModel:function(e){this.model.save({model:e},{patch:!0}).done(function(){this.model.fetch().done(function(){Backbone.$("#content").animate({scrollTop:0},"slow"),this.render()}.bind(this))}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},onChangeName:function(e){e!=this.model.get("name")&&(this.willTriggerChangeName=!0),this.model.set("name",e,{silent:!0})},addWidget:function(e,t,i,o){this.model.addWidget(e.type,t,o).done(function(e){i.data("widget",e.widget_id),Backbone.$("[data-widget]",i).data("widget",e.widget_id)}).fail(function(){console.log("FAIL")})},moveWidget:function(e,t,i){this.model.moveWidget(e,t,i).done(function(){console.log("OK")}).fail(function(){console.log("FAIL")})},bindBloc:function(e){var t,i=this;e.sortable({connectWith:"#builder div.ui-sortable",placeholder:"add-zone",handle:".btn-drag",tolerance:"pointer",start:function(e,i){t=1!=Backbone.$(this).data("sortableFirst")?Backbone.$("#content").scrollTop():0,Backbone.$(this).data("sortableFirst",!0)},sort:function(e,i){t>0&&i.helper.css({top:i.position.top-t+"px"})},update:function(e,t){var o=Backbone.$(this);if(0!=o.has(t.item).length){if(0==t.item.data("widget")){var a=t.item.data("type"),n=i.widgets.find(function(e){return e.type==a}),l=Backbone.$(buildWidget({widget_id:0,name:n.name,type:n.type,desc:n.desc||"",main_category:n.main_category}));return t.item.replaceWith(l),void i.addWidget(n,parseInt(o.data("cell")),l,makePosition(l,o))}i.moveWidget(t.item.data("widget"),o.data("cell"),makePosition(t.item,o))}},change:function(e,i){t=0}})},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");return this.model.save({name:this.model.get("name")},{patch:!0,wait:!0}).then(function(){var t;return t=new Layout(this.layout_id?{layout_id:this.layout_id,page:this.model.get("type").page,draft_id:this.model.get("draft_id"),name:this.model.get("name")}:{page:this.model.get("type").page,draft_id:this.model.get("draft_id"),apply_to:this.apply,name:this.model.get("name")}),t.save().done(function(){this.layout_id||(this.layout_id=t.get("layout_id")),this.willTriggerChangeName&&this.trigger("change:name",this.model),this.willTriggerChangeName=!1}.bind(this)).fail(function(t){e.showErrorModal(t)})}.bind(this),function(t){e.showErrorModal(t)})}});
},{"24":24,"25":25,"40":40,"424":424,"425":425,"44":44,"45":45,"46":46,"48":48,"49":49,"undefined":undefined}],56:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectifyBehavior=require(24),Layouts=require(41),Builder=require(39);module.exports=Marionette.View.extend({template:require(47),tagName:"article",className:"post-article",behaviors:[SelectifyBehavior],ui:{select:"select",create:"a[data-role='create']"},events:{"change @ui.select":"selectLayout","click @ui.create":"willCreate"},initialize:function(e){this.mergeOptions(e,["layout_id","type","apply","applyName"]),this.collection=new Layouts,this.collection.fetch({data:{page:this.type}}).done(function(){this.render()}.bind(this))},templateContext:function(){return{page:this.type,layouts:this.collection.toJSON(),layout_id:this.layout_id,structure:this.getStructure(this.layout_id)}},getStructure:function(e){var t=this.collection.findWhere({layout_id:e});return t&&t.get("model")&&t.get("model").structure?t.get("model").structure.replace("<table>",'<table class="template">'):""},selectLayout:function(){this.layout_id=parseInt(this.getUI("select").val()),this.render(),this.triggerMethod("change:layout",this.layout_id)},willCreate:function(){var e=new Builder({layout_id:parseInt(this.getUI("select").val()),page:this.type,name:this.applyName||""}),t=Backbone.Radio.channel("app").request("ctx:navigationController");e.save().done(function(){var i=this.apply?"?apply="+this.apply:"";t.navigate("/appearance/drafts/"+e.get("draft_id")+i)}.bind(this)).fail(function(e){t.showErrorModal(e)}.bind(this))}});
},{"24":24,"39":39,"41":41,"47":47,"undefined":undefined}],57:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Builder=require(39),RowView=Marionette.View.extend({template:require(51),className:"col-xs-12",ui:{duplicate:'[data-role="duplicate"]',"delete":'[data-role="delete"]'},events:{"click @ui.duplicate":"onDuplicate","click @ui.delete":"onDelete","hidden.bs.dropdown .btn-group":"onHiddenDropDown"},templateContext:function(){return{structure:this.getStructure(this.model)}},onDuplicate:function(){var e=new Builder({layout_id:this.model.get("layout_id"),page:this.model.get("page"),name:"Copie de "+this.model.get("name")}),t=Backbone.Radio.channel("app").request("ctx:navigationController");e.save().done(function(){t.navigate("/appearance/drafts/"+e.get("draft_id"))}.bind(this)).fail(function(e){t.showErrorModal(e)}.bind(this))},onDelete:function(e){var t=Backbone.$(e.currentTarget);return t.parent().hasClass("confirm-warning")?void this.model.destroy():(e.preventDefault(),t.data("title",t.text()),t.parent().addClass("confirm-warning"),t.text("Êtes-vous sûr ?"),!1)},onHiddenDropDown:function(e){Backbone.$(".dropdown-menu a",e.currentTarget).each(function(e,t){t=Backbone.$(t),t.parent().hasClass("confirm-warning")&&(t.text(t.data("title")),t.parent().removeClass("confirm-warning"))})},getStructure:function(e){return e&&e.get("model")&&e.get("model").structure?e.get("model").structure.replace("<table>",'<table class="template">'):""}}),ListView=Marionette.CollectionView.extend({className:"row flex-row",childView:RowView});module.exports=Marionette.View.extend({template:require(50),className:"container container-large",service:"appearance",ui:{order:'[data-role="order"] li'},events:{"click @ui.order":"changeOrder"},regions:{list:{el:"div[data-role='list']"}},initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.showChildView("list",new ListView({collection:this.collection}))},changeOrder:function(e){var t=Backbone.$(e.currentTarget);if(!t.hasClass("active")){switch(this.getUI("order").removeClass("active"),t.addClass("active"),t.data("id")){case"date":this.collection.comparator="layout_id";break;case"name":this.collection.comparator="name";break;case"usage":this.collection.comparator=function(e){return-1*e.get("usage_count")}}this.collection.sort()}}});
},{"39":39,"50":50,"51":51,"undefined":undefined}],58:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/blog",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{posts_count:0}});
},{"undefined":undefined}],59:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422);module.exports=Backbone.Collection.extend({url:"sites/@site/blog/categories",model:require(60),parse:function(e){return this.meta=e.meta,e.data},selectPayload:function(){return _.map(this.toJSON(),function(e){return{value:e.category_id,label:e.name}})},promisedSelect:function(e){var t=this;return this.fetch({data:{extra_fields:"recursive"}}).then(function(){var i=new CollectionUtils.SelectCollection,n=[];return t.each(function(t){n.push({value:t.get("category_id"),label:t.get("name"),selected:e&&t.get("category_id")==e})}),i.add(n),i})},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"60":60,"undefined":undefined}],60:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/blog/categories",idAttribute:"category_id",previewLink:null,parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{category_id:e.data}:(e.meta&&e.meta.link&&e.meta.link.preview&&(this.previewLink=e.meta.link.preview),e.data):e},defaults:{category_id:null,name:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",slug:"",is_visible:!1,layout_id:null}});
},{"undefined":undefined}],61:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Comment=Backbone.Model.extend({urlRoot:"sites/@site/blog/comments",idAttribute:"comment_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{comment_id:e.data}:e.data:e},defaults:{comment_id:null,date:"",comment:"",origin:"",is_visible:!1,author:"",email:"",website:"",post_id:0,post_title:"",customer_id:null,avatar_url:"",avatar_thumb_url:"",ip:"",reverse_host:""}});module.exports=Backbone.Collection.extend({url:function(){return"sites/@site/blog/comments"},model:Comment,parse:function(e){return this.meta=e.meta,e.data},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"undefined":undefined}],62:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/blog/home",previewLink:null,parse:function(e){return"data"in e?null===e.data?{}:(e.meta&&e.meta.link&&e.meta.link.preview&&(this.previewLink=e.meta.link.preview),e.data):e},isNew:function(){return!1},defaults:{name:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null,is_visible:!0,modification_date:""}});
},{"undefined":undefined}],63:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/blog/links",idAttribute:"link_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{link_id:e.data}:e.data:e},defaults:{link_id:null,name:"",description:"",url:"",is_enabled:!1,position:0}});
},{"undefined":undefined}],64:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(422);module.exports=Backbone.Collection.extend({url:"sites/@site/blog/links",model:require(63),parse:function(e){return this.meta=e.meta,e.data},reOrder:function(e){return Backbone.ajax({url:"sites/@site/blog/links",method:"PUT",data:{order:e}})},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?Backbone.$.Deferred().resolve():e.save({is_enabled:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?e.save({is_enabled:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"63":63,"undefined":undefined}],65:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/blog/posts",idAttribute:"post_id",previewLink:null,parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{post_id:e.data}:(e.meta&&e.meta.link&&e.meta.link.preview&&(this.previewLink=e.meta.link.preview),e.data):e},defaults:{post_id:null,title:"",header:"",content:"",is_visible:!1,comments_count:0,has_comments_open:!1,slug:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",url:"",publication_date:"",category_id:null,category_name:"",thumb:null,layout_id:null},getTypes:function(){return Backbone.ajax({url:"sites/@site/blog/posts_types",data:{extra_fields:"structure"}}).then(function(e){return _.map(e.data,function(e){return{type:e.type,name:e.name,position:e.position,fields:e.fields||[]}})})}});
},{"undefined":undefined}],66:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422);module.exports=Backbone.Collection.extend({category_id:null,url:function(){return this.category_id>0?"sites/@site/blog/categories/"+this.category_id+"/posts":"sites/@site/blog/posts"},model:require(65),parse:function(e){return this.meta=e.meta,e.data},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e,"delete")}});
},{"422":422,"65":65,"undefined":undefined}],67:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/blog",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{is_enabled:!1,comments_allowed:!1,comments_captcha:!1,comments_anonymous:!1,comments_autopublish:!1,is_rss_enabled:!1,rss_post_count:0}});
},{"undefined":undefined}],68:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var t=[];if(t=t.concat([{title:"Rédiger un billet",callback:"actionNewPost"},{title:"Ajouter une catégorie",callback:"actionNewCategory"}]),e.preview&&t.push({title:"Aperçu",callback:["actionPreview",e.preview]}),e.addSave){var i={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};t.length<=1?t.push(i):t.splice(1,0,i)}return t}function HeaderTabsPost(e,t){return[{title:"Détail du billet",url:"/blog/posts/"+e},{title:t+" "+(t>1?"commentaires":"commentaire"),url:"/blog/posts/"+e+"/comments"}]}function HeaderTabscategory(e,t){return[{title:"Détail de la catégorie",url:"/blog/categories/"+e},{title:t+" "+(t>1?"billets postés":"billet posté"),url:"/blog/categories/"+e+"/posts"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),moment=require("moment"),Controller=require(30),ControllerChannel=Backbone.Radio.channel("controller"),Blog=require(58),Category=require(60),Categories=require(59),Post=require(65),Posts=require(66),Comments=require(61),Link=require(63),Links=require(64),Settings=require(67),Home=require(62),PostsView=require(89),PostView=require(88),HomeView=require(86),SettingsView=require(90),LinksView=require(87),CommentsView=require(85),CategoryView=require(84),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(83),service:"blog",behaviors:[ActiveLinksBehaviors],ui:{"btn-category-add":'a[data-role="category-add"]'},events:{"click @ui.btn-category-add":function(){this.trigger("add:category")}},initialize:function(e){this.categories=new Categories,this.home=new Home,this.overview=new Blog,this.is_loaded=!1,this.listenTo(ControllerChannel,"refresh:categories",this.onRefreshCategories),this.listenTo(ControllerChannel,"refresh:posts",this.onRefreshPosts),this.fetchAndRender()},fetchAndRender:function(){Backbone.$.when(this.categories.fetch(),this.home.fetch(),this.overview.fetch()).done(function(){this.is_loaded=!0,this.render()}.bind(this)).fail(function(){console.log("FAIL")})},templateContext:function(){return{is_loaded:this.is_loaded,categories:this.categories.toJSON(),home:this.home.toJSON(),overview:this.overview.toJSON()}},onRefreshCategories:function(){Backbone.$.when(this.categories.fetch(),this.home.fetch()).done(function(){this.render()}.bind(this))},onRefreshPosts:function(e){return null==e?void this.overview.fetch().done(function(){this.render()}.bind(this)):(this.overview.get("posts_count")+e<0?this.overview.set("posts_count",0):this.overview.set("posts_count",this.overview.get("posts_count")+e),void this.render())}}),BlogController=Controller.extend({sidebarMenuService:"blog",sidebarMenu:SidebarMenuView,sidebarMenuEvents:{"add:category":"actionNewCategory"},baseBreadcrum:[{title:"Blog",href:"/blog"}],showPosts:function(e){var t,i=new Posts,o="Tous les billets postés",n=null;if(e>0){i.category_id=e;var s=new Category({category_id:e});t=s.fetch().done(function(){o=s.get("name"),n=HeaderTabscategory(e,s.get("posts_count"))})}else t=Backbone.$.Deferred().resolve();t.done(function(){var e=new PostsView({collection:i,categories:new Categories});this.listenTo(i,"bulk:delete",function(e){this.triggerSidebarMenu("refresh:posts",-e.ids.length)}),this.navigationController.showContent(e),e.start(),this.setHeader({title:o},getHeadersAction(),n)}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Catégorie introuvable"})}.bind(this))},showPost:function(e){var t=new Post({post_id:e});t.fetch().done(function(){var i=new Categories;i.fetch();var o=new PostView({model:t,categories:i,typesSource:t.getTypes()});this.listenTo(t,"change",function(e){e.hasChanged("title")&&this.setBreadCrum({title:e.get("title")},!0)}.bind(this)),this.listenTo(t,"destroy",function(){this.triggerSidebarMenu("refresh:posts",-1),this.navigationController.showOverlay(300),this.navigationController.navigate("/blog")}),this.navigationController.showContent(o),this.setHeader({title:t.get("title")},getHeadersAction({preview:t,addSave:!0}),HeaderTabsPost(e,t.get("comments_count")))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Billet introuvable"})}.bind(this))},actionNewPost:function(){var e=this,t=new Categories;return t.fetch({data:{limit:1}}).then(function(){if(t.length<1)return void e.navigationController.showErrorModal("Erreur de chargement des catégories du blog");var i=new Post({title:"Intitulé par défaut",slug:"intitule-par-defaut",is_visible:!1,has_comments_open:!0,publication_date:moment().format("YYYY-MM-DD hh:mm:ss"),category_id:t.at(0).get("category_id")});return i.save().done(function(){e.triggerSidebarMenu("refresh:posts",1),e.navigationController.showOverlay(300),e.navigationController.navigate("/blog/posts/"+i.get("post_id"))}).fail(function(t){e.navigationController.showErrorModal(t)})})},showHome:function(){var e=new Home;e.fetch().done(function(){var t=new HomeView({collection:new Categories,model:e});this.listenTo(e,"change",function(e){this.triggerSidebarMenu("refresh:categories")}.bind(this)),this.navigationController.showContent(t),t.start(),this.setHeader({title:"Accueil du blog"},getHeadersAction({preview:e,addSave:!0}))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Accueil du blog introuvable"})}.bind(this))},showSettings:function(){var e=new Settings;e.fetch().done(function(){var t=new SettingsView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Paramètres du blog"},getHeadersAction({addSave:!0}))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showLinks:function(){var e=new LinksView({collection:new Links});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Blogroll"})},showComments:function(e){var t,i=new Comments,o="Tous les commentaires",n=null,s=null,r={};if(e>0){r.post_id=e;var a=new Post({post_id:e});t=a.fetch().done(function(){o=a.get("title"),n=HeaderTabsPost(e,a.get("comments_count")),s=getHeadersAction({preview:a})})}else t=Backbone.$.Deferred().resolve();t.done(function(){var t=new CommentsView({collection:i,enableAddComment:e>0,childViewOptions:r});this.navigationController.showContent(t),t.start(r),this.setHeader({title:o},s,n)}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Billet introuvable"})}.bind(this))},showCategory:function(e){var t=new Category({category_id:e});t.fetch().done(function(){var i=new CategoryView({model:t});this.listenTo(t,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),(e.hasChanged("name")||e.hasChanged("is_visible"))&&this.triggerSidebarMenu("refresh:categories")}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/blog/home"),this.triggerSidebarMenu("refresh:categories")}),this.navigationController.showContent(i),this.setHeader({title:t.get("name")},getHeadersAction({preview:t,addSave:!0}),HeaderTabscategory(e,t.get("posts_count")))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Catégorie introuvable"})}.bind(this))},actionNewCategory:function(){var e=new Category({name:"Intitulé par défaut",slug:"intitule-par-defaut",is_visible:!1});return e.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/blog/categories/"+e.get("category_id")),this.triggerSidebarMenu("refresh:categories")}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},actionPreview:function(e){window.open(e.previewLink)}});module.exports=Marionette.AppRouter.extend({controller:new BlogController,appRoutes:{blog:"showPosts","blog/home":"showHome","blog/settings":"showSettings","blog/links":"showLinks","blog/posts/:id":"showPost","blog/posts/:id/comments":"showComments","blog/comments":"showComments","blog/categories/:id":"showCategory","blog/categories/:id/posts":"showPosts"},onRoute:function(e,t,i){this.controller.showSidebarMenu()}});
},{"18":18,"30":30,"58":58,"59":59,"60":60,"61":61,"62":62,"63":63,"64":64,"65":65,"66":66,"67":67,"83":83,"84":84,"85":85,"86":86,"87":87,"88":88,"89":89,"90":90,"undefined":undefined}],69:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-6 col-md-7"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="section_'+(null==(__t=category_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=category_id)?"":_.escape(__t))+'" type="checkbox"><label for="section_'+(null==(__t=category_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_visible||(__p+=' <span class="text-danger">Masqué</span> '),__p+=' </div></div></div><div class="col-xs-3"><a href="/blog/categories/'+(null==(__t=category_id)?"":_.escape(__t))+'/posts">'+(null==(__t=plural(posts_count,"%d billet posté","%d billets postés"))?"":__t)+'</a></div><div class="col-xs-3 col-md-2"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/blog/categories/'+(null==(__t=category_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],70:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé de la catégorie</label><input class="form-control" id="name" name="name" placeholder="Intitulé de catégorie tel qu\'il apparaîtra dans le menu" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" ',is_visible&&(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" ',is_visible||(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article><article class="post-article"><header class="post-header"><a href="#seo" class="pull-right collapsed" data-toggle="collapse" aria-expanded="false" aria-controls="seo">Afficher <span class="more">plus</span> <span class="less">moins</span> d\'options</a><h1>Référencement</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="slug">Adresse de la page</label><div class="input-group"><span class="input-group-addon">'+(null==(__t=domain)?"":_.escape(__t))+'/blog/</span> <input class="form-control" id="slug" name="slug" value="'+(null==(__t=slug)?"":_.escape(__t))+'"> <span class="input-group-addon"></span></div></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_title">Titre de la page</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; qui remplacera celle définie par défaut"></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_description">Description de la page</label><textarea class="form-control" id="meta_description" name="meta_description" rows="5" placeholder="Contenu de la balise &lt;meta description&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="collapse" id="seo"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_keywords">Mots clés de la page</label><textarea class="form-control" id="meta_keywords" name="meta_keywords" rows="5" placeholder="Contenu de la balise &lt;meta keywords&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_head">Code avant <code>&lt;/head&gt;</code></label><textarea class="form-control" id="js_head" name="js_head" rows="5" placeholder="Code placé avant la balise &lt;/head&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_body">Code avant <code>&lt;/body&gt;</code></label><textarea class="form-control" id="js_body" name="js_body" rows="5" placeholder="Code placé avant la balise &lt;/body&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],71:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article data-role="list"></article><div class="modal fade" id="newcomment" tabindex="-1" role="dialog" aria-labelledby="newcomment"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close md-icon md-cancel" data-dismiss="modal" aria-label="Close"></button><h4 class="modal-title" id="myModalLabel">Poster un commentaire</h4></div><div class="modal-body"><article class="post-article"><div class="post-content"><div class="form-group"><p>Un commentaire posté depuis la console d\'administration sera s\'affiché différement dans le blog.</p><textarea class="form-control" rows="3"></textarea></div></div><footer class="post-footer"></footer></article></div><div class="modal-footer"><button type="button" class="btn btn-cancel" data-dismiss="modal">Fermer</button> <button type="button" class="btn btn-action">Valider</button></div></div></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],72:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" value="1" type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" class="visible">Visible</label><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" value="0" type="radio" checked="checked"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" class="is_visible0">Masqué</label></div></div><div class="form-group"><label class="control-label required" for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment">Commentaire</label><textarea class="form-control" rows="5" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment" name="comment" placeholder="Obligatoire"></textarea></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show">Ajouter un commentaire</a></div>';return __p};
},{"undefined":undefined}],73:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-9"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="selection_'+(null==(__t=comment_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=comment_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=comment_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div><div class="media-object img-circle img-avatar"><img alt="" src="'+(null==(__t=convertMediaPath(avatar_thumb_url))?"":__t)+'"></div></div><div class="media-body"><h4>'+(null==(__t=author)?"":_.escape(__t))+" ",customer_id>0&&(__p+=" ",__p+="admin"==origin?' <div class="md-icon md-user"></div> ':' <a href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'" class="md-icon md-person"></a> '),__p+=" </h4> ",__p+=is_visible?" Posté le "+(null==(__t=date)?"":_.escape(__t))+' dans <a href="/blog/posts/'+(null==(__t=post_id)?"":_.escape(__t))+'">'+(null==(__t=post_title)?"":_.escape(__t))+"</a> ":' <span class="text-danger">Masqué</span> ',__p+=' </div></div></div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><div class="media" data-role="list"><div class="media-body"><blockquote>'+(null==(__t=comment2br)?"":__t)+'</blockquote></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="form-group"><label class="control-label">Informations générales</label><p class="form-control-static">Posté le '+(null==(__t=date)?"":_.escape(__t))+' dans <a href="/blog/posts/'+(null==(__t=post_id)?"":_.escape(__t))+'">'+(null==(__t=post_title)?"":_.escape(__t))+'</a></p></div><div class="form-group"><label class="control-label">IP | Host</label><p class="form-control-static">'+(null==(__t=ip)?"":_.escape(__t))+" | "+(null==(__t=reverse_host)?"":_.escape(__t))+'</p></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" class="visible">Visible</label><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" class="is_visible0">Masqué</label></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label">Auteur</label><p class="form-control-static">'+(null==(__t=author)?"":_.escape(__t))+'</p></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label">Email</label><p class="form-control-static"> ',__p+=email?" "+(null==(__t=email)?"":_.escape(__t))+" ":' <em class="text-muted">Non renseigné</em> ',__p+=' </p></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label">Site Web</label><p class="form-control-static"> ',__p+=website?" "+(null==(__t=website)?"":_.escape(__t))+" ":' <em class="text-muted">Non renseigné</em> ',__p+=' </p></div></div></div><div class="form-group"><label class="control-label required" for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment">Commentaire</label><textarea class="form-control" rows="5" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment" name="comment" placeholder="Obligatoire">'+(null==(__t=comment)?"":_.escape(__t))+'</textarea></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],74:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé de la page d\'accueil</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé de l\'accueil tel qu\'il apparaîtra dans le menu"></div><div class="form-group"><label class="control-label" for="">Affichage</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" ',is_visible&&(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" ',is_visible||(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article data-role="list"></article><article data-role="layout"></article><article class="post-article"><header class="post-header"><a href="#seo" class="pull-right collapsed" data-toggle="collapse" aria-expanded="false" aria-controls="seo">Afficher <span class="more">plus</span> <span class="less">moins</span> d\'options</a><h1>Référencement</h1></header><div class="post-content"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_title">Titre de la page</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; qui remplacera celle définie par défaut"></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_description">Description de la page</label><textarea class="form-control" id="meta_description" name="meta_description" rows="5" placeholder="Contenu de la balise &lt;meta description&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="collapse" id="seo"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_keywords">Mots clés de la page</label><textarea class="form-control" id="meta_keywords" name="meta_keywords" rows="5" placeholder="Contenu de la balise &lt;meta keywords&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_head">Code avant <code>&lt;/head&gt;</code></label><textarea class="form-control" id="js_head" name="js_head" rows="5" placeholder="Code placé avant la balise &lt;/head&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_body">Code avant <code>&lt;/body&gt;</code></label><textarea class="form-control" id="js_body" name="js_body" rows="5" placeholder="Code placé avant la balise &lt;/body&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],75:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article data-role="list"></article><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],76:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_enabled" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled1" value="1" type="radio"><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled1" class="visible">Visible</label><input name="is_enabled" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled0" value="0" type="radio" checked="checked"><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled0" class="not-visible">Masqué</label></div></div><div class="form-group"><label class="control-label required" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_name">Intitulé</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_name" name="name" value="" placeholder="Intitulé du lien tel qu\'il apparaitra dans le blogroll"></div><div class="form-group"><label class="control-label required" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_url">Adresse</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_url" name="url" value="" placeholder="Adresse du lien sous la forme http://www.adresse-du-lien.com/"></div><div class="form-group"><label class="control-label" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_description">Description</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_description" name="description" value="" placeholder="Description telle qu\'elle apparaitra dans l\'attribut title du lien"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show">Ajouter un blogroll</a></div>';return __p};
},{"undefined":undefined}],77:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-9"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="selection_'+(null==(__t=link_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=link_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=link_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_enabled?" "+(null==(__t=description)?"":_.escape(__t))+" ":' <span class="text-danger">Masqué</span> ',__p+=' </div></div></div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_enabled" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' ><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled1" class="visible">Visible</label><input name="is_enabled" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_is_enabled0" class="not-visible">Masqué</label></div></div><div class="form-group"><label class="control-label required" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_name">Intitulé</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé du lien tel qu\'il apparaitra dans le blogroll"></div><div class="form-group"><label class="control-label required" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_url">Adresse</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_url" name="url" value="'+(null==(__t=url)?"":_.escape(__t))+'" placeholder="Adresse du lien sous la forme http://www.adresse-du-lien.com/"></div><div class="form-group"><label class="control-label" for="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_description">Description</label><input class="form-control" id="f_'+(null==(__t=link_id)?"":_.escape(__t))+'_description" name="description" value="'+(null==(__t=description)?"":_.escape(__t))+'" placeholder="Description telle qu\'elle apparaitra dans l\'attribut title du lien"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],78:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="title">Intitulé du billet</label><input class="form-control" id="title" name="title" value="'+(null==(__t=title)?"":_.escape(__t))+'" placeholder="Intitulé du billet tel qu\'il apparaîtra dans le blog"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label">Catégorie</label><div data-role="categories"></div></div></div><div class="col-xs-4"><div class="form-group has-feedback"><label class="control-label" for="publication_date">Date de publication</label><input data-role="datetimepicker" class="form-control" id="publication_date" name="publication_date" value="'+(null==(__t=publication_date)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa hh:mm:ss"> <span class="form-control-feedback md-feedback md-date"></span></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Détail du billet</h1></header><div class="post-content"><div data-role="image"></div><div class="form-group"><label class="control-label" for="header">Chapô</label><p>Le chapô sert d\'introduction au billet et s\'affiche généralement à la place du contenu dans une liste de billets.</p><textarea class="form-control" id="header" name="header" placeholder="Placeholder du contenu" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=header)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="content">Contenu</label><p>Le contenu s\'affiche généralement après le chapô dans le détail d\'un billet.</p><textarea class="form-control" id="content" name="content" placeholder="Placeholder du contenu" data-role="wysiwyg" rows="21">'+(null==(__t=content)?"":_.escape(__t))+'</textarea></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label">Commentaires</label><div class="radio-group"><input name="has_comments_open" id="commentaires1" value="true" '+(null==(__t=has_comments_open?'checked="checked"':"")?"":__t)+' type="radio"><label for="commentaires1">Ouverts</label><input name="has_comments_open" id="commentaires0" value="false" '+(null==(__t=has_comments_open?"":'checked="checked"')?"":__t)+' type="radio"><label for="commentaires0">Fermés</label></div></div></div></div></div><footer class="post-footer"></footer></article><article data-role="type"></article><article data-role="layout"></article><article class="post-article"><header class="post-header"><a href="#seo" class="pull-right collapsed" data-toggle="collapse" aria-expanded="false" aria-controls="seo">Afficher <span class="more">plus</span> <span class="less">moins</span> d\'options</a><h1>Référencement</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="slug">Adresse de la page</label><div class="input-group"><span class="input-group-addon">'+(null==(__t=domain)?"":_.escape(__t))+'/blog/</span> <input class="form-control" id="slug" name="slug" value="'+(null==(__t=slug)?"":_.escape(__t))+'"> <span class="input-group-addon">.html</span></div></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_title">Titre de la page</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; qui remplacera celle définie par défaut"></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_description">Description de la page</label><textarea class="form-control" id="meta_description" name="meta_description" rows="5" placeholder="Contenu de la balise &lt;meta description&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="collapse" id="seo"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_keywords">Mots clés de la page</label><textarea class="form-control" id="meta_keywords" name="meta_keywords" rows="5" placeholder="Contenu de la balise &lt;meta keywords&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_head">Code avant <code>&lt;/head&gt;</code></label><textarea class="form-control" id="js_head" name="js_head" rows="5" placeholder="Code placé avant la balise &lt;/head&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_body">Code avant <code>&lt;/body&gt;</code></label><textarea class="form-control" id="js_body" name="js_body" rows="5" placeholder="Code placé avant la balise &lt;/body&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],79:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Type de billet</h1></header><div class="post-content"><div class="post-group"><div class="form-group"><p>Le type de billet détermine si des informations complémentaires peuvent être ajoutées au billet :</p><div class="row"><div class="col-xs-6"><select id="type" name="type" data-style="selectify"> ',_(types).each(function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'" '+(null==(__t=e.type==type?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div></div> ",fields&&0!=fields.length||(__p+=' <p class="hidden"><em>Pas d\'information complémentaire...</em></p> '),__p+=" ",_(fields).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group"><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><input class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" value="'+(null==(__t=post.get(e.field))?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="5">'+(null==(__t=post.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"wysiwyg":__p+=' <div class="form-group"><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-role="wysiwyg" rows="21">'+(null==(__t=post.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"select":__p+=' <label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><div class="row"><div class="col-xs-6"><div class="form-group"><select id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=l.value==post.get(e.field)?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div> ";break;case"image":case"file":__p+=' <div data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' </div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],80:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article data-role="list"></article><div class="modal fade" id="filtersblog" tabindex="-1" role="dialog" aria-labelledby="filtersblog"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close md-icon md-cancel" data-dismiss="modal" aria-label="Close"></button><h4 class="modal-title" id="myModalLabel">Ajouter des filtres avancés</h4></div><div class="modal-body"><article class="post-article"><div class="post-content post-list list-item-form"><div class="list-item"><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="sr-only" for="exmemple3">Intitulé de la page</label><select class="form-control" ic="exmemple3"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-4"><div class="form-group"><label class="sr-only" for="exmemple1">Intitulé de la page</label><input class="form-control" id="exmemple1" placeholder="Texte par défaut"></div></div><div class="col-xs-4"><div class="form-group"><label class="sr-only" for="exmemple1">Intitulé de la page</label><input class="form-control" id="exmemple1" placeholder="Texte par défaut"></div></div><div class="col-xs-1"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="sr-only" for="exmemple3">Intitulé de la page</label><select class="form-control" ic="exmemple3"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-4"><div class="form-group"><label class="sr-only" for="exmemple1">Intitulé de la page</label><input class="form-control" id="exmemple1" placeholder="Texte par défaut"></div></div><div class="col-xs-4"><div class="form-group"><label class="sr-only" for="exmemple1">Intitulé de la page</label><input class="form-control" id="exmemple1" placeholder="Texte par défaut"></div></div><div class="col-xs-1"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item"><a href="">Ajouter un filtre</a></div></div><footer class="post-footer"></footer></article></div><div class="modal-footer"><button type="button" class="btn btn-cancel" data-dismiss="modal">Fermer</button> <button type="button" class="btn btn-action">Valider</button></div></div></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],81:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-6 col-md-7"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="blog_post_'+(null==(__t=post_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=post_id)?"":_.escape(__t))+'" type="checkbox"><label for="blog_post_'+(null==(__t=post_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"><div class="media-object md-icon md-image img-default"></div> ',thumb&&(__p+=' <div class="media-object no-ratio"><img alt="" src="'+(null==(__t=convertMediaPath(thumb.url_miniature))?"":__t)+'"></div> '),__p+=' </div><div class="media-body"><h4>'+(null==(__t=title)?"":_.escape(__t))+"</h4> ",__p+=is_visible?" Posté le "+(null==(__t=publication_date)?"":_.escape(__t))+' dans <a href="/blog/categories/'+(null==(__t=category_id)?"":_.escape(__t))+'">'+(null==(__t=category_name)?"":_.escape(__t))+"</a> ":' <span class="text-danger">Masqué</span> ',__p+=' </div></div></div><div class="col-xs-3"><a href="/blog/posts/'+(null==(__t=post_id)?"":_.escape(__t))+'/comments">'+(null==(__t=plural(comments_count,"%d commentaire","%d commentaires"))?"":_.escape(__t))+'</a></div><div class="col-xs-3 col-md-2"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/blog/posts/'+(null==(__t=post_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],82:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Commentaires</h1></header><div class="post-content"><p>Les visiteurs du site peuvent poster des commentaires pour chacun de vos billets. Si un visiteur est identifé, son commentaire sera ajouté à son compte en tant que membre du site.</p><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Commentaires ouverts</label><div class="radio-group"><input name="comments_allowed" id="comments_allowed1" value="1" '+(null==(__t=comments_allowed?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_allowed1">Oui</label><input name="comments_allowed" id="comments_allowed0" value="0" '+(null==(__t=comments_allowed?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_allowed0">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Publication immédiate</label><div class="radio-group"><input name="comments_autopublish" id="comments_autopublish1" value="1" '+(null==(__t=comments_autopublish?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_autopublish1">Oui</label><input name="comments_autopublish" id="comments_autopublish0" value="0" '+(null==(__t=comments_autopublish?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_autopublish0">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Identification requise</label><div class="radio-group"><input name="comments_anonymous" id="comments_anonymous0" value="0" '+(null==(__t=comments_anonymous?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_anonymous0">Oui</label><input name="comments_anonymous" id="comments_anonymous1" value="1" '+(null==(__t=comments_anonymous?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_anonymous1">Non</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Captcha</h1></header><div class="post-content"><p>Le "captcha" est une sorte d\'anti-spam pour se prémunir contre l\'usage abusif des commentaires : un champ de validation requiert de l\'internaute qu\'il réponde à une question aléatoirement posée pour poster un nouveau commentaire.</p><div class="form-group"><label class="control-label" for="">Utilisation du captcha</label><div class="radio-group"><input name="comments_captcha" id="comments_captcha1" value="1" '+(null==(__t=comments_captcha?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_captcha1" class="visible">Activé</label><input name="comments_captcha" id="comments_captcha0" value="0" '+(null==(__t=comments_captcha?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_captcha0" class="not-visible">Désactivé</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Syndication</h1></header><div class="post-content"><p>En activant la syndication, les internautes vont pouvoir s’abonner aux flux RSS et/ou Atom du blog.</p><div class="form-group"><label class="control-label">Utilisation</label><div class="radio-group"><input name="is_rss_enabled" id="is_rss_enabled1" value="1" '+(null==(__t=is_rss_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_rss_enabled1" class="visible">Activé</label><input name="is_rss_enabled" id="is_rss_enabled0" value="0" '+(null==(__t=is_rss_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_rss_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label" for="rss_post_count">Nombre de billets inclus dans le flux</label><div class="row"><div class="col-xs-2"><input id="rss_post_count" name="rss_post_count" class="form-control" value="'+(null==(__t=rss_post_count)?"":_.escape(__t))+'" placeholder="max. 15"></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],83:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Blog</h2><ul class="nav nav-sidebar"><li><a href="/blog"><span class="badge">'+(null==(__t=overview.posts_count)?"":_.escape(__t))+'</span>Tous les billets</a></li><li><a href="/blog/comments">Commentaires</a></li><li><a href="/blog/links">Blogroll</a></li><li><a href="/blog/settings">Paramètres</a></li></ul><h2>Catégories</h2><ul class="nav nav-stacked"> ',is_loaded&&(__p+=" <li "+(null==(__t=home.is_visible?"":'class="pagetype-visibility-off"')?"":__t)+'><a href="/blog/home"><span class="md-icon"></span>'+(null==(__t=home.name)?"":_.escape(__t))+"</a></li> ",_.each(categories,function(a){__p+=" <li "+(null==(__t=a.is_visible?"":'class="pagetype-visibility-off"')?"":__t)+'><a href="/blog/categories/'+(null==(__t=a.category_id)?"":_.escape(__t))+'"><span class="md-icon"></span>'+(null==(__t=a.name)?"":_.escape(__t))+"</a></li> "}),__p+=' <li class="page-add"><a href="#" data-role="category-add"><span class="md-icon"></span>Ajouter une catégorie</a></li> '),__p+=" </ul>";return __p};
},{"undefined":undefined}],84:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),LayoutSelectorView=require(56),CharCountBehavior=require(19),FormBehavior=require(25),Forms=require(424),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(70),className:"container",service:"blog",behaviors:[CharCountBehavior,FormBehavior],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0}},fields:["name","is_visible","slug","meta_title","meta_description","meta_keywords","js_head","js_body"],templateContext:function(){return{domain:Session.site.get("domain")}},initialize:function(e){this.mergeOptions(e,["model"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"blog-category",apply:this.model.get("category_id"),applyName:this.model.get("name")}),this.listenTo(this.model,"change",this.render)},onBeforeRender:function(){this.layoutSelector.isAttached()&&this.detachChildView("layout")},onRender:function(){this.showChildView("layout",this.layoutSelector)},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"19":19,"25":25,"424":424,"56":56,"70":70,"undefined":undefined}],85:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(423),_=require("underscore"),RowActionsBehavior=require(28),Session=Backbone.Radio.channel("app").request("ctx:session"),Forms=require(424),NewRowView=Marionette.View.extend({template:require(72),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]'},initialize:function(e){this.mergeOptions(e)},templateContext:function(){return{comment_id:"new"}},clearFields:function(){Backbone.$("textarea").val("")},onActionCancel:function(){this.getUI("form").hide(),Forms.clearErrors(this.getUI("errors"),this.el),this.clearFields()},onActionSave:function(){Forms.clearErrors(this.getUI("errors"),this.el);var e=Forms.extractFields(["is_visible","comment"],this);e.post_id=this.getOption("post_id");var t=new this.collection.model;return t.save(e).done(function(){this.getUI("form").hide(),this.collection.add(t),this.clearFields()}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionShow:function(){this.getUI("form").show()}}),RowView=Marionette.View.extend({template:require(73),className:"list-item",templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),date:format.formatDate(this.model.get("date")),comment2br:_.escape(""+this.model.get("comment")).replace(/(\r\n|\n\r|\r|\n)+/g,"<br />")}},ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},onActionEdit:function(){this.getUI("list").hide(),this.getUI("form").show()},onActionCancel:function(){this.getUI("form").hide(),this.getUI("list").show()},onActionSave:function(){return Forms.clearErrors(this.getUI("errors"),this.el),this.model.save(Forms.extractFields(["is_visible","comment"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(71),className:"container",service:"blog",enableAddComment:!1,initialize:function(e){this.mergeOptions(e,["collection","enableAddComment"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:this.enableAddComment?NewRowView:null,childViewOptions:this.getOption("childViewOptions"),title:"Liste des commentaires",selection:[{title:"Afficher",callback:this.showComments.bind(this)},{title:"Masquer",callback:this.hideComment.bind(this)},{title:"Supprimer",callback:this.deleteComments.bind(this),confirm:!0}]}))},start:function(e){this.collection.fetch({data:e})},showComments:function(e){return this.collection.bulkShow(e)},hideComment:function(e){return this.collection.bulkHide(e)},deleteComments:function(e){return this.collection.bulkDelete(e)}});
},{"28":28,"423":423,"424":424,"433":433,"71":71,"72":72,"73":73,"undefined":undefined}],86:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),LayoutSelectorView=require(56),CharCountBehavior=require(19),RowActionsBehavior=require(28),FormBehavior=require(25),Forms=require(424),ControllerChannel=Backbone.Radio.channel("controller"),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(69),className:"list-item",templateContext:function(){return{plural:function(e,t,i){return(e>1?i:t).replace("%d",e)}}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy().done(function(){ControllerChannel.trigger("refresh:categories")})},onSortChange:function(e){this.model.save(e,{patch:!0}).done(function(){ControllerChannel.trigger("refresh:categories")})}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(74),className:"container",service:"blog",behaviors:[CharCountBehavior,FormBehavior],regions:{list:{el:"article[data-role='list']",replaceElement:!0},layout:{el:"article[data-role='layout']",replaceElement:!0}},fields:["name","is_visible","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["collection","model"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"blog-category",apply:0,applyName:this.model.get("name")})},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des catégories",selection:[{title:"Afficher",callback:this.showCategories.bind(this)},{title:"Masquer",callback:this.hideCategories.bind(this)},{title:"Supprimer",callback:this.deleteCategories.bind(this),confirm:!0}],scrollThreshold:920})),this.showChildView("layout",this.layoutSelector)},start:function(){this.collection.fetch()},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},showCategories:function(e){return this.collection.bulkShow(e).done(function(){ControllerChannel.trigger("refresh:categories")})},hideCategories:function(e){return this.collection.bulkHide(e).done(function(){ControllerChannel.trigger("refresh:categories")})},deleteCategories:function(e){return this.collection.bulkDelete(e).done(function(){ControllerChannel.trigger("refresh:categories")})}});
},{"19":19,"25":25,"28":28,"424":424,"433":433,"56":56,"69":69,"74":74,"undefined":undefined}],87:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(28),Forms=require(424),NewRowView=Marionette.View.extend({template:require(76),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]'},templateContext:function(){return{link_id:"new"}},onActionCancel:function(){this.getUI("form").hide(),Forms.clearErrors(this.getUI("errors"),this.el)},onActionSave:function(){Forms.clearErrors(this.getUI("errors"),this.el);var e=new this.collection.model;return e.save(Forms.extractFields(["is_enabled","url","name","description"],this)).done(function(){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionShow:function(){this.getUI("form").show()}}),RowView=Marionette.View.extend({template:require(77),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},onActionDelete:function(){return this.model.destroy()},onActionEdit:function(){this.getUI("list").hide(),this.getUI("form").show()},onActionCancel:function(){this.getUI("form").hide(),this.getUI("list").show()},onActionSave:function(){return Forms.clearErrors(this.getUI("errors"),this.el),this.model.save(Forms.extractFields(["is_enabled","url","name","description"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(75),className:"container",service:"blog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Liste des blogrolls",selection:[{title:"Afficher",callback:this.showLinks.bind(this)},{title:"Masquer",callback:this.hideLinks.bind(this)},{title:"Supprimer",callback:this.deleteLinks.bind(this),confirm:!0}]}))},showLinks:function(e){return this.collection.bulkShow(e)},hideLinks:function(e){return this.collection.bulkHide(e)},deleteLinks:function(e){return this.collection.bulkDelete(e)},start:function(){this.collection.fetch()},onChildviewSortChange:function(e){this.collection.reOrder(e.list)}});
},{"28":28,"424":424,"433":433,"75":75,"76":76,"77":77,"undefined":undefined}],88:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),LayoutSelectorView=require(56),SelectView=require(436),FilePickerView=require(295),CharCountBehavior=require(19),FormBehavior=require(25),WysiwygBehavior=require(26),SelectifyBehavior=require(24),Forms=require(424),format=require(423),Datepicker=require(20),Session=Backbone.Radio.channel("app").request("ctx:session"),TypeSelectorView=Marionette.View.extend({template:require(79),className:"post-article",tagName:"article",types:[],fields:[],type:"",post:null,ui:{select:"select[name='type']"},events:{"change @ui.select":function(){this.selectType(this.getUI("select").val())}},behaviors:[WysiwygBehavior,SelectifyBehavior],initialize:function(e){this.mergeOptions(e,["type","typesSource","post"]),this.typesSource.done(function(e){this.types=e,this.selectType(this.type)}.bind(this))},templateContext:function(){return{type:this.type,types:this.types,post:this.post,fields:this.fields}},selectType:function(e){this.type=e;var t=[],i=_.find(this.types,function(e){return e.type==this.type}.bind(this));i&&i.fields&&(t=i.fields),_.each(this.getRegions(),function(e,t){"filepicker-"==t.substring(0,11)&&this.removeRegion(t)}.bind(this)),_.each(t,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.getRegion(t)||this.addRegion(t,'div[data-role="'+t+'"]')}}.bind(this)),this.fields=t,this.render()},onRender:function(){_.each(this.fields,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.showChildView(t,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,value:this.post.get(e.field)}))}}.bind(this))}});module.exports=Marionette.View.extend({template:require(78),className:"container",service:"blog",behaviors:[CharCountBehavior,FormBehavior,WysiwygBehavior,Datepicker],fields:["title","category_id","media_id","publication_date","is_visible","header","content","has_comments_open","type","text1","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15","slug","meta_title","meta_description","meta_keywords","js_head","js_body"],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0},categories:{el:"div[data-role='categories']",replaceElement:!0},type:{el:"article[data-role='type']",replaceElement:!0},image:{el:"div[data-role='image']",replaceElement:!0}},templateContext:function(){return{domain:Session.site.get("domain"),publication_date:format.formatDateTime(this.model.get("publication_date"))}},initialize:function(e){this.mergeOptions(e,["model","categories","typesSource"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"blog-post",apply:this.model.get("post_id"),applyName:this.model.get("title")}),this.listenTo(this.model,"change",this.render)},onBeforeRender:function(){this.layoutSelector.isAttached()&&this.detachChildView("layout")},onRender:function(){this.showChildView("layout",this.layoutSelector),this.showChildView("categories",new SelectView({collection:this.categories,selected:this.model.get("category_id"),name:"category_id"})),this.typesSource.done(function(e){0!=e.length&&this.showChildView("type",new TypeSelectorView({type:this.model.get("type"),post:this.model,typesSource:this.typesSource}))}.bind(this)),this.showChildView("image",new FilePickerView({fieldname:"media_id",fieldLabel:"Image",type:"image",value:this.model.get("thumb")?this.model.get("thumb").id:""}))},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"19":19,"20":20,"24":24,"25":25,"26":26,"295":295,"423":423,"424":424,"436":436,"56":56,"78":78,"79":79,"undefined":undefined}],89:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(423),RowActionsBehavior=require(28),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(81),className:"list-item",templateContext:function(){return{plural:function(e,t,i){return(e>1?i:t).replace("%d",e)},publication_date:format.formatDate(this.model.get("publication_date")),convertMediaPath:Session.convertMediaPath.bind(Session)}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(80),className:"container-fluid",service:"blog",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"-publication",initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des billets",order:[{title:"Publication",is_active:!0,value:"-publication"},{title:"Modification",is_active:!1,value:"-modification"}],selection:[{title:"Afficher",callback:this.showPosts.bind(this)},{title:"Masquer",callback:this.hidePosts.bind(this)},{title:"Supprimer",callback:this.deletePosts.bind(this),confirm:!0}],filters:[{extraClassname:"select-category",title:"Toutes les catégories",collectionPromise:this.getOption("categories").promisedSelect(this.collection.category_id)}]}))},start:function(){this.collection.fetch({reset:!0,data:{sort:this.sortOrder?this.sortOrder:null}})},showPosts:function(e){return this.collection.bulkShow(e)},hidePosts:function(e){return this.collection.bulkHide(e)},deletePosts:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){if(e.value){if(this.collection.category_id==e.value)return;this.collection.category_id=e.value}else{if(null==this.collection.category_id)return;this.collection.category_id=null}this.start()},onChildviewChangeOrder:function(e){this.sortOrder=e,this.start()}});
},{"28":28,"423":423,"433":433,"80":80,"81":81,"undefined":undefined}],90:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(82),className:"container",service:"blog",behaviors:[FormBehavior],fields:["comments_allowed","comments_anonymous","comments_autopublish","comments_captcha","is_rss_enabled","rss_post_count"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"25":25,"424":424,"82":82,"undefined":undefined}],91:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Brand=Backbone.Model.extend({urlRoot:"sites/@site/catalog/brands",idAttribute:"brand_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{brand_id:e.data}:e.data:e},defaults:{brand_id:null,name:""}});module.exports=Backbone.Collection.extend({url:"sites/@site/catalog/brands",model:Brand,parse:function(e){return this.meta=e.meta,e.data},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"undefined":undefined}],92:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/catalog",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{products_count:0}});
},{"undefined":undefined}],93:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422);module.exports=Backbone.Collection.extend({url:"sites/@site/catalog/categories",model:require(94),parse:function(e){return this.meta=e.meta,e.data},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"94":94,"undefined":undefined}],94:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/catalog/categories",idAttribute:"category_id",previewLink:null,parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{category_id:e.data}:(e.meta&&e.meta.link&&e.meta.link.preview&&(this.previewLink=e.meta.link.preview),e.data):e},defaults:{category_id:null,name:"",description:"",media_id:null,is_visible:!1,is_main:!1,slug:"",product_count:null,creation_date:"",creation_date_f:"",creation_date_timestamp:null,modification_date:"",modification_date_f:"",modification_date_timestamp:null,meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null}});
},{"undefined":undefined}],95:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Comment=Backbone.Model.extend({urlRoot:"sites/@site/catalog/comments",idAttribute:"comment_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{comment_id:e.data}:e.data:e},defaults:{comment_id:null,is_visible:!1,date:"",comment:"",origin:"",author:"",ip:"",rate:null,reverse_host:"",product_id:null,product_name:"",customer_id:null,customer_name:"",customer_email:"",customer_nickname:"",avatar_url:"",avatar_thumb_url:""}});module.exports=Backbone.Collection.extend({product_id:null,url:function(){return this.product_id>0?"sites/@site/catalog/products/"+this.product_id+"/comments":"sites/@site/catalog/comments"},model:Comment,parse:function(e){return this.meta=e.meta,e.data},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"undefined":undefined}],96:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/catalog/home",parse:function(e){return"data"in e?null===e.data?{}:(e.meta&&e.meta.link&&e.meta.link.preview&&(this.previewLink=e.meta.link.preview),e.data):e},isNew:function(){return!1},defaults:{name:"",description:"",is_visible:!1,modification_date:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null}});
},{"undefined":undefined}],97:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Image=Backbone.Model.extend({urlRoot:function(){return"sites/@site/catalog/products/"+this.get("product_id")+"/images"},idAttribute:"media_id",parse:function(t){return"data"in t?null===t.data?{}:_.isNumber(t.data)?{media_id:t.data}:t.data:t},defaults:{media_id:null,product_id:null,position:0,name:"",original_name:""}});module.exports=Backbone.Collection.extend({product_id:null,url:function(){return"sites/@site/catalog/products/"+this.product_id+"/images"},model:Image,parse:function(t){return this.meta=t.meta,t.data},reOrder:function(t){var e=1;return _.each(t,function(t){var a=this.get(t);a&&a.set("position",e++)}.bind(this)),Backbone.ajax({url:"sites/@site/catalog/products/"+this.product_id+"/images",method:"PUT",data:{order:t}})}});
},{"undefined":undefined}],98:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Linked=Backbone.Model.extend({urlRoot:function(){return"sites/@site/catalog/products/"+this.get("product_id")+"/linked"},idAttribute:"linked_product_id",parse:function(t){return"data"in t?null===t.data?{}:t.data:t},defaults:{product_id:null,link:"",linked_product_id:null,name:"",categories:[]}});module.exports=Backbone.Collection.extend({product_id:null,url:function(){return"sites/@site/catalog/products/"+this.product_id+"/linked"},model:Linked,parse:function(t){return this.meta=t.meta,_.each(t.data,function(t){t.product_id=this.product_id}.bind(this)),t.data}});
},{"undefined":undefined}],99:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/catalog/products",idAttribute:"product_id",previewLink:null,parse:function(t){return"data"in t?null===t.data?{}:_.isNumber(t.data)?{product_id:t.data}:(t.meta&&t.meta.link&&t.meta.link.preview&&(this.previewLink=t.meta.link.preview),t.data.variants&&_.each(t.data.variants,function(e){e.product_id=t.data.product_id}),t.data):t},defaults:{product_id:null,is_spotlight:!1,available_date:null,is_visible:!1,stock:0,view_count:null,is_virtual:!1,brand_id:null,brand_name:"",price_ex_vat_min:0,price_ex_vat_max:0,price_inc_vat_min:0,price_inc_vat_max:0,price_ex_vat_min_label:"",price_ex_vat_max_label:"",price_inc_vat_min_label:"",price_inc_vat_max_label:"",extra_shipping:0,comments_count:0,rate:0,bought_count:null,variants_count:null,soldout_count:null,is_discount:!1,price_base_ex_vat:0,price_base_inc_vat:0,price_base_ex_vat_label:"",price_base_inc_vat_label:"",creation_date:null,modification_date:null,name:"",description:"",header:"",type:null,main_media_id:null,slug:"",meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null,text1:"",text2:"",text3:"",text4:"",text5:"",text6:"",text7:"",text8:"",text9:"",text10:"",text11:"",text12:"",text13:"",text14:"",text15:"",categories:[],variants:[],images:[]},getTypes:function(){return Backbone.ajax({url:"sites/@site/catalog/products_types",data:{extra_fields:"structure"}}).then(function(t){return _.map(t.data,function(t){return{type:t.type,name:t.name,position:t.position,fields:t.fields||[]}})})},duplicate:function(t){var e=this;return Backbone.ajax({url:"sites/@site/catalog/products/"+this.get("product_id"),method:"POST",data:t}).then(function(t){var a=e.clone();return a.set(a.parse(t)),a})}});
},{"undefined":undefined}],100:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422);module.exports=Backbone.Collection.extend({url:"sites/@site/catalog/products",model:require(99),parse:function(e){return this.meta=e.meta,e.data},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"99":99,"undefined":undefined}],101:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/catalog",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{is_enabled:!1,currency:"EUR",display_taxes:!1,is_duty_free:!1,comments_allowed:!1,comments_captcha:!1,comments_anonymous:!1,comments_autopublish:!1,require_auth:!1}});
},{"undefined":undefined}],102:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Tag=Backbone.Model.extend({urlRoot:"sites/@site/catalog/tags",idAttribute:"tag_id",parse:function(t){return"data"in t?null===t.data?{}:_.isNumber(t.data)?{tag_id:t.data}:t.data:t},defaults:{tag_id:null,name:""}});module.exports=Backbone.Collection.extend({url:"sites/@site/catalog/tags",model:Tag,parse:function(t){return this.meta=t.meta,t.data},bulkDelete:function(t){return CollectionUtils.bulkAction(this,function(t){return t.destroy()},t)}});
},{"422":422,"undefined":undefined}],103:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),_string=require("underscore.string"),Tax=Backbone.Model.extend({urlRoot:"sites/@site/catalog/taxes",idAttribute:"tax_id",parse:function(t){return"data"in t?null===t.data?{}:_.isNumber(t.data)?{tax_id:t.data}:t.data:t},defaults:{tax_id:null,vat_rate:0,is_default:!1}});module.exports=Backbone.Collection.extend({url:"sites/@site/catalog/taxes",model:Tax,parse:function(t){return this.meta=t.meta,t.data},selectPayload:function(){return _.map(this.toJSON(),function(t){return{value:t.tax_id,label:_string.numberFormat(parseFloat(t.vat_rate),2,","," ")+" %"}})}});
},{"undefined":undefined}],104:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Variant=Backbone.Model.extend({urlRoot:function(){return"sites/@site/catalog/products/"+this.get("product_id")+"/variants"},idAttribute:"variant_id",parse:function(t){return"data"in t?null===t.data?{}:_.isNumber(t.data)?{variant_id:t.data}:t.data:t},defaults:{variant_id:null,product_id:0,name:"",reference:"",gtin:"",condition:"",weight:0,tax_id:0,price_ex_vat:0,price_inc_vat:0,price_discount_ex_vat:0,price_discount_inc_vat:0,price_ex_vat_label:"",price_inc_vat_label:"",price_discount_ex_vat_label:"",price_discount_inc_vat_label:"",price_ecotax:0,price_ecotax_label:"",is_stock_unlimited:!1,stock:0,media_id:null,file_id:null},duplicate:function(){var t=this;return Backbone.ajax({url:"sites/@site/catalog/products/"+this.get("product_id")+"/variants",method:"POST",data:{variant_id:this.get("variant_id")}}).then(function(a){var e=t.clone();return e.set(a.data),e})}});module.exports=Backbone.Collection.extend({product_id:null,url:function(){return"sites/@site/catalog/products/"+this.product_id+"/variants"},model:Variant,parse:function(t){return this.meta=t.meta,t.data},reOrder:function(t){return Backbone.ajax({url:"sites/@site/catalog/products/"+this.product_id+"/variants",method:"PUT",data:{order:t}})}});
},{"undefined":undefined}],105:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Name=Backbone.Model.extend({idAttribute:"name",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},defaults:{name:null},rename:function(e){return Backbone.ajax({url:"sites/@site/catalog/variants",method:"PUT",data:{from:this.get("name"),to:e}}).done(function(){this.set("name",e),this.trigger("sync")}.bind(this))}});module.exports=Backbone.Collection.extend({url:function(){return"sites/@site/catalog/variants"},model:Name,parse:function(e){return this.meta=e.meta,e.data}});
},{"undefined":undefined}],106:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var t=[];if(t=t.concat([{title:"Ajouter un produit",callback:"actionNewProduct"},{title:"Ajouter une catégorie",callback:"actionNewCategory"}]),e.duplicateProduct&&t.push({title:"Dupliquer le produit",callback:["actionDuplicateProduct",e.duplicateProduct]}),e.preview&&t.push({title:"Aperçu",callback:["actionPreview",e.preview]}),e.addSave){var i={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};t.length<=1?t.push(i):t.splice(1,0,i)}return t}function HeaderTabscategory(e,t){return[{title:"Détail de la catégorie",url:"/catalog/categories/"+e},{title:t+" "+(t>1?"produits en vente":"produit en vente"),url:"/catalog/categories/"+e+"/products"}]}function HeaderTabsProduct(e,t,i){return[{title:"Détail du produit",url:"/catalog/products/"+e},{title:"Produits associés",url:"/catalog/products/"+e+"/linked"},{title:t+" "+(t>1?"évaluations":"évaluation"),url:"/catalog/products/"+e+"/comments",icon:i?"rating md-rating-"+Math.round(i):""}]}function HeaderTagsTabs(){return[{title:"Variantes",url:"/catalog/variants"},{title:"Tags",url:"/catalog/tags"},{title:"Marques",url:"/catalog/brands"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Controller=require(30),Catalog=require(92),Category=require(94),Home=require(96),Categories=require(93),Brands=require(91),Tags=require(102),Product=require(99),Products=require(100),Variants=require(104),VariantsNames=require(105),Images=require(97),Comments=require(95),Taxes=require(103),Linked=require(98),Settings=require(101),ProductView=require(141),HomeView=require(139),CategoryView=require(137),ProductsView=require(142),CategoriesView=require(136),CommentsView=require(138),LinkedView=require(140),SettingsView=require(143),TaxesView=require(145),TagsView=require(144),BrandsView=require(135),VariantsView=require(146),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(127),service:"catalog",behaviors:[ActiveLinksBehaviors],initialize:function(e){this.overview=new Catalog,this.fetchAndRender()},fetchAndRender:function(){Backbone.$.when(this.overview.fetch()).done(function(){this.render()}.bind(this)).fail(function(){console.log("FAIL")})},templateContext:function(){return{overview:this.overview.toJSON()}}}),CatalogController=Controller.extend({sidebarMenuService:"catalog",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Catalogue",href:"/catalog"}],showProducts:function(e){var t,i;e=parseInt(e),e?(i=new Category({category_id:e}),t=i.fetch()):t=Backbone.$.Deferred().resolve(),t.done(function(){var t=new Products,o=new ProductsView({collection:t,categories:new Categories,tags:new Tags,category_id:e?e:null});this.navigationController.showContent(o),o.start(),this.setHeader({title:e?i.get("name"):"Tous les produits"},getHeadersAction(),e?HeaderTabscategory(e,i.get("product_count")):null)}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Catégorie introuvable"})}.bind(this))},showProduct:function(e){var t=new Taxes,i=new Product({product_id:e});Backbone.$.when(t.fetch(),i.fetch({data:{extra_fields:"texts,variants,price_label,images"}})).done(function(){var o=new Variants;o.product_id=i.get("product_id");var n=new Images;n.product_id=i.get("product_id");var a=new ProductView({model:i,typesSource:i.getTypes(),categories:new Categories,brands:new Brands,tags:new Tags,variants:o,taxes:t,images:n});this.listenTo(i,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0)}.bind(this)),this.listenTo(i,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog")}),this.navigationController.showContent(a),this.setHeader({title:i.get("name")},getHeadersAction({preview:i,addSave:!0,duplicateProduct:e}),HeaderTabsProduct(e,i.get("comments_count"),i.get("rate")))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Produit introuvable"})}.bind(this))},actionNewProduct:function(){var e=new Product({name:"Intitulé par défaut",slug:"intitule-par-defaut",is_visible:!1});return e.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog/products/"+e.get("product_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},actionDuplicateProduct:function(e){var t=new Product({product_id:e}),i=this.navigationController;return t.fetch().then(function(){t.duplicate({name:"Copie de "+t.get("name")}).done(function(e){i.showOverlay(300),i.navigate("/catalog/products/"+e.get("product_id"))}).fail(function(e){i.showErrorModal(e)})},function(e){i.showErrorModal(e)})},showLinked:function(e){var t=new Product({product_id:e});t.fetch().done(function(){var i=new Linked;i.product_id=e;var o=new LinkedView({collection:i,products:new Products});o.start(),this.navigationController.showContent(o),this.setHeader({title:t.get("name")},getHeadersAction({duplicateProduct:e}),HeaderTabsProduct(e,t.get("comments_count"),t.get("rate")))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Produit introuvable"})}.bind(this))},showCategory:function(e){var t=new Category({category_id:e});t.fetch().done(function(){var i=new CategoryView({model:t});this.listenTo(t,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),e.hasChanged("name")||e.hasChanged("is_visible")}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog")}),this.navigationController.showContent(i),this.setHeader({title:t.get("name")},getHeadersAction({preview:t,addSave:!0}),HeaderTabscategory(e,t.get("product_count")))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Catégorie introuvable"})}.bind(this))},actionNewCategory:function(){var e=new Category({name:"Intitulé par défaut",slug:"intitule-par-defaut",is_visible:!1});return e.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/catalog/categories/"+e.get("category_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showHome:function(){var e=new Home;e.fetch().done(function(){var t=new HomeView({model:e});this.listenTo(e,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0)}.bind(this)),this.navigationController.showContent(t),this.setHeader({title:e.get("name")},getHeadersAction({preview:e,addSave:!0}))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Accueil du catalogue introuvable"})}.bind(this))},showCategories:function(){var e=new Categories;e.fetch().done(function(){var t=new CategoriesView({collection:e});t.start(),this.navigationController.showContent(t),this.setHeader({title:"Toutes les catégories"})}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Catégories introuvables"},getHeadersAction())}.bind(this))},showComments:function(e){var t,i=new Comments,o="Toutes les évaluations",n=null,a={addComments:!0};if(e>0){i.product_id=e;var r=new Product({product_id:e});t=r.fetch().done(function(){o=r.get("name"),n=HeaderTabsProduct(e,r.get("comments_count"),r.get("rate"))}),a.duplicateProduct=e}else t=Backbone.$.Deferred().resolve();t.done(function(){var e=new CommentsView({collection:i});this.navigationController.showContent(e),e.start(),this.setHeader({title:o},getHeadersAction(a),n)}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Produit introuvable"})}.bind(this))},showSettings:function(){var e=new Settings;e.fetch().done(function(){var t=new SettingsView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Paramètres du catalogue"},getHeadersAction({addSave:!0}))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showTaxes:function(){var e=new Settings;e.fetch().done(function(){var t=new TaxesView({collection:new Taxes,model:e});this.navigationController.showContent(t),this.setHeader({title:"Gestion des taxes"},getHeadersAction({addSave:!0}))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Gestion des taxes introuvables"},getHeadersAction())}.bind(this))},showTags:function(){var e=new TagsView({collection:new Tags});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Tous les tags"},null,HeaderTagsTabs())},showBrands:function(){var e=new BrandsView({collection:new Brands});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Toutes les marques"},null,HeaderTagsTabs())},showVariants:function(){var e=new VariantsView({collection:new VariantsNames});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Toutes les variantes"},null,HeaderTagsTabs())},actionPreview:function(e){window.open(e.previewLink)}});module.exports=Marionette.AppRouter.extend({controller:new CatalogController,appRoutes:{catalog:"showProducts","catalog/home":"showHome","catalog/products/:id":"showProduct","catalog/products/:id/comments":"showComments","catalog/products/:id/linked":"showLinked","catalog/categories":"showCategories","catalog/categories/:id":"showCategory","catalog/categories/:id/products":"showProducts","catalog/comments":"showComments","catalog/settings":"showSettings","catalog/taxes":"showTaxes","catalog/tags":"showTags","catalog/brands":"showBrands","catalog/variants":"showVariants"},onRoute:function(e,t,i){this.controller.showSidebarMenu()}});
},{"100":100,"101":101,"102":102,"103":103,"104":104,"105":105,"127":127,"135":135,"136":136,"137":137,"138":138,"139":139,"140":140,"141":141,"142":142,"143":143,"144":144,"145":145,"146":146,"18":18,"30":30,"91":91,"92":92,"93":93,"94":94,"95":95,"96":96,"97":97,"98":98,"99":99,"undefined":undefined}],107:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article data-role="list"></article>';return __p};
},{"undefined":undefined}],108:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-6"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="selection_'+(null==(__t=brand_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=brand_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=brand_id)?"":_.escape(__t))+'"></label></div></div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+'</h4></div></div></div><div class="col-xs-3"></div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="control-label required" for="name">Intitulé de la marque</label><p>Changer l\'intitulé de la marque permet de renommer la marque sur tous les produits auxquels elle est associée.</p><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],109:[function(require,module,exports){
arguments[4][107][0].apply(exports,arguments)
},{"107":107,"undefined":undefined}],110:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-6 col-md-7"><div class="media"><div class="media-left"><div style="width: 18px"></div></div><div class="media-left"><div class="media-object md-icon md-product img-default catalog-home"></div></div><div class="media-left"><div style="width: 25px"></div></div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_visible?" La page d'accueil du catalogue peut être modifiée mais ne peut pas être déplacée ou supprimée ":' <span class="text-danger">Masquée</span> ',__p+=' </div></div></div><div class="col-xs-offset-3 col-xs-3 col-md-2"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/catalog/home" role="button">Détail</a></div></div></div>';return __p};
},{"undefined":undefined}],111:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-6 col-md-7"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="section_'+(null==(__t=category_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=category_id)?"":_.escape(__t))+'" type="checkbox"><label for="section_'+(null==(__t=category_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"><div class="media-object md-icon md-image img-default"></div> ',media_id&&(__p+=' <div class="media-object no-ratio"><img alt="" src="'+(null==(__t=convertMediaPath("/media/miniature/"+media_id))?"":__t)+'"></div> '),__p+=' </div><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_visible?" "+(null==(__t=short_desc?short_desc:'<span class="text-muted">La catégorie n\'a pas de description</span>')?"":__t)+" ":' <span class="text-danger">Masqué</span> ',__p+=' </div></div></div><div class="col-xs-3"><a href="/catalog/categories/'+(null==(__t=category_id)?"":_.escape(__t))+'/products">'+(null==(__t=plural(product_count,"%d produit en vente","%d produits en vente"))?"":__t)+'</a></div><div class="col-xs-3 col-md-2"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/catalog/categories/'+(null==(__t=category_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],112:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé de la catégorie</label><input class="form-control" id="name" name="name" placeholder="Intitulé de catégorie tel qu\'il apparaîtra dans le menu" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" ',is_visible&&(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" ',is_visible||(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Détail de la catégorie</h1></header><div class="post-content"><div data-role="image"></div><div class="form-group"><label class="control-label" for="description">Description</label><textarea class="form-control" id="description" name="description" placeholder="Placeholder du contenu" rows="21" data-role="wysiwyg">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article><article class="post-article"><header class="post-header"><a href="#seo" class="pull-right collapsed" data-toggle="collapse" aria-expanded="false" aria-controls="seo">Afficher <span class="more">plus</span> <span class="less">moins</span> d\'options</a><h1>Référencement</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="slug">Adresse de la page</label><div class="input-group"><span class="input-group-addon">'+(null==(__t=domain)?"":_.escape(__t))+'/catalogue/</span> <input class="form-control" id="slug" name="slug" value="'+(null==(__t=slug)?"":_.escape(__t))+'"> <span class="input-group-addon"></span></div></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_title">Titre de la page</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; qui remplacera celle définie par défaut"></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_description">Description de la page</label><textarea class="form-control" id="meta_description" name="meta_description" rows="5" placeholder="Contenu de la balise &lt;meta description&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="collapse" id="seo"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_keywords">Mots clés de la page</label><textarea class="form-control" id="meta_keywords" name="meta_keywords" rows="5" placeholder="Contenu de la balise &lt;meta keywords&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_head">Code avant <code>&lt;/head&gt;</code></label><textarea class="form-control" id="js_head" name="js_head" rows="5" placeholder="Code placé avant la balise &lt;/head&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_body">Code avant <code>&lt;/body&gt;</code></label><textarea class="form-control" id="js_body" name="js_body" rows="5" placeholder="Code placé avant la balise &lt;/body&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],113:[function(require,module,exports){
arguments[4][71][0].apply(exports,arguments)
},{"71":71,"undefined":undefined}],114:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-9"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="selection_'+(null==(__t=comment_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=comment_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=comment_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div><div class="media-object img-circle img-avatar"><img alt="" src="'+(null==(__t=convertMediaPath(avatar_thumb_url))?"":__t)+'"></div></div><div class="media-body"> ',customer_id>0?(__p+=" <h4>"+(null==(__t=customer_name)?"":_.escape(__t)),""!=customer_nickname&&(__p+=" ("+(null==(__t=customer_nickname)?"":_.escape(__t))+")"),__p+=" ",__p+="admin"==origin?' <div class="md-icon md-user"></div> ':' <a href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'" class="md-icon md-person"></a> ',__p+=" </h4> "):__p+=" <h4>"+(null==(__t=author)?"":_.escape(__t))+"</h4> ",__p+=" ",__p+=is_visible?" Posté le "+(null==(__t=date)?"":_.escape(__t))+' pour <a href="/catalog/products/'+(null==(__t=product_id)?"":_.escape(__t))+'">'+(null==(__t=product_name)?"":_.escape(__t))+"</a> ":' <span class="text-danger">Masqué</span> ',__p+=' <div class="rating"><span class="md-icon md-rating-'+(null==(__t=rate)?"":_.escape(__t))+'"></span></div></div></div></div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><div class="media" data-role="list"><div class="media-body"><blockquote>'+(null==(__t=comment2br)?"":__t)+'</blockquote></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="form-group"><label class="control-label">Informations générales</label><p class="form-control-static">Posté le '+(null==(__t=date)?"":_.escape(__t))+' dans <a href="/catalog/products/'+(null==(__t=product_id)?"":_.escape(__t))+'">'+(null==(__t=product_name)?"":_.escape(__t))+'</a></p></div><div class="form-group"><label class="control-label">IP | Host</label><p class="form-control-static">'+(null==(__t=ip)?"":_.escape(__t))+" | "+(null==(__t=reverse_host)?"":_.escape(__t))+'</p></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible1" class="visible">Visible</label><input name="is_visible" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_is_visible0" class="is_visible0">Masqué</label></div></div><div class="form-group"><label class="control-label">Auteur</label><p class="form-control-static">'+(null==(__t=author)?"":_.escape(__t))+'</p></div><div class="form-group"><label class="control-label required" for="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment">Commentaire</label><textarea class="form-control" rows="5" id="f_'+(null==(__t=comment_id)?"":_.escape(__t))+'_comment" name="comment" placeholder="Obligatoire">'+(null==(__t=comment)?"":_.escape(__t))+'</textarea></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],115:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé de la page d\'accueil</label><input class="form-control" id="name" name="name" placeholder="Intitulé de l\'accueil tel qu\'il apparaîtra dans le menu" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" ',is_visible&&(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" ',is_visible||(__p+=' checked="checked" '),__p+=' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article><article class="post-article"><header class="post-header"><a href="#seo" class="pull-right collapsed" data-toggle="collapse" aria-expanded="false" aria-controls="seo">Afficher <span class="more">plus</span> <span class="less">moins</span> d\'options</a><h1>Référencement</h1></header><div class="post-content"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_title">Titre de la page</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; qui remplacera celle définie par défaut"></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_description">Description de la page</label><textarea class="form-control" id="meta_description" name="meta_description" rows="5" placeholder="Contenu de la balise &lt;meta description&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="collapse" id="seo"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_keywords">Mots clés de la page</label><textarea class="form-control" id="meta_keywords" name="meta_keywords" rows="5" placeholder="Contenu de la balise &lt;meta keywords&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_head">Code avant <code>&lt;/head&gt;</code></label><textarea class="form-control" id="js_head" name="js_head" rows="5" placeholder="Code placé avant la balise &lt;/head&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_body">Code avant <code>&lt;/body&gt;</code></label><textarea class="form-control" id="js_body" name="js_body" rows="5" placeholder="Code placé avant la balise &lt;/body&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],116:[function(require,module,exports){
arguments[4][107][0].apply(exports,arguments)
},{"107":107,"undefined":undefined}],117:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="linked_product_id">Produit à associer</label><div data-role="product"></div></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="link">Affichage</label><select name="link" id="link" data-style="selectify"><option value="atob">Sur la fiche du produit principal (A &rarr; B)</option><option value="btoa">Sur la fiche du produit associé (B &rarr; A)</option><option value="both">Affichage réciproque (A &#8644; B)</option></select></div></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show">Ajouter produit associé</a></div>';return __p};
},{"undefined":undefined}],118:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-7"><div class="media"><div class="media-left"><div class="media-object md-icon md-image img-default"></div> ',main_media_id&&(__p+='<div class="media-object no-ratio"><img alt="" src="'+(null==(__t=convertMediaPath("/media/miniature/"+main_media_id))?"":__t)+'"></div>'),__p+=" "+(null==(__t=is_spotlight?'<div class="corner-color is-spotlight"><div class="corner-color-content"></div></div>':"")?"":__t)+' </div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_visible?(__p+=" ",main_category&&(__p+=' Rangé dans <a href="/catalog/categories/'+(null==(__t=main_category.category_id)?"":_.escape(__t))+'">'+(null==(__t=main_category.name)?"":_.escape(__t))+"</a> "),__p+=" ",sec_categories.length>0&&(__p+=' et <a href="#" data-toggle="popover" data-placement="right" data-trigger="focus" data-container="#content" data-html="true" data-content="',_.each(sec_categories,function(e){__p+="<a href=&quot;/catalog/categories/"+(null==(__t=e.category_id)?"":_.escape(__t))+"&quot;>"+(null==(__t=e.name)?"":_.escape(__t))+"</a><br/>"}),__p+='"> '+(null==(__t=plural(sec_categories.length,"%d autre catégorie","%d autres catégories"))?"":__t)+"</a> "),__p+=" "):__p+=' <span class="text-danger">Masqué</span> ',__p+=' </div></div></div><div class="col-xs-2"><select name="link" data-style="selectify"><option value="atob" '+(null==(__t="atob"==link?'selected="selected"':"")?"":__t)+'>A &rarr; B</option><option value="btoa" '+(null==(__t="btoa"==link?'selected="selected"':"")?"":__t)+'>B &rarr; A</option><option value="both" '+(null==(__t="both"==link?'selected="selected"':"")?"":__t)+'>A &#8644; B</option></select></div><div class="col-xs-3"><a href="#" data-role="action" data-action="delete" class="md-icon md-delete pull-right"></a></div></div>';return __p};
},{"undefined":undefined}],119:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><form data-role="part"><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé du produit</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé du produit tel qu\'il apparaîtra dans le catalogue"></div><div class="row"><div class="col-xs-4"><div class="form-group has-feedback"><label class="control-label" for="available_date">Date de disponibilité</label><input data-role="datepicker" class="form-control" id="available_date" name="available_date" value="'+(null==(__t=available_date)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa"> <span class="form-control-feedback md-feedback md-date"></span></div></div><div class="col-xs-4 col-xs-offset-4"><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Organisation</h1></header><div class="post-content"><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="primary-categ">Catégorie principale</label><div data-role="primary-categ"></div></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="is_spotlight">Produit vedette</label><select class="form-control" name="is_spotlight" id="is_spotlight" data-style="selectify"><option value="0" '+(null==(__t=is_spotlight?'selected="selected"':"")?"":__t)+'>Aucune mise en avant du produit</option><option value="1" '+(null==(__t=is_spotlight?'selected="selected"':"")?"":__t)+'>Produit mis en avant en tête de listing</option></select></div></div><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="exmemple1">Catégories secondaires</label><div data-role="other-categ"></div></div></div><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="tags">Tags</label><div data-role="tags"></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Détail du produit</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="header">Chapô</label><p>Le chapô sert de description courte au produit et s\'affiche généralement à la place du contenu dans une liste de produit.</p><textarea id="header" name="header" class="form-control" rows="14" placeholder="Placeholder du contenu" data-role="wysiwyg" data-wysiwyg-toolbar="micro">'+(null==(__t=header)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="description">Description</label><p>La description s\'affiche généralement dans le détail d\'un produit.</p><textarea id="description" name="description" class="form-control" rows="21" placeholder="Placeholder du contenu" data-role="wysiwyg">'+(null==(__t=description)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article data-role="type"></article></form><article data-role="variants"></article><article data-role="images"></article><form data-role="part"><article class="post-article"><header class="post-header"><h1>Autres informations</h1></header><div class="post-content"><div class="row"><div class="col-xs-6"><label class="control-label" for="extra_shipping">Frais de port additionels</label><p>Les frais de port additionels sont ajoutés au montant total HT des frais de port. La TVA appliquée est celle du tansporteur choisit au moment de la commande.</p><div class="row"><div class="col-xs-6"><div class="form-group"><div class="input-group"><span class="input-group-addon"></span> <input id="extra_shipping" name="extra_shipping" value="'+(null==(__t=extra_shipping)?"":_.escape(__t))+'" class="form-control" placeholder="0,00"> <span class="input-group-addon">€</span></div></div></div></div></div><div class="col-xs-6"><label class="control-label" for="brand_id">Marque</label><p>Préciser la marque du produit peut être nécessaire pour l\'utilisation de certains services comme Google Merchant Center.</p><div class="form-group"><div data-role="brand"></div></div></div></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article><article class="post-article"><header class="post-header"><a href="#seo" class="pull-right collapsed" data-toggle="collapse" aria-expanded="false" aria-controls="seo">Afficher <span class="more">plus</span> <span class="less">moins</span> d\'options</a><h1>Référencement</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="slug">Adresse de la page</label><div class="input-group"><span class="input-group-addon">'+(null==(__t=domain)?"":_.escape(__t))+'/catalogue/</span> <input class="form-control" id="slug" name="slug" value="'+(null==(__t=slug)?"":_.escape(__t))+'"> <span class="input-group-addon"></span></div></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_title">Titre de la page</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; qui remplacera celle définie par défaut"></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_description">Description de la page</label><textarea class="form-control" id="meta_description" name="meta_description" rows="5" placeholder="Contenu de la balise &lt;meta description&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="collapse" id="seo"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_keywords">Mots clés de la page</label><textarea class="form-control" id="meta_keywords" name="meta_keywords" rows="5" placeholder="Contenu de la balise &lt;meta keywords&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_head">Code avant <code>&lt;/head&gt;</code></label><textarea class="form-control" id="js_head" name="js_head" rows="5" placeholder="Code placé avant la balise &lt;/head&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_body">Code avant <code>&lt;/body&gt;</code></label><textarea class="form-control" id="js_body" name="js_body" rows="5" placeholder="Code placé avant la balise &lt;/body&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],120:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header"><h1>Illustrations</h1></header><div class="post-content post-picture"><div data-role="list"></div><p><a href="#" data-role="add-image"></a></p></div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],121:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Type de produit</h1></header><div class="post-content"><div class="post-group"><div class="form-group"><p>Le type de produit détermine l\'apparence de la fiche produit et si des informations complémentaires peuvent y être ajoutées :</p><div class="row"><div class="col-xs-6"><select id="type" name="type" data-style="selectify"> ',_(types).each(function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'" '+(null==(__t=e.type==type?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div></div> ",fields&&0!=fields.length||(__p+=' <p class="hidden"><em>Pas d\'information complémentaire...</em></p> '),__p+=" ",_(fields).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group"><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><input class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" value="'+(null==(__t=product.get(e.field))?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="5">'+(null==(__t=product.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"wysiwyg":__p+=' <div class="form-group"><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-role="wysiwyg" rows="21">'+(null==(__t=product.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"select":__p+=' <label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><div class="row"><div class="col-xs-6"><div class="form-group"><select id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=l.value==product.get(e.field)?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div> ";break;case"image":case"file":__p+=' <div data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' </div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],122:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-xs-4"><div class="form-group has-feedback"><label class="control-label" for="name">Intitulé de la variante</label><div data-role="name"></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="reference">Référence</label><input class="form-control" id="reference" name="reference" placeholder=""></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="gtin">Code-barre (EAN/ISBN)</label><input class="form-control" id="gtin" name="gtin" placeholder="8, 10, 12, 13 ou 14 chiffres"></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_ex_vat">Prix HT</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_ex_vat" name="price_ex_vat" data-role="vat" data-linked="price_inc_vat" placeholder="0,00"> <span class="input-group-addon">€</span></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_inc_vat">Prix TTC</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_inc_vat" name="price_inc_vat" data-role="vat" data-linked="price_ex_vat" placeholder="0,00"> <span class="input-group-addon">€</span></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="tax_id">Taxe</label><div data-role="taxes"></div></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_discount_ex_vat">Promotion HT</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_discount_ex_vat" name="price_discount_ex_vat" data-role="vat" data-linked="price_discount_inc_vat" placeholder="Pas de promotion"> <span class="input-group-addon">€</span></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_discount_inc_vat">Promotion TTC</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_discount_inc_vat" name="price_discount_inc_vat" data-role="vat" data-linked="price_discount_ex_vat" placeholder="Pas de promotion"> <span class="input-group-addon">€</span></div></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="weight">Poids</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="weight" name="weight" placeholder="0"> <span class="input-group-addon">g</span></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="condition">Etat</label><select class="form-control" id="condition" name="condition" data-style="selectify"><option value="new">Neuf</option><option value="used">Occasion</option><option value="refurbished">Reconditionné</option></select></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_ecotax">Eco-participation incluse</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_ecotax" name="price_ecotax" placeholder="Pas d\'éco-participation"> <span class="input-group-addon">€</span></div></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="is_stock_unlimited">Stock</label><select class="form-control" id="is_stock_unlimited" name="is_stock_unlimited" data-style="selectify"><option value="0">Quantité limitée</option><option value="1">Stock illimité</option></select></div></div><div class="col-xs-4" data-role="stock"><div class="form-group"><label class="control-label" for="stock">Stock actuel</label><input class="form-control" id="stock" name="stock"></div></div></div><div class="form-group"><label class="control-label">Illustration</label><br><div data-role="images"></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show">Ajouter une variante</a></div>';return __p};
},{"undefined":undefined}],123:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="" src="'+(null==(__t=media_id?convertMediaPath("/media/miniature/"+media_id+".jpg"):"")?"":_.escape(__t))+'"></div></div><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",reference&&(__p+="Réf.&nbsp;:&nbsp;"+(null==(__t=reference)?"":_.escape(__t))),__p+=' </div></div></div><div class="col-xs-2"><span class="price"> '+(null==(__t=current_price_ex_vat_label)?"":_.escape(__t))+"HT<br> "+(null==(__t=current_price_inc_vat_label)?"":_.escape(__t))+'TTC</span></div><div class="col-xs-2"> ',__p+=is_stock_unlimited?' <span class="label label-stockin">Illimité</span> ':' <span class="label '+(null==(__t=0==stock?"label-stockout":"label-stockin")?"":__t)+'">'+(null==(__t=0==stock?"Rupture":stock+" en stock ")?"":__t)+"</span> ",__p+=' </div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="#" role="button" data-role="action" data-action="editRow">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="duplicateRow">Dupliquer</a></li><li><a href="#" data-role="action" data-action="deleteRow" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-xs-4"><div class="form-group has-feedback"><label class="control-label" for="name">Intitulé de la variante</label><div data-role="name"></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="reference">Référence</label><input class="form-control" id="reference" name="reference" value="'+(null==(__t=reference)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="gtin">Code-barre (EAN/ISBN)</label><input class="form-control" id="gtin" name="gtin" value="'+(null==(__t=gtin)?"":_.escape(__t))+'" placeholder="8, 10, 12, 13 ou 14 chiffres"></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_ex_vat">Prix HT</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_ex_vat" name="price_ex_vat" data-role="vat" data-linked="price_inc_vat" value="'+(null==(__t=price_ex_vat)?"":_.escape(__t))+'" placeholder="0,00"> <span class="input-group-addon">€</span></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_inc_vat">Prix TTC</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_inc_vat" name="price_inc_vat" data-role="vat" data-linked="price_ex_vat" value="'+(null==(__t=price_inc_vat)?"":_.escape(__t))+'" placeholder="0,00"> <span class="input-group-addon">€</span></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="tax_id">Taxe</label><div data-role="taxes"></div></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_discount_ex_vat">Promotion HT</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_discount_ex_vat" name="price_discount_ex_vat" data-role="vat" data-linked="price_discount_inc_vat" value="'+(null==(__t=price_discount_ex_vat)?"":_.escape(__t))+'" placeholder="Pas de promotion"> <span class="input-group-addon">€</span></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_discount_inc_vat">Promotion TTC</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_discount_inc_vat" name="price_discount_inc_vat" data-role="vat" data-linked="price_discount_ex_vat" value="'+(null==(__t=price_discount_inc_vat)?"":_.escape(__t))+'" placeholder="Pas de promotion"> <span class="input-group-addon">€</span></div></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="weight">Poids</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="weight" name="weight" value="'+(null==(__t=weight)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">g</span></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="condition">Etat</label><select class="form-control" id="condition" name="condition" data-style="selectify"><option value="new" '+(null==(__t="new"==condition?'selected="selected"':"")?"":__t)+'>Neuf</option><option value="used" '+(null==(__t="used"==condition?'selected="selected"':"")?"":__t)+'>Occasion</option><option value="refurbished" '+(null==(__t="refurbished"==condition?'selected="selected"':"")?"":__t)+'>Reconditionné</option></select></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="price_ecotax">Eco-participation incluse</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="price_ecotax" name="price_ecotax" value="'+(null==(__t=price_ecotax)?"":_.escape(__t))+'" placeholder="Pas d\'éco-participation"> <span class="input-group-addon">€</span></div></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="is_stock_unlimited">Stock</label><select class="form-control" id="is_stock_unlimited" name="is_stock_unlimited" data-style="selectify"><option value="0" '+(null==(__t=is_stock_unlimited?"":'selected="selected"')?"":__t)+'>Quantité limitée</option><option value="1" '+(null==(__t=is_stock_unlimited?'selected="selected"':"")?"":__t)+'>Stock illimité</option></select></div></div><div class="col-xs-4" data-role="stock" '+(null==(__t=is_stock_unlimited?'style="display:none"':"")?"":__t)+'><div class="form-group"><label class="control-label" for="stock">Ajouter au stock</label><input class="form-control" id="stock" name="stock" placeholder="+ pour ajouter ou - pour retirer"></div></div><div class="col-xs-4" data-role="stock" '+(null==(__t=is_stock_unlimited?'style="display:none"':"")?"":__t)+'><div class="form-group"><label class="control-label">Stock actuel</label><p class="form-control-static">'+(null==(__t=stock)?"":_.escape(__t))+'</p></div></div></div><div class="form-group"><label class="control-label">Illustration</label><br><div data-role="images"></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancelRow">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="saveRow">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],124:[function(require,module,exports){
arguments[4][75][0].apply(exports,arguments)
},{"75":75,"undefined":undefined}],125:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-6 col-md-7"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="catalog_product_'+(null==(__t=product_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=product_id)?"":_.escape(__t))+'" type="checkbox"><label for="catalog_product_'+(null==(__t=product_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"><div class="media-object md-icon md-image img-default"></div> ',main_media_id&&(__p+='<div class="media-object no-ratio"><img alt="" src="'+(null==(__t=convertMediaPath("/media/miniature/"+main_media_id))?"":__t)+'"></div>'),__p+=" "+(null==(__t=is_spotlight?'<div class="corner-color is-spotlight"><div class="corner-color-content"></div></div>':"")?"":__t)+' </div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_visible?(__p+=" ",main_category&&(__p+=' Rangé dans <a href="/catalog/categories/'+(null==(__t=main_category.category_id)?"":_.escape(__t))+'">'+(null==(__t=main_category.name)?"":_.escape(__t))+"</a> "),__p+=" ",sec_categories.length>0&&(__p+=' et <a href="#" data-toggle="popover" data-placement="right" data-trigger="focus" data-container="#content" data-html="true" data-content="',_.each(sec_categories,function(a){__p+="<a href=&quot;/catalog/categories/"+(null==(__t=a.category_id)?"":_.escape(__t))+"&quot;>"+(null==(__t=a.name)?"":_.escape(__t))+"</a><br/>"}),__p+='"> '+(null==(__t=plural(sec_categories.length,"%d autre catégorie","%d autres catégories"))?"":__t)+"</a> "),__p+=" "):__p+=' <span class="text-danger">Masqué</span> ',__p+=' </div></div></div><div class="col-xs-2"> ',__p+=is_virtual?' <span class="label label-stockin">Téléchargeable</span> ':" "+(null==(__t="yes"==stock?'<span class="label label-stockin">En stock</span>':"")?"":__t)+" "+(null==(__t="no"==stock?'<span class="label label-stockout">Rupture</span>':"")?"":__t)+" "+(null==(__t="partial"==stock?'<span class="label label-tempstockout">Rupture</span>':"")?"":__t)+" ",__p+=' </div><div class="col-xs-1"><span class="price">'+(null==(__t=price_inc_vat_min_label)?"":_.escape(__t))+"TTC<br>",price_inc_vat_min<price_inc_vat_max&&(__p+=""+(null==(__t=price_inc_vat_max_label)?"":_.escape(__t))+"TTC"),__p+='</span></div><div class="col-xs-3 col-md-2"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/catalog/products/'+(null==(__t=product_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],126:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Devise</h1></header><div class="post-content"><p>Vous pouvez choisir la devise affichée dans le catalogue. Si vous choisissez une devise différente de l\'Euro (EUR), assurez-vous au près de votre établissement bancaire que votre terminal de paiement virtuel accepte les paiements dans cette devise. Attention cependant, Kiubi n\'assure pas de conversion automatique en cas de changement de devise.</p><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="currency">Préfixe des commandes</label><select class="form-control" id="currency" name="currency" data-style="selectify"><option value="EUR" '+(null==(__t="EUR"==currency?'selected="selected"':"")?"":__t)+'>Euro (EUR)</option><option value="CHF" '+(null==(__t="CHF"==currency?'selected="selected"':"")?"":__t)+'>Franc suisse (CHF)</option><option value="CAD" '+(null==(__t="CAD"==currency?'selected="selected"':"")?"":__t)+'>Dollar canadien (CAD)</option><option value="USD" '+(null==(__t="USD"==currency?'selected="selected"':"")?"":__t)+'>Dollar américain (USD)</option><option value="AUD" '+(null==(__t="AUD"==currency?'selected="selected"':"")?"":__t)+'>Dollar australien (AUD)</option><option value="GBP" '+(null==(__t="GBP"==currency?'selected="selected"':"")?"":__t)+'>Livre sterling (GBP)</option></select></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Vente privée</h1></header><div class="post-content"><p>La vente privée vous permet de restreindre l\'accès du catalogue aux visiteurs inscrits et connectés au site web. Pour en savoir plus sur la vente privée, <a href="https://aide.kiubi.com/documentation/catalogue/vente-privee.html" target="_blank">consultez l\'aide en ligne</a>.</p><div class="form-group"><label class="control-label" for="">Utilisation de la vente privée</label><div class="radio-group"><input name="require_auth" id="require_auth1" value="1" '+(null==(__t=require_auth?'checked="checked"':"")?"":__t)+' type="radio"><label for="require_auth1" class="visible">Activée</label><input name="require_auth" id="require_auth0" value="0" '+(null==(__t=require_auth?"":'checked="checked"')?"":__t)+' type="radio"><label for="require_auth0" class="not-visible">Désactivée</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Évaluations</h1></header><div class="post-content"><p>Les visiteurs du site peuvent poster une évaluation pour chacun des produits, en leur donnant une note de 1 à 10, assortie qu\'un commentaire. Si un visiteur est identifé, son évaluation sera ajoutée à son compte en tant que membre du site.</p><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Évaluations ouvertes</label><div class="radio-group"><input name="comments_allowed" id="comments_allowed1" value="1" '+(null==(__t=comments_allowed?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_allowed1">Oui</label><input name="comments_allowed" id="comments_allowed0" value="0" '+(null==(__t=comments_allowed?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_allowed0">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Publication immédiate</label><div class="radio-group"><input name="comments_autopublish" id="comments_autopublish1" value="1" '+(null==(__t=comments_autopublish?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_autopublish1">Oui</label><input name="comments_autopublish" id="comments_autopublish0" value="0" '+(null==(__t=comments_autopublish?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_autopublish0">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Identification requise</label><div class="radio-group"><input name="comments_anonymous" id="comments_anonymous0" value="0" '+(null==(__t=comments_anonymous?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_anonymous0">Oui</label><input name="comments_anonymous" id="comments_anonymous1" value="1" '+(null==(__t=comments_anonymous?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_anonymous1">Non</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Captcha</h1></header><div class="post-content"><p>Le "captcha" est une sorte d\'anti-spam pour se prémunir contre l\'usage abusif des commentaires : un champ de validation requiert de l\'internaute qu\'il réponde à une question aléatoirement posée pour poster un nouveau commentaire.</p><div class="form-group"><label class="control-label" for="">Utilisation du captcha</label><div class="radio-group"><input name="comments_captcha" id="comments_captcha1" value="1" '+(null==(__t=comments_captcha?'checked="checked"':"")?"":__t)+' type="radio"><label for="comments_captcha1" class="visible">Activé</label><input name="comments_captcha" id="comments_captcha0" value="0" '+(null==(__t=comments_captcha?"":'checked="checked"')?"":__t)+' type="radio"><label for="comments_captcha0" class="not-visible">Désactivé</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],127:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Catalogue</h2><ul class="nav nav-sidebar"><li><a href="/catalog"><span class="badge">'+(null==(__t=overview.products_count)?"":_.escape(__t))+'</span>Tous les produits</a></li><li><a href="/catalog/categories">Catégories</a></li><li><a href="/catalog/comments">Évaluations</a></li><li><a href="/catalog/variants">Étiquettes</a></li><li><a href="/catalog/taxes">Taxes</a></li><li><a href="/catalog/settings">Paramètres</a></li></ul>';return __p};
},{"undefined":undefined}],128:[function(require,module,exports){
arguments[4][107][0].apply(exports,arguments)
},{"107":107,"undefined":undefined}],129:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-6"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="selection_'+(null==(__t=tag_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=tag_id)?"":_.escape(__t))+'" type="checkbox"><label for="selection_'+(null==(__t=tag_id)?"":_.escape(__t))+'"></label></div></div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+'</h4></div></div></div><div class="col-xs-3"></div><div class="col-xs-3"><a class="btn btn-option pull-right" href="#" role="button" data-role="action" data-confirm="warning" data-action="delete">Supprimer</a></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="control-label required" for="name">Intitulé du tag</label><p>Changer l\'intitulé du tag permet de renommer le tag sur tous les produits auxquels il est associé.</p><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],130:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/catalogue/gerer-les-taxes.html" class="md-icon md-help pull-right" target="_blank"></a> Modifier les paramètres des taxes peut avoir des impacts importants sur le catalogue produits et la gestion des commandes. Pour en savoir plus sur la gestion des taxes, <a href="https://aide.kiubi.com/documentation/catalogue/gerer-les-taxes.html" target="_blank">consultez l\'aide en ligne</a>.</div><form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres généraux</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="">Affichage des prix</label><p>Vous pouvez choisir d\'afficher les prix du catalogue en HT ou en TTC. Les commandes seront toujours payées en TTC.</p><div class="radio-group"><input name="display_taxes" id="display_taxes0" value="0" '+(null==(__t=display_taxes?"":'checked="checked"')?"":__t)+' type="radio"><label for="display_taxes0">Prix HT</label><input name="display_taxes" id="display_taxes1" value="1" '+(null==(__t=display_taxes?'checked="checked"':"")?"":__t)+' type="radio"><label for="display_taxes1">Prix TTC</label></div></div><div class="form-group"><label class="control-label" for="">Éxoneration de TVA</label><p>Selon la législation en vigueur et le statut de votre entreprise, vous pouvez être exonéré de TVA. Si vous choisissez l\'exonération de TVA, les nouveaux montants des prix seront calculés sur leur base HT actuelle.</p><div class="radio-group"><input name="is_duty_free" id="is_duty_free0" value="0" '+(null==(__t=is_duty_free?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_duty_free0">Sans éxoneration</label><input name="is_duty_free" id="is_duty_free1" value="1" '+(null==(__t=is_duty_free?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_duty_free1">Avec éxoneration</label></div></div></div><footer class="post-footer"></footer></article></form><article data-role="list"></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],131:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-xs-2"><div class="form-group has-feedback"><label class="control-label" for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_vat_rate">Montant</label><input class="form-control" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_vat_rate" name="vat_rate" placeholder="0,00"> <span class="form-control-feedback md-percent"></span></div></div><div class="col-xs-4"></div><div class="col-xs-5"><div class="form-group"><label class="control-label">Taxe par défaut</label><div class="radio-group"><input name="is_default" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default1" value="1" type="radio"><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default1" class="">Oui</label><input name="is_default" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default0" value="0" type="radio" checked="checked"><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default0" class="">Non</label></div></div></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show">Ajouter une taxe</a></div>';return __p};
},{"undefined":undefined}],132:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-5"><div class="media"><div class="media-body"><h4>'+(null==(__t=vat_rate)?"":_.escape(__t))+'%</h4></div></div></div><div class="col-xs-4">'+(null==(__t=is_default?'<span class="label label-enable">Taxe par défaut</span>':"")?"":__t)+'</div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-xs-2"><div class="form-group has-feedback"><label class="control-label" for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_vat_rate">Montant</label><input class="form-control" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_vat_rate" name="vat_rate" placeholder="0,00" value="'+(null==(__t=vat_rate)?"":_.escape(__t))+'"> <span class="form-control-feedback md-percent"></span></div></div><div class="col-xs-4"></div><div class="col-xs-5"><div class="form-group"><label class="control-label">Taxe par défaut</label><div class="radio-group"><input name="is_default" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default1" value="1" type="radio" '+(null==(__t=is_default?'checked="checked"':"")?"":__t)+' ><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default1" class="">Oui</label><input name="is_default" id="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default0" value="0" type="radio" '+(null==(__t=is_default?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=tax_id)?"":_.escape(__t))+'_is_default0" class="">Non</label></div></div></div></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],133:[function(require,module,exports){
arguments[4][107][0].apply(exports,arguments)
},{"107":107,"undefined":undefined}],134:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-6"><div class="media"><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+'</h4></div></div></div><div class="col-xs-4"></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="#" role="button" data-role="action" data-action="edit">Détail</a></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="control-label required" for="name">Intitulé de la variante</label><p>Changer l\'intitulé de la variante permet de renommer la variante pour tous les produits qui l\'utilise. Elle ne peut cependant être supprimer que dans le détail des produits qui l\'utilise.</p><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],135:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ListView=require(433),RowActionsBehavior=require(28),Forms=require(424),RowView=Marionette.View.extend({template:require(108),className:"list-item",ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},onActionEdit:function(){this.getUI("list").hide(),this.getUI("form").show()},onActionCancel:function(){this.getUI("form").hide(),this.getUI("list").show()},onActionSave:function(){return Forms.clearErrors(this.getUI("errors"),this.el),this.model.save(Forms.extractFields(["name"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}});module.exports=Marionette.View.extend({template:require(107),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des marques",selection:[{title:"Supprimer",callback:this.deleteBrands.bind(this),confirm:!0}]}))},start:function(){this.collection.fetch()},deleteBrands:function(e){return this.collection.bulkDelete(e)}});
},{"107":107,"108":108,"28":28,"424":424,"433":433,"undefined":undefined}],136:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_string=require("underscore.string"),RowActionsBehavior=require(28),Session=Backbone.Radio.channel("app").request("ctx:session"),HomeRowView=Marionette.View.extend({template:require(110),className:"list-item"}),RowView=Marionette.View.extend({template:require(111),className:"list-item",templateContext:function(){return{plural:function(e,t,i){return(e>1?i:t).replace("%d",e)},preview:Session.site.get("domain")+"/catalogue/"+this.model.get("slug")+"/",convertMediaPath:Session.convertMediaPath.bind(Session),short_desc:_string.prune(_string.stripTags(this.model.get("description")),120)}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},onSortChange:function(e){this.model.save(e,{patch:!0})}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(109),className:"container-fluid",service:"catalog",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:function(e){return e.get("is_main")?HomeRowView:RowView},title:"Liste des catégories",selection:[{title:"Afficher",callback:this.showCategories.bind(this)},{title:"Masquer",callback:this.hideCategories.bind(this)},{title:"Supprimer",callback:this.deleteCategories.bind(this),confirm:!0}]}))},start:function(){this.collection.fetch()},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},showCategories:function(e){return this.collection.bulkShow(e)},hideCategories:function(e){return this.collection.bulkHide(e)},deleteCategories:function(e){return this.collection.bulkDelete(e)}});
},{"109":109,"110":110,"111":111,"28":28,"433":433,"undefined":undefined}],137:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),LayoutSelectorView=require(56),FilePickerView=require(295),CharCountBehavior=require(19),FormBehavior=require(25),WysiwygBehavior=require(26),Forms=require(424),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(112),className:"container",service:"catalog",behaviors:[CharCountBehavior,FormBehavior,WysiwygBehavior],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0},image:{el:"div[data-role='image']",replaceElement:!0}},fields:["name","description","media_id","is_visible","slug","meta_title","meta_description","meta_keywords","js_head","js_body"],templateContext:function(){return{domain:Session.site.get("domain")}},initialize:function(e){this.mergeOptions(e,["model"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"catalog-category",apply:this.model.get("category_id"),applyName:this.model.get("name")}),this.listenTo(this.model,"change",this.render)},onBeforeRender:function(){this.layoutSelector.isAttached()&&this.detachChildView("layout")},onRender:function(){this.showChildView("layout",this.layoutSelector),this.showChildView("image",new FilePickerView({fieldname:"media_id",fieldLabel:"Illustration",type:"image",value:this.model.get("media_id")?this.model.get("media_id"):""}))},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"112":112,"19":19,"25":25,"26":26,"295":295,"424":424,"56":56,"undefined":undefined}],138:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(423),_=require("underscore"),RowActionsBehavior=require(28),Forms=require(424),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(114),className:"list-item",templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),date:format.formatDate(this.model.get("date")),comment2br:_.escape(""+this.model.get("comment")).replace(/(\r\n|\n\r|\r|\n)+/g,"<br />")}},ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},onActionEdit:function(){this.getUI("list").hide(),this.getUI("form").show()},onActionCancel:function(){this.getUI("form").hide(),this.getUI("list").show()},onActionSave:function(){return Forms.clearErrors(this.getUI("errors"),this.el),this.model.save(Forms.extractFields(["is_visible","comment"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(113),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des évaluations",selection:[{title:"Afficher",callback:this.showComments.bind(this)},{title:"Masquer",callback:this.hideComment.bind(this)},{title:"Supprimer",callback:this.deleteComments.bind(this),confirm:!0}]}))},start:function(e){this.collection.fetch({data:e})},showComments:function(e){return this.collection.bulkShow(e)},hideComment:function(e){return this.collection.bulkHide(e)},deleteComments:function(e){return this.collection.bulkDelete(e)}});
},{"113":113,"114":114,"28":28,"423":423,"424":424,"433":433,"undefined":undefined}],139:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),LayoutSelectorView=require(56),CharCountBehavior=require(19),FormBehavior=require(25),Forms=require(424),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(115),className:"container",service:"catalog",behaviors:[CharCountBehavior,FormBehavior],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0}},fields:["name","is_visible","meta_title","meta_description","meta_keywords","js_head","js_body"],templateContext:function(){return{domain:Session.site.get("domain")}},initialize:function(e){this.mergeOptions(e,["model"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"catalog-home",apply:this.model.get("category_id"),applyName:this.model.get("name")})},onRender:function(){this.showChildView("layout",this.layoutSelector)},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"115":115,"19":19,"25":25,"424":424,"56":56,"undefined":undefined}],140:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),RowActionsBehavior=require(28),SelectifyBehavior=require(24),AutocompleteView=require(437),PopoverBehavior=require(22),Session=Backbone.Radio.channel("app").request("ctx:session"),Forms=require(424),NewRowView=Marionette.View.extend({template:require(117),className:"post-content post-list",behaviors:[RowActionsBehavior,SelectifyBehavior],regions:{product:{el:"div[data-role='product']",replaceElement:!0}},ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]'},initialize:function(e){this.products=e.products},onRender:function(){this.showChildView("product",new AutocompleteView({searchPlaceholder:"Rechercher un produit"}))},onChildviewInput:function(e,i){this.products.fetch({data:{limit:5,term:e}}).done(function(){var e=_.map(this.products.toJSON(),function(e){return{label:e.name,value:e.product_id}});i.showResults(e)}.bind(this))},onChildviewChange:function(e,i){this.linked_product_id=e.value},onActionCancel:function(){this.getUI("form").hide(),Forms.clearErrors(this.getUI("errors"),this.el)},onActionSave:function(){Forms.clearErrors(this.getUI("errors"),this.el);var e=Forms.extractFields(["link"],this);e.product_id=this.collection.product_id,e.linked_product_id=this.linked_product_id;var i=new this.collection.model({linked_product_id:e.linked_product_id});return i.save(e).done(function(){this.getUI("form").hide(),this.collection.add(i)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionShow:function(){this.getUI("form").show()}}),RowView=Marionette.View.extend({template:require(118),className:"list-item",behaviors:[RowActionsBehavior,SelectifyBehavior,PopoverBehavior],ui:{list:'div[data-role="list"]',link:"select"},events:{"change @ui.link":"onLinkChange"},templateContext:function(){return{plural:function(e,i,t){return(e>1?t:i).replace("%d",e)},convertMediaPath:Session.convertMediaPath.bind(Session),main_category:_.find(this.model.get("categories"),function(e){return e.is_main}),sec_categories:_.filter(this.model.get("categories"),function(e){return!e.is_main})}},onLinkChange:function(e){this.model.save({link:this.getUI("link").val()})},onActionDelete:function(){return this.model.destroy()}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(116),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection","products"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Produits associés",childViewOptions:{products:this.products}}))},start:function(){this.collection.fetch({data:{extra_fields:"categories"}})}});
},{"116":116,"117":117,"118":118,"22":22,"24":24,"28":28,"424":424,"433":433,"437":437,"undefined":undefined}],141:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");require(425);var LayoutSelectorView=require(56),SelectView=require(436),FilePickerView=require(295),FileSelectorView=require(296),AutocompleteView=require(437),AutocompleteInputView=require(432),TagView=require(438),ListView=require(433),CharCountBehavior=require(19),FormBehavior=require(25),WysiwygBehavior=require(26),SelectifyBehavior=require(24),RowActionsBehavior=require(28),format=require(423),Forms=require(424),Datepicker=require(20),VariantsNames=require(105),Session=Backbone.Radio.channel("app").request("ctx:session"),VatBehavior=Marionette.Behavior.extend({ui:{price_vat:'input[data-role="vat"]'},events:{"keyup @ui.price_vat":"onPriceChange"},onRender:function(){this.listenTo(this.view.getChildView("taxes"),"change",this.onVATChange)},getCurrentTax:function(){var e=this.view.taxes.get(this.view.getChildView("taxes").selected);return e?1+e.get("vat_rate")/100:null},onVATChange:function(){var e=this.getCurrentTax();if(null!=e){var t=this.view;this.getUI("price_vat").each(function(){if("ex_vat"==this.name.substring(this.name.length-6)){var i=Backbone.$('input[name="'+Backbone.$(this).data("linked")+'"]',t.el);if(i){var a=format.unformatFloat(this.value);if(null==a)return void i.val("");a*=e,i.val(format.formatFloat(a,4))}}})}},onPriceChange:function(e){var t=this.getCurrentTax();if(null!=t){var i=Backbone.$('input[name="'+Backbone.$(e.currentTarget).data("linked")+'"]',this.view.el);if(i){var a=format.unformatFloat(e.currentTarget.value);if(null==a)return void i.val("");"ex_vat"==e.currentTarget.name.substring(e.currentTarget.name.length-6)?a*=t:a/=t,i.val(format.formatFloat(a,4))}}}}),VariantImageRowView=Marionette.View.extend({template:_.template('<input name="media_id" value="<%- media_id %>" autocomplete="off" type="radio"><img alt="<%- name %>" src="<%- convertMediaPath(\'/media/miniature/\' + media_id + \'.jpg\') %>">'),className:"btn btn-image",tagName:"label",initialize:function(e){this.mergeOptions(e,["variant"])},templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session)}},onRender:function(){this.variant?this.model.get("media_id")==this.variant.get("media_id")?this.$el.addClass("active"):this.$el.removeClass("active"):1==this.model.get("position")?this.$el.addClass("active"):this.$el.removeClass("active")}}),NewVariantRowView=Marionette.View.extend({template:require(122),className:"post-content post-list",behaviors:[RowActionsBehavior,VatBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0},images:{el:"div[data-role='images']",replaceElement:!0},name:{el:"div[data-role='name']",replaceElement:!0}},ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]',stock_fields:'div[data-role="stock"]',is_stock_unlimited:'select[name="is_stock_unlimited"]'},events:{"change @ui.is_stock_unlimited":function(e){"1"==this.getUI("is_stock_unlimited").val()?this.getUI("stock_fields").hide():this.getUI("stock_fields").show()}},fields:["name","reference","tax_id","gtin","condition","weight","price_ex_vat","price_inc_vat","price_discount_ex_vat","price_discount_inc_vat","price_ecotax","is_stock_unlimited","stock","media_id"],initialize:function(e){this.taxes=e.taxes,this.images=e.images,this.names=e.names},onRender:function(){this.showChildView("taxes",new SelectView({collection:this.taxes,name:"tax_id"})),this.showChildView("images",new Marionette.CollectionView({className:"btn-group",attributes:{"data-toggle":"buttons"},collection:this.images,childView:VariantImageRowView})),this.showChildView("name",new AutocompleteInputView({searchPlaceholder:"Rechercher un intitulé",name:"name",noResultsLabel:null}))},onChildviewInput:function(e,t){this.names.fetch({data:{term:e,limit:5}}).done(function(){var e=_.map(this.names.toJSON(),function(e){return{label:e.name,value:e.name}});t.showResults(e)}.bind(this))},templateContext:function(){return{images:this.images.toJSON(),convertMediaPath:Session.convertMediaPath.bind(Session)}},onActionCancel:function(){this.getUI("form").hide(),Forms.clearErrors(this.getUI("errors"),this.el)},onActionSave:function(){Forms.clearErrors(this.getUI("errors"),this.el);var e=new this.collection.model,t=Forms.extractFields(this.fields,this);return t.product_id=this.collection.product_id,e.save(t).done(function(){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionShow:function(){this.getUI("form").show()}}),VariantRowView=Marionette.View.extend({template:require(123),className:"list-item",behaviors:[RowActionsBehavior,VatBehavior,SelectifyBehavior],regions:{taxes:{el:"div[data-role='taxes']",replaceElement:!0},images:{el:"div[data-role='images']",replaceElement:!0},name:{el:"div[data-role='name']",replaceElement:!0}},ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]',stock_fields:'div[data-role="stock"]',is_stock_unlimited:'select[name="is_stock_unlimited"]'},events:{"change @ui.is_stock_unlimited":function(e){"1"==this.getUI("is_stock_unlimited").val()?this.getUI("stock_fields").hide():this.getUI("stock_fields").show()}},fields:["name","reference","tax_id","gtin","condition","weight","price_ex_vat","price_inc_vat","price_discount_ex_vat","price_discount_inc_vat","price_ecotax","is_stock_unlimited","media_id","stock"],initialize:function(e){this.taxes=e.taxes,this.images=e.images,this.names=e.names,this.listenTo(this.images,"add remove",this.onImageSync)},templateContext:function(){return{current_price_ex_vat_label:this.model.get("price_discount_ex_vat")?this.model.get("price_discount_ex_vat_label"):this.model.get("price_ex_vat_label"),current_price_inc_vat_label:this.model.get("price_discount_inc_vat")?this.model.get("price_discount_inc_vat_label"):this.model.get("price_inc_vat_label"),convertMediaPath:Session.convertMediaPath.bind(Session),price_ex_vat:format.formatFloat(this.model.get("price_ex_vat"),4),price_inc_vat:format.formatFloat(this.model.get("price_inc_vat"),4),price_discount_ex_vat:format.formatFloat(this.model.get("price_discount_ex_vat"),4),price_discount_inc_vat:format.formatFloat(this.model.get("price_discount_inc_vat"),4),price_ecotax:format.formatFloat(this.model.get("price_ecotax"))}},onRender:function(){this.showChildView("taxes",new SelectView({collection:this.taxes,selected:this.model.get("tax_id"),name:"tax_id"})),this.showChildView("images",new Marionette.CollectionView({className:"btn-group",attributes:{"data-toggle":"buttons"},collection:this.images,childView:VariantImageRowView,childViewOptions:{variant:this.model}})),this.showChildView("name",new AutocompleteInputView({searchPlaceholder:"Rechercher un intitulé",name:"name",current:this.model.get("name"),noResultsLabel:null}))},onImageSync:function(e){var t;if(null==this.model.get("media_id")&&1==this.images.length)return t=Session.convertMediaPath("/media/miniature/"+e.get("media_id")+".jpg"),Backbone.$("img",this.el).attr("src",t),void this.model.set("media_id",e.get("media_id"));if(e.get("media_id")==this.model.get("media_id"))if(this.images.length>0){var i=_.sortBy(this.images.toJSON(),"position")[0];t=Session.convertMediaPath("/media/miniature/"+i.media_id+".jpg"),Backbone.$("img",this.el).attr("src",t),this.model.set("media_id",i.media_id)}else Backbone.$("img",this.el).attr("src",""),this.model.set("media_id",null)},onChildviewInput:function(e,t){this.names.fetch({data:{term:e,limit:5}}).done(function(){var e=_.map(this.names.toJSON(),function(e){return{label:e.name,value:e.name}});t.showResults(e)}.bind(this))},onActionDuplicateRow:function(){return this.model.duplicate().done(function(e){this.model.collection.add(e)}.bind(this)).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},onActionDeleteRow:function(){return this.model.destroy({wait:!0}).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},onActionEditRow:function(){this.getUI("list").hide(),this.getUI("form").show()},onActionCancelRow:function(){this.getUI("form").hide(),this.getUI("list").show()},onActionSaveRow:function(){Forms.clearErrors(this.getUI("errors"),this.el);var e=Forms.extractFields(this.fields,this);return e.is_stock_unlimited&&(e.stock=null),this.model.save(e,{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ImageRowView=Marionette.View.extend({template:_.template('<div class="si-overlay"><span data-role="delete-image" class="md-icon md-delete btn-si"></span></div><img alt="<%- name %>" src="<%- convertMediaPath(\'/media/vignette/\' + media_id + \'.jpg\') %>">'),className:"btn btn-image",tagName:"label",attributes:function(){return{"data-id":this.model.get("media_id")}},events:{'click [data-role="delete-image"]':function(){this.model.destroy()}},templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session)}},onRender:function(){1==this.model.get("position")?this.$el.addClass("active"):this.$el.removeClass("active")}}),EmptyImageRowView=Marionette.View.extend({template:_.template("<div class=\"list-item-empty\">Ce produit n'a pas d'illustration...</div>")}),ImagesView=Marionette.View.extend({template:require(120),className:"post-article",tagName:"article",attributes:{"data-toggle":"buttons"},regions:{list:{el:"div[data-role='list']",replaceElement:!0},add:{el:"a[data-role='add-image']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.showChildView("list",new Marionette.CollectionView({className:"btn-group",collection:this.collection,childView:ImageRowView,emptyView:EmptyImageRowView})),this.showChildView("add",new FileSelectorView);var e=this.getChildView("list").$el,t=0;e.sortable({start:function(e,i){t=1!=Backbone.$(this).data("sortableFirst")?Backbone.$("#content").scrollTop():0,Backbone.$(this).data("sortableFirst",!0)},sort:function(e,i){t>0&&i.helper.css({top:i.position.top-t+"px"})},change:function(e,i){t=0},update:function(t,i){var a=[];e.children().each(function(e){var t=Backbone.$(this);0==e?t.addClass("active"):t.removeClass("active"),a.push(t.data("id"))}),this.collection.reOrder(a)}.bind(this)})},onChildviewSelectedFile:function(e){var t=this.collection.reduce(function(e,t){return Math.max(e,t.get("position"))},0);this.collection.create({media_id:e.media_id,name:e.name,orginial_name:e.orginial_name,product_id:this.collection.product_id,position:t+1})}}),TypeSelectorView=Marionette.View.extend({template:require(121),className:"post-article",tagName:"article",types:[],fields:[],type:"",product:null,ui:{select:"select[name='type']"},events:{"change @ui.select":function(){this.selectType(this.getUI("select").val())}},behaviors:[WysiwygBehavior,SelectifyBehavior],initialize:function(e){this.mergeOptions(e,["type","typesSource","product"]),this.typesSource.done(function(e){this.types=e,this.selectType(this.type)}.bind(this))},templateContext:function(){return{type:this.type,types:this.types,product:this.product,fields:this.fields}},selectType:function(e){this.type=e;var t=[],i=_.find(this.types,function(e){return e.type==this.type}.bind(this));i&&i.fields&&(t=i.fields),_.each(this.getRegions(),function(e,t){"filepicker-"==t.substring(0,11)&&this.removeRegion(t)}.bind(this)),_.each(t,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.getRegion(t)||this.addRegion(t,'div[data-role="'+t+'"]')}}.bind(this)),this.fields=t,this.render()},onRender:function(){_.each(this.fields,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.showChildView(t,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,value:this.product.get(e.field)}))}}.bind(this))}});module.exports=Marionette.View.extend({template:require(119),className:"container",service:"catalog",behaviors:[CharCountBehavior,FormBehavior,WysiwygBehavior,Datepicker],regions:{layout:{el:"article[data-role='layout']",replaceElement:!0},type:{el:"article[data-role='type']",replaceElement:!0},"primary-categ":{el:"div[data-role='primary-categ']",replaceElement:!0},"other-categ":{el:"div[data-role='other-categ']",replaceElement:!0},brand:{el:"div[data-role='brand']",replaceElement:!0},tags:{el:"div[data-role='tags']",replaceElement:!0},variants:{el:"article[data-role='variants']",replaceElement:!0},images:{el:"article[data-role='images']",replaceElement:!0}},fields:["name","available_date","is_spotlight","header","description","extra_shipping","is_visible","type","text1","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15","slug","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["model","typesSource","categories","brands","tags","variants","taxes","images"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"catalog-product",apply:this.model.get("product_id"),applyName:this.model.get("name")}),this.variantsView=new ListView({collection:this.variants,rowView:VariantRowView,newRowView:NewVariantRowView,title:"Variantes",childViewOptions:{taxes:this.taxes,images:this.images,names:new VariantsNames}}),this.imagesView=new ImagesView({collection:this.images}),this.listenTo(this.model,"change",this.render)},templateContext:function(){return{domain:Session.site.get("domain"),available_date:format.formatDateTime(this.model.get("available_date")),extra_shipping:format.formatFloat(this.model.get("extra_shipping"))}},onBeforeRender:function(){this.layoutSelector.isAttached()&&this.detachChildView("layout"),this.variantsView.isAttached()&&this.detachChildView("variants"),this.imagesView.isAttached()&&this.detachChildView("images")},onRender:function(){this.showChildView("layout",this.layoutSelector),this.showChildView("type",new TypeSelectorView({type:this.model.get("type"),product:this.model,typesSource:this.typesSource}));var e=this,t=this.model.get("images");_.each(t,function(t){t.product_id=e.model.get("product_id")}),this.images.set(t),this.showChildView("images",this.imagesView),this.showChildView("variants",this.variantsView),this.variants.set(this.model.get("variants"));var i=_.find(this.model.get("categories"),function(e){return e.is_main});this.showChildView("primary-categ",new AutocompleteView({searchPlaceholder:"Rechercher une catégorie",current:{label:i.name,value:i.category_id}}));var a=_.filter(this.model.get("categories"),function(e){return!e.is_main});a=_.map(a,function(e){return{label:e.name,value:e.category_id}}),this.showChildView("other-categ",new TagView({searchPlaceholder:"Rechercher une catégorie",tags:a})),this.showChildView("brand",new AutocompleteView({searchPlaceholder:"Rechercher une marque",isMandatory:!1,evtSuffix:"brand",current:{label:this.model.get("brand_name"),value:this.model.get("brand_id")}}));var s=_.map(this.model.get("tags"),function(e){return{label:e.name,value:e.tag_id}});this.showChildView("tags",new TagView({evtSuffix:"tags",searchPlaceholder:"Rechercher un tag",tags:s}))},onChildviewInputBrand:function(e,t){this.brands.fetch({data:{limit:5,term:e}}).done(function(){var e=_.map(this.brands.toJSON(),function(e){return{label:e.name,value:e.brand_id}});t.showResults(e,{title:"Ajouter la marque",eventName:"add"})}.bind(this))},onChildviewChangeBrand:function(e,t){this.model.set("brand_id",e.value,{silent:!0})},onChildviewAddBrand:function(e,t){this.brands.create({name:e},{wait:!0,success:function(e){t.setCurrent({label:e.get("name"),value:e.get("brand_id")}),this.model.set("brand_id",e.get("brand_id"),{silent:!0})}.bind(this)})},onChildviewInputTags:function(e,t){this.tags.fetch({data:{limit:5,term:e}}).done(function(){var e=_.map(this.tags.toJSON(),function(e){return{label:e.name,value:e.tag_id}});t.showResults(e,{title:"Ajouter le tag",eventName:"add"})}.bind(this))},onChildviewAddTags:function(e,t){t.addTag({value:e,label:e})},onChildviewInput:function(e,t){t!=this.getChildView("primary-categ")&&t!=this.getChildView("other-categ")||this.categories.fetch({data:{limit:5,term:e}}).done(function(){var e=_.map(this.categories.toJSON(),function(e){return{label:e.name,value:e.category_id}});if(t==this.getChildView("other-categ")){var i=this.getChildView("primary-categ");e=_.filter(e,function(e){return e.value!=i.current.value})}t.showResults(e)}.bind(this))},onChildviewChange:function(e,t){if(t==this.getChildView("primary-categ")){var i=this.getChildView("other-categ");i.collection.remove(e.value)}},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onChildviewSortChange:function(e){this.variants.reOrder(e.list)},onSave:function(){var e=Forms.extractFields(this.fields,this,'form[data-role="part"]');e.brand_id=this.model.get("brand_id")||"",e.tags=_.pluck(this.getChildView("tags").getTags(),"label");var t=[this.getChildView("primary-categ").getCurrent().value];return e.categories=t.concat(_.pluck(this.getChildView("other-categ").getTags(),"value")),this.model.save(e,{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"105":105,"119":119,"120":120,"121":121,"122":122,"123":123,"19":19,"20":20,"24":24,"25":25,"26":26,"28":28,"295":295,"296":296,"423":423,"424":424,"425":425,"432":432,"433":433,"436":436,"437":437,"438":438,"56":56,"undefined":undefined}],142:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(422),_=require("underscore"),format=require(423),RowActionsBehavior=require(28),PopoverBehavior=require(22),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(125),className:"list-item",templateContext:function(){return{plural:function(e,t,i){return(e>1?i:t).replace("%d",e)},convertMediaPath:Session.convertMediaPath.bind(Session),main_category:_.find(this.model.get("categories"),function(e){return e.is_main}),sec_categories:_.filter(this.model.get("categories"),function(e){return!e.is_main})}},behaviors:[RowActionsBehavior,PopoverBehavior],onActionDelete:function(){return this.model.destroy()}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(124),className:"container-fluid",service:"catalog",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},category_id:null,sortOrder:"name",filters:null,initialize:function(e){this.mergeOptions(e,["collection","categories","tags","category_id"]),this.filters={stock:null,category_id:null,tag_id:null}},onRender:function(){var e=[];null==this.category_id&&e.push({id:"categories",title:"Toutes les catégories",type:"search"});var t=new CollectionUtils.SelectCollection;t.add([{value:"yes",label:"En stock",selected:"yes"==this.filters.stock},{value:"partial",label:"En rupture partielle",selected:"partial"==this.filters.stock},{value:"no",label:"En rupture totale",selected:"no"==this.filters.stock}]),e.push({id:"tag",title:"Tous les tags",type:"search"}),e.push({id:"stock",extraClassname:"select-state",title:"États",collectionPromise:t}),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des produits",order:[{title:"Produit",is_active:!0,value:"name"},{title:"Prix minimum",is_active:!1,value:"price_min"},{title:"Prix maximum",is_active:!1,value:"-price_max"}],selection:[{title:"Afficher",callback:this.showProducts.bind(this)},{title:"Masquer",callback:this.hideProducts.bind(this)},{title:"Supprimer",callback:this.deleteProducts.bind(this),confirm:!0}],filters:e}))},start:function(){var e={extra_fields:"price_label,categories",sort:this.sortOrder?this.sortOrder:null};this.category_id&&(e.category_id=this.category_id),null!=this.filters.stock&&(e.stock=this.filters.stock),null!=this.filters.category_id&&(e.category_id=this.filters.category_id),null!=this.filters.tag_id&&(e.tag_id=this.filters.tag_id),this.collection.fetch({reset:!0,data:e})},showProducts:function(e){return this.collection.bulkShow(e)},hideProducts:function(e){return this.collection.bulkHide(e)},deleteProducts:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){"categories"==e.model.get("id")?this.filters.category_id=e.value:"tag"==e.model.get("id")?this.filters.tag_id=e.value:"stock"==e.model.get("id")&&("yes"==e.value?this.filters.stock="yes":"no"==e.value?this.filters.stock="no":"partial"==e.value?this.filters.stock="partial":this.filters.stock=null),this.start()},onChildviewFilterInput:function(e){e.view&&e.view.showResults&&("categories"==e.model.get("id")?this.categories.fetch({data:{limit:5,term:e.value}}).done(function(){var t=_.map(this.categories.toJSON(),function(e){return{label:e.name,value:e.category_id}});e.view.showResults(t)}.bind(this)):this.tags.fetch({data:{limit:5,term:e.value}}).done(function(){var t=_.map(this.tags.toJSON(),function(e){return{label:e.name,value:e.tag_id}});e.view.showResults(t)}.bind(this)))},onChildviewChangeOrder:function(e){this.sortOrder=e,this.start()}});
},{"124":124,"125":125,"22":22,"28":28,"422":422,"423":423,"433":433,"undefined":undefined}],143:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(126),className:"container",service:"catalog",behaviors:[FormBehavior],fields:["currency","comments_allowed","comments_captcha","comments_anonymous","comments_autopublish","require_auth"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"126":126,"25":25,"424":424,"undefined":undefined}],144:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ListView=require(433),RowActionsBehavior=require(28),Forms=require(424),RowView=Marionette.View.extend({template:require(129),className:"list-item",ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()}});module.exports=Marionette.View.extend({template:require(128),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des tags",selection:[{title:"Supprimer",callback:this.deleteTags.bind(this),confirm:!0}]}))},start:function(){this.collection.fetch()},deleteTags:function(e){return this.collection.bulkDelete(e)}});
},{"128":128,"129":129,"28":28,"424":424,"433":433,"undefined":undefined}],145:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),RowActionsBehavior=require(28),FormBehavior=require(25),Forms=require(424),format=require(423),NewRowView=Marionette.View.extend({template:require(131),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]'},templateContext:function(){return{tax_id:"new"}},onActionCancel:function(){this.getUI("form").hide(),Forms.clearErrors(this.getUI("errors"),this.el)},onActionSave:function(){Forms.clearErrors(this.getUI("errors"),this.el);var e=new this.collection.model;return e.save(Forms.extractFields(["is_default","vat_rate"],this)).done(function(){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionShow:function(){this.getUI("form").show()}}),RowView=Marionette.View.extend({template:require(132),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},templateContext:function(){return{vat_rate:format.formatFloat(this.model.get("vat_rate"))}},onActionDelete:function(){return this.model.destroy({wait:!0}).fail(function(e){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showErrorModal(e)})},onActionEdit:function(){this.getUI("list").hide(),this.getUI("form").show()},onActionCancel:function(){this.getUI("form").hide(),this.getUI("list").show()},onActionSave:function(){return Forms.clearErrors(this.getUI("errors"),this.el),this.model.save(Forms.extractFields(["vat_rate","is_default"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(130),className:"container",service:"catalog",behaviors:[FormBehavior],fields:["display_taxes","is_duty_free"],initialize:function(e){this.mergeOptions(e,["collection","model"]),this.listenTo(this.collection,"change",function(e,t){t.merge||e.hasChanged("is_default")&&this.collection.fetch({reset:!0})}),this.listenTo(this.collection,"add",function(e,t){e.hasChanged("tax_id")&&e.get("is_default")&&this.collection.fetch({reset:!0})}),this.listenTo(this.collection,"remove",function(e,t){e.get("is_default")&&this.collection.fetch({reset:!0})})},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.model.get("is_duty_free")||(this.collection.fetch(),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Liste des taxes"})))},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0}).done(function(){this.render()}.bind(this))}});
},{"130":130,"131":131,"132":132,"25":25,"28":28,"423":423,"424":424,"433":433,"undefined":undefined}],146:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ListView=require(433),RowActionsBehavior=require(28),Forms=require(424),RowView=Marionette.View.extend({template:require(134),className:"list-item",ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},behaviors:[RowActionsBehavior],onActionEdit:function(){this.getUI("list").hide(),this.getUI("form").show()},onActionCancel:function(){this.getUI("form").hide(),this.getUI("list").show()},onActionSave:function(){Forms.clearErrors(this.getUI("errors"),this.el);var e=Forms.extractFields(["name"],this);return this.model.rename(e.name).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}});module.exports=Marionette.View.extend({template:require(133),className:"container",service:"catalog",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des variantes"}))},start:function(){this.collection.fetch()}});
},{"133":133,"134":134,"28":28,"424":424,"433":433,"undefined":undefined}],147:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Carrier=Backbone.Model.extend({urlRoot:"sites/@site/checkout/carriers",idAttribute:"carrier_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{carrier_id:e.data}:e.data:e},defaults:{carrier_id:null,name:"",is_enabled:!1,is_default:!1,description:"",position:0,type:""}});module.exports=Backbone.Collection.extend({url:"sites/@site/checkout/carriers",model:Carrier,parse:function(e){return this.meta=e.meta,e.data},promisedSelect:function(e,t){e=_.extend({exclude_pickup:!1},e);var i=this;return this.fetch().then(function(){var r=new CollectionUtils.SelectCollection,n=[];return i.each(function(i){e.exclude_pickup&&"magasin"==i.get("type")||n.push({value:i.get("carrier_id"),label:i.get("name"),selected:t&&i.get("carrier_id")==t})}),r.add(n),r})},bulkEnable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?Backbone.$.Deferred().resolve():e.save({is_enabled:!0},{patch:!0})},e)},bulkDisable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?e.save({is_enabled:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"undefined":undefined}],148:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/checkout",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{pending_count:0,processing_count:0,processed_count:0,shipped_count:0,cancelled_count:0}});
},{"undefined":undefined}],149:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/checkout",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{is_enabled:!1,order_prefix:"C",stockout_selling:!1,stockout_threshold:0,decrement_stock:"at_payment",mail_pending:"",mail_processing:"",mail_processed:"",mail_shipped:"",mail_cancelled:""}});
},{"undefined":undefined}],150:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Controller=require(30),Checkout=require(148),Settings=require(149),IndexView=require(178),OrderView=require(181),AbortedView=require(172),PaymentsView=require(189),PaymentChequeView=require(183),PaymentTransferView=require(188),PaymentPayboxView=require(186),PaymentPaypalView=require(187),PaymentCmcicView=require(184),PaymentAtosView=require(182),PaymentCyberplusView=require(185),OptionsView=require(180),OptionView=require(179),SettingsView=require(191),SettingsEmailsView=require(190),CarriersView=require(177),CarrierView=require(173),CarrierShopView=require(176),CarrierLocalView=require(175),CarrierLaposteView=require(174),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(409),service:"checkout",behaviors:[ActiveLinksBehaviors],initialize:function(e){this.overview=new Checkout,this.fetchAndRender()},fetchAndRender:function(){Backbone.$.when(this.overview.fetch()).done(function(){this.render()}.bind(this)).fail(function(){console.log("FAIL")})},templateContext:function(){return{overview:this.overview.toJSON()}}}),CheckoutController=Controller.extend({sidebarMenuService:"checkout",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Commandes",href:"/checkout"}],showIndex:function(){this.navigationController.underConstruction()},showOrder:function(e){console.log("BlogController, showOrder",e),this.navigationController.showContent(new OrderView),this.setHeader({title:"Commande "+e})},showAborted:function(){console.log("CheckoutController, showAborted"),this.navigationController.showContent(new AbortedView),this.setHeader({title:"Commandes abondonnées"})},showPayments:function(){console.log("CheckoutController, showPayments"),this.navigationController.showContent(new PaymentsView),this.setHeader({title:"Commandes abondonnées"})},showOptions:function(){console.log("CheckoutController, showOptions"),this.navigationController.showContent(new OptionsView),this.setHeader({title:"Options à la commande"})},showOption:function(e){console.log("BlogController, showOption",e),this.navigationController.showContent(new OptionView),this.setHeader({title:"Détail de l'option "+e})},showSettingsEmails:function(){var e=new Settings;e.fetch().done(function(){var t=new SettingsEmailsView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Emails de confirmation"})}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showSettings:function(){var e=new Settings;e.fetch().done(function(){var t=new SettingsView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Paramètres des commandes"})}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showCarriers:function(){console.log("CheckoutController, showCarriers"),this.navigationController.showContent(new CarriersView),this.setHeader({title:"Transporteurs et frais de port"})},showCarrier:function(e){console.log("CheckoutController, showCarrier",e),this.navigationController.showContent(new CarrierView),this.setHeader({title:"Détail du transporteur "+e})},showCarrierLocal:function(e){console.log("CheckoutController, showCarrierLocal",e),this.navigationController.showContent(new CarrierLocalView),this.setHeader({title:"Détail du transporteur "+e})},showCarrierShop:function(){console.log("CheckoutController, showCarrierShop"),this.navigationController.showContent(new CarrierShopView),this.setHeader({title:"Retrait en boutique"})},showCarrierLaposte:function(){console.log("CheckoutController, showCarrierLaposte"),this.navigationController.showContent(new CarrierLaposteView),this.setHeader({title:"Colissimo Entreprise de la Poste"})},showPaymentCheque:function(){console.log("CheckoutController, showPaymentCheque"),this.navigationController.showContent(new PaymentChequeView),this.setHeader({title:"Paiement par chèque"})},showPaymentTransfer:function(){console.log("CheckoutController, showPaymentTransfer"),this.navigationController.showContent(new PaymentTransferView),this.setHeader({title:"Paiement par virement bancaire"})},showPaymentPaybox:function(){console.log("CheckoutController, showPaymentPaybox"),this.navigationController.showContent(new PaymentPayboxView),this.setHeader({title:"Paybox"})},showPaymentPaypal:function(){console.log("CheckoutController, showPaymentPaypal"),this.navigationController.showContent(new PaymentPaypalView),this.setHeader({title:"Paypal"})},showPaymentCmcic:function(){console.log("CheckoutController, showPaymentCmcic"),this.navigationController.showContent(new PaymentCmcicView),this.setHeader({title:"CM-CIC Monetico Paiement"})},showPaymentAtos:function(){console.log("CheckoutController, showPaymentAtos"),this.navigationController.showContent(new PaymentAtosView),this.setHeader({title:"ATOS SIPS"})},showPaymentCyberplus:function(){console.log("CheckoutController, showPaymentCyberplus"),this.navigationController.showContent(new PaymentCyberplusView),this.setHeader({title:"Cyberplus Paiement"})}});module.exports=Marionette.AppRouter.extend({controller:new CheckoutController,appRoutes:{checkout:"showIndex"},onRoute:function(e,t,o){this.controller.showSidebarMenu()}});
},{"148":148,"149":149,"172":172,"173":173,"174":174,"175":175,"176":176,"177":177,"178":178,"179":179,"18":18,"180":180,"181":181,"182":182,"183":183,"184":184,"185":185,"186":186,"187":187,"188":188,"189":189,"190":190,"191":191,"30":30,"409":409,"undefined":undefined}],151:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/Commandes/etat-des-commandes.html" class="md-icon md-help pull-right" target="_blank"></a> Les commandes listées ici peuvent correspondre à deux cas de figures :<br><br><ol><li>Les commandes abandonnées par les clients qui ne sont jamais allés au bout du processus de paiement en ligne (hors chèque et virement)</li><li>Les commandes que les clients ont bien payées mais qui ont rencontré un problème temporaire qui a empeché votre fournisseur de moyen de paiement d\'informer Kiubi que le paiement a bien été effectué. Vous avez donc un crédit sur votre compte bancaire qui ne se correspond à aucune commande "À traiter"</li></ol><br>Vous seul pouvez distinguer le cas n°1 du cas n°2. Cette page vous permet de réintégrer les commandes du cas n°2 dans la liste des commandes "À traiter" <strong><span class="text-uppercase">uniquement si</span> vous avez bien reçu leur paiement sur votre compte bancaire</strong>.</div><article class="post-article"><header class="post-header"><h1>Liste des commandes</h1></header><div class="post-content post-list"><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-body"><h4>C1608251</h4>Le 25/08/2016 à 18h03 par <a href="#">Marc BEYER</a></div></div></div><div class="col-xs-3"><span class="label label-paid">Payée</span></div><div class="col-xs-2"><span class="price">20,00€<br>Total TTC</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Réintégrer</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-body"><h4>C1608251</h4>Le 25/08/2016 à 18h03 par <a href="#">Marc BEYER</a></div></div></div><div class="col-xs-3"><span class="label label-payable">À payer</span></div><div class="col-xs-2"><span class="price">20,00€<br>Total TTC</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Réintégrer</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-body"><h4>C1608251</h4>Le 25/08/2016 à 18h03 par <a href="#">Marc BEYER</a></div></div></div><div class="col-xs-3"><span class="label label-paid">Payée</span></div><div class="col-xs-2"><span class="price">20,00€<br>Total TTC</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Réintégrer</a></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],152:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/Commandes/frais-de-port.html" class="md-icon md-help pull-right" target="_blank"></a> Un transporteur est défini pour une livraison à l\'adresse indiquée dans une commande. Les frais de port sont calculés en fonction du <strong>pays</strong> de livraison, par <strong>tranche de poids</strong>.</div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="exmemple1">Intitulé du transporteur</label><input class="form-control" id="exmemple1" placeholder="Intitulé du transporteur tel qu\'il apparaîtra dans le choix de la livraison"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Transporteur par défaut</label><div class="radio-group"><input name="Transporteur" id="Transporteur1" value="option1" checked="checked" type="radio"><label for="Transporteur1">Oui</label><input name="Transporteur" id="Transporteur0" value="option1" type="radio"><label for="Transporteur0">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations complémentaires</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Description</label><textarea class="form-control" rows="5" placeholder="Description du transporteur telle qu\'elle apparaîtra dans le choix de la livraison"></textarea></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Montant de commande minimum</label><div class="input-group"><span class="input-group-addon" id="basic-addon3">Actif à partir de</span> <input class="form-control" value="300,00" placeholder="1,00"> <span class="input-group-addon" id="basic-addon2">€TCC d\'achat</span></div></div></div><div class="clearfix"></div><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Taxe</label><select class="form-control" ic="exmemple3"><option selected="selected">20,00%</option><option>5,50%</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Expeditor INET</h1></header><div class="post-content"><p>Expeditor INET est un logiciel fourni par La Poste pour optimiser la chaîne de travail et notamment l’édition des étiquettes de colisage. Les commandes utilisant ce transporteur peuvent être inclues dans les exports au format Expeditor INET.</p><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Inclure dans l\'export</label><div class="radio-group"><input name="export" id="export1" value="option1" checked="checked" type="radio"><label for="export1">Oui</label><input name="export" id="export0" value="option1" type="radio"><label for="export0">Non</label></div></div></div><div class="col-xs-8"><div class="form-group"><label class="control-label" for="">Remise contre signature (si possible)</label><div class="radio-group"><input name="signature" id="signature1" value="option1" checked="checked" type="radio"><label for="signature1">Oui (Colissimo Expert)</label><input name="signature" id="signature0" value="option1" type="radio"><label for="signature0">Non (Colissimo Access)</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header no-border"><h1>Pays livrables</h1></header><div class="post-content post-list"><div class="post-group"><div class="row"><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Pays concerné</label><select class="form-control" ic="exmemple3"><optgroup label="Pays livrables"></optgroup><option value="73" selected="selected">FRANCE METROPOLITAINE</option><optgroup label="Frais de port non défini"></optgroup><option value="3">AFGHANISTAN</option><option value="243">AFRIQUE DU SUD</option><option value="6">ALBANIE</option><option value="60">ALGÉRIE</option><option value="55">ALLEMAGNE</option><option value="1">ANDORRE</option><option value="9">ANGOLA</option><option value="5">ANGUILLA</option><option value="10">ANTARCTIQUE</option><option value="4">ANTIGUA-ET-BARBUDA</option><option value="8">ANTILLES NÉERLANDAISES</option><option value="189">ARABIE SAOUDITE</option><option value="11">ARGENTINE</option><option value="7">ARMÉNIE</option><option value="15">ARUBA</option><option value="14">AUSTRALIE</option><option value="13">AUTRICHE</option><option value="16">AZERBAÏDJAN</option><option value="30">BAHAMAS</option><option value="23">BAHREÏN</option><option value="19">BANGLADESH</option><option value="18">BARBADE</option><option value="34">BÉLARUS</option><option value="20">BELGIQUE</option><option value="35">BELIZE</option><option value="25">BÉNIN</option><option value="26">BERMUDES</option><option value="31">BHOUTAN</option><option value="28">BOLIVIE</option><option value="17">BOSNIE-HERZÉGOVINE</option><option value="33">BOTSWANA</option><option value="32">BOUVET, ÎLE</option><option value="29">BRÉSIL</option><option value="27">BRUNÉI DARUSSALAM</option><option value="22">BULGARIE</option><option value="21">BURKINA FASO</option><option value="24">BURUNDI</option><option value="123">CAÏMANES, ÎLES</option><option value="116">CAMBODGE</option><option value="45">CAMEROUN</option><option value="36">CANADA</option><option value="51">CAP-VERT</option><option value="39">CENTRAFRICAINE, RÉPUBLIQUE</option><option value="44">CHILI</option><option value="46">CHINE</option><option value="52">CHRISTMAS, ÎLE</option><option value="53">CHYPRE</option><option value="37">COCOS (KEELING), ÎLES</option><option value="47">COLOMBIE</option><option value="118">COMORES</option><option value="40">CONGO</option><option value="38">CONGO, LA RÉPUBLIQUE DÉMOCRATIQUE DU</option><option value="43">COOK, ÎLES</option><option value="121">CORÉE, RÉPUBLIQUE DE</option><option value="120">CORÉE, RÉPUBLIQUE POPULAIRE DÉMOCRATIQUE DE</option><option value="48">COSTA RICA</option><option value="42">CÔTE D\'IVOIRE</option><option value="97">CROATIE</option><option value="50">CUBA</option><option value="57">DANEMARK</option><option value="56">DJIBOUTI</option><option value="59">DOMINICAINE, RÉPUBLIQUE</option><option value="58">DOMINIQUE</option><option value="63">ÉGYPTE</option><option value="205">EL SALVADOR</option><option value="2">ÉMIRATS ARABES UNIS</option><option value="61">ÉQUATEUR</option><option value="65">ÉRYTHRÉE</option><option value="66">ESPAGNE</option><option value="62">ESTONIE</option><option value="228">ÉTATS-UNIS</option><option value="67">ÉTHIOPIE</option><option value="70">FALKLAND, ÎLES (MALVINAS)</option><option value="72">FÉROÉ, ÎLES</option><option value="69">FIDJI</option><option value="68">FINLANDE</option><option value="75">GABON</option><option value="84">GAMBIE</option><option value="78">GÉORGIE</option><option value="89">GÉORGIE DU SUD ET LES ÎLES SANDWICH DU SUD</option><option value="81">GHANA</option><option value="82">GIBRALTAR</option><option value="88">GRÈCE</option><option value="77">GRENADE</option><option value="83">GROENLAND</option><option value="86">GUADELOUPE</option><option value="91">GUAM</option><option value="90">GUATEMALA</option><option value="80">GUERNESEY</option><option value="85">GUINÉE</option><option value="87">GUINÉE ÉQUATORIALE</option><option value="92">GUINÉE-BISSAU</option><option value="93">GUYANA</option><option value="79">GUYANE FRANÇAISE</option><option value="98">HAÏTI</option><option value="95">HEARD, ÎLE ET MCDONALD, ÎLES</option><option value="96">HONDURAS</option><option value="94">HONG-KONG</option><option value="99">HONGRIE</option><option value="103">ÎLE DE MAN</option><option value="227">ÎLES MINEURES ÉLOIGNÉES DES ÉTATS-UNIS</option><option value="234">ÎLES VIERGES BRITANNIQUES</option><option value="235">ÎLES VIERGES DES ÉTATS-UNIS</option><option value="104">INDE</option><option value="100">INDONÉSIE</option><option value="107">IRAN, RÉPUBLIQUE ISLAMIQUE D\'</option><option value="106">IRAQ</option><option value="101">IRLANDE</option><option value="108">ISLANDE</option><option value="102">ISRAËL</option><option value="109">ITALIE</option><option value="111">JAMAÏQUE</option><option value="113">JAPON</option><option value="110">JERSEY</option><option value="112">JORDANIE</option><option value="124">KAZAKHSTAN</option><option value="114">KENYA</option><option value="115">KIRGHIZISTAN</option><option value="117">KIRIBATI</option><option value="122">KOWEÏT</option><option value="125">LAO, RÉPUBLIQUE DÉMOCRATIQUE POPULAIRE</option><option value="131">LESOTHO</option><option value="134">LETTONIE</option><option value="126">LIBAN</option><option value="130">LIBÉRIA</option><option value="135">LIBYENNE, JAMAHIRIYA ARABE</option><option value="128">LIECHTENSTEIN</option><option value="132">LITUANIE</option><option value="133">LUXEMBOURG</option><option value="145">MACAO</option><option value="141">MACÉDOINE, L\'EX-RÉPUBLIQUE YOUGOSLAVE DE</option><option value="139">MADAGASCAR</option><option value="155">MALAISIE</option><option value="153">MALAWI</option><option value="152">MALDIVES</option><option value="142">MALI</option><option value="150">MALTE</option><option value="146">MARIANNES DU NORD, ÎLES</option><option value="136">MAROC</option><option value="140">MARSHALL, ÎLES</option><option value="147">MARTINIQUE</option><option value="151">MAURICE</option><option value="148">MAURITANIE</option><option value="241">MAYOTTE</option><option value="154">MEXIQUE</option><option value="71">MICRONÉSIE, ÉTATS FÉDÉRÉS DE</option><option value="138">MOLDOVA, RÉPUBLIQUE DE</option><option value="137">MONACO</option><option value="144">MONGOLIE</option><option value="247">MONTÉNÉGRO</option><option value="149">MONTSERRAT</option><option value="156">MOZAMBIQUE</option><option value="143">MYANMAR</option><option value="157">NAMIBIE</option><option value="166">NAURU</option><option value="165">NÉPAL</option><option value="162">NICARAGUA</option><option value="159">NIGER</option><option value="161">NIGÉRIA</option><option value="167">NIUÉ</option><option value="160">NORFOLK, ÎLE</option><option value="164">NORVÈGE</option><option value="158">NOUVELLE-CALÉDONIE</option><option value="168">NOUVELLE-ZÉLANDE</option><option value="105">OCÉAN INDIEN, TERRITOIRE BRITANNIQUE DE L\'</option><option value="169">OMAN</option><option value="226">OUGANDA</option><option value="230">OUZBÉKISTAN</option><option value="175">PAKISTAN</option><option value="182">PALAOS</option><option value="180">PALESTINIEN OCCUPÉ, TERRITOIRE</option><option value="170">PANAMA</option><option value="173">PAPOUASIE-NOUVELLE-GUINÉE</option><option value="183">PARAGUAY</option><option value="163">PAYS-BAS</option><option value="171">PÉROU</option><option value="174">PHILIPPINES</option><option value="178">PITCAIRN</option><option value="176">POLOGNE</option><option value="172">POLYNÉSIE FRANÇAISE</option><option value="179">PORTO RICO</option><option value="181">PORTUGAL</option><option value="184">QATAR</option><option value="185">RÉUNION</option><option value="186">ROUMANIE</option><option value="76">ROYAUME-UNI</option><option value="187">RUSSIE, FÉDÉRATION DE</option><option value="188">RWANDA</option><option value="64">SAHARA OCCIDENTAL</option><option value="248">SAINT-BARTHÉLEMY</option><option value="119">SAINT-KITTS-ET-NEVIS</option><option value="200">SAINT-MARIN</option><option value="249">SAINT-MARTIN</option><option value="177">SAINT-PIERRE-ET-MIQUELON</option><option value="231">SAINT-SIÈGE (ÉTAT DE LA CITÉ DU VATICAN)</option><option value="232">SAINT-VINCENT-ET-LES GRENADINES</option><option value="195">SAINTE-HÉLÈNE</option><option value="127">SAINTE-LUCIE</option><option value="190">SALOMON, ÎLES</option><option value="239">SAMOA</option><option value="12">SAMOA AMÉRICAINES</option><option value="204">SAO TOMÉ-ET-PRINCIPE</option><option value="201">SÉNÉGAL</option><option value="250">SERBIE</option><option value="191">SEYCHELLES</option><option value="199">SIERRA LEONE</option><option value="194">SINGAPOUR</option><option value="198">SLOVAQUIE</option><option value="196">SLOVÉNIE</option><option value="202">SOMALIE</option><option value="192">SOUDAN</option><option value="129">SRI LANKA</option><option value="193">SUÈDE</option><option value="41">SUISSE</option><option value="203">SURINAME</option><option value="197">SVALBARD ET ÎLE JAN MAYEN</option><option value="207">SWAZILAND</option><option value="206">SYRIENNE, RÉPUBLIQUE ARABE</option><option value="213">TADJIKISTAN</option><option value="223">TAÏWAN, PROVINCE DE CHINE</option><option value="224">TANZANIE, RÉPUBLIQUE-UNIE DE</option><option value="209">TCHAD</option><option value="54">TCHÈQUE, RÉPUBLIQUE</option><option value="210">TERRES AUSTRALES FRANÇAISES</option><option value="212">THAÏLANDE</option><option value="215">TIMOR-LESTE</option><option value="211">TOGO</option><option value="214">TOKELAU</option><option value="218">TONGA</option><option value="221">TRINITÉ-ET-TOBAGO</option><option value="217">TUNISIE</option><option value="216">TURKMÉNISTAN</option><option value="208">TURKS ET CAÏQUES, ÎLES</option><option value="220">TURQUIE</option><option value="222">TUVALU</option><option value="225">UKRAINE</option><option value="229">URUGUAY</option><option value="237">VANUATU</option><option value="233">VENEZUELA</option><option value="236">VIET NAM</option><option value="238">WALLIS ET FUTUNA</option><option value="240">YÉMEN</option><option value="244">ZAMBIE</option><option value="245">ZIMBABWE</option><option value="246">ÅLAND, ÎLES</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Francos de port pour le pays concerné</label><div class="input-group"><span class="input-group-addon" id="basic-addon3">Gratuit à partir de</span> <input class="form-control" value="300,00" placeholder="—"> <span class="input-group-addon" id="basic-addon2">€TCC d\'achat</span></div></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Délai de livraison pour le pays concerné</label><input class="form-control" id="exmemple1" placeholder="3 jours, 1 semaine..."></div></div></div><div class="row"><div class="col-xs-4"><label class="control-label" for="exmemple1">Tranche de poids</label></div><div class="col-xs-3"><label class="control-label" for="exmemple1">Frais du port</label></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item no-hover"><a href="">Ajouter une tranche pour le pays concerné</a></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete">Supprimer</button> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],153:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>Colissimo Entreprise est une solution de livraison multiples (points relais, sur rendez-vous, etc.) de la Poste. Pour plus d\'informations, <a href="https://www.colissimo.entreprise.laposte.fr/fr" target="_blank">rendez-vous sur le site officiel</a> ou contactez un conseiller la Poste au 3634.</p><p>Afin de configurer correctement ce mode de livraison vous devez :</p><ol><li>Allez sur le site de la Poste et <a href="https://www.colissimo.entreprise.laposte.fr/fr" target="_blank">vous ouvrir un compte</a></li><li>Configurez l\'outil de gestion de compte fourni par la Poste en indiquant les URL de retour sur le site marchand :<br><br>Lorsque le client a sélectionné son mode de livraison (Validation) :<br><strong>'+(null==(__t=domain)?"":_.escape(__t))+"/ecommerce/socolissimo.html</strong><br><br>Lorsque le client n'a pas pu sélectionner son mode de livraison (Echec) :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/socolissimo.html</strong><br><br></li><li>Complètez le formulaire ci-dessous et activez le transporteur</li></ol><p><strong class="text-danger">Il est indispensable d\'effectuer au moins une commande avec ce transporteur</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="exmemple1">Intitulé du transporteur</label><input class="form-control" id="exmemple1" placeholder="Intitulé du transporteur tel qu\'il apparaîtra dans le choix de la livraison"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Transporteur par défaut</label><div class="radio-group"><input name="Transporteur" id="Transporteur1" value="option1" checked="checked" type="radio"><label for="Transporteur1">Oui</label><input name="Transporteur" id="Transporteur0" value="option1" type="radio"><label for="Transporteur0">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres de configuration</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="exmemple1">Identifiant FO</label><input class="form-control" id="exmemple1" placeholder="14 chiffres fournis par La Poste dans l\'outil de gestion de compte"></div><div class="form-group"><label class="control-label required" for="exmemple1">Clé de cryptage</label><input class="form-control" id="exmemple1" placeholder="12 chiffres fournis par La Poste dans l\'outil de gestion de compte"></div><div class="form-group"><label class="control-label" for="">Remise contre signature</label><p>Proposé uniquement lorsque l\'internaute choisit une livraison à domicile.</p><div class="radio-group"><input name="Transporteur" id="Transporteur1" value="option1" checked="checked" type="radio"><label for="Transporteur1">Oui</label><input name="Transporteur" id="Transporteur0" value="option1" type="radio"><label for="Transporteur0">Non</label></div></div><div class="form-group"><label class="control-label" for="exmemple1">Nom commercial du chargeur</label><p>Utilisé pour l\'export vers le logiciel Expeditor INET.</p><input class="form-control" id="exmemple1" placeholder="La valeur renseignée se substitue à celle configurée dans l\'outil de gestion de compte"></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations complémentaires</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Description</label><textarea class="form-control" rows="5" placeholder="Description du transporteur telle qu\'elle apparaîtra dans le choix de la livraison"></textarea></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Montant de commande minimum</label><div class="input-group"><span class="input-group-addon" id="basic-addon3">Actif à partir de</span> <input class="form-control" value="300,00" placeholder="1,00"> <span class="input-group-addon" id="basic-addon2">€TCC d\'achat</span></div></div></div><div class="clearfix"></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Francos de port</label><div class="input-group"><span class="input-group-addon" id="basic-addon3">Gratuit à partir de</span> <input class="form-control" value="300,00" placeholder="—"> <span class="input-group-addon" id="basic-addon2">€TCC d\'achat</span></div></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Délai de livraison</label><input class="form-control" id="exmemple1" placeholder="3 jours, 1 semaine..."></div></div><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Taxe</label><select class="form-control" ic="exmemple3"><option selected="selected">20,00%</option><option>5,50%</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Livraison vers la France Métropolitaine, Andorre et Monaco</h1></header><div class="post-content post-list"><div class="row"><div class="col-xs-4"><label class="control-label" for="exmemple1">Tranche de poids</label></div><div class="col-xs-3"><label class="control-label" for="exmemple1">Frais du port</label></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item no-hover"><a href="">Ajouter une tranche de poids</a></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Livraison en Point Relais</h1></header><div class="post-content post-list"><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Francos de port</label><div class="input-group"><span class="input-group-addon" id="basic-addon3">Gratuit à partir de</span> <input class="form-control" value="300,00" placeholder="—"> <span class="input-group-addon" id="basic-addon2">€TCC d\'achat</span></div></div></div></div><div class="row"><div class="col-xs-4"><label class="control-label" for="exmemple1">Tranche de poids</label></div><div class="col-xs-3"><label class="control-label" for="exmemple1">Frais du port</label></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item-empty">Tranches de poids et tarifs identiques à la livraison en France</div><div class="list-item no-hover"><a href="">Ajouter une tranche de poids</a></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Livraison vers la Belgique</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Montant du surcout</label><p>Le montant doit être égale à celui configuré dans l\'outil de gestion de compte de la Poste.</p><div class="row"><div class="col-xs-6"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="300,00" placeholder="1,00"> <span class="input-group-addon" id="basic-addon2">€TCC d\'achat</span></div></div></div></div><div class="form-group"><label class="control-label" for="">Autoriser la livraison vers la Belgique</label><div class="radio-group"><input name="Transporteur" id="Transporteur1" value="option1" checked="checked" type="radio"><label for="Transporteur1">Oui</label><input name="Transporteur" id="Transporteur0" value="option1" type="radio"><label for="Transporteur0">Non</label></div></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/checkout/carriers">Retour</a> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],154:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/Commandes/frais-de-port.html" class="md-icon md-help pull-right" target="_blank"></a> Un transporteur local est défini pour une livraison à l\'adresse indiquée dans une commande. Les frais de port sont calculés en fonction du <strong>code postal</strong> de livraison, par <strong>tranche de poids</strong>.</div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="exmemple1">Intitulé du transporteur</label><input class="form-control" id="exmemple1" placeholder="Intitulé du transporteur tel qu\'il apparaîtra dans le choix de la livraison"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Transporteur par défaut</label><div class="radio-group"><input name="Transporteur" id="Transporteur1" value="option1" checked="checked" type="radio"><label for="Transporteur1">Oui</label><input name="Transporteur" id="Transporteur0" value="option1" type="radio"><label for="Transporteur0">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations complémentaires</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Description</label><textarea class="form-control" rows="5" placeholder="Description du transporteur telle qu\'elle apparaîtra dans le choix de la livraison"></textarea></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Montant de commande minimum</label><div class="input-group"><span class="input-group-addon" id="basic-addon3">Actif à partir de</span> <input class="form-control" value="300,00" placeholder="1,00"> <span class="input-group-addon" id="basic-addon2">€TCC d\'achat</span></div></div></div><div class="clearfix"></div><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Taxe</label><select class="form-control" ic="exmemple3"><option selected="selected">20,00%</option><option>5,50%</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Plannification de la date de retrait</h1></header><div class="post-content"><p>La plannification de la date de retrait permet de proposer le choix d\'une date et d\'une heure auxquelles les commandes peuvent être retirées en magasin.</p><div class="row"><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Plannification</label><select class="form-control" ic="exmemple3"><option>Désactivée</option><option>Activée sans plage horaire</option><option selected="selected">Activée avec plages horaires</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Lundi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Mardi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Mercredi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Jeudi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Vendredi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Samedi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Dimanche</label><select class="form-control" ic="exmemple3"><option selected="selected">Fermé</option><option>Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><hr style="margin-top: 0"><div class="form-group"><label class="control-label" for="exmemple1">Jours de fermeture exceptionelle</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 20 dates (jj/mm/aaaa) séparées par des virgules (ex. : 01/05/2017,14/07/2017,01/08/2018)"></div><label class="control-label" for="exmemple1">Heure de bascule</label><p>Heure à partir de laquelle les commandes ne peuvent être retirées que le prochain jour ouvré.</p><div class="row"><div class="col-xs-3"><div class="form-group"><input class="form-control" id="exmemple1" placeholder="ex. : 14h45"></div></div></div><label class="control-label" for="exmemple1">Délai minimal avant de pouvoir retirer les commandes</label><div class="row"><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="stockout_threshold" placeholder="0"> <span class="input-group-addon">jour(s)</span></div></div></div></div><label class="control-label" for="exmemple1">Délai maximal pour pouvoir retirer les commandes</label><div class="row"><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="stockout_threshold" placeholder="—"> <span class="input-group-addon">jour(s)</span></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header no-border"><h1>Zones livrables</h1></header><div class="post-content post-list"><div class="post-group"><div class="form-group has-feedback"><a href="#" class="md-icon md-delete pull-right"></a>&nbsp;<a href="#" class="md-icon md-edit pull-right"></a><label class="control-label" for="exmemple3">Zone concernée</label><select class="form-control" ic="exmemple3"><option value="73" selected="selected">68000, 67000</option><option value="73">65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000, 65000</option></select><div class="form-control-feedback md-feedback md-select"></div></div><p style="margin-top: -15px"><a href="">Ajouter une zone</a></p><div class="form-group has-feedback"><label class="control-label" for="exmemple1">Codes postaux</label><input class="form-control" id="exmemple1" placeholder="Rechercher et ajouter jusqu\'à 20 codes postaux par zone"> <span class="form-control-feedback md-feedback md-search"></span> <span class="label label-default label-list">68000<span class="md-icon md-close"></span></span> <span class="label label-default label-list">67000<span class="md-icon md-close"></span></span></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action">Enregistrer</button></div></div></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Francos de port pour la zone concernée</label><div class="input-group"><span class="input-group-addon" id="basic-addon3">Gratuit à partir de</span> <input class="form-control" value="300,00" placeholder="—"> <span class="input-group-addon" id="basic-addon2">€TCC d\'achat</span></div></div></div></div><div class="row"><div class="col-xs-4"><label class="control-label" for="exmemple1">Tranche de poids</label></div><div class="col-xs-3"><label class="control-label" for="exmemple1">Frais du port</label></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="300" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="10,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="12,00" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item list-item-form"><div class="row"><div class="col-xs-4"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">Jusqu\'à</span> <input class="form-control" value="" placeholder="—"> <span class="input-group-addon" id="basic-addon2">Kg</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€HT</span></div></div></div><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" value="" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div></div><div class="col-xs-2"><a href="#" class="md-icon md-delete pull-right"></a></div></div></div><div class="list-item no-hover"><a href="">Ajouter une tranche pour la zone concernée</a></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete">Supprimer</button> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],155:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert">Le retrait en boutique est disponible pour défaut pour toutes les commandes. Le retrait en boutique est <strong>toujours gratuit</strong>.</div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="exmemple1">Intitulé de l\'option</label><input class="form-control" id="exmemple1" placeholder="Intitulé de l\'option tel qu\'il apparaîtra dans le choix de la livraison"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Transporteur par défaut</label><div class="radio-group"><input name="Transporteur" id="Transporteur1" value="option1" checked="checked" type="radio"><label for="Transporteur1">Oui</label><input name="Transporteur" id="Transporteur0" value="option1" type="radio"><label for="Transporteur0">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Adresse de la boutique</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Description</label><textarea class="form-control" rows="5" placeholder="Description de l\'option telle qu\'elle apparaîtra dans le choix de la livraison">Vous pouvez retirer votre commande directement à notre magasin à l\'adresse suivante :</textarea></div><div class="form-group"><label class="control-label" for="exmemple1">Société</label><input class="form-control" id="exmemple1" placeholder="Raison sociale de la société"></div><div class="form-group"><label class="control-label required" for="exmemple1">Adresse</label><input class="form-control" id="exmemple1" placeholder="Numéro, rue, bâtiment, étage, ..."></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label required" for="exmemple1">Code postal</label><input class="form-control" id="exmemple1" value=""></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label required" for="exmemple1">Ville</label><input class="form-control" id="exmemple1" value=""></div></div><div class="col-xs-4"><div class="form-group has-feedback"><label class="control-label required" for="exmemple3">Pays</label><select class="form-control" ic="exmemple3"><optgroup label="Union européenne"></optgroup><option value="73" selected="selected">FRANCE METROPOLITAINE</option><option value="55">ALLEMAGNE</option><option value="13">AUTRICHE</option><option value="20">BELGIQUE</option><option value="22">BULGARIE</option><option value="53">CHYPRE</option><option value="57">DANEMARK</option><option value="66">ESPAGNE</option><option value="62">ESTONIE</option><option value="68">FINLANDE</option><option value="88">GRÈCE</option><option value="99">HONGRIE</option><option value="101">IRLANDE</option><option value="109">ITALIE</option><option value="134">LETTONIE</option><option value="132">LITUANIE</option><option value="133">LUXEMBOURG</option><option value="150">MALTE</option><option value="163">PAYS-BAS</option><option value="176">POLOGNE</option><option value="181">PORTUGAL</option><option value="186">ROUMANIE</option><option value="76">ROYAUME-UNI</option><option value="198">SLOVAQUIE</option><option value="196">SLOVÉNIE</option><option value="193">SUÈDE</option><option value="54">TCHÈQUE, RÉPUBLIQUE</option><optgroup label="Autres Pays"></optgroup><option value="3">AFGHANISTAN</option><option value="243">AFRIQUE DU SUD</option><option value="6">ALBANIE</option><option value="60">ALGÉRIE</option><option value="1">ANDORRE</option><option value="9">ANGOLA</option><option value="5">ANGUILLA</option><option value="10">ANTARCTIQUE</option><option value="4">ANTIGUA-ET-BARBUDA</option><option value="8">ANTILLES NÉERLANDAISES</option><option value="189">ARABIE SAOUDITE</option><option value="11">ARGENTINE</option><option value="7">ARMÉNIE</option><option value="15">ARUBA</option><option value="14">AUSTRALIE</option><option value="16">AZERBAÏDJAN</option><option value="30">BAHAMAS</option><option value="23">BAHREÏN</option><option value="19">BANGLADESH</option><option value="18">BARBADE</option><option value="34">BÉLARUS</option><option value="35">BELIZE</option><option value="25">BÉNIN</option><option value="26">BERMUDES</option><option value="31">BHOUTAN</option><option value="28">BOLIVIE</option><option value="17">BOSNIE-HERZÉGOVINE</option><option value="33">BOTSWANA</option><option value="32">BOUVET, ÎLE</option><option value="29">BRÉSIL</option><option value="27">BRUNÉI DARUSSALAM</option><option value="21">BURKINA FASO</option><option value="24">BURUNDI</option><option value="123">CAÏMANES, ÎLES</option><option value="116">CAMBODGE</option><option value="45">CAMEROUN</option><option value="36">CANADA</option><option value="51">CAP-VERT</option><option value="39">CENTRAFRICAINE, RÉPUBLIQUE</option><option value="44">CHILI</option><option value="46">CHINE</option><option value="52">CHRISTMAS, ÎLE</option><option value="37">COCOS (KEELING), ÎLES</option><option value="47">COLOMBIE</option><option value="118">COMORES</option><option value="40">CONGO</option><option value="38">CONGO, LA RÉPUBLIQUE DÉMOCRATIQUE DU</option><option value="43">COOK, ÎLES</option><option value="121">CORÉE, RÉPUBLIQUE DE</option><option value="120">CORÉE, RÉPUBLIQUE POPULAIRE DÉMOCRATIQUE DE</option><option value="48">COSTA RICA</option><option value="42">CÔTE D\'IVOIRE</option><option value="97">CROATIE</option><option value="50">CUBA</option><option value="56">DJIBOUTI</option><option value="59">DOMINICAINE, RÉPUBLIQUE</option><option value="58">DOMINIQUE</option><option value="63">ÉGYPTE</option><option value="205">EL SALVADOR</option><option value="2">ÉMIRATS ARABES UNIS</option><option value="61">ÉQUATEUR</option><option value="65">ÉRYTHRÉE</option><option value="228">ÉTATS-UNIS</option><option value="67">ÉTHIOPIE</option><option value="70">FALKLAND, ÎLES (MALVINAS)</option><option value="72">FÉROÉ, ÎLES</option><option value="69">FIDJI</option><option value="75">GABON</option><option value="84">GAMBIE</option><option value="78">GÉORGIE</option><option value="89">GÉORGIE DU SUD ET LES ÎLES SANDWICH DU SUD</option><option value="81">GHANA</option><option value="82">GIBRALTAR</option><option value="77">GRENADE</option><option value="83">GROENLAND</option><option value="86">GUADELOUPE</option><option value="91">GUAM</option><option value="90">GUATEMALA</option><option value="80">GUERNESEY</option><option value="85">GUINÉE</option><option value="87">GUINÉE ÉQUATORIALE</option><option value="92">GUINÉE-BISSAU</option><option value="93">GUYANA</option><option value="79">GUYANE FRANÇAISE</option><option value="98">HAÏTI</option><option value="95">HEARD, ÎLE ET MCDONALD, ÎLES</option><option value="96">HONDURAS</option><option value="94">HONG-KONG</option><option value="103">ÎLE DE MAN</option><option value="227">ÎLES MINEURES ÉLOIGNÉES DES ÉTATS-UNIS</option><option value="234">ÎLES VIERGES BRITANNIQUES</option><option value="235">ÎLES VIERGES DES ÉTATS-UNIS</option><option value="104">INDE</option><option value="100">INDONÉSIE</option><option value="107">IRAN, RÉPUBLIQUE ISLAMIQUE D\'</option><option value="106">IRAQ</option><option value="108">ISLANDE</option><option value="102">ISRAËL</option><option value="111">JAMAÏQUE</option><option value="113">JAPON</option><option value="110">JERSEY</option><option value="112">JORDANIE</option><option value="124">KAZAKHSTAN</option><option value="114">KENYA</option><option value="115">KIRGHIZISTAN</option><option value="117">KIRIBATI</option><option value="122">KOWEÏT</option><option value="125">LAO, RÉPUBLIQUE DÉMOCRATIQUE POPULAIRE</option><option value="131">LESOTHO</option><option value="126">LIBAN</option><option value="130">LIBÉRIA</option><option value="135">LIBYENNE, JAMAHIRIYA ARABE</option><option value="128">LIECHTENSTEIN</option><option value="145">MACAO</option><option value="141">MACÉDOINE, L\'EX-RÉPUBLIQUE YOUGOSLAVE DE</option><option value="139">MADAGASCAR</option><option value="155">MALAISIE</option><option value="153">MALAWI</option><option value="152">MALDIVES</option><option value="142">MALI</option><option value="146">MARIANNES DU NORD, ÎLES</option><option value="136">MAROC</option><option value="140">MARSHALL, ÎLES</option><option value="147">MARTINIQUE</option><option value="151">MAURICE</option><option value="148">MAURITANIE</option><option value="241">MAYOTTE</option><option value="154">MEXIQUE</option><option value="71">MICRONÉSIE, ÉTATS FÉDÉRÉS DE</option><option value="138">MOLDOVA, RÉPUBLIQUE DE</option><option value="137">MONACO</option><option value="144">MONGOLIE</option><option value="247">MONTÉNÉGRO</option><option value="149">MONTSERRAT</option><option value="156">MOZAMBIQUE</option><option value="143">MYANMAR</option><option value="157">NAMIBIE</option><option value="166">NAURU</option><option value="165">NÉPAL</option><option value="162">NICARAGUA</option><option value="159">NIGER</option><option value="161">NIGÉRIA</option><option value="167">NIUÉ</option><option value="160">NORFOLK, ÎLE</option><option value="164">NORVÈGE</option><option value="158">NOUVELLE-CALÉDONIE</option><option value="168">NOUVELLE-ZÉLANDE</option><option value="105">OCÉAN INDIEN, TERRITOIRE BRITANNIQUE DE L\'</option><option value="169">OMAN</option><option value="226">OUGANDA</option><option value="230">OUZBÉKISTAN</option><option value="175">PAKISTAN</option><option value="182">PALAOS</option><option value="180">PALESTINIEN OCCUPÉ, TERRITOIRE</option><option value="170">PANAMA</option><option value="173">PAPOUASIE-NOUVELLE-GUINÉE</option><option value="183">PARAGUAY</option><option value="171">PÉROU</option><option value="174">PHILIPPINES</option><option value="178">PITCAIRN</option><option value="172">POLYNÉSIE FRANÇAISE</option><option value="179">PORTO RICO</option><option value="184">QATAR</option><option value="185">RÉUNION</option><option value="187">RUSSIE, FÉDÉRATION DE</option><option value="188">RWANDA</option><option value="64">SAHARA OCCIDENTAL</option><option value="248">SAINT-BARTHÉLEMY</option><option value="119">SAINT-KITTS-ET-NEVIS</option><option value="200">SAINT-MARIN</option><option value="249">SAINT-MARTIN</option><option value="177">SAINT-PIERRE-ET-MIQUELON</option><option value="231">SAINT-SIÈGE (ÉTAT DE LA CITÉ DU VATICAN)</option><option value="232">SAINT-VINCENT-ET-LES GRENADINES</option><option value="195">SAINTE-HÉLÈNE</option><option value="127">SAINTE-LUCIE</option><option value="190">SALOMON, ÎLES</option><option value="239">SAMOA</option><option value="12">SAMOA AMÉRICAINES</option><option value="204">SAO TOMÉ-ET-PRINCIPE</option><option value="201">SÉNÉGAL</option><option value="250">SERBIE</option><option value="191">SEYCHELLES</option><option value="199">SIERRA LEONE</option><option value="194">SINGAPOUR</option><option value="202">SOMALIE</option><option value="192">SOUDAN</option><option value="129">SRI LANKA</option><option value="41">SUISSE</option><option value="203">SURINAME</option><option value="197">SVALBARD ET ÎLE JAN MAYEN</option><option value="207">SWAZILAND</option><option value="206">SYRIENNE, RÉPUBLIQUE ARABE</option><option value="213">TADJIKISTAN</option><option value="223">TAÏWAN, PROVINCE DE CHINE</option><option value="224">TANZANIE, RÉPUBLIQUE-UNIE DE</option><option value="209">TCHAD</option><option value="210">TERRES AUSTRALES FRANÇAISES</option><option value="212">THAÏLANDE</option><option value="215">TIMOR-LESTE</option><option value="211">TOGO</option><option value="214">TOKELAU</option><option value="218">TONGA</option><option value="221">TRINITÉ-ET-TOBAGO</option><option value="217">TUNISIE</option><option value="216">TURKMÉNISTAN</option><option value="208">TURKS ET CAÏQUES, ÎLES</option><option value="220">TURQUIE</option><option value="222">TUVALU</option><option value="225">UKRAINE</option><option value="229">URUGUAY</option><option value="237">VANUATU</option><option value="233">VENEZUELA</option><option value="236">VIET NAM</option><option value="238">WALLIS ET FUTUNA</option><option value="240">YÉMEN</option><option value="244">ZAMBIE</option><option value="245">ZIMBABWE</option><option value="246">ÅLAND, ÎLES</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Plannification de la date de retrait</h1></header><div class="post-content"><p>La plannification de la date de retrait permet de proposer le choix d\'une date et d\'une heure auxquelles les commandes peuvent être retirées en magasin.</p><div class="row"><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Plannification</label><select class="form-control" ic="exmemple3"><option>Désactivée</option><option>Activée sans plage horaire</option><option selected="selected">Activée avec plages horaires</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Lundi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Mardi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Mercredi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Jeudi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Vendredi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Samedi</label><select class="form-control" ic="exmemple3"><option>Fermé</option><option selected="selected">Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Dimanche</label><select class="form-control" ic="exmemple3"><option selected="selected">Fermé</option><option>Ouvert</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-9"><div class="form-group"><label class="control-label required" for="exmemple1">Heures d\'ouverture</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 4 plages horaires (hh-hh) séparées par des virgules (ex. : 9-12,14-18)"></div></div></div><hr style="margin-top: 0"><div class="form-group"><label class="control-label" for="exmemple1">Jours de fermeture exceptionelle</label><input class="form-control" id="exmemple1" placeholder="Jusqu\'à 20 dates (jj/mm/aaaa) séparées par des virgules (ex. : 01/05/2017,14/07/2017,01/08/2018)"></div><label class="control-label" for="exmemple1">Heure de bascule</label><p>Heure à partir de laquelle les commandes ne peuvent être retirées que le prochain jour ouvré.</p><div class="row"><div class="col-xs-3"><div class="form-group"><input class="form-control" id="exmemple1" placeholder="ex. : 14h45"></div></div></div><label class="control-label" for="exmemple1">Délai minimal avant de pouvoir retirer les commandes</label><div class="row"><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="stockout_threshold" placeholder="0"> <span class="input-group-addon">jour(s)</span></div></div></div></div><label class="control-label" for="exmemple1">Délai maximal pour pouvoir retirer les commandes</label><div class="row"><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="stockout_threshold" placeholder="—"> <span class="input-group-addon">jour(s)</span></div></div></div></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/checkout/carriers">Retour</a> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],156:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert">Vous pouvez créer et activer plusieurs transporteurs : <strong>le retrait en boutique</strong>, les solutions <strong>Colissimo Entreprise de la Poste</strong> et des transporteurs personnalisés pour des <strong>livraisons nationales</strong> (par pays) ou pour des <strong>livraisons locales</strong> (par codes postaux).</div><article class="post-article"><header class="post-header"><h1>Liste des transporteurs</h1></header><div class="post-content post-list"><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Retrait en boutique</h4>Commande à récupérer à l\'adresse de la boutique</div></div></div><div class="col-xs-2"><span class="label label-enable">Activé</span></div><div class="col-xs-3"><a class="btn btn-option pull-right" href="/checkout/carriers/shop" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Colissimo Entreprise de la Poste</h4>Options de livraison multiples (points relais, sur rendez-vous, etc.)</div></div></div><div class="col-xs-2"><span class="label label-disable">Désactivé</span></div><div class="col-xs-3"><a class="btn btn-option pull-right" href="/checkout/carriers/laposte" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Colissimo (envoi standard)</h4>Commande envoyée à l\'adresse de livraison (nationale)</div></div></div><div class="col-xs-2"><span class="label label-enable">Par défaut</span></div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/checkout/carriers/1234" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#">Supprimer</a></li></ul></div></div></div></div><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Livraison locale</h4>Commande envoyée à l\'adresse de livraison (locale)</div></div></div><div class="col-xs-2"><span class="label label-enable">Par défaut</span></div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/checkout/carriers/local/1234" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#">Supprimer</a></li></ul></div></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],157:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/recherche/catalogue/tags:Traitement%20des%20commandes/" class="md-icon md-help pull-right" target="_blank"></a> Avant de traiter une commande, <strong>vous devez vérifier auprès de votre établissement bancaire que la transaction correspondante</strong> a bien été acceptée.</div><article class="post-article"><header class="post-header"><h1>Liste des commandes</h1><div class="form-inline"><div class="checkbox-inline"><input id="inlineCheckboxTest10" value="option1" type="checkbox"><label for="inlineCheckboxTest10"></label></div><div class="btn-group" role="group"><button type="button" class="btn btn-option">Est En cours</button> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu"><li><a href="#">Est À traiter</a></li><li><a href="#">Est Traitée</a></li><li><a href="#">Est Expédiée</a></li><li><a href="#">Est Annulée</a></li><li><a href="#">Est Payée</a></li><li><a href="#">Est À payer</a></li></ul></div><div class="form-group has-feedback"><select class="form-control select-state" ic="exmemple3"><option selected="selected">Statuts</option><option>Payée</option><option>À payer</option></select><div class="form-control-feedback md-feedback md-select"></div></div><div class="form-group has-feedback"><select class="form-control select-state" ic="exmemple3"><option selected="selected">Livraison</option><option>À livrer</option><option>À retirer</option></select><div class="form-control-feedback md-feedback md-select"></div></div><div class="btn-group"><button type="button" class="btn btn-icon md-icon md-export dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu"><li><a href="#">Exporter en PDF</a></li><li><a href="#">Exporter en XLS</a></li><li><a href="#">Exporter vers Expeditor INET</a></li></ul></div><div class="btn-group"><button type="button" onclick="changeclass(popup)" class="btn btn-icon md-icon md-filter"></button></div><div class="btn-group pull-right"><button type="button" class="btn btn-icon md-icon md-sort dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu"><li class="active"><a href="#">Date</a></li><li><a href="#">Livraison/retrait</a></li><li><a href="#">Montant</a></li><li><a href="#">Modification</a></li></ul></div></div></header><div class="post-content post-list"><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="inlineCheckboxTest11" value="option1" type="checkbox"><label for="inlineCheckboxTest11"></label></div></div><div class="media-body"><h4>C1608251</h4>Le 25/08/2016 à 18h03 par <a href="#">Marc BEYER</a></div></div></div><div class="col-xs-3"><span class="label label-paid">Payée par carte</span></div><div class="col-xs-2"><span class="price">20,00€TTC<br></span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="inlineCheckboxTest11" value="option1" type="checkbox"><label for="inlineCheckboxTest11"></label></div></div><div class="media-body"><h4>C1608251</h4>À retirer par <a href="#">Marc BEYER</a> le 25/08/2016 à 18h00</div></div></div><div class="col-xs-3"><span class="label label-payable">À payer par chèque</span></div><div class="col-xs-2"><span class="price">20,00€TTC<br></span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="inlineCheckboxTest11" value="option1" type="checkbox"><label for="inlineCheckboxTest11"></label></div></div><div class="media-body"><h4>C1608251</h4>À livrer à <a href="#">Marc BEYER</a> le 25/08/2016 à 18h00</div></div></div><div class="col-xs-3"><span class="label label-paid">Payée par chèque</span></div><div class="col-xs-2"><span class="price">20,00€TTC<br></span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="inlineCheckboxTest11" value="option1" type="checkbox"><label for="inlineCheckboxTest11"></label></div></div><div class="media-body"><h4>C1608251</h4>Le 25/08/2016 à 18h03 par <a href="#">Marc BEYER</a></div></div></div><div class="col-xs-3"><span class="label label-paid">Payée par virement</span></div><div class="col-xs-2"><span class="price">20,00€TTC<br></span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Détail</a></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],158:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Type d\'option</label><p>Option simple sous la forme d\'une case à cocher pour y souscire dans le détail du panier.</p><p>Zone de texte permettant d\'ajouter un commentaire si l\'option est souscrite dans le détail du panier.</p><p>Liste de valeurs prédéterminées sélectionnables si l\'option est souscrite dans le détail du panier.</p></div><div class="form-group"><label class="control-label" for="">Affichage</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Visible</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Masqué</label></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Intitulé de l\'option</label><input class="form-control" id="exmemple1" placeholder="Intitulé de l\'option tel qu\'il apparaîtra dans le détail du panier"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="exmemple2">Prix HT</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" placeholder="Gratuit"> <span class="input-group-addon">€</span></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="exmemple2">Prix TTC</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" placeholder="Gratuit"> <span class="input-group-addon">€</span></div></div></div><div class="col-xs-4"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Taxe</label><select class="form-control" ic="exmemple3"><option selected="selected">20,00%</option><option>5,50%</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Liste des valeurs</label><input class="form-control" id="exmemple1" placeholder="Valeur 1, Valeur 2, Valeur 3, ..."></div><div class="form-group"><label class="control-label" for="exmemple1">Description</label><textarea class="form-control" rows="5" placeholder="Description de l\'option telle qu\'elle apparaîtra dans le détail du panier"></textarea></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete">Supprimer</button> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],159:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert">Les options sont proposées dans le détail du panier d\'achat. Elles peuvent être <strong>payantes</strong> ou <strong>gratuites</strong>, sous la forme d\'une simple <strong>case à cocher</strong>, d\'une <strong>zone de texte</strong> permettant de laisser un commentaire ou d\'une <strong>liste de valeurs</strong> prédéterminées.</div><article class="post-article"><header class="post-header"><h1>Liste des options</h1></header><div class="post-content post-list"><div class="list-item"><div class="row"><div class="col-xs-6"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Intitulé de l\'option</h4>Option simple</div></div></div><div class="col-xs-3">Gratuit</div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="http://www.google.com" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#">Supprimer</a></li></ul></div></div></div></div><div class="list-item"><div class="row"><div class="col-xs-6"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Intitulé de l\'option</h4>Zone texte</div></div></div><div class="col-xs-3">Gratuit</div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="http://www.google.com" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#">Supprimer</a></li></ul></div></div></div></div><div class="list-item"><div class="row"><div class="col-xs-6"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Intitulé de l\'option</h4>Liste de valeurs</div></div></div><div class="col-xs-3">19,00€TTC</div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="http://www.google.com" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#">Supprimer</a></li></ul></div></div></div></div><div class="list-item"><div class="row"><div class="col-xs-6"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Intitulé de l\'option</h4><span class="text-danger">Masqué</span></div></div></div><div class="col-xs-3">19,00€TTC</div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="http://www.google.com" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#">Supprimer</a></li></ul></div></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],160:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-8"><article class="post-article order-detail"><header class="post-header"><div class="form-inline">La commande est<div class="form-group has-feedback"><select class="form-control" ic="exmemple3"><option>Payée</option><option>À payer</option></select><div class="form-control-feedback md-feedback md-select"></div></div>et<div class="form-group has-feedback"><select class="form-control" ic="exmemple3"><option>À traiter</option><option>En cours</option><option>Traitée</option><option>Expédiée</option><option>Annulée</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></header><div class="post-content post-list no-hover"><div class="list-item order-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="" src="http://pausegeek.fr/img/news/2016/10/the-lego-batman-movie-poster-001-2017.jpg"></div></div><div class="media-body"><h4><a href="#">Intitulé du produit</a></h4>Intitulé de la variante<br>Réf. : 1234567890</div></div></div><div class="col-xs-3 text-right">300,17€TTC<br>-15,00%</div><div class="col-xs-1">x2</div><div class="col-xs-3 text-right">600,34€TTC</div></div></div><div class="list-item order-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="" src="http://fr.web.img3.acsta.net/videothumbnails/16/11/04/16/27/220962.jpg"></div></div><div class="media-body"><h4><a href="#">Intitulé du produit</a></h4>Intitulé de la variante<br>Réf. : 1234567890</div></div></div><div class="col-xs-3 text-right">300,17€TTC</div><div class="col-xs-1">x21</div><div class="col-xs-3 text-right">600,34€TTC</div></div></div><div class="list-item order-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="" src="http://fr.web.img3.acsta.net/videothumbnails/16/11/04/16/27/220962.jpg"></div></div><div class="media-body"><h4><a href="#">Intitulé du produit téléchargeable</a></h4>Intitulé de la variante<br>Réf. : 1234567890<br><a href="#">Télécharger</a><br></div></div></div><div class="col-xs-3 text-right">300,17€TTC</div><div class="col-xs-1">x1</div><div class="col-xs-3 text-right">600,34€TTC</div></div></div><div class="list-item order-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="media-object media-empty"></div></div><div class="media-body"><h4>Intitulé de l\'option</h4>Blabla de l\'option</div></div></div><div class="col-xs-3 text-right">300,17€TTC</div><div class="col-xs-1">x2</div><div class="col-xs-3 text-right">600,34€TTC</div></div></div><div class="list-item order-item"><span class="md-icon md-card-membership icon-left"></span> 200 points de fidélité ajoutés au compte du membre</div><div class="order-total"><div class="row"><div class="col-xs-8 text-right">Total TTC hors frais de port<br>Frais de port<br>dont TVA<br><span class="total">Total TTC</span></div><div class="col-xs-4 text-right">1200,68€<br>8,00€<br>68,67€<br><span class="total">1208,68€</span></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations sur la livraison</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Transporteur</label><p class="form-control-static">So Colissimo</p></div><div class="form-group"><label class="control-label" for="exmemple1">Suivi de colis</label><input class="form-control" id="exmemple1" placeholder="Adresse de suivi sous la forme https://www.adresse-de-suivi.com/"></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Ajouter une note</h1></header><div class="post-content"><div class="form-group"><p>La note est à usage interne et n\'est pas visible sur la commande de l\'acheteur.</p><textarea class="form-control" rows="3"></textarea></div></div><footer class="post-footer"></footer></article></div><div class="col-xs-4"><article class="post-article"><header class="post-header"><h1>À propos de l\'acheteur</h1></header><div class="post-content"><div class="post-subcontent"><a href="#" class="md-icon md-person pull-right"></a><h4>Marc BEYER</h4>00 00 00 00 00<br><a href="#">Contacter par email</a></div><div class="post-subcontent"><a href="#" class="md-icon md-local-shipping pull-right"></a><h4>Adresse de livraison</h4>M Marc Beyer<br>40 rue de la cavalerie<br>68000 Colmar<br>FRANCE METROPOLITAINE<br><br><span class="label label-default">À livrer le 03/09/2017 à 12:00</span></div><div class="post-subcontent"><a href="#" class="md-icon md-place pull-right"></a><h4>Retrait en magasin</h4>Société<br>40 rue de la cavalerie<br>68000 Colmar<br>FRANCE METROPOLITAINE<br><br><span class="label label-default">À retirer le 03/09/2017 à 12:00</span></div><div class="post-subcontent"><a href="#" class="md-icon md-receipt pull-right"></a><h4>Adresse de facturation</h4>M Marc Beyer<br>40 rue de la cavalerie<br>68000 Colmar<br>FRANCE METROPOLITAINE</div><div class="post-subcontent"><a href="#" class="md-icon md-credit_card pull-right"></a><h4>Mode de paiement</h4>Chèque</div></div><footer class="post-footer"></footer></article><article class="post-article order-history"><div class="post-content"><div class="post-subcontent"><span class="md-icon md-history pull-right"></span><h4>Historique</h4><p>La commande est Expédiée<br>le 22/11/2016 à 18h01<br>par Marc Beyer</p><p>Validation du paiement<br>le 22/11/2016 à 18h01<br>par Marc Beyer</p><p>Création de la commande<br>le 25/08/2016 à 18h03</p></div></div><footer class="post-footer"></footer></article></div></div><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-cancel">Annuler</button> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],161:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Liste des commandes</h1></header><div class="post-content post-list"><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-body"><h4>C1608251</h4>Le 25/08/2016 à 18h03 par <a href="#">Marc BEYER</a></div></div></div><div class="col-xs-3"><span class="label label-paid">Payée</span></div><div class="col-xs-2"><span class="price">20,00€<br>Total TTC</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-body"><h4>C1608251</h4>Le 25/08/2016 à 18h03 par <a href="#">Marc BEYER</a></div></div></div><div class="col-xs-3"><span class="label label-payable">À payer</span></div><div class="col-xs-2"><span class="price">20,00€<br>Total TTC</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-5"><div class="media"><div class="media-body"><h4>C1608251</h4>Le 25/08/2016 à 18h03 par <a href="#">Marc BEYER</a></div></div></div><div class="col-xs-3"><span class="label label-paid">Payée</span></div><div class="col-xs-2"><span class="price">20,00€<br>Total TTC</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="http://www.google.com" role="button">Détail</a></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],162:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>ATOS SIPS est la solution de paiement en ligne sécurisé proposée par les banques suivantes : Société Générale - Sogénactif / Agora, Crédit Lyonnais - Sherlock, HSBC, CCF - Elysnet, Crédit du Nord - Webaffaires, La Poste - Scellius, Crédit Agricole - e-Transactions, BNP Paribas - Merc@net. Pour plus d\'informations, <a href="http://sips.worldline.com/fr-fr/accueil.html" target="_blank">rendez-vous sur le site officiel</a> ou prenez contact avec un établissement bancaire.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Prendre contact avec un établissement bancaire afin d\'obtenir l’ouverture d’un contrat monétique de Vente A Distance (VAD)</li><li>Une fois que vous avez eu confirmation du service technique de l\'établissement bancaire que le TPE a été activé, complétez le formulaire ci-dessous avec les informations fournis par l\'établissement bancaire et activez le paiement</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Intitulé du mode de paiement</label><input class="form-control" id="exmemple1" placeholder="Carte bancaire"></div><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Certificat</label><p>Fichier nommé <code>certif.fr.xxxxxxxxxxxxx</code>. Remplaçez les <code>x</code> par un numéro de marchand. Le fichier et le numéro de marchand sont fournis par l\'établissement bancaire.</p><input id="exampleInputFile" type="file"></div><div class="form-group"><label class="control-label" for="">Retour automatique au site après paiement</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="">Désactivé</label></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois le paiement validé.</p><textarea class="form-control" rows="5" placeholder=""></textarea></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/checkout/payments">Retour</a> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],163:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Intitulé du mode de paiement</label><input class="form-control" id="exmemple1" placeholder="Chèque"></div><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Nom du bénéficiaire</label><input class="form-control" id="exmemple1" placeholder="Le nom du bénéficiaire est généralement celui du propriétaire du site Internet"></div><div class="form-group"><label class="control-label required" for="exmemple1">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" rows="5" placeholder=""></textarea></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/checkout/payments">Retour</a> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],164:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>CM-CIC Monetico Paiement est la solution de paiement en ligne sécurisé proposée par les banques suivantes : Crédit Mutuel, OBC et Groupe CIC. Pour plus d\'informations, <a href="https://www.cmcicpaiement.fr/fr/index.html" target="_blank">rendez-vous sur le site officiel</a> ou prenez contact avec un établissement bancaire.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Prendre contact avec un établissement bancaire afin d\'obtenir l’ouverture d’un contrat monétique de Vente A Distance (VAD)</li><li>Une fois le dossier d\'adhésion fourni par l\'établissement bancaire déposé, contactez le service technique de l\'établissement bancaire afin de configurer le paramètre CGI2 avec les informations suivantes (ces informations restent valables même si le nom de domaine du site change ultérieurement) :<br><br>URL CGI 2 :<br><strong>'+(null==(__t=domain)?"":_.escape(__t))+'/TPEV/cm_cic/218cb8258770.html</strong><br><br></li><li>Une fois que vous avez eu confirmation du service technique de l\'établissement bancaire que la configuration a été effectuée, complétez le formulaire ci-dessous avec les informations fournis par l\'établissement bancaire et activez le paiement</li><li><strong class="text-danger">Effectuez 1 paiement en mode TEST</strong></li><li>Si le paiement en mode TEST s\'est correctement déroulé :<ul style="margin-bottom: 0"><li>la commande doit être présente dans <a href="/checkout">la gestion des commandes</a></li><li>vous avez reçu un email de l\'établissement bancaire vous indiquant que le paiement a bien été effectué...</li><li>...MAIS vous n\'avez été crédité/débité d\'aucun montant</li><li><strong class="text-danger">passez le paiement en mode PRODUCTION</strong></li></ul></li><li>Si le paiement en mode TEST ne s\'est pas correctement déroulé :<ul style="margin-bottom: 0"><li>vérifiez que vous avez correctement renseigné le fromulaire ci-dessous</li><li>vérifiez que l\'email de l\'établissement bancaire ne se trouve pas dans votre "boîte à spams"</li><li>contactez le service technique de l\'établissement bancaire afin de vous assurer que tout a été activé correctement</li><li>répétez l\'opération à partir du point 4</li></ul></li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Intitulé du mode de paiement</label><input class="form-control" id="exmemple1" placeholder="Carte bancaire"></div><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Banque</label><select class="form-control" ic="exmemple3"><option value="cm" selected="selected">Crédit Mutuel</option><option value="monetico">Monetico Paiement</option><option value="cic">Groupe CIC</option><option value="obc">OBC</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div><div class="form-group"><label class="control-label" for="">Mode</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="">TEST</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="">PRODUCTION</label></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Numéro de TPE</label><input class="form-control" id="exmemple1" placeholder="Numéro fourni par l\'établissement bancaire"></div><div class="form-group"><label class="control-label required" for="exmemple1">Code société</label><input class="form-control" id="exmemple1" placeholder="Code fourni par l\'établissement bancaire"></div><div class="form-group"><label class="control-label required" for="exmemple1">Clé</label><input class="form-control" id="exmemple1" placeholder="Une série de 40 chiffres et lettres fournis par l\'établissement bancaire"></div><div class="form-group"><label class="control-label required" for="exmemple1">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois le paiement validé.</p><textarea class="form-control" rows="5" placeholder=""></textarea></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/checkout/payments">Retour</a> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],165:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>Systempay est la solution de paiement en ligne sécurisé proposé par la Banque Populaire. Pour plus d\'informations, <a href="http://www.cyberpluspaiement.com" target="_blank">rendez-vous sur le site officiel</a> ou prenez contact avec un établissement bancaire.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Prendre contact avec un établissement bancaire afin d\'obtenir l’ouverture d’un contrat monétique de Vente A Distance (VAD)</li><li>Une fois le dossier d\'adhésion fourni par l\'établissement bancaire déposé, récupérez l\'identifiant boutique sur l\'outil de gestion de caisse fourni par l\'établissement bancaire</li><li>Récupérez le certificat de test sur l\'outil de gestion de caisse</li><li>Renseignez l\'URL serveur TEST, appelée aussi "URL silencieuse", dans l\'outil de gestion de caisse :<br><br>URL serveur de la boutique en mode test :<br><strong>'+(null==(__t=domain)?"":_.escape(__t))+"/TPEV/systempay/88169987e6fa.html</strong><br><br></li><li>Renseignez l'URL de retour de la boutique en mode TEST dans l'outil de gestion de caisse :<br><br>URL de retour de la boutique en mode test :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/validation.html</strong><br><br></li><li>Completez le formulaire ci-dessous en indiquant l\'identifiant boutique et le certificat de test et activez le paiement</li><li><strong class="text-danger">Effectuez 1 paiement en mode TEST</strong></li><li>Vérifiez que sans cliquer sur le bouton de retour à la boutique, Kiubi est bien renseigné sur la validation du paiement</li><li>Remplir le PV de recette et renvoyez le au getionnaire de votre solution de paiement</li><li>Dès validation du PV de recette, vous recevrez un email indiquant que le certificat de production a été généré</li><li>Renseignez l\'URL serveur PRODUCTION, appelée aussi "URL silencieuse", dans l\'outil de gestion de caisse :<br><br>URL serveur de la boutique :<br><strong>'+(null==(__t=domain)?"":_.escape(__t))+"/TPEV/systempay/88169987e6fa.html</strong><br><br></li><li>Renseignez l'URL de retour de la boutique en mode PRODUCTION dans l'outil de gestion de caisse :<br><br>URL de retour de la boutique :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/validation.html</strong><br><br></li><li>Configurez dans le module de paiement le champ "Mode" dans l\'outil de gestion de caisse. Effacez TEST et saisir en majuscules PRODUCTION</li><li><strong class="text-danger">Passez le paiement en mode PRODUCTION</strong> dans le formulaire ci-dessous</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Intitulé du mode de paiement</label><input class="form-control" id="exmemple1" placeholder="Carte bancaire"></div><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label" for="">Mode</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="">TEST</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="">PRODUCTION</label></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Identifiant boutique</label><input class="form-control" id="exmemple1" placeholder="8 chiffres fournis par l\'établissement bancaire"></div><div class="form-group"><label class="control-label required" for="exmemple1">Certificat</label><input class="form-control" id="exmemple1" placeholder="Une série de 16 chiffres fournis par l\'établissement bancaire"></div><div class="form-group"><label class="control-label required" for="exmemple1">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois le paiement validé.</p><textarea class="form-control" rows="5" placeholder=""></textarea></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/checkout/payments">Retour</a> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],166:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>PayBox est une solution de paiement en ligne sécurisée multi-banques. Pour plus d’informations, <a href="http://www1.paybox.com/nos-produits-et-services/" target="_blank">rendez-vous sur le site officiel</a>.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Impérativement obtenir l’ouverture d’un contrat monétique de Vente A Distance (VAD) auprès d\'un établissement bancaire</li><li>Complétez <a href="https://cdn.kiubi-admin.com/69/documents/adhesion_PAYBOX_SYSTEM.pdf" target="_blank">le dossier d’adhésion à PayBox</a> avec les informations suivantes (ces informations restent valables même si le nom de domaine du site change ultérieurement) :<br><br>Système d’exploitation du site web (NT, Unix SCO, AIX,…) :<br><strong>Unix</strong><br><br>URL du serveur web du commerçant :<br><strong>'+(null==(__t=domain)?"":_.escape(__t))+"</strong><br><br>URL de retour par défaut si paiement accepté (PBX_EFFECTUE) :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+"/ecommerce/validation.html</strong><br><br>URL de retour par défaut si paiement refusé (PBX_REFUSE) :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+"/ecommerce/validation.html</strong><br><br>URL de retour par défaut si paiement annulé par le porteur (PBX_ANNULE) :<br><strong>"+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/validation.html</strong><br><br>Retour immédiat à la boutique après paiement :<br><strong>Oui</strong><br><br>Si vous rencontrez des difficultés pour remplir le dossier d’adhésion, vous pouvez directement <a href="http://www1.paybox.com/contact/" target="_blank">prendre contact avec PayBox</a>.<br><br></li><li>Retournez le dossier préalablement rempli aux adresses postales indiquées dans celui-ci</li><li>Une fois l\'adhésion validée par PayBox, contactez le support de PayBox pour leur indiquer d\'activer l\'URL "IPN" avec l\'adresse suivante :<br><br>URL "IPN" (PBX_REPONDRE_A) :<br><strong>'+(null==(__t=domain)?"":_.escape(__t))+'/TPEV/paybox/308d63a37017.html</strong><br><br></li><li>Demandez au support de PayBox de <strong class="text-danger">passer le terminal de paiement en mode REEL</strong>, car PayBox ouvre les terminaux de paiement par défaut en mode TEST qui n\'est pas utilisé par Kiubi.</li><li>Après confirmation du changement par PayBox, complétez le formulaire ci-dessous avec les informations fournis par PayBox et activez le paiement.</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Intitulé du mode de paiement</label><input class="form-control" id="exmemple1" placeholder="Paybox"></div><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Banque</label><select class="form-control" ic="exmemple3"><option value="" selected="selected">Multi-banques</option><option value="CA">Crédit agricole (E-transactions)</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Mode de cryptage</label><select class="form-control" ic="exmemple3"><option value="cgi">CGI (ancienne version)</option><option value="hmac" selected="selected">HMAC (Recommandé)</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Numéro du site</label><input class="form-control" id="exmemple1" placeholder="7 chiffres fournis par PayBox"></div><div class="form-group"><label class="control-label required" for="exmemple1">Rang</label><input class="form-control" id="exmemple1" placeholder="2 chiffres fournis par PayBox"></div><div class="form-group"><label class="control-label required" for="exmemple1">Identifiant PAYBOX</label><input class="form-control" id="exmemple1" placeholder="Une série de chiffres fournis par PayBox"></div><div class="form-group"><label class="control-label required" for="exmemple1">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois le paiement validé.</p><textarea class="form-control" rows="5" placeholder=""></textarea></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/checkout/payments">Retour</a> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],167:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>Paypal est une solution de paiement en ligne simple et rapide à mettre en place pour recevoir des paiements. Pour plus d\'informations, <a href="https://www.paypal.com/fr/home" target="_blank">rendez-vous sur le site officiel</a>.</p><p>Afin de configurer correctement ce mode de paiement vous devez :</p><ol><li>Allez sur le site de Paypal et <a href="https://www.paypal.com/fr/webapps/mpp/account-selection" target="_blank">vous ouvrir un compte</a>. Vous aurez le choix entre plusieurs types de compte et <strong class="text-danger">vous devrez obligatoirement prendre un compte Professionnel (Premier ou Business)</strong>. Dans le cas contraire, le système de paiement Paypal ne fonctionnera pas avec Kiubi. Si vous possédez déjà un compte Personnel, vous devrez surclasser votre compte.</li><li>Souscrire à l\'offre <a href="https://www.paypal.com/fr/webapps/mpp/standard" target="_blank">PayPal Intégral</a></li><li>Configurez le paiement dans l\'administration du compte Paypal (généralement dans l\'onglet "Mon Compte" puis "Préférences") :<br><br>Taxe / TVA :<br><strong>Vérifiez qu\'aucun taux de TVA ne soit défini. La TVA est gérée directement par Kiubi</strong><br><br>Calculs des frais de livraison :<br><strong>Vérifiez qu\'aucun coût ne soit défini. Les frais de livraison sont gérés directement par Kiubi</strong><br><br>Préférences de notification instantanée de paiement :<br><strong>Cochez la case et remplir le champ "URL de notification" avec l\'URL suivante :<br> '+(null==(__t=domain)?"":_.escape(__t))+'/TPEV/paypal/85135625eb18.html</strong><br><br>Préférences de réception de paiements sur le site :<br><strong>Activez le "Renvoi automatique" en choisissant "Oui"</strong><br><br>Remplir le champ "URL de renvoi" avec l\'URL suivante :<br><strong>'+(null==(__t=domain)?"":_.escape(__t))+'/ecommerce/validation.html</strong><br><br><strong>Activez le "Transfert des données de paiement" en choisissant "Oui"</strong><br><br></li><li>Complétez le formulaire ci-dessous avec l\'adresse email de votre compte Paypal et activez le paiement.</li></ol><p><strong>Aucune autre intervention technique n’est nécessaire</strong>, si toutes les opérations ont été correctement effectuées, ce mode de paiement sera alors actif sur le site. Une fois toutes ces opérations de configuration terminées, <strong class="text-danger">il est indispensable d\'effectuer au moins un paiement réel</strong> sur le site pour tester son bon fonctionnement.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Intitulé du mode de paiement</label><input class="form-control" id="exmemple1" placeholder="Paypal"></div><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Email du compte PayPal</label><input class="form-control" id="exmemple1" placeholder="Email utilisé pour l\'ouverture du compte Paypal"></div><div class="form-group"><label class="control-label required" for="exmemple1">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois le paiement validé.</p><textarea class="form-control" rows="5" placeholder=""></textarea></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/checkout/payments">Retour</a> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],168:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Paramètres du mode de paiement</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="exmemple1">Intitulé du mode de paiement</label><input class="form-control" id="exmemple1" placeholder="Virement bancaire"></div><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1" class="visible">Activé</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-xs-8"><div class="form-group"><label class="control-label required" for="exmemple2">IBAN</label><input class="form-control" id="exmemple2" placeholder="34 caractères max."></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label required" for="exmemple2">BIC</label><input class="form-control" id="exmemple2" placeholder="11 caracères max."></div></div></div><div class="row"><div class="col-xs-3"><div class="form-group"><label class="control-label required" for="exmemple2">Banque</label><input class="form-control" id="exmemple2" placeholder="11 caractères max."></div></div><div class="col-xs-3"><div class="form-group"><label class="control-label required" for="exmemple2">Guichet</label><input class="form-control" id="exmemple2" placeholder="5 caracères max."></div></div><div class="col-xs-3"><div class="form-group"><label class="control-label required" for="exmemple2">N° compte</label><input class="form-control" id="exmemple2" placeholder="5 caracères max."></div></div><div class="col-xs-3"><div class="form-group"><label class="control-label required" for="exmemple2">Clé</label><input class="form-control" id="exmemple2" placeholder="2 caracères max."></div></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Domiciliation</label><input class="form-control" id="exmemple1" placeholder=""></div><div class="form-group"><label class="control-label required" for="exmemple1">Message de confirmation</label><p>Le message de confirmation s\'affiche à la fin de la procédure de commande, une fois la commande enregistrée.</p><textarea class="form-control" rows="5" placeholder=""></textarea></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/checkout/payments">Retour</a> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],169:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/recherche/catalogue/tags:Modes%20de%20paiement/" class="md-icon md-help pull-right" target="_blank"></a> Vous pouvez activer plusieurs modes de paiement : par <strong>chèque</strong>, par <strong>virement bancaire</strong> et via <strong>PayPal</strong>. Si vous disposez d\'un contrat de vende à distance avec un établissement bancaire, vous pourrez utiliser les systèmes de paiement en ligne sécurisés <strong>PayBox</strong>, <strong>ATOS-SIPS</strong>, <strong>CM-CIC Monetico Paiement</strong> et <strong>Cyberplus Paiement</strong>.</div><article class="post-article"><header class="post-header"><h1>Liste des modes de paiement</h1></header><div class="post-content post-list"><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Chèque</h4>Paiement par chèque bancaire</div></div></div><div class="col-xs-3"><span class="label label-enable">Activé</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/checkout/payments/cheque" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Virement bancaire</h4>Paiement par virement bancaire</div></div></div><div class="col-xs-3"><span class="label label-disable">Désactivé</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/checkout/payments/transfer" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>PayPal</h4>Paiement par PayPal</div></div></div><div class="col-xs-3"><span class="label label-enable">Activé</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/checkout/payments/paypal" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>CM-CIC Monetico Paiement</h4>Paiement par carte bancaire distribué par les banques :<br>Crédit Mutuel - CyberMUT, OBC, Groupe CIC - P@iement CIC</div></div></div><div class="col-xs-3"><span class="label label-enable">Activé</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/checkout/payments/cmcic" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>PayBox</h4>Solution de paiement en ligne sécurisé multi-banques</div></div></div><div class="col-xs-3"><span class="label label-disable">Désactivé</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/checkout/payments/paybox" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>ATOS SIPS</h4>Paiement par carte bancaire distribué par les banques suivantes :<br>Société Générale - Sogénactif / Agora, Crédit Lyonnais - Sherlock, HSBC, CCF - Elysnet, Crédit du Nord - Webaffaires, La Poste - Scellius, Crédit Agricole - e-Transactions, BNP Paribas - Merc@net</div></div></div><div class="col-xs-3"><span class="label label-disable">Désactivé</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/checkout/payments/atos" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-7"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>Cyberplus Paiement</h4>Paiement par carte bancaire distribué par la Banque Populaire</div></div></div><div class="col-xs-3"><span class="label label-disable">Désactivé</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/checkout/payments/cyberplus" role="button">Détail</a></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],170:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Email d\'accusé de réception</h1></header><div class="post-content"><p>L\'email d\'accusé de réception de commande est envoyé à l\'acheteur à l\'enregistrement de sa commande, quelque soit le mode de paiment utilisé. Vous pouvez ajouter un message personnalisé dans cet email.</p><div class="form-group"><label class="control-label" for="">Destinataires</label><p>Saisissez les emails des destinataires, séparés par des virgules. Sans destinataire, l\'email par défaut est utilisé.</p><input class="form-control" id="" placeholder="marc.beyer@troll-idees.com"></div><div class="form-group"><label class="control-label required" for="mail_pending">Message personnalisé</label><textarea class="form-control" name="mail_pending" id="mail_pending" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_pending)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Emails de notification de changement d\'état</h1></header><div class="post-content"><p>Un email de notification peut être envoyé à l\'acheteur à chaque changement d\'état de sa commande. Vous pouvez ajouter un message personnalisé pour chacuns de ces emails.</p><div class="form-group"><label class="control-label required" for="mail_processing">Message personnalisé de l\'état : <span class="label label-default">En cours</span></label><textarea class="form-control" name="mail_processing" id="mail_processing" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_processing)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label required" for="mail_processed">Message personnalisé de l\'état : <span class="label label-default">Traitée</span></label><textarea class="form-control" name="mail_processed" id="mail_processed" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_processed)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label required" for="mail_shipped">Message personnalisé de l\'état : <span class="label label-default">Expédiée</span></label><textarea class="form-control" name="mail_shipped" id="mail_shipped" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_shipped)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label required" for="mail_cancelled">Message personnalisé de l\'état : <span class="label label-default">Annulée</span></label><textarea class="form-control" name="mail_cancelled" id="mail_cancelled" placeholder="Message tel qu\'il apparaîtra dans l\'email" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=mail_cancelled)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],171:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Gestion du stock</h1></header><div class="post-content"><div class="row"><div class="col-xs-6"><div class="form-group"><label for="stockout_selling">Vente en cas de rupture de stock</label><select id="stockout_selling" name="stockout_selling" data-style="selectify"><option value="1" '+(null==(__t=stockout_selling?'selected="selected"':"")?"":__t)+'>Autoriser la vente du produit</option><option value="0" '+(null==(__t=stockout_selling?"":'selected="selected"')?"":__t)+'>Stopper la vente du produit</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="decrement_stock">Retirer un produit du stock</label><select id="decrement_stock" name="decrement_stock" data-style="selectify"><option value="at_payment" '+(null==(__t="at_payment"==decrement_stock?'selected="selected"':"")?"":__t)+'>Dès qu\'il est commandé et payé</option><option value="never" '+(null==(__t="never"==decrement_stock?'selected="selected"':"")?"":__t)+'>Jamais</option></select></div></div></div><label class="control-label" for="stockout_threshold">Quantité avant rupture de stock</label><p>Vous pouvez indiquer une quantité minimale d\'un produit qui doit rester en stock. À la valeur indiquée et en dessous, le produit est considéré comme étant en rupture de stock.</p><div class="row"><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon"></span><input class="form-control" name="stockout_threshold" id="stockout_threshold" value="'+(null==(__t=stockout_threshold)?"":_.escape(__t))+'"><span class="input-group-addon">produit(s)</span></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Numéros des commandes</h1></header><div class="post-content"><p>Vous avez la possibilité de choisir la lettre qui préfixe les numéros des commandes passées sur le site. Si vous possédez plusieurs boutiques en ligne, vous pouvez ainsi plus facilement distinguer l’origine d\'une commande. Le préfixe par défaut est "C".</p><label class="control-label" for="order_prefix">Préfixe des commandes</label><div class="row"><div class="col-xs-3"><div class="form-group"><select id="order_prefix" name="order_prefix" data-style="selectify" data-direction="up"><option value="A" '+(null==(__t="A"==order_prefix?'selected="selected"':"")?"":__t)+'>A</option><option value="B" '+(null==(__t="B"==order_prefix?'selected="selected"':"")?"":__t)+'>B</option><option value="C" '+(null==(__t="C"==order_prefix?'selected="selected"':"")?"":__t)+'>C</option><option value="D" '+(null==(__t="D"==order_prefix?'selected="selected"':"")?"":__t)+'>D</option><option value="E" '+(null==(__t="E"==order_prefix?'selected="selected"':"")?"":__t)+'>E</option><option value="F" '+(null==(__t="F"==order_prefix?'selected="selected"':"")?"":__t)+'>F</option><option value="G" '+(null==(__t="G"==order_prefix?'selected="selected"':"")?"":__t)+'>G</option><option value="H" '+(null==(__t="H"==order_prefix?'selected="selected"':"")?"":__t)+'>H</option><option value="I" '+(null==(__t="I"==order_prefix?'selected="selected"':"")?"":__t)+'>I</option><option value="J" '+(null==(__t="J"==order_prefix?'selected="selected"':"")?"":__t)+'>J</option><option value="K" '+(null==(__t="K"==order_prefix?'selected="selected"':"")?"":__t)+'>K</option><option value="L" '+(null==(__t="L"==order_prefix?'selected="selected"':"")?"":__t)+'>L</option><option value="M" '+(null==(__t="M"==order_prefix?'selected="selected"':"")?"":__t)+'>M</option><option value="N" '+(null==(__t="N"==order_prefix?'selected="selected"':"")?"":__t)+'>N</option><option value="O" '+(null==(__t="O"==order_prefix?'selected="selected"':"")?"":__t)+'>O</option><option value="P" '+(null==(__t="P"==order_prefix?'selected="selected"':"")?"":__t)+'>P</option><option value="Q" '+(null==(__t="Q"==order_prefix?'selected="selected"':"")?"":__t)+'>Q</option><option value="R" '+(null==(__t="R"==order_prefix?'selected="selected"':"")?"":__t)+'>R</option><option value="S" '+(null==(__t="S"==order_prefix?'selected="selected"':"")?"":__t)+'>S</option><option value="T" '+(null==(__t="T"==order_prefix?'selected="selected"':"")?"":__t)+'>T</option><option value="U" '+(null==(__t="U"==order_prefix?'selected="selected"':"")?"":__t)+'>U</option><option value="V" '+(null==(__t="V"==order_prefix?'selected="selected"':"")?"":__t)+'>V</option><option value="W" '+(null==(__t="W"==order_prefix?'selected="selected"':"")?"":__t)+'>W</option><option value="X" '+(null==(__t="X"==order_prefix?'selected="selected"':"")?"":__t)+'>X</option><option value="Y" '+(null==(__t="Y"==order_prefix?'selected="selected"':"")?"":__t)+'>Y</option><option value="Z" '+(null==(__t="Z"==order_prefix?'selected="selected"':"")?"":__t)+'>Z</option></select></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Minimum de commande</h1></header><div class="post-content"><p>Le minimum de commande vous permet d\'interdir la prise des commandes en-dessous d\'un certain montant, frais de port compris. Vous pouvez définir un montant de 0,00€ pour autoriser les commandes gratuites.</p><label class="control-label" for="stockout_threshold">Montant minimum</label><div class="row"><div class="col-xs-3"><div class="form-group"><div class="input-group"><span class="input-group-addon"></span><input class="form-control" name="" id="" value="" placeholder="0,00"><span class="input-group-addon">€TTC</span></div></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],172:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(151),className:"container-fluid",service:"checkout"});
},{"151":151,"undefined":undefined}],173:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(152),className:"container",service:"checkout"});
},{"152":152,"undefined":undefined}],174:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(153),className:"container",service:"checkout",templateContext:function(){return{domain:Session.site.get("domain")}}});
},{"153":153,"undefined":undefined}],175:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(154),className:"container",service:"checkout"});
},{"154":154,"undefined":undefined}],176:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(155),className:"container",service:"checkout"});
},{"155":155,"undefined":undefined}],177:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(156),className:"container",service:"checkout"});
},{"156":156,"undefined":undefined}],178:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(157),className:"container-fluid",service:"checkout"});
},{"157":157,"undefined":undefined}],179:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(158),className:"container",service:"checkout"});
},{"158":158,"undefined":undefined}],180:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(159),className:"container",service:"checkout"});
},{"159":159,"undefined":undefined}],181:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(160),className:"container container-large",service:"checkout"});
},{"160":160,"undefined":undefined}],182:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(162),className:"container",service:"checkout"});
},{"162":162,"undefined":undefined}],183:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(163),className:"container",service:"checkout"});
},{"163":163,"undefined":undefined}],184:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(164),className:"container",service:"checkout",templateContext:function(){return{domain:Session.site.get("domain")}}});
},{"164":164,"undefined":undefined}],185:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(165),className:"container",service:"checkout",templateContext:function(){return{domain:Session.site.get("domain")}}});
},{"165":165,"undefined":undefined}],186:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(166),className:"container",service:"checkout",templateContext:function(){return{domain:Session.site.get("domain")}}});
},{"166":166,"undefined":undefined}],187:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(167),className:"container",service:"checkout",templateContext:function(){return{domain:Session.site.get("domain")}}});
},{"167":167,"undefined":undefined}],188:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(168),className:"container",service:"checkout"});
},{"168":168,"undefined":undefined}],189:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(169),className:"container",service:"checkout"});
},{"169":169,"undefined":undefined}],190:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),WysiwygBehavior=require(26),Forms=require(424);module.exports=Marionette.View.extend({template:require(170),className:"container",service:"checkout",behaviors:[FormBehavior,WysiwygBehavior],fields:["mail_pending","mail_processing","mail_processed","mail_shipped","mail_cancelled"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"170":170,"25":25,"26":26,"424":424,"undefined":undefined}],191:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),SelectifyBehavior=require(24),Forms=require(424);module.exports=Marionette.View.extend({template:require(171),className:"container",service:"checkout",behaviors:[FormBehavior,SelectifyBehavior],fields:["order_prefix","stockout_selling","stockout_threshold","decrement_stock"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"171":171,"24":24,"25":25,"424":424,"undefined":undefined}],192:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/cms/home",idAttribute:"page_id",previewLink:null,parse:function(e){return"data"in e?null===e.data?{}:(e.meta&&e.meta.link&&e.meta.link.preview&&(this.previewLink=e.meta.link.preview),e.data):e},defaults:{page_id:null,name:"",is_visible:!1,is_home:!1,meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null}});
},{"undefined":undefined}],193:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/cms/menus",idAttribute:"menu_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{menu_id:e.data}:e.data:e},defaults:{menu_id:null,name:"",is_main:!1,api_key:"",pages:[]}});
},{"undefined":undefined}],194:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Page=require(195),Pages=Backbone.Collection;module.exports=Backbone.Collection.extend({url:"sites/@site/cms/menus",model:require(193),parse:function(e){return this.meta=e.meta,_.each(e.data,function(e){var a=[];e.pages&&_.each(e.pages,function(e){a.push(new Page(e))}),e.pages=new Pages(a)}),e.data},selectPayloadFilter:null,selectPayload:function(){var e=[],a=this.selectPayloadFilter;return _.each(this.toJSON(),function(n){if(n.pages){var i={},t={value:"m"+n.menu_id,label:n.name,is_root:!0,indent:0};a&&(t=a(t,null)),t!==!1&&e.push(t),_.each(n.pages.toJSON(),function(n){var t=1;n.page_parent_id>0&&(t=1+i["p"+n.page_parent_id]),i["p"+n.page_id]=t;var u={value:n.page_id,label:n.name,indent:t};a&&(u=a(u,n)),u!==!1&&e.push(u)})}else e.push({value:n.menu_id,label:n.name})}),e},findPage:function(e){var a=null;return _.each(this.toJSON(),function(n){n.pages&&null==a&&_.each(n.pages.toJSON(),function(n){n.page_id==e&&(a=n)})}),a},childPages:function(e,a){var n=[];return _.each(this.toJSON(),function(i){i.menu_id==e&&i.pages&&_.each(i.pages.toJSON(),function(e){e.page_parent_id!=a||e.is_home||n.push(e)})}),n},getMenuTree:function(e){if(0==this.length)return[];var a=null;return this.each(function(n){if(n.get("menu_id")==e){var i={};a={menu_id:n.get("menu_id"),model:null,childs:[]},n.get("pages").each(function(e){var n={model:e,childs:[]};i["i"+e.get("page_id")]=n;var t;t=0==e.get("page_parent_id")?a:i["i"+e.get("page_parent_id")],t.childs.push(n)})}}),a},parentList:function(e){var a=[],n=[e],i=3;return _.each(this.toJSON(),function(e){if(e.pages){var t={},u={value:"m"+e.menu_id,label:e.name,indent:0,is_selectable:!0,is_positionnable:!1};a.push(u),_.each(e.pages.toJSON(),function(e){var u=1;if(e.page_parent_id>0&&(u=1+t["p"+e.page_parent_id]),t["p"+e.page_id]=u,!(e.is_home||n.indexOf(e.page_id)>=0)){if(n.indexOf(e.page_parent_id)>=0)return void n.push(e.page_id);var s={value:e.page_id,label:e.name,indent:u,is_selectable:u<=i,is_positionnable:!0};a.push(s)}})}else a.push({value:e.menu_id,label:e.name,indent:0,is_selectable:!0,is_positionnable:!1})}),a}});
},{"193":193,"195":195,"undefined":undefined}],195:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/cms/pages",idAttribute:"page_id",previewLink:null,parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{page_id:e.data}:(e.meta&&e.meta.link&&e.meta.link.preview&&(this.previewLink=e.meta.link.preview),e.data):e},defaults:{page_id:null,menu_id:null,page_type:"",page_parent_id:null,name:"",is_visible:!1,is_home:!1,slug:"",has_restrictions:!1,meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:"",layout_id:null,target_type:"",target_page:"",target_key:"",url_target:"",restrictions:[]},getInternalLinkTypes:function(){return Backbone.ajax({url:"sites/@site/cms/internal_links/targets"}).then(function(e){return _.map(e.data,function(e){return{value:e.type,label:e.name}})})},getInternalLinkTargets:function(e){return Backbone.ajax({url:"sites/@site/cms/internal_links/targets/"+e}).then(function(e){return e.data})}});
},{"undefined":undefined}],196:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422);module.exports=Backbone.Model.extend({urlRoot:"sites/@site/cms/posts",idAttribute:"post_id",previewLink:null,parse:function(t){return"data"in t?null===t.data?{}:_.isNumber(t.data)?{post_id:t.data}:(t.meta&&t.meta.link&&t.meta.link.preview&&(this.previewLink=t.meta.link.preview),t.data):t},defaults:{post_id:null,page_id:"",type:"",type_name:"",type_pos:1,title:"",subtitle:"",group:"",is_visible:"",position:"",text1:"",text2:"",text3:"",text4:"",text5:"",text6:"",text7:"",text8:"",text9:"",text10:"",text11:"",text12:"",text13:"",text14:"",text15:""},getLabel:function(){return this.get("title")?this.get("title"):this.get("subtitle")?this.get("subtitle"):"Billet sans titre"},getGroups:function(){return Backbone.ajax({url:"sites/@site/cms/posts_groups"}).then(function(t){return _.map(t.data,function(t){return{value:t.name,label:t.name}})})},getTypes:function(){return Backbone.ajax({url:"sites/@site/cms/posts_types",data:{extra_fields:"structure"}}).then(function(t){return _.map(t.data,function(t){return{type:t.type,name:t.name,position:t.position,fields:t.fields||[]}})})},promisedTypes:function(t){return Backbone.ajax({url:"sites/@site/cms/posts_types"}).then(function(e){var i=new CollectionUtils.SelectCollection,n=[];return e.data&&_.each(e.data,function(e){n.push({value:e.type,label:e.name,selected:t&&e.type==t})}),i.add(n),i})},duplicate:function(){var t=this;return this.fetch({data:{extra_fields:"texts"}}).then(function(){var e=t.clone();return e.set("post_id",null),e.set("position",null),e.save().then(function(){return e})})}});
},{"422":422,"undefined":undefined}],197:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422);module.exports=Backbone.Collection.extend({page_id:null,url:function(){return this.page_id>0?"sites/@site/cms/pages/"+this.page_id+"/posts":"sites/@site/cms/posts"},model:require(196),parse:function(e){return this.meta=e.meta,e.data},reOrder:function(e,t){return Backbone.ajax({url:"sites/@site/cms/pages/"+e+"/posts",method:"PUT",data:{order:t}})},bulkShow:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?Backbone.$.Deferred().resolve():e.save({is_visible:!0},{patch:!0})},e)},bulkHide:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_visible")?e.save({is_visible:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"196":196,"422":422,"undefined":undefined}],198:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var t=[];if(e.addPost&&t.push({title:"Ajouter un billet",callback:["actionNewPost",e.addPost]}),e.duplicatePost&&t.push({title:"Dupliquer le billet",callback:["actionDuplicationPost",e.duplicatePost]}),e.addPageInMenu||e.addPage){var n={};e.addPageInMenu&&(n.menu_id=e.addPageInMenu),e.addPage&&(n.page_parent_id=e.addPage),t.push({title:"Ajouter une page libre",callback:["actionNewPage",n]})}e.preview&&t.push({title:"Aperçu",callback:["actionPreview",e.preview]});var i={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};return t.length<=1?t.push(i):t.splice(1,0,i),t}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Controller=require(30),Menus=require(194),Menu=require(193),Page=require(195),Post=require(196),Home=require(192),IndexView=require(211),MenuView=require(212),PageView=require(214),PostView=require(215),PageAddModalView=require(213),MenuTree=require(434),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(210),service:"cms",ui:{"btn-page-add":'a[data-role="page-add"]',"btn-menu-add":'a[data-role="menu-add"]'},events:{"click @ui.btn-page-add":"addPage","click @ui.btn-menu-add":"addMenu","show.bs.collapse":function(e){Backbone.$('[href="#'+e.target.id+'"]',this.el).parent().removeClass("menu-expand-more").addClass("menu-expand-less"),this.menuTree.openNode(parseInt(e.target.id.substring(8)))},"hide.bs.collapse":function(e){Backbone.$('[href="#'+e.target.id+'"]',this.el).parent().removeClass("menu-expand-less").addClass("menu-expand-more"),this.menuTree.closeNode(parseInt(e.target.id.substring(8)))},"click a":function(e){var t=Backbone.$(e.currentTarget);"#"!=t.attr("href")&&(Backbone.$("a",this.el).parent().removeClass("active"),t.parent().addClass("active"))}},page_id:-1,addPage:function(e){var t=Backbone.$(e.currentTarget);this.trigger("add:page",t.data("id"))},addMenu:function(e){this.trigger("add:menu")},onChangePage:function(e){this.page_id!=e&&(this.page_id=e,this.render())},initialize:function(e){this.collection=new Menus,this.fetchAndRender();var t=this;this.menuTree=new MenuTree({nodeInfo:function(e){var n="";switch(e.get("is_visible")||(n+=" pagetype-visibility-off"),e.get("page_type")){case"lien_int":n+=" pagetype-internal-link";break;case"lien_ext":n+=" pagetype-external-link";break;case"separateur":n+=" pagetype-separator";break;case"page":n+=" pagetype-page"}return e.get("has_restrictions")&&(n+=" pagetype-extranet"),{url:e.get("is_home")?"/cms":"/cms/pages/"+e.get("page_id"),name:e.get("name"),is_active:e.get("page_id")==t.page_id,extraClassname:n}},rootFooter:function(e){return'<li class="page-add"><a href="#" data-role="page-add" data-id="'+e.menu_id+'"><span class="md-icon"></span>Ajouter une page</a></li>'}})},fetchAndRender:function(){this.collection.fetch({data:{extra_fields:"pages"}}).done(function(){this.render()}.bind(this))},templateContext:function(){return{renderMenu:function(e){return this.page_id==-1?"":this.menuTree.render(this.collection.getMenuTree(e)).html}.bind(this)}},onRefreshMenus:function(){this.fetchAndRender()}}),CMSController=Controller.extend({sidebarMenuService:"cms",sidebarMenu:SidebarMenuView,sidebarMenuEvents:{"add:page":"showPageAdd","add:menu":"actionNewMenu"},baseBreadcrum:[{title:"Site Web",href:"/cms"}],showIndex:function(){var e=new Home;e.fetch().done(function(){this.triggerSidebarMenu("change:page",e.get("page_id"));var t=new IndexView({model:e});this.listenTo(e,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),(e.hasChanged("name")||e.hasChanged("is_visible"))&&this.triggerSidebarMenu("refresh:menus")}.bind(this)),this.navigationController.showContent(t),this.setHeader({title:e.get("name")},getHeadersAction({preview:e,addPost:e.get("page_id")})),t.start()}.bind(this)).fail(function(){this.triggerSidebarMenu("change:page",null),this.notFound(),this.setHeader({title:"Page introuvable"})}.bind(this))},showMenu:function(e){var t=new Menu({menu_id:e});this.triggerSidebarMenu("change:page",null),t.fetch().done(function(){var e=new MenuView({model:t});this.listenTo(t,"change",function(e){e.hasChanged("name")&&(this.setBreadCrum({title:e.get("name")},!0),this.triggerSidebarMenu("refresh:menus"))}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms"),this.triggerSidebarMenu("refresh:menus")}),this.navigationController.showContent(e),this.setHeader({title:t.get("name")},getHeadersAction({addPageInMenu:t.get("menu_id")}))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Menu introuvable"})}.bind(this))},actionNewMenu:function(){var e=new Menu({name:"Intitulé par défaut"});return e.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms/menus/"+e.get("menu_id")),this.triggerSidebarMenu("refresh:menus")}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showPage:function(e){var t=new Page({page_id:e});this.triggerSidebarMenu("change:page",e),t.fetch().done(function(){var e=new PageView({model:t,menus:new Menus});this.listenTo(t,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),(e.hasChanged("name")||e.hasChanged("is_visible")||e.hasChanged("page_type")||e.hasChanged("menu_id")||e.hasChanged("page_parent_id")||e.hasChanged("after_id")||e.hasChanged("before_id")||e.hasChanged("has_restrictions"))&&this.triggerSidebarMenu("refresh:menus")}.bind(this)),this.listenTo(t,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms"),this.triggerSidebarMenu("refresh:menus")}),this.navigationController.showContent(e),this.setHeader({title:t.get("name")},getHeadersAction({preview:"page"==t.get("page_type")&&t,addPost:"page"==t.get("page_type")&&t.get("page_id"),addPage:t.get("page_parent_id")>0&&t.get("page_parent_id"),addPageInMenu:0==t.get("page_parent_id")&&t.get("menu_id")}))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Page introuvable"})}.bind(this))},actionNewPage:function(e){var t=new Page({title:"Intitulé par défaut",slug:"intitule-par-defaut",is_visible:!1,page_type:"page"}),n=function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/cms/pages/"+t.get("page_id")),this.triggerSidebarMenu("refresh:menus")}.bind(this),i=function(e){this.navigationController.showErrorModal(e)}.bind(this);if(e.menu_id){var a=new Menu({menu_id:e.menu_id});return a.fetch().then(function(){return t.set("menu_id",a.get("menu_id")),t.save().done(n).fail(i)},i)}var r=new Page({page_id:e.page_parent_id});return r.fetch().then(function(){return t.set("page_parent_id",r.get("page_id")),t.save().done(n).fail(i)},i)},actionNewInternalLink:function(e){var t=this,n=new Menu({menu_id:e.menu_id});return n.fetch().then(function(){var e=new Page({is_visible:!1,page_type:"internal_link",target_type:"cms",target_page:"index",menu_id:n.get("menu_id")});return e.save().done(function(){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/pages/"+e.get("page_id")),t.triggerSidebarMenu("refresh:menus")}).fail(function(e){t.navigationController.showErrorModal(e)})},function(e){t.navigationController.showErrorModal(e)})},actionNewExternalLink:function(e){var t=this,n=new Menu({menu_id:e.menu_id});return n.fetch().then(function(){var e=new Page({is_visible:!1,page_type:"external_link",url:"http://www.kiubi.com/",url_target:"_blank",menu_id:n.get("menu_id")});return e.save().done(function(){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/pages/"+e.get("page_id")),t.triggerSidebarMenu("refresh:menus")}).fail(function(e){t.navigationController.showErrorModal(e)})},function(e){t.navigationController.showErrorModal(e)})},actionNewSeparator:function(e){var t=this,n=new Menu({menu_id:e.menu_id});return n.fetch().then(function(){var e=new Page({is_visible:!1,page_type:"separator",menu_id:n.get("menu_id")});return e.save().done(function(){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/pages/"+e.get("page_id")),t.triggerSidebarMenu("refresh:menus")}).fail(function(e){t.navigationController.showErrorModal(e)})},function(e){t.navigationController.showErrorModal(e)})},showPost:function(e){function t(e,t){return[{href:t.get("is_home")?"/cms":"/cms/pages/"+t.get("page_id"),title:t.get("name")},{title:e.getLabel()}]}var n,i=new Post({post_id:e});i.fetch({data:{extra_fields:"texts"}}).then(function(){return n=new Page({page_id:i.get("page_id")}),n.fetch()}).done(function(){this.triggerSidebarMenu("change:page",i.get("page_id"));var a=new PostView({model:i,page:n,menus:new Menus,typesSource:i.getTypes()});this.listenTo(n,"sync",function(e){this.setBreadCrum(t(i,e),!0)}),this.listenTo(i,"change",function(e){(e.hasChanged("title")||e.hasChanged("subtitle"))&&this.setBreadCrum(t(e,n),!0),e.hasChanged("page_id")&&this.triggerSidebarMenu("change:page",e.get("page_id"))}.bind(this)),this.listenTo(i,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate(n.get("is_home")?"/cms":"/cms/pages/"+n.get("page_id")),this.triggerSidebarMenu("refresh:menus")}),this.navigationController.showContent(a),this.setHeader(t(i,n),getHeadersAction({preview:n,addPost:i.get("page_id"),duplicatePost:e}))}.bind(this)).fail(function(){this.triggerSidebarMenu("change:page",null),this.notFound(),this.setHeader({title:"Billet introuvable"})}.bind(this))},actionNewPost:function(e){var t=this,n=new Post({is_visible:!1,page_id:e});return n.getTypes().then(function(e){return 0==e.length?void t.navigationController.showErrorModal("Chargement des types de billets échoué"):(n.set("type",e[0].type),n.save().done(function(){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/posts/"+n.get("post_id"))}).fail(function(e){t.navigationController.showErrorModal(e)}))})},actionDuplicationPost:function(e){var t=this,n=new Post({post_id:e});n.duplicate().done(function(e){t.navigationController.showOverlay(300),t.navigationController.navigate("/cms/posts/"+e.get("post_id"))}).fail(function(e){t.navigationController.showErrorModal(e)})},actionPreview:function(e){window.open(e.previewLink)},showPageAdd:function(e){var t=new PageAddModalView({menu_id:e});this.listenTo(t,"select:extLink",this.actionNewExternalLink),this.listenTo(t,"select:intLink",this.actionNewInternalLink),this.listenTo(t,"select:page",this.actionNewPage),this.listenTo(t,"select:separator",this.actionNewSeparator),this.navigationController.showInModal(t,{title:"Ajouter une page",modalClass:"modal-pagetype-add"})}});module.exports=Marionette.AppRouter.extend({controller:new CMSController,appRoutes:{cms:"showIndex","cms/menus/:id":"showMenu","cms/pages/:id":"showPage","cms/posts/:id":"showPost"},onRoute:function(e,t,n){this.controller.showSidebarMenu()}});
},{"18":18,"192":192,"193":193,"194":194,"195":195,"196":196,"210":210,"211":211,"212":212,"213":213,"214":214,"215":215,"30":30,"434":434,"undefined":undefined}],199:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé de la page</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé de la page tel qu\'il apparaîtra dans le menu"></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article><article data-role="list"></article><article data-role="layout"></article><article class="post-article"><header class="post-header"><a href="#seo" class="pull-right collapsed" data-toggle="collapse" aria-expanded="false" aria-controls="seo">Afficher <span class="more">plus</span> <span class="less">moins</span> d\'options</a><h1>Référencement</h1></header><div class="post-content"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_title">Titre de la page</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; qui remplacera celle définie par défaut"></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_description">Description de la page</label><textarea class="form-control" id="meta_description" name="meta_description" rows="5" placeholder="Contenu de la balise &lt;meta description&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="collapse" id="seo"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_keywords">Mots clés de la page</label><textarea class="form-control" id="meta_keywords" name="meta_keywords" rows="5" placeholder="Contenu de la balise &lt;meta keywords&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_head">Code avant <code>&lt;/head&gt;</code></label><textarea class="form-control" id="js_head" name="js_head" rows="5" placeholder="Code placé avant la balise &lt;/head&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_body">Code avant <code>&lt;/body&gt;</code></label><textarea class="form-control" id="js_body" name="js_body" rows="5" placeholder="Code placé avant la balise &lt;/body&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],200:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><p>Toutes les pages du site web sont organisées en menus. Kiubi vous permet de créer plusieurs menus qui peuvent contenir autant de pages que vous le désirez. Ces différents menus et les pages qu\'ils contiennent constituent l\'arborescence du site et permettront à l\'internaute de le parcourir.</p><div class="form-group"><label class="control-label" for="name">Intitulé du menu</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le menu"></div><div class="form-group"><label class="control-label">Identifiant API</label><p class="form-control-static">'+(null==(__t=api_key)?"":_.escape(__t))+'</p></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"> ',is_main||(__p+=' <button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> '),__p+=' <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],201:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><div class="row"><div class="col-xs-6"><div class="thumbnail thumbnail-select" data-role="select-page"><div class="md-icon md-website"></div><div class="caption"><h4>Contenu libre</h4><p>Une page de contenu modifiable</p></div></div></div><div class="col-xs-6"><div class="thumbnail thumbnail-select" data-role="select-intlink"><div class="md-icon md-directions"></div><div class="caption"><h4>Lien interne</h4><p>Un lien vers une page du site</p></div></div></div><div class="col-xs-6"><div class="thumbnail thumbnail-select" data-role="select-extlink"><div class="md-icon md-link"></div><div class="caption"><h4>Lien externe</h4><p>Un lien vers une adresse web</p></div></div></div><div class="col-xs-6"><div class="thumbnail thumbnail-select" data-role="select-separator"><div class="md-icon md-spacer"></div><div class="caption"><h4>Séparateur</h4><p>Une séparation, sans lien ni contenu</p></div></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],202:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Lien externe</h1></header><div class="post-content"><p>Un lien externe vous permet de faire un lien, depuis un menu, vers n\'importe quelle adresse web.</p><div class="row"><div class="col-xs-8"><div class="form-group"><label class="control-label required" for="url">Adresse du lien externe</label><input class="form-control" id="url" name="url" value="'+(null==(__t=url)?"":_.escape(__t))+'" placeholder="Adresse sous la forme https://www.adresse-internet.com/"></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label">Fenêtre cible</label><select name="url_target" data-style="selectify"><option value="_self" '+(null==(__t="_self"==url_target?'selected="selected"':"")?"":__t)+' >Même fenêtre</option><option value="_blank" '+(null==(__t="_blank"==url_target?'selected="selected"':"")?"":__t)+' >Nouvelle fenêtre</option></select></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],203:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé de la page</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé de la page tel qu\'il apparaîtra dans le menu"></div><div class="row"> ',is_home||(__p+=' <div class="col-xs-6"><div class="form-group"><label class="control-label" for="name">Page parente</label><div data-role="parent"></div></div></div> '),__p+=' <div class="col-xs-4 col-xs-offset-2"><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div></div></div><footer class="post-footer"></footer></article> ',is_home||(__p+=' <article class="post-article"><header class="post-header no-border"><h1>Type de page</h1></header><div class="post-content"><div class="post-group"><div class="form-group"><p>Le type de la page détermine son mode d\'affichage dans le menu et la nature de son contenu :</p><div class="row"><div class="col-xs-6"><select name="page_type" data-style="selectify"><option '+(null==(__t="page"==page_type?'selected="selected"':"")?"":__t)+' value="page">Page de contenu libre</option><option '+(null==(__t="lien_int"==page_type?'selected="selected"':"")?"":__t)+' value="internal_link">Lien interne vers une autre page</option><option '+(null==(__t="lien_ext"==page_type?'selected="selected"':"")?"":__t)+' value="external_link">Lien externe vers une adresse web</option><option '+(null==(__t="separateur"==page_type?'selected="selected"':"")?"":__t)+' value="separator">Séparateur sans lien ni contenu</option></select></div></div></div></div></div><footer class="post-footer"></footer></article> '),__p+=' <div data-role="detail"></div></form><div class="save"><div class="btn-toolbar" role="toolbar"> ',is_home||(__p+=' <button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> '),__p+=' <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],204:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Lien interne</h1></header><div class="post-content"><p>Un lien interne vous permet de faire un lien, depuis un menu, vers une autre page du site web.</p><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label">Vers quel service ?</label><div data-role="type"></div></div></div><div class="col-xs-8"><div class="form-group"><label class="control-label">Vers quelle page ?</label><div data-role="page"></div></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],205:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article data-role="list"></article><article class="post-article"><header class="post-header"><h1>Droits d\'accès</h1></header><div class="post-content"><p>Restreindre l\'accès à cette page aux seuls <a href="/customers/groups">groupes</a> ou <a href="/customers">membres</a> autorisés.</p><div data-role="restrictions"></div></div><footer class="post-footer"></footer></article><article data-role="layout"></article><article class="post-article"><header class="post-header"><a href="#seo" class="pull-right collapsed" data-toggle="collapse" aria-expanded="false" aria-controls="seo">Afficher <span class="more">plus</span> <span class="less">moins</span> d\'options</a><h1>Référencement</h1></header><div class="post-content"> ',is_home||(__p+=' <div class="form-group"><label class="control-label required" for="slug">Adresse de la page</label><div class="input-group"><span class="input-group-addon">'+(null==(__t=domain)?"":_.escape(__t))+'/</span> <input class="form-control" id="slug" name="slug" value="'+(null==(__t=slug)?"":_.escape(__t))+'"> <span class="input-group-addon">.html</span></div></div> '),__p+=' <div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_title">Titre de la page</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; qui remplacera celle définie par défaut"></div><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_description">Description de la page</label><textarea class="form-control" id="meta_description" name="meta_description" rows="5" placeholder="Contenu de la balise &lt;meta description&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="collapse" id="seo"><div class="form-group" data-behavior="countable"><span class="letter-counter"></span><label class="control-label" for="meta_keywords">Mots clés de la page</label><textarea class="form-control" id="meta_keywords" name="meta_keywords" rows="5" placeholder="Contenu de la balise &lt;meta keywords&gt; qui remplacera celle définie par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_head">Code avant <code>&lt;/head&gt;</code></label><textarea class="form-control" id="js_head" name="js_head" rows="5" placeholder="Code placé avant la balise &lt;/head&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_body">Code avant <code>&lt;/body&gt;</code></label><textarea class="form-control" id="js_body" name="js_body" rows="5" placeholder="Code placé avant la balise &lt;/body&gt; qui remplacera celui défini par défaut">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],206:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button type="button" class="form-control form-control-select dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span data-role="label" class="fake-selected">'+(null==(__t=label)?"":_.escape(__t))+'</span><span class="caret"></span></button><div class="dropdown"><ul class="dropdown-menu dropdown-control"> ',_.each(options,function(e){__p+=" ",e.is_selectable?(__p+=' <li data-value="'+(null==(__t=e.value)?"":_.escape(__t))+'" class="page-level-'+(null==(__t=e.indent)?"":__t)+" "+(null==(__t=e.value==selected?"active":"")?"":__t)+'"><a data-role="selectabe" href="#">'+(null==(__t=e.label)?"":_.escape(__t)),e.is_positionnable&&(__p+='<span class="md-icon md-before page-position"></span><span class="md-icon md-after page-position"></span>'),__p+="</a></li> "):(__p+=' <li data-value="'+(null==(__t=e.value)?"":_.escape(__t))+'" class="page-level-'+(null==(__t=e.indent)?"":__t)+' "><span data-role="selectabe" class="disabled '+(null==(__t=e.value==selected?"active":"")?"":__t)+'">'+(null==(__t=e.label)?"":_.escape(__t)),e.is_positionnable&&(__p+='<span class="md-icon md-before page-position"></span><span class="md-icon md-after page-position"></span>'),__p+="</span></li> "),__p+=" "}),__p+=" </ul></div>";return __p};
},{"undefined":undefined}],207:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label">Page du billet</label><div data-role="page"></div></div></div><div class="col-xs-4 col-xs-offset-2"><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" '+(null==(__t=is_visible?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_visible1" class="visible">Visible</label><input name="is_visible" id="is_visible0" value="0" '+(null==(__t=is_visible?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_visible0" class="not-visible">Masqué</label></div></div></div></div></div><footer class="post-footer"></footer></article><article data-role="type"></article><article class="post-article"><header class="post-header"><h1>Groupe du billet</h1></header><div class="post-content"><p>Les groupes sont utilisés comme critères d\'affichage des billets dans certain widgets de Kiubi et peuvent être utilisés pour organiser le contenu de votre site. Vous pouvez ajouter un seul groupe par billet.</p><div class="row"><div class="col-xs-8"><div class="form-group"><label class="control-label" for="group">Ajouter un groupe</label><input class="form-control" id="group" name="group" value="'+(null==(__t=group)?"":_.escape(__t))+'" placeholder="Colonne à droite, Slideshow, Pied de page..."></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label">Groupes existants</label><div data-role="group"></div></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],208:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<header class="post-header no-border"><h1>Type de billet</h1></header><div class="post-content"><div class="post-group"><div class="form-group"><p>Le type de billet détermine l\'apparence et le contenu du billet dans la page :</p><div class="row"><div class="col-xs-6"><select id="type" name="type" data-style="selectify"> ',_(types).each(function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'" '+(null==(__t=e.type==type?'selected="selected"':"")?"":__t)+' data-tags="'+(null==(__t=e.position)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div></div> ",fields&&0!=fields.length||(__p+=" <p><em>Pas d'information complémentaire...</em></p> "),__p+=" ",_(fields).each(function(e){switch(__p+=" ",e.type){case"text":__p+=' <div class="form-group"><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><input class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" value="'+(null==(__t=post.get(e.field))?"":_.escape(__t))+'"></div> ';break;case"textarea":__p+=' <div class="form-group"><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" rows="5">'+(null==(__t=post.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"wysiwyg":__p+=' <div class="form-group"><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><textarea class="form-control" id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-role="wysiwyg" rows="21">'+(null==(__t=post.get(e.field))?"":_.escape(__t))+"</textarea></div> ";break;case"select":__p+=' <div class="form-group"><label class="control-label" for="'+(null==(__t=e.field)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><div class="row"><div class="col-xs-6"><select id="'+(null==(__t=e.field)?"":_.escape(__t))+'" name="'+(null==(__t=e.field)?"":_.escape(__t))+'" data-style="selectify"> ',_(e.options).each(function(l){__p+=' <option value="'+(null==(__t=l.value)?"":_.escape(__t))+'" '+(null==(__t=l.value==post.get(e.field)?'selected="selected"':"")?"":__t)+">"+(null==(__t=l.name)?"":_.escape(__t))+"</option> "}),__p+=" </select></div></div></div> ";break;case"image":case"file":__p+=' <div data-role="filepicker-'+(null==(__t=e.field)?"":_.escape(__t))+'"></div> '}__p+=" "}),__p+=' </div><footer class="post-footer"></footer>';return __p};
},{"undefined":undefined}],209:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-6 col-md-7"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="cms_post_'+(null==(__t=post_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=post_id)?"":_.escape(__t))+'" type="checkbox"><label for="cms_post_'+(null==(__t=post_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>'+(null==(__t=label)?"":_.escape(__t))+'</h4><span class="tags tags-color-'+(null==(__t=type_pos)?"":_.escape(__t))+'"></span> ',__p+=is_visible?" "+(null==(__t=type_name)?"":_.escape(__t))+" ":' <span class="text-danger">Masqué</span> ',__p+=' </div></div></div><div class="col-xs-3">',group&&(__p+='<span class="label label-default">'+(null==(__t=group)?"":_.escape(__t))),__p+='</span></div><div class="col-xs-3 col-md-2"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/cms/posts/'+(null==(__t=post_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],210:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",_.each(items,function(e){__p+=' <h2><a href="/cms/menus/'+(null==(__t=e.menu_id)?"":_.escape(__t))+'"><span class="md-icon md-edit"></span>'+(null==(__t=e.name)?"":_.escape(__t))+"</a></h2> "+(null==(__t=renderMenu(e.menu_id))?"":__t)+" "}),__p+=' <h2><a href="#" data-role="menu-add"><span class="md-icon md-add-outline"></span>Nouveau menu</a></h2>';return __p};
},{"undefined":undefined}],211:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),CharCountBehavior=require(19),RowActionsBehavior=require(28),LayoutSelectorView=require(56),Forms=require(424),Posts=require(197),ListView=require(433),RowView=Marionette.View.extend({template:require(209),className:"list-item",behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},templateContext:function(){return{label:this.model.getLabel()}}});module.exports=Marionette.View.extend({template:require(199),className:"container",service:"cms",behaviors:[FormBehavior,CharCountBehavior],regions:{list:{el:"article[data-role='list']",replaceElement:!0},layout:{el:"article[data-role='layout']",replaceElement:!0}},fields:["name","is_visible","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["model","collection"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"cms-home",apply:this.model.get("page_id"),applyName:this.model.get("name")})},onRender:function(){this.collection=new Posts,this.collection.page_id=this.model.get("page_id"),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des billets",selection:[{title:"Afficher",callback:this.showPosts.bind(this)},{title:"Masquer",callback:this.hidePosts.bind(this)},{title:"Supprimer",callback:this.deletePosts.bind(this),confirm:!0}],scrollThreshold:920})),this.showChildView("layout",this.layoutSelector)},start:function(){this.collection.fetch()},showPosts:function(e){return this.collection.bulkShow(e)},hidePosts:function(e){return this.collection.bulkHide(e)},deletePosts:function(e){return this.collection.bulkDelete(e)},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onChildviewSortChange:function(e){this.collection.reOrder(this.model.get("page_id"),e.list)},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"19":19,"197":197,"199":199,"209":209,"25":25,"28":28,"424":424,"433":433,"56":56,"undefined":undefined}],212:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(200),className:"container",service:"cms",behaviors:[FormBehavior],fields:["name"],initialize:function(e){this.mergeOptions(e,["model"])},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"200":200,"25":25,"424":424,"undefined":undefined}],213:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(201),menu_id:null,ui:{"select-page":'div[data-role="select-page"]',"select-intlink":'div[data-role="select-intlink"]',"select-extlink":'div[data-role="select-extlink"]',"select-separator":'div[data-role="select-separator"]'},events:{"click @ui.select-page":function(){this.trigger("select:page",{menu_id:this.getOption("menu_id")})},"click @ui.select-intlink":function(){this.trigger("select:intLink",{menu_id:this.getOption("menu_id")})},"click @ui.select-extlink":function(){this.trigger("select:extLink",{menu_id:this.getOption("menu_id")})},"click @ui.select-separator":function(){this.trigger("select:separator",{menu_id:this.getOption("menu_id")})}},initialize:function(e){this.mergeOptions(e)}});
},{"201":201,"undefined":undefined}],214:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),LayoutSelectorView=require(56),SelectView=require(436),FormBehavior=require(25),Forms=require(424),RestrictionsView=require(258),Posts=require(197),Restrictions=require(233),Session=Backbone.Radio.channel("app").request("ctx:session"),CharCountBehavior=require(19),RowActionsBehavior=require(28),RowView=Marionette.View.extend({template:require(209),className:"list-item",behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()},templateContext:function(){return{label:this.model.getLabel()}}}),ListView=require(433),PageView=Marionette.View.extend({template:require(205),behaviors:[CharCountBehavior],regions:{list:{el:"article[data-role='list']",replaceElement:!0},layout:{el:"article[data-role='layout']",replaceElement:!0},restrictions:{el:"div[data-role='restrictions']",replaceElement:!0}},fields:["slug","meta_title","meta_description","meta_keywords","js_head","js_body"],initialize:function(e){this.mergeOptions(e,["model","collection"]),this.layoutSelector=new LayoutSelectorView({layout_id:this.model.get("layout_id"),type:"cms-page",apply:this.model.get("page_id"),applyName:this.model.get("name")})},templateContext:function(){return{domain:Session.site.get("domain")}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des billets",selection:[{title:"Afficher",callback:this.showPosts.bind(this)},{title:"Masquer",callback:this.hidePosts.bind(this)},{title:"Supprimer",callback:this.deletePosts.bind(this),confirm:!0}],scrollThreshold:920})),this.showChildView("layout",this.layoutSelector),this.showChildView("restrictions",new RestrictionsView({restrictions:this.model.get("restrictions")}))},start:function(){this.collection.fetch()},showPosts:function(e){return this.collection.bulkShow(e)},hidePosts:function(e){return this.collection.bulkHide(e)},deletePosts:function(e){return this.collection.bulkDelete(e)},onChildviewChangeLayout:function(e){e!=this.model.get("layout_id")&&this.model.save({layout_id:e},{patch:!0})},onChildviewSortChange:function(e){this.collection.reOrder(this.model.get("page_id"),e.list)},getRestrictions:function(){return this.getChildView("restrictions").getRestrictions()}}),InternalLinkView=Marionette.View.extend({template:require(204),regions:{type:{el:'div[data-role="type"]',replaceElement:!0},page:{el:'div[data-role="page"]',replaceElement:!0}},fields:["target_type","target_page"],onRender:function(){this.showChildView("page",new SelectView({selected:this.model.get("target_page")+"@@"+this.model.get("target_key"),name:"target_page",direction:"up"}));var e=this.model.getInternalLinkTypes().done(function(){this.changeType(this.model.get("target_type"))}.bind(this));this.showChildView("type",new SelectView({dataSource:e,selected:this.model.get("target_type"),name:"target_type",direction:"up"}))},onChildviewChange:function(e,t){"target_type"==t&&this.changeType(e)},changeType:function(e){var t=this;this.getChildView("page").load(this.model.getInternalLinkTargets(e).then(function(i){"cms"==e&&(i=_.filter(i,function(e){return!e.is_linkable||e.target_key!=t.model.get("page_id")}));var n=_.map(i,function(t){var i=t.is_linkable?t.target_page+"@@"+t.target_key:null,n=0;return t.depth&&t.depth>0&&(n+=t.depth),{value:i,label:t.name,indent:"cms"==e?n:null,is_group:!t.is_linkable}});return n},function(){return[]}))}}),ExternalLinkView=Marionette.View.extend({template:require(202),fields:["url","url_target"]}),ParentView=Marionette.View.extend({template:require(206),ui:{actionBtn:"li a",posBtn:"li .md-before, li .md-after",label:'[data-role="label"]'},events:{"click @ui.actionBtn":function(e){var t=Backbone.$(e.currentTarget).parent().data("value"),i={parent_id:t,after_id:null,before_id:null};this.getUI("label").text(this.pageTitle(t)),this.triggerMethod("select:parent",i)},"click @ui.posBtn":function(e){e.preventDefault();var t=Backbone.$(e.currentTarget).parent().parent().data("value"),i={parent_id:null,after_id:null,before_id:null},n=Backbone.$(e.target);return n.hasClass("md-before")?i.before_id=t:i.after_id=t,this.getUI("label").text(this.parentTitle(t)),this.triggerMethod("select:parent",i),this.$el.removeClass("open"),!1}},selected:null,initialize:function(e){this.mergeOptions(e,["collection","selected","current"]),this.collection.fetch({data:{extra_fields:"pages"}}),this.listenTo(this.collection,"sync",this.render)},pageTitle:function(e){if(0==this.collection.length)return"";if("m"==e.toString().match(/^m/g)){e=parseInt(e.substring(1));var t=this.collection.findWhere({menu_id:e});return t?t.get("name"):"Menu "+e}e=parseInt(e);var i=null;return _.each(this.collection.toJSON(),function(t){t.pages&&null==i&&_.each(t.pages.toJSON(),function(n){n.page_id==e&&(i=t.name+" : "+n.name)})}),i},parentTitle:function(e){if(0==this.collection.length)return"";e=parseInt(e);var t=null,i=this;return _.each(this.collection.toJSON(),function(n){n.pages&&null==t&&_.each(n.pages.toJSON(),function(n){n.page_id==e&&(t=i.pageTitle(n.page_parent_id>0?n.page_parent_id:"m"+n.menu_id))})}),t},templateContext:function(){return{label:this.pageTitle(this.selected),selected:this.selected,options:this.collection.parentList(this.current)}}});module.exports=Marionette.View.extend({template:require(203),className:"container",service:"cms",behaviors:[FormBehavior],fields:["name","is_visible","page_type"],regions:{detail:"div[data-role='detail']",parent:{el:"div[data-role='parent']",replaceElement:!0}},ui:{type:"select[name='page_type']"},events:{"change @ui.type":"changeType"},parent:null,getFields:function(){return this.getChildView("detail")&&this.getChildView("detail").fields?this.fields.concat(this.getChildView("detail").fields):this.fields},changeType:function(){this.getUI("type").val()!=this.model.get("page_type")&&this.triggerMethod("simpleForm:save")},onChildviewSelectParent:function(e){this.parent=e,this.triggerMethod("field:change")},initialize:function(e){this.mergeOptions(e,["model","menus"])},onRender:function(){var e;switch(this.model.get("page_type")){case"page":var t=new Posts;t.page_id=this.model.get("page_id"),e=new PageView({model:this.model,collection:t}),e.start();break;case"lien_int":e=new InternalLinkView({model:this.model});break;case"lien_ext":e=new ExternalLinkView({model:this.model})}if(e&&this.showChildView("detail",e),!this.model.get("is_home")){var i=0==this.model.get("page_parent_id")?"m"+this.model.get("menu_id"):this.model.get("page_parent_id");this.showChildView("parent",new ParentView({collection:this.menus,selected:i,current:this.model.get("page_id")}))}},onSave:function(){var e;if("page"==this.model.get("page_type")&&this.getChildView("detail")){var t=this.getChildView("detail").getRestrictions(),i=new Restrictions;i.setType("cms/pages",this.model.get("page_id")),i.set("customer_id",t.customers),i.set("group_id",t.groups),e=i.save()}else e=Backbone.$.Deferred().resolve();var n=Forms.extractFields(this.getFields(),this);if(this.parent&&(this.parent.after_id?n.after_id=this.parent.after_id:this.parent.before_id?n.before_id=this.parent.before_id:"m"==this.parent.parent_id.toString().match(/^m/g)?n.menu_id=this.parent.parent_id.substring(1):n.page_parent_id=this.parent.parent_id),n.target_page){var a=n.target_page.split("@@",2);n.target_page=a[0],n.target_key=a[1]}var r=this;return e.then(function(){return r.model.save(n,{patch:!0,wait:!0})}).done(function(){r.model.fetch().done(function(){r.render()})})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"19":19,"197":197,"202":202,"203":203,"204":204,"205":205,"206":206,"209":209,"233":233,"25":25,"258":258,"28":28,"424":424,"433":433,"436":436,"56":56,"undefined":undefined}],215:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SelectView=require(436),FilePickerView=require(295),FormBehavior=require(25),WysiwygBehavior=require(26),SelectifyBehavior=require(24),Forms=require(424),TypeSelectorView=Marionette.View.extend({template:require(208),className:"post-article",tagName:"article",behaviors:[WysiwygBehavior,SelectifyBehavior],ui:{select:"select[name='type']"},events:{"change @ui.select":function(){this.selectType(this.getUI("select").val())}},types:[],type:"",fields:[],initialize:function(e){this.mergeOptions(e,["type","typesSource","post"]),this.typesSource.done(function(e){this.types=e,this.selectType(this.type)}.bind(this))},templateContext:function(){return{type:this.type,types:this.types,post:this.post,fields:this.fields}},selectType:function(e){this.type=e;var t=[],i=_.find(this.types,function(e){return e.type==this.type}.bind(this));i&&i.fields&&(t=i.fields),_.each(this.getRegions(),function(e,t){"filepicker-"==t.substring(0,11)&&this.removeRegion(t)}.bind(this)),_.each(t,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.getRegion(t)||this.addRegion(t,'div[data-role="'+t+'"]')}}.bind(this)),this.fields=t,this.render()},onRender:function(){_.each(this.fields,function(e){if("image"==e.type||"file"==e.type){var t="filepicker-"+e.field;this.showChildView(t,new FilePickerView({fieldname:e.field,fieldLabel:e.name,type:e.type,value:this.post.get(e.field)}))}}.bind(this))}});module.exports=Marionette.View.extend({template:require(207),className:"container",service:"cms",behaviors:[FormBehavior],fields:["title","subtitle","is_visible","group","page_id","type","text1","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15"],regions:{page:{el:'div[data-role="page"]',replaceElement:!0},type:{el:"article[data-role='type']",replaceElement:!0},group:{el:'div[data-role="group"]',replaceElement:!0}},menus:null,initialize:function(e){this.mergeOptions(e,["model","page","menus","typesSource"]),this.listenTo(this.model,"change:page_id",this.onPageChange)},onRender:function(){this.showChildView("type",new TypeSelectorView({type:this.model.get("type"),post:this.model,typesSource:this.typesSource})),this.showChildView("page",new SelectView({collection:this.menus,selected:this.model.get("page_id"),name:"page_id"})),this.menus.fetch({data:{extra_fields:"pages"}}),this.menus.selectPayloadFilter=function(e,t){return null!=t&&"page"==t.page_type||(e.is_group=!0),e},this.showChildView("group",new SelectView({dataSource:this.model.getGroups(),emptyLabel:"&nbsp;",name:"group_list",direction:"up"}))},onChildviewChange:function(e,t){"group_list"==t&&this.selectGroup(e)},onPageChange:function(){this.page.clear({silent:!0}),this.page.set("page_id",this.model.get("page_id")),this.page.fetch()},selectGroup:function(e){""!==e&&Backbone.$('input[name="group"]').val(e)},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"207":207,"208":208,"24":24,"25":25,"26":26,"295":295,"424":424,"436":436,"undefined":undefined}],216:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Controller=require(30),TooltipBehavior=require(27),NotFoundView=require(224),UnderConstructionView=require(225),DashboardView=require(222),LoginView=require(223),SidebarMenuView=Marionette.View.extend({template:require(218),service:"dashboard",behaviors:[TooltipBehavior]}),DefaultController=Controller.extend({sidebarMenuService:"dashboard",sidebarMenu:SidebarMenuView,notFound:function(){null==this.navigationController.getSidebarMenuService()&&(this.navigationController.hideSidebarMenu(),this.setHeader([{title:"Kiubi",href:"/"},{title:"Page non disponible"}])),this.navigationController.showContent(new NotFoundView)},underConstruction:function(){this.navigationController.setBreadCrum([{title:"Kiubi",href:"/"},{title:"Page en construction"}]),this.navigationController.setHeaderActions(null),this.navigationController.setHeaderTabs(null),this.navigationController.refreshHeader(),this.navigationController.showContent(new UnderConstructionView)},showLogin:function(){var e=new LoginView;this.listenTo(e,"form-login:submit",this.actionLogin),this.navigationController.showModal(e)},actionLogin:function(e,i){var n=Backbone.Radio.channel("app").request("ctx:session");n.authenticate(e.login,e.password).done(function(){this.navigationController.navigate("/"),this.navigationController.hideModal()}.bind(this)).fail(function(e){i.showError(e)})},dashboard:function(){this.showSidebarMenu();var e=new DashboardView,i=Backbone.Radio.channel("app").request("ctx:session"),n=this;e.listenTo(i.site,"change:site",function(){e.render(),n.showSidebarMenu()}),this.navigationController.showContent(e),this.setHeader([{title:"Tableau de bord",href:"/"},{title:"Bienvenue sur Kiubi"}])}});module.exports=Marionette.AppRouter.extend({appRoutes:{"":"dashboard",login:"showLogin","*notFound":"notFound"},navigate:function(e,i){i=i||{trigger:!0};var n=this,o=this.application,t=o.getRegion("contentRegion").currentView,r=void 0===t||!t.onBeforeDettach||t.onBeforeDettach();r&&Backbone.$.when(r).done(function(){return o.trigger("navigate",e),i.preventPushState?void Backbone.history.loadUrl(e):void Marionette.AppRouter.prototype.navigate.apply(n,[e,i])})},initialize:function(e){this.mergeOptions(e,["application"]),this.controller=new DefaultController;var i=e.application;window.onpopstate=function(){i.trigger("navigate",window.location.pathname)}}});
},{"218":218,"222":222,"223":223,"224":224,"225":225,"27":27,"30":30,"undefined":undefined}],217:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="container-fluid"><a href="https://github.com/Kiubi/alpha"><img style="position: absolute; top: 0; right: 0; border: 0" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a><div class="alert alert-warning" role="alert">Vous utilisez <strong>une version alpha</strong> de l\'application Back-office de Kiubi qui reste sujette à certains risques de dysfonctionnements. Par conséquent, il est important d\'y <strong>utiliser un site Internet dédié exclusivement aux tests</strong>. Certains modules ne sont <strong>pas encore disponibles</strong>, <strong>incomplets</strong> ou <strong>fictifs</strong> (comme le dashboard, les moteurs de recherche...) et seront ajoutés ultérieurement.</div><article class="post-article post-acticle-empty dashboard-stats"><div class="post-content"><div class="row"><div class="col-xs-2"><div class="dashboard-stats-item" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Total des commandes payées"><h1>1 935</h1><span class="stats-label">Commandes</span><span class="dashboard-stats-select"></span></div></div><div class="col-xs-2"><div class="dashboard-stats-item" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Montant total des commandes payées"><h1>120k€</h1><span class="stats-label">Chiffre d\'affaire</span><span class="dashboard-stats-select"></span></div></div><div class="col-xs-2"><div class="dashboard-stats-item" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Moyenne des montants payés par commande"><h1>62,00€</h1><span class="stats-label">Panier moyen</span><span class="dashboard-stats-select"></span></div></div><div class="col-xs-2"><div class="dashboard-stats-item" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="V.U. ayant passés au moins une commande"><h1>4,00%</h1><span class="stats-label">Conversion</span><span class="dashboard-stats-select"></span></div></div><div class="col-xs-2"><div class="dashboard-stats-item active" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Total des visiteurs uniques (V.U.)"><h1>123</h1><span class="stats-label">Visiteurs uniques</span><span class="dashboard-stats-select"></span></div></div><div class="col-xs-2"><div class="dashboard-stats-item" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Total des pages vues (P.V.)"><h1>1 435</h1><span class="stats-label">Pages vues</span><span class="dashboard-stats-select"></span></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article dashboard-graph"><header class="post-header" style="display:"><a href="#" class="pull-right">Afficher toutes les statistiques</a><h1>Visiteurs sur les 30 derniers jours</h1></header><div class="post-content"><div class="row"><div class="col-xs-8 col-lg-9"><p><iframe class="chartjs-hidden-iframe" style="display: block; overflow: hidden; border: 0px none; margin: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px; height: 100%; width: 100%; position: absolute; pointer-events: none; z-index: -1" tabindex="-1"></iframe><canvas data-role="chart" width="975" height="280" style="display: block; width: 975px; height: 280px"></canvas></p></div><div class="col-xs-4 col-lg-3"><div class="form-group no-margin"><label class="control-label">Période</label><select data-style="selectify"><option>7 derniers jours</option><option>30 derniers jours</option><option selected="selected">Période personnalisée</option></select></div><div class="row"><div class="col-xs-6"><div class="form-group spacer"><select data-style="selectify"><option>Janvier</option><option selected="selected">Février</option><option>Mars</option><option>Avril</option><option>Mai</option><option>Juin</option><option>juillet</option><option>Aout</option><option>Septembre</option><option>Octobre</option><option>Novembre</option><option>Décembre</option></select></div></div><div class="col-xs-6"><div class="form-group"><select data-style="selectify"><option selected="selected">2018</option><option>2017</option><option>2016</option><option>2015</option><option>2014</option><option>2013</option><option>2012</option><option>2011</option><option>2010</option><option>2009</option><option>2008</option><option>2007</option></select></div></div></div><div class="form-group no-margin"><label class="control-label">Comparer à</label><select data-style="selectify"><option>Période actuelle</option><option>Période précédente</option><option selected="selected">Période personnalisée</option></select></div><div class="row"><div class="col-xs-6"><div class="form-group spacer"><select data-style="selectify"><option>Janvier</option><option selected="selected">Février</option><option>Mars</option><option>Avril</option><option>Mai</option><option>Juin</option><option>juillet</option><option>Aout</option><option>Septembre</option><option>Octobre</option><option>Novembre</option><option>Décembre</option></select></div></div><div class="col-xs-6"><div class="form-group"><select data-style="selectify"><option selected="selected">2018</option><option>2017</option><option>2016</option><option>2015</option><option>2014</option><option>2013</option><option>2012</option><option>2011</option><option>2010</option><option>2009</option><option>2008</option><option>2007</option></select></div></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article dashboard-activity"><header class="post-header"><div class="form-group pull-right"><div class="radio-group"><input name="affichage" id="affichage1" value="option1" checked="checked" type="radio"><label for="affichage1">Toutes les activités</label><input name="affichage" id="affichage0" value="option1" type="radio"><label for="affichage0">Utilisateurs</label><input name="affichage" id="affichage2" value="option1" type="radio"><label for="affichage2">Site Internet</label></div></div><h1>Activités récentes</h1></header><div class="post-content post-list no-hover"><div class="list-item"><div class="row"><div class="col-xs-8"><div class="media"><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div></div><div class="media-body">Mise à jour du billet du Blog : <a href="#">Un premier apercu de la nouvelle expérience Kiubi</a><h4>John Doe</h4></div></div></div><div class="col-xs-4 text-right">23/02/2017 à 16h36</div></div></div><div class="list-item"><div class="row"><div class="col-xs-8"><div class="media"><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div></div><div class="media-body">Mise à jour du billet du Blog : <a href="#">Un premier apercu de la nouvelle expérience Kiubi</a><h4>John Doe</h4></div></div></div><div class="col-xs-4 text-right">23/01/2018 à 16h45</div></div></div><div class="list-item"><div class="row"><div class="col-xs-8"><div class="media"><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div></div><div class="media-body">Mise à jour du billet du Blog : <a href="#">Un premier apercu de la nouvelle expérience Kiubi</a><h4>John Doe</h4></div></div></div><div class="col-xs-4 text-right">23/01/2018 à 18h12</div></div></div></div><footer class="post-footer"></footer></article></div>';return __p};
},{"undefined":undefined}],218:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Activités en attente</h2><ul class="nav nav-stacked"><li><a href="/checkout"><span class="md-icon"></span><span class="badge">199</span>Commandes à traiter</a></li><li><a href="/catalog"><span class="md-icon"></span><span class="badge">34</span>Ruptures de stock</a></li><li><a href="/catalog/comments"><span class="md-icon"></span><span class="badge">14</span>Évaluations</a></li><li><a href="/forms/inbox"><span class="md-icon"></span><span class="badge">27</span>Réponses non lues</a></li><li><a href="/blog/comments"><span class="md-icon"></span><span class="badge">3</span>Commentaires</a></li></ul><div class="quotas"><h4>Espace disque <span class="pull-right quotas-detail">500Mo / 2Go</span></h4><div class="progress"><div class="progress-bar progress-bar-storage-media" role="progressbar" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100" style="width:15%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Médias : 3,16Mo"></div><div class="progress-bar progress-bar-storage-data" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width:25%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Données : 554,71Ko"></div><div class="progress-bar progress-bar-storage-ftp" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width:10%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="FTP : 5,12Mo"></div><div class="progress-bar progress-bar-free" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width:50%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Libre : 1,99Go"></div></div><h4>Bande passante <span class="pull-right quotas-detail">80Go / 60Go</span></h4><div class="progress"><div class="progress-bar progress-bar-bandwith" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width:80%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Utilisée : 60Go"></div><div class="progress-bar progress-bar-exceed" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width:20%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Dépassée : 20Go"></div></div><h4>Requêtes API <span class="pull-right quotas-detail">200K / 879K</span></h4><div class="progress"><div class="progress-bar progress-bar-api" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width:10%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Utilisées : 200K"></div><div class="progress-bar progress-bar-free" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100" style="width:90%" data-toggle="tooltip" data-placement="bottom" data-container="body" title="" data-original-title="Disponibles : 679K"></div></div></div>';return __p};
},{"undefined":undefined}],219:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="brand"><img src="/assets/img/logo_kiubi.png" class="brand-logo" alt="Kiubi"></div><div class="login-box"><article class="post-article"><header class="post-header"><h1>Bienvenue sur votre site Internet</h1></header><div class="post-content"><form><div class="alert alert-danger" role="alert" style="display:none"></div><div id="group_login" class="form-group has-feedback"><label class="control-label" for="login_input">Identifiant <span>ou</span> email</label><input class="form-control" id="login_input" placeholder=""> <span class="form-control-feedback md-feedback md-person"></span></div><div id="group_password" class="form-group has-feedback"><a href="#" class="pull-right">Oublié ?</a><label class="control-label" for="password_input">Mot de passe</label><input class="form-control" id="password_input" placeholder="" type="password"> <span class="form-control-feedback md-feedback md-key"></span></div><div class="form-group"><div class="checkbox"><input id="remember_input" value="" checked="checked" type="checkbox"><label for="remember_input">Se souvenir de moi</label></div></div><input type="submit" class="btn btn-action" style="width: 100%" value="Se connecter"><p>Si vous n\'avez pas de compte, <a href="https://www.kiubi-admin.com/login/register.html">inscrivez-vous</a>.</p></form></div><footer class="post-footer"><a href="#">Informations légales</a> | <a href="#">Conditions générales d\'utilisation</a><br>Copyright © 2017 Kiubi. Tous droits réservés.<br>100% fabriqué et hébergé avec ♥ en France.</footer></article></div>';return __p};
},{"undefined":undefined}],220:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="container"><article class="post-article post-acticle-empty"><header class="post-header"><h1>La page que vous essayez de consulter n\'existe plus</h1></header><div class="post-content"><div class="post-content">Nous vous invitons à retourner sur <a href="/">le tableau de bord</a>.</div></div><footer class="post-footer"></footer></article></div><div class="container-fluid"></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],221:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="container-fluid underconstuction"><article class="post-article post-acticle-empty"><header class="post-header"><h1>La page que vous essayez de consulter est en cours de développement</h1></header><div class="post-content"><div class="post-content">Nous vous invitons à retourner sur <a href="/">le tableau de bord</a>.</div></div><footer class="post-footer"></footer></article></div><div class="container-fluid"></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],222:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Chart=require("chart.js"),TooltipBehavior=require(27),SelectifyBehavior=require(24);module.exports=Marionette.View.extend({template:require(217),behaviors:[TooltipBehavior,SelectifyBehavior],pageTitle:"Tableau de bord",ui:{chart:'canvas[data-role="chart"]'},chart:null,onAttach:function(){Chart.defaults.global.maintainAspectRatio=!1,Chart.defaults.global.animation.duration=0,Chart.defaults.global.defaultFontColor="#ccc",Chart.defaults.global.defaultFontFamily="'Open Sans', sans-serif",Chart.defaults.global.elements.line.borderWidth="2",Chart.defaults.global.elements.point.radius="5",Chart.defaults.global.elements.point.borderWidth="2",Chart.defaults.global.elements.point.hitRadius="2",Chart.defaults.global.elements.point.hoverRadius="7",Chart.defaults.global.legend.display=!1,Chart.defaults.global.tooltips.backgroundColor="#000",Chart.defaults.global.tooltips.displayColors=!1,Chart.defaults.global.tooltips.intersect=!1,Chart.defaults.global.tooltips.titleFontFamily="'Helvetica Neue',Helvetica,Arial,sans-serif",Chart.defaults.global.tooltips.bodyFontFamily="'Helvetica Neue',Helvetica,Arial,sans-serif",Chart.defaults.global.tooltips.cornerRadius=4,this.chart=new Chart(this.getUI("chart"),{data:{labels:["01/03","06/03","11/03","16/03","21/03","26/03","31/03"],datasets:[{type:"line",borderColor:"#337ab7",backgroundColor:"rgba(51,122,183,0.1)",pointBackgroundColor:"#337ab7",pointBorderColor:"#fff",pointHoverBorderColor:"#373737",pointHoverBackgroundColor:"#fff",label:"Visiteurs",data:[65,59,80,81,56,55,40]},{type:"line",borderColor:"#c4b1c4",backgroundColor:"rgba(196,177,196,0.1)",pointBackgroundColor:"#c4b1c4",pointBorderColor:"#fff",pointHoverBorderColor:"#373737",pointHoverBackgroundColor:"#fff",label:"Période précédente",data:[35,78,53,90,32,12,65]}]},options:{layout:{padding:{top:10}},scales:{xAxes:[{position:"bottom",gridLines:{color:"rgba(0, 0, 0, 0.05)",zeroLineColor:"rgba(0, 0, 0, 0.1)"}}],yAxes:[{type:"linear",position:"left",gridLines:{color:"rgba(0, 0, 0, 0.05)",zeroLineColor:"rgba(0, 0, 0, 0.1)"}}]}}})},onBeforeDetach:function(){this.chart.destroy()}});
},{"217":217,"24":24,"27":27,"undefined":undefined}],223:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),View=Marionette.View.extend({className:"login",template:require(219),ui:{login:"#login_input",group_login:"#group_login",password:"#password_input",group_password:"#group_password",remember:"#remember_input",alert:".alert-danger"},events:{"submit form":"handleSave"},handleSave:function(e){return e.preventDefault(),this.showError(),this.trigger("form-login:submit",{login:this.getUI("login").val(),password:this.getUI("password").val()},this),!1},showError:function(e){return void 0===e?(this.getUI("alert").hide(),this.getUI("group_login").removeClass("has-error"),void this.getUI("group_password").removeClass("has-error")):(this.getUI("alert").text(e),this.getUI("alert").show(),this.getUI("group_login").addClass("has-error"),void this.getUI("group_password").addClass("has-error"))}});module.exports=View;
},{"219":219,"undefined":undefined}],224:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(220)});
},{"220":220,"undefined":undefined}],225:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(221)});
},{"221":221,"undefined":undefined}],226:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/account/customers",idAttribute:"customer_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{customer_id:e.data}:e.data:e},defaults:{customer_id:null,is_enabled:!1,number:"",firstname:"",lastname:"",gender:"",email:"",password:"",group_id:0,website:"",nickname:"",avatar_url:"",avatar_thumb_url:"",is_in_mailinglist:!1,order_count:0,order_revenues:0,order_revenues_label:""}});
},{"undefined":undefined}],227:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422);module.exports=Backbone.Collection.extend({url:"sites/@site/account/customers",model:require(226),parse:function(e){return this.meta=e.meta,e.data},bulkEnable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?Backbone.$.Deferred().resolve():e.save({is_enabled:!0},{patch:!0})},e)},bulkDisable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?e.save({is_enabled:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"226":226,"422":422,"undefined":undefined}],228:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({customer_id:null,url:function(){return"sites/@site/account/customers/"+this.customer_id+"/discounts"},parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{discount:null,group_discount:null,categories:[]}});
},{"undefined":undefined}],229:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Fidelity=Backbone.Model.extend({url:function(){return"sites/@site/account/customers/"+this.get("customer_id")+"/fidelity"},idAttribute:"",parse:function(t){return"data"in t?null===t.data?{}:t.data:t},defaults:{customer_id:null,qt:0,comment:"",end_date:"",value_date:""}});module.exports=Backbone.Collection.extend({customer_id:null,url:function(){return"sites/@site/account/customers/"+this.customer_id+"/fidelity"},model:Fidelity,parse:function(t){return this.meta=t.meta,t.data},selectPayload:function(){return _.map(this.toJSON(),function(t){return{value:t.group_id,label:t.name}})},createOperation:function(t,e){return Backbone.ajax({url:this.url(),method:"POST",data:{qt:t,comment:e}}).then(function(t){return _.map(t.data,function(t){return new Fidelity(t)})})}});
},{"undefined":undefined}],230:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/account/groups",idAttribute:"group_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{group_id:e.data}:e.data:e},defaults:{group_id:null,name:"",customer_count:0,is_enabled:!1,target_type:"",target_page:"",target_key:"",target_name:"",target_service:""}});
},{"undefined":undefined}],231:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({group_id:null,url:function(){return"sites/@site/account/groups/"+this.group_id+"/discounts"},parse:function(n){return"data"in n?null===n.data?{}:n.data:n},isNew:function(){return!1},defaults:{discount:null,group_discount:null,categories:[]}});
},{"undefined":undefined}],232:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Collection.extend({url:"sites/@site/account/groups",model:require(230),parse:function(e){return this.meta=e.meta,e.data},selectPayload:function(){return _.map(this.toJSON(),function(e){return{value:e.group_id,label:e.name}})}});
},{"230":230,"undefined":undefined}],233:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({type:"",type_id:null,url:function(){return"sites/@site/"+this.type+"/"+this.type_id+"/restrictions"},setType:function(t,e){this.type=t,this.type_id=e},parse:function(t){return"data"in t?null===t.data?{}:t.data:t},isNew:function(){return!1},defaults:{}});
},{"undefined":undefined}],234:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/customers",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{allow_registration:!1,allow_login:!1,validation:"captcha",default_group_id:null,terms:"",processing_purposes:""}});
},{"undefined":undefined}],235:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var t=[];if(e.addGrp&&t.push({title:"Ajouter un groupe",callback:"actionNewGroup"}),e.addSave){var o={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};t.length<=1?t.push(o):t.splice(1,0,o)}return t}function HeaderTabsCustomer(e){return[{title:"Détail du membre",url:"/customers/"+e},{title:"Commentaires",url:"/customers/"+e+"/blog_comments"},{title:"Évaluations",url:"/customers/"+e+"/catalog_comments"},{title:"Commandes",url:"/customers/"+e+"/orders"},{title:"Remises",url:"/customers/"+e+"/discount"},{title:"Fidelité",url:"/customers/"+e+"/fidelity"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Controller=require(30),Settings=require(234),Group=require(230),Groups=require(232),GrpDiscount=require(231),Customer=require(226),Customers=require(227),BlogComments=require(61),CatalogComments=require(95),Fidelity=require(229),Discounts=require(228),Page=require(195),CustomersView=require(251),CustomerView=require(250),BlogCommentsView=require(85),CatalogCommentsView=require(138),OrdersView=require(257),DiscountView=require(252),FidelityView=require(254),SettingsView=require(259),GroupsView=require(256),GroupView=require(255),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(249),service:"customers",behaviors:[ActiveLinksBehaviors]}),CustomersController=Controller.extend({sidebarMenuService:"customers",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Membres",href:"/customers"}],showCustomers:function(){var e=new CustomersView({collection:new Customers});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Tous les membres"})},showCustomer:function(e){var t=new Customer({customer_id:e}),o=new Groups;Backbone.$.when(t.fetch(),o.fetch()).done(function(){var i=new CustomerView({model:t,groups:o});this.listenTo(t,"change",function(e){(e.hasChanged("firstname")||e.hasChanged("lastname"))&&this.setBreadCrum({title:t.get("firstname")+" "+t.get("lastname")},!0)}.bind(this)),this.listenTo(t,"destroy",function(e){this.navigationController.showOverlay(300),this.navigationController.navigate("/customers")}.bind(this)),this.navigationController.showContent(i),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},[{title:"Enregistrer",callback:"actionSave"}],HeaderTabsCustomer(e))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Membre introuvable"})}.bind(this))},showBlogComments:function(e){var t=new Customer({customer_id:e});t.fetch().done(function(){var o=new BlogComments,i=new BlogCommentsView({collection:o});this.navigationController.showContent(i),i.start({customer_id:e}),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},null,HeaderTabsCustomer(e))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Membre introuvable"})}.bind(this))},showCommentsCatalog:function(e){var t=new Customer({customer_id:e});t.fetch().done(function(){var o=new CatalogComments,i=new CatalogCommentsView({collection:o});this.navigationController.showContent(i),i.start({customer_id:e}),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},null,HeaderTabsCustomer(e))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Membre introuvable"})}.bind(this))},showOrders:function(e){console.log("CustomersController, showOrders",e),this.navigationController.showContent(new OrdersView),this.setHeader({title:"Commandes du membre "+e})},showDiscount:function(e){var t=new Customer({customer_id:e}),o=new Discounts;o.customer_id=e,Backbone.$.when(o.fetch(),t.fetch()).done(function(){var i=new DiscountView({model:o,customer:t});this.navigationController.showContent(i),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},[{title:"Enregistrer",callback:"actionSave"}],HeaderTabsCustomer(e))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Membre introuvable"})}.bind(this))},showFidelity:function(e){var t=new Customer({customer_id:e});t.fetch().done(function(){var o=new Fidelity;o.customer_id=e;var i=new FidelityView({model:t,collection:o});this.navigationController.showContent(i),i.start(),this.setHeader({title:t.get("firstname")+" "+t.get("lastname")},null,HeaderTabsCustomer(e))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Membre introuvable"})}.bind(this))},showSettings:function(){var e=new Settings,t=new Groups;Backbone.$.when(e.fetch(),t.fetch()).done(function(){var o=new SettingsView({model:e,groups:t});this.navigationController.showContent(o),this.setHeader({title:"Paramètres des membres"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showGroups:function(){var e=new GroupsView({collection:new Groups});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Extranet"},getHeadersAction({addGrp:!0}))},showGroup:function(e){var t=new Groups,o=new t.model({group_id:e}),i=new GrpDiscount;i.group_id=e,Backbone.$.when(o.fetch(),i.fetch()).done(function(){var e=new GroupView({model:o,page:new Page,discount:i});this.listenTo(o,"change",function(e){e.hasChanged("name")&&this.setBreadCrum([{title:"Extranet",href:"/customers/groups"},{title:o.get("name")}],!0)}.bind(this)),this.listenTo(o,"destroy",function(e){this.navigationController.showOverlay(300),this.navigationController.navigate("/customers/groups")}.bind(this)),this.navigationController.showContent(e),this.setHeader([{title:"Extranet",href:"/customers/groups"},{title:o.get("name")}],getHeadersAction({addGrp:!0,addSave:!0}))}.bind(this)).fail(function(){this.notFound(),this.setHeader([{title:"Extranet",href:"/customers/groups"},{title:"Groupe extranet introuvable"}])}.bind(this))},actionNewGroup:function(){var e=new Group({name:"Intitulé par défaut"});return e.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/customers/groups/"+e.get("group_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))}});module.exports=Marionette.AppRouter.extend({controller:new CustomersController,appRoutes:{customers:"showCustomers","customers/settings":"showSettings","customers/groups":"showGroups","customers/groups/:id":"showGroup","customers/:id":"showCustomer","customers/:id/blog_comments":"showBlogComments","customers/:id/catalog_comments":"showCommentsCatalog","customers/:id/orders":"showOrders","customers/:id/discount":"showDiscount","customers/:id/fidelity":"showFidelity"},onRoute:function(e,t,o){this.controller.showSidebarMenu()}});
},{"138":138,"18":18,"195":195,"226":226,"227":227,"228":228,"229":229,"230":230,"231":231,"232":232,"234":234,"249":249,"250":250,"251":251,"252":252,"254":254,"255":255,"256":256,"257":257,"259":259,"30":30,"61":61,"85":85,"95":95,"undefined":undefined}],236:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations personnelles</h1></header><div class="post-content"><div class="row media-detail"><div class="col-xs-4"><div class="media-object md-icon md-face img-default img-circle img-avatar center-block"></div><div class="media-object img-circle img-avatar center-block"><img alt="Un intitulé d\'un truc" src="'+(null==(__t=convertMediaPath(avatar_url))?"":_.escape(__t))+"&"+(null==(__t=render_counter)?"":_.escape(__t))+'"></div><br><div class="form-group"><input id="avatar" name="avatar" type="file"></div><p class="media-info">Format : gif, jpeg ou png<br>Taille : 120 x 120px minimum</p></div><div class="col-xs-8"><label class="control-label required" for="lastname">Nom</label><div class="row"><div class="col-xs-3"><div class="form-group"><select name="gender" data-style="selectify"><option value="M" '+(null==(__t="F"!=gender?selected="selected":"")?"":__t)+'>M</option><option value="F" '+(null==(__t="F"==gender?selected="selected":"")?"":__t)+'>Mme</option></select></div></div><div class="col-xs-9"><div class="form-group"><input class="form-control" id="lastname" name="lastname" value="'+(null==(__t=lastname)?"":_.escape(__t))+'"></div></div></div><div class="form-group"><label class="control-label required" for="firstname">Prénom</label><input class="form-control" id="firstname" name="firstname" value="'+(null==(__t=firstname)?"":_.escape(__t))+'"></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label">Accès</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_enabled1" class="visible">Autorisé</label><input name="is_enabled" id="is_enabled0" value="0" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_enabled0" class="not-visible">Bloqué</label></div></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label">Numéro client</label><p class="form-control-static">'+(null==(__t=number)?"":_.escape(__t))+'</p></div></div></div><div class="form-group"><label class="control-label required" for="email">Email</label><input class="form-control" id="email" name="email" value="'+(null==(__t=email)?"":_.escape(__t))+'" placeholder="Utilisé pour se connecter au site"></div><div class="form-group"><label class="control-label" for="password">Mot de passe</label><a data-role="show-password" href="#" class="form-control-static">Modifier le mot de passe</a> <input class="form-control" style="display: none" id="password" name="password" type="password" placeholder="Modifier le mot de passe utilisé pour se connecter au site"></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="nickname">Pseudo</label><input class="form-control" id="nickname" name="nickname" value="'+(null==(__t=nickname)?"":_.escape(__t))+'" placeholder="S\'affiche à la place du nom"></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="website">Site Web</label><input class="form-control" id="website" name="website" value="'+(null==(__t=website)?"":_.escape(__t))+'" placeholder="https://www.site-web.com/"></div></div></div><div class="form-group"><label class="control-label">Groupe extranet</label><p>Un membre peut faire partie d\'un groupe de l\'<a href="/customers/groups">extranet</a> ce qui lui permettra d\'accéder à certaines pages et fichiers du site disposant d\'un accès restrint et de bénéficier des remises appliquées au groupe.</p><div class="row"><div class="col-xs-6"><div data-role="groups"></div></div></div></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],237:[function(require,module,exports){
arguments[4][75][0].apply(exports,arguments)
},{"75":75,"undefined":undefined}],238:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-5"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="customer_'+(null==(__t=customer_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=customer_id)?"":_.escape(__t))+'" type="checkbox"><label for="customer_'+(null==(__t=customer_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div><div class="media-object img-circle img-avatar"><img alt="" src="'+(null==(__t=convertMediaPath(avatar_thumb_url))?"":__t)+'"></div></div><div class="media-body"><h4>'+(null==(__t=firstname)?"":_.escape(__t))+" "+(null==(__t=lastname)?"":_.escape(__t))+"</h4> ",__p+=is_enabled?"  ":' <span class="text-danger">Bloqué</span> ',__p+=' </div></div></div><div class="col-xs-2 col-md-3"></div><div class="col-xs-3 col-md-2">'+(null==(__t=plural(order_count,"%d commande","%d commandes"))?"":_.escape(__t)),order_count>0&&(__p+="<br>"+(null==(__t=order_revenues_label)?"":_.escape(__t))),__p+='</div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/customers/'+(null==(__t=customer_id)?"":_.escape(__t))+'" role="button">Détail</a></div></div>';return __p};
},{"undefined":undefined}],239:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/marketing-et-referencement/remises-catalogue-b2b.html" class="md-icon md-help pull-right" target="_blank"></a> Les remises définies pour un membre <strong>se substituent aux remises du groupe extranet</strong>.</div><form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Remise sur tous les produits</h1></header><div class="post-content"> ',""!=group_discount&&(__p+=' <p>Ce membre fait partie du groupe extranet <strong>"'+(null==(__t=group_name)?"":_.escape(__t))+"\"</strong> et profite d'une remise de <strong>"+(null==(__t=group_discount)?"":_.escape(__t))+"%</strong> sur l'ensemble des produits du catalogue. Vous pouvez changer cette remise, uniquement pour ce membre.</p> "),__p+=' <div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="discount">Remise appliquée</label><input class="form-control" id="discount" name="discount" value="'+(null==(__t=discount)?"":_.escape(__t))+'" placeholder="'+(null==(__t=group_discount)?"":_.escape(__t))+'"> <span class="form-control-feedback md-percent"></span></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Remises par catégories</h1></header><div class="post-content post-list"><p>En complément de la remise sur tous les produits, ce membre peut bénéfichier en fonction de son groupe extranet de remises par catégories de produits. <strong>Ces remises remplacent la remise</strong> sur tous les produits pour les catégories sélectionnées. Vous pouvez changer ou ajouter des remises supplémentaires, uniquement pour ce membre.</p><div class="row"><div class="col-xs-3"><label class="control-label" for="">Remise appliquée</label></div><div class="col-xs-4"><label class="control-label" for="">Catégorie concernée</label></div></div><div data-role="discounts"></div><div class="list-item no-hover"><a href="#" data-role="discount-add">Ajouter une remise</a></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],240:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><input class="form-control" name="discount_c" placeholder="'+(null==(__t=group_discount)?"":_.escape(__t))+'" value="'+(null==(__t=discount)?"":_.escape(__t))+'"> <span class="form-control-feedback md-percent"></span></div></div><div class="col-xs-6"><div data-role="autocomplete"></div></div><div class="col-xs-3"><a href="#" data-role="action" data-action="delete" class="md-icon md-delete pull-right"></a></div></div>';return __p};
},{"undefined":undefined}],241:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert">A chaque ajout de points de fidélité, si un bon de réduction est généré, <strong>le membre en est informé par email</strong>. Si vous modifiez le bon de réduction par la suite, <strong>veillez à informer le membre</strong> des nouvelles conditions d\'utilisation du bon.</div><article data-role="list"></article><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],242:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="list-item no-hover">Total des points : <span data-role="sum"></span></div><form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="row"><div class="col-xs-3"><div class="form-group"><label class="control-label" for="operation">Quantité</label><select id="operation" name="operation" data-style="selectify"><option value="add" selected="selected">Ajouter</option><option value="sub">Retirer</option></select></div></div><div class="col-xs-3"><div class="form-group"><label class="control-label required">&nbsp;</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="qt" name="qt" value="" placeholder="0"> <span class="input-group-addon">point(s)</span></div></div></div></div><div class="form-group"><label class="control-label required" for="comment">Commentaire</label><input class="form-control" id="comment" name="comment"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show">Ajouter/Retirer des points</a></div>';return __p};
},{"undefined":undefined}],243:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-5"><div class="media"><div class="media-body"><h4>'+(null==(__t=qt>0?"+"+qt:qt)?"":_.escape(__t))+" points</h4>Le "+(null==(__t=value_date)?"":_.escape(__t))+' </div></div></div><div class="col-xs-3">'+(null==(__t=comment)?"":_.escape(__t))+'</div><div class="col-xs-4 text-right">',qt>0&&(__p+="Valide jusqu'au "+(null==(__t=end_date)?"":_.escape(__t))),__p+="</div></div>";return __p};
},{"undefined":undefined}],244:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé du groupe</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le groupe"></div><div class="form-group"><label class="control-label">Accès</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Autorisé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Bloqué</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Redirection automatique</h1></header><div class="post-content"><p>A la connection au site, les membres du groupe sont automatiquement redirigés vers une page du site, sauf s\'ils s\'y connectent à partir du tunel de commande.</p><div class="row"><div class="col-xs-3"><div class="form-group"><label class="control-label">Vers quel service ?</label><div data-role="type"></div></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label">Vers quelle page ?</label><div data-role="page"></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Remise sur tous les produits</h1></header><div class="post-content"><p>Une remise en pourcentage sur l\'ensemble des produits du catalogue peut être appliquée automatiquement pour tous les membres du groupe extranet. Cette remise change directement l\'affichage du prix des produits dans le catalogue et dans le panier d\'achat.</p><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><label class="control-label" for="discount">Remise appliquée</label><input class="form-control" id="discount" name="discount" placeholder="0,00" value="'+(null==(__t=discount)?"":_.escape(__t))+'"> <span class="form-control-feedback md-percent"></span></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Remises par catégories</h1></header><div class="post-content post-list"><p>En complément de la remise sur tous les produits, des remises par catégories de produits peuvent être définies pour tous les membres de ce groupe extranet. <strong>Ces remises remplacent la remise</strong> sur tous les produits pour les catégories sélectionnées. Pour en savoir plus sur l\'ordre d\'application des remises, <a href="https://aide.kiubi.com/documentation/marketing-et-referencement/remises-catalogue-b2b.html" target="_blank">consultez l\'aide en ligne</a>.</p><div class="row"><div class="col-xs-3"><label class="control-label" for="">Remise appliquée</label></div><div class="col-xs-4"><label class="control-label" for="">Catégorie concernée</label></div></div><div data-role="discounts"></div><div class="list-item no-hover"><a href="#" data-role="discount-add">Ajouter une remise</a></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],245:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/recherche/catalogue/tags:Extranet/" class="md-icon md-help pull-right" target="_blank"></a> L\'extranet vous permet de <strong>restreindre l\'accès à certaines pages et fichiers du site</strong> à ses membres. Créez des groupes, modifiez les droits d\'accès des membres, protégez les pages du site et appliquez des remises de groupes.</div><article data-role="list"></article><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],246:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-5"><div class="media"><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_enabled?target_service&&(__p+=' <span class="md-icon md-home icon-left"></span><span class="spacer">'+(null==(__t=target_service)?"":_.escape(__t))+'</span><span class="spacer">'+(null==(__t=target_name)?"":_.escape(__t))+"</span> "):__p+=' <span class="text-danger">Bloqué</span> ',__p+=' </div></div></div><div class="col-xs-2 col-md-3"><a href="/customers/groups/'+(null==(__t=group_id)?"":_.escape(__t))+'">'+(null==(__t=plural(customer_count,"%d membre","%d membres"))?"":_.escape(__t))+'</a></div><div class="col-xs-2"></div><div class="col-xs-3 col-md-2"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/customers/groups/'+(null==(__t=group_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],247:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="groups">Accès réservé aux groupes</label><div class="dropdown" data-role="group"><input class="form-control" id="groups" data-toggle="dropdown" placeholder="Recherche des groupes"><span class="form-control-feedback md-feedback md-search"></span><ul class="dropdown-menu dropdown-control"></ul></div><span data-role="groups"></span></div></div><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="customers">Accès réservé aux membres</label><div class="dropdown" data-role="customer"><input class="form-control" id="customers" data-toggle="dropdown" placeholder="Recherche des membres"><span class="form-control-feedback md-feedback md-search"></span><ul class="dropdown-menu dropdown-control"></ul></div><span data-role="customers"></span></div></div>';return __p};
},{"undefined":undefined}],248:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Ouverture de compte</h1></header><div class="post-content"><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="">Ouverture de nouveaux comptes</label><div class="radio-group"><input name="allow_registration" id="allow_registration1" value="1" '+(null==(__t=allow_registration?'checked="checked"':"")?"":__t)+' type="radio"><label for="allow_registration1" class="visible">Autorisée</label><input name="allow_registration" id="allow_registration0" value="0" '+(null==(__t=allow_registration?"":'checked="checked"')?"":__t)+' type="radio"><label for="allow_registration0" class="not-visible">Interdite</label></div></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="">Identification des membres</label><div class="radio-group"><input name="allow_login" id="allow_login1" value="1" '+(null==(__t=allow_login?'checked="checked"':"")?"":__t)+' type="radio"><label for="allow_login1" class="visible">Autorisée</label><input name="allow_login" id="allow_login0" value="0" '+(null==(__t=allow_login?"":'checked="checked"')?"":__t)+' type="radio"><label for="allow_login0" class="not-visible">Interdite</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="validation">Validation de compte</label><select id="validation" name="validation" data-style="selectify"><option value="email" '+(null==(__t="email"==validation?'selected="selected"':"")?"":__t)+'>Par confirmation email</option><option value="captcha" '+(null==(__t="captcha"==validation?'selected="selected"':"")?"":__t)+'>Par catpcha</option><option value="auto" '+(null==(__t="auto"==validation?'selected="selected"':"")?"":__t)+'>Pas de validation</option></select></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Extranet</h1></header><div class="post-content"><p>A l\'ouverture d\'un nouveau compte, vous pouvez automatiquement rattacher le membre à un groupe de l\'extranet.</p><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Groupe extranet par défaut</label><div data-role="groups"></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Conditions générales d\'utilisation</h1></header><div class="post-content"><p>Vous pouvez personnaliser les conditions générales d\'utilisation du site que tous les membres doivent accepter pour se créer un compte.</p><div class="form-group"><textarea class="form-control" rows="20" placeholder="" name="terms">'+(null==(__t=terms)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Données personnelles collectées et finalités de traitements</h1></header><div class="post-content"><p>Vous pouvez personnaliser les informations concernants les données personnelles collectées à la création d\'un compte ainsi que leurs finalités de traitements. Tous les membres devront accepter, pour se créer un compte, l\'utilisation qui sera faite de leurs données personnelles, si <a href="/prefs/gdpr">la demande de consentement préalable est activée</a>.</p><div class="form-group"><textarea class="form-control" rows="20" placeholder="" name="processing_purposes">'+(null==(__t=processing_purposes)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],249:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Membres</h2><ul class="nav nav-sidebar"><li><a href="/customers">Tous les membres</a></li><li><a href="/customers/groups">Extranet</a></li><li><a href="/customers/settings">Paramètres</a></li></ul>';return __p};
},{"undefined":undefined}],250:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(25),Forms=require(424),Session=Backbone.Radio.channel("app").request("ctx:session"),SelectView=require(436);module.exports=Marionette.View.extend({template:require(236),className:"container",service:"customers",behaviors:[FormBehavior],regions:{groups:{el:"div[data-role='groups']",replaceElement:!0}},ui:{showPwdBtn:'a[data-role="show-password"]',pwdInput:'input[name="password"]'},events:{"click @ui.showPwdBtn":function(){this.getUI("showPwdBtn").hide(),this.getUI("pwdInput").show()},"change input[type=file]":"dropFile"},fields:["is_enabled","firstname","lastname","gender","email","website","nickname","group_id"],tempfileUpload:null,render_counter:1,initialize:function(e){this.mergeOptions(e,["model","groups"])},templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),render_counter:this.render_counter++}},onRender:function(){this.showChildView("groups",new SelectView({emptyLabel:"Aucun groupe",collection:this.groups,selected:this.model.get("group_id"),name:"group_id",direction:"up"}))},onSave:function(){var e=Forms.extractFields(this.fields,this);return""!=this.getUI("pwdInput").val()&&(e.password=this.getUI("pwdInput").val()),this.tempfileUpload&&(e.avatar=this.tempfileUpload),this.model.save(e,{patch:!0,wait:!0}).done(function(){this.render()}.bind(this))},dropFile:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer,i=t?t.files:e.originalEvent.target.files;_.each(i,function(e){this.tempfileUpload=e}.bind(this))},onDelete:function(){return this.model.destroy()}});
},{"236":236,"25":25,"424":424,"436":436,"undefined":undefined}],251:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(28),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(238),className:"list-item",behaviors:[RowActionsBehavior],templateContext:function(){return{convertMediaPath:Session.convertMediaPath.bind(Session),plural:function(e,t,i){return(e>1?i:t).replace("%d",e)}}}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(237),className:"container-fluid",service:"customers",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"-date",initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Tous les membres",order:[{title:"Nom",is_active:!1,value:"name"},{title:"Inscription",is_active:!0,value:"-date"}],selection:[{title:"Autoriser",callback:this.enableCustomer.bind(this)},{title:"Bloquer",callback:this.disableCustomer.bind(this)},{title:"Supprimer",callback:this.deleteCustomer.bind(this),confirm:!0}]}))},start:function(){this.collection.fetch({reset:!0,data:{sort:this.sortOrder?this.sortOrder:null,extra_fields:"orders"}})},enableCustomer:function(e){return this.collection.bulkEnable(e)},disableCustomer:function(e){return this.collection.bulkDisable(e)},deleteCustomer:function(e){return this.collection.bulkDelete(e)},onChildviewChangeOrder:function(e){this.sortOrder=e,this.start()}});
},{"237":237,"238":238,"28":28,"433":433,"undefined":undefined}],252:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424),format=require(423),ListView=require(253);module.exports=Marionette.View.extend({template:require(239),className:"container",service:"customers",behaviors:[FormBehavior],regions:{discounts:{el:"div[data-role='discounts']",replaceElement:!0}},ui:{addDiscountBtn:'a[data-role="discount-add"]'},events:{"click @ui.addDiscountBtn":function(){var t=new this.discounts.model({category_id:null,category_name:"-- Choisir une catégorie --"});this.discounts.add(t)}},fields:["discount"],initialize:function(t){this.mergeOptions(t,["model","customer"]),this.discounts=new Backbone.Collection,this.discounts.model=Backbone.Model.extend({defaults:{discount:null,group_discount:null,category_id:null,category_name:""}}),this.discounts.add(this.model.get("categories"))},templateContext:function(){return{group_name:this.customer.get("group_name"),discount:format.formatFloat(this.model.get("discount")),group_discount:format.formatFloat(this.model.get("group_discount"))}},onRender:function(){this.showChildView("discounts",new ListView({collection:this.discounts}))},onSave:function(){var t=Forms.extractFields(this.fields,this),e=this.getChildView("discounts");return t.discount=""==t.discount?null:t.discount,t.categories={},this.discounts.each(function(i){var o=e.children.findByModel(i);o&&""!=o.getUI("discount").val()&&i.get("category_id")&&(t.categories[i.get("category_id")]=format.unformatFloat(o.getUI("discount").val()))}),this.model.save(t,{patch:!0,wait:!0})}});
},{"239":239,"25":25,"253":253,"423":423,"424":424,"undefined":undefined}],253:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),AutocompleteView=require(437),format=require(423),Categories=require(93),CategCollection=new Categories,RowActionsBehavior=require(28),RowView=Marionette.View.extend({template:require(240),className:"list-item list-item-form",behaviors:[RowActionsBehavior],ui:{discount:'input[name="discount_c"]'},regions:{autocomplete:{el:"div[data-role='autocomplete']",replaceElement:!0}},templateContext:function(){return{discount:format.formatFloat(this.model.get("discount")),group_discount:format.formatFloat(this.model.get("group_discount"))}},onRender:function(){this.showChildView("autocomplete",new AutocompleteView({searchPlaceholder:"Rechercher une catégorie",current:{label:this.model.get("category_name"),value:this.model.get("category_id")}}))},onActionDelete:function(){this.model.destroy()},onChildviewInput:function(e,t){CategCollection.fetch({data:{limit:5,term:e}}).done(function(){var e=_.map(CategCollection.toJSON(),function(e){return{label:e.name,value:e.category_id}});t.showResults(e)})},onChildviewChange:function(e){this.model.set("category_id",e.value,{silent:!0})}}),EmptyView=Marionette.View.extend({template:_.template('<span class="list-item-empty">Aucune remise</span>')});module.exports=Marionette.CollectionView.extend({className:"",emptyView:EmptyView,childView:RowView});
},{"240":240,"28":28,"423":423,"437":437,"93":93,"undefined":undefined}],254:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(423),_=require("underscore"),RowActionsBehavior=require(28),SelectifyBehavior=require(24),Forms=require(424),NewRowView=Marionette.View.extend({template:require(242),className:"post-content post-list",behaviors:[RowActionsBehavior,SelectifyBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]',sum:'span[data-role="sum"]'},initialize:function(){this.listenTo(this.collection,"update",this.updateTotal)},updateTotal:function(){var e=this.collection.reduce(function(e,t,i){return e+t.get("qt")},0);this.getUI("sum").text(e)},onActionCancel:function(){this.getUI("form").hide(),Forms.clearErrors(this.getUI("errors"),this.el)},onActionSave:function(){Forms.clearErrors(this.getUI("errors"),this.el);var e=Forms.extractFields(["qt","comment","operation"],this);return this.collection.createOperation("sub"==e.operation?-1*e.qt:e.qt,e.comment).done(function(e){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionShow:function(){Backbone.$("input").val(""),this.getUI("form").show()}}),RowView=Marionette.View.extend({template:require(243),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]'},templateContext:function(){return{end_date:this.model.get("end_date")?format.formatDate(this.model.get("end_date")):"",value_date:format.formatDate(this.model.get("value_date"))}}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(241),className:"container",service:"customers",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Points de fidélité"}))},start:function(){this.collection.fetch()}});
},{"24":24,"241":241,"242":242,"243":243,"28":28,"423":423,"424":424,"433":433,"undefined":undefined}],255:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(25),Forms=require(424),format=require(423),SelectView=require(436),ListView=require(253);module.exports=Marionette.View.extend({template:require(244),className:"container",service:"customers",behaviors:[FormBehavior],regions:{type:{el:'div[data-role="type"]',replaceElement:!0},page:{el:'div[data-role="page"]',replaceElement:!0},discounts:{el:"div[data-role='discounts']",replaceElement:!0}},ui:{addDiscountBtn:'a[data-role="discount-add"]'},events:{"click @ui.addDiscountBtn":function(){var e=new this.discounts.model({category_id:null,category_name:"-- Choisir une catégorie --"});this.discounts.add(e)}},fields:["is_enabled","name","target_type","target_page","discount"],initialize:function(e){this.mergeOptions(e,["model","page","discount"]),this.discounts=new Backbone.Collection,this.discounts.model=Backbone.Model.extend({defaults:{discount:null,group_discount:null,category_id:null,category_name:""}}),this.discounts.add(this.discount.get("categories"))},templateContext:function(){return{discount:format.formatFloat(this.discount.get("discount"))}},onRender:function(){this.showChildView("page",new SelectView({selected:this.model.get("target_page")+"@@"+this.model.get("target_key"),name:"target_page"}));var e=this.page.getInternalLinkTypes().done(function(){this.changeType(this.model.get("target_type"))}.bind(this));this.showChildView("type",new SelectView({dataSource:e,selected:this.model.get("target_type"),name:"target_type"})),this.showChildView("discounts",new ListView({collection:this.discounts}))},onChildviewChange:function(e,t){"target_type"==t&&this.changeType(e)},changeType:function(e){this.getChildView("page").load(this.page.getInternalLinkTargets(e).then(function(t){var i=_.map(t,function(t){var i=t.is_linkable?t.target_page+"@@"+t.target_key:null,n=0;return t.depth&&t.depth>0&&(n+=t.depth),{value:i,label:t.name,indent:"cms"==e?n:null,is_group:!t.is_linkable}});return i},function(){return[]}))},onSave:function(){var e=Forms.extractFields(this.fields,this),t=e.target_page.split("@@",2);e.target_page=t[0],e.target_key=t[1];var i=this.getChildView("discounts"),n={};return n.discount=""==e.discount?null:e.discount,delete e.discount,n.categories={},this.discounts.each(function(e){var t=i.children.findByModel(e);t&&""!=t.getUI("discount").val()&&e.get("category_id")&&(n.categories[e.get("category_id")]=t.getUI("discount").val())}),Backbone.$.when(this.model.save(e,{patch:!0,wait:!0}),this.discount.save(n,{patch:!0,wait:!0}))},onDelete:function(){return this.model.destroy()}});
},{"244":244,"25":25,"253":253,"423":423,"424":424,"436":436,"undefined":undefined}],256:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(28),RowView=Marionette.View.extend({template:require(246),className:"list-item",behaviors:[RowActionsBehavior],templateContext:function(){return{plural:function(e,t,i){return(e>1?i:t).replace("%d",e)}}},onActionDelete:function(){return this.model.destroy()}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(245),className:"container-fluid",service:"customers",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des groupes extranet"}))},start:function(){this.collection.fetch({data:{extra_fields:"target"}})}});
},{"245":245,"246":246,"28":28,"433":433,"undefined":undefined}],257:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(161),className:"container-fluid",service:"customers"});
},{"161":161,"undefined":undefined}],258:[function(require,module,exports){
function formatCustomer(e,t){return'<li data-role="selection" data-index="'+t+'"><a href="#">'+e.firstname+" "+e.lastname+"</a></li>"}function formatGroup(e,t){return'<li data-role="selection" data-index="'+t+'"><a href="#">'+e.name+"</a></li>"}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Groups=require(232),Customers=require(227),TagView=Marionette.View.extend({template:_.template('<span class="label-content" title="<%- name %>"><%- name %></span><span data-role="delete" class="md-icon md-close"></span>'),className:"label label-extranet label-list",tagName:"span",ui:{deleteBtn:'span[data-role="delete"]'},events:{"click @ui.deleteBtn":function(){this.model.destroy()}}}),TagsView=Marionette.CollectionView.extend({className:"",childView:TagView});module.exports=Marionette.View.extend({template:require(247),className:"row",regions:{customers:{el:'span[data-role="customers"]',replaceElement:!0},groups:{el:'span[data-role="groups"]',replaceElement:!0}},ui:{dropGrp:'.dropdown[data-role="group"]',dropCust:'.dropdown[data-role="customer"]',selGrp:'.dropdown[data-role="group"] li[data-role="selection"]',selCust:'.dropdown[data-role="customer"] li[data-role="selection"]'},events:{"keyup @ui.dropGrp input":_.debounce(function(e){this.term=Backbone.$(e.currentTarget).val(),this.triggerMethod("input:grp",this.term)},300),"keyup @ui.dropCust input":_.debounce(function(e){this.term=Backbone.$(e.currentTarget).val(),this.triggerMethod("input:cust",this.term)},300),"click @ui.selGrp":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||this.triggerMethod("select:grp",t)},"click @ui.selCust":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||this.triggerMethod("select:cust",t)}},onInputGrp:function(e){this.groups.fetch({data:{term:e,limit:5}}).done(function(){this.showResults(this.groups.toJSON(),this.getUI("dropGrp"))}.bind(this))},onInputCust:function(e){this.customers.fetch({data:{term:e,limit:5}}).done(function(){this.showResults(this.customers.toJSON(),this.getUI("dropCust"))}.bind(this))},onSelectGrp:function(e){if(!(e>this.groups.length)){var t=this.groups.at(e);t&&this.selected_groups.add({name:t.get("name"),id:t.get("group_id")})}},onSelectCust:function(e){if(!(e>this.customers.length)){var t=this.customers.at(e);t&&this.selected_customers.add({name:t.get("firstname")+" "+t.get("lastname"),id:t.get("customer_id")})}},showResults:function(e,t){var s="";s=e.length>0?_.reduce(e,function(e,t,s){return e+(t.customer_id?formatCustomer(t,s):formatGroup(t,s))},""):'<li><a href="#">-- Aucun résultat --</a></li>',t.children("ul").html(s),t.addClass("open")},initialize:function(e){this.mergeOptions(e,[]);var t=Backbone.Model.extend({defaults:{name:"",id:null},isNew:function(){return!0}});this.customers=new Customers,this.groups=new Groups,this.selected_groups=new Backbone.Collection,this.selected_customers=new Backbone.Collection,this.selected_groups.model=this.selected_customers.model=t;var s=_.filter(this.getOption("restrictions"),function(e){return e.customer_id});s=_.map(s,function(e){return{id:e.customer_id,name:e.customer_firstname+" "+e.customer_lastname}}),this.selected_customers.add(s);var r=_.filter(this.getOption("restrictions"),function(e){return e.group_id});r=_.map(r,function(e){return{id:e.group_id,name:e.group_name}}),this.selected_groups.add(r)},onRender:function(){this.showChildView("customers",new TagsView({collection:this.selected_customers})),this.showChildView("groups",new TagsView({collection:this.selected_groups}))},getRestrictions:function(){return{groups:this.selected_groups.pluck("id"),customers:this.selected_customers.pluck("id")}}});
},{"227":227,"232":232,"247":247,"undefined":undefined}],259:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424),SelectView=require(436);module.exports=Marionette.View.extend({template:require(248),className:"container",service:"customers",behaviors:[FormBehavior],fields:["allow_registration","allow_login","validation","default_group_id","terms","processing_purposes"],regions:{groups:{el:"div[data-role='groups']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["model","groups"])},onRender:function(){this.showChildView("groups",new SelectView({collection:this.groups,selected:this.model.get("default_group_id"),name:"default_group_id",emptyLabel:"Aucun groupe"}))},onSave:function(){var e=Forms.extractFields(this.fields,this);return e.allow_registration="1"==e.allow_registration,e.allow_login="1"==e.allow_login,this.model.save(e,{patch:!0,wait:!0})}});
},{"248":248,"25":25,"424":424,"436":436,"undefined":undefined}],260:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Field=Backbone.Model.extend({urlRoot:function(){return"sites/@site/forms/"+this.get("form_id")+"/fields"},idAttribute:"field_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{field_id:e.data}:e.data:e},defaults:{field_id:null,form_id:null,name:"",type:"",use_for_exp:!1,is_in_subject:!1,is_enabled:!1,is_required:!1,values:[],help:"",position:0,creation_date:"",modification_date:""},getTypes:function(){return[{type:"text",label:"Texte"},{type:"textarea",label:"Texte multiligne"},{type:"date",label:"Date"},{type:"datetime",label:"Date et heure"},{type:"numbers",label:"Que des chiffres"},{type:"letters",label:"Que des lettres"},{type:"email",label:"Email"},{type:"gender",label:"Civilité"},{type:"select",label:"Liste déroulante"},{type:"checkbox",label:"Cases à cocher"},{type:"radio",label:"Boutons radio"},{type:"fieldset",label:"Groupe de champs (fieldset)"},{type:"upload",label:"Fichier à envoyer"},{type:"department",label:"Département"},{type:"region",label:"Région"},{type:"country",label:"Pays"}]}});module.exports=Backbone.Collection.extend({url:function(){return"sites/@site/forms/"+this.form_id+"/fields"},form_id:null,model:Field,parse:function(e){return this.meta=e.meta,_.each(e.data,function(e){e.form_id=this.form_id}.bind(this)),e.data},reOrder:function(e){return Backbone.ajax({url:this.url(),method:"PUT",data:{order:e}})}});
},{"undefined":undefined}],261:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Form=Backbone.Model.extend({urlRoot:"sites/@site/forms",idAttribute:"form_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{form_id:e.data}:e.data:e},defaults:{form_id:null,name:"",is_enabled:!1,use_captcha:!1,recipient:"",subject:"",copy_to_sender:!1,message:"",replies_count:0,replies_unread_count:0,creation_date:"",modification_date:"",form_key:"",processing_purposes:"",is_consent_required:!1}});module.exports=Backbone.Collection.extend({url:"sites/@site/forms",model:Form,parse:function(e){return this.meta=e.meta,e.data},promisedSelect:function(e){var t=this;return this.fetch().then(function(){var i=new CollectionUtils.SelectCollection,o=[];return t.each(function(t){o.push({value:t.get("form_id"),label:t.get("name"),selected:e&&t.get("form_id")==e})}),i.add(o),i})}});
},{"422":422,"undefined":undefined}],262:[function(require,module,exports){
function checkExport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/export/forms/responses/"+t,method:"GET"}).then(function(e){return e.data})}var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Job=require(307),Response=Backbone.Model.extend({urlRoot:function(){return"sites/@site/forms/responses"},idAttribute:"response_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{response_id:e.data}:e.data:e},defaults:{response_id:null,form_id:0,form_name:"",subject:"",is_read:!1,fields:[],ip:"",reverse_host:"",creation_date:""},getSummary:function(){var e=140;return _.reduce(this.get("fields"),function(t,r){if(t.length>=e)return t;var n="";return"text"==r.type?n=r.value:"file"==r.type&&(n=r.value.name),t+=r.name+" "+n+" ",t.length>=e?t.substring(0,e-3)+"...":t},"")}});module.exports=Backbone.Collection.extend({url:function(){return"sites/@site/forms/responses"},model:Response,parse:function(e){return this.meta=e.meta,e.data},bulkRead:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_read")?Backbone.$.Deferred().resolve():e.save({is_read:!0},{patch:!0})},e)},bulkUnred:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_read")?e.save({is_read:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)},exportAll:function(e){return Backbone.ajax({url:"sites/@site/export/forms/responses",method:"POST",data:e}).then(function(e){var t=new Job({job_id:e.data.job_id});return t.watch().then(function(){return checkExport(t)})})}});
},{"307":307,"422":422,"undefined":undefined}],263:[function(require,module,exports){
function HeaderTabsForm(e){return[{title:"Détail du formulaire",url:"/forms/"+e},{title:"Paramètres",url:"/forms/"+e+"/settings"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Controller=require(30),Forms=require(261),Fields=require(260),Responses=require(262),FormsView=require(275),InboxView=require(276),FormView=require(274),SettingsView=require(277),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(273),service:"forms",behaviors:[ActiveLinksBehaviors],initialize:function(e){this.forms=new Forms,this.listenTo(this.forms,"sync",this.render),this.forms.fetch()},templateContext:function(){var e=this.forms.reduce(function(e,t){return e+t.get("replies_unread_count")},0);return{unread_count:e}}}),FormsController=Controller.extend({sidebarMenuService:"forms",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Dismoi",href:"/forms"}],showInbox:function(e){var t=this.parseQueryString(e,{id:null,u:null}),i=new InboxView({collection:new Responses,forms:new Forms,filters:t});this.navigationController.showContent(i),i.start(),this.setHeader({title:"Boite de réception"})},showForms:function(){var e=new FormsView({collection:new Forms});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Tous les formulaires"},[{title:"Ajouter un formulaire",callback:"actionNewForm"}])},actionNewForm:function(){var e=new Forms,t=new e.model({name:"Intitulé par défaut",is_visible:!1});return t.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/forms/"+t.get("form_id"))}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showForm:function(e){var t=new Forms,i=new t.model({form_id:e});i.fetch().done(function(){var t=new Fields;t.form_id=e,t.fetch();var r=new FormView({model:i,fields:t});this.listenTo(i,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0)}.bind(this)),this.listenTo(i,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/forms")}),this.navigationController.showContent(r),this.setHeader({title:i.get("name")},[{title:"Enregistrer",callback:"actionSave"}],HeaderTabsForm(e))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Formulaire introuvable"})}.bind(this))},showSettings:function(e){var t=new Forms,i=new t.model({form_id:e});i.fetch().done(function(){var t=new SettingsView({model:i});this.navigationController.showContent(t),this.setHeader({title:i.get("name")},[{title:"Enregistrer",callback:"actionSave"}],HeaderTabsForm(e))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Formulaire introuvable"})}.bind(this))}});module.exports=Marionette.AppRouter.extend({controller:new FormsController,appRoutes:{"forms/inbox":"showInbox",forms:"showForms","forms/:id":"showForm","forms/:id/settings":"showSettings"},onRoute:function(e,t,i){this.controller.showSidebarMenu()}});
},{"18":18,"260":260,"261":261,"262":262,"273":273,"274":274,"275":275,"276":276,"277":277,"30":30,"undefined":undefined}],264:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form data-role="part"><div class="alert alert-warning" role="alert">Ce formulaire peut permettre <strong>la collecte de données à caractère personnel</strong>. Veuillez dans ce cas respecter <a href="/prefs/gdpr">les dispositions adéquates</a> prévues par la loi.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé du formulaire</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le formulaire"></div><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked" ':"")?"":__t)+'><label for="is_enabled1" class="visible">Visible</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked" ')?"":__t)+'><label for="is_enabled0" class="not-visible">Masqué</label></div></div></div><footer class="post-footer"></footer></article></form><article data-role="list"></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],265:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_enabled" id="f_is_enabled1" value="1" type="radio" checked="checked"><label for="f_is_enabled1" class="visible">Visible</label><input name="is_enabled" id="f_is_enabled0" value="0" type="radio"><label for="f_is_enabled0" class="not-visible">Masqué</label></div></div></div><div class="col-xs-4" data-role="inputs"><div class="form-group"><label class="control-label">Champ à renseigner</label><div class="radio-group"><input name="is_required" id="f_is_required1" value="1" type="radio" checked="checked"><label for="f_is_required1" class="">Obligatoire</label><input name="is_required" id="f_is_required0" value="0" type="radio"><label for="f_is_required0" class="">Facultatif</label></div></div></div><div class="col-xs-4" data-role="inputs"><div class="form-group"><label class="control-label">Ajouter au sujet</label><div class="radio-group"><input name="is_in_subject" id="f_is_in_subject1" value="1" type="radio"><label for="f_is_in_subject1" class="">Oui</label><input name="is_in_subject" id="f_is_in_subject0" value="0" checked="checked" type="radio"><label for="f_is_in_subject0" class="">Non</label></div></div></div></div><div class="form-group"><label class="control-label required" for="name">Label du champ</label><input class="form-control" id="name" name="name" placeholder="Label du champ tel qu\'il apparaitra dans le formulaire"></div><div class="form-group" data-role="inputs"><label class="control-label" for="help">Aide à la saisie</label><input class="form-control" id="help" name="help" placeholder="Courte description pour aider à correctement renseigner le champ"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="type">Type de champ</label><select name="type" id="type" data-style="selectify"> ',_.each(typeList,function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'">'+(null==(__t=e.label)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div><div class="col-xs-4" data-role="email"><div class="form-group"><label class="control-label">Email de l\'expéditeur</label><div class="radio-group"><input name="use_for_exp" id="f_use_for_exp1" value="1" type="radio" checked="checked"><label for="f_use_for_exp1" class="visible">Oui</label><input name="use_for_exp" id="f_use_for_exp0" value="0" type="radio"><label for="f_use_for_exp0" class="not-visible">Non</label></div></div></div></div><div class="form-group" data-role="values"><label class="control-label required" for="values">Liste des valeurs</label><input class="form-control" id="values" name="values" placeholder="Valeur 1, Valeur 2, Valeur 3, ..."></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show">Ajouter un champ</a></div>';return __p};
},{"undefined":undefined}],266:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-6"><div class="media"><div class="media-left"><a href="#" class="md-icon md-drag btn-drag"></a></div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_enabled?" "+(null==(__t=typeLabel)?"":_.escape(__t))+" ":' <span class="text-danger">Masqué</span> ',__p+=' </div></div></div><div class="col-xs-3">',is_required&&(__p+='<span class="label label-default">Obligatoire</span>'),__p+='</div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label">Affichage</label><div class="radio-group"><input name="is_enabled" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' ><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_is_enabled1" class="visible">Visible</label><input name="is_enabled" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_is_enabled0" class="not-visible">Masqué</label></div></div></div><div class="col-xs-4" data-role="inputs"><div class="form-group"><label class="control-label">Champ à renseigner</label><div class="radio-group"><input name="is_required" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_required1" value="1" type="radio" '+(null==(__t=is_required?'checked="checked"':"")?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_required1" class="">Obligatoire</label><input name="is_required" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_required0" value="0" type="radio" '+(null==(__t=is_required?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_required0" class="">Facultatif</label></div></div></div><div class="col-xs-4" data-role="inputs"><div class="form-group"><label class="control-label">Ajouter au sujet</label><div class="radio-group"><input name="is_in_subject" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_in_subject1" value="1" type="radio" '+(null==(__t=is_in_subject?'checked="checked"':"")?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_in_subject1" class="">Oui</label><input name="is_in_subject" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_in_subject0" value="0" type="radio" '+(null==(__t=is_in_subject?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'is_in_subject0" class="">Non</label></div></div></div></div><div class="form-group"><label class="control-label required" for="name">Label du champ</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Label du champ tel qu\'il apparaitra dans le formulaire"></div><div class="form-group" data-role="inputs"><label class="control-label" for="help">Aide à la saisie</label><input class="form-control" id="help" name="help" value="'+(null==(__t=help)?"":_.escape(__t))+'" placeholder="Courte description pour aider à correctement renseigner le champ"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="type">Type de champ</label><select name="type" id="type" data-style="selectify"> ',_.each(typeList,function(e){__p+=' <option value="'+(null==(__t=e.type)?"":_.escape(__t))+'" '+(null==(__t=type==e.type?'selected="selected"':"")?"":__t)+">"+(null==(__t=e.label)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div><div class="col-xs-4" data-role="email"><div class="form-group"><label class="control-label">Email de l\'expéditeur</label><div class="radio-group"><input name="use_for_exp" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_use_for_exp1" value="1" type="radio" '+(null==(__t=use_for_exp?'checked="checked"':"")?"":__t)+' ><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_use_for_exp1" class="visible">Oui</label><input name="use_for_exp" id="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_use_for_exp0" value="0" type="radio" '+(null==(__t=use_for_exp?"":'checked="checked"')?"":__t)+'><label for="f_'+(null==(__t=field_id)?"":_.escape(__t))+'_use_for_exp0" class="not-visible">Non</label></div></div></div></div><div class="form-group" data-role="values"><label class="control-label required" for="values">Liste des valeurs</label><input class="form-control" id="values" name="values" value="'+(null==(__t=values)?"":_.escape(__t))+'" placeholder="Valeur 1, Valeur 2, Valeur 3, ..."></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],267:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/recherche/catalogue/tags:Dismoi%3F/" class="md-icon md-help pull-right" target="_blank"></a> Dismoi? est le gestionnaire de formulaires de Kiubi. Il vous permet d\'<strong>éditer et gérer différents types de formulaires</strong> pour le site Internet : contact, recrutement, demande de devis, etc.</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],268:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-6"><div class="media"><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",__p+=is_enabled?" Créé le "+(null==(__t=creation_date)?"":_.escape(__t))+" ":' <span class="text-danger">Masqué</span> ',__p+=' </div></div></div><div class="col-xs-3"><a href="/forms/inbox?id='+(null==(__t=form_id)?"":_.escape(__t))+'">'+(null==(__t=replies_count)?"":_.escape(__t))+"</a> ",replies_unread_count>0&&(__p+='<strong><a href="/forms/inbox?id='+(null==(__t=form_id)?"":_.escape(__t))+'&u=1">('+(null==(__t=replies_unread_count)?"":_.escape(__t))+")</a></strong>"),__p+=' </div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/forms/'+(null==(__t=form_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],269:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",response_id?(__p+=' <div class="answer-header"><p>Le '+(null==(__t=creation_date)?"":_.escape(__t))+"</p><h1>#"+(null==(__t=response_id)?"":_.escape(__t))+" - "+(null==(__t=subject)?"":_.escape(__t))+'</h1>Réponse à <a href="/forms/'+(null==(__t=form_id)?"":_.escape(__t))+'">'+(null==(__t=form_name)?"":_.escape(__t))+"</a></div> ",_.each(fields,function(e){__p+=' <div class="form-group"><label class="control-label">'+(null==(__t=e.name)?"":_.escape(__t))+'</label><p class="form-control-static"> ',__p+=e.value&&"text"==e.type?" "+(null==(__t=nl2br(e.value))?"":__t)+" ":e.value&&"file"==e.type?' <a target="_blank" href="'+(null==(__t=convertMediaPath("/media/multiform/"+e.value.media_id+"."+e.value.ext))?"":__t)+'">'+(null==(__t=e.value.name)?"":_.escape(__t))+"</a> ":' <em class="text-muted">Non renseigné</em> ',__p+=" </p></div> "}),__p+=' <div class="form-group"><label class="control-label">IP | Host</label><p class="form-control-static">'+(null==(__t=ip)?"":_.escape(__t))+" | "+(null==(__t=reverse_host)?"":_.escape(__t))+"</p></div> "):__p+=" ",__p+="";return __p};
},{"undefined":undefined}],270:[function(require,module,exports){
arguments[4][107][0].apply(exports,arguments)
},{"107":107,"undefined":undefined}],271:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-12"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="response_'+(null==(__t=response_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=response_id)?"":_.escape(__t))+'" type="checkbox"><label for="response_'+(null==(__t=response_id)?"":_.escape(__t))+'"></label></div></div><div class="media-body"><span data-role="read" class="read '+(null==(__t=is_read?"":"not-read")?"":_.escape(__t))+'" title="'+(null==(__t=is_read?"Marquer comme non lu":"Marquer comme lu")?"":_.escape(__t))+'"></span><h4>#'+(null==(__t=response_id)?"":_.escape(__t))+"</h4>reçue le "+(null==(__t=creation_date)?"":_.escape(__t))+" <span>"+(null==(__t=subject)?"":_.escape(__t))+"</span></div></div><p>"+(null==(__t=summary)?"":_.escape(__t))+"</p></div></div>";return __p};
},{"undefined":undefined}],272:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres généraux</h1></header><div class="post-content"><p>À chaque nouvelle réponse au formulaire, une copie peut être envoyée par email à plusieurs destinataires de votre choix ainsi qu\'à l\'expéditeur de la réponse, si ce dernier a renseigné une adresse email valide.</p><div class="form-group"><label class="control-label" for="recipient">Destinataires</label><p>Saisissez les emails des destinataires, séparés par des virgules, qui seront en copie des nouvelles réponses.</p><input class="form-control" id="recipient" name="recipient" value="'+(null==(__t=recipient)?"":_.escape(__t))+'" placeholder="Emails des destinataires séparés par des virgules"></div><div class="form-group"><label class="control-label" for="">Envoyer une copie à l\'expéditeur (si possible)</label><div class="radio-group"><input name="copy_to_sender" id="copy_to_sender1" value="1" type="radio" '+(null==(__t=copy_to_sender?'checked="checked" ':"")?"":__t)+'><label for="copy_to_sender1" class="">Oui</label><input name="copy_to_sender" id="copy_to_sender0" value="0" type="radio" '+(null==(__t=copy_to_sender?"":'checked="checked" ')?"":__t)+'><label for="copy_to_sender0" class="">Non</label></div></div><div class="form-group"><label class="control-label" for="subject">Sujet de l\'email</label><input class="form-control" id="subject" name="subject" value="'+(null==(__t=subject)?"":_.escape(__t))+'" placeholder="Sujet de l\'email lors d\'une nouvelle réponse"></div><div class="form-group"><label class="control-label required" for="message">Message de confirmation</label><p>Le message de confirmation s\'affiche une fois le formulaire validé.</p><textarea class="form-control" id="message" name="message" placeholder="" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=message)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label">Identifiant API Front-office</label><p class="form-control-static">'+(null==(__t=form_key)?"":_.escape(__t))+'</p></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Collecte de données personnelles</h1></header><div class="post-content"><p>Le "<a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees" target="_blank">Réglement Général sur la Protection des Données personnelles (RGPD)</a>" impose à toute personne morale le respect des principes et des règles régissant la protection des personnes physiques à l\'égard du <strong>traitement des données à caractère personnel</strong>. Si ce formulaire collecte ce type de données, il est obligatoire :</p><ol><li>D\'activer la demande de consentement préalable</li><li>De préciser les finalités de traitements des données collectées</li><li>D\'ajouter un lien vers la page web dédiée aux engagements pris pour la protection des données personnelles</li></ol><div class="form-group"><label class="control-label" for="">Consentement préalable</label><div class="radio-group"><input name="is_consent_required" id="is_consent_required1" value="1" type="radio" '+(null==(__t=is_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_consent_required1" class="visible">Activé</label><input name="is_consent_required" id="is_consent_required0" value="0" type="radio" '+(null==(__t=is_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_consent_required0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label required" for="processing_purposes">Finalités de traitements</label><p>Les finalités de traitements s\'affichent à la fin du formulaire.</p><textarea class="form-control" id="processing_purposes" name="processing_purposes" placeholder="" data-role="wysiwyg" data-wysiwyg-toolbar="micro" rows="14">'+(null==(__t=processing_purposes)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Captcha</h1></header><div class="post-content"><p>Le "captcha" est une sorte d\'anti-spam pour se prémunir contre l\'usage abusif des formulaires : un champ de validation requiert de l\'internaute qu\'il réponde à une question aléatoirement posée pour valider le formulaire.</p><div class="form-group"><label class="control-label" for="">Utilisation du captcha</label><div class="radio-group"><input name="use_captcha" id="use_captcha1" value="1" type="radio" '+(null==(__t=use_captcha?'checked="checked" ':"")?"":__t)+'><label for="use_captcha1" class="visible">Activé</label><input name="use_captcha" id="use_captcha0" value="0" type="radio" '+(null==(__t=use_captcha?"":'checked="checked" ')?"":__t)+'><label for="use_captcha0" class="not-visible">Désactivé</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],273:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Dismoi</h2><ul class="nav nav-sidebar"><li><a href="/forms/inbox">',unread_count>0&&(__p+='<span class="badge">'+(null==(__t=unread_count)?"":_.escape(__t))+"</span>"),__p+='Boite de réception</a></li><li><a href="/forms">Formulaires</a></li></ul>';return __p};
},{"undefined":undefined}],274:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(25),Forms=require(424),RowActionsBehavior=require(28),SelectifyBehavior=require(24),ListView=require(433),NewRowView=Marionette.View.extend({template:require(265),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]',type:'select[name="type"]',inputs:'div[data-role="inputs"]',values:'div[data-role="values"]',email:'div[data-role="email"]'},events:{"change @ui.type":"onChangeType"},onRender:function(){this.onChangeType()},templateContext:function(){var e=new this.collection.model;return{typeList:e.getTypes()}},onChangeType:function(e){var t=this.getUI("type").val();"email"==t?this.getUI("email").show():this.getUI("email").hide(),"checkbox"==t||"select"==t||"radio"==t?this.getUI("values").show():this.getUI("values").hide(),"fieldset"==t?this.getUI("inputs").hide():this.getUI("inputs").show()},onActionCancel:function(){this.getUI("form").hide(),Forms.clearErrors(this.getUI("errors"),this.el)},onActionSave:function(){Forms.clearErrors(this.getUI("errors"),this.el);var e=new this.collection.model({form_id:this.collection.form_id});return e.save(Forms.extractFields(["is_enabled","is_required","name","help","type","use_for_exp","is_in_subject","values"],this)).done(function(){this.getUI("form").hide(),this.collection.add(e)}.bind(this)).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionShow:function(){this.getUI("form").show()}}),RowView=Marionette.View.extend({template:require(266),className:"list-item",behaviors:[RowActionsBehavior,SelectifyBehavior],ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]',type:'select[name="type"]',inputs:'div[data-role="inputs"]',values:'div[data-role="values"]',email:'div[data-role="email"]'},events:{"change @ui.type":"onChangeType"},onRender:function(){this.onChangeType()},templateContext:function(){var e=_.findWhere(this.model.getTypes(),{type:this.model.get("type")});return{typeList:this.model.getTypes(),typeLabel:e?e.label:""}},onChangeType:function(e){var t=this.getUI("type").val();"email"==t?this.getUI("email").show():this.getUI("email").hide(),"checkbox"==t||"select"==t||"radio"==t?this.getUI("values").show():this.getUI("values").hide(),"fieldset"==t?this.getUI("inputs").hide():this.getUI("inputs").show()},onActionDelete:function(){return this.model.destroy()},onActionEdit:function(){this.getUI("list").hide(),this.getUI("form").show()},onActionCancel:function(){this.getUI("form").hide(),this.getUI("list").show()},onActionSave:function(){return Forms.clearErrors(this.getUI("errors"),this.el),this.model.save(Forms.extractFields(["is_enabled","is_required","name","help","type","use_for_exp","is_in_subject","values"],this),{patch:!0,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}});module.exports=Marionette.View.extend({template:require(264),className:"container",service:"forms",behaviors:[FormBehavior],fields:["name","is_enabled"],regions:{list:{el:"article[data-role='list']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["model","fields"])},onRender:function(){this.showChildView("list",new ListView({collection:this.fields,rowView:RowView,newRowView:NewRowView,title:"Liste des champs",scrollThreshold:920}))},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this,'form[data-role="part"]'),{patch:!0,wait:!0})},onDelete:function(){return this.model.destroy({wait:!0})},onChildviewSortChange:function(e){this.fields.reOrder(e.list)}});
},{"24":24,"25":25,"264":264,"265":265,"266":266,"28":28,"424":424,"433":433,"undefined":undefined}],275:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),ListView=require(433),RowActionsBehavior=require(28),format=require(423),RowView=Marionette.View.extend({template:require(268),className:"list-item",behaviors:[RowActionsBehavior],templateContext:function(){return{creation_date:format.formatDateTime(this.model.get("creation_date"))}},onActionDelete:function(){return this.model.destroy()}});module.exports=Marionette.View.extend({template:require(267),className:"container",service:"forms",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des formulaires"}))},start:function(){this.collection.fetch()}});
},{"267":267,"268":268,"28":28,"423":423,"433":433,"undefined":undefined}],276:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(422),_=require("underscore"),format=require(423),RowActionsBehavior=require(28),Session=Backbone.Radio.channel("app").request("ctx:session"),DetailView=Marionette.View.extend({template:require(269),className:"post-content answer-detail",templateContext:function(){return{response_id:this.model?this.model.get("response_id"):"",creation_date:format.formatDateTime(this.model.get("creation_date")),convertMediaPath:Session.convertMediaPath.bind(Session),nl2br:function(e){return _.escape(""+e).replace(/(\r\n|\n\r|\r|\n)+/g,"<br />")}}},showDetail:function(e){this.model=e,this.render()}}),RowView=Marionette.View.extend({template:require(271),className:"list-item",ui:{read:'span[data-role="read"]'},events:{"click .row":"onSelect","click @ui.read":"onToggleRead"},behaviors:[RowActionsBehavior],initialize:function(e){this.mergeOptions(e,["model","proxy"])},templateContext:function(){return{creation_date:format.formatDateTime(this.model.get("creation_date")),summary:this.model.getSummary()}},onSelect:function(e){"LABEL"!=e.target.tagName&&"INPUT"!=e.target.tagName&&this.proxy.trigger("select:row",this.model)},onToggleRead:function(e){return e.preventDefault(),this.model.save({is_read:!this.model.get("is_read")},{patch:!0}),!1}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(270),className:"container-fluid",service:"forms",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},detailView:null,filters:null,initialize:function(e){this.mergeOptions(e,["collection"]),this.filters={id:null,is_read:null},this.empty=new this.collection.model,this.detailView=new DetailView({model:this.empty}),this.listenTo(this.collection,"sync",function(e){e.model&&(this.collection.length>0?this.onChildviewSelectRow(this.collection.at(0)):this.onChildviewSelectRow(this.empty))}.bind(this))},onRender:function(){var e=new CollectionUtils.SelectCollection;e.add([{value:"read",label:"Lues",selected:1==this.filters.is_read},{value:"unread",label:"Non-lues",selected:0==this.filters.is_read}]);var t=new CollectionUtils.SelectCollection;t.add({value:"export",label:"Exporter les réponses",selected:!1}),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,extraClassname:"answers",extraListClassname:"answers-list",detailView:this.detailView,scrollContentEl:"div.answers-list",title:"Liste des réponses",selection:[{title:"Marquer lue",callback:this.readRep.bind(this)},{title:"Marquer non-lue",callback:this.unreadRep.bind(this)},{title:"Supprimer",callback:this.deleteRep.bind(this),confirm:!0}],filters:[{extraClassname:"select-category",title:"Tous les formulaires",collectionPromise:this.getOption("forms").promisedSelect(this.filters.id)},{extraClassname:"select-state",title:"Tous les états",collectionPromise:e},{extraClassname:"md-export",type:"button",collectionPromise:t}]}))},start:function(){var e={form_id:this.filters.id,extra_fields:"forms"};null!=this.filters.is_read&&(e.is_read=this.filters.is_read),this.collection.fetch({reset:!0,data:e})},readRep:function(e){return this.collection.bulkRead(e)},unreadRep:function(e){return this.collection.bulkUnred(e)},deleteRep:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){if(0==e.index)this.filters.id=""==e.value?null:e.value;else if(1==e.index)this.filters.u="unread"==e.value?"1":null;else if(2==e.index){if(!e.view)return;var t=e.view;if("export"==e.value){if(t.collection.length>1)return;if(!this.filters.id){var i=Backbone.Radio.channel("app").request("ctx:navigationController");return void i.showErrorModal("Veuillez choisir un formulaire")}t.overrideExtraClassname("md-loading"),t.render(),this.collection.exportAll({form_id:this.filters.id}).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}this.start()},onChildviewSelectRow:function(e){e.isNew()||e.get("is_read")||e.save({is_read:!0},{patch:!0}),this.getChildView("list").getChildren().each(function(t){t.model==e?t.$el.addClass("active"):t.$el.removeClass("active")}),this.detailView.showDetail(e)}});
},{"269":269,"270":270,"271":271,"28":28,"422":422,"423":423,"433":433,"undefined":undefined}],277:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),WysiwygBehavior=require(26),Forms=require(424);module.exports=Marionette.View.extend({template:require(272),className:"container",service:"forms",behaviors:[FormBehavior,WysiwygBehavior],fields:["use_captcha","recipient","subject","copy_to_sender","message","processing_purposes","is_consent_required"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"25":25,"26":26,"272":272,"424":424,"undefined":undefined}],278:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),api=require(421);module.exports=Backbone.Model.extend({urlRoot:"sites/@site/media/files",idAttribute:"media_id",file:null,uploadPreview:null,uploadProgression:{prct:0,status:"pending",error:""},parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{media_id:e.data}:e.data:e},defaults:{media_id:null,name:"",folder_id:0,description:"",original_name:"",type:"",ext:"",mime:"",weight:"",width:"",height:"",creation_date:"",modification_date:"",thumb:[]},setFile:function(e){if(this.setProgression(0,"pending"),api.max_post_size&&e.size>api.max_post_size)return this.destroy();if(this.set("name",e.name),this.set("ext",e.name.split(".").pop()),this.set("weight",e.size),this.set("type",e.type.match(/^image\//)?"image":"file"),this.file=e,"image"==this.get("type")){var t=this,i=new Image,a=self.URL||self.webkitURL||self;if(a.createObjectURL)return i.onload=function(){t.uploadPreview=this.src,t.trigger("change:upload"),delete this},void(i.src=a.createObjectURL(e));var r=new FileReader;r.onload=function(e){i.onload=function(){t.uploadPreview=t.createThumbnail(this),t.trigger("change:upload"),delete this},i.src=e.target.result},r.readAsDataURL(e)}},createThumbnail:function(e){var t=document.createElement("canvas");t.width=320,t.height=t.width/e.width*e.height;var i=t.getContext("2d",{alpha:!1});return i.drawImage(e,0,0,t.width,t.height),t.toDataURL("image/jpeg",.5)},upload:function(){var e=this,t=Backbone.$.Deferred(),i=this.file;if(this.setProgression(0,"pending"),api.max_post_size&&i.size>api.max_post_size)return t.reject("Ce fichier est trop volumineux"),this.setProgression(100,"fail","Ce fichier est trop volumineux"),t.promise();var a=new FormData;return a.append("name",e.get("name")),a.append("folder_id",e.get("folder_id")),a.append("file",i),Backbone.ajax({method:"POST",url:e.url(),contentType:!1,processData:!1,dataType:"json",xhr:function(){var t=Backbone.$.ajaxSettings.xhr();return t.upload.onprogress=function(t){t.lengthComputable?e.setProgression(t.loaded/t.total*100,"uploading"):e.setProgression(50,"uploading")},t.upload.onload=function(){e.setProgression(100,"uploading")},t},data:a}).done(function(i){return i.data&&_.isNumber(i.data)?(e.set("media_id",i.data),e.setProgression(100,"done"),void t.resolve()):(e.setProgression(100,"fail"),void t.reject("Fail"))}).fail(function(i){e.setProgression(100,"fail","Erreur inattendue"),t.reject("Fail")}),t.promise()},setProgression:function(e,t,i){this.uploadProgression.prct=e,this.uploadProgression.status=t,i&&(this.uploadProgression.error=i),this.trigger("change:upload")}});
},{"421":421,"undefined":undefined}],279:[function(require,module,exports){
function checkExport(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/export/media/folder/"+t,method:"GET"}).then(function(e){return e.data})}var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Job=require(307);module.exports=Backbone.Collection.extend({folder_id:null,url:function(){return this.folder_id?"sites/@site/media/folders/"+this.folder_id+"/files":"sites/@site/media/files"},model:require(278),parse:function(e){return this.meta=e.meta,e.data},upload:function(){var e=[];return this.each(function(t){"pending"==t.uploadProgression.status&&e.push(t.upload())}),Backbone.$.when.apply(this,e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)},bulkMove:function(e,t){return CollectionUtils.bulkAction(this,function(e){return e.get("folder_id")==t?Backbone.$.Deferred().resolve():e.save({folder_id:t},{patch:!0,wait:!0})},e)},exportAll:function(e){return Backbone.ajax({url:"sites/@site/export/media/folder",method:"POST",data:e}).then(function(e){var t=new Job({job_id:e.data.job_id});return t.watch().then(function(){return checkExport(t)})})}});
},{"278":278,"307":307,"422":422,"undefined":undefined}],280:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/media/folders",idAttribute:"folder_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{folder_id:e.data}:e.data:e},defaults:{folder_id:null,name:"",folder_key:"",parent_folder_id:0,is_bookmarked:!1,has_restrictions:!1,restrictions:[]}});
},{"undefined":undefined}],281:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(422);module.exports=Backbone.Collection.extend({url:"sites/@site/media/folders",model:require(280),parse:function(e){return this.meta=e.meta,e.data},getMenuTree:function(){var e={model:null,childs:[]},t={};return this.each(function(r){var i={model:r,childs:[]};t["i"+r.get("folder_id")]=i;var l;l=0==r.get("parent_folder_id")?e:t["i"+r.get("parent_folder_id")],l.childs.push(i)}),e},selectPayload:function(){var e=[],t={};return this.each(function(r){var i=1;r.get("parent_folder_id")>0&&(i=1+t["p"+r.get("parent_folder_id")]),t["p"+r.get("folder_id")]=i;var l={value:r.get("folder_id"),label:r.get("name"),indent:i};e.push(l)}),e},promisedSelect:function(e){var t=this;return this.fetch({data:{extra_fields:"recursive"}}).then(function(){var r=new CollectionUtils.SelectCollection,i=[],l={};return t.each(function(t){var r=1;t.get("parent_folder_id")>0&&(r=1+l["p"+t.get("parent_folder_id")]),l["p"+t.get("folder_id")]=r;var n={value:t.get("folder_id"),label:t.get("name"),indent:r,selected:e&&t.get("folder_id")==e};i.push(n)}),r.add(i),r})}});
},{"280":280,"422":422,"undefined":undefined}],282:[function(require,module,exports){
function getHeadersAction(e){e=e||{};var i=[];if(e.addDownloadFile&&i.push({title:"Télécharger",callback:["actionDownloadFile",e.addDownloadFile]}),e.addDownloadFolder&&i.push({title:"Télécharger",callback:["actionDownloadFolder",e.addDownloadFolder]}),e.addPublish&&i.push({title:"Publier un fichier",callback:["actionPublish",e.addPublish]}),e.addFolder&&i.push({title:"Ajouter un dossier",callback:["actionNewFolder",e.addFolder]}),e.addSave){var t={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};i.length<=1?i.push(t):i.splice(1,0,t)}return i}function HeaderTabsFolder(e){return[{title:"Contenu du dossier",url:"/media/folders/"+e+"/files"},{title:"Paramètres du dossier",url:"/media/folders/"+e}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Controller=require(30),Folder=require(280),Folders=require(281),File=require(278),Files=require(279),FilesView=require(297),FolderView=require(298),FileView=require(294),PublishModalView=require(301),MenuTree=require(434),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(293),service:"media",events:{"show.bs.collapse":function(e){Backbone.$('[href="#'+e.target.id+'"]',this.el).parent().removeClass("menu-expand-more").addClass("menu-expand-less"),this.menuTree.openNode(parseInt(e.target.id.substring(8)))},"hide.bs.collapse":function(e){Backbone.$('[href="#'+e.target.id+'"]',this.el).parent().removeClass("menu-expand-less").addClass("menu-expand-more"),this.menuTree.closeNode(parseInt(e.target.id.substring(8)))},"click a":function(e){var i=Backbone.$(e.currentTarget);"#"!=i.attr("href")&&(Backbone.$("a",this.el).parent().removeClass("active"),i.parent().addClass("active"))}},folder_id:-1,initialize:function(e){this.collection=new Folders,this.fetchAndRender();var i=this;this.menuTree=new MenuTree({nodeInfo:function(e){return{url:"/media/folders/"+e.get("folder_id")+"/files",name:e.get("name"),is_active:e.get("folder_id")==i.folder_id,extraClassname:e.get("has_restrictions")?" pagetype-extranet":""}}})},onChangeFolder:function(e){this.folder_id!=e&&(this.folder_id=e,this.render())},onRefreshFolders:function(){this.fetchAndRender()},fetchAndRender:function(){this.collection.fetch({data:{extra_fields:"recursive"}}).done(function(){this.render()}.bind(this))},templateContext:function(){return{renderMenu:function(){return this.folder_id==-1?"":this.menuTree.render(this.collection.getMenuTree()).html}.bind(this)}}}),MediaController=Controller.extend({sidebarMenuService:"media",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Médiathèque",href:"/media"}],showIndex:function(){this.navigationController.navigate("/media/folders/2/files")},showFiles:function(e){var i=new Folder({folder_id:e});this.triggerSidebarMenu("change:folder",e);var t=new Files;t.folder_id=e,i.fetch().done(function(){this.navigationController.showContent(new FilesView({collection:t,folders:new Folders})),this.setHeader({title:i.get("name")},getHeadersAction({addPublish:i.get("folder_id"),addFolder:i.get("folder_id")}),HeaderTabsFolder(e))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Dossier introuvable"})}.bind(this))},showFolder:function(e){var i=new Folder({folder_id:e}),t=new Folders;t.fetch({data:{extra_fields:"recursive"}}),this.triggerSidebarMenu("change:folder",e),i.fetch().done(function(){var r=new FolderView({model:i,folders:t});this.listenTo(i,"change",function(e){e.hasChanged("name")&&this.setBreadCrum({title:e.get("name")},!0),this.triggerSidebarMenu("refresh:folders")}.bind(this)),this.listenTo(i,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/media/folders/"+i.get("parent_folder_id")+"/files"),this.triggerSidebarMenu("refresh:folders")}),this.navigationController.showContent(r),this.setHeader({title:i.get("name")},getHeadersAction({addSave:!0,addDownloadFolder:i.get("folder_id"),addPublish:i.get("folder_id"),addFolder:i.get("folder_id")}),HeaderTabsFolder(e))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Dossier introuvable"})}.bind(this))},actionNewFolder:function(e){var i=new Folder({name:"Intitulé par défaut",parent_folder_id:e});return i.save().done(function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/media/folders/"+i.get("folder_id")),this.triggerSidebarMenu("refresh:folders")}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},actionDownloadFolder:function(e){console.log("actionDownloadFolder",e)},showFile:function(e){function i(e,i){return[{href:"/media/folders/"+i.get("folder_id")+"/files",title:i.get("name")},{title:e.get("name")}]}var t,r=new File({media_id:e}),n=new Folders;n.fetch({data:{extra_fields:"recursive"}}),r.fetch().then(function(){return t=new Folder({folder_id:r.get("folder_id")}),t.fetch()}).done(function(){this.triggerSidebarMenu("change:folder",r.get("folder_id"));var e=new FileView({model:r,folder:t,folders:n});this.listenTo(t,"sync",function(e){this.setBreadCrum(i(r,e),!0)}),this.listenTo(r,"change",function(e){e.hasChanged("name")&&this.setBreadCrum(i(e,t),!0),e.hasChanged("folder_id")&&this.triggerSidebarMenu("change:folder",r.get("folder_id"))}.bind(this)),this.listenTo(r,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/media/folders/"+r.get("folder_id")+"/files")}),this.navigationController.showContent(e),this.setHeader(i(r,t),getHeadersAction({addSave:!0,addDownloadFile:r.get("media_id"),addPublish:r.get("folder_id")}))}.bind(this)).fail(function(){this.triggerSidebarMenu("change:folder",null),this.notFound(),this.setHeader({title:"Fichier introuvable"})}.bind(this))},actionPublish:function(e){var i=new Files;i.folder_id=e;var t=new PublishModalView({collection:i});this.navigationController.showInModal(t,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier"}})},actionDownloadFile:function(e){console.log("actionDownloadFile",e)}});module.exports=Marionette.AppRouter.extend({controller:new MediaController,appRoutes:{media:"showIndex","media/folders/:id/files":"showFiles","media/folders/:id":"showFolder","media/files/:id":"showFile"},onRoute:function(e,i,t){this.controller.showSidebarMenu()}});
},{"18":18,"278":278,"279":279,"280":280,"281":281,"293":293,"294":294,"297":297,"298":298,"30":30,"301":301,"434":434,"undefined":undefined}],283:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning text-center" role="alert">L\'adresse publique de ce fichier est <a href="'+(null==(__t=thumb.url)?"":_.escape(__t))+'" target="_blank">'+(null==(__t=thumb.url)?"":_.escape(__t))+'</a></div><form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="row media-detail"><div class="col-xs-4"> ',__p+="image"==type?' <div class="media-object"><a class="preview" href="'+(null==(__t=thumb.url)?"":_.escape(__t))+'" target="_blank"><img alt="'+(null==(__t=name)?"":_.escape(__t))+'" src="'+(null==(__t=convertMediaPath("/media/g_vignette/"+media_id+".jpg"))?"":_.escape(__t))+"&"+(null==(__t=render_counter)?"":_.escape(__t))+'"></a></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' <p class="media-info">'+(null==(__t=original_name)?"":_.escape(__t))+"<br> "+(null==(__t=size)?"":_.escape(__t))+" <br> ","image"==type&&(__p+=" "+(null==(__t=width)?"":_.escape(__t))+" x "+(null==(__t=height)?"":_.escape(__t))+"px<br> "),__p+=" Modifié le "+(null==(__t=last_date)?"":_.escape(__t))+"<br>Par "+(null==(__t=modification_by)?"":_.escape(__t))+' </p></div><div class="col-xs-8"><div class="form-group"><label class="control-label" for="name">Intitulé du fichier</label><input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le fichier"></div><div class="row"><div class="col-xs-7"><div class="form-group"><label class="control-label">Dossier</label><div data-role="folder"></div></div></div></div><div class="form-group"><label class="control-label" for="description">Description</label><input class="form-control" id="description" name="description" value="'+(null==(__t=description)?"":_.escape(__t))+'" placeholder="Ca doit servir à quelque chose, mais on sait pas quoi..."></div><div class="form-group"><label class="control-label" for="file">Remplacement de fichier</label><input id="file" name="file" type="file"></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],284:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<label class="control-label">'+(null==(__t=fieldLabel)?"":_.escape(__t))+"</label> ",comment&&(__p+='<p class="form-control-static">'+(null==(__t=comment)?"":_.escape(__t))+"</p>"),__p+=' <p class="form-control-static"><a href="#" data-role="select">'+(null==(__t=file?file.name:"Accéder à la médiathèque")?"":_.escape(__t))+"</a> ",file&&(__p+=' <a href="#" data-role="clear" class="md-icon md-delete"></a></p> '),__p+=' <input type="hidden" name="'+(null==(__t=fieldname)?"":_.escape(__t))+'" value="'+(null==(__t=value)?"":_.escape(__t))+'">';return __p};
},{"undefined":undefined}],285:[function(require,module,exports){
arguments[4][107][0].apply(exports,arguments)
},{"107":107,"undefined":undefined}],286:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-6"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="media_file_'+(null==(__t=media_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=media_id)?"":_.escape(__t))+'" type="checkbox"><label for="media_file_'+(null==(__t=media_id)?"":_.escape(__t))+'"></label></div></div><div class="media-left"> ',__p+="image"==type?' <div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="" src="'+(null==(__t=convertMediaPath("/media/miniature/"+media_id+".jpg"))?"":_.escape(__t))+'"></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' </div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> "+(null==(__t=size)?"":_.escape(__t)),"image"==type&&(__p+=" • "+(null==(__t=width)?"":_.escape(__t))+" x "+(null==(__t=height)?"":_.escape(__t))+"px"),__p+=' </div></div></div><div class="col-xs-3 no-white-space">Modifié le '+(null==(__t=last_date)?"":_.escape(__t))+'</div><div class="col-xs-3"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="/media/files/'+(null==(__t=media_id)?"":_.escape(__t))+'" role="button">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#">Copier l\'adresse</a></li><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div>';return __p};
},{"undefined":undefined}],287:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="name">Intitulé du dossier</label> ',__p+=parent_folder_id>0?' <input class="form-control" id="name" name="name" value="'+(null==(__t=name)?"":_.escape(__t))+'" placeholder="Intitulé permettant d\'identifier le dossier"> ':" <p>"+(null==(__t=name)?"":_.escape(__t))+"</p> ",__p+=" </div> ",parent_folder_id>0&&(__p+=' <div class="row"><div class="col-xs-5"><div class="form-group"><label class="control-label" for="">Dossier parent</label><div data-role="folder"></div></div></div></div> '),__p+=' <div class="form-group"><label class="control-label" for="exmemple1">Identifiant API Front-office</label><p>'+(null==(__t=folder_key)?"":_.escape(__t))+'</p></div></div><footer class="post-footer"></footer></article> ',parent_folder_id>0&&(__p+=' <article class="post-article"><header class="post-header"><h1>Droits d\'accès</h1></header><div class="post-content"><p>Restreindre l\'accès à ce dossier aux seuls <a href="/customers/groups">groupes</a> ou <a href="/customers">membres</a> autorisés.</p><div data-role="restrictions"></div></div><footer class="post-footer"></footer></article> '),__p+=' </form><div class="save"><div class="btn-toolbar" role="toolbar"> ',parent_folder_id>0&&(__p+=' <button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> '),__p+=' <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],288:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><br><div class="form-inline"><div class="form-group"><div data-role="categories"></div></div><div class="form-group has-feedback"><input class="form-control" name="term" placeholder="Rechercher"> <span class="form-control-feedback md-feedback md-search"></span></div><div class="btn-group pull-right"><button type="button" class="btn btn-modal btn-icon md-icon md-sort dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu" data-role="order"><li data-sort="name" class="'+(null==(__t="name"==order?"active":"")?"":__t)+'"><a href="#">Intitulé</a></li><li data-sort="-date" class="'+(null==(__t="-date"==order?"active":"")?"":__t)+'"><a href="#">Modification</a></li></ul></div></div></header><div data-role="list"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],289:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row '+(null==(__t=is_selected?"active":"")?"":__t)+'"><div class="col-xs-10"><div class="media"><div class="media-left"> ',__p+="image"==type?' <div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="'+(null==(__t=name)?"":_.escape(__t))+'" src="'+(null==(__t=convertMediaPath("/media/miniature/"+media_id+".jpg"))?"":_.escape(__t))+'"></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' </div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> "+(null==(__t=size)?"":_.escape(__t)),"image"==type&&(__p+=" • "+(null==(__t=width)?"":_.escape(__t))+" x "+(null==(__t=height)?"":_.escape(__t))+"px"),__p+=' </div></div></div><div class="col-xs-2"> ',is_selectable&&(__p+=' <a class="btn btn-option pull-right" href="#" role="button" data-role="select">Choisir</a> '),__p+=" </div></div>";return __p};
},{"undefined":undefined}],290:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><form><div class="row media-detail"><div class="col-xs-4"> ',__p+="image"==type?' <div class="media-object"><a class="preview" href="'+(null==(__t=thumb.url)?"":_.escape(__t))+'" target="_blank"><img alt="'+(null==(__t=name)?"":_.escape(__t))+'" src="'+(null==(__t=convertMediaPath("/media/g_vignette/"+media_id+".jpg"))?"":_.escape(__t))+'"></a></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' <p class="media-info"> '+(null==(__t=original_name)?"":_.escape(__t))+"<br> "+(null==(__t=size)?"":_.escape(__t))+" <br> ","image"==type&&(__p+=" "+(null==(__t=width)?"":_.escape(__t))+" x "+(null==(__t=height)?"":_.escape(__t))+"px<br> "),__p+=" Modifié le "+(null==(__t=last_date)?"":_.escape(__t))+' </p></div><div class="col-xs-8"> ',"image"==type&&(__p+=' <div class="row"><div class="col-xs-7"><div class="form-group"><label class="control-label" for="m_integration_type">Type d\'intégration</label><select id="m_integration_type" name="integration_type" data-style="selectify"><option '+(null==(__t="inline"==integration?'selected="selected"':"")?"":__t)+' value="inline">Insérer l\'image</option><option '+(null==(__t="inline"==integration?"":'selected="selected"')?"":__t)+' value="file">Insérer un lien vers l\'image</option></select></div> ',"inline"==integration&&(__p+=' <div class="form-group"><label class="control-label">Taille de l\'image</label><div data-role="image_variant"></div></div><div class="form-group"><label class="control-label" for="m_image_align">Alignement</label><select id="m_image_align" name="image_align" data-style="selectify"><option value="default">Par défaut</option><option value="left">À gauche</option><option value="right">À droite</option><option value="middle">Au milieu</option></select></div> '),__p+=" </div></div> ","inline"==integration&&(__p+=' <div class="form-group"><label class="control-label" for="m_alt">Texte alternatif</label><input class="form-control" id="m_alt" name="alt" value="'+(null==(__t=description)?"":_.escape(__t))+'" placeholder="Contenu de l\'attribut alt"></div><label class="control-label">Marges</label><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><input class="form-control" name="margin_top" placeholder="Haut"> <span class="form-control-feedback md-pixel"></span></div></div><div class="col-xs-3"><div class="form-group has-feedback"><input class="form-control" name="margin_right" placeholder="Droite"> <span class="form-control-feedback md-pixel"></span></div></div><div class="col-xs-3"><div class="form-group has-feedback"><input class="form-control" name="margin_bottom" placeholder="Bas"> <span class="form-control-feedback md-pixel"></span></div></div><div class="col-xs-3"><div class="form-group has-feedback"><input class="form-control" name="margin_left" placeholder="Gauche"> <span class="form-control-feedback md-pixel"></span></div></div></div><label class="control-label">Taille</label><div class="row"><div class="col-xs-3"><div class="form-group has-feedback"><input class="form-control" id="image_width" name="image_width" placeholder="Largeur"> <span class="form-control-feedback md-pixel"></span></div></div><div class="col-xs-3"><div class="form-group has-feedback"><input class="form-control" id="image_height" name="image_height" placeholder="Hauteur"> <span class="form-control-feedback md-pixel"></span></div></div></div> '),__p+=" "),__p+=' <div class="form-group"><label class="control-label" for="m_title">Titre</label><input class="form-control" id="m_title" name="title" placeholder="Contenu de l\'attribut title"></div><div class="form-group"><label class="control-label" for="m_class">Class</label><input class="form-control" id="m_class" name="class" placeholder="Contenu de l\'attribut class"></div><label class="control-label">Insérer également les informations sur fichier</label><div class="form-group"><div class="checkbox-inline"><input id="m_xtra_name" name="xtra_name" value="1" type="checkbox"><label for="m_xtra_name">Nom</label></div><div class="checkbox-inline"><input id="m_xtra_file" name="xtra_file" value="1" type="checkbox"><label for="m_xtra_file">Fichier</label></div><div class="checkbox-inline"><input id="m_xtra_weight" name="xtra_weight" value="1" type="checkbox"><label for="m_xtra_weight">Poids</label></div> ',"image"==type&&(__p+=' <div class="checkbox-inline"><input id="m_xtra_size" name="xtra_size" value="1" type="checkbox"><label for="m_xtra_size">Taille</label></div> '),__p+=' <div class="checkbox-inline"><input id="m_xtra_modification" name="xtra_modification" value="1" type="checkbox"><label for="m_xtra_modification">Date de modification</label></div><div class="checkbox-inline"><input id="m_xtra_author" name="xtra_author" value="1" type="checkbox"><label for="m_xtra_author">Auteur</label></div></div></div></div></form></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],291:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content mediatheque-upload" data-role="dropzone"> ',canDragAndDrop&&(__p+=' <div id="dropzone" class="dropzone"><div class="md-icon md-upload"></div>Glisser-déposer des fichiers ici</div> '),__p+=' <label class="file-select btn btn-option">Sélectionner un fichier&hellip; <input type="file" style="display: none" '+(null==(__t=isMultiFiles?'multiple="multiple"':"")?"":__t)+'></label></div><footer class="post-footer"></footer></article><article class="post-article"><div data-role="list"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],292:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-8"><div class="media"><div class="media-left"> ',__p+="image"==type?' <div class="media-object md-icon md-image img-default"></div><div class="media-object"><img alt="'+(null==(__t=name)?"":_.escape(__t))+'" src="'+(null==(__t=uploadPreview)?"":__t)+'"></div> ':' <div class="md-icon md-file media-object file"></div><span class="file-type">'+(null==(__t=ext)?"":_.escape(__t))+"</span> ",__p+=' </div><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> "+(null==(__t=size)?"":_.escape(__t))+" ","fail"==uploadProgression.status&&(__p+=' <div class="text-danger">'+(null==(__t=uploadProgression.error)?"":_.escape(__t))+"</div> "),__p+=" </div></div></div> ","pending"==uploadProgression.status||"uploading"==uploadProgression.status?__p+=' <div class="col-xs-3"><div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="'+(null==(__t=uploadProgression.prct)?"":_.escape(__t))+'" aria-valuemin="0" aria-valuemax="100" style="width:'+(null==(__t=uploadProgression.prct)?"":_.escape(__t))+'%"></div></div></div> ':"done"==uploadProgression.status&&(__p+=' <div class="col-xs-4"><span class="md-icon md-check-circle pull-right"></span></div> '),__p+=" ","pending"==uploadProgression.status&&(__p+=' <div class="col-xs-1"><a href="#" class="md-icon md-delete pull-right" data-role="cancel"></a></div> '),__p+=" </div>";return __p};
},{"undefined":undefined}],293:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<h2>Médiathèque</h2> "+(null==(__t=renderMenu())?"":__t);return __p};
},{"undefined":undefined}],294:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(423),_=require("underscore"),SelectView=require(436),FormBehavior=require(25),Forms=require(424),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(283),className:"container",service:"media",behaviors:[FormBehavior],regions:{folder:{el:"div[data-role='folder']",replaceElement:!0}},fields:["name","description","folder_id"],tempfileUpload:null,events:{"change input[type=file]":"dropFile"},render_counter:1,initialize:function(e){this.mergeOptions(e,["model","folder","folders"]),this.listenTo(this.model,"change:folder_id",this.onFolderChange)},templateContext:function(){return{last_date:format.formatDateTime(this.model.get("modification_date")),size:format.formatBytes(this.model.get("weight"),2),convertMediaPath:Session.convertMediaPath.bind(Session),render_counter:this.render_counter++}},onRender:function(){this.showChildView("folder",new SelectView({collection:this.folders,selected:this.model.get("folder_id"),name:"folder_id"}))},onFolderChange:function(){this.folder.clear({silent:!0}),this.folder.set("folder_id",this.model.get("folder_id")),this.folder.fetch()},onSave:function(){var e=Forms.extractFields(this.fields,this);return this.tempfileUpload&&(e.file=this.tempfileUpload),this.model.save(e,{patch:!0,wait:!0}).done(function(){this.render()}.bind(this))},onDelete:function(){return this.model.destroy({wait:!0})},dropFile:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var i=e.originalEvent.dataTransfer,t=i?i.files:e.originalEvent.target.files;_.each(t,function(e){this.tempfileUpload=e}.bind(this))}});
},{"25":25,"283":283,"423":423,"424":424,"436":436,"undefined":undefined}],295:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),File=require(278),Files=require(279),PublishModalView=require(301),SelectModalView=require(299);module.exports=Marionette.View.extend({template:require(284),className:"form-group",fieldname:"",fieldLabel:"",comment:"",type:"image",value:"",model:null,ui:{selectBtn:'a[data-role="select"]',clearBtn:'a[data-role="clear"]'},events:{"click @ui.selectBtn":"select","click @ui.clearBtn":function(){this.model.clear(),this.render()}},modelEvents:{sync:"render",change:"render"},loaded:!1,initialize:function(e){this.mergeOptions(e,["fieldname","value","type","fieldLabel","comment"]),this.model=new File,this.value>0?(this.model.set("media_id",this.value),this.model.fetch().done(function(){this.loaded=!0}.bind(this))):this.loaded=!0,this.listenTo(this.model,"change",function(){this.loaded&&this.triggerMethod("field:change")}.bind(this))},templateContext:function(){return{fieldname:this.fieldname,fieldLabel:this.fieldLabel,comment:this.comment,file:this.model.get("media_id")>0?this.model.toJSON():null,value:this.model.get("media_id")}},select:function(){var e=new Files,i=new SelectModalView({type:this.type,model:this.model,collection:e});this.listenTo(i,"action:modal",this.switchToPublish);var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showInModal(i,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier un fichier"}})},switchToPublish:function(e){var i=new Files;i.folder_id=e.currentFolder;var t=new PublishModalView({isMultiFiles:!1,collection:i});this.listenTo(t,"uploaded:files",this.onUploadedFiles);var l=Backbone.Radio.channel("app").request("ctx:navigationController");l.showInModal(t,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier un fichier"}})},onUploadedFiles:function(e){var i=e.find(function(e){return"done"==e.uploadProgression.status});i&&this.model.set(i.toJSON());var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.hideModal()}});
},{"278":278,"279":279,"284":284,"299":299,"301":301,"undefined":undefined}],296:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),File=require(278),Files=require(279),PublishModalView=require(301),SelectModalView=require(299);module.exports=Marionette.View.extend({template:_.template("Ajouter une image"),tagName:"a",attributes:{href:"#"},type:"image",model:null,events:{click:"select"},modelEvents:{sync:"proxySelection",change:"proxySelection"},initialize:function(e){this.mergeOptions(e,["type"]),this.model=new File},proxySelection:function(){this.triggerMethod("selected:file",this.model.toJSON())},select:function(){var e=new Files,i=new SelectModalView({type:this.type,model:this.model,collection:e});this.listenTo(i,"action:modal",this.switchToPublish);var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.showInModal(i,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier un fichier"}})},switchToPublish:function(e){var i=new Files;i.folder_id=e.currentFolder;var t=new PublishModalView({isMultiFiles:!1,collection:i});this.listenTo(t,"uploaded:files",this.onUploadedFiles);var o=Backbone.Radio.channel("app").request("ctx:navigationController");o.showInModal(t,{title:"Médiathèque",modalClass:"mediatheque modal-right",action:{title:"Publier un fichier"}})},onUploadedFiles:function(e){var i=e.find(function(e){return"done"==e.uploadProgression.status});i&&this.model.set(i.toJSON());var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.hideModal()}});
},{"278":278,"279":279,"299":299,"301":301,"undefined":undefined}],297:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(422),format=require(423),ControllerChannel=Backbone.Radio.channel("controller"),RowActionsBehavior=require(28),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(286),className:"list-item list-media",templateContext:function(){return{last_date:format.formatDateTime(this.model.get("modification_date")),size:format.formatBytes(this.model.get("weight"),2),convertMediaPath:Session.convertMediaPath.bind(Session)}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(285),className:"container-fluid",service:"media",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},filters:null,sortOrder:"-date",initialize:function(e){this.mergeOptions(e,["collection","folders"]),this.filters={folder_id:null},this.start(),this.listenTo(ControllerChannel,"uploaded:files",function(e){e==this.collection.folder_id&&this.start()}.bind(this)),this.listenTo(this.collection,"sync",this.onSync)},onRender:function(){var e=new CollectionUtils.SelectCollection;e.add({value:"export",label:"Exporter les fichiers",selected:!1}),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des fichiers",order:[{title:"Intitulé",is_active:!1,value:"name"},{title:"Modification",is_active:!0,value:"-date"}],selection:[{title:"Déplacer",callback:this.movePosts.bind(this)},{title:"Supprimer",callback:this.deletePosts.bind(this),confirm:!0}],filters:[{id:"folder",extraClassname:"select-category",title:"Destination",collectionPromise:this.folders.promisedSelect(this.collection.folder_id)},{id:"export",extraClassname:"md-export",type:"button",collectionPromise:e}]}))},start:function(){this.collection.fetch({reset:!0,data:{sort:this.sortOrder?this.sortOrder:null}})},onSync:function(e){e instanceof Backbone.Model&&e.get("folder_id")!=this.collection.folder_id&&this.collection.remove(e)},movePosts:function(e){if(""!=this.filters.folder_id&&null!=this.filters.folder_id){this.collection.folder_id;return this.collection.bulkMove(e,this.filters.folder_id)}},deletePosts:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){if("folder"==e.model.get("id"))this.filters.folder_id=e.value;else if("export"==e.model.get("id")){if(!e.view)return;var t=e.view;if("export"==e.value){if(t.collection.length>1)return;t.overrideExtraClassname("md-loading"),t.render(),this.collection.exportAll({folder_id:this.collection.folder_id}).done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}},onChildviewChangeOrder:function(e){this.sortOrder=e,this.start()}});
},{"28":28,"285":285,"286":286,"422":422,"423":423,"433":433,"undefined":undefined}],298:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectView=require(436),RestrictionsView=require(258),FormBehavior=require(25),Forms=require(424),Restrictions=require(233);module.exports=Marionette.View.extend({template:require(287),className:"container",service:"media",behaviors:[FormBehavior],regions:{folder:{el:"div[data-role='folder']",replaceElement:!0},restrictions:{el:"div[data-role='restrictions']",replaceElement:!0}},fields:["name","parent_folder_id"],initialize:function(e){this.mergeOptions(e,["model","folders"])},onRender:function(){this.model.get("parent_folder_id")>0&&(this.showChildView("folder",new SelectView({collection:this.folders,selected:this.model.get("parent_folder_id"),name:"parent_folder_id"})),this.showChildView("restrictions",new RestrictionsView({restrictions:this.model.get("restrictions")})))},onSave:function(){var e=Forms.extractFields(this.fields,this);if(this.model.get("parent_folder_id")>0){var i=this.getChildView("restrictions").getRestrictions(),t=new Restrictions;t.setType("media/folders",this.model.get("folder_id")),t.set("customer_id",i.customers),t.set("group_id",i.groups),t.save(),e.has_restrictions=i.customers.length+i.groups.length>0}return this.model.save(e,{patch:!0,wait:!0}).done(function(){this.model.get("parent_folder_id")>0&&this.model.hasChanged("parent_folder_id")&&this.folders.fetch({data:{extra_fields:"recursive"}})}.bind(this))},onDelete:function(){return this.model.destroy({wait:!0}).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.showErrorModal(e)}.bind(this))}});
},{"233":233,"25":25,"258":258,"287":287,"424":424,"436":436,"undefined":undefined}],299:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(423),SelectView=require(436),Folders=require(281),ScrollBehavior=require(21),Session=Backbone.Radio.channel("app").request("ctx:session"),RowView=Marionette.View.extend({template:require(289),className:"list-item",events:{'click a[data-role="select"]':function(){this.triggerMethod("select:file",this.model)}},selectableType:"image",selected:null,initialize:function(e){this.mergeOptions(e,["selectableType","selected"])},templateContext:function(){return{size:format.formatBytes(this.model.get("weight"),2),is_selectable:"file"==this.selectableType||this.model.get("type")==this.selectableType,is_selected:this.model.get("media_id")==this.selected,convertMediaPath:Session.convertMediaPath.bind(Session)}}}),ListView=Marionette.CollectionView.extend({className:"post-content post-list list-media",childView:RowView,selectableType:"image",selected:null,behaviors:[{behaviorClass:ScrollBehavior,contentEl:".modal-body"}],initialize:function(e){this.mergeOptions(e,["selectableType","selected"])},buildChildView:function(e,t,i){var r=_.extend({model:e,selectableType:this.selectableType,selected:this.selected},i);return new t(r)},onChildviewSelectFile:function(e){this.triggerMethod("select:file",e)}});module.exports=Marionette.View.extend({template:require(288),folder_id:null,type:"image",regions:{list:{el:"div[data-role='list']",replaceElement:!0},categories:{el:"div[data-role='categories']",replaceElement:!0}},ui:{term:'input[name="term"]',order:'[data-role="order"] li'},currentFolder:null,currentTerm:null,currentOrder:"-date",events:{"keyup @ui.term":_.debounce(function(e){this.currentTerm=this.getUI("term").val(),this.updateFilter()},300),"click @ui.order":"changeOrder"},initialize:function(e){this.mergeOptions(e,["model","collection","type"])},onRender:function(){var e=new Folders,t=e.fetch({data:{extra_fields:"recursive"}});this.showChildView("categories",new SelectView({name:"categories",collection:e,selected:this.model.get("folder_id")})),this.showChildView("list",new ListView({collection:this.collection,selected:this.model.get("media_id"),selectableType:this.type})),this.model.get("folder_id")>0?(this.currentFolder=this.model.get("folder_id"),this.updateFilter()):t.done(function(){this.currentFolder=e.at(0).get("folder_id"),this.updateFilter()}.bind(this))},onChildviewChange:function(e,t){this.currentFolder=e,this.getUI("term").val(""),this.currentTerm="",this.updateFilter()},changeOrder:function(e){var t=Backbone.$(e.currentTarget).data("sort");""!=t&&t!=this.currentOrder&&(this.getUI("order").removeClass("active"),Backbone.$(e.currentTarget).addClass("active"),this.currentOrder=t,this.updateFilter())},updateFilter:function(){this.fetchFiles(""==this.currentTerm||null==this.currentTerm?this.currentFolder:null,this.currentTerm,this.currentOrder)},fetchFiles:function(e,t,i){this.collection.reset(),this.collection.folder_id=null,this.collection.fetch({data:{folder_id:e,term:t,sort:i}})},onChildviewSelectFile:function(e){this.model.set(e.toJSON()),this.triggerMethod("close:modal")},templateContext:function(){return{order:this.currentOrder}}});
},{"21":21,"281":281,"288":288,"289":289,"423":423,"436":436,"undefined":undefined}],300:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(423),Forms=require(424),Prefs=require(362),SelectView=require(436),SelectifyBehavior=require(24),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(290),behaviors:[SelectifyBehavior],regions:{image_variant:{el:"div[data-role='image_variant']",replaceElement:!0}},ui:{integration_type:"#integration_type"},events:{"change @ui.integration_type":function(e){this.integration="inline"==Backbone.$(e.currentTarget).val()?"inline":"file",this.render()}},integration:"file",prefs:null,initialize:function(e){this.mergeOptions(e,["model"]),this.integration="image"==this.model.get("type")?"inline":"file",this.prefs=new Prefs},templateContext:function(){return{integration:this.integration,last_date:format.formatDateTime(this.model.get("modification_date")),size:format.formatBytes(this.model.get("weight"),2),convertMediaPath:Session.convertMediaPath.bind(Session)}},onRender:function(){"image"==this.model.get("type")&&"inline"==this.integration&&this.showChildView("image_variant",new SelectView({collectionPromise:this.prefs.promisedSelect().then(function(e){return e.at(0).set("label",e.at(0).get("label")+" : "+this.model.get("width")+"x"+this.model.get("height")+" px"),e}.bind(this)),name:"image_variant"}))},onActionModal:function(){var e=["title","class","xtra_name","xtra_file","xtra_weight","xtra_modification","xtra_author"];"image"==this.model.get("type")&&e.push("integration_type","image_variant","image_align","alt","margin_top","margin_right","margin_bottom","margin_left","image_width","image_height","xtra_size");var i=Forms.extractFields(e,this);this.triggerMethod("insert:file",i),this.triggerMethod("close:modal")}});
},{"24":24,"290":290,"362":362,"423":423,"424":424,"436":436,"undefined":undefined}],301:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(423),ControllerChannel=Backbone.Radio.channel("controller"),RowView=Marionette.View.extend({template:require(292),className:"list-item",events:{'click a[data-role="cancel"]':"cancel"},modelEvents:{"change:upload":"render"},cancel:function(){this.model.destroy()},templateContext:function(){return{uploadPreview:this.model.uploadPreview,size:format.formatBytes(this.model.get("weight"),2),uploadProgression:this.model.uploadProgression}}}),ListView=Marionette.CollectionView.extend({className:"post-content post-list list-media mediatheque-uploaded-file",childView:RowView});module.exports=Marionette.View.extend({template:require(291),ui:{dropzone:"div[data-role='dropzone']"},events:{"drop @ui.dropzone, input[type=file]":"drop","change input[type=file]":"drop","dragenter @ui.dropzone":"dragEnter","dragleave @ui.dropzone":"dragLeave"},regions:{list:{el:"div[data-role='list']",replaceElement:!0}},isMultiFiles:!0,initialize:function(e){this.mergeOptions(e,["isMultiFiles"])},drop:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var t=this.collection.filter(function(e){return"todo"!=e.uploadProgression.status});t.length&&this.collection.remove(t);var i=e.originalEvent.dataTransfer,o=i?i.files:e.originalEvent.target.files;this.isMultiFiles||(this.collection.reset(),o.length>1&&(o=o.shift())),_.each(o,function(e){var t=new this.collection.model;t.setFile(e),t.set("folder_id",this.collection.folder_id),this.collection.add(t)}.bind(this)),this.isMultiFiles||this.onActionModal()},dragEnter:function(e){e.preventDefault()},dragLeave:function(e){e.preventDefault()},onActionModal:function(){this.collection.upload().always(function(){ControllerChannel.trigger("uploaded:files",this.collection.folder_id),this.trigger("uploaded:files",this.collection)}.bind(this))},templateContext:function(){var e=!0,t=navigator.userAgent||navigator.vendor||window.opera;return(t.match(/iPad/i)||t.match(/iPod/i)||t.match(/iPhone/i)||t.match(/Android/i))&&(e=!1),{canDragAndDrop:e,isMultiFiles:this.isMultiFiles}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection}))}});
},{"291":291,"292":292,"423":423,"undefined":undefined}],302:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/modules/analytics",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{ua:"",is_enabled:!1,type:"",target:"",options:""}});
},{"undefined":undefined}],303:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Job=require(307),Backup=Backbone.Model.extend({urlRoot:"sites/@site/backups",idAttribute:"id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{voucher_id:e.data}:e.data:e},defaults:{id:null,creation_date:""},restore:function(){var e=new Backbone.$.Deferred;return Backbone.ajax({url:this.urlRoot+"/"+this.get("id"),method:"PUT"}).done(function(t){var r=new Job({job_id:t.data.job_id});r.watch().done(function(){e.resolve(r.get("error"))}).fail(function(t){e.reject(t)})}).fail(function(t){e.reject(t)}),e.promise()}});module.exports=Backbone.Collection.extend({url:"sites/@site/backups",model:Backup,parse:function(e){return this.meta=e.meta,e.data},createBackup:function(){var e=new Backbone.$.Deferred;return Backbone.ajax({url:this.url,method:"POST"}).done(function(t){var r=new Job({job_id:t.data.job_id});r.watch().done(function(){e.resolve(r.get("error"))}).fail(function(t){e.reject(t)})}).fail(function(t){e.reject(t)}),e.promise()}});
},{"307":307,"undefined":undefined}],304:[function(require,module,exports){
function checkImport(e){var t=e.get("result").split(";"),n=t[1];return Backbone.ajax({url:"sites/@site/import/cms/posts/"+n,method:"GET"}).then(function(e){return e.data})}var Backbone=require("backbone"),_=require("underscore"),Job=require(307);module.exports=Backbone.Model.extend({url:"sites/@site/import/cms/posts",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{is_enabled:!1,page_id:null,mode:"",type:"",file:null},"import":function(e){var t=new FormData;return _.each(e,function(e,n){t.append(n,e)}),Backbone.ajax({url:this.url,method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.data.job_id});return t.watch().then(function(){return checkImport(t)})})}});
},{"307":307,"undefined":undefined}],305:[function(require,module,exports){
function checkAnalyse(t){var e=t.get("result").split(";"),n=e[1];return Backbone.ajax({url:"sites/@site/import/catalog/products/"+n,method:"GET"}).then(function(t){return t.data.token=n,t.data})}function checkImport(t){return Backbone.ajax({url:"sites/@site/import/catalog/products/"+t,method:"GET"}).then(function(t){return t.data})}var Backbone=require("backbone"),_=require("underscore"),Job=require(307);module.exports=Backbone.Model.extend({url:"sites/@site/import/catalog/products",parse:function(t){return"data"in t?null===t.data?{}:t.data:t},isNew:function(){return!1},defaults:{},analyse:function(t){var e=new FormData;return _.each(t,function(t,n){e.append(n,t)}),Backbone.ajax({url:this.url,method:"POST",data:e,processData:!1,contentType:!1}).then(function(t){var e=new Job({job_id:t.data.job_id});return e.watch().then(function(){return checkAnalyse(e)})})},"import":function(t){return Backbone.ajax({url:this.url+"/"+t,method:"PUT"}).then(function(e){var n=new Job({job_id:e.data.job_id});return n.watch().then(function(){return checkImport(t)})})}});
},{"307":307,"undefined":undefined}],306:[function(require,module,exports){
function checkAnalyse(e){var t=e.get("result");return Backbone.ajax({url:"sites/@site/import/wordpress/"+t,method:"GET"}).then(function(e){return e.data.token=t,e.data})}function checkImport(e){return Backbone.ajax({url:"sites/@site/import/wordpress/"+e,method:"GET"}).then(function(e){return e.data})}var Backbone=require("backbone"),_=require("underscore"),Job=require(307);module.exports=Backbone.Model.extend({url:"sites/@site/import/wordpress",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{},analyse:function(e){var t=new FormData;return _.each(e,function(e,n){t.append(n,e)}),Backbone.ajax({url:this.url,method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.data.job_id});return t.watch().then(function(){return checkAnalyse(t)})})},"import":function(e){return Backbone.ajax({url:this.url+"/"+e,method:"PUT"}).then(function(t){var n=new Job({job_id:t.data.job_id});return n.watch().then(function(){return checkImport(e)})})}});
},{"307":307,"undefined":undefined}],307:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore");module.exports=Backbone.Model.extend({urlRoot:"sites/@site/jobs",idAttribute:"job_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{job_id:e.data}:e.data:e},defaults:{job_id:null,status:"todo",result:"",progression:"",step:"",error:""},timer:null,deferred:null,watch:function(){return this.deferred=new Backbone.$.Deferred,this.fetchUntilDone(),this.deferred.promise()},unwatch:function(){clearTimeout(this.timer),this.deferred.reject()},fetchUntilDone:function(){this.fetch().done(function(){switch(this.get("status")){default:this.timer=setTimeout(this.fetchUntilDone.bind(this),1500);break;case"done":case"halt":this.deferred.resolve(this)}}.bind(this)).fail(function(e){this.deferred.reject(e)}.bind(this))}});
},{"undefined":undefined}],308:[function(require,module,exports){
var Backbone=require("backbone"),Redirection=Backbone.Model.extend({urlRoot:"sites/@site/seo/redirections",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},defaults:{uri:"",target:""}});module.exports=Backbone.Collection.extend({url:"sites/@site/seo/redirections",model:Redirection,parse:function(e){return this.meta=e.meta,e.data},bulkUpdate:function(e){return Backbone.ajax({url:this.url+"/bulk",method:"PUT",data:{redirections:e}}).then(function(e){return e.data})}});
},{"undefined":undefined}],309:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Subscriber=Backbone.Model.extend({urlRoot:"sites/@site/subscribers",idAttribute:"subscriber_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{subscriber_id:e.data}:e.data:e},defaults:{subscriber_id:null,email:"",is_registered:!1,subscription_date:""}});module.exports=Backbone.Collection.extend({url:"sites/@site/subscribers",model:Subscriber,parse:function(e){return this.meta=e.meta,e.data},bulkSubscribe:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_registered")?Backbone.$.Deferred().resolve():e.save({is_registered:!0},{patch:!0})},e)},bulkUnsubscribe:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_registered")?e.save({is_registered:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"undefined":undefined}],310:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),CollectionUtils=require(422),Voucher=Backbone.Model.extend({urlRoot:"sites/@site/checkout/vouchers",idAttribute:"voucher_id",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{voucher_id:e.data}:e.data:e},defaults:{voucher_id:null,code:"",type:"",value:0,value_label:"",start_date:"",end_date:"",is_enabled:!1,stock:0,used:0,is_stock_unlimited:!1,quota:0,is_quota_unlimited:!1,threshold:0,threshold_label:"",has_restrictions:!1,creation_date:"",modification_date:"",carrier_id:null}});module.exports=Backbone.Collection.extend({url:"sites/@site/checkout/vouchers",model:Voucher,parse:function(e){return this.meta=e.meta,e.data},bulkEnable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?Backbone.$.Deferred().resolve():e.save({is_enabled:!0},{patch:!0})},e)},bulkDisable:function(e){return CollectionUtils.bulkAction(this,function(e){return e.get("is_enabled")?e.save({is_enabled:!1},{patch:!0}):Backbone.$.Deferred().resolve()},e)},bulkDelete:function(e){return CollectionUtils.bulkAction(this,function(e){return e.destroy()},e)}});
},{"422":422,"undefined":undefined}],311:[function(require,module,exports){
function getHeadersActionVouchers(e){e=e||{};var t=[{title:"Ajouter une réduction",callback:"showVoucherAdd"}];if(e.addSave){var i={title:"Enregistrer",callback:"actionSave",activateOnEvent:"modified:content",bubbleOnEvent:"modified:content"};t.length<=1?t.push(i):t.splice(1,0,i)}return t}function HeaderTabsSubscribers(){return[{title:"Liste des abonnés",url:"/modules/subscribers"},{title:"Paramètres",url:"/modules/subscribers/settings"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),moment=require("moment"),_=require("underscore"),Controller=require(30),Injectcode=require(364),Analytics=require(302),Redirections=require(308),Subscribers=require(309),Newsletter=require(365),Vouchers=require(310),Customers=require(227),Groups=require(232),Categories=require(93),Products=require(100),Carriers=require(147),Fidelity=require(355),Iadvize=require(359),AvisVerifies=require(353),Lengow=require(361),Backups=require(303),MerchantCenter=require(363),ImportProducts=require(305),ImportPosts=require(304),ImportWordpress=require(306),Menus=require(194),Post=require(196),IndexView=require(343),InjectcodeView=require(344),RedirectionsView=require(348),FidelityView=require(338),AnalyticsView=require(335),VouchersView=require(352),VoucherView=require(351),VoucherAddModalView=require(347),NewsletterView=require(350),SubscribersView=require(349),ImportPostsView=require(340),ImportProductsView=require(341),ImportWordpressView=require(342),MerchantCenterView=require(346),LengowView=require(345),IadvizeView=require(339),AvisVerifiesView=require(336),BackupsView=require(337),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(328),service:"modules",behaviors:[ActiveLinksBehaviors]}),ModulesController=Controller.extend({sidebarMenuService:"modules",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Modules",href:"/modules"}],showIndex:function(){console.log("ModulesController, showIndex"),this.navigationController.showContent(new IndexView),this.setHeader({title:"Tous les modules"})},showInjectcode:function(){var e=new Injectcode;e.fetch().done(function(){this.navigationController.showContent(new InjectcodeView({model:e})),this.setHeader({title:"Injection de code"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showRedirections:function(){var e=new Redirections;e.fetch().done(function(){this.navigationController.showContent(new RedirectionsView({collection:e})),this.setHeader({title:"Redirections 301"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showFidelity:function(){var e=new Fidelity;e.fetch().done(function(){this.navigationController.showContent(new FidelityView({model:e})),this.setHeader({title:"Points de fidélité"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showAnalytics:function(){var e=new Analytics;e.fetch().done(function(){this.navigationController.showContent(new AnalyticsView({model:e})),this.setHeader({title:"Google Analytics"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showVouchers:function(){var e=new VouchersView({collection:new Vouchers});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Tous les bons de réduction"},getHeadersActionVouchers({addSave:!1}))},showVoucher:function(e){var t=new Vouchers,i=new t.model({voucher_id:e});i.fetch().done(function(){var e=new VoucherView({model:i,customers:new Customers,groups:new Groups,categories:new Categories,products:new Products,carriers:new Carriers});this.listenTo(i,"change",function(e){e.hasChanged("code")&&this.setBreadCrum([{href:"/modules/vouchers",title:"Bons de réduction"},{title:e.get("code")}],!0)}.bind(this)),this.listenTo(i,"destroy",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/modules/vouchers")}),this.navigationController.showContent(e),this.setHeader([{href:"/modules/vouchers",title:"Bons de réduction"},{title:i.get("code")}],getHeadersActionVouchers({addSave:!0}))}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Bon de réduction introuvable"})}.bind(this))},actionNewVoucher:function(e){var t=new Vouchers,i={type:e,code:"BON",start_date:moment().format("YYYY-MM-DD"),end_date:moment().add(1,"years").format("YYYY-MM-DD")};switch(e){case"amount":i.value="1",i.threshold="10";break;case"percent":i.value="1";break;case"shipping":i.carrier_id=null}var o=new t.model(i),s=function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/modules/vouchers/"+o.get("voucher_id"))}.bind(this),r=function(e){this.navigationController.showErrorModal(e)}.bind(this);if("shipping"==e){var n=new Carriers;return n.fetch().then(function(e){var t=n.find(function(e){return"magasin"!=e.get("type")});return t?(o.set("carrier_id",t.get("carrier_id")),o.save().done(s).fail(r)):(this.navigationController.showErrorModal("Aucun transporteur trouvé"),Backbone.$.Deferred.reject())}.bind(this),r)}return o.save().done(s).fail(r)},showSubscribers:function(){var e=new SubscribersView({collection:new Subscribers});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Abonnés à la newsletter"},null,HeaderTabsSubscribers())},showSubscribersSettings:function(){var e=new Newsletter;e.fetch().done(function(){this.navigationController.showContent(new NewsletterView({model:e})),this.setHeader({title:"Abonnés à la newsletter"},[{title:"Enregistrer",callback:"actionSave"}],HeaderTabsSubscribers())}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showImportPosts:function(){this.navigationController.showContent(new ImportPostsView({model:new ImportPosts,post:new Post,menus:new Menus})),this.setHeader({title:"Import de billets dans le site web"})},showImportProducts:function(){this.navigationController.showContent(new ImportProductsView({model:new ImportProducts,categories:new Categories})),this.setHeader({title:"Import de produits dans le catalogue"})},showImportWordpress:function(){this.navigationController.showContent(new ImportWordpressView({model:new ImportWordpress,post:new Post})),this.setHeader({title:"Import depuis Wordpress"})},showMerchantCenter:function(){var e=new MerchantCenter;e.fetch().done(function(){this.navigationController.showContent(new MerchantCenterView({model:e})),this.setHeader({title:"Google Merchant Center"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showLengow:function(){var e=new Lengow;e.fetch().done(function(){this.navigationController.showContent(new LengowView({model:e,categories:new Categories})),this.setHeader({title:"Lengow"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showIadvize:function(){var e=new Iadvize;e.fetch().done(function(){this.navigationController.showContent(new IadvizeView({model:e})),this.setHeader({title:"iAdvize"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showAvisVerifies:function(){var e=new AvisVerifies;e.fetch().done(function(){this.navigationController.showContent(new AvisVerifiesView({model:e})),this.setHeader({title:"Avis Vérifiés"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showBackups:function(){var e=new BackupsView({collection:new Backups});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Gestion des sauvegardes"},[{title:"Créer un point de sauvegarde",callback:"actionNewBackup"}])},actionNewBackup:function(){this.navigationController.showOverlay();var e=new Backups;return e.createBackup().done(function(e){if(""!=e)return void this.navigationController.showErrorModal(e,4e3);this.navigationController.hideModal();var t=this.navigationController.getContent();t&&t.start&&t.start()}.bind(this)).fail(function(e){this.navigationController.showErrorModal(e)}.bind(this))},showVoucherAdd:function(e){var t=new VoucherAddModalView;this.listenTo(t,"select:amount",this.actionNewVoucher),this.listenTo(t,"select:percent",this.actionNewVoucher),this.listenTo(t,"select:shipping",this.actionNewVoucher),this.navigationController.showInModal(t,{title:"Ajouter une réduction",modalClass:"modal-pagetype-add"})}});module.exports=Marionette.AppRouter.extend({controller:new ModulesController,appRoutes:{modules:"showIndex","modules/injectcode":"showInjectcode","modules/redirections":"showRedirections","modules/fidelity":"showFidelity","modules/analytics":"showAnalytics","modules/vouchers":"showVouchers","modules/vouchers/:id":"showVoucher","modules/subscribers":"showSubscribers","modules/subscribers/settings":"showSubscribersSettings","modules/import/posts":"showImportPosts","modules/import/products":"showImportProducts","modules/import/wordpress":"showImportWordpress","modules/merchantcenter":"showMerchantCenter","modules/lengow":"showLengow","modules/iadvize":"showIadvize","modules/avisverifies":"showAvisVerifies","modules/backups":"showBackups"},onRoute:function(e,t,i){this.controller.showSidebarMenu()}});
},{"100":100,"147":147,"18":18,"194":194,"196":196,"227":227,"232":232,"30":30,"302":302,"303":303,"304":304,"305":305,"306":306,"308":308,"309":309,"310":310,"328":328,"335":335,"336":336,"337":337,"338":338,"339":339,"340":340,"341":341,"342":342,"343":343,"344":344,"345":345,"346":346,"347":347,"348":348,"349":349,"350":350,"351":351,"352":352,"353":353,"355":355,"359":359,"361":361,"363":363,"364":364,"365":365,"93":93,"undefined":undefined}],312:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/marketing-et-referencement/google-analytics.html" class="md-icon md-help pull-right" target="_blank"></a> Google Analytics est <strong>le service d\'analyse d\'audience</strong> proposé par Google. Pour bénéficier de ces fonctionnalités, vous devez vous <a href="https://www.google.com/intl/fr_ALL/analytics/" target="_blank">ouvrir un compte sur Google Analytics</a>.<br><br>Google Analytics vous permettra également de <strong>suivre précisément l\'activité de vente en ligne</strong> si vous activez l\'option "<em>Site Web de commerce électronique</em>" dans l\'interface de Google Analytics.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration de Google Analytics</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="UA">Numéro de compte</label><p>Ce numéro est contenu dans le fragment de code fourni pour Google Analytics à l\'ouverture d\'un compte. Seul ce numéro, de la forme UA-XXXXX-X, doit être renseigné ci-dessous et non pas l\'ensemble du fragment de code.</p><input id="UA" name="UA" class="form-control" value="'+(null==(__t=UA)?"":_.escape(__t))+'" placeholder="Numéro de la forme : UA-XXXXX-X"></div><div class="form-group"><label class="control-label">Utilisation</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-xs-6"><div class="form-group"><label for="type" class="control-label">Type de Tracker</label><select id="type" name="type" data-style="selectify"><option value="Universel" '+(null==(__t="universal"==type?'selected="selected"':"")?"":__t)+'>Tracking universel (recommandé)</option><option value="Asynchrone" '+(null==(__t="async"==type?'selected="selected"':"")?"":__t)+'>Tracking web asynchrone</option><option value="Synchrone" '+(null==(__t="sync"==type?'selected="selected"':"")?"":__t)+'>Tracking web standard</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="target" class="control-label">Position du tracker</label><select id="target" name="target" data-style="selectify"><option value="body" '+(null==(__t="body"==target?'selected="selected"':"")?"":__t)+'>Avant la balise &lt;/body&gt; (recommandé)</option><option value="head" '+(null==(__t="head"==target?'selected="selected"':"")?"":__t)+'>Avant la balise &lt;/head&gt;</option></select></div></div></div><div class="form-group"><label class="control-label" for="options">Paramètres complémentaires</label><textarea class="form-control" rows="5" id="options" name="options">'+(null==(__t=options)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],313:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/avis-verifies.html" class="md-icon md-help pull-right" target="_blank"></a> Avis Vérifiés est une solution spécialisée dans la récolte des avis clients. Pour bénéficier de ses fonctionnalités, vous devez au préalable vous <a href="https://www.avis-verifies.com/" target="_blank">ouvrir un compte sur le site d\'Avis Vérifiés</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration de Avis Vérifiés</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="id">Identifiant Site Web</label><input id="id" name="id" class="form-control" value="'+(null==(__t=id)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="control-label required" for="secret">Clé secrète</label><input id="secret" name="secret" class="form-control" value="'+(null==(__t=secret)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="control-label">Utilisation</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label" for="plateform">Pays</label><div class="row"><div class="col-xs-6"><select data-style="selectify" id="plateform" name="plateform"> ',_.each(allPlatforms,function(e,l){__p+=' <option value="'+(null==(__t=l)?"":_.escape(__t))+'" '+(null==(__t=l==plateform?'selected="selected"':"")?"":__t)+">"+(null==(__t=e)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div></div><div class="form-group has-feedback"><label class="control-label" for="is_sending_products">Avis récoltés</label><div class="row"><div class="col-xs-6"><select data-style="selectify" id="is_sending_products" name="is_sending_products"><option value="0" '+(null==(__t=is_sending_products?"":'selected="selected"')?"":__t)+'>Commandes uniquement</option><option value="1" '+(null==(__t=is_sending_products?'selected="selected"':"")?"":__t)+'>Commandes et produits</option></select></div></div></div></div><div class="form-group"><label class="control-label" for="offset">Délai d\'attente avant demande d\'avis</label><div class="row"><div class="col-xs-3"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="offset" name="offset" value="'+(null==(__t=offset)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">jours</span></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],314:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/Gestion-du-compte/sauvegardes.html" class="md-icon md-help pull-right" target="_blank"></a> Kiubi sauvegarde automatiquement l\'<strong>intégralité du site Internet</strong> (contenus, pages, catégories, préférences, médiathèque, thème graphique, etc.) une fois par jour et conserve une sauvegarde de la veille, une de l\'avant-veille et une du lundi précédent. Vous pouvez à tout moment créer un point de sauvegarde manuellement qui <strong>remplacera le dernier point de sauvegarde effectué</strong>.<br><br>Les utilisateurs, les membres, les commandes, les noms de domaines, les clés APIs, la formule d\'abonnement, les crédits souscrits et les factures d\'abonnement sont spécifiquement <strong>exclues</strong> des points de sauvegarde.<br><br><span class="text-danger">Attention, <strong>la création d’un nouveau point de sauvegarde</strong> écrasera le dernier point de sauvegarde créé. <strong>La restauration d\'une sauvegarde</strong> entraînera quant à elle la perte de toutes les données qui ont été ajoutées entre la date de la sauvegarde et la date de sa restauration, à l\'exception des données exclues des points de sauvegarde.</span></div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],315:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-9">Le '+(null==(__t=creation_date)?"":_.escape(__t))+' </div><div class="col-xs-3"><a class="btn btn-option pull-right" href="#" role="button" data-role="action" data-action="restore" data-confirm="warning">Restaurer</a></div></div>';return __p};
},{"undefined":undefined}],316:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/marketing-et-referencement/parametrer-les-points-de-fidelite-sur-votre-site-web.html" class="md-icon md-help pull-right" target="_blank"></a> Le paiement d’une commande permet à un membre d’<strong>accumuler des points</strong> sur une carte de réduction virtuelle. Ces points sont valables un an et peuvent être <strong>échangés contre un bon de réduction</strong> utilisable lors d\'une prochaine commande.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Conditions de gains des points de fidélité</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="gain_rate">Gains par commande</label><p>Nombre de points de fidélité gagnés pour 1,00€TTC payé à chaque commande (hors frais de port).</p><div class="row"><div class="col-xs-3"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="gain_rate" name="gain_rate" value="'+(null==(__t=gain_rate)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">points</span></div></div></div></div><div class="form-group"><label class="control-label" for="reward_first_order">Gains bonus</label><p>Nombre de points de fidélité gagnés à la première commande.</p><div class="row"><div class="col-xs-3"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="reward_first_order" name="reward_first_order" value="'+(null==(__t=reward_first_order)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">points</span></div></div></div></div><div class="form-group"><p>Nombre de points de fidélité gagnés à l\'inscription à la newsletter lors de l\'ouverture de compte.</p><div class="row"><div class="col-xs-3"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="reward_subscriber" name="reward_subscriber" value="'+(null==(__t=reward_subscriber)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">points</span></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Conversion des points en bons de réduction</h1></header><div class="post-content"><p>Un bon de réduction à usage unique est envoyé par email à un membre chaque fois qu\'il dépasse le seuil de points de fidélité.</p><div class="form-group"><label class="control-label">Envoi du bon de réduction</label><div class="radio-group"><input name="is_creation_enabled" id="is_creation_enabled1" value="1" '+(null==(__t=is_creation_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_creation_enabled1" class="visible">Activé</label><input name="is_creation_enabled" id="is_creation_enabled0" value="0" '+(null==(__t=is_creation_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_creation_enabled0" class="not-visible">Désactivé</label></div></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="creation_cost">Seuil d\'envoi</label><div class="input-group"><span class="input-group-addon">À partir de</span> <input class="form-control" id="creation_cost" name="creation_cost" value="'+(null==(__t=creation_cost)?"":_.escape(__t))+'" placeholder="500"> <span class="input-group-addon">points</span></div></div><div class="form-group"><label class="control-label" for="voucher_threshold">Seuil de validité</label><div class="input-group"><span class="input-group-addon">À partir de</span> <input class="form-control" id="voucher_threshold" name="voucher_threshold" value="'+(null==(__t=voucher_threshold)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">€TTC d\'achats</span></div></div><div class="form-group"><label class="control-label" for="is_voucher_restricted">Limite d\'utilisation</label><select data-style="selectify" id="is_voucher_restricted" name="is_voucher_restricted"><option value="1" '+(null==(__t=is_voucher_restricted?'selected="selected"':"")?"":__t)+' >Seulement au membre à qui il est envoyé</option><option value="0" '+(null==(__t=is_voucher_restricted?"":'selected="selected"')?"":__t)+' >Utilisable par n\'importe quel membre</option></select></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="voucher_value">Montant de la réduction</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="voucher_value" name="voucher_value" value="'+(null==(__t=voucher_value)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">€TTC</span></div></div><div class="form-group"><label class="control-label" for="voucher_validity">Durée de validité</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="voucher_validity" name="voucher_validity" value="'+(null==(__t=voucher_validity)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">mois</span></div></div></div></div><div class="form-group"><label class="control-label" for="voucher_mail_subject">Sujet de l\'email</label><input class="form-control" id="voucher_mail_subject" name="voucher_mail_subject" value="'+(null==(__t=voucher_mail_subject)?"":_.escape(__t))+'" placeholder="Sujet de l\'email envoyé au membre qui a obtenu le bon de réduction. Laisser vide pour utiliser le sujet par défaut."></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],317:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert">iAdvize est une solution de chat commercial enrichie qui permet de répondre en direct aux visiteurs du site et de les orienter vers la solution ou le produit qui répondra à leurs besoins. Pour bénéficier de ses fonctionnalités, vous devez au préalable vous <a href="https://www.iadvize.com/fr/?sp=113" target="_blank">ouvrir un compte sur le site d\'iAdvize</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration de iAdvize</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="id">Numéro de compte</label><input id="id" name="id" class="form-control" value="'+(null==(__t=id)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="control-label">Utilisation</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],318:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/Modules/import-de-billets.html" class="md-icon md-help pull-right" target="_blank"></a> Vous pouvez <strong>importer plusieurs billets simultanément</strong> pour remplir et mettre à jour les pages du site web. Nous vous conseillons avant tout import de billets de <a href="https://aide.kiubi.com/documentation/Modules/import-de-billets.html" target="_blank">consulter la documentation en ligne</a> et de <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="file">Fichier d\'import</label><p>Vous pouvez télécharger un exemple de modèle de fichier d\'import (<a href="https://cdn.kiubi-admin.com/69/documents/import.csv" target="_blank">CSV</a> ou <a href="https://cdn.kiubi-admin.com/69/documents/import.xls" target="_blank">XLS</a>) pour vous aider à préparer votre propre fichier.</p><input name="file" id="file" type="file"></div><div class="row"><div class="col-xs-6"><div class="form-group"><label for="page" class="control-label required">Page de destination</label><div data-role="page"></div></div></div></div><div class="form-group"><label for="type" class="control-label">Type de billet par défaut</label><p>Utilisé uniquement si le type de billet n\'est pas précisé dans le fichier d\'import.</p><div class="row"><div class="col-xs-6"><div data-role="type"></div></div></div></div><div class="form-group"><label class="control-label">Action à réaliser</label><div class="radio"><input name="mode" id="mode1" value="add" type="radio" checked="checked"><label for="mode1" class="">Ajouter les billets importés aux billets de la page de destination (cette action <em>conserve</em> les billets de la page de destination)</label></div><div class="radio"><input name="mode" id="mode2" value="replace" type="radio"><label for="mode2" class="">Remplacer les billets de la page de destination par les billets importés (cette action <em>supprime</em> les billets de la page de destination)</label></div></div><div class="form-group"><label class="control-label">Afficher les billets après l\'import</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" type="radio"><label for="is_enabled1" class="">Oui</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" checked="checked"><label for="is_enabled0" class="">Non</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Importer</button></div></div> ':(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans le fichier.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les données du site web ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],319:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/Modules/import-de-produits.html" class="md-icon md-help pull-right" target="_blank"></a> Vous pouvez <strong>importer plusieurs produits simultanément</strong> pour remplir et mettre à jour le catalogue. Nous vous conseillons avant tout import de produits de <a href="https://aide.kiubi.com/documentation/Modules/import-de-produits.html" target="_blank">consulter la documentation en ligne</a> et de <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="file">Fichier d\'import</label><p>Vous pouvez télécharger un exemple de modèle de fichier d\'import (<a href="https://cdn.kiubi-admin.com/69/documents/import_catalogue.csv" target="_blank">CSV</a> ou <a href="https://cdn.kiubi-admin.com/69/documents/import_catalogue.xls" target="_blank">XLS</a>) pour vous aider à préparer votre propre fichier.</p><input name="file" id="file" type="file"></div><div class="form-group has-feedback"><label class="control-label">Catégorie par défaut</label><p>Vous devez choisir une catégorie qui sera utilisée si la catégorie du produit n\'est pas précisé dans le fichier d\'import.</p><div class="row"><div class="col-xs-6"><div data-role="categories"></div></div></div></div><div class="form-group"><label class="control-label">Afficher les produits après l\'import</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" type="radio"><label for="is_enabled1" class="">Oui</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" checked="checked"><label for="is_enabled0" class="">Non</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Importer</button></div></div> ':1==step?(__p+=" ",report.warnings&&report.warnings.length>0&&(__p+=' <div class="alert alert-warning"><strong>Il y a des alertes</strong> ',report.errors&&0!=report.errors.length||(__p+="mais vous pouvez quand même valider l'import de données du catalogue"),__p+='.<br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank">effectuer un point de sauvegarde</a> de son site.<br><br><ul> ',_.each(report.warnings,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&report.errors.length>0&&(__p+=' <div class="alert alert-danger"><strong>Il y a des erreurs dans le fichier</strong>, vous ne pouvez pas valider l\'import de données du catalogue. Veuillez <a href="https://aide.kiubi.com/documentation/Modules/import-de-produits.html" target="_blank" class="alert-link">consulter la documentation en ligne</a> afin de corriger ces erreurs.<br><br><ul> ',_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&0!=report.errors.length||(__p+=' <div class="alert alert-info"><strong>Les données sont prêtes à être importées.</strong><br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank" class="alert-link">effectuer un point de sauvegarde</a> de son site.</div> '),__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-cancel" data-role="cancel">Retour</button> ',report.errors&&0!=report.errors.length||(__p+=' <button type="button" class="btn btn-action pull-right" data-role="save">Importer</button> '),__p+=" </div></div> "):(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans le fichier.<br><br><ul> ",_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les données du catalogue ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],320:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>Vous pouvez importer l’intégralité d’un site WordPress dans ce site Kiubi : pages, billets, catégories, commentaires, médias, tout le contenu est automatiquement analysé et ajouté à ce site Kiubi.</p><p>Afin de correctement préparer l\'import, vous devez :</p><ul><li>Soit vous rendre dans la console d\'administration du site WordPress et télécharger le fichier XML d\'export disponible dans la rubrique Outils / Export (méthode recommandée)</li><li>Soit vous munir de l\'adresse Web du site WordPress ainsi que de son identifiant et de son mot de passe administrateur</li><li>Dans tous les cas, <a href="/modules/backups" target="_blank">réaliser préalablement un point de sauvegarde</a> du site Internet.</li></ul><p>L\'import est limité à 3000 billets, 300 commentaires par billet, 30 catégories, 50 pages et 10 000 médias. Le fichier XML d\'export ne peut pas dépasser un poids de 7Mo et le format d\'export WordPress doit être en version 1.0, 1.1 ou 1.2.</p><p>Pendant le processus d\'import, le contenu du site WordPress n\'est <strong>jamais modifié ou altéré</strong> et les accès administrateurs ne sont <strong>jamais stockés ou communiqués</strong> à un service tiers.</p><p>L\'import depuis WordPress est une fonctionnalité en béta qui n\'est pas compatible avec toutes les configurations de WordPress. Pour ces raisons, nous ne pouvons assurer de support en cas d\'import impossible ou incomplet.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Source d\'import</h1></header><div class="post-content"><p>Deux sources différentes sont disponibles pour importer le contenu d\'un site WordPress dans ce site Kiubi. Vous devez utiliser un des deux sources, au choix :</p><div class="form-group"><label class="control-label" for="file">Source 1 : fichier XML d\'export du site WordPress (recommandé)</label><input name="file" id="file" type="file"></div><hr><div class="form-group"><label class="control-label" for="url">Source 2 : accéder directement au site WordPress</label><input class="form-control" id="url" name="url" value="" placeholder="Adresse du site WordPress de la forme https://www.mon-site-wordpress.com"></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="login">Identifiant administrateur</label><input class="form-control" id="login" name="login" value="" placeholder=""></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="password">Mot de passe administrateur</label><input class="form-control" id="password" name="password" value="" placeholder="" type="password"></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label class="control-label">Importer les médias</label><div class="radio-group"><input name="import_media" id="import_media1" value="1" type="radio" checked="checked"><label for="import_media1" class="">Oui</label><input name="import_media" id="import_media0" value="0" type="radio"><label for="import_media0" class="">Non</label></div></div><div class="form-group"><label class="control-label">Importer les pages</label><div class="radio-group"><input name="import_pages" id="import_pages1" value="1" type="radio" checked="checked"><label for="import_pages1" class="">Oui</label><input name="import_pages" id="import_pages0" value="0" type="radio"><label for="import_pages0" class="">Non</label></div></div><div class="form-group"><label for="type" class="control-label">Type de billet par défaut</label><div class="row"><div class="col-xs-6"><div data-role="type"></div></div></div></div><div class="form-group"><label for="type" class="control-label">Correspondance de la taille des images miniatures</label><div class="row"><div class="col-xs-6"><select class="form-control" id="thumbnail" name="thumbnail" data-style="selectify"><option value="miniature">Miniature</option><option value="g_miniature" selected="selected">Grande miniature</option><option value="vignette">Vignette</option><option value="g_vignette">Grande vignette</option></select></div></div></div><div class="form-group"><label for="medium" class="control-label">Correspondance de la taille des images moyennes</label><div class="row"><div class="col-xs-6"><select class="form-control" id="medium" name="medium" data-style="selectify"><option value="miniature">Miniature</option><option value="g_miniature">Grande miniature</option><option value="vignette" selected="selected">Vignette</option><option value="g_vignette">Grande vignette</option></select></div></div></div><div class="form-group"><label for="large" class="control-label">Correspondance de la taille des grandes images</label><div class="row"><div class="col-xs-6"><select class="form-control" id="large" name="large" data-style="selectify" data-direction="up"><option value="miniature">Miniature</option><option value="g_miniature">Grande miniature</option><option value="vignette">Vignette</option><option value="g_vignette" selected="selected">Grande vignette</option></select></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Importer</button></div></div> ':1==step?(__p+=" ",report.warnings&&report.warnings.length>0&&(__p+=' <div class="alert alert-warning"><strong>Il y a des alertes</strong> ',report.errors&&0!=report.errors.length||(__p+="mais vous pouvez quand même valider l'import de données du catalogue"),__p+='.<br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank">effectuer un point de sauvegarde</a> de son site.<br><br><ul> ',_.each(report.warnings,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&report.errors.length>0&&(__p+=' <div class="alert alert-danger"><strong>Il y a des erreurs dans le fichier</strong>, vous ne pouvez pas valider l\'import de données du catalogue. Veuillez <a href="https://aide.kiubi.com/documentation/Modules/import-de-produits.html" target="_blank" class="alert-link">consulter la documentation en ligne</a> afin de corriger ces erreurs.<br><br><ul> ',_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "),__p+=" ",report.errors&&0!=report.errors.length||(__p+=' <div class="alert alert-info"><strong>Les données sont prêtes à être importées.</strong><br>Il est cependant conseillé avant de valider un import d\'<a href="/modules/backups" target="_blank" class="alert-link">effectuer un point de sauvegarde</a> de son site.</div> '),__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-cancel" data-role="cancel">Retour</button> ',report.errors&&0!=report.errors.length||(__p+=' <button type="button" class="btn btn-action pull-right" data-role="save">Importer</button> '),__p+=" </div></div> "):(__p+=" ",report.errors&&report.errors.length>0?(__p+=' <div class="alert alert-danger"><strong>L\'import a été réalisé</strong>, mais il y a eu des erreurs :<br><br><ul> ',_.each(report.errors,function(e){__p+=" <li>"+(null==(__t=e)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les données du catalogue ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],321:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="thumbs-list"><div class="row"><div class="col-xs-6"><article class="post-article thumbs-desc thumbs-id-dismoi"><header class="post-header"><span class="md-icon"></span><span>2/50</span> <a type="button" class="btn btn-option pull-right" href="/forms/inbox" role="button">Utiliser</a></header><div class="post-content"><h1>Dismoi?</h1>Créer et gérer vos formulaires (contact, recrutement, sondage,...) entièrement paramétrables.</div><footer class="post-footer"></footer></article></div><div class="col-xs-6"><article class="post-article thumbs-desc thumbs-id-discount"><header class="post-header"><span class="md-icon"></span> <a type="button" class="btn btn-option pull-right" href="/modules/vouchers" role="button">Utiliser</a></header><div class="post-content"><h1>Bons de réduction</h1>Créer et gérer vos bons de réductions pour vos animations commerciales.</div><footer class="post-footer"></footer></article></div><div class="col-xs-6"><article class="post-article thumbs-desc thumbs-id-fedelity"><header class="post-header"><span class="md-icon"></span> <a type="button" class="btn btn-option pull-right" href="/modules/fidelity" role="button">Utiliser</a></header><div class="post-content"><h1>Points de fidélité</h1>Attribuer des points de fidélité à vos meilleurs clients pour leur faire bénéficier de remises sur vos produits.</div><footer class="post-footer"></footer></article></div><div class="col-xs-6"><article class="post-article thumbs-desc thumbs-id-importproducts"><header class="post-header"><span class="md-icon"></span> <a type="button" class="btn btn-option pull-right" href="/modules/import/products" role="button">Utiliser</a></header><div class="post-content"><h1>Import dans le Catalogue</h1>Importer des produits dans le Catalogue.</div><footer class="post-footer"></footer></article></div><div class="col-xs-6"><article class="post-article thumbs-desc thumbs-id-newsletter"><header class="post-header"><span class="md-icon"></span> <a type="button" class="btn btn-option pull-right" href="/modules/subscribers" role="button">Utiliser</a></header><div class="post-content"><h1>Abonnés à la newsletter</h1>Exporter tout ou partie de vos abonnés à votre newsletter pour les utiliser avec votre plateforme d\'emailing favorite.</div><footer class="post-footer"></footer></article></div><div class="col-xs-6"><article class="post-article thumbs-desc thumbs-id-backup"><header class="post-header"><span class="md-icon"></span> <a type="button" class="btn btn-option pull-right" href="/modules/backups" role="button">Utiliser</a></header><div class="post-content"><h1>Gestion des sauvegardes</h1>Restaurez des points de sauvegarde ou créez-en à votre convenance pour sécurier les données de votre site.</div><footer class="post-footer"></footer></article></div></div></div><article class="post-article"><header class="post-header"><h1>Autres modules</h1></header><div class="post-content post-list"><div class="list-item visible-btn"><div class="row"><div class="col-xs-10"><div class="media"><div class="media-body"><h4>Redirections 301</h4>Définissez les redirections d\'URL permanentes à utiliser sur votre site.</div></div></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/modules/redirections" role="button">Utiliser</a></div></div></div><div class="list-item visible-btn"><div class="row"><div class="col-xs-10"><div class="media"><div class="media-body"><h4>Injection de code</h4>Injectez des scripts et du code avant <code>&lt;/head&gt;</code> et <code>&lt;/body&gt;</code> sur l\'ensemble de votre site.</div></div></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/modules/injectcode" role="button">Utiliser</a></div></div></div><div class="list-item visible-btn"><div class="row"><div class="col-xs-10"><div class="media"><div class="media-body"><h4>Import dans le Site Web</h4>Importez des billets dans les pages de votre site web.</div></div></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/modules/import/posts" role="button">Utiliser</a></div></div></div><div class="list-item visible-btn"><div class="row"><div class="col-xs-10"><div class="media"><div class="media-body"><h4>Import depuis Wordpress</h4>Importez du contenu depsui Wordpress dans votre site.</div></div></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/modules/import/wordpress" role="button">Utiliser</a></div></div></div><div class="list-item visible-btn"><div class="row"><div class="col-xs-10"><div class="media"><div class="media-body"><h4>Google Analytics</h4>Paramétrez le tracking de Google Analytics sur votre site.</div></div></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/modules/analytics" role="button">Utiliser</a></div></div></div><div class="list-item visible-btn"><div class="row"><div class="col-xs-10"><div class="media"><div class="media-body"><h4>Google Merchant Center</h4>Utilisez Google Merchant Center pour importer vos données produits sur Google et les proposer dans Google Shopping ainsi que dans d\'autres services Google.</div></div></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/modules/merchantcenter" role="button">Utiliser</a></div></div></div><div class="list-item visible-btn"><div class="row"><div class="col-xs-10"><div class="media"><div class="media-body"><h4>Lengow</h4>Utilisez Lengow pour créer un flux de données afin de publier vos produits sur les principaux comparateurs de prix, affiliation et marketplaces.</div></div></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/modules/lengow" role="button">Utiliser</a></div></div></div><div class="list-item visible-btn"><div class="row"><div class="col-xs-10"><div class="media"><div class="media-body"><h4>iAdvize</h4>Configurer iAdvize pour échanger en direct avec vos visiteurs lorsqu\'ils visitent votre site.</div></div></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/modules/iadvize" role="button">Utiliser</a></div></div></div><div class="list-item visible-btn"><div class="row"><div class="col-xs-10"><div class="media"><div class="media-body"><h4>Avis Vérifiés</h4>Récoltez les avis de vos clients sur vos commandes et vos produits avec la plateforme Avis Vérifiés.</div></div></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/modules/avisverifies" role="button">Utiliser</a></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><div class="row"><div class="col-xs-6"><header class="post-header"><h1>API Front-Office</h1></header><div class="post-content"><p>Pour les intégrateurs et les développeurs Front-End qui ont besoin d\'accéder aux données publiques de leurs sites afin de les enrichir avec de nouvelles interactions.</p><a class="btn btn-option" href="https://aide.kiubi.com/api-front-office.html" target="_blank">En savoir plus</a></div></div><div class="col-xs-6"><header class="post-header"><h1>API Developers</h1></header><div class="post-content"><p>Pour les développeurs qui souhaitent interfacer leurs propres applications avec Kiubi grâce à un accès direct et sécurisé aux données de tous les sites.</p><a class="btn btn-option" href="https://aide.kiubi.com/api-developers.html" target="_blank">En savoir plus</a></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],322:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert">Vous pouvez insérer du code (html, js, css...) avant la balise <code>&lt;/head&gt;</code> et <code>&lt;/body&gt;</code> qui sera <strong>utilisé par défaut</strong> pour toutes les pages du site Internet. Vous pouvez également <strong>personnaliser ce code pour chaque page</strong>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Code à injecter</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="js_head">Code avant <code>&lt;/head&gt;</code> par défaut</label><textarea class="form-control" rows="10" id="js_head" name="js_head" placeholder="Code utilisé par défaut avant la balise &lt;/head&gt; ">'+(null==(__t=js_head)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="js_body">Code avant <code>&lt;/body&gt;</code> par défaut</label><textarea class="form-control" rows="10" id="js_body" name="js_body" placeholder="Code utilisé par défaut avant la balise &lt;/body&gt; ">'+(null==(__t=js_body)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],323:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/Marketing-et-referencement/export-comparateurs-prix-lengow.html" class="md-icon md-help pull-right" target="_blank"></a> Lengow est une solution permettant d’optimiser la visibilité et la rentabilité des sites marchands, que ce soit sur les comparateurs de prix, les places de marché, les plateformes d’affiliation ou les réseaux sociaux. Pour bénéficier de ses fonctionnalités, vous devez au préalable vous <a href="https://www.lengow.com" target="_blank">ouvrir un compte sur le site de Lengow</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration de Lengow</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="id">Id client Lengow</label><p>Ce numéro est fourni par Lengow, vous pouvez retrouver cet ID en haut de chaque page de leur solution.</p><input id="id" name="id" class="form-control" value="'+(null==(__t=id)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="control-label">Tracker de conversion</label><div class="radio-group"><input name="is_tracker_enabled" id="is_tracker_enabled1" value="1" type="radio" '+(null==(__t=is_tracker_enabled?'checked="checked"':"")?"":__t)+'><label for="is_tracker_enabled1" class="visible">Activé</label><input name="is_tracker_enabled" id="is_tracker_enabled0" value="0" type="radio" '+(null==(__t=is_tracker_enabled?"":'checked="checked"')?"":__t)+'><label for="is_tracker_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label">Flux d\'export</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div> ',is_enabled&&(__p+=' <div class="form-group"><label class="control-label">Adresse de l\'export à communiquer à Lengow</label> ',__p+=export_url?" <p>Dernier export créé le "+(null==(__t=last_export)?"":_.escape(__t))+'.</p><p class="form-control-static lead"><a href="'+(null==(__t=export_url)?"":_.escape(__t))+'">'+(null==(__t=export_url)?"":_.escape(__t))+"</a></p> ":" <p class=\"form-control-static\">L'adresse est disponible 24 heures après l'activation du module.</p> ",__p+=" </div> "),__p+=' <div class="form-group has-feedback"><label class="control-label required" for="categories">Catégories à inclure dans l\'export</label><div data-role="categories"></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],324:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p><a href="https://www.google.fr/retail/merchant-center/" target="_blank">Google Merchant Center</a> permet d\'importer des produits sur Google et les proposer dans Google Shopping ainsi que dans d\'autres services Google.</p><p>Afin de configurer correctement l\'export vers Google Merchant Center, vous devez suivre la procédure suivante :</p><ol><li>Dans Google Merchant Center :<ol><li><a href="https://www.google.fr/retail/merchant-center/" target="_blank">Ouvrez un compte</a> Google Merchant Center</li><li>Terminez le processus d\'ouverture de compte en validant l\'adresse du site Internet pour en revendiquer la propriété sur la page <em>Paramètres généraux</em> de Google Merchant center</li></ol></li><li>Dans la console d\'administration de Kiubi :<ol><li>Il est recommandé d\'activer l\'<a href="/prefs/https">accès en HTTPS</a>, sans quoi le flux pourrait être refusé par Google Merchant Center</li><li>Dans le formulaire ci-dessous, choisissez les catégories de produits à exporter et activez le module</li><li>Attendez le lendemain matin que le flux journalier soit généré</li><li>Une fois le flux généré, un lien <em>Adresse du flux vers Google Merchant Center</em> est disponible. Cliquez sur ce lien pour télécharger le flux.</li></ol></li><li>Dans Google Merchant Center :<ol><li>Allez dans <em>Flux de données</em> et cliquez sur le lien <em>Nouveau flux de données test</em></li><li>Indiquez le pays et un nom de flux (<code>flux_de_test.txt</code>, par exemple). Enregistrez les modifications</li><li>Cliquez sur le lien <em>Importation manuelle</em> en face du flux de test et sélectionnez le flux précédement téléchargé. Cliquez sur <em>Importer et traiter ce fichier</em></li><li>Attendez que Google traite le flux (l\'opération peut prendre plus d\'une heure)</li><li>Une fois l\'opération terminée, vérifiez que le flux a été importé sans erreur. Dans le cas contraire, cliquez sur <em>Afficher les erreurs</em> et suivez les corrections proposées</li><li>UNIQUEMENT si l\'importation s\'est faite sans aucune erreur, créez un nouveau flux, mais pas de test cette fois</li><li>Cliquez sur le lien <em>Créer un planning</em>. Importez le flux tous les jours à 6h. Indiquez dans le champ URL du flux l\'<em>adresse du flux vers Google Merchant Center</em></li><li>Cliquez sur le bouton <em>Planifier et récupérer</em></li></ol></li></ol><p>Aucune autre intervention n\'est nécessaire, si toutes les opérations ont été correctement effectuées, Google Merchant Center récupéra le flux de produits tous les jours.</p></div><footer class="post-footer"></footer></article><form><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label">Utilisation</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":_.escape(__t))+'><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":_.escape(__t))+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label">Adresse du flux vers Google Merchant Center</label> ',__p+=last_export?' <p class="form-control-static">Dernier export créé le '+(null==(__t=last_export)?"":_.escape(__t))+".</p> ":" <p class=\"form-control-static\">L'adresse est disponible 24 heures après l'activation du module.</p> ",__p+=' <p class="form-control-static lead"><a href="'+(null==(__t=export_url)?"":_.escape(__t))+'" target="_blank">'+(null==(__t=export_url)?"":_.escape(__t))+'</a></p></div></div><footer class="post-footer"></footer></article></form><article class="post-article"><header class="post-header"><h1>Catégories à inclure dans le flux</h1></header><div class="post-content post-list"><p>Sélectionner les catégories de produits du catalogue à inclure dans le flux vers Google Merchant Center. Pour chaque catégorie, vous pouvez indiquer à quelle catégorie de Google Merchant Center elle correspond. Utiliser le moteur de recherche pour trouver la catégorie la plus pertinente.</p><p>La correspondance est strictement obligatoire pour les produits de type vêtements, livres, médias (DVD, musique, ...) et jeux vidéo, sous peine de voir Google pénaliser ou refuser les produits. Elle reste fortement recommandée pour tous les autres types de produits. Pour plus d\'informations, <a href="https://support.google.com/merchants/answer/6324436?hl=fr&visit_id=1-636395331083356320-666099108&rd=1" target="_blank">consulter le centre d\'aide Google Merchant Center</a>.</p><div class="row"><div class="col-xs-5"><label class="control-label" for="">Catégorie du catalogue</label></div><div class="col-xs-7"><label class="control-label" for="">Catégorie de Google Merchant Center</label></div></div><div data-role="categories"></div><div class="list-item no-hover"><a href="#" data-role="categ-add">Ajouter une catégorie</a></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],325:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-5"><div data-role="catalog"></div></div><div class="col-xs-6"><div data-role="merchantcenter"></div></div><div class="col-xs-1"><a href="#" data-role="action" data-action="delete" class="md-icon md-delete pull-right"></a></div></div>';return __p};
},{"undefined":undefined}],326:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><div class="post-content"><div class="row"><div class="col-xs-4"><div class="thumbnail thumbnail-select" data-role="select-amount"><div class="md-icon md-euro"></div><div class="caption"><h4>Bon de réduction<br>d\'un montant fixe</h4></div></div></div><div class="col-xs-4"><div class="thumbnail thumbnail-select" data-role="select-percent"><div class="md-icon md-percent"></div><div class="caption"><h4>Bon de réduction<br>en pourcentage</h4></div></div></div><div class="col-xs-4"><div class="thumbnail thumbnail-select" data-role="select-shipping"><div class="md-icon md-local-shipping"></div><div class="caption"><h4>Frais de port<br>personnalisés</h4></div></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],327:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/marketing-et-referencement/mettre-en-place-des-redirections-301.html" class="md-icon md-help pull-right" target="_blank"></a> Vous pouvez rediriger des adresses vers d\'autres adresses à l\'aide des redirections 301. Le nombre de redirections est <strong>limité à 600</strong> et chaque adresse à <strong>255 caractères</strong>.<br><br>Chaque redirection est de la forme suivante :<br><code>/chemin-a-rediriger.html http://www.example.org/nouvelle-adresse-complete.html</code><br><br>Une syntaxe permet également de rediriger toutes les adresses des pages d’un répertoire vers un autre. Exemple :<br><code>^/blog/ http://www.example.org/blog/</code><br>va rediriger <code>/blog/categorie/billet.html</code> vers <code>http://www.example.org/blog/categorie/billet.html</code><br><br>Nous vous encourageons fortement avant toute modification des règles de redirections à <a href="https://aide.kiubi.com/documentation/marketing-et-referencement/mettre-en-place-des-redirections-301.html" target="_blank">consulter la documentation en ligne</a> et à <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Redirections actives</h1></header><div class="post-content"><div class="form-group"><textarea name="redirections" class="form-control" rows="20">'+(null==(__t=redirections)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/modules">Retour</a> <button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],328:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Modules</h2><ul class="nav nav-sidebar"><li><a href="/forms/inbox">Dismoi?</a></li><li><a href="/modules/vouchers">Bons de réduction</a></li><li><a href="/modules/fidelity">Points de fidélité</a></li><li><a href="/modules/redirections">Redirections 301</a></li><li><a href="/modules/injectcode">Injection de code</a></li><li><a href="/modules/subscribers">Abonnés à la newsletter</a></li><li><a href="/modules/backups">Gestion des sauvegardes</a></li></ul><h2>Imports</h2><ul class="nav nav-sidebar"><li><a href="/modules/import/posts">Dans le Site Web</a></li><li><a href="/modules/import/products">Dans le Catalogue</a></li><li><a href="/modules/import/wordpress">Depuis WordPress</a></li></ul><h2>Services tiers</h2><ul class="nav nav-sidebar"><li><a href="/modules/analytics">Google Analytics</a></li><li><a href="/modules/merchantcenter">Google Merchant Center</a></li><li><a href="/modules/lengow">Lengow</a></li><li><a href="/modules/iadvize">iAdvize</a></li><li><a href="/modules/avisverifies">Avis Verifiés</a></li></ul>';return __p};
},{"undefined":undefined}],329:[function(require,module,exports){
arguments[4][107][0].apply(exports,arguments)
},{"107":107,"undefined":undefined}],330:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-6"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="subscriber_'+(null==(__t=subscriber_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=subscriber_id)?"":_.escape(__t))+'" type="checkbox"><label for="subscriber_'+(null==(__t=subscriber_id)?"":_.escape(__t))+'"></label></div></div><div class="media-body"><h4>'+(null==(__t=email)?"":_.escape(__t))+'</h4></div></div></div><div class="col-xs-2"> ',__p+=is_registered?' <span class="label label-enable">Inscrit</span> ':' <span class="label label-disable">Désinscrit</span> ',__p+=' </div><div class="col-xs-4 text-right no-white-space">Inscrit le '+(null==(__t=subscription_date)?"":_.escape(__t))+" </div></div>";return __p};
},{"undefined":undefined}],331:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Messages de confirmation</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="registration_success_msg">Si l\'inscription est validée</label><input class="form-control" id="registration_success_msg" name="registration_success_msg" value="'+(null==(__t=registration_success_msg)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="control-label" for="unregistration_success_msg">Si la désinscription est validée</label><input class="form-control" id="unregistration_success_msg" name="unregistration_success_msg" value="'+(null==(__t=unregistration_success_msg)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="control-label" for="registration_error_msg">Si l\'abonné est déjà inscrit</label><input class="form-control" id="registration_error_msg" name="registration_error_msg" value="'+(null==(__t=registration_error_msg)?"":_.escape(__t))+'" placeholder=""></div><div class="form-group"><label class="control-label" for="unregistration_error_msg">Si l\'abonné n\'est pas encore inscrit</label><input class="form-control" id="unregistration_error_msg" name="unregistration_error_msg" value="'+(null==(__t=unregistration_error_msg)?"":_.escape(__t))+'" placeholder=""></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],332:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="code">Code de réduction</label><p>Le code doit comprendre 3 caractères minimum, lettres ou chiffres, sans espace, sans caractères spéciaux.</p><input class="form-control" id="code" name="code" value="'+(null==(__t=code)?"":_.escape(__t))+'" placeholder="BON-1213, PROMO-NOEL, TOPCLIENT, ..."></div><div class="row"><div class="col-xs-4"><div class="form-group has-feedback"><label class="control-label" for="start_date">Début de validité</label><input data-role="datepicker" class="form-control" id="start_date" name="start_date" value="'+(null==(__t=start_date)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa"> <span class="form-control-feedback md-feedback md-date"></span></div></div><div class="col-xs-4"><div class="form-group has-feedback"><label class="control-label" for="end_date">Fin de validité</label><input data-role="datepicker" class="form-control" id="end_date" name="end_date" value="'+(null==(__t=end_date)?"":_.escape(__t))+'" placeholder="jj/mm/aaaa"> <span class="form-control-feedback md-feedback md-date"></span></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="">Utilisation</label><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+' type="radio"><label for="is_enabled1" class="visible">Activé</label><input name="is_enabled" id="is_enabled0" value="0" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+' type="radio"><label for="is_enabled0" class="not-visible">Désactivé</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Paramères du bon de réduction</h1></header><div class="post-content"><div class="row"><div class="col-xs-4"> ',"shipping"==type?__p+=' <div class="form-group"><label class="control-label" for="value">Montant des frais de port</label><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" id="value" name="value" value="'+(null==(__t=value)?"":_.escape(__t))+'" placeholder="Frais de port gratuits"> <span class="input-group-addon">€TTC</span></div></div> ':"amount"==type?__p+=' <div class="form-group"><label class="control-label" for="value">Montant de la réduction</label><div class="input-group"><span class="input-group-addon" id="basic-addon3"></span> <input class="form-control" id="value" name="value" value="'+(null==(__t=value)?"":_.escape(__t))+'" placeholder="0,00"> <span class="input-group-addon" id="basic-addon2">€TTC</span></div></div> ':"percent"==type&&(__p+=' <div class="form-group has-feedback"><label class="control-label" for="value">Montant de la réduction</label><input class="form-control" id="value" name="value" value="'+(null==(__t=value)?"":_.escape(__t))+'" placeholder="0"> <span class="form-control-feedback md-percent"></span></div> '),__p+=' </div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="threshold">Seuil de validité</label><div class="input-group"><span class="input-group-addon">À partir de</span> <input class="form-control" id="threshold" name="threshold" value="'+(null==(__t=threshold)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">€TTC d\'achats</span></div></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="is_stock_unlimited">Limite d\'utilisations</label><select id="is_stock_unlimited" name="is_stock_unlimited" data-style="selectify"><option value="0" '+(null==(__t=is_stock_unlimited?"":'selected="selected"')?"":__t)+'>Limiter l\'utilisation</option><option value="1" '+(null==(__t=is_stock_unlimited?'selected="selected"':"")?"":__t)+'>Utilisation illimitée</option></select></div></div><div class="col-xs-4" data-role="stock" style="'+(null==(__t=is_stock_unlimited?"display: none":"")?"":__t)+'"><div class="form-group"><label class="control-label" for="stock">Utilisations maximum</label><input class="form-control" id="stock" name="stock" value="'+(null==(__t=stock)?"":_.escape(__t))+'" placeholder="0"></div></div><div class="col-xs-4" data-role="stock" style="'+(null==(__t=is_stock_unlimited?"display: none":"")?"":__t)+'"><div class="form-group"><label class="control-label">Nombre d\'utilisations</label><p class="form-control-static">'+(null==(__t=used)?"":_.escape(__t))+'</p></div></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="is_quota_unlimited">Utilisations par membre</label><select id="is_quota_unlimited" name="is_quota_unlimited" data-style="selectify"><option value="0" '+(null==(__t=is_quota_unlimited?"":'selected="selected"')?"":__t)+'>Limiter l\'utilisation</option><option value="1" '+(null==(__t=is_quota_unlimited?'selected="selected"':"")?"":__t)+'>Utilisation illimitée</option></select></div></div><div class="col-xs-4" data-role="quota" style="'+(null==(__t=is_quota_unlimited?"display: none":"")?"":__t)+'"><div class="form-group"><label class="control-label" for="quota">Utilisations par membre</label><input class="form-control" id="quota" name="quota" value="'+(null==(__t=quota)?"":_.escape(__t))+'" placeholder="0"></div></div></div> ',"shipping"==type&&(__p+=' <div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label" for="carrier_id">Applicable au transporteur</label><div data-role="carriers"></div></div></div></div> '),__p+=' </div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Réserver le bon de réduction</h1></header><div class="post-content"><p>Vous pouvez réserver un bon de réduction à un ensemble de membres, de groupes extranet, de produits et de catégories de produits. Les conditions d\'utilisation du bon ainsi que le montant de la remise ne s\'appliqueront que sur ces ensembles.</p><div class="row"><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="allowed_customers">Membres ou groupes extranet à <span class="text-success">inclure</span></label><div data-role="allowed_customers"></div></div></div><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="denied_customers">Membres ou groupes extranet à <span class="text-danger">exclure</span></label><div data-role="denied_customers"></div></div></div></div> ',"shipping"!=type&&(__p+=' <div class="row"><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="allowed_products">Produits ou catégories de produits à <span class="text-success">inclure</span></label><div data-role="allowed_products"></div></div></div><div class="col-xs-6"><div class="form-group has-feedback"><label class="control-label" for="denied_products">Produits ou catégories de produits à <span class="text-danger">exclure</span></label><div data-role="denied_products"></div></div></div></div> '),__p+=' </div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete" data-role="delete">Supprimer</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],333:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/marketing-et-referencement/creer-un-bon-de-reduction.html" class="md-icon md-help pull-right" target="_blank"></a> Vous pouvez créer 3 types de bons de réduction différents : <strong>une remise en pourcentage</strong>, <strong>une remise d\'un montant fixe</strong> ou <strong>une remise sur les frais de port</strong>.</div><article data-role="list"></article>';return __p};
},{"undefined":undefined}],334:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row"><div class="col-xs-4 col-md-5"><div class="media"><div class="media-left"><div class="checkbox-inline"><input id="voucher_'+(null==(__t=voucher_id)?"":_.escape(__t))+'" name="selection" value="'+(null==(__t=voucher_id)?"":_.escape(__t))+'" type="checkbox"><label for="voucher_'+(null==(__t=voucher_id)?"":_.escape(__t))+'"></label></div></div><div class="media-body"><h4>'+(null==(__t=code)?"":_.escape(__t))+"</h4> ","shipping"==type?(__p+=" Frais de port à "+(null==(__t=value_label)?"":_.escape(__t)),threshold>0&&(__p+=" • À partir de "+(null==(__t=threshold_label)?"":_.escape(__t))+" d'achat "),__p+=" "):"amount"==type?__p+=" "+(null==(__t=value_label)?"":_.escape(__t))+" de remise • À partir de "+(null==(__t=threshold_label)?"":_.escape(__t))+" d'achat ":"percent"==type&&(__p+=" "+(null==(__t=value_label)?"":_.escape(__t))+" de remise",threshold>0&&(__p+=" • À partir de "+(null==(__t=threshold_label)?"":_.escape(__t))+" d'achat "),__p+=" "),__p+=' </div></div></div><div class="col-xs-8 col-md-7"><div class="row"><div class="col-xs-3"> ',__p+=is_enabled?' <span class="label label-enable">Activé</span> ':' <span class="label label-disable">Désactivé</span> ',__p+=' </div><div class="col-xs-3 no-white-space"> ',__p+=is_stock_unlimited?"Illimité":""+(null==(__t=plural(used,"%d utilisé","%d utilisés"))?"":__t)+" ",__p+=' </div><div class="col-xs-3 no-white-space">Du '+(null==(__t=start_date)?"":_.escape(__t))+"<br>Au "+(null==(__t=end_date)?"":_.escape(__t))+' </div><div class="col-xs-3"><a class="btn btn-option pull-right" href="/modules/vouchers/'+(null==(__t=voucher_id)?"":_.escape(__t))+'" role="button">Détail</a></div></div></div></div>';return __p};
},{"undefined":undefined}],335:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(312),className:"container",service:"modules",behaviors:[FormBehavior],fields:["UA","is_enabled","type","target","options"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"25":25,"312":312,"424":424,"undefined":undefined}],336:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(313),className:"container",service:"modules",behaviors:[FormBehavior],fields:["id","secret","plateform","offset","is_sending_products","is_enabled"],templateContext:function(){return{allPlatforms:this.model.getPlatforms()}},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"25":25,"313":313,"424":424,"undefined":undefined}],337:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(423),RowActionsBehavior=require(28),RowView=Marionette.View.extend({template:require(315),className:"list-item visible-btn",behaviors:[RowActionsBehavior],templateContext:function(){return{creation_date:format.formatLongDateTime(this.model.get("creation_date"))}},onActionRestore:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");return e.showOverlay(),this.model.restore().done(function(i){return""!=i?void e.showErrorModal(i,4e3):(e.hideModal(),void this.render())}.bind(this)).fail(function(i){e.showErrorModal(i)})}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(314),className:"container",service:"modules",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Dernières sauvegardes"}))},start:function(){this.collection.fetch()}});
},{"28":28,"314":314,"315":315,"423":423,"433":433,"undefined":undefined}],338:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(316),className:"container",service:"modules",behaviors:[FormBehavior],fields:["gain_rate","reward_first_order","reward_subscriber","is_creation_enabled","creation_cost","voucher_mail_subject","voucher_value","voucher_validity","voucher_threshold","is_voucher_restricted"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"25":25,"316":316,"424":424,"undefined":undefined}],339:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(317),className:"container",service:"modules",behaviors:[FormBehavior],fields:["id","is_enabled"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"25":25,"317":317,"424":424,"undefined":undefined}],340:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SelectView=require(436),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(318),className:"container",service:"modules",behaviors:[FormBehavior],events:{"change input[type=file]":"dropFile"},regions:{page:{el:'div[data-role="page"]',replaceElement:!0},type:{el:'div[data-role="type"]',replaceElement:!0}},fields:["is_enabled","page_id","mode","type"],step:0,tempfileUpload:null,report:null,menus:null,post:null,initialize:function(e){this.mergeOptions(e,["model","post","menus"])},templateContext:function(){return{report:this.report,step:this.step}},onRender:function(){this.step>0||(this.showChildView("page",new SelectView({collection:this.menus,name:"page_id"})),this.menus.fetch({data:{extra_fields:"pages"}}),this.menus.selectPayloadFilter=function(e,t){return null!=t&&"page"==t.page_type||(e.is_group=!0),e},this.showChildView("type",new SelectView({collectionPromise:this.post.promisedTypes(),name:"type"})))},dropFile:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer,i=t?t.files:e.originalEvent.target.files;_.each(i,function(e){this.tempfileUpload=e}.bind(this))},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay();var t=Forms.extractFields(this.fields,this);return t.file=this.tempfileUpload,this.model["import"](t).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.navigate("/modules")}else this.step=0,this.report=null,this.tempfileUpload=null,this.render()}});
},{"25":25,"318":318,"424":424,"436":436,"undefined":undefined}],341:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),AutocompleteView=require(437),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(319),className:"container",service:"modules",behaviors:[FormBehavior],regions:{categories:{el:"div[data-role='categories']",replaceElement:!0}},events:{"change input[type=file]":"dropFile"},fields:["is_enabled"],step:0,tempfileUpload:null,report:null,initialize:function(e){this.mergeOptions(e,["model","categories"])},templateContext:function(){return{report:this.report,step:this.step}},onRender:function(){0==this.step&&this.showChildView("categories",new AutocompleteView({searchPlaceholder:"Rechercher une catégorie",current:{label:"-- Choisissez une catégorie --",value:null}}))},onChildviewInput:function(e,t){this.categories.fetch({data:{limit:5,term:e}}).done(function(){var e=_.map(this.categories.toJSON(),function(e){return{label:e.name,value:e.category_id}});t.showResults(e)}.bind(this))},dropFile:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer,i=t?t.files:e.originalEvent.target.files;_.each(i,function(e){this.tempfileUpload=e}.bind(this))},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");if(0==this.step){var t=Forms.extractFields(this.fields,this);return t.category_id=this.getChildView("categories").getCurrent().value,t.file=this.tempfileUpload,e.showOverlay(),this.model.analyse(t).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})}return e.showOverlay(),this.model["import"](this.report.token).done(function(e){this.step=2,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.navigate("/modules")}else this.step=0,this.report=null,this.tempfileUpload=null,this.render()}});
},{"25":25,"319":319,"424":424,"437":437,"undefined":undefined}],342:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SelectView=require(436),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(320),className:"container",service:"modules",behaviors:[FormBehavior],events:{"change input[type=file]":"dropFile"},regions:{type:{el:'div[data-role="type"]',replaceElement:!0}},fields:["is_enabled","url","login","password","import_pages","import_media","thumbnail","medium","large","type"],step:0,tempfileUpload:null,report:null,initialize:function(e){this.mergeOptions(e,["model","post"])},templateContext:function(){return{report:this.report,step:this.step}},onRender:function(){this.step>0||this.showChildView("type",new SelectView({collectionPromise:this.post.promisedTypes(),name:"type"}))},dropFile:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer,i=t?t.files:e.originalEvent.target.files;_.each(i,function(e){this.tempfileUpload=e}.bind(this))},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");if(0==this.step){var t=Forms.extractFields(this.fields,this);return t.file=this.tempfileUpload,e.showOverlay(),this.model.analyse(t).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})}return e.showOverlay(),this.model["import"](this.report.token).done(function(e){this.step=2,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.navigate("/modules")}else this.step=0,this.report=null,this.tempfileUpload=null,this.render()}});
},{"25":25,"320":320,"424":424,"436":436,"undefined":undefined}],343:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(321),className:"container",service:"modules"});
},{"321":321,"undefined":undefined}],344:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(322),className:"container",service:"modules",behaviors:[FormBehavior],fields:["js_head","js_body"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"25":25,"322":322,"424":424,"undefined":undefined}],345:[function(require,module,exports){
function formatCategoriesTags(e){return _.map(e,function(e){return{label:e.name,value:e.category_id}})}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(423),TagView=require(438),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(323),className:"container",service:"modules",behaviors:[FormBehavior],regions:{categories:{el:"div[data-role='categories']",replaceElement:!0}},fields:["is_enabled","id","is_tracker_enabled"],initialize:function(e){this.mergeOptions(e,["model","categories"])},templateContext:function(){return{last_export:this.model.get("last_export")?format.formatDateTime(this.model.get("last_export")):null}},onRender:function(){this.showChildView("categories",new TagView({searchPlaceholder:"Recherche des catégories de produits",tags:formatCategoriesTags(this.model.get("categories")),inputName:"categories"}))},onChildviewInput:function(e,t){this.categories.fetch({data:{term:e,limit:5}}).done(function(){t.showResults(formatCategoriesTags(this.categories.toJSON()))}.bind(this))},onSave:function(){var e=Forms.extractFields(this.fields,this),t=this.getChildView("categories").getTags();return 0==t.length?e.categories=[""]:e.categories=_.reduce(t,function(e,t){return e.push(t.value),e},[]),this.model.save(e,{patch:!0,wait:!0})}});
},{"25":25,"323":323,"423":423,"424":424,"438":438,"undefined":undefined}],346:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),format=require(423),FormBehavior=require(25),Forms=require(424),AutocompleteView=require(437),Categories=require(93),RowActionsBehavior=require(28),RowView=Marionette.View.extend({template:require(325),className:"list-item list-item-form",behaviors:[RowActionsBehavior],regions:{catalog:{el:"div[data-role='catalog']",replaceElement:!0},merchantcenter:{el:"div[data-role='merchantcenter']",replaceElement:!0}},initialize:function(e){this.mergeOptions(e,["categories","merchantcenter"])},onRender:function(){this.showChildView("catalog",new AutocompleteView({searchPlaceholder:"Rechercher une catégorie",current:{label:this.model.get("name"),value:this.model.get("category_id")},evtSuffix:"catalog"})),this.showChildView("merchantcenter",new AutocompleteView({searchPlaceholder:"Recherche sur Google Merchant Center",current:{label:this.model.get("mc_name"),value:this.model.get("mc_category_id")},evtSuffix:"merchantcenter"}))},onActionDelete:function(){this.model.destroy()},onChildviewInputCatalog:function(e,t){this.categories.fetch({data:{limit:5,term:e}}).done(function(){var e=_.map(this.categories.toJSON(),function(e){return{label:e.name,value:e.category_id}});t.showResults(e)}.bind(this))},onChildviewChangeCatalog:function(e){this.model.set("category_id",e.value,{silent:!0})},onChildviewInputMerchantcenter:function(e,t){this.merchantcenter.searchCategories(e).done(function(e){var i=_.map(e,function(e){return{label:e.name,value:e.category_id}});t.showResults(i)})},onChildviewChangeMerchantcenter:function(e){this.model.set("mc_category_id",e.value,{silent:!0})}}),EmptyView=Marionette.View.extend({template:_.template('<span class="list-item-empty">Aucune catégorie</span>')}),ListView=Marionette.CollectionView.extend({className:"",emptyView:EmptyView,childView:RowView});module.exports=Marionette.View.extend({template:require(324),className:"container",service:"modules",behaviors:[FormBehavior],regions:{categories:{el:"div[data-role='categories']",replaceElement:!0}},ui:{addDiscountBtn:'a[data-role="categ-add"]'},events:{"click @ui.addDiscountBtn":function(){var e=new this.mapping.model({category_id:null,name:"-- Choisir une catégorie --",mc_category_id:null,mc_name:"-- Choisir une catégorie --"});this.mapping.add(e)}},fields:["is_enabled"],mapping:null,initialize:function(e){this.mergeOptions(e,["model"]),this.mapping=new Backbone.Collection,this.mapping.add(this.model.get("categories"))},templateContext:function(){return{last_export:this.model.get("last_export")?format.formatDateTime(this.model.get("last_export")):null}},onRender:function(){this.showChildView("categories",new ListView({collection:this.mapping,childViewOptions:{categories:new Categories,merchantcenter:this.model}}))},onSave:function(){var e=Forms.extractFields(this.fields,this);return 0==this.mapping.length?e.categories=[""]:e.categories=this.mapping.reduce(function(e,t){return e.push({category_id:t.get("category_id"),mc_category_id:t.get("mc_category_id")}),e},[]),this.model.save(e,{patch:!0,wait:!0})}});
},{"25":25,"28":28,"324":324,"325":325,"423":423,"424":424,"437":437,"93":93,"undefined":undefined}],347:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(326),ui:{"select-amount":'div[data-role="select-amount"]',"select-percent":'div[data-role="select-percent"]',"select-shipping":'div[data-role="select-shipping"]'},events:{"click @ui.select-amount":function(){this.trigger("select:amount","amount")},"click @ui.select-percent":function(){this.trigger("select:percent","percent")},"click @ui.select-shipping":function(){this.trigger("select:shipping","shipping")}}});
},{"326":326,"undefined":undefined}],348:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(327),className:"container",service:"modules",behaviors:[FormBehavior],fields:["redirections"],templateContext:function(){var e=this.collection.reduce(function(e,r){return e+r.get("uri")+"\t"+r.get("target")+"\n"},"");return{redirections:e}},onSave:function(){var e=Forms.extractFields(this.fields,this);return this.collection.bulkUpdate(e.redirections)}});
},{"25":25,"327":327,"424":424,"undefined":undefined}],349:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),CollectionUtils=require(422),format=require(423),RowActionsBehavior=require(28),RowView=Marionette.View.extend({template:require(330),className:"list-item",templateContext:function(){return{subscription_date:format.formatDateTime(this.model.get("subscription_date"))}},behaviors:[RowActionsBehavior]}),ListView=require(433);module.exports=Marionette.View.extend({template:require(329),className:"container",service:"modules",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"date",filters:null,initialize:function(e){this.mergeOptions(e,["collection"]),this.filters={is_registered:null}},onRender:function(){var e=new CollectionUtils.SelectCollection;e.add([{value:"registred",label:"Inscrits",selected:"true"==this.filters.is_registered},{value:"unregistred",label:"Désinscrits",selected:"false"==this.filters.is_registered}]),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des abonnés à la newsletter",order:[{title:"Inscription",is_active:!0,value:"date"},{title:"Email",is_active:!1,value:"email"}],selection:[{title:"Désinscrire",callback:this.unsubscribeEmail.bind(this)},{title:"Inscrire",callback:this.subscribeEmail.bind(this)},{title:"Supprimer",callback:this.deleteEmail.bind(this),confirm:!0}],filters:[{extraClassname:"select-state",title:"Tous les états",collectionPromise:e}]}))},start:function(){var e={sort:this.sortOrder?this.sortOrder:null};null!=this.filters.is_registered&&(e.is_registered=this.filters.is_registered),this.collection.fetch({reset:!0,data:e})},subscribeEmail:function(e){return this.collection.bulkSubscribe(e)},unsubscribeEmail:function(e){return this.collection.bulkUnsubscribe(e)},deleteEmail:function(e){return this.collection.bulkDelete(e)},onChildviewFilterChange:function(e){"registred"==e.value?this.filters.is_registered="true":"unregistred"==e.value?this.filters.is_registered="false":this.filters.is_registered=null,this.start()},onChildviewChangeOrder:function(e){this.sortOrder=e,this.start()}});
},{"28":28,"329":329,"330":330,"422":422,"423":423,"433":433,"undefined":undefined}],350:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(331),className:"container",service:"modules",behaviors:[FormBehavior],fields:["registration_success_msg","unregistration_success_msg","registration_error_msg","unregistration_error_msg"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"25":25,"331":331,"424":424,"undefined":undefined}],351:[function(require,module,exports){
function formatCustomersTags(e,t){return _.map(t,function(e){return{label:"Groupe : "+e.name,value:e.restriction_id,type:"group"}}).concat(_.map(e,function(e){return{label:e.name,value:e.restriction_id,type:"customer"}}))}function formatProductsTags(e,t){return _.map(t,function(e){return{label:"Catégorie : "+e.name,value:e.restriction_id,type:"category"}}).concat(_.map(e,function(e){return{label:e.name,value:e.restriction_id,type:"product"}}))}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),TagView=require(438),SelectView=require(436),FormBehavior=require(25),Forms=require(424),format=require(423),Datepicker=require(20),Restrictions=require(233);module.exports=Marionette.View.extend({template:require(332),className:"container",service:"modules",behaviors:[FormBehavior,Datepicker],regions:{carriers:{el:"div[data-role='carriers']",replaceElement:!0},allowed_customers:{el:"div[data-role='allowed_customers']",replaceElement:!0},denied_customers:{el:"div[data-role='denied_customers']",replaceElement:!0},allowed_products:{el:"div[data-role='allowed_products']",replaceElement:!0},denied_products:{el:"div[data-role='denied_products']",replaceElement:!0}},ui:{stock_fields:'div[data-role="stock"]',is_stock_unlimited:'select[name="is_stock_unlimited"]',quota_fields:'div[data-role="quota"]',is_quota_unlimited:'select[name="is_quota_unlimited"]'},events:{"change @ui.is_stock_unlimited":function(e){"1"==this.getUI("is_stock_unlimited").val()?this.getUI("stock_fields").hide():this.getUI("stock_fields").show()},"change @ui.is_quota_unlimited":function(e){"1"==this.getUI("is_quota_unlimited").val()?this.getUI("quota_fields").hide():this.getUI("quota_fields").show()}},fields:["code","value","start_date","end_date","is_enabled","stock","is_stock_unlimited","quota","is_quota_unlimited","threshold","carrier_id"],initialize:function(e){this.mergeOptions(e,["model","customers","groups","categories","products","carriers"])},templateContext:function(){return{start_date:format.formatDate(this.model.get("start_date")),end_date:format.formatDate(this.model.get("end_date"))}},onRender:function(){var e=this.model.get("restrictions");this.showChildView("allowed_customers",new TagView({evtSuffix:"customers",searchPlaceholder:"Recherche des membres ou groups extranet",tags:formatCustomersTags(e.allow.customers,e.allow.groups)})),this.showChildView("denied_customers",new TagView({evtSuffix:"customers",searchPlaceholder:"Recherche des membres ou groups extranet",tags:formatCustomersTags(e.deny.customers,e.deny.groups)})),"shipping"!=this.model.get("type")?(this.showChildView("allowed_products",new TagView({evtSuffix:"products",searchPlaceholder:"Recherche des produits ou catégories de produits",tags:formatProductsTags(e.allow.products,e.allow.categories)})),this.showChildView("denied_products",new TagView({evtSuffix:"products",searchPlaceholder:"Recherche des produits ou catégories de produits",tags:formatProductsTags(e.deny.products,e.deny.categories)}))):this.showChildView("carriers",new SelectView({collectionPromise:this.carriers.promisedSelect({exclude_pickup:!0},this.model.get("carrier_id")),name:"carrier_id"}))},onChildviewInputCustomers:function(e,t){Backbone.$.when(this.customers.fetch({data:{limit:5,term:e}}),this.groups.fetch({data:{limit:5,term:e}})).done(function(){t.showResults(formatCustomersTags(_.map(this.customers.toJSON(),function(e){return{name:e.firstname+" "+e.lastname,restriction_id:e.customer_id}}),_.map(this.groups.toJSON(),function(e){return{name:e.name,restriction_id:e.group_id}})))}.bind(this))},onChildviewInputProducts:function(e,t){Backbone.$.when(this.products.fetch({data:{limit:5,term:e}}),this.categories.fetch({data:{limit:5,term:e}})).done(function(){t.showResults(formatProductsTags(_.map(this.products.toJSON(),function(e){return{name:e.name,restriction_id:e.product_id}}),_.map(this.categories.toJSON(),function(e){return{name:e.name,restriction_id:e.category_id}})))}.bind(this))},onSave:function(){var e=new Restrictions;e.setType("checkout/vouchers",this.model.get("voucher_id"));var t=[],i=[],s=[],r=[],o=[],a=[],u=[],c=[];return _.each(this.getChildView("allowed_customers").getTags(),function(e){"customer"==e.type?t.push(e.value):i.push(e.value)}),_.each(this.getChildView("denied_customers").getTags(),function(e){"customer"==e.type?o.push(e.value):a.push(e.value)}),"shipping"!=this.model.get("type")&&(_.each(this.getChildView("allowed_products").getTags(),function(e){"product"==e.type?s.push(e.value):r.push(e.value)}),_.each(this.getChildView("denied_products").getTags(),function(e){"product"==e.type?u.push(e.value):c.push(e.value)})),e.set("allow_customers",t),e.set("allow_groups",i),e.set("allow_products",s),e.set("allow_categories",r),e.set("deny_customers",o),e.set("deny_groups",a),e.set("deny_products",u),e.set("deny_categories",c),this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0}).then(function(){return e.save()})},onDelete:function(){return this.model.destroy({wait:!0})}});
},{"20":20,"233":233,"25":25,"332":332,"423":423,"424":424,"436":436,"438":438,"undefined":undefined}],352:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),format=require(423),RowActionsBehavior=require(28),RowView=Marionette.View.extend({template:require(334),className:"list-item",templateContext:function(){return{plural:function(e,t,i){return(e>1?i:t).replace("%d",e)},start_date:format.formatDate(this.model.get("start_date")),end_date:format.formatDate(this.model.get("end_date"))}},behaviors:[RowActionsBehavior],onActionDelete:function(){return this.model.destroy()}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(333),className:"container-fluid",service:"modules",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},sortOrder:"-start_date",initialize:function(e){this.mergeOptions(e,["collection"])},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des bons de réduction",order:[{title:"Date de validité",is_active:!0,value:"-start_date"},{title:"Code",is_active:!1,value:"code"}],selection:[{title:"Activer",callback:this.enableVouchers.bind(this)},{title:"Désactiver",callback:this.disableVouchers.bind(this)},{title:"Supprimer",callback:this.deleteVouchers.bind(this),confirm:!0}]}))},start:function(){this.collection.fetch({reset:!0,data:{sort:this.sortOrder?this.sortOrder:null}})},enableVouchers:function(e){return this.collection.bulkEnable(e)},disableVouchers:function(e){return this.collection.bulkDisable(e)},deleteVouchers:function(e){return this.collection.bulkDelete(e)},onChildviewChangeOrder:function(e){this.sortOrder=e,this.start()}});
},{"28":28,"333":333,"334":334,"423":423,"433":433,"undefined":undefined}],353:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/avisverifies",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{id:"",secret:"",plateform:"",offset:0,is_sending_products:!1,is_enabled:!1},getPlatforms:function(){return{FR:"www.avis-verifies.com",ES:"www.opiniones-verificadas.com",DE:"www.echte-bewertungen.com",IT:"www.recensioni-verificate.com",NL:"www.echte-beoordelingen.com",UK:"www.verified-reviews.co.uk",US:"www.verified-reviews.com",BR:"www.opinioes-verificadas.com.br",PT:"www.opinioes-verificadas.com",CO:"www.opiniones-verificadas.com.co",PL:"www.prawdziwe-opinie.com",PE:"www.opiniones-verificadas.pe",CL:"www.cl.opiniones-verificadas.com",AU:"www.au.verified-reviews.com",NZ:"www.verified-reviews.co.nz",MX:"www.opiniones-verificadas.com.mx"}}});
},{"undefined":undefined}],354:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/contact",parse:function(a){return"data"in a?null===a.data?{}:a.data:a},isNew:function(){return!1},defaults:{firstname:"",lastname:"",civility:"",email:"",address:"",zipcode:"",city:"",country_id:"",phone:"",mobile:"",fax:"",company_name:"",company_forme:"",company_cnil:"",company_capital:"",company_siret:"",company_rcs:"",company_naf:"",company_tva:""}});
},{"undefined":undefined}],355:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/fidelity",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{gain_rate:0,reward_first_order:0,reward_subscriber:0,is_creation_enabled:!1,creation_cost:0,voucher_mail_subject:"",voucher_value:0,voucher_validity:0,voucher_threshold:0,is_voucher_restricted:!1}});
},{"undefined":undefined}],356:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/ftp",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{host:"",port:null,login:"",password:""}});
},{"undefined":undefined}],357:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/gdpr",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{is_customers_consent_required:!1,is_comments_consent_required:!1,is_evaluations_consent_required:!1,is_newsletter_consent_required:!1,is_checkout_consent_required:!1}});
},{"undefined":undefined}],358:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/https",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{is_enabled:!1,status:null,domain_IP:""}});
},{"undefined":undefined}],359:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/iadvize",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{id:"",is_enabled:!1}});
},{"undefined":undefined}],360:[function(require,module,exports){
function checkImport(e){var t=e.get("result").split(";"),n=t[1];return Backbone.ajax({url:"sites/@site/import/l10n/theme/"+n,method:"GET"}).then(function(e){return e.data})}var Backbone=require("backbone"),_=require("underscore"),Job=require(307),Entry=Backbone.Model.extend({url:"sites/@site/l10n/theme",idAttribute:"msgid",parse:function(e){return"data"in e?null===e.data?{}:_.isNumber(e.data)?{msgid:e.data}:e.data:e},defaults:{msgid:null,msgstr:""}});module.exports=Backbone.Collection.extend({url:"sites/@site/l10n/theme",model:Entry,parse:function(e){return this.meta=e.meta,e.data},clearAll:function(){return Backbone.ajax({url:this.url,method:"DELETE",data:{}})},"import":function(e){var t=new FormData;return _.each(e,function(e,n){t.append(n,e)}),Backbone.ajax({url:"sites/@site/import/l10n/theme",method:"POST",data:t,processData:!1,contentType:!1}).then(function(e){var t=new Job({job_id:e.data.job_id});return t.watch().then(function(){return checkImport(t)})})},exportAll:function(){return Backbone.ajax({url:"sites/@site/export/l10n/theme",method:"POST",data:{}}).then(function(e){if(e.meta&&e.meta.success)return e.data})}});
},{"307":307,"undefined":undefined}],361:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/lengow",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{is_enabled:!1,categories:[],id:"",is_tracker_enabled:!1,export_url:"",last_export:""}});
},{"undefined":undefined}],362:[function(require,module,exports){
var Backbone=require("backbone"),CollectionUtils=require(422);module.exports=Backbone.Model.extend({url:"sites/@site/prefs/medias",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{g_vignette_width:null,g_vignette_height:null,vignette_width:null,vignette_height:null,g_miniature_width:null,g_miniature_height:null,miniature_width:null,miniature_height:null},promisedSelect:function(e){var t=this;return this.fetch().then(function(){var i=new CollectionUtils.SelectCollection;return i.add([{value:"full",label:"Taille d'origine",selected:"full"==e||!e},{value:"g_vignette",label:"Grande vignette : "+t.get("g_vignette_width")+" x "+t.get("g_vignette_height")+"px",selected:"g_vignette"==e},{value:"vignette",label:"Vignette : "+t.get("vignette_width")+" x "+t.get("vignette_height")+"px",selected:"vignette"==e},{value:"g_miniature",label:"Grande miniature : "+t.get("g_miniature_width")+" x "+t.get("g_miniature_height")+"px",selected:"g_miniature"==e},{value:"miniature",label:"Miniature : "+t.get("miniature_width")+" x "+t.get("miniature_height")+"px",selected:"miniature"==e}]),i})}});
},{"422":422,"undefined":undefined}],363:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/merchantcenter",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{is_enabled:!1,last_export:null,export_url:"",categories:[]},searchCategories:function(e){return Backbone.ajax({url:this.url+"/categories",method:"GET",data:{term:e,limit:5}}).then(function(e){return e.data})}});
},{"undefined":undefined}],364:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/seo/meta",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{meta_title:"",meta_description:"",meta_keywords:"",js_head:"",js_body:""}});
},{"undefined":undefined}],365:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/newsletter",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{registration_success_msg:"",unregistration_success_msg:"",registration_error_msg:"",unregistration_error_msg:""}});
},{"undefined":undefined}],366:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{site_title:"",is_site_open:!1,is_contact_enabled:!1,is_api_enabled:!1,is_blog_enabled:!1,is_catalog_enabled:!1,is_checkout_enabled:!1,front_login:"",front_password:"",breadcrumb:{}}});
},{"undefined":undefined}],367:[function(require,module,exports){
var Backbone=require("backbone");module.exports=Backbone.Model.extend({url:"sites/@site/prefs/theme",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},isNew:function(){return!1},defaults:{site_excerpt:"",is_excerpt_visible:!1,site_description:"",is_description_visible:!1,logo_media_id:null,is_logo_visible:!1}});
},{"undefined":undefined}],368:[function(require,module,exports){
function HeaderTabsL10n(){return[{title:"Traductions",url:"/prefs/l10n"},{title:"Import",url:"/prefs/l10n/import"}]}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Controller=require(30),Site=require(366),Theme=require(367),Contact=require(354),Medias=require(362),Ftp=require(356),Meta=require(364),Countries=require(34),Domains=require(35),Https=require(358),Gdpr=require(357),L10n=require(360),IndexView=require(389),ContactView=require(385),HttpsView=require(388),MediasView=require(392),MetaView=require(393),DomainsView=require(386),UsersView=require(396),UserView=require(395),ShortcutView=require(394),GdprView=require(387),L10nView=require(391),L10nImportView=require(390),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(382),service:"prefs",behaviors:[ActiveLinksBehaviors]}),PrefsController=Controller.extend({sidebarMenuService:"prefs",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Préférences",href:"/prefs"}],showIndex:function(){var e=new Site,t=new Theme;Backbone.$.when(e.fetch(),t.fetch()).done(function(){var i=new IndexView({site:e,theme:t});this.navigationController.showContent(i),this.setHeader({title:"Préférences Générales"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"}.bind(this))})},showContact:function(){var e=new Contact;e.fetch().done(function(){var t=new ContactView({model:e,countries:new Countries});this.navigationController.showContent(t),this.setHeader({title:"Coordonnées du site Internet"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showHttps:function(){var e=new Https;e.fetch().done(function(){this.navigationController.showContent(new HttpsView({model:e})),this.setHeader({title:"Certificat SSL/TLS et accès HTTPS"})}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showMedias:function(){var e=new Medias,t=new Ftp;Backbone.$.when(e.fetch(),t.fetch()).done(function(){var i=new MediasView({model:e,ftp:t});this.navigationController.showContent(i),this.setHeader({title:"Paramètres de la médiathèque"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showMeta:function(){var e=new Meta;e.fetch().done(function(){var t=new MetaView;t.model=e,this.navigationController.showContent(t),this.setHeader({title:"Balises metas par défaut"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showDomains:function(){var e=new DomainsView({collection:new Domains});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Noms de domaine"})},showUsers:function(){console.log("PrefsController, showUsers"),this.navigationController.showContent(new UsersView),this.setHeader({title:"Comptes utilisateurs"})},showUser:function(e){console.log("CustomersController, showUser",e),this.navigationController.showContent(new UserView),this.setHeader({title:"Détail du membre "+e})},showShortcut:function(){this.navigationController.showContent(new ShortcutView),this.setHeader({title:"Raccourcis clavier"})},showGdpr:function(){var e=new Gdpr;e.fetch().done(function(){var t=new GdprView({model:e});this.navigationController.showContent(t),this.setHeader({title:"Protection des données personnelles"},[{title:"Enregistrer",callback:"actionSave"}])}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showL10n:function(){var e=new L10nView({collection:new L10n});this.navigationController.showContent(e),e.start(),this.setHeader({title:"Traductions"},[{title:"Supprimer les traductions",callback:"actionClearL10n"}],HeaderTabsL10n())},showL10nImport:function(){this.navigationController.showContent(new L10nImportView({model:new L10n})),this.setHeader({title:"Import de traductions"},null,HeaderTabsL10n())},actionClearL10n:function(){var e=new L10n;this.navigationController.showOverlay(),e.clearAll().then(function(){var e=this.navigationController.getContent();e&&e.start&&e.start(),this.navigationController.hideModal()}.bind(this),function(){this.navigationController.showErrorModal("Erreur lors de la suppresion des traductions",2e3)}.bind(this))}});module.exports=Marionette.AppRouter.extend({controller:new PrefsController,appRoutes:{prefs:"showIndex","prefs/contact":"showContact","prefs/https":"showHttps","prefs/medias":"showMedias","prefs/meta":"showMeta","prefs/domains":"showDomains","prefs/users":"showUsers","prefs/users/:id":"showUser","prefs/shortcut":"showShortcut","prefs/gdpr":"showGdpr","prefs/l10n":"showL10n","prefs/l10n/import":"showL10nImport"},onRoute:function(e,t,i){this.controller.showSidebarMenu()}});
},{"18":18,"30":30,"34":34,"35":35,"354":354,"356":356,"357":357,"358":358,"360":360,"362":362,"364":364,"366":366,"367":367,"382":382,"385":385,"386":386,"387":387,"388":388,"389":389,"390":390,"391":391,"392":392,"393":393,"394":394,"395":395,"396":396,"undefined":undefined}],369:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert">Les coordonnées ci-dessous concernent uniquement <strong>le propriétaire de ce site Internet</strong>, qui peut être différent du propriétaire du compte Kiubi. Les coordonnées de ce site Internet sont mentionnées dans de nombreux documents : factures, commandes, mentions légales, etc. <strong>Veillez donc à ce qu\'elles soient toujours valides</strong>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Propriétaire du site</h1></header><div class="post-content"><div class="row"><div class="col-xs-2"><div class="form-group"><label class="control-label" for="civility">Civilité</label><select id="civility" name="civility" data-style="selectify"><option value="Mr" '+(null==(__t="Mr"==civility?'selected="selected"':"")?"":__t)+'>M</option><option value="Mrs" '+(null==(__t="Mrs"==civility?'selected="selected"':"")?"":__t)+'>Mme</option><option value="Miss" '+(null==(__t="Miss"==civility?'selected="selected"':"")?"":__t)+'>Mlle</option></select></div></div><div class="col-xs-5"><div class="form-group"><label class="control-label required" for="lastname">Nom</label><input class="form-control" name="lastname" id="lastname" value="'+(null==(__t=lastname)?"":_.escape(__t))+'"></div></div><div class="col-xs-5"><div class="form-group"><label class="control-label required" for="firstname">Prénom</label><input class="form-control" name="firstname" id="firstname" value="'+(null==(__t=firstname)?"":_.escape(__t))+'"></div></div><div class="col-xs-12"><div class="form-group"><label class="control-label required" for="email">Email</label><p>Cet email sera le destinataire de plusieurs informations provenant de Kiubi : notifications, messages d\'information, factures d\'abonnement, copies des commandes, etc.</p><input class="form-control" name="email" id="email" value="'+(null==(__t=email)?"":_.escape(__t))+'" placeholder=""></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Coordonnées postales et téléphoniques</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="address">Adresse</label><input id="address" name="address" class="form-control" value="'+(null==(__t=address)?"":_.escape(__t))+'" placeholder=""></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label required" for="zipcode">Code postal</label><input id="zipcode" name="zipcode" class="form-control" value="'+(null==(__t=zipcode)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-xs-8"><div class="form-group"><label class="control-label required" for="city">Ville</label><input id="city" name="city" class="form-control" value="'+(null==(__t=city)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="country_id">Pays</label><div data-role="countries"></div></div></div><div class="clearfix"></div><div class="col-xs-4"><div class="form-group"><label class="control-label required" for="phone">Téléphone</label><input id="phone" name="phone" class="form-control" value="'+(null==(__t=phone)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="mobile">Mobile</label><input id="mobile" name="mobile" class="form-control" value="'+(null==(__t=mobile)?"":_.escape(__t))+'" placeholder=""></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="fax">Fax (encore utile parait-il ;))</label><input id="fax" name="fax" class="form-control" value="'+(null==(__t=fax)?"":_.escape(__t))+'" placeholder=""></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Informations sur la société</h1></header><div class="post-content"><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label" for="company_name">Dénomination sociale</label><input id="company_name" name="company_name" class="form-control" value="'+(null==(__t=company_name)?"":_.escape(__t))+'" placeholder="Le nom légal de la société"></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="company_forme">Forme juridique</label><input id="company_forme" name="company_forme" class="form-control" value="'+(null==(__t=company_forme)?"":_.escape(__t))+'" placeholder="EURL, SARL, SAS, SA, ..."></div></div><div class="col-xs-8"><div class="form-group"><label class="control-label" for="company_capital">Capital social</label><input id="company_capital" name="company_capital" class="form-control" value="'+(null==(__t=company_capital)?"":_.escape(__t))+'" placeholder="Vous pouvez préciser le montant, avec ou sans la devise"></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="company_siret">Siret</label><input id="company_siret" name="company_siret" class="form-control" value="'+(null==(__t=company_siret)?"":_.escape(__t))+'" placeholder="Composé de 14 caractères" maxlength="20"></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="company_rcs">RCS</label><input id="company_rcs" name="company_rcs" class="form-control" value="'+(null==(__t=company_rcs)?"":_.escape(__t))+'" placeholder="Composé de 13 caractères" maxlength="20"></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="company_naf">NAF (ou APE)</label><input id="company_naf" name="company_naf" class="form-control" value="'+(null==(__t=company_naf)?"":_.escape(__t))+'" placeholder="Composé de 5 caractères" maxlength="20"></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="company_tva">Numéro de TVA intracommunautaire</label><input id="company_tva" name="company_tva" class="form-control" value="'+(null==(__t=company_tva)?"":_.escape(__t))+'" placeholder="Composé de 14 caractères" maxlength="20"></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="company_cnil">Numéro de déclaration CNIL</label><input id="company_cnil" name="company_cnil" class="form-control" value="'+(null==(__t=company_cnil)?"":_.escape(__t))+'" placeholder="À déclarer sur https://www.cnil.fr/"></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],370:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/Gestion-du-compte/gerer-les-noms-de-domaine.html" class="md-icon md-help pull-right" target="_blank"></a> Vous pouvez associer un ou plusieurs noms de domaine, préalablement acquis chez <a href="https://fr.wikipedia.org/wiki/Registar" target="_blank">un dépositaire</a>, à votre site Internet. Une fois le dépôt effectué et validé, votre dépositaire vous permet de configurer la zone DNS de vos domaines. <a href="https://aide.kiubi.com/documentation/Gestion-du-compte/gerer-les-noms-de-domaine.html" target="_blank">Définissez l\'enregistrement A</a> des domaines pour le serveur de Kiubi à l\'adresse IP :<p class="lead text-center" style="margin: 10px 0 20px 0"><strong data-role="ip"></strong></p>Une fois validée, cette reconfiguration peut prendre de <strong>24 à 48 heures pour être opérationnelle</strong>. Du côté de Kiubi, veillez à ajouter les noms de domaine que vous avez déposés et à en choisir un comme domaine principal.<br><br>Votre adresse d\'origine <code>'+(null==(__t=domain)?"":_.escape(__t))+'</code> restera toujours valable et n\'est pas modifiable.</div><article data-role="list"></article><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],371:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form style="display: none" data-role="new"><div class="list-item"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group"><label class="control-label required" for="name">Nom de domaine</label><div class="input-group"><span class="input-group-addon">http://</span> <input class="form-control" id="name" name="name" value="" placeholder="domaine.com"> <span class="input-group-addon"></span></div></div><div class="form-group"><label class="control-label">Ajouter le nom de domaine <span data-role="sub">www.</span></label><div class="radio-group"><input name="sub" id="sub1" value="1" checked="checked" type="radio"><label for="sub1" class="">Oui</label><input name="sub" id="sub0" value="0" type="radio"><label for="sub0" class="">Non</label></div></div><p>Si vous souhaitez utiliser des noms de domaine accentués, vous devez les saisir sous le format <a href="https://www.punycoder.com/" target="_blank">Punycode</a> :<br><code>www.accentué.fr</code> doit être saisi <code>www.xn--accentu-hya.fr</code></p><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></div></form><div class="list-item no-hover"><a href="#" data-role="action" data-action="show">Associer un nom de domaine</a></div>';return __p};
},{"undefined":undefined}],372:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row" data-role="list"><div class="col-xs-6"><div class="media"><div class="media-body"><h4>'+(null==(__t=name)?"":_.escape(__t))+"</h4> ",is_https_enabled&&(__p+=" ",__p+=is_https_certified?"HTTPS activé":"HTTPS en cours d'activation",__p+=" "),__p+=' </div></div></div><div class="col-xs-2">',is_main&&(__p+='<span class="label label-enable">Principal</span>'),__p+='</div><div class="col-xs-4"> ',1==actions.length?__p+=' <button type="button" class="btn btn-option pull-right" role="button" data-role="action" data-action="'+(null==(__t=actions[0].action)?"":_.escape(__t))+'" data-confirm="'+(null==(__t=actions[0].confirm)?"":_.escape(__t))+'">'+(null==(__t=actions[0].label)?"":_.escape(__t))+"</button> ":actions.length>1&&(__p+=' <div class="btn-group pull-right" role="group"><button type="button" class="btn btn-option" role="button" data-role="action" data-action="'+(null==(__t=actions[0].action)?"":_.escape(__t))+'">'+(null==(__t=actions[0].label)?"":_.escape(__t))+'</button> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"> ',_.each(actions,function(t,a){0!=a&&(__p+=' <li><a href="#" data-role="action" data-action="'+(null==(__t=t.action)?"":_.escape(__t))+'" data-confirm="'+(null==(__t=t.confirm)?"":_.escape(__t))+'">'+(null==(__t=t.label)?"":_.escape(__t))+"</a></li> ")}),__p+=" </ul></div> "),__p+=" </div></div>";return __p};
},{"undefined":undefined}],373:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert">Le "<a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees" target="_blank">Réglement Général sur la Protection des Données personnelles (RGPD)</a>" impose à toute personne morale le respect des principes et des règles régissant la protection des personnes physiques à l\'égard du <strong>traitement des données à caractère personnel</strong>.<br><br>Vous trouverez ci-dessous des informations et des procédures afin d\'appliquer à ce site Internet cette réglementation européenne. Les procédures proposées le sont <strong>à titre indicatif et concernent uniquement les données personnelles collectées par Kiubi</strong>. Elles doivent être adaptées par vos soins en fonction de votre activité et de l\'évolution de la législation.<br><br><strong class="text-danger">Important :</strong> Si vous utilisez un thème graphique personnalisé vous devez mettre à jour votre thème en vous reportant à <a href="https://aide.kiubi.com/les-patch-pour-vos-themes.html" target="_blank">la release note correspondante</a> et <a href="https://rgpd.kiubi-web.com/" target="_blank">au site de démonstration</a> dédiés.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Engagements pris pour la protection des données personnelles</h1></header><div class="post-content"><p>Il est obligatoire d\'indiquer dans <strong>une page web dédiée et publiquement accessible</strong> les engagements que vous avez pris pour la protection des données personnelles, en y précisant notamment :</p><ul><li>Le responsable des traitements</li><li>Les finalités de traitements</li><li>Les données personnelles collectées</li><li>La durée de conservation des données</li><li>Les destinataires</li><li>La procédure de retrait de consentement</li><li>La procédure d\'application du droit d\'accès aux données</li></ul><p>Les engagements pris pour la protection des données personnelles indiqués dans cette page web concernent non seulement ce site Internet mais également l\'ensemble des services de votre société, de vos filiales, de vos sous-traitants, etc. ayant accès aux données personnelles collectées.</p><p>Exemple : si des adresses emails collectées via ce site sont transmises à une plateforme de gestion commerciale et utilisées dans le cadre d\'opérations marketing, il est obligatoire d\'inclure dans vos engagements toutes les informations concernant cette finalité de traitements ainsi que toutes les informations sur leurs destinataires (c\'est-à-dire les coordonnées de la plateforme de gestion commerciale ainsi que tous autres tiers et sous-traitants concernés).</p><p>Kiubi met à votre disposition une page web dédiée aux engagements pris pour la protection des données personnelles. Cette page web est à <strong>compléter et modifier par vos soins</strong> en fonction de votre activité, de vos sous-traitants et de l\'évolution de la législation.</p><p>Si vous ne disposez pas encore d\'une page web dédiée aux engagements pris pour la protection des données personnelles, vous devez <a href="/cms">la créer</a> en lui donnant comme adresse <code>/donnees-personnelles.html</code>. Vous pouvez en consulter et en télécharger un exemple aux adresses suivantes :</p><ul><li>Exemple de <a href="https://rgpd.kiubi-web.com/donnees-personnelles.html" target="_blank">page web</a></li><li>Exemple de <a href="https://cdn.kiubi-admin.com/documents/contenu_page_donnees_personnelles.xls" target="_blank">contenu à télécharger</a> pour y être <a href="/modules/import/posts">importé dans votre site</a></li></ul></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Finalités de traitements et Consentement préalable</h1></header><div class="post-content"><p>À chaque fois que des données personnelles sont collectées, il est obligatoire de faire figurer au moment de leur collecte :</p><ol><li>Une demande de consentement préalable, c\'est-à-dire une case à cocher (ou tout autre processus) qui valide l\'utilisation des données personnelles collectées. Si la case n\'est pas cochée par l\'internaute, les données ne peuvent être collectées</li><li>Les finalités de traitements des données collectées</li><li>Un lien vers la page web dédiée aux engagements pris pour la protection des données personnelles</li></ol><p>Ces éléments doivent être présents directement dans les templates des widgets correspondants. Vous pouvez alors activer la demande de consentement préalable :</p><div class="form-group post-group"><label class="control-label">Création de compte d\'un membre (Inscription au site)</label><p>Le texte précisant les données personnelles collectées à la création d\'un compte d\'un membre et leurs finalités de traitements peut être personnalisé dans <a href="/customers/settings">les paramètres des membres</a>. Ce texte, ainsi que la demande de consentement, doivent obligatoirement être placés dans une zone clairement distincte de la validation de conditions d\'utilisation du site.</p><div class="radio-group"><input name="is_customers_consent_required" id="is_customers_consent_required1" value="1" type="radio" '+(null==(__t=is_customers_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_customers_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_customers_consent_required" id="is_customers_consent_required0" value="0" type="radio" '+(null==(__t=is_customers_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_customers_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label class="control-label">Poster un commentaire dans le blog</label><div class="radio-group"><input name="is_comments_consent_required" id="is_comments_consent_required1" value="1" type="radio" '+(null==(__t=is_comments_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_comments_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_comments_consent_required" id="is_comments_consent_required0" value="0" type="radio" '+(null==(__t=is_comments_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_comments_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label class="control-label">Poster une évaluation de produit</label><div class="radio-group"><input name="is_evaluations_consent_required" id="is_evaluations_consent_required1" value="1" type="radio" '+(null==(__t=is_evaluations_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_evaluations_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_evaluations_consent_required" id="is_evaluations_consent_required0" value="0" type="radio" '+(null==(__t=is_evaluations_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_evaluations_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label class="control-label">Inscription à la newsletter</label><div class="radio-group"><input name="is_newsletter_consent_required" id="is_newsletter_consent_required1" value="1" type="radio" '+(null==(__t=is_newsletter_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_newsletter_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_newsletter_consent_required" id="is_newsletter_consent_required0" value="0" type="radio" '+(null==(__t=is_newsletter_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_newsletter_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label class="control-label">Choix de l\'adresse de livraison d\'une commande</label><div class="radio-group"><input name="is_checkout_consent_required" id="is_checkout_consent_required1" value="1" type="radio" '+(null==(__t=is_checkout_consent_required?'checked="checked"':"")?"":__t)+'><label for="is_checkout_consent_required1" class="visible">Activer le consentement préalable (recommandé)</label><input name="is_checkout_consent_required" id="is_checkout_consent_required0" value="0" type="radio" '+(null==(__t=is_checkout_consent_required?"":'checked="checked"')?"":__t)+'><label for="is_checkout_consent_required0" class="not-visible">Désactiver le consentement préalable</label></div></div><div class="form-group post-group"><label class="control-label">Formulaires Dismoi? (Gestionnaire de formulaires)</label><p class="form-control-static">Les finalités de traitements et le consentement préalable sont propres à chaque formulaire et doivent être configurés dans les paramètres du formulaire en question.</p></div><div class="form-group post-group"><label class="control-label">Gestion du compte d\'un membre</label><p class="form-control-static">La demande de consentement ayant été faite à l\'inscription au site, elle n\'est plus nécessaire dans la gestion du compte du membre.</p></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Procédure de retrait de consentement et Droit d\'accès aux données</h1></header><div class="post-content"><p>Kiubi ne collecte que le minimum de données nécessaires au bon fonctionnement du service fourni par le site Internet (principe de minimisation de la collecte de données). Le RGPD impose cependant de permettre à un internaute de <a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees/chapitre3#Article21" target="_blank">retirer son consentement</a> à l\'utilisation de ses données personnelles ainsi qu\'<a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees/chapitre3#Article15" target="_blank">un droit d\'accès</a> et de <a href="https://www.cnil.fr/fr/reglement-europeen-protection-donnees/chapitre3#Article16" target="_blank">rectification de ses données</a>.</p><div class="form-group post-group"><label class="control-label">Gestion du compte d\'un membre</label><p class="form-control-static">Un membre inscrit peut mettre à jour ou supprimer librement les données non obligatoires à la bonne marche du service proposé par le site directement en se connectant à son compte. Les commandes qu\'un membre a passé sur le site sont librement téléchargeables dans la gestion de son compte.</p></div><div class="form-group post-group"><label class="control-label">Suppression du compte d\'un membre</label><p class="form-control-static">Si un membre inscrit souhaite retirer l\'ensemble de son consentement, il peut supprimer son compte. Cela supprimera toutes ses informations personnelles ainsi que tous les commentaires postés en étant identifié sur le site. Ses commandes seront cependant conservées. Le propriétaire du site est averti par email que le compte a été supprimé de Kiubi et est invité à supprimer toutes autres informations concernant ce membre.</p></div><div class="form-group post-group"><label class="control-label">Portabilités des données personnelles</label><p class="form-control-static">Toutes les données personnelles peuvent être supprimées et exportées dans des fichiers au format CSV ou Excel dans les différents services de la console d\'adminstration (<a href="/customers">membres</a>, <a href="/checkout">commandes</a>, <a href="/modules/subscribers">abonnés à la newsletter</a> et <a href="/forms/inbox">Dismoi?</a>).</p></div><div class="form-group post-group"><label class="control-label">Chiffrage des mots de passe des membres</label><p class="form-control-static">Les mots de passe des membres sont chiffrés et ne peuvent ni être lus en clair ni être transmis (principe de sécurité). La demande de renvoi de mot de passe génère automatiquement un nouveau mot de passe temporaire. À la connexion du membre dans le laps de temps imparti, ce nouveau mot de passe remplace le précédent et le membre est redirigé vers le formulaire de changement de mot de passe pour en choisir un nouveau, s\'il le souhaite.</p></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Demande de confirmation du consentement</h1></header><div class="post-content"><p>Tous les membres inscrits sur le site Internet <strong>avant la mise en place de la demande de consentement</strong> au moment de leur inscription au site doivent être contactés afin qu\'ils autorisent l\'utilisation de leurs données personnelles. Il est conseillé de réaliser un emailling vers tous les membres du site concernés pour les inviter à :</p><ul><li>Consulter la page web dédiée aux engagements pris pour la protection des données personnelles</li><li>Se connecter à leur compte pour mettre à jour leurs informations personnelles</li><li>Ou supprimer leur compte si ils souhaitent retirer l\'ensemble de leur consentement</li></ul></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],374:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Conditions préalables</h1></header><div class="post-content"><p>L\'accès HTTPS permet de chiffrer et de sécuriser l\'intégralité du <a href="https://fr.wikipedia.org/wiki/Application_de_front_office" target="_blank">front-office</a> du site Internet. L\'adresse du site Internet changera de HTTP à HTTPS : <code>http://'+(null==(__t=fqdn)?"":_.escape(__t))+"</code> deviendra <code>https://"+(null==(__t=fqdn)?"":_.escape(__t))+'</code>.</p><p>Avant d\'activer l\'accès HTTPS, veuillez noter que :</p><ul><li><a href="/prefs/domains">Les noms de domaine associés au site</a> doivent être correctement configurés sur l\'adresse IP indiquée</li><li>Il faut patienter au moins 5 minutes après l\'activation de l\'accès HTTPS pour que le site soit pris en charge</li><li>Le sitemap du site généré automatiquement est mis à jour 24 heures après l\'activation du HTTPS</li><li>Le certificat SSL/TLS utilisé pour l\'accès HTTPS n’est pas compatible avec IE8 et précédents sur Windows XP</li></ul><p>Les supports, garanties et conditions générales de vente liées au certificat SSL/TLS utilisé par Kiubi sont <a href="https://letsencrypt.org/repository/" target="_blank">celles de Let’s Encrypt</a>. Elles sont par concéquence soumises aux évolutions et modifications effectuées par ce dernier.</p><p>Nous vous conseillons avant toute activation de l\'accès HTTPS de <a href="https://aide.kiubi.com/documentation/https-certificat-ssl-tls.html" target="_blank">consulter la documentation en ligne</a> afin de prendre connaissance de l\'ensemble des informations nécessaires à la bonne utilisation de cette fonctionnalité.</p></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Accès HTTPS</h1></header><div class="post-content"><div class="form-group"><div class="radio-group"><input name="is_enabled" id="is_enabled1" value="1" type="radio" '+(null==(__t=is_enabled?'checked="checked"':"")?"":__t)+'><label for="is_enabled1" class="visible">Activé (recommandé)</label><input name="is_enabled" id="is_enabled0" value="0" type="radio" '+(null==(__t=is_enabled?"":'checked="checked"')?"":__t)+'><label for="is_enabled0" class="not-visible">Désactivé</label></div></div> ',is_enabled){switch(__p+=" ",status){case"TODO":__p+=" La demande d'activation de l'accès HTTPS est en attente de traitement, merci de patienter quelques minutes. ";break;case"PENDING":__p+=" La demande d'activation de l'accès HTTPS est en cours en traitement. ";break;case"ERROR":__p+=" L'activation HTTPS a échoué, merci de reessayer dans quelques instants. ",brek}__p+=" "}__p+=' </div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>'}return __p};
},{"undefined":undefined}],375:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Informations générales</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="site_title">Nom du site Internet</label><p>Donnez un nom explicite au site pour permettre son identification par Kiubi et par les Internautes. Ce nom est mentionné dans de nombreux documents : factures, commandes, mentions légales, etc.</p><input id="site_title" name="site_title" class="form-control" value="'+(null==(__t=site.site_title)?"":_.escape(__t))+'" placeholder=""></div><div data-role="logo"></div><div class="form-group"><label class="control-label">Accès au site Internet</label><div class="radio"><input name="is_site_open" id="is_site_open1" value="1" type="radio" '+(null==(__t=site.is_site_open?'checked="checked"':"")?"":__t)+'><label for="is_site_open1" class="visible">Le site est ouvert, tous les services sont publiquement accessibles</label></div><div class="radio"><input name="is_site_open" id="is_site_open0" value="0" type="radio" '+(null==(__t=site.is_site_open?"":'checked="checked"')?"":__t)+'><label for="is_site_open0" class="not-visible">Le site est fermé, aucun service n\'est accessible, sauf pour les utilisateurs de la console d\'administration</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Services accessibles</h1></header><div class="post-content"><p>Vous pouvez activer ou désactiver l\'accès aux différents services de Kiubi est fonction des besoins du site. Un service désactivé ne sera accessible à personne : ni aux Internautes, ni aux utilisateurs de la console d\'administration.</p><div class="row"><div class="col-xs-5"><div class="form-group"><label class="control-label">Vente en ligne</label><div class="radio-group"><input name="is_checkout_enabled" id="is_checkout_enabled1" value="1" type="radio" '+(null==(__t=site.is_checkout_enabled?'checked="checked"':"")?"":__t)+'><label for="is_checkout_enabled1" class="visible">Activée</label><input name="is_checkout_enabled" id="is_checkout_enabled0" value="0" type="radio" '+(null==(__t=site.is_checkout_enabled?"":'checked="checked"')?"":__t)+'><label for="is_checkout_enabled0" class="not-visible">Désactivée</label></div></div><div class="form-group"><label class="control-label">Catalogue</label><div class="radio-group"><input name="is_catalog_enabled" id="is_catalog_enabled1" value="1" type="radio" '+(null==(__t=site.is_catalog_enabled?'checked="checked"':"")?"":__t)+'><label for="is_catalog_enabled1" class="visible">Activé</label><input name="is_catalog_enabled" id="is_catalog_enabled0" value="0" type="radio" '+(null==(__t=site.is_catalog_enabled?"":'checked="checked"')?"":__t)+'><label for="is_catalog_enabled0" class="not-visible">Désactivé</label></div></div></div><div class="col-xs-5"><div class="form-group"><label class="control-label">Blog</label><div class="radio-group"><input name="is_blog_enabled" id="is_blog_enabled1" value="1" type="radio" '+(null==(__t=site.is_blog_enabled?'checked="checked"':"")?"":__t)+'><label for="is_blog_enabled1" class="visible">Activé</label><input name="is_blog_enabled" id="is_blog_enabled0" value="0" type="radio" '+(null==(__t=site.is_blog_enabled?"":'checked="checked"')?"":__t)+'><label for="is_blog_enabled0" class="not-visible">Désactivé</label></div></div><div class="form-group"><label class="control-label">Page de contact</label><div class="radio-group"><input name="is_contact_enabled" id="is_contact_enabled1" value="1" type="radio" '+(null==(__t=site.is_contact_enabled?'checked="checked"':"")?"":__t)+'><label for="is_contact_enabled1" class="visible">Activée</label><input name="is_contact_enabled" id="is_contact_enabled0" value="0" type="radio" '+(null==(__t=site.is_contact_enabled?"":'checked="checked"')?"":__t)+'><label for="is_contact_enabled0" class="not-visible">Désactivée</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>API Front-Office</h1></header><div class="post-content"><p>En activant l\'API Front-Office vous ouvrez <a href="http://www.kiubi.com/api/v1/" target="_blank">des points d\'accès dédiés et structurés</a> aux données de votre site. Ce paramètre n\'impacte pas l\'accès aux données du site par l\'API Developers.</p><div class="form-group"><label class="control-label">Utilisation de l\'API Front-office</label><div class="radio-group"><input name="is_api_enabled" id="is_api_enabled1" value="1" type="radio" '+(null==(__t=site.is_api_enabled?'checked="checked"':"")?"":__t)+'><label for="is_api_enabled1" class="visible">Activée</label><input name="is_api_enabled" id="is_api_enabled0" value="0" type="radio" '+(null==(__t=site.is_api_enabled?"":'checked="checked"')?"":__t)+'><label for="is_api_enabled0" class="not-visible">Désactivée</label></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Accès restreint</h1></header><div class="post-content"><p>Vous pouvez restreindre l\'accès à l\'ensemble du site, par exemple si ce dernier est encore en travaux, en ajoutant une demande d\'identification directement avant la page d\'accueil.</p><div class="form-group"><label class="control-label" for="front_login">Identifiant</label><input id="front_login" name="front_login" class="form-control" value="'+(null==(__t=site.front_login)?"":_.escape(__t))+'" placeholder="Si le mot de passe est renseigné, cet identifiant sera demandé pour accéder au site"></div><div class="form-group"><label class="control-label" for="front_password">Mot de passe</label><input id="front_password" name="front_password" class="form-control" value="'+(null==(__t=site.front_password)?"":_.escape(__t))+'" placeholder="Si l\'identifiant est renseigné, ce mot de passe sera demandé pour accéder au site"></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Bloc-marque</h1></header><div class="post-content"><p>Le bloc-marque représente l\'identité du site Internet et est généralement affiché dans la zone d\'entête de ce dernier. Il est composé du nom de la marque ou de la société, de sa signature (ou slogan) ainsi que du logo.</p><div class="form-group"><label class="control-label" for="site_excerpt">Nom de la marque</label><input id="site_excerpt" name="site_excerpt" class="form-control" value="'+(null==(__t=theme.site_excerpt)?"":_.escape(__t))+'" placeholder="Le nom est généralement affichée dans la zone d\'entête du site"></div><div class="form-group"><label class="control-label" for="site_description">Signature de la marque</label><input id="site_description" name="site_description" class="form-control" value="'+(null==(__t=theme.site_description)?"":_.escape(__t))+'" placeholder="La signature est généralement affichée en dessous du nom"></div><div class="row"><div class="col-xs-4"><div class="form-group"><label class="control-label">Afficher le nom</label><div class="radio-group"><input name="is_excerpt_visible" id="is_excerpt_visible1" value="1" type="radio" '+(null==(__t=theme.is_excerpt_visible?'checked="checked"':"")?"":__t)+'><label for="is_excerpt_visible1" class="">Oui</label><input name="is_excerpt_visible" id="is_excerpt_visible0" value="0" type="radio" '+(null==(__t=theme.is_excerpt_visible?"":'checked="checked"')?"":__t)+'><label for="is_excerpt_visible0" class="">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label">Afficher la signature</label><div class="radio-group"><input name="is_description_visible" id="is_description_visible1" value="1" type="radio" '+(null==(__t=theme.is_description_visible?'checked="checked"':"")?"":__t)+'><label for="is_description_visible1" class="">Oui</label><input name="is_description_visible" id="is_description_visible0" value="0" type="radio" '+(null==(__t=theme.is_description_visible?"":'checked="checked"')?"":__t)+'><label for="is_description_visible0" class="">Non</label></div></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label">Afficher le logo</label><div class="radio-group"><input name="is_logo_visible" id="is_logo_visible1" value="1" type="radio" '+(null==(__t=theme.is_logo_visible?'checked="checked"':"")?"":__t)+'><label for="is_logo_visible1" class="">Oui</label><input name="is_logo_visible" id="is_logo_visible0" value="0" type="radio" '+(null==(__t=theme.is_logo_visible?"":'checked="checked"')?"":__t)+'><label for="is_logo_visible0" class="">Non</label></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Fil d\'Ariane</h1></header><div class="post-content post-list no-hover"><p>Le fil d\'Ariane du blog et du catalogue peut être renommé et l\'adresse du répertoire de base peut être personnalisée. Une redirection 301 est alors mise en place automatiquement vers la nouvelle adresse.</p><div class="row"><div class="col-xs-3"><label class="control-label">Nom du service</label></div><div class="col-xs-8"><label class="control-label">Adresse du répertoire</label></div></div> ',_.each(site.breadcrumb,function(e,l){__p+=' <div class="list-item list-item-form"><div class="row"><div class="col-xs-3"><div class="form-group"><input name="breadcrumb['+(null==(__t=l)?"":_.escape(__t))+'][name]" class="form-control" value="'+(null==(__t=e.name)?"":_.escape(__t))+'" placeholder="'+(null==(__t=e.default_name)?"":_.escape(__t))+'"></div></div><div class="col-xs-9"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="basic-addon3">'+(null==(__t=domain)?"":_.escape(__t))+'/</span> <input name="breadcrumb['+(null==(__t=l)?"":_.escape(__t))+'][path]" class="form-control" value="'+(null==(__t=e.path)?"":_.escape(__t))+'" placeholder="'+(null==(__t=l)?"":_.escape(__t))+'"> <span class="input-group-addon" id="basic-addon2">/</span></div></div></div></div></div> '}),__p+=' </div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Sitemap</h1></header><div class="post-content"><p>Un sitemap est mis à jour automatiquement à l\'adresse : <a href="'+(null==(__t=domain)?"":_.escape(__t))+'/sitemap.xml" target="_blank">'+(null==(__t=domain)?"":_.escape(__t))+'/sitemap.xml</a>.</p></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],376:[function(require,module,exports){
arguments[4][75][0].apply(exports,arguments)
},{"75":75,"undefined":undefined}],377:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",0==step?__p+=' <form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/documentation/gestion-des-traductions.html" class="md-icon md-help pull-right" target="_blank"></a> Vous pouvez <strong>importer des traductions</strong> pour modifier les messages générés automatiquement par Kiubi. Nous vous encourageons avant tout import de traductions de <a href="https://aide.kiubi.com/documentation/gestion-des-traductions.html" target="_blank">consulter la documentation en ligne</a> et à <a href="/modules/backups" target="_blank">réaliser un point de sauvegarde</a>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="file">Fichier d\'import</label><p>Vous pouvez télécharger un exemple de modèle de fichier de traduction (<a href="#TODO" target="_blank">FR</a> ou <a href="#TODO" target="_blank">EN</a>) pour vous aider à préparer votre propre fichier.</p><input name="file" id="file" type="file"></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Importer</button></div></div> ':(__p+=" ",report.errors&&report.errors.length>0?(__p+=" <div class=\"alert alert-danger\"><strong>L'import n'a pas été réalisé</strong>, il y a des erreurs dans le fichier.<br><br><ul> ",_.each(report.errors,function(t){__p+=" <li>"+(null==(__t=t)?"":__t)+"</li> "}),__p+=" </ul></div> "):__p+=' <div class="alert alert-success"><strong>Import réussi</strong>, les traductions ont été correctement importées !</div> ',__p+=' <div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-cancel" data-role="cancel">Retour</button></div></div> '),__p+=' <footer class="footer"></footer>';return __p};
},{"undefined":undefined}],378:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="row i18n-list" data-role="list"><div class="col-xs-9 col-md-10"><div class="row flex-row"><div class="col-xs-6"><code class="i18n-id">'+(null==(__t=msgid)?"":_.escape(__t))+'</code></div><div class="col-xs-1 text-center"><span class="md-icon md-next"></span></div><div class="col-xs-6"><code> ',__p+=msgstr?" "+(null==(__t=msgstr)?"":_.escape(__t))+" ":' <em class="text-muted">Pas de traduction</em> ',__p+=' </code></div></div></div><div class="col-xs-3 col-md-2"><div class="btn-group pull-right" role="group"><a class="btn btn-option" href="#" role="button" data-role="action" data-action="edit">Détail</a> <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" data-role="action" data-action="delete" data-confirm="warning">Supprimer</a></li></ul></div></div></div><form style="display: none" data-role="edit"><div class="alert alert-danger" data-role="errors" role="alert" style="display: none"></div><div class="form-group has-feedback"><label class="control-label">'+(null==(__t=msgid)?"":_.escape(__t))+'</label><input class="form-control" name="msgstr" value="'+(null==(__t=msgstr)?"":_.escape(__t))+'" placeholder="Traduction"></div><div class="btn-toolbar" role="toolbar"><div class="btn-group" role="group"><button type="button" class="btn btn-cancel" data-role="action" data-action="cancel">Annuler</button></div><div class="btn-group" role="group"><button type="button" class="btn btn-action" data-role="action" data-action="save">Enregistrer</button></div></div></form>';return __p};
},{"undefined":undefined}],379:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Tailles des vignettes et miniatures</h1></header><div class="post-content"><p>Quand une image est publiée dans la médiathèque, Kiubi génère automatiquement 4 images supplémentaires de tailles différentes, en plus de l\'image d\'origine. Ces images peuvent être utilisées dans le contenu ou les templates graphiques du site.</p><div class="row"><div class="col-xs-7"><div class="form-group"><label class="control-label" for="">Taille maximum des grandes vignettes</label><div class="row"><div class="col-xs-6"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="g_vignette_width" id="g_vignette_width" value="'+(null==(__t=g_vignette_width)?"":_.escape(__t))+'" placeholder="1"> <span class="input-group-addon">pixels de largeur</span></div></div><div class="col-xs-6"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="g_vignette_height" id="g_vignette_height" value="'+(null==(__t=g_vignette_height)?"":_.escape(__t))+'" placeholder="1"> <span class="input-group-addon">pixels de hauteur</span></div></div></div></div></div><div class="col-xs-7"><div class="form-group"><label class="control-label" for="">Taille maximum des vignettes</label><div class="row"><div class="col-xs-6"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="vignette_width" id="vignette_width" value="'+(null==(__t=vignette_width)?"":_.escape(__t))+'" placeholder="1"> <span class="input-group-addon">pixels de largeur</span></div></div><div class="col-xs-6"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="vignette_height" id="vignette_height" value="'+(null==(__t=vignette_height)?"":_.escape(__t))+'" placeholder="1"> <span class="input-group-addon">pixels de hauteur</span></div></div></div></div></div><div class="col-xs-7"><div class="form-group"><label class="control-label" for="">Taille maximum des grandes miniatures</label><div class="row"><div class="col-xs-6"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="g_miniature_width" id="g_miniature_width" value="'+(null==(__t=g_miniature_width)?"":_.escape(__t))+'" placeholder="1"> <span class="input-group-addon">pixels de largeur</span></div></div><div class="col-xs-6"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="g_miniature_height" id="g_miniature_height" value="'+(null==(__t=g_miniature_height)?"":_.escape(__t))+'" placeholder="1"> <span class="input-group-addon">pixels de hauteur</span></div></div></div></div></div><div class="col-xs-7"><div class="form-group"><label class="control-label" for="">Taille maximum des miniatures</label><div class="row"><div class="col-xs-6"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="miniature_width" id="miniature_width" value="'+(null==(__t=miniature_width)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">pixels de largeur</span></div></div><div class="col-xs-6"><div class="input-group"><span class="input-group-addon"></span> <input class="form-control" name="miniature_height" id="miniature_height" value="'+(null==(__t=miniature_height)?"":_.escape(__t))+'" placeholder="0"> <span class="input-group-addon">pixels de hauteur</span></div></div></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Publier des fichiers volumineux</h1></header><div class="post-content"><p>Un compte FTP est disponible pour chaque site. Il permet de publier des fichiers volumineux de plus de 7Mo dans la médiathèque. Les informations ci-dessous servent à configurer un logiciel FTP.</p><div class="row"><div class="col-xs-3"><label class="control-label" for="">Adresse de l\'hôte :</label></div><div class="col-xs-9"><p>'+(null==(__t=ftp.host)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-xs-3"><label class="control-label" for="">Port :</label></div><div class="col-xs-9"><p>'+(null==(__t=ftp.port)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-xs-3"><label class="control-label" for="">Nom d\'utilisateur :</label></div><div class="col-xs-9"><p>'+(null==(__t=ftp.login)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-xs-3"><label class="control-label" for="">Mot de passe :</label></div><div class="col-xs-9"><p><span style="display: none" data-role="password-mask">'+(null==(__t=ftp.password)?"":_.escape(__t))+'</span><a data-role="password-toggle" href="#">Afficher le mot de passe</a></p></div></div><div class="row"><div class="col-xs-3"><label class="control-label" for="">Répertoire racine :</label></div><div class="col-xs-9"><p>/mediatheque/</p></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],380:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/recherche/catalogue/tags:M%E9tas-balises/" class="md-icon md-help pull-right" target="_blank"></a> Vous pouvez définir les balises <code>&lt;title&gt;</code>, <code>&lt;meta description&gt;</code> et <code>&lt;meta keywords&gt;</code> qui seront <strong>utilisées par défaut</strong> pour toutes les pages du site Internet. Il est cependant conseillé de <strong>personnaliser ces balises pour chaque page</strong>.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Balises metas par défaut</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="meta_title">Titre par défaut des pages</label><input class="form-control" id="meta_title" name="meta_title" value="'+(null==(__t=meta_title)?"":_.escape(__t))+'" placeholder="Contenu de la balise &lt;title&gt; utilisée par défaut"></div><div class="form-group"><label class="control-label" for="meta_description">Description par défaut des pages</label><textarea class="form-control" rows="5" id="meta_description" name="meta_description" placeholder="Contenu de la balise &lt;meta description&gt; utilisée par défaut">'+(null==(__t=meta_description)?"":_.escape(__t))+'</textarea></div><div class="form-group"><label class="control-label" for="meta_keywords">Mots clés par défaut des pages</label><textarea class="form-control" rows="5" id="meta_keywords" name="meta_keywords" placeholder="Contenu de la balise &lt;meta keywords&gt; utilisée par défaut">'+(null==(__t=meta_keywords)?"":_.escape(__t))+'</textarea></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],381:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>Liste des raccourcis clavier</h1></header><div class="post-content"><div class="row"><div class="col-xs-3"><p><kbd><kbd>ctrl</kbd> + <kbd>S</kbd></kbd> ou <kbd><kbd>⌘</kbd> + <kbd>S</kbd></kbd></p></div><div class="col-xs-9"><p>Enregistrer les modifications</p></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],382:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Préférences</h2><ul class="nav nav-sidebar"><li><a href="/prefs">Préférences générales</a></li><li><a href="/prefs/contact">Coordonnées du site</a></li><li><a href="/prefs/meta">Meta par défaut</a></li><li><a href="/prefs/medias">Fichiers de la médiathèque</a></li><li><a href="/prefs/domains">Noms de domaine</a></li><li><a href="/prefs/https">Accès HTTPS</a></li><li><a href="/prefs/l10n">Traductions</a></li><li><a href="/prefs/gdpr">Données personnelles</a></li><li><a href="/prefs/shortcut">Raccourcis clavier</a></li></ul>';return __p};
},{"undefined":undefined}],383:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert">Un utilisateur peut avoir accès à la console d\'administration d\'un ou plusieurs sites Internet du compte Kiubi. Ses informations personnelles <strong>sont communes à l\'ensemble du compte Kiubi</strong> mais ses droits d\'accès <strong>concernent uniquement ce site Internet</strong>.</div><article class="post-article"><header class="post-header"><h1>Informations personnelles <span class="label label-default pull-right">Commun au compte</span></h1></header><div class="post-content"><div class="media media-detail"><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div><div class="media-object img-circle img-avatar"><img alt="Un intitulé d\'un truc" src="http://pausegeek.fr/img/news/2016/10/the-lego-batman-movie-poster-001-2017.jpg"></div><br><div class="form-group"><input id="exampleInputFile" type="file"></div><p class="media-info">Format : gif, jpeg ou png<br>Taille : 120 x 120px minimum</p></div><div class="media-body"><div class="row"><div class="col-xs-6"><div class="input-group-select"><label class="control-label required" for="exmemple1">Nom</label><div class="form-group has-feedback"><select class="form-control" ic="exmemple3" style=""><option selected="selected">M</option><option>Mme</option></select><div class="form-control-feedback md-feedback md-select"></div></div><div class="input-group"><input class="form-control" id="exmemple1"></div></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label required" for="exmemple1">Prénom</label><input class="form-control" id="exmemple1"></div></div></div><div class="form-group"><label class="control-label required" for="exmemple1">Email</label><input class="form-control" id="exmemple1" placeholder="Utilisé pour se connecter à la console d\'administration"></div><div class="form-group"><label class="control-label required" for="exmemple1">Mot de passe</label><input class="form-control" id="exmemple1" placeholder="Utilisé pour se connecter à la console d\'administration"></div><div class="row"><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Pseudo</label><input class="form-control" id="exmemple1" placeholder="S\'affiche à la place du nom"></div></div><div class="col-xs-6"><div class="form-group"><label class="control-label" for="exmemple1">Site Web</label><input class="form-control" id="exmemple1" placeholder="https://www.site-web.com/"></div></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Droits d\'accès <span class="label label-default pull-right">Spécifique au site</span></h1></header><div class="post-content"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Profil de l\'utilisateur</label><p>Les éditeurs disposent de droits étendus, ils peuvent accéder à tous les services et gérer les préférences du site.</p><div class="row"><div class="col-xs-4"><select class="form-control" ic="exmemple3"><option value="editeur" selected="selected">Éditeur</option><option value="redacteur">Rédacteur</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div><div class="form-group"><label class="control-label" for="">Droits optionnels</label><div class="row"><div class="col-xs-4"><div class="checkbox"><input id="checkbox1" value="" type="checkbox" checked="checked"><label for="checkbox1">Accéder au Site web</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox12" value="" type="checkbox" checked="checked"><label for="checkbox12">Accéder au Blog</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox13" value="" type="checkbox" checked="checked"><label for="checkbox13">Accéder au Catalogue</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox14" value="" type="checkbox" checked="checked"><label for="checkbox14">Accéder aux Commandes</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox15" value="" type="checkbox" checked="checked"><label for="checkbox15">Accéder aux Membres</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox16" value="" type="checkbox" checked="checked"><label for="checkbox16">Accéder au Modules</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox17" value="" type="checkbox" checked="checked"><label for="checkbox17">Accéder au options marketing</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox18" value="" type="checkbox" checked="checked"><label for="checkbox18">Gérer le Référencement</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox19" value="" type="checkbox" checked="checked"><label for="checkbox19">Gérer l\'Apparence</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox110" value="" type="checkbox" checked="checked"><label for="checkbox110">Gérer le Thème graphique</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox111" value="" type="checkbox" checked="checked"><label for="checkbox111">Gérer les Préférences</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox112" value="" type="checkbox" checked="checked"><label for="checkbox112">Gérer les Utilisateurs</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox113" value="" type="checkbox" checked="checked"><label for="checkbox113">Gérer les noms de domaine</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox114" value="" type="checkbox" checked="checked"><label for="checkbox114">Gérer les Sauvegardes</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox115" value="" type="checkbox" checked="checked"><label for="checkbox115">Créditer le site</label></div></div></div></div><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Groupe extranet</label><p>Un utilisateur peut faire partie d\'un groupe de l\'<a href="#">extranet</a> ce qui lui permettra d\'accéder à certaines pages et fichiers du site disposant d\'un accès restrint.</p><div class="row"><div class="col-xs-4"><select class="form-control" ic="exmemple3"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div></div><footer class="post-footer"></footer></article><article class="post-article"><header class="post-header"><h1>Droits d\'accès <span class="label label-default pull-right">Spécifique au site</span></h1></header><div class="post-content"><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Profil de l\'utilisateur</label><p>Les rédacteurs disposent de droits restreints, ils ne peuvent pas gérer les préférences du site.</p><div class="row"><div class="col-xs-4"><select class="form-control" ic="exmemple3"><option value="editeur">Éditeur</option><option value="redacteur" selected="selected">Rédacteur</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div><div class="form-group"><label class="control-label" for="">Droits optionnels</label><div class="row"><div class="col-xs-4"><div class="checkbox"><input id="checkbox1" value="" type="checkbox" checked="checked"><label for="checkbox1">Accéder au Site web</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox12" value="" type="checkbox" checked="checked"><label for="checkbox12">Accéder au Blog</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox13" value="" type="checkbox" checked="checked"><label for="checkbox13">Accéder au Catalogue</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox14" value="" type="checkbox" checked="checked"><label for="checkbox14">Accéder aux Commandes</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox15" value="" type="checkbox" checked="checked"><label for="checkbox15">Accéder aux Membres</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox16" value="" type="checkbox" checked="checked"><label for="checkbox16">Accéder au Modules</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox17" value="" type="checkbox" checked="checked"><label for="checkbox17">Accéder au options marketing</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox18" value="" type="checkbox" checked="checked"><label for="checkbox18">Gérer le Référencement</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox19" value="" type="checkbox" checked="checked"><label for="checkbox19">Gérer l\'Apparence</label></div></div><div class="col-xs-4"><div class="checkbox"><input id="checkbox110" value="" type="checkbox" checked="checked"><label for="checkbox110">Gérer le Thème graphique</label></div></div></div></div><div class="form-group has-feedback"><label class="control-label" for="exmemple3">Groupe extranet</label><p>Un utilisateur peut faire partie d\'un groupe de l\'<a href="#">extranet</a> ce qui lui permettra d\'accéder à certaines pages et fichiers du site disposant d\'un accès restrint.</p><div class="row"><div class="col-xs-4"><select class="form-control" ic="exmemple3"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select><div class="form-control-feedback md-feedback md-select"></div></div></div></div></div><footer class="post-footer"></footer></article><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-delete">Supprimer</button> <button type="button" class="btn btn-action pull-right">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],384:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="alert alert-warning" role="alert"><a href="https://aide.kiubi.com/recherche/catalogue/tags:Utilisateurs/" class="md-icon md-help pull-right" target="_blank"></a> Vous pouvez créer des utilisateurs selon <strong>différents profils</strong>, disposant de <strong>droits spécifiques</strong> et ayant accès à la console d\'administration d\'<strong>un ou plusieurs sites Internet</strong> du compte Kiubi.</div><article class="post-article"><header class="post-header"><h1>Liste des utilisateurs (3 sur 5)</h1></header><div class="post-content post-list"><div class="list-item"><div class="row"><div class="col-xs-6"><div class="media"><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div><div class="media-object img-circle img-avatar"><img alt="" src="http://pausegeek.fr/img/news/2016/10/the-lego-batman-movie-poster-001-2017.jpg"></div></div><div class="media-body"><h4>Marc BEYER</h4>Connecté le 25/08/2016</div></div></div><div class="col-xs-4"><span class="label label-default">Rédacteur</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/prefs/users/123" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-6"><div class="media"><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div><div class="media-object img-circle img-avatar"><img alt="" src="http://pausegeek.fr/img/news/2016/10/the-lego-batman-movie-poster-001-2017.jpg"></div></div><div class="media-body"><h4>Marc BEYER</h4>Connecté le 25/08/2016</div></div></div><div class="col-xs-4"><span class="label label-default">Éditeur</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/prefs/users/123" role="button">Détail</a></div></div></div><div class="list-item"><div class="row"><div class="col-xs-6"><div class="media"><div class="media-left"><div class="media-object md-icon md-face img-default img-circle img-avatar"></div><div class="media-object img-circle img-avatar"><img alt="" src="http://pausegeek.fr/img/news/2016/10/the-lego-batman-movie-poster-001-2017.jpg"></div></div><div class="media-body"><h4>Marc BEYER</h4>Connecté le 25/08/2016</div></div></div><div class="col-xs-4"><span class="label label-default">Rédacteur</span></div><div class="col-xs-2"><a class="btn btn-option pull-right" href="/prefs/users/123" role="button">Détail</a></div></div></div></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],385:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),SelectView=require(436),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(369),className:"container",service:"prefs",behaviors:[FormBehavior],regions:{countries:{el:"div[data-role='countries']",replaceElement:!0}},fields:["firstname","lastname","civility","email","address","zipcode","city","country_id","phone","mobile","fax","company_name","company_forme","company_cnil","company_capital","company_siret","company_rcs","company_naf","company_tva"],initialize:function(e){this.mergeOptions(e,["model","countries"])},onRender:function(){this.showChildView("countries",new SelectView({collection:this.countries,selected:this.model.get("country_id"),name:"country_id"})),this.countries.fetch()},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"25":25,"369":369,"424":424,"436":436,"undefined":undefined}],386:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),Session=Backbone.Radio.channel("app").request("ctx:session"),RowActionsBehavior=require(28),Forms=require(424),NewRowView=Marionette.View.extend({template:require(371),className:"post-content post-list",behaviors:[RowActionsBehavior],ui:{form:'form[data-role="new"]',errors:'div[data-role="errors"]',name:'input[name="name"]',sub:'span[data-role="sub"]'},events:{"keyup @ui.name":function(e){var i=this.getUI("name").val();this.getUI("sub").text(0==i.indexOf("www.")?i.substr(4):"www."+i)}},onActionCancel:function(){this.getUI("form").hide(),Forms.clearErrors(this.getUI("errors"),this.el)},onActionSave:function(){var e,i=Forms.extractFields(["name","sub"],this);if("1"==i.sub){var t=new this.collection.model,n=new this.collection.model,o=0==i.name.indexOf("www.")?i.name.substr(4):"www."+i.name;e=Backbone.$.when(t.save({name:i.name,is_main:!1},{patch:!0,wait:!0}),n.save({name:o,is_main:!1},{patch:!0,wait:!0})).done(function(){this.getUI("form").hide(),this.collection.add([t,n])}.bind(this))}else{var s=new this.collection.model;e=s.save({name:i.name,is_main:!1},{patch:!0,wait:!0}).done(function(){this.getUI("form").hide(),this.collection.add(s)}.bind(this))}return e.fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionShow:function(){Backbone.$('input[name="name"]',this.el).val(""),this.getUI("form").show()}}),RowView=Marionette.View.extend({template:require(372),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]'},templateContext:function(){var e=[];return this.model.get("is_main")||e.push({label:"Rendre principal",action:"main",confirm:""}),this.model.get("is_main")||this.model.get("is_provided")||e.push({label:"Supprimer",action:"delete",confirm:"warning"}),{actions:e,is_https_enabled:this.model.collection.meta&&this.model.collection.meta.is_https_enabled}},onActionDelete:function(){if(this.model.get("is_main")){var e=this.model.collection;return this.model.destroy().done(function(){e.fetch()})}return this.model.destroy()},onActionMain:function(){return this.model.save({is_main:!0},{patch:!0,wait:!0}).done(function(){_.each(this.model.collection.where({is_main:!0}),function(e){this.model!=e&&(e.set("is_main",!1),e.trigger("sync"))}.bind(this)),Session.site.fetch()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");i.showErrorModal(e)}.bind(this))}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(370),className:"container",service:"prefs",regions:{list:{el:"article[data-role='list']",replaceElement:!0}},ui:{ip:'[data-role="ip"]'},initialize:function(e){this.mergeOptions(e,["collection"])},start:function(){this.collection.fetch().done(function(e){e.meta.domain_IP&&this.getUI("ip").text(e.meta.domain_IP)}.bind(this))},onRender:function(){this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,newRowView:NewRowView,title:"Liste des noms de domaine"}))},templateContext:function(){return{domain:Session.site.get("domain")}}});
},{"28":28,"370":370,"371":371,"372":372,"424":424,"433":433,"undefined":undefined}],387:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(373),className:"container",service:"prefs",behaviors:[FormBehavior],fields:["is_customers_consent_required","is_comments_consent_required","is_evaluations_consent_required","is_newsletter_consent_required","is_checkout_consent_required"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"25":25,"373":373,"424":424,"undefined":undefined}],388:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(374),className:"container",service:"prefs",behaviors:[FormBehavior],fields:["is_enabled"],initialize:function(e){this.mergeOptions(e,["model"])},templateContext:function(){return{fqdn:Session.site.get("domain").replace(/^https?:\/\//,"")}},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0,wait:!0})}});
},{"25":25,"374":374,"424":424,"undefined":undefined}],389:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FilePickerView=require(295),FormBehavior=require(25),Forms=require(424),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(375),className:"container",service:"prefs",regions:{logo:{el:"div[data-role='logo']",replaceElement:!0}},behaviors:[FormBehavior],site_fields:["site_title","is_site_open","is_contact_enabled","is_blog_enabled","is_catalog_enabled","is_checkout_enabled","is_api_enabled","front_login","front_password","breadcrumb"],theme_fields:["site_excerpt","is_excerpt_visible","site_description","is_description_visible","logo_media_id","is_logo_visible"],initialize:function(e){this.mergeOptions(e,["site","theme"]),this.listenTo(this.site,"sync",function(e){Session.site.set("name",e.get("site_title"))}.bind(this))},onRender:function(){this.showChildView("logo",new FilePickerView({fieldname:"logo_media_id",fieldLabel:"Logo du site Internet",comment:"Le logo peut être utilisé dans tous les templates du site Internet, dans les emails, le bloc-marque et le détail des commandes.",type:"image",value:this.theme.get("logo_media_id")}))},templateContext:function(){return{domain:Session.site.get("domain"),site:this.site.toJSON(),theme:this.theme.toJSON()}},onSave:function(){return Backbone.$.when(this.site.save(Forms.extractFields(this.site_fields,this),{patch:!0}),this.theme.save(Forms.extractFields(this.theme_fields,this),{patch:!0}))}});
},{"25":25,"295":295,"375":375,"424":424,"undefined":undefined}],390:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SelectView=require(436),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(377),className:"container",service:"modules",behaviors:[FormBehavior],events:{"change input[type=file]":"dropFile"},fields:["type"],step:0,tempfileUpload:null,report:null,initialize:function(e){this.mergeOptions(e,["model"])},templateContext:function(){return{report:this.report,step:this.step}},dropFile:function(e){Backbone.$(e.target).is("input[type=file]")&&e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer,i=t?t.files:e.originalEvent.target.files;_.each(i,function(e){this.tempfileUpload=e}.bind(this))},onSave:function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay();var t=Forms.extractFields(this.fields,this);return t.file=this.tempfileUpload,this.model["import"](t).done(function(e){this.step=1,this.report=e,this.render()}.bind(this)).always(function(){e.hideModal()})},onCancel:function(e){if(0==this.step){var t=Backbone.Radio.channel("app").request("ctx:navigationController");t.navigate("/modules")}else this.step=0,this.report=null,this.tempfileUpload=null,this.render()}});
},{"25":25,"377":377,"424":424,"436":436,"undefined":undefined}],391:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),RowActionsBehavior=require(28),Forms=require(424),CollectionUtils=require(422),RowView=Marionette.View.extend({template:require(378),className:"list-item",behaviors:[RowActionsBehavior],ui:{list:'div[data-role="list"]',form:'form[data-role="edit"]',errors:'div[data-role="errors"]'},onActionDelete:function(){return this.model.save({msgstr:""},{patch:!1,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))},onActionEdit:function(){this.getUI("list").hide(),this.getUI("form").show()},onActionCancel:function(){this.getUI("form").hide(),this.getUI("list").show()},onActionSave:function(){return Forms.clearErrors(this.getUI("errors"),this.el),this.model.save(Forms.extractFields(["msgstr"],this),{patch:!1,wait:!0}).fail(function(e){Forms.displayErrors(e,this.getUI("errors"),this.el)}.bind(this))}}),ListView=require(433);module.exports=Marionette.View.extend({template:require(376),className:"container-fluid",service:"prefs",initialize:function(e){this.mergeOptions(e,["collection"])},regions:{list:{el:"article[data-role='list']",replaceElement:!0}},onRender:function(){var e=new CollectionUtils.SelectCollection;e.add({value:"export",label:"Exporter les traductions",selected:!1}),this.showChildView("list",new ListView({collection:this.collection,rowView:RowView,title:"Liste des traductions",filters:[{id:"term",title:"Rechercher",type:"input"},{id:"export",extraClassname:"md-export",title:"Export",type:"button",collectionPromise:e}]}))},start:function(){this.collection.fetch({reset:!0})},onChildviewFilterChange:function(e){"export"==e.model.get("id")?this.onExportFilterChange(e):this.onSearchFilterChange(e)},onExportFilterChange:function(e){if(e.view){var t=e.view;if("export"==e.value){if(t.collection.length>1)return;t.overrideExtraClassname("md-loading"),t.render(),this.collection.exportAll().done(function(e){t.overrideExtraClassname(""),t.collection.add([{value:null,label:"---"},{value:e.url,label:"Télécharger le fichier",extraClassname:"md-export"}]),t.toggleDropdown()}.bind(this)).fail(function(e){var i=Backbone.Radio.channel("app").request("ctx:navigationController");for(i.showErrorModal(e),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}.bind(this))}else for(t.toggleDropdown(),t.overrideExtraClassname("");t.collection.length>1;)t.collection.pop()}},onSearchFilterChange:function(e){this.collection.fetch({reset:!0,data:{term:e.value}})}});
},{"28":28,"376":376,"378":378,"422":422,"424":424,"433":433,"undefined":undefined}],392:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(379),className:"container",service:"prefs",behaviors:[FormBehavior],ui:{pwdBtn:'a[data-role="password-toggle"]',pwdMask:'span[data-role="password-mask"]'},events:{"click @ui.pwdBtn":function(){this.getUI("pwdBtn").hide(),this.getUI("pwdMask").show()}},fields:["g_vignette_width","g_vignette_height","vignette_width","vignette_height","g_miniature_width","g_miniature_height","miniature_width","miniature_height"],initialize:function(e){this.mergeOptions(e,["model","ftp"])},templateContext:function(){return{ftp:this.ftp.toJSON()}},onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"25":25,"379":379,"424":424,"undefined":undefined}],393:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(380),className:"container",service:"prefs",behaviors:[FormBehavior],fields:["meta_title","meta_description","meta_keywords"],onSave:function(){return this.model.save(Forms.extractFields(this.fields,this),{patch:!0})}});
},{"25":25,"380":380,"424":424,"undefined":undefined}],394:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(381),className:"container",service:"prefs"});
},{"381":381,"undefined":undefined}],395:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(383),className:"container",service:"prefs"});
},{"383":383,"undefined":undefined}],396:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(384),className:"container",service:"prefs"});
},{"384":384,"undefined":undefined}],397:[function(require,module,exports){
var Backbone=require("backbone"),_=require("underscore"),Theme=Backbone.Model.extend({url:"sites/@site/themes",idAttribute:"code",parse:function(e){return"data"in e?null===e.data?{}:e.data:e},defaults:{code:null,author_name:"",author_email:"",author_url:"",is_current:!1,name:"",style:"",version:"",date:null,status:""}});module.exports=Backbone.Collection.extend({url:"sites/@site/themes",model:Theme,parse:function(e){return this.meta=e.meta,e.data},createTheme:function(e){return Backbone.ajax({url:this.url,method:"POST",data:{name:e.name,code:e.code,reuse_layouts:e.reuse_layouts}}).then(function(e){return this.trigger("create"),new this.model(e.data)}.bind(this))},changeTheme:function(e){return Backbone.ajax({url:this.url+"/current",method:"PUT",data:{code:e}}).then(function(e){return new this.model(e.data)}.bind(this))},getCurrent:function(){return Backbone.ajax({url:this.url+"/current",method:"GET"}).then(function(e){return new this.model(e.data)}.bind(this))}});
},{"undefined":undefined}],398:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),Controller=require(30),Ftp=require(356),Themes=require(397),ThemeView=require(405),CustomView=require(403),ImportView=require(404),ActiveLinksBehaviors=require(18),SidebarMenuView=Marionette.View.extend({template:require(401),service:"themes",behaviors:[ActiveLinksBehaviors]}),ThemesController=Controller.extend({sidebarMenuService:"themes",sidebarMenu:SidebarMenuView,baseBreadcrum:[{title:"Thèmes",href:"/themes"}],showTheme:function(){var e=new Ftp,t=new Themes;Backbone.$.when(e.fetch(),t.getCurrent()).done(function(i,r){var o=new ThemeView({ftp:e,themes:t,current:r});this.navigationController.showContent(o),this.setHeader({title:"Thème graphique"})}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showCustom:function(){var e=new Themes;e.fetch().done(function(){this.navigationController.showContent(new CustomView({collection:e})),this.listenTo(e,"create",function(){this.navigationController.showOverlay(300),this.navigationController.navigate("/themes")}),this.setHeader({title:"Passer en thème personnalisé"})}.bind(this)).fail(function(){this.notFound(),this.setHeader({title:"Paramètres introuvables"})}.bind(this))},showImport:function(){this.navigationController.showContent(new ImportView),this.setHeader({title:"Importer un thème"})}});module.exports=Marionette.AppRouter.extend({controller:new ThemesController,appRoutes:{themes:"showTheme","themes/custom":"showCustom","themes/import":"showImport"},onRoute:function(e,t,i){this.controller.showSidebarMenu()}});
},{"18":18,"30":30,"356":356,"397":397,"401":401,"403":403,"404":404,"405":405,"undefined":undefined}],399:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert"><a href="https://doc.kiubi.com/generalites.html" class="md-icon md-help pull-right" target="_blank"></a> Le thème graphique personnalisé permet de créer un look sur mesure pour votre un site Internet, en vous donnant <strong>un accès complet aux templates</strong> qui le composent. Aucune limitation technique particulière ne vous est alors imposée.<br><br>Afin de répondre aux exigences de qualité et de performance d\'un site Internet professionnel, <strong>la maîtrise des standards du Web</strong> tels que le HTML, le CSS et le javascript est nécessaire. Le <a href="https://doc.kiubi.com/" target="_blank">guide du webdesigner</a> est à votre disposition pour vous aider à exploiter les possibilités de personnalisation offertes par Kiubi.<br><br>Activer le thème graphique personnalisé va également <strong>réinitialiser tous les fichiers</strong> de votre espace FTP, dont l\'accès vous sera donné après l\'activation du thème.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Configuration du thème</h1></header><div class="post-content"><div class="form-group"><label class="control-label required" for="name">Intitulé du thème</label><input class="form-control" id="name" name="name" value="" placeholder="Intitulé du thème tel qu\'il apparaîtra dans la console d\'administration"></div><div class="form-group"><label class="control-label">Mise en page</label><p></p><div class="radio-group"><input name="reuse_layouts" id="reuse_layouts1" value="1" checked="checked" type="radio"><label for="reuse_layouts1" class="">Conserver la mise en page actuelle qui est déjà personnalisé pour ce site</label><input name="reuse_layouts" id="reuse_layouts0" value="0" type="radio"><label for="reuse_layouts0" class="">Remplacer la mise en page actuelle par la mise en page par défaut du thème</label></div></div><div class="row"><div class="col-xs-4"><div class="form-group"><label for="code" class="control-label">Thème à copier</label><select id="code" name="code" data-style="selectify"> ',_.each(themes,function(e){__p+=' <option value="'+(null==(__t=e.code)?"":_.escape(__t))+'">'+(null==(__t=e.name)?"":_.escape(__t))+"</option> "}),__p+=' </select></div></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><a class="btn btn-cancel" href="/themes">Retour</a> <button type="button" class="btn btn-action pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],400:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<form><div class="alert alert-warning" role="alert">Grâce au système d\'import de thèmes graphiques de Kiubi, vous pouvez importer d\'un clic l\'ensemble d\'un thème graphique existant. Une fois ajouté à votre site, vous pouvez le personnaliser à votre convenance.</div><div class="alert alert-danger" data-role="errors" role="alert" style="display:none"></div><article class="post-article"><header class="post-header"><h1>Paramètres d\'import</h1></header><div class="post-content"><div class="form-group"><label class="control-label" for="UA">Fichier d\'import (format .thm)</label><input name="f" id="f" type="file"></div><div class="form-group"><label class="control-label">Importer le contenu</label><div class="radio-group"><input name="is_visible" id="is_visible1" value="1" type="radio"><label for="is_visible1" class="">Oui, je souhaite remplacer le contenu actuel du site par celui du thème</label><input name="is_visible" id="is_visible0" value="0" checked="checked" type="radio"><label for="is_visible0" class="">Non, je souhaite conserver le contenu actuel du site</label></div></div><div class="form-group"><div class="checkbox"><input id="toto" value="option1" type="checkbox"><label for="toto" class="">Je reconnais avoir acquis l\'ensemble des droits nécessaires à l\'utilisation des éléments importés</label></div></div></div><footer class="post-footer"></footer></article></form><div class="save"><div class="btn-toolbar" role="toolbar"><button type="button" class="btn btn-cancel" data-role="return">Retour</button> <button type="button" class="btn btn-action btn-save pull-right" data-role="save">Enregistrer</button></div></div><footer class="footer"></footer>';return __p};
},{"undefined":undefined}],401:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h2>Thèmes</h2><ul class="nav nav-sidebar"><li><a href="/themes">Thème graphique</a></li></ul>';return __p};
},{"undefined":undefined}],402:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article"><header class="post-header"><h1>'+(null==(__t=theme.name)?"":_.escape(__t))+'</h1></header><div class="post-content"><div class="btn-group pull-right" role="group" style="margin-left: 20px"> ',__p+="theme"==theme.code?' <a class="btn btn-option" href="#" role="button" data-role="default">Revenir en thème par défaut</a> ':' <a class="btn btn-option" href="#" role="button" data-role="custom">Passer en thème personnalisé</a> ',__p+=' <button type="button" class="btn btn-option dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span> <span class="sr-only">Menu</span></button><ul class="dropdown-menu dropdown-menu-right"> ',theme.author_url&&(__p+=' <li><a href="'+(null==(__t=theme.author_url)?"":_.escape(__t))+'" target="_blank">Site web de l\'auteur</a></li> '),__p+=" ",theme.author_email&&(__p+=' <li><a href="mailto:'+(null==(__t=theme.author_email)?"":_.escape(__t))+"\">Contacter l'auteur</a></li> "),__p+="  ",theme_download&&(__p+=' <li><a href="'+(null==(__t=theme_download)?"":_.escape(__t))+'" target="_blank">Télécharger les fichiers du thème</a></li> '),__p+=" </ul></div> ",__p+="theme"==theme.code?" <p>Vous utilisez un thème graphique personnalisé. Vous pouvez créer un look sur mesure en modifiant les templates qui composent le thème.</p> ":" <p>Vous utilisez un thème graphique mis à votre disposition par Kiubi. Il vous fait profiter d'un look esthétique et professionnel, toujours maintenu à jour.</p> ",__p+=' <div class="devises"><div class="desktop"><div class="screen"> ',"theme"==theme.code&&(__p+=' <div class="md-icon md-code"></div> '),__p+=' <img src="'+(null==(__t=theme_img)?"":_.escape(__t))+'"></div><div class="screen-footer"></div><div class="stand"></div></div></div></div><footer class="post-footer"></footer></article> ',__p+="theme"==theme.code?' <article class="post-article"><header class="post-header"><h1>Accès aux templates</h1></header><div class="post-content"><p>Pour personnaliser le thème, vous devez vous connecter à votre espace FTP. Le <a href="https://doc.kiubi.com/" target="_blank">guide du webdesigner</a> est à votre disposition pour vous aider à exploiter les possibilités de personnalisation offertes par Kiubi.</p><div><div class="row"><div class="col-xs-3"><label class="control-label" for="">Adresse de l\'hôte :</label></div><div class="col-xs-9"><p>'+(null==(__t=ftp.host)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-xs-3"><label class="control-label" for="">Port :</label></div><div class="col-xs-9"><p>'+(null==(__t=ftp.port)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-xs-3"><label class="control-label" for="">Nom d\'utilisateur :</label></div><div class="col-xs-9"><p>'+(null==(__t=ftp.login)?"":_.escape(__t))+'</p></div></div><div class="row"><div class="col-xs-3"><label class="control-label" for="">Mot de passe :</label></div><div class="col-xs-9"><p><span style="display: none" data-role="password-mask">'+(null==(__t=ftp.password)?"":_.escape(__t))+'</span><a data-role="password-toggle" href="#">Afficher le mot de passe</a></p></div></div><div class="row"><div class="col-xs-3"><label class="control-label" for="">Répertoire racine :</label></div><div class="col-xs-9"><p>/theme/</p></div></div></div><footer class="post-footer"></footer></div></article> ':' <article class="post-article"><header class="post-header"><h1>Plus de thèmes</h1></header><div class="post-content"><div class="row"><div class="col-xs-7"><p>Retrouvez sur Thème & Co de nombreux templates et thèmes de qualité et utilisez les avec Kiubi. Des thèmes <em>ready to made</em> pour des sites de présentation d\'entreprise ou e-commerce. Tout ce dont vous avez besoin pour personnaliser votre site Internet.</p><p><a class="btn btn-option" href="https://www.theme-and-co.fr/" target="_blank">Visiter Thème & Co</a></p><p><a class="btn btn-option" href="https://www.kiubi.com/contact.html" target="_blank">Contacter un expert</a></p></div><div class="col-xs-5"><p class="text-right"><a href="https://www.theme-and-co.fr/" target="_blank"><img src="assets/img/illustration_theme_and_co.png"></a></p></div></div></div><footer class="post-footer"></footer></article> ',__p+="";return __p};
},{"undefined":undefined}],403:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(25),Forms=require(424);module.exports=Marionette.View.extend({template:require(399),className:"container",service:"themes",behaviors:[FormBehavior],fields:["name","code","reuse_layouts"],initialize:function(e){this.mergeOptions(e,["collection"])},templateContext:function(){return{themes:_.filter(this.collection.toJSON(),function(e){return"theme"!=e.code})}},onSave:function(){return this.collection.createTheme(Forms.extractFields(this.fields,this))}});
},{"25":25,"399":399,"424":424,"undefined":undefined}],404:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(25),Forms=require(424),SelectifyBehavior=require(24);module.exports=Marionette.View.extend({template:require(400),className:"container",service:"themes",behaviors:[SelectifyBehavior]});
},{"24":24,"25":25,"400":400,"424":424,"undefined":undefined}],405:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),FormBehavior=require(25),Forms=require(424),SelectifyBehavior=require(24),Session=Backbone.Radio.channel("app").request("ctx:session");module.exports=Marionette.View.extend({template:require(402),className:"container",service:"themes",behaviors:[SelectifyBehavior],ui:{pwdBtn:'a[data-role="password-toggle"]',pwdMask:'span[data-role="password-mask"]',defaultBtn:'a[data-role="default"]',customBtn:'a[data-role="custom"]'},events:{"click @ui.pwdBtn":function(){this.getUI("pwdBtn").hide(),this.getUI("pwdMask").show()},"click @ui.defaultBtn":function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay();var t=function(t){e.showErrorModal(t)};this.themes.fetch().then(function(){var i=this.themes.find(function(e){return"theme"!=e.get("code")});i||t("Aucun theme disponible"),this.themes.changeTheme(i.get("code")).done(function(t){this.current=t,this.render(),e.hideModal()}.bind(this)).fail(t)}.bind(this),t)},"click @ui.customBtn":function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay();var t=function(t){e.showErrorModal(t)};this.themes.fetch().then(function(){var i=this.themes.find(function(e){return"theme"==e.get("code")});i?this.themes.changeTheme("theme").done(function(t){this.current=t,this.render(),e.hideModal()}.bind(this)).fail(t):(e.navigate("/themes/custom"),e.hideModal())}.bind(this),t)}},initialize:function(e){this.mergeOptions(e,["ftp","current","themes"])},templateContext:function(){return{ftp:this.ftp.toJSON(),theme:this.current.toJSON(),theme_img:Session.convertThemePath("/themes/"+this.current.get("code")+"/illustration.jpg"),theme_download:"theme"==this.current.get("code")?null:Session.convertThemePath("/themes/"+this.current.get("code")+"/"+this.current.get("code")+".zip")}}});
},{"24":24,"25":25,"402":402,"424":424,"undefined":undefined}],406:[function(require,module,exports){
function getPageTitle(e){var i=Backbone.Radio.channel("app").request("ctx:session");if(!i)return"Kiubi";var t;return t=e.pageTitle?"  •  "+e.pageTitle:e.service?"  •  "+e.service[0].toUpperCase()+e.service.slice(1):"","ALPHA • "+i.site.get("name")+t+" • Kiubi"}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SidebarView=require(430),SidebarMenuView=require(431),HeaderView=require(428),ModalView=require(435),OverlayView=Marionette.View.extend({template:require(417),tagName:"div",className:"overlay"});module.exports=Marionette.Object.extend({layoutView:null,application:null,initialize:function(e){this.mergeOptions(e,["layoutView","application"])},setBreadCrum:function(e){this.layoutView.getChildView("header")&&this.layoutView.getChildView("header").setBreadCrum(e)},setHeaderActions:function(e){this.layoutView.getChildView("header")&&this.layoutView.getChildView("header").setActions(e)},setHeaderTabs:function(e){this.layoutView.getChildView("header")&&this.layoutView.getChildView("header").setTabs(e)},refreshHeader:function(){this.layoutView.getChildView("header")&&this.layoutView.getChildView("header").render()},showHeader:function(){this.layoutView.showChildView("header",new HeaderView)},showSidebar:function(){var e=new Backbone.Collection;e.add([{name:"Dashboard",path:"/",className:"md-home",type:"main",is_active:!0},{name:"Site Web",path:"/cms",className:"md-website",type:"main",is_active:!1},{name:"Blog",path:"/blog",className:"md-blog",type:"main",is_active:!1},{name:"Catalogue",path:"/catalog",className:"md-product",type:"main",is_active:!1},{name:"Commandes",path:"/checkout",className:"md-order",type:"main",is_active:!1},{name:"Membres",path:"/customers",className:"md-member",type:"main",is_active:!1},{name:"Modules",path:"/modules",className:"md-extension",type:"main",is_active:!1},{name:"Mises en page",path:"/appearance",className:"md-layout",type:"main",is_active:!1},{name:"Thèmes",path:"/themes",className:"md-theme",type:"main",is_active:!1},{name:"Médiathèque",path:"/media",className:"md-media",type:"tools",is_active:!1},{name:"Préférences",path:"/prefs",className:"md-settings",type:"tools",is_active:!1},{name:"Aide & support",path:"#",className:"md-help",type:"tools",is_active:!1}]),this.layoutView.showChildView("sidebar",new SidebarView({model:this.application.session.user,collection:e}))},hideSidebarMenu:function(){this.layoutView.lockMenu(),this.layoutView.getRegion("sidebarMenu").empty()},showSidebarMenu:function(){this.layoutView.showChildView("sidebarMenu",new SidebarMenuView({model:this.application.session.site}))},showSidebarMenuDetail:function(e){this.layoutView.getChildView("sidebarMenu")||this.showSidebarMenu();var i=this.layoutView.getChildView("sidebarMenu");i.showChildView("detail",e),i.service=e.service},getSidebarMenuDetail:function(){if(!this.layoutView.getChildView("sidebarMenu"))return null;var e=this.layoutView.getChildView("sidebarMenu");return e.getChildView("detail")},getSidebarMenuService:function(){return this.layoutView.getRegion("sidebarMenu")&&this.layoutView.getChildView("sidebarMenu")?this.layoutView.getChildView("sidebarMenu").service||null:null},showContent:function(e){this.layoutView.showChildView("content",e),document.title=getPageTitle(e)},getContent:function(){return this.layoutView.getChildView("content")},showModal:function(e,i){this.layoutView.showChildView("modal",e),i&&setTimeout(this.hideModal.bind(this),i)},showInModal:function(e,i){var t=new ModalView(i);this.showModal(t),t.showChildView("content",e)},showErrorModal:function(e,i){var t=new ModalView({title:"Oups ! Une erreur est survenue.",modalClass:"modal-danger"});this.showModal(t,i),_.isString(e)||(e=e.responseJSON&&e.responseJSON.error&&e.responseJSON.error.message?e.responseJSON.error.message:"Une erreur inattendue s'est produite");var a=Marionette.View.extend({template:_.template(e)});t.showChildView("content",new a)},hideModal:function(){this.layoutView.getRegion("modal").empty()},showOverlay:function(e){this.showModal(new OverlayView,e)},navigate:function(e){this.application.navigate(e),this.scrollTop("fast")},notFound:function(){this.application.router.controller.notFound()},underConstruction:function(){this.application.router.controller.underConstruction()},scrollTop:function(e){e=e||"slow",Backbone.$("#content").animate({scrollTop:0},e)}});
},{"417":417,"428":428,"430":430,"431":431,"435":435,"undefined":undefined}],407:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",actions&&actions.length>0&&(__p+=' <div class="btn-toolbar pull-right" role="toolbar"><div class="btn-group" role="group"><button data-id="'+(null==(__t=actions[0].index)?"":_.escape(__t))+'" type="button" class="btn btn-action '+(null==(__t=actions[0].isEnabled?"":"disabled")?"":__t)+'" data-role="default-action">'+(null==(__t=actions[0].title)?"":_.escape(__t))+"</button> ",actions.length>1&&(__p+=' <button type="button" class="btn btn-action dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span> <span class="sr-only">Menu</span></button><ul class="dropdown-menu dropdown-menu-right" data-role="other-actions"> '),_(actions).each(function(t,l){0!=l&&(__p+=' <li data-id="'+(null==(__t=t.index)?"":_.escape(__t))+'" class="'+(null==(__t=t.isEnabled?"":"disabled")?"":__t)+'"><a href="#">'+(null==(__t=t.title)?"":_.escape(__t))+"</a></li> ")}),__p+=" </ul> ",__p+=" </div></div> "),__p+=' <ol class="breadcrumb"> ',_(links).each(function(t){__p+=" ",__p+=t.href?' <li><a href="'+(null==(__t=t.href)?"":_.escape(__t))+'" title="'+(null==(__t=t.title)?"":_.escape(__t))+'">'+(null==(__t=t.title)?"":_.escape(__t))+"</a></li> ":' <li class="active" title="'+(null==(__t=t.title)?"":_.escape(__t))+'">'+(null==(__t=t.title)?"":_.escape(__t))+"</li> ",__p+=" "}),__p+=' <li class="gradient"></li></ol> ',tabs&&(__p+=' <ul class="nav nav-pills"> ',_(tabs).each(function(t){__p+=' <li role="presentation" '+(null==(__t=t.is_active?'class="active"':"")?"":__t)+'><a href="'+(null==(__t=t.url)?"":_.escape(__t))+'"> '+(null==(__t=t.title)?"":_.escape(__t))+" ",t.icon&&(__p+=' <span class="md-icon '+(null==(__t=t.icon)?"":_.escape(__t))+'"></span> '),__p+=" </a></li> "}),__p+=" </ul> "),__p+="";return __p};
},{"undefined":undefined}],408:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a href="#" class="bt-closed md-icon"></a><div class="logo"><img src="/assets/img/logo_kiubi.png"></div><ul class="nav nav-stacked"> ',_(mainItems).each(function(a){__p+=' <li class="'+(null==(__t=a.is_active?"active":"")?"":__t)+'"><a href="'+(null==(__t=a.path)?"":_.escape(__t))+'"><span class="md-icon md-icon-menu '+(null==(__t=a.className)?"":_.escape(__t))+'"></span><span class="nav-label">'+(null==(__t=a.name)?"":_.escape(__t))+"</span></a></li> "}),__p+=' </ul><ul class="nav nav-stacked tools"> ',_(toolsItems).each(function(a){__p+=' <li class="'+(null==(__t=a.is_active?"active":"")?"":__t)+'"><a href="'+(null==(__t=a.path)?"":_.escape(__t))+'"><span class="md-icon md-icon-menu '+(null==(__t=a.className)?"":_.escape(__t))+'"></span><span class="nav-label">'+(null==(__t=a.name)?"":_.escape(__t))+"</span></a></li> "}),__p+=" </ul> ",isAuth&&(__p+=' <div class="user"><div class="media"><div class="media-left"><a href="#"><img src="'+(null==(__t=avatar)?"":_.escape(__t))+'" class="img-circle media-object img-avatar"></a></div><div class="media-body"><h4>'+(null==(__t=initials)?"":_.escape(__t))+'</h4><span class="user-profil">Premium</span></div></div></div> '),__p+="";return __p};
},{"undefined":undefined}],409:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="";return __p};
},{"undefined":undefined}],410:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="sidebar-header"><h1 title="Voir le site : '+(null==(__t=name)?"":_.escape(__t))+'"><a href="'+(null==(__t=domain)?"":_.escape(__t))+'" target="_blank"><span>'+(null==(__t=name)?"":_.escape(__t))+'</span><span class="md-icon md-launch"></span></a></h1><div class="dropdown toggle-site"><a href="javascript:;" class="dropdown-toggle" id="toggle-site" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="'+(null==(__t=domain)?"":_.escape(__t))+'"><span class="btn-content">'+(null==(__t=fqdn)?"":_.escape(__t))+'</span><span class="caret"></span></a><ul class="dropdown-menu" aria-labelledby="toggle-site" data-container="body" data-role="site-search"><li class="dropdown-content"><span class="form-group has-feedback"><input class="form-control" placeholder="Rechercher un site"> <span class="form-control-feedback md-feedback md-search"></span></span></li></ul></div><div class="form-group has-feedback sidebar-search"><input class="form-control" placeholder="Recherche"> <span class="form-control-feedback md-feedback md-search"></span></div></div><div class="sidebar-content"><div><div data-role="content"></div></div></div>';return __p};
},{"undefined":undefined}],411:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="dropdown"><input class="form-control" name="'+(null==(__t=name)?"":_.escape(__t))+'" data-toggle="dropdown" value="'+(null==(__t=current)?"":_.escape(__t))+'" placeholder="'+(null==(__t=searchPlaceholder)?"":_.escape(__t))+'" autocomplete="off"> <span class="form-control-feedback md-feedback md-search"></span><ul class="dropdown-menu dropdown-control"></ul></div>';return __p};
},{"undefined":undefined}],412:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<button type="button" title="'+(null==(__t=title)?"":_.escape(__t))+'" class="btn btn-icon md-icon '+(null==(__t=collection.length?"dropdown-toggle":"")?"":__t)+" "+(null==(__t=extraClassname)?"":_.escape(__t))+'" '+(null==(__t=collection.length?'data-toggle="dropdown"':"")?"":__t)+' aria-haspopup="true" aria-expanded="false"></button> ',collection.length&&(__p+=' <ul class="dropdown-menu dropdown-control"> ',_(collection).each(function(t){__p+=" ","---"==t.label?__p+=' <li role="separator" class="divider"></li> ':(__p+=' <li class="'+(null==(__t=t.selected?"active":"")?"":__t)+'"><a data-value="'+(null==(__t=t.value)?"":_.escape(__t))+'" ',__p+=t.value.match(/^http/)?' href="'+(null==(__t=t.value)?"":__t)+'" target="_blank" ':' href="#" ',__p+=" >",t.extraClassname&&(__p+='<span class="md-icon '+(null==(__t=t.extraClassname)?"":_.escape(__t))+' pull-right"></span>'),__p+=""+(null==(__t=t.label)?"":_.escape(__t))+"</a></li> "),__p+=" "}),__p+=" </ul> "),__p+="";return __p};
},{"undefined":undefined}],413:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<input class="form-control" name="term" placeholder="'+(null==(__t=title)?"":_.escape(__t))+'"> <span class="form-control-feedback md-feedback md-search"></span>';return __p};
},{"undefined":undefined}],414:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="form-control form-control-select dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><span data-role="label" class="fake-selected">'+(null==(__t=current.label)?"":_.escape(__t))+'</span><span data-role="clear" class="caret '+(null==(__t=current.value?"md-cancel":"")?"":__t)+'"></span></div><ul class="dropdown-menu dropdown-control dropdown-control-lg"><li class="dropdown-content"><span class="form-group has-feedback"><input data-role="input" class="form-control" value="'+(null==(__t=term)?"":_.escape(__t))+'" placeholder="'+(null==(__t=searchPlaceholder)?"":_.escape(__t))+'"> <span class="form-control-feedback md-feedback md-search"></span></span></li></ul>';return __p};
},{"undefined":undefined}],415:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<select class="'+(null==(__t=extraClassname?extraClassname:"")?"":_.escape(__t))+'" data-style="selectify"><option value="">'+(null==(__t=title)?"":_.escape(__t))+"</option> ",collection&&(__p+=" ",_(collection).each(function(e){__p+=' <option value="'+(null==(__t=e.value)?"":_.escape(__t))+'" '+(null==(__t=e.selected?'selected="selected"':"")?"":__t)+">"+(null==(__t=indent2Space(e.indent||0))?"":__t)+(null==(__t=e.label)?"":_.escape(__t))+"</option> "}),__p+=" "),__p+=" </select>";return __p};
},{"undefined":undefined}],416:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article class="post-article '+(null==(__t=extraClassname)?"":_.escape(__t))+'"><header class="post-header"><h1>'+(null==(__t=title)?"":_.escape(__t))+' <span data-role="counter"></span></h1><div class="form-inline"> ',selection&&selection.length&&(__p+=' <div class="checkbox-inline"><input id="selection_all" name="selection_all" value="1" type="checkbox"><label for="selection_all"><span class="btn btn-form-control" data-role="select-all">Tout sélectionner</span></label></div><div class="btn-group hidden" role="group"><div class="dropdown"><button type="button" class="form-control form-control-select dropdown-toggle btn-bulk-action" data-role="bulk-action" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fake-selected">Plus d\'actions</span><span class="caret"></span></button><ul class="dropdown-menu"> ',_(selection).each(function(l,e){__p+=' <li><a href="#" data-role="action" data-id="'+(null==(__t=e)?"":_.escape(__t))+'">'+(null==(__t=l.title)?"":_.escape(__t))+"</a></li> "}),__p+=" </ul></div></div>"),__p+='<span data-role="filters"></span>',filterModal&&(__p+='<div class="btn-group"><button type="button" class="btn btn-icon md-icon md-filter" data-toggle="modal" data-target="'+(null==(__t=filterModal)?"":_.escape(__t))+'"></button></div> '),__p+=" ",order&&(__p+=' <div class="btn-group pull-right" role="group" data-role="order"><button type="button" class="btn btn-icon md-icon md-sort dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button><ul class="dropdown-menu"> ',_(order).each(function(l,e){__p+=" <li "+(null==(__t=l.is_active?'class="active"':"")?"":__t)+' data-id="'+(null==(__t=e)?"":_.escape(__t))+'"><a href="#">'+(null==(__t=l.title)?"":_.escape(__t))+"</a></li> "}),__p+=" </ul></div> "),__p+=' </div></header><div data-role="list"></div><div data-role="detail"></div><div data-role="loading" style="display:none"><div class="loader"><div class="loader-circle1 loader-circle"></div><div class="loader-circle2 loader-circle"></div><div class="loader-circle3 loader-circle"></div><div class="loader-circle4 loader-circle"></div><div class="loader-circle5 loader-circle"></div><div class="loader-circle6 loader-circle"></div><div class="loader-circle7 loader-circle"></div><div class="loader-circle8 loader-circle"></div><div class="loader-circle9 loader-circle"></div><div class="loader-circle10 loader-circle"></div><div class="loader-circle11 loader-circle"></div><div class="loader-circle12 loader-circle"></div></div></div><div data-role="new"></div><footer class="post-footer"></footer></article>';return __p};
},{"undefined":undefined}],417:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="loader"><div class="loader-circle1 loader-circle"></div><div class="loader-circle2 loader-circle"></div><div class="loader-circle3 loader-circle"></div><div class="loader-circle4 loader-circle"></div><div class="loader-circle5 loader-circle"></div><div class="loader-circle6 loader-circle"></div><div class="loader-circle7 loader-circle"></div><div class="loader-circle8 loader-circle"></div><div class="loader-circle9 loader-circle"></div><div class="loader-circle10 loader-circle"></div><div class="loader-circle11 loader-circle"></div><div class="loader-circle12 loader-circle"></div></div>';return __p};
},{"undefined":undefined}],418:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal fade '+(null==(__t=modalClass)?"":_.escape(__t))+'" tabindex="-1" role="dialog"><div class="modal-dialog '+(null==(__t=modalDialogClass)?"":_.escape(__t))+'" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close md-icon md-cancel" data-role="close" aria-label="Close"></button><h4 class="modal-title" id="myModalLabel">'+(null==(__t=title)?"":_.escape(__t))+'</h4></div><div class="modal-body"></div> ',action&&(__p+=' <div class="modal-footer"><button type="button" class="btn btn-cancel" data-role="close">Fermer</button> <button type="button" class="btn btn-action" data-role="action">'+(null==(__t=action.title)?"":_.escape(__t))+"</button></div> "),__p+=" </div></div></div>";return __p};
},{"undefined":undefined}],419:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="form-control form-control-select dropdown-toggle" type="button" id="dropdownMenu'+(null==(__t=id)?"":_.escape(__t))+'" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><span data-role="label" class="fake-selected">'+(null==(__t=current.label)?"":_.escape(__t))+'</span><span data-role="clear" class="caret '+(null==(__t=!isMandatory&&current.value?"md-cancel":"")?"":__t)+'"></span></div><ul class="dropdown-menu dropdown-control" aria-labelledby="dropdownMenu'+(null==(__t=id)?"":_.escape(__t))+'"><li class="dropdown-content"><span class="form-group has-feedback"><input data-role="input" class="form-control" value="'+(null==(__t=term)?"":_.escape(__t))+'" placeholder="'+(null==(__t=searchPlaceholder)?"":_.escape(__t))+'"> <span class="form-control-feedback md-feedback md-search"></span></span></li></ul>';return __p};
},{"undefined":undefined}],420:[function(require,module,exports){
var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="dropdown"><input class="form-control" ',inputName&&(__p+=' name="'+(null==(__t=inputName)?"":_.escape(__t))+'" '),__p+=' data-toggle="dropdown" placeholder="'+(null==(__t=searchPlaceholder)?"":_.escape(__t))+'"> <span class="form-control-feedback md-feedback md-search"></span><ul class="dropdown-menu dropdown-control"></ul></div><span data-role="list"></span>';return __p};
},{"undefined":undefined}],421:[function(require,module,exports){
function withoutNull(e){if(!e)return{};var r={};return _.each(e,function(e,t){null!==e&&void 0!==e&&(r[t]=e)}),r}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),$=require("jquery"),_=require("underscore");void 0===Backbone.__sync&&(Backbone.__sync=Backbone.sync,Backbone.sync=function(e,r,t){if("patch"===e&&(t.type="PUT"),"delete"===e&&t.data&&(t.data=JSON.stringify(t.data),t.contentType="application/json"),"patch"===e||"create"===e||"update"===e){var n=withoutNull(t.attrs||r.toJSON(t)),a=_.filter(n,function(e){return e instanceof File});0==a.length?(t.contentType="application/x-www-form-urlencoded",t.data=$.param(n)):(t.contentType=!1,t.data=new FormData,_.each(n,function(e,r){t.data.append(r,e)}),"create"!=e&&(t.type="POST",t.data.append("method","PUT")))}return Backbone.__sync(e,r,t)});var Errors={};Errors.E_UNKNOWN_RESOURCE=4401,Errors.E_MAINTENANCE=5300,Errors.E_REQUEST_TOO_LARGE=413,Errors.E_ACCESS_ABUSE=4300,Errors.E_ACCESS_AUTH_NEEDED=4307,Errors.E_ACCESS_DENIED=4308,Errors.E_ACCESS_IDENTIFICATION_FAILED=4309,Errors.E_ACCESS_NOT_YOURS=4310,Errors.E_ACCESS_TOKEN=4311,Errors.E_ACCESS_INSUFFICIENT_SCOPE=4312,Errors.E_ACCESS_CLIENT_TOO_OLD=4313,Errors.E_ACCESS_UNKNOWN_USER=4314,Errors.E_ACCESS_REGISTRATION_NEEDED=4320,Errors.E_USER_REQUIRED_PARAMS=4001,Errors.E_USER_PARAMS_VALIDATION=4002,Errors.E_USER_PARAMS_ENCODING=4012;var Client=Marionette.Object.extend({current_site:null,initialize:function(e){this.version=1,this.access_token=null,this.max_post_size=8388608,this._rate_remaining=null;var r=Backbone.Radio.channel("app").request("ctx:config");this.api_version=1,this.api_url=r.get("api"),$(document).ajaxError(function(e,r,t){r.responseJSON&&r.responseJSON.error&&r.responseJSON.error.code==Errors.E_ACCESS_TOKEN&&$(document).trigger("application:logout")})},normalize_url:function(e){return 0!==e.indexOf("/")&&(e="/"+e),e=0===e.indexOf("/v"+this.api_version)?e.substring(1):"v"+this.api_version+e,e.indexOf(".json")==-1&&(e+=".json"),e.indexOf("/sites/@site/")>0&&this.current_site&&(e=e.replace("/sites/@site/","/sites/"+this.current_site+"/")),this.api_url+"/"+e},ajax:function(e,r){e=e||{};var t=e.headers||{};t["X-Client"]="Kiubi/"+this.version;var n=e.access_token||this.access_token||null;return n&&(t.Authorization="token "+n),e.headers=t,e.url=this.normalize_url(e.url),Backbone.$.ajax.apply(Backbone.$,[e,r])},query:function(e,r,t,n){var a=$.Deferred(),i=this,s=this.ajax($.extend({type:e,dataType:"json",data:t||{},url:r},n||{}));return s.done(function(e){return 200!=e.meta.status_code?void a.reject(e.meta,e.error,e.data):void a.resolve(e.meta,e.data)}),s.fail(function(e){var r={};if(e.responseText)try{r=$.parseJSON(e.responseText)}catch(t){r.error={message:"An unexpected error has occurred.",fields:[]}}a.reject.apply(this,[r.meta||{},r.error||{},r.data||{}])}),s.always(function(e){if(!e.meta)try{e=$.parseJSON(e.responseText)}catch(r){return}i._rate_remaining=e.meta.rate_remaining}),a.promise()},post:function(e,r){return $.ajaxSetup({cache:!1}),this.query("POST",e,r)},get:function(e,r,t){return $.ajaxSetup({cache:!0}),this.query("GET",e,r,t)},put:function(e,r){return $.ajaxSetup({cache:!1}),this.query("PUT",e,r)},"delete":function(e,r){return $.ajaxSetup({cache:!1}),this.query("DELETE",e,r)},login:function(e,r,t){return t=$.extend(t||{},{login:e,password:r}),this.post("auth/authorize",t)},logout:function(){return this["delete"]("auth/session")},getFirstPage:function(e){return e&&e.link&&e.link.first_page?this.crawl(e.link.first_page):this.fail()},getPreviousPage:function(e){return e&&e.link&&e.link.previous_page?this.crawl(e.link.previous_page):this.fail()},getNextPage:function(e){return e&&e.link&&e.link.next_page?this.crawl(e.link.next_page):this.fail()},getLastPage:function(e){return e&&e.link&&e.link.last_page?this.crawl(e.link.last_page):this.fail()},getPage:function(e,r){return e&&e.link&&e.link.first_page?this.crawl(e.link.first_page+"&page="+parseInt(r)):this.fail()},hasNextPage:function(e){return e&&e.link&&e.link.next_page},hasPreviousPage:function(e){return e&&e.link&&e.link.previous_page},crawl:function(e){return e=e.replace(this.base+"v"+this.api_version,""),this.get(e)},fail:function(){var e=new $.Deferred;return e.reject({},{},{}),e.promise()},escape:function(e){for(var r="",t="€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ",n=e.length,a=new Array(n),i=0;i<n;i++){var s=t.indexOf(e[i]);s<0?a[i]=e[i]:a[i]=r.charAt(s)}return window.escape(a.join(""))},getRateRemaining:function(e){if(e||void 0===this._rate_remaining){var r=$.ajax({dataType:"json",url:this.base+"v"+this.api_version+"/rate",async:!1});try{var t=$.parseJSON(r.responseText).meta;this._rate_remaining=t&&t.rate_remaining}catch(n){return-1}}return this._rate_remaining}});module.exports=new Client,module.exports.Errors=Errors;
},{"undefined":undefined}],422:[function(require,module,exports){
function bulkAction(e,n,l,o){var t=_.compact(_.map(l,function(n){return e.get(n)}));return t.map(n).reduce(function(e,n){return e.then(n)},Backbone.$.Deferred().resolve()).done(function(t){e.trigger(o?"bulk:"+o:"bulk",{action:n,ids:l})})}var Backbone=require("backbone"),_=require("underscore"),Option=Backbone.Model.extend({defaults:{label:"",value:null,indent:null,selected:!1,extraClassname:null}}),SelectCollection=Backbone.Collection.extend({model:Option});module.exports.bulkAction=bulkAction,module.exports.SelectCollection=SelectCollection;
},{"undefined":undefined}],423:[function(require,module,exports){
function formatDate(t){return""==t?t:moment(t,"YYYY-MM-DD").format("DD/MM/YYYY")}function formatDateTime(t){return""==t?t:moment(t,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY HH:mm:ss")}function formatLongDateTime(t){return""==t?t:moment(t,"YYYY-MM-DD HH:mm:ss").format("DD MMM YYYY [à] HH[h]mm")}function formatBytes(t,r){if(0==t)return"0 octets";var o=1e3,e=r||2,m=["octets","Ko","Mo","Go"],a=Math.floor(Math.log(t)/Math.log(o));return _string.numberFormat(t/Math.pow(o,a),e,","," ")+" "+m[a]}function formatFloat(t,r){if(_.isString(t)&&(t=unformatFloat(t)),null===t)return"";var o=r||2;return _string.numberFormat(t,o,",","")}function unformatFloat(t){if(null===t||""===t)return null;t=t.replace(",","."),t=t.replace(" ","");var r=parseFloat(t);return isNaN(r)?null:r}var Backbone=require("backbone"),_=require("underscore"),_string=require("underscore.string"),moment=require("moment");module.exports.formatDate=formatDate,module.exports.formatDateTime=formatDateTime,module.exports.formatLongDateTime=formatLongDateTime,module.exports.formatBytes=formatBytes,module.exports.formatFloat=formatFloat,module.exports.unformatFloat=unformatFloat;
},{"undefined":undefined}],424:[function(require,module,exports){
function extractFields(e,r,s){return s||(s="form"),extractFieldsFromSelector(e,Backbone.$(s,r.el))}function extractFieldsFromSelector(e,r){var s=_.reduce(r,function(e,r){return _.extend(e,serialize(r,{hash:!0,empty:!0}))},{}),o=_.pick(s,e);return _.mapObject(o,function(e,r){return"is_"!==r.substring(0,3)||"1"!=e&&"0"!=e?"_id"===r.substring(r.length-3)&&""!==e&&(e=parseInt(e)):e="1"==e,_.isArray(e)&&(e=_.filter(e,function(e){return!_.isString(e)||e.length>0})),e})}function displayErrors(e,r,s){return e.responseJSON&&e.responseJSON.error&&e.responseJSON.error.message?(r.text(e.responseJSON.error.message),r.show(),void(e.responseJSON.error&&e.responseJSON.error.fields&&_(e.responseJSON.error.fields).each(function(e){Backbone.$("input[name='"+e.field+"'], textarea[name='"+e.field+"'], select[name='"+e.field+"']",s).parents(".form-group").addClass("has-error")}))):(r.text("Erreur inattendue"),void r.show())}function clearErrors(e,r){e.hide(),Backbone.$("input, textarea, select",r).parents(".form-group").removeClass("has-error")}var Backbone=require("backbone"),_=require("underscore"),serialize=require("form-serialize");module.exports.extractFields=extractFields,module.exports.displayErrors=displayErrors,module.exports.clearErrors=clearErrors;
},{"undefined":undefined}],425:[function(require,module,exports){
require("jquery-ui/ui/version"),require("jquery-ui/ui/ie"),require("jquery-ui/ui/scroll-parent"),require("jquery-ui/ui/safe-blur"),require("jquery-ui/ui/safe-active-element"),require("jquery-ui/ui/plugin"),require("jquery-ui/ui/data"),require("jquery-ui/ui/widget"),require("jquery-ui/ui/widgets/mouse"),require("jquery-ui/ui/widgets/sortable"),require("jquery-ui/ui/widgets/draggable");
},{"undefined":undefined}],426:[function(require,module,exports){
var Marionette=require("backbone.marionette"),$=require("jquery"),Cache=function(){var e={};return{clear:function(){e={}},set:function(t,a){e[t]=a},get:function(t){return"undefined"!=typeof e[t]&&e[t]}}}(),Translate=Marionette.Object.extend({initialize:function(e){switch(this.mergeOptions(e,["lang"]),this.lang){case"fr":var t=require("moment");t.defineLocale(this.lang,require(31)),t.locale(this.lang)}},load:function(e){var t=Cache.get("locales_"+e);if(t===!1){try{t=require("locales_"+e+"/messages")}catch(a){t={}}Cache.set("locales_"+e,t)}return t},translate:function(e,t){var a=this.load(this.lang);return a[e]?a[e][1]:e},format_price:function(e,t){return $.isNumeric(e)?"EUR"==t?e.toFixed(2)+"€":e.toFixed(2)+" "+t:e}}),sharedInstance=new Translate({lang:$("html").attr("lang")||"en"});module.exports=sharedInstance,module.exports.translate=Translate.prototype.translate.bind(sharedInstance),module.exports.format_price=Translate.prototype.format_price.bind(sharedInstance),module.exports.Translate=Translate;
},{"31":31,"undefined":undefined}],427:[function(require,module,exports){
!function(){var e={},t=function(t){for(var n=e[t],o=n.deps,l=n.defn,r=o.length,a=new Array(r),u=0;u<r;++u)a[u]=i(o[u]);var s=l.apply(null,a);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,i){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===i)throw"no definition function for "+t;e[t]={deps:n,defn:i,instance:void 0}},i=function(n){var i=e[n];if(void 0===i)throw"module ["+n+"] was undefined";return void 0===i.instance&&t(n),i.instance},o=function(e,t){for(var n=e.length,o=new Array(n),l=0;l<n;++l)o.push(i(e[l]));t.apply(null,t)},l={};l.bolt={module:{api:{define:n,require:o,demand:i}}};var r=n,a=function(e,t){r(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),r("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),r("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),r("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),r("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),r("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),r("tinymce.plugins.link.core.Settings",[],function(){var e=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},t=function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},n=function(e){return e.link_list},i=function(e){return"string"==typeof e.default_link_target},o=function(e){return e.default_link_target},l=function(e){return e.target_list},r=function(e,t){e.settings.target_list=t},a=function(e){return l(e)!==!1},u=function(e){return e.rel_list},s=function(e){return void 0!==u(e)},c=function(e){return e.link_class_list},f=function(e){return void 0!==c(e)},g=function(e){return e.link_title!==!1},d=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target};return{assumeExternalTargets:e,hasContextToolbar:t,getLinkList:n,hasDefaultLinkTarget:i,getDefaultLinkTarget:o,getTargetList:l,setTargetList:r,shouldShowTargetList:a,getRelList:u,hasRelList:s,getLinkClassList:c,hasLinkClassList:f,shouldShowLinkTitle:g,allowUnsafeLinkTarget:d}}),a("global!RegExp",RegExp),r("tinymce.plugins.link.core.Utils",["tinymce.core.util.Tools","tinymce.plugins.link.core.Settings","global!RegExp"],function(e,t,n){var i=function(t,n){var i=["noopener"],o=t?t.split(/\s+/):[],l=function(t){return e.trim(t.sort().join(" "))},r=function(e){return e=a(e),e.length?e.concat(i):i},a=function(t){return t.filter(function(t){return e.inArray(i,t)===-1})};return o=n?r(o):a(o),o.length?l(o):null},o=function(e){return e.replace(/\uFEFF/g,"")},l=function(e,t){return t=t||e.selection.getStart(),c(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},r=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return o(n)},a=function(e){return e&&"A"===e.nodeName&&e.href},u=function(t){return e.grep(t,a).length>0},s=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||e.indexOf("href=")==-1))},c=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},f=function(e,n){return function(o){e.undoManager.transact(function(){var r=e.selection.getNode(),a=l(e,r),u={href:o.href,target:o.target?o.target:null,rel:o.rel?o.rel:null,"class":o["class"]?o["class"]:null,title:o.title?o.title:null};t.hasRelList(e.settings)||t.allowUnsafeLinkTarget(e.settings)!==!1||(u.rel=i(u.rel,"_blank"==u.target)),o.href===n.href&&(n.attach(),n={}),a?(e.focus(),o.hasOwnProperty("text")&&("innerText"in a?a.innerText=o.text:a.textContent=o.text),e.dom.setAttribs(a,u),e.selection.select(a),e.undoManager.add()):c(r)?m(e,r,u):o.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",u,e.dom.encode(o.text))):e.execCommand("mceInsertLink",!1,u)})}},g=function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();c(t)?d(e,t):e.execCommand("unlink")})}},d=function(e,t){var n,i;i=e.dom.select("img",t)[0],i&&(n=e.dom.getParents(i,"a[href]",t)[0],n&&(n.parentNode.insertBefore(i,n),e.dom.remove(n)))},m=function(e,t,n){var i,o;o=e.dom.select("img",t)[0],o&&(i=e.dom.create("a",n),o.parentNode.insertBefore(i,o),i.appendChild(o))};return{link:f,unlink:g,isLink:a,hasLinks:u,isOnlyTextSelected:s,getAnchorElement:l,getAnchorText:r,toggleTargetRules:i}}),r("tinymce.plugins.link.ui.Dialog",["tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.link.core.Utils","tinymce.plugins.link.core.Settings"],function(e,t,n,i,o){var l={},r=function(e,t){var i=o.getLinkList(e.settings),l=i.types;"string"==typeof l?n.send({url:l,success:function(n){t(e,JSON.parse(n),i.pages)}}):"function"==typeof l?l(function(n){t(e,n,i.pages)}):t(e,l,i.pages)},a=function(e,n,i){var o=function(e,i){return i=i||[],t.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n&&n(t)),i.push(t)}),i};return o(e,i||[])},u=function(t,n,i){var o=t.selection.getRng();e.setEditorTimeout(t,function(){t.windowManager.confirm(n,function(e){t.selection.setRng(o),i(e)})})},s=function(e,n,r){var s,c,f,g,d,m,v,p,h,k,y,x,b={},T=e.selection,L=e.dom,w=function(e){var t=f.find("#text");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text().replace(/^\s+/,"")),f.find("#href").value(e.control.value())},C=function(e){r(e.control.value(),_)},_=function(e){v.menu&&(v.menu.remove(),v.menu=null),v.state.data.menu=v.settings.values=e},R=function(n){var i=[];if(t.each(e.dom.select("a:not([href])"),function(e){var t=e.name||e.id;t&&i.push({text:t,value:"#"+t,selected:n.indexOf("#"+t)!=-1})}),i.length)return i.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:i,onselect:w}},S=function(){c||!g||b.text||this.parent().parent().find("#text")[0].value(this.value())},A=function(n){var i=n.meta||{};m&&m.value(e.convertURL(this.value(),"href")),t.each(n.meta,function(e,t){var n=f.find("#"+t);"text"===t?0===c.length&&(n.value(e),b.text=e):n.value(e)}),i.attach&&(l={href:this.value(),attach:i.attach}),i.text||S.call(this)},M=function(e){e.meta=f.toJSON()};g=i.isOnlyTextSelected(T.getContent()),s=i.getAnchorElement(e),b.text=c=i.getAnchorText(e.selection,s),b.href=s?L.getAttrib(s,"href"):"",s?b.target=L.getAttrib(s,"target"):o.hasDefaultLinkTarget(e.settings)&&(b.target=o.getDefaultLinkTarget(e.settings)),(x=L.getAttrib(s,"rel"))&&(b.rel=x),(x=L.getAttrib(s,"class"))&&(b["class"]=x),(x=L.getAttrib(s,"title"))&&(b.title=x),g&&(d={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){b.text=this.value()}}),n&&(m={type:"listbox",label:"Service",values:a(n,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:C,onPostRender:function(){m=this}},v={type:"listbox",label:"Page",values:a([],function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:w,value:e.convertURL(b.href,"href"),onPostRender:function(){v=this}}),o.shouldShowTargetList(e.settings)&&(void 0===o.getTargetList(e.settings)&&o.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),h={name:"target",type:"listbox",label:"Target",values:a(o.getTargetList(e.settings))}),o.hasRelList(e.settings)&&(p={name:"rel",type:"listbox",label:"Rel",values:a(o.getRelList(e.settings),function(t){o.allowUnsafeLinkTarget(e.settings)===!1&&(t.value=i.toggleTargetRules(t.value,"_blank"===b.target))})}),o.hasLinkClassList(e.settings)&&(k={name:"class",type:"listbox",label:"Class",values:a(o.getLinkClassList(e.settings),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),o.shouldShowLinkTitle(e.settings)&&(y={name:"title",type:"textbox",label:"Title",value:b.title}),f=e.windowManager.open({title:"Insert link",data:b,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:A,onkeyup:S,onbeforecall:M},d,y,R(b.href),m,v,p,h,k],onSubmit:function(n){var r=o.assumeExternalTargets(e.settings),a=i.link(e,l),s=i.unlink(e),f=t.extend({},b,n.data),d=f.href;return d?(g&&f.text!==c||delete f.text,d.indexOf("@")>0&&d.indexOf("//")==-1&&d.indexOf("mailto:")==-1?void u(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(f.href="mailto:"+d),a(f)}):r===!0&&!/^\w+:/i.test(d)||r===!1&&/^\s*www[\.|\d\.]/i.test(d)?void u(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(f.href="http://"+d),a(f)}):void a(f)):void s()}})},c=function(e){r(e,s)};return{open:c}}),r("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),r("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),r("tinymce.plugins.link.core.OpenUrl",["tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(e,t){var n=function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)},i=function(i){if(!t.ie||t.ie>10){var o=document.createElement("a");o.target="_blank",o.href=i,o.rel="noreferrer noopener";var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n(o,l)}else{var r=window.open("","_blank");if(r){r.opener=null;var a=r.document;a.open(),a.write('<meta http-equiv="refresh" content="0; url='+e.DOM.encode(i)+'">'),a.close()}}};return{open:i}}),r("tinymce.plugins.link.core.Actions",["tinymce.core.util.VK","tinymce.plugins.link.ui.Dialog","tinymce.plugins.link.core.OpenUrl","tinymce.plugins.link.core.Utils","tinymce.plugins.link.core.Settings"],function(e,t,n,i,o){var l=function(e,t){return e.dom.getParent(t,"a[href]")},r=function(e){return l(e,e.selection.getStart())},a=function(e){var t=e.getAttribute("data-mce-href");return t?t:e.getAttribute("href")},u=function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()},s=function(e){return e.altKey===!0&&e.shiftKey===!1&&e.ctrlKey===!1&&e.metaKey===!1},c=function(e,t){if(t){var i=a(t);if(/^#/.test(i)){var o=e.$(i);o.length&&e.selection.scrollIntoView(o[0],!0)}else n.open(t.href)}},f=function(e){return function(){t.open(e)}},g=function(e){return function(){c(e,r(e))}},d=function(e){return function(t){var n,l,r;return!!(o.hasContextToolbar(e.settings)&&!u(e)&&i.isLink(t)&&(n=e.selection,l=n.getRng(),r=l.startContainer,3==r.nodeType&&n.isCollapsed()&&l.startOffset>0&&l.startOffset<r.data.length))}},m=function(t){t.on("click",function(n){var i=l(t,n.target);i&&e.metaKeyPressed(n)&&(n.preventDefault(),c(t,i))}),t.on("keydown",function(e){var n=r(t);n&&13===e.keyCode&&s(e)&&(e.preventDefault(),c(t,n))})},v=function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!i.getAnchorElement(e,n.element))})}},p=function(e){return function(){var t=this,n=function(e){i.hasLinks(e.parents)?t.show():t.hide()};i.hasLinks(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",function(){e.off("nodechange",n)})}};return{openDialog:f,gotoSelectedLink:g,leftClickedOnAHref:d,setupGotoLinks:m,toggleActiveState:v,toggleViewLinkState:p}}),r("tinymce.plugins.link.ui.Controls",["tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Utils"],function(e,t){var n=function(n){n.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:e.openDialog(n),onpostrender:e.toggleActiveState(n)}),n.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onclick:t.unlink(n),onpostrender:e.toggleActiveState(n)}),n.addContextToolbar&&n.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:e.gotoSelectedLink(n)})},i=function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:e.gotoSelectedLink(t),onPostRender:e.toggleViewLinkState(t),prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:e.openDialog(t),stateSelector:"a[href]",context:"insert",prependToContext:!0})},o=function(t){t.addContextToolbar&&t.addContextToolbar(e.leftClickedOnAHref(t),"openlink | link unlink")};return{setupButtons:n,setupMenuItems:i,setupContextToolbars:o}}),r("tinymce.plugins.link.Plugin",["tinymce.core.PluginManager","tinymce.plugins.link.core.Actions","tinymce.plugins.link.ui.Controls"],function(e,t,n){return e.add("link",function(e){n.setupButtons(e),n.setupMenuItems(e),n.setupContextToolbars(e),t.setupGotoLinks(e),e.addShortcut("Meta+K","",t.openDialog(e)),e.addCommand("mceLink",t.openDialog(e))}),function(){}}),i("tinymce.plugins.link.Plugin")()}();
},{}],428:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),LoaderTpl=require(417),ControllerChannel=Backbone.Radio.channel("controller");module.exports=Marionette.View.extend({template:require(407),links:[{title:"Kiubi",href:"/"}],actions:null,lockActions:!1,tabs:null,ui:{defaultAction:"button[data-role='default-action']",otherActions:"[data-role='other-actions'] li"},events:{"click @ui.defaultAction":"onActionEvent","click @ui.otherActions":"onActionEvent"},initialize:function(){this.listenTo(ControllerChannel,"modified:content",_.debounce(this.onModifiedContent,300)),this.listenTo(ControllerChannel,"saved:content",this.onSavedContent)},onModifiedContent:function(t){var n=!1;_.each(this.actions,function(t,e){t.activateOnEvent&&"modified:content"==t.activateOnEvent&&!t.isEnabled&&(t.isEnabled=!0,n=!0),t.bubbleOnEvent&&"modified:content"==t.bubbleOnEvent&&!t.isOnTop&&(t.isOnTop=!0,n=!0)}.bind(this)),n&&this.render()},onSavedContent:function(t){var n=!1;_.each(this.actions,function(t,e){t.activateOnEvent&&"modified:content"==t.activateOnEvent&&t.isEnabled&&(t.isEnabled=!1,n=!0),t.bubbleOnEvent&&"modified:content"==t.bubbleOnEvent&&t.isOnTop&&(t.isOnTop=!1,n=!0)}.bind(this)),n&&this.render()},onActionEvent:function(t){var n=Backbone.$(t.currentTarget).data("id"),e=_.findWhere(this.getOption("actions"),{index:n});e&&e.callback&&e.isEnabled&&this.onAction(e.callback)},onAction:function(t){if(!this.lockActions){this.lockActions=!0;var n=t();if(!n)return void(this.lockActions=!1);var e=this.getUI("defaultAction"),i=this,o=e.text();e.html(LoaderTpl()),e.addClass("btn-load"),n.always(function(){e.removeClass("btn-load"),e.text(o),i.lockActions=!1})}},templateContext:function(){var t=[];return this.getOption("actions")&&this.getOption("actions").length>0&&(t=t.concat(_.filter(this.getOption("actions"),function(t){return t.isOnTop}),_.filter(this.getOption("actions"),function(t){return!t.isOnTop}))),{links:this.getOption("links"),actions:t,tabs:this.getOption("tabs")}},setBreadCrum:function(t){this.links=t},setActions:function(t){_.each(t,function(t,n){t.isEnabled=!t.activateOnEvent,t.isOnTop=!1,t.index=n}),this.actions=t},setTabs:function(t){this.tabs=t}});
},{"407":407,"417":417,"undefined":undefined}],429:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),View=Marionette.View.extend({el:"body",template:_.noop,regions:{header:"header",sidebar:"#sidebar",sidebarMenu:"#sidebar-menu",content:"#content",modal:"#modal"},triggers:{drop:{event:"drop",preventDefault:!0},dragover:{event:"dragover",preventDefault:!0}},childViewEvents:{"sidebarmenu:toggle":function(){this.$el.toggleClass("closed")}},lockMenu:function(){this.$el.addClass("closed")},unlockMenu:function(){this.$el.removeClass("closed")},initialize:function(e){this.mergeOptions(e,["application"]);var t=this;Backbone.$(window).resize(_.debounce(function(e){Backbone.$(document).width()<1155?t.lockMenu():t.unlockMenu()},300)),Backbone.$(document).width()<1155&&setTimeout(this.lockMenu.bind(this),2e3)},events:{"click a[href^=\\/]":function(e){if("_blank"!=e.currentTarget.getAttribute("target")){e.preventDefault();var t={trigger:!0};return Backbone.$(e.currentTarget).data("preventPushState")&&(t.preventPushState=!0),this.trigger("navigate",Backbone.$(e.currentTarget).attr("href"),t),!1}}}});module.exports=View;
},{"undefined":undefined}],430:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),navigationChannel=Backbone.Radio.channel("navigation");module.exports=Marionette.View.extend({template:require(408),triggers:{"click a.bt-closed":"sidebarmenu:toggle"},modelEvents:{authenticate:"onAuthenticate"},initialize:function(e){this.mergeOptions(e,["model","collection"]),this.listenTo(navigationChannel,"change:url",this.onChangeURL)},serializeWhere:function(e){return _.invoke(this.collection.where(e),"toJSON")},templateContext:function(){return{isAuth:this.model.isAuth(),initials:this.model.get("firstname").charAt(0)+"."+this.model.get("lastname").charAt(0)+".",mainItems:this.serializeWhere({type:"main"}),toolsItems:this.serializeWhere({type:"tools"})}},onAuthenticate:function(){this.render()},onChangeURL:function(e){var t=this.collection.findWhere({is_active:!0}),i="/"+(e.path+"/").split(/\//)[1];if(!t||t.get("path")!=i){var n=this.collection.findWhere({path:"/"+(e.path+"/").split(/\//)[1]});n&&(t&&this.collection.invoke("set","is_active",!1),n.set("is_active",!0),this.render())}}});
},{"408":408,"undefined":undefined}],431:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.View.extend({template:require(410),service:"",ui:{"site-search":'[data-role="site-search"]',"input-search":'[data-role="site-search"] input'},events:{"click @ui.site-search a":"onChooseSite","hide.bs.dropdown":function(e){this.emptyList(),this.getUI("input-search").val("")},"shown.bs.dropdown":function(e){this.getUI("site-search").one(Backbone.$.support.transition.end,function(){this.getUI("input-search").focus()}.bind(this))}},regions:{detail:{el:'div[data-role="content"]',replaceElement:!0}},templateContext:function(){return{fqdn:this.model.get("domain").replace(/^https?:\/\//,"")}},initialize:function(e){this.mergeOptions(e,["model"]),this.listenTo(this.model,"change",this.onSessionChange)},onSessionChange:function(e){if(e.hasChanged("domain")||e.hasChanged("name")){var t=this.detachChildView("detail");this.render(),t&&this.showChildView("detail",t)}},onRender:function(){this.getUI("input-search").on("keyup",_.debounce(this.onChange.bind(this),300))},onChange:function(e){this.model.searchSite(Backbone.$(e.currentTarget).val()).done(function(e){var t="";t=e.length>0?_.reduce(e,function(e,t){return e+'<li><a href="#" title="'+t.domain+'" data-site="'+t.code_site+'">'+t.domain+"</a></li>"},'<li role="separator" class="divider"></li>'):'<li role="separator" class="divider"></li><li class="dropdown-content">-- Aucun résultat --</li>',this.emptyList().append(t),this.getUI("input-search").focus()}.bind(this))},onChooseSite:function(e){var t=Backbone.$(e.currentTarget).data("site");if(t){var i=Backbone.Radio.channel("app").request("ctx:session");i.changeSite(t).done(function(){var e=Backbone.Radio.channel("app").request("ctx:navigationController");e.showOverlay(300),e.navigate("/")})}},emptyList:function(){var e=this.getUI("site-search").children().eq(0).detach();return this.getUI("site-search").empty().append(e)}});
},{"410":410,"undefined":undefined}],432:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.View.extend({template:require(411),tagName:"div",current:null,name:"",ui:{drop:".dropdown",sel:'.dropdown li[data-role="selection"]',lixtra:'.dropdown li[data-role="xtra"]'},events:{"keyup @ui.drop input":_.debounce(function(e){this.term=Backbone.$(e.currentTarget).val(),this.triggerMethod(this.eventName("input"),this.term,this)},300),"click @ui.sel":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||t>this.suggestions.length||(this.current=this.suggestions[t].value,Backbone.$("input",this.el).val(this.current))},"click @ui.lixtra":function(e){var t=Backbone.$(e.currentTarget).data("event");this.triggerMethod(this.eventName(t),this.term,this)}},suggestions:null,searchPlaceholder:"Rechercher",noResultsLabel:"-- Aucun résultat --",evtSuffix:"",eventName:function(e){return this.evtSuffix?e+":"+this.evtSuffix:e},initialize:function(e){this.mergeOptions(e,["evtSuffix","current","name"])},templateContext:function(){return{name:this.name,current:this.current,searchPlaceholder:this.searchPlaceholder}},showResults:function(e,t){this.suggestions=e;var i="";e.length>0?i=_.reduce(e,function(e,t,i){return e+'<li data-role="selection" data-index="'+i+'"><a href="#">'+t.label+"</a></li>"},""):this.emptyLabel&&(i='<li><a href="#">'+this.noResultsLabel+"</a></li>"),t&&(t=_.extend({title:"Ajouter",iconClass:"md-add-outline",eventName:"xtra"},t),i+='<li role="separator" class="divider"></li><li data-role="xtra" data-event="'+t.eventName+'"><a href="#">'+t.title+'<span class="md-icon '+t.iconClass+'"></span></a></li>'),this.getUI("drop").children("ul").html(i),this.getUI("drop").addClass("open")}});
},{"411":411,"undefined":undefined}],433:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");require(425);var CollectionUtils=require(422),InfiniteScrollBehavior=require(21),SelectifyBehavior=require(24),LoaderTpl=require(417),filterCollection=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{id:null,title:"",type:"select",extraClassname:"",collectionPromise:null,collection:null}})}),FilterBtnView=Marionette.View.extend({template:require(412),className:"btn-group",ui:{dropdown:'[data-toggle="dropdown"]'},events:{"click button":"onButtonChange","click li a":"onSelectChange"},oClassname:"",initialize:function(e){return this.mergeOptions(e,["model","proxy"]),this.model.get("collectionPromise")?void(this.model.get("collectionPromise").then?this.model.get("collectionPromise").done(function(e){this.setCollection(e),this.render()}.bind(this)):this.setCollection(this.model.get("collectionPromise"))):void this.setCollection(new CollectionUtils.SelectCollection)},setCollection:function(e){this.collection=e,this.listenTo(this.collection,"update",this.render),this.listenTo(this.collection,"reset",this.render)},overrideExtraClassname:function(e){this.oClassname=e},templateContext:function(){return{extraClassname:this.oClassname?this.oClassname:this.model.get("extraClassname"),collection:this.collection.toJSON()}},toggleDropdown:function(){this.getUI("dropdown").dropdown("toggle")},onRender:function(){this.getUI("dropdown").dropdown()},onButtonChange:function(e){return this.proxy.triggerMethod("filter:change",{index:this.model.collection.indexOf(this.model),model:this.model,value:null,view:this}),e.stopPropagation(),e.preventDefault(),!1},onSelectChange:function(e){var t=Backbone.$(e.currentTarget,this.el);this.proxy.triggerMethod("filter:change",{index:this.model.collection.indexOf(this.model),model:this.model,value:t.data("value"),view:this})}}),FilterSelectView=Marionette.View.extend({template:require(415),className:"btn-group",behaviors:[SelectifyBehavior],events:{"change select":"onSelectChange"},collection:null,initialize:function(e){this.mergeOptions(e,["model","proxy"]),this.model.get("collectionPromise")&&(this.model.get("collectionPromise").then?this.model.get("collectionPromise").done(function(e){this.collection=e,this.render()}.bind(this)):this.collection=this.model.get("collectionPromise"))},templateContext:function(){return{collection:this.collection?this.collection.toJSON():null,indent2Space:function(e){if(0==e)return"";for(var t="",i=0;i<e;i++)t+="&nbsp;&nbsp;";return t}}},onSelectChange:function(e){var t=Backbone.$(e.currentTarget,this.el);this.proxy.triggerMethod("filter:change",{index:this.model.collection.indexOf(this.model),model:this.model,value:t.val(),view:this})}}),FilterSearchView=Marionette.View.extend({template:require(414),tagName:"div",className:"btn-group dropdown",ui:{label:'span[data-role="label"]',li:'li[data-role="selection"]',clear:'span[data-role="clear"]',input:'input[data-role="input"]',"dropdown-menu":".dropdown-menu"},events:{"shown.bs.dropdown":function(e){this.getUI("input").focus()},"click @ui.li":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||t>this.suggestions.length||(this.setCurrent(this.suggestions[t]),this.proxy.triggerMethod("filter:change",{model:this.model,value:this.current.value,view:this}))},"keyup @ui.input":_.debounce(function(){this.term=this.getUI("input").val(),this.proxy.triggerMethod("filter:input",{model:this.model,value:this.term,view:this})},300),"click @ui.clear":function(e){if(null!=this.current.value)return e.preventDefault(),this.setCurrent({label:this.model.get("title"),value:null}),this.proxy.triggerMethod("filter:change",{model:this.model,value:null,view:this}),!1}},term:"",current:{label:"",value:null},suggestions:null,searchPlaceholder:"Rechercher",initialize:function(e){this.mergeOptions(e,["model","proxy"]),this.current={label:this.model.get("title"),value:null}},setCurrent:function(e){this.current=e,this.getUI("label").text(e.label||""),null==this.current.value?this.getUI("clear").removeClass("md-cancel"):this.getUI("clear").addClass("md-cancel")},showResults:function(e,t){this.suggestions=e;var i="";i=e.length>0?_.reduce(e,function(e,t,i){return e+'<li data-role="selection" data-index="'+i+'"><a href="#">'+t.label+"</a></li>"},'<li role="separator" class="divider"></li>'):'<li role="separator" class="divider"></li><li><a href="#">-- Aucun résultat --</a></li>',this.emptyList(this.getUI("dropdown-menu")).append(i),this.getUI("input").focus()},templateContext:function(){return{term:this.term,searchPlaceholder:this.searchPlaceholder,current:this.current}},emptyList:function(e){var t=e.children().eq(0).detach();return e.empty().append(t)}}),FilterInputView=Marionette.View.extend({template:require(413),className:"form-group has-feedback",ui:{term:'input[name="term"]'},currentTerm:"",events:{"keyup @ui.term":_.debounce(function(e){var t=this.getUI("term").val();t!=this.currentTerm&&(this.currentTerm=t,this.onInputChange(t))},300)},initialize:function(e){this.mergeOptions(e,["model","proxy"])},onInputChange:function(e){this.proxy.triggerMethod("filter:change",{model:this.model,value:e,view:this})}}),FiltersView=Marionette.CollectionView.extend({tagName:"span",childView:FilterSelectView,buildChildView:function(e,t,i){var n=_.extend({model:e},i);switch(e.get("type")){case"select":default:return new FilterSelectView(n);case"button":return new FilterBtnView(n);case"search":return new FilterSearchView(n);case"input":return new FilterInputView(n)}}}),NoChildrenView=Marionette.View.extend({template:_.template('<span class="list-item-empty">Il n\'y a encore rien à afficher...</span>')}),ListView=Marionette.CollectionView.extend({className:function(){return"post-content post-list "+this.getOption("extraListClassname")},emptyView:NoChildrenView,events:{sortupdate:"onSortUpdate"},onRender:function(){Backbone.$(this.el).sortable({handle:".btn-drag",axis:"y"})},onAddChild:function(e,t){t.$el.attr("data-id",t.model.id)},onSortUpdate:function(e,t){var i=t.item,n=i.parent().children().index(i),l=this.collection.get(i.data("id")),o=this.children.findByModel(l),r={};return 0==n?r.before_id=i.next().data("id"):r.after_id=i.prev().data("id"),o.triggerMethod("sort:change",r),this.triggerMethod("sort:change",r),!0}});module.exports=Marionette.View.extend({template:require(416),regions:{list:{el:"div[data-role='list']",replaceElement:!0},detail:{el:"div[data-role='detail']",replaceElement:!0},filters:{el:"span[data-role='filters']",replaceElement:!0},"new":{el:"div[data-role='new']",replaceElement:!0}},title:"Liste",filters:[],filterModal:null,order:null,selection:[],lock:!1,newRowView:null,behaviors:[InfiniteScrollBehavior],scrollThreshold:null,scrollContentEl:null,ui:{order:'[data-role="order"] li',loading:"div[data-role='loading']",select:"#selection_all",action:'[data-role="action"]',"action-main":'[data-role="bulk-action"]',"row-select":'input[name="selection"]',"select-all":'[data-role="select-all"]',counter:'[data-role="counter"]'},events:{"click @ui.order":"changeOrder","click @ui.select":"selectAll","click @ui.action":"onAction","hidden.bs.dropdown .btn-group":"onHiddenDropDown","click @ui.row-select":"selectRow"},initialize:function(e){this.mergeOptions(e,["rowView","newRowView"]),this.listenTo(this.getOption("collection"),"request",this.onCollectionRequest),this.listenTo(this.getOption("collection"),"sync",this.onCollectionSync),this.listenTo(this.getOption("collection"),"sync update",this.selectRow)},templateContext:function(){return{title:this.getOption("title"),order:this.getOption("order"),filterModal:this.getOption("filterModal"),selection:this.getOption("selection"),extraClassname:this.getOption("extraClassname")}},getChildren:function(){return this.getChildView("list").children},setCounterText:function(e){this.getUI("counter").text(e)},onRender:function(){var e=_.extend({proxy:this},this.getOption("childViewOptions"));if(this.showChildView("list",new ListView({collection:this.getOption("collection"),childView:this.rowView,childViewOptions:e,extraListClassname:this.getOption("extraListClassname")})),this.getOption("filters").length>0&&this.showChildView("filters",new FiltersView({collection:new filterCollection(this.getOption("filters")),childViewOptions:{proxy:this}})),null!=this.newRowView){var t=_.extend({proxy:this,collection:this.getOption("collection")},this.getOption("childViewOptions"));this.showChildView("new",new this.newRowView(t))}this.getOption("detailView")&&this.showChildView("detail",this.getOption("detailView"))},onCollectionRequest:function(e,t,i){e.models&&this.getUI("loading").show()},onCollectionSync:function(e){this.getUI("loading").hide()},changeOrder:function(e){var t=Backbone.$(e.currentTarget).data("id"),i=this.getOption("order");if(!(t>=i.length)){var n=i[t];n.is_active||(Backbone.$.each(i,function(){this.is_active=this==n}),this.getUI("order").each(function(){var e=Backbone.$(this);e.data("id")==t?e.addClass("active"):e.removeClass("active")}),this.triggerMethod("change:order",n.value))}},selectRow:function(){var e=Backbone.$('input[name="selection"]:checked',this.el).length,t=Backbone.$('input[name="selection"]',this.el).length;e>0?(this.getUI("action-main").parent().parent().removeClass("hidden"),this.getUI("select-all").addClass("hidden"),this.setCounterText(" : "+e+(e>1?" sélectionnés":" sélectionné"))):(this.getUI("action-main").parent().parent().addClass("hidden"),this.getUI("select-all").removeClass("hidden"),this.setCounterText("")),0==t||0==e?(this.getUI("select").prop("checked",!1),this.getUI("select").removeClass("partiel")):t==e?(this.getUI("select").prop("checked",!0),this.getUI("select").removeClass("partiel")):(this.getUI("select").prop("checked",!1),this.getUI("select").addClass("partiel"))},selectAll:function(e){Backbone.$('input[name="selection"]',this.el).prop("checked",e.currentTarget.checked).change(),this.selectRow()},onAction:function(e){var t=Backbone.$(e.currentTarget),i=t.data("id");if(!(i>=this.getOption("selection").length)&&this.getOption("selection")[i]&&this.getOption("selection")[i].callback){var n=this.getOption("selection")[i];if(n.confirm&&!t.parent().hasClass("confirm-warning"))return t.parent().addClass("confirm-warning"),t.data("title",t.text()),t.text("Êtes-vous sûr ?"),e.preventDefault(),!1;var l=Backbone.$('input[name="selection"]:checked',this.getChildView("list").el).map(function(e,t){return t.value});if(!this.lock){if(this.lock=!0,0==l.length)return void(this.lock=!1);var o=n.callback(l);if(!o)return n.confirm&&(t.parent().removeClass("confirm-warning"),t.text(t.data("title"))),void(this.lock=!1);var r=this.getUI("action-main").find("span:first-of-type");r.data("title",r.text()),r.addClass("btn-load btn-load-inverse"),r.html(LoaderTpl()),o.then(function(){this.lock=!1,n.confirm&&(t.parent().removeClass("confirm-warning"),t.text(t.data("title"))),r.text(r.data("title")),r.removeClass("btn-load btn-load-inverse")}.bind(this))}}},onHiddenDropDown:function(e){Backbone.$(".dropdown-menu a",e.currentTarget).each(function(e,t){t=Backbone.$(t),t.parent().hasClass("confirm-warning")&&(t.text(t.data("title")),t.parent().removeClass("confirm-warning"))})},onChildviewSortChange:function(e){e.list=[],this.getChildView("list").$el.children().each(function(t,i){e.list.push(Backbone.$(i).data("id"))}),this.triggerMethod("sort:change",e)}});
},{"21":21,"24":24,"412":412,"413":413,"414":414,"415":415,"416":416,"417":417,"422":422,"425":425,"undefined":undefined}],434:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.Object.extend({nodeInfo:function(e){return{url:"#",name:"Node "+e.cid,is_active:!1,extraClassname:""}},openNodes:[],openNode:function(e){_.indexOf(this.openNodes,e)==-1&&this.openNodes.push(e)},closeNode:function(e){_.indexOf(this.openNodes,e)>=0&&(this.openNodes=_.without(this.openNodes,e))},isNodeOpen:function(e){return _.indexOf(this.openNodes,e)>=0},rootFooter:function(e){return""},initialize:function(e){this.mergeOptions(e,["nodeInfo","rootFooter"])},render:function(e){var n="",t=!1;if(_.each(e.childs,function(e){var o=null,i="",s="",a=!1,r=this.nodeInfo(e.model),d=e.model.get(e.model.idAttribute);e.childs.length>0&&(o=this.render(e),a=o.has_active_child||this.isNodeOpen(d),i+=a?"menu-expand-less":"menu-expand-more",s='data-toggle="collapse" href="#menutree'+d+'" aria-expanded="'+(a?"true":"false")+'" aria-controls="menutree'+d+'"',a&&this.openNode(d)),r.extraClassname&&(i+=" "+r.extraClassname),r.is_active&&(i+=" active"),(r.is_active||a)&&(t=!0),n+='<li class="'+i+'"><span class="menu-expand" '+s+'></span><a href="'+r.url+'" title="'+_.escape(r.name)+'"><span class="md-icon"></span>'+_.escape(r.name)+"</a></li>",o&&(n+=o.html)}.bind(this)),e.model){var o="menutree"+e.model.get(e.model.idAttribute),i=t||this.isNodeOpen(e.model.get(e.model.idAttribute))?"collapse in":"collapse";n='<div class="menu-tree"><ul class="nav nav-sidebar '+i+'" id="'+o+'">'+n+"</ul></div>"}else n='<div class="menu-tree"><ul class="nav nav-sidebar">'+n+this.rootFooter(e)+"</ul></div>";return{html:n,has_active_child:t}}});
},{"undefined":undefined}],435:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette");module.exports=Marionette.View.extend({template:require(418),tagName:"div",className:"overlay fade",ui:{modal:".modal",closeBtn:'button[data-role="close"]',actionBtn:'button[data-role="action"]'},events:{"click @ui.closeBtn":"close","click @ui.actionBtn":"onAction",click:function(t){t.target!=this.el&&t.target.parentNode!=this.el||this.close(!0)}},regions:{content:"div.modal-body"},title:"Mon titre",modalClass:"",action:null,keyCombos:[],templateContext:function(){return{title:this.getOption("title"),modalClass:this.getOption("modalClass"),modalDialogClass:this.getOption("modalDialogClass"),action:this.getOption("action")}},initialize:function(t){this.mergeOptions(t),this.keyListener=Backbone.Radio.channel("app").request("ctx:keyListener")},onRender:function(){this.keyCombos.push(this.keyListener.register_combo({keys:"esc",is_exclusive:!0,on_keydown:this.close,"this":this})),this.getUI("modal").css("display","block"),setTimeout(function(){this.$el.addClass("in")}.bind(this),10),setTimeout(function(){this.getUI("modal").addClass("in")}.bind(this),150)},onDestroy:function(){this.keyListener.unregister_many(this.keyCombos)},close:function(t){return t?(this.$el.removeClass("in"),this.getUI("modal").removeClass("in"),void setTimeout(function(){this.destroy()}.bind(this),300)):void this.destroy()},onAction:function(){var t=this.getChildView("content");t&&t.triggerMethod("action:modal",t)},onChildviewCloseModal:function(t){this.close(t)}});
},{"418":418,"undefined":undefined}],436:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),SelectifyBehavior=require(24);module.exports=Marionette.View.extend({template:_.template('<select data-style="selectify" name="<%- name %>" data-direction="<%- direction %>"><% if(emptyLabel) { %><option value=""><%- emptyLabel %></option><% } %><% _(options).each(function(item){ %><% if (item.is_group) { %><optgroup data-indent="<%= item.indent %>" label="<%- item.label %>"></optgroup><% } else { %><option data-indent="<%= item.indent %>" value="<%- item.value %>" <%= (item.selected || item.value == selected) ? \'selected="selected"\' : "" %>><%- item.label %></option><% } %><% }) %></select>'),tagName:"div",className:"",extraClassName:"",behaviors:[SelectifyBehavior],collectionEvents:{sync:function(){this.render()}},ui:{select:"select"},direction:"down",selected:null,name:"",emptyLabel:"",dataSource:null,datas:null,initialize:function(e){this.mergeOptions(e,["selected","name","collection","direction"]),this.getOption("extraClassName")&&this.$el.addClass(this.getOption("extraClassName")),this.getOption("dataSource")&&this.load(this.getOption("dataSource")),this.getOption("collectionPromise")&&this.loadCollection(this.getOption("collectionPromise")),this.collection&&this.collection.selectPayload&&this.listenTo(this.collection,"sync",this.render)},load:function(e){this.dataSource=e,this.dataSource.done(function(e){this.datas=e,this.render()}.bind(this))},loadCollection:function(e){this.dataSource=e,this.dataSource.done(function(e){this.datas=e.toJSON();var t=e.findWhere({selected:!0});t&&(this.selected=t.get("value")),this.render()}.bind(this))},onSelect:function(e){this.selected=Backbone.$(e.currentTarget).val(),this.triggerMethod("change",this.selected,this.getOption("name"))},getOptionsList:function(){return this.dataSource&&this.datas?this.datas:this.collection&&this.collection.selectPayload?this.collection.selectPayload():[]},onRender:function(){if(this.getUI("select").on("change",this.onSelect.bind(this)),null==this.selected&&!this.getOption("emptyLabel")){var e=this.getOptionsList();e.length&&(this.selected=e[0].value)}},templateContext:function(){return{name:this.getOption("name"),direction:this.direction,selected:this.selected,emptyLabel:this.getOption("emptyLabel"),options:this.getOptionsList()}},onBeforeDestroy:function(){this.getUI("select").off("change")}});
},{"24":24,"undefined":undefined}],437:[function(require,module,exports){
function emptyList(e){var t=e.children().eq(0).detach();return e.empty().append(t)}var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore");module.exports=Marionette.View.extend({template:require(419),tagName:"div",className:"dropdown",ui:{label:'span[data-role="label"]',li:'li[data-role="selection"]',lixtra:'li[data-role="xtra"]',clear:'span[data-role="clear"]',input:'input[data-role="input"]',"dropdown-menu":".dropdown-menu"},events:{"shown.bs.dropdown":function(e){this.getUI("input").focus()},"click @ui.li":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||t>this.suggestions.length||(this.setCurrent(this.suggestions[t]),this.triggerMethod(this.eventName("change"),this.suggestions[t],this))},"click @ui.lixtra":function(e){var t=Backbone.$(e.currentTarget).data("event");this.triggerMethod(this.eventName(t),this.term,this)},"keyup @ui.input":_.debounce(function(){this.term=this.getUI("input").val(),this.triggerMethod(this.eventName("input"),this.term,this)},300),"click @ui.clear":function(e){if(!this.isMandatory&&null!=this.current.value)return e.preventDefault(),this.setCurrent({label:"",value:null}),this.triggerMethod(this.eventName("change"),this.current,this),!1}},term:"",current:{label:"",value:null},suggestions:null,isMandatory:!0,searchPlaceholder:"Rechercher",evtSuffix:null,eventName:function(e){return this.evtSuffix?e+":"+this.evtSuffix:e},initialize:function(e){this.mergeOptions(e,["current","searchPlaceholder","evtSuffix","isMandatory"])},setCurrent:function(e){this.current=e,this.getUI("label").text(e.label||""),this.isMandatory||(null==this.current.value?this.getUI("clear").removeClass("md-cancel"):this.getUI("clear").addClass("md-cancel"))},showResults:function(e,t){this.suggestions=e;var i="";i=e.length>0?_.reduce(e,function(e,t,i){return e+'<li data-role="selection" data-index="'+i+'"><a href="#">'+t.label+"</a></li>"},'<li role="separator" class="divider"></li>'):'<li role="separator" class="divider"></li><li><a href="#">-- Aucun résultat --</a></li>',t&&(t=_.extend({title:"Ajouter",iconClass:"md-add-outline",eventName:"xtra"},t),i+='<li role="separator" class="divider"></li><li data-role="xtra" data-event="'+t.eventName+'"><a href="#">'+t.title+'<span class="md-icon '+t.iconClass+'"></span></a></li>'),emptyList(this.getUI("dropdown-menu")).append(i),this.getUI("input").focus()},templateContext:function(){return{id:this.cid,term:this.term,searchPlaceholder:this.searchPlaceholder,current:this.current,isMandatory:this.isMandatory}},getCurrent:function(){return this.current}});
},{"419":419,"undefined":undefined}],438:[function(require,module,exports){
var Backbone=require("backbone"),Marionette=require("backbone.marionette"),_=require("underscore"),TagView=Marionette.View.extend({template:_.template('<span class="label-content" title="<%- label %>"><%- label %></span><span data-role="delete" class="md-icon md-close"></span>'),className:"label label-tag label-list",tagName:"span",ui:{deleteBtn:'span[data-role="delete"]'},events:{"click @ui.deleteBtn":function(){this.model.destroy()}}}),TagsView=Marionette.CollectionView.extend({className:"",childView:TagView});module.exports=Marionette.View.extend({template:require(420),tagName:"div",regions:{list:{el:'span[data-role="list"]',replaceElement:!0}},ui:{drop:".dropdown",sel:'.dropdown li[data-role="selection"]',lixtra:'.dropdown li[data-role="xtra"]'},events:{"keyup @ui.drop input":_.debounce(function(e){this.term=Backbone.$(e.currentTarget).val(),this.triggerMethod(this.eventName("input"),this.term,this)},300),"click @ui.sel":function(e){var t=parseInt(Backbone.$(e.currentTarget).data("index"));isNaN(t)||t>this.suggestions.length||(this.collection.add(this.suggestions[t]),Backbone.$("input",this.el).val(""))},"click @ui.lixtra":function(e){var t=Backbone.$(e.currentTarget).data("event");this.triggerMethod(this.eventName(t),this.term,this)}},suggestions:null,searchPlaceholder:"Rechercher",inputName:"",evtSuffix:"",eventName:function(e){return this.evtSuffix?e+":"+this.evtSuffix:e},initialize:function(e){this.mergeOptions(e,["evtSuffix","searchPlaceholder","inputName"]),this.collection=new Backbone.Collection,this.collection.model=Backbone.Model.extend({idAttribute:"value",defaults:{label:"",value:null},isNew:function(){return!0}}),this.getOption("tags")&&this.collection.add(this.getOption("tags"))},onRender:function(){this.showChildView("list",new TagsView({collection:this.collection}))},templateContext:function(){return{searchPlaceholder:this.searchPlaceholder,inputName:this.inputName}},showResults:function(e,t){this.suggestions=e;var i="";i=e.length>0?_.reduce(e,function(e,t,i){return e+'<li data-role="selection" data-index="'+i+'"><a href="#">'+t.label+"</a></li>"},""):'<li><a href="#">-- Aucun résultat --</a></li>',t&&(t=_.extend({title:"Ajouter",iconClass:"md-add-outline",eventName:"xtra"},t),i+='<li role="separator" class="divider"></li><li data-role="xtra" data-event="'+t.eventName+'"><a href="#">'+t.title+'<span class="md-icon '+t.iconClass+'"></span></a></li>'),this.getUI("drop").children("ul").html(i),this.getUI("drop").addClass("open")},addTag:function(e){this.collection.add(e),Backbone.$("input",this.el).val("")},getTags:function(){return this.collection.toJSON()}});
},{"420":420,"undefined":undefined}]},{},[17])

